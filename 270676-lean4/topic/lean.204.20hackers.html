---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/lean.204.20hackers.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/lean.204.20hackers.html">lean 4 hackers</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="261451747"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/lean%204%20hackers/near/261451747" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> James King <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/lean.204.20hackers.html#261451747">(Nov 15 2021 at 02:43)</a>:</h4>
<p>I pushed the new guide up tonight: <a href="https://agentultra.github.io/lean-4-hackers/">https://agentultra.github.io/lean-4-hackers/</a></p>
<p>It's still a work in progress! I'm a <em>push early, push often</em> kind of person. I'll be adding more content following the style of the Lean 3 for Hackers guide with some new programs and different takes.</p>
<p>Thank you to the Lean community and the developers <span aria-label="pray" class="emoji emoji-1f64f" role="img" title="pray">:pray:</span> Your enthusiasm and expertise are inspiring!</p>



<a name="261452112"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/lean%204%20hackers/near/261452112" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/lean.204.20hackers.html#261452112">(Nov 15 2021 at 02:53)</a>:</h4>
<p>Nice! Two comments:</p>
<ul>
<li>One should install <code>leanprover/lean4:nightly</code>, <code>stable</code> is very outdated at the moment.</li>
<li>We are moving away from <code>leanpkg</code>, so the instructions would ideally point people towards <code>lake</code>. It has the same sort of command structure, but it's a different build system.</li>
</ul>



<a name="261452124"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/lean%204%20hackers/near/261452124" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> James King <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/lean.204.20hackers.html#261452124">(Nov 15 2021 at 02:53)</a>:</h4>
<p>Oh sweet, thanks for the update!</p>



<a name="261591036"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/lean%204%20hackers/near/261591036" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> James King <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/lean.204.20hackers.html#261591036">(Nov 16 2021 at 02:41)</a>:</h4>
<p>Updated the guide and added a new section. <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="261612487"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/lean%204%20hackers/near/261612487" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Paul  Chisholm <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/lean.204.20hackers.html#261612487">(Nov 16 2021 at 08:58)</a>:</h4>
<p>A couple of comments:</p>
<ul>
<li>You say "Note that the .gitignore file may need to be modified to contain: ...". Lake always adds '/build' to the '.gitignore' file so I don't think that modification is ever necessary.</li>
<li>Might also mention the 'lakefile.lean' and 'lean-toolchain' files created by Lake.</li>
<li>I am using a MacOS so I don't know if this is system dependent, but all three build folders have '.trace' files in them. Possibly worth mentioning them if not system specific. I have no idea what they are for.</li>
</ul>



<a name="261846059"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/lean%204%20hackers/near/261846059" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anders Christiansen Sørby <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/lean.204.20hackers.html#261846059">(Nov 17 2021 at 20:43)</a>:</h4>
<p><span class="user-mention" data-user-id="220270">@James King</span> You should also include stuff about the nix setup. I'm all in for that and use nix for building all software. Nix offers a plug and play experience for any software project which is really nice. It builds all packages deterministically and content addressed which means caching and distribution of builds is super easy.<br>
Take a lot at the experimental template I set up here <a href="https://github.com/yatima-inc/nix-utils/tree/main/templates/lean-package">https://github.com/yatima-inc/nix-utils/tree/main/templates/lean-package</a><br>
More work is needed, but this is a working deterministic build system</p>



<a name="261848550"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/lean%204%20hackers/near/261848550" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/lean.204.20hackers.html#261848550">(Nov 17 2021 at 21:01)</a>:</h4>
<p>To be honest, I'd prefer to keep discussion of nix out of any getting started and new user guides.</p>



<a name="261848563"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/lean%204%20hackers/near/261848563" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/lean.204.20hackers.html#261848563">(Nov 17 2021 at 21:01)</a>:</h4>
<p>In my understanding, nix is great until you have aspirations to work on all platforms. The Lean ecosystem needs to work painlessly on windows and macos, and hopefully all getting started guides can be written as platform agnostically as possible</p>



<a name="261849726"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/lean%204%20hackers/near/261849726" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anders Christiansen Sørby <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/lean.204.20hackers.html#261849726">(Nov 17 2021 at 21:10)</a>:</h4>
<p>Yeah. There is nothing about nix that is very platform dependent really, but the windows support is not good (WSL is no problem though). MacOS support is okay for many things I think. I use NixOS myself.</p>



<a name="261849853"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/lean%204%20hackers/near/261849853" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anders Christiansen Sørby <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/lean.204.20hackers.html#261849853">(Nov 17 2021 at 21:11)</a>:</h4>
<p>Nix should in theory be the best platform agnostic build tool, but not enough effort has been put into this yet</p>



<a name="261850355"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/lean%204%20hackers/near/261850355" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/lean.204.20hackers.html#261850355">(Nov 17 2021 at 21:15)</a>:</h4>
<p>I have never used nix, but it is not clear to me what advantage it brings for people who don't want to move their entire development process into its framework. Installing stuff works just fine for me, I don't have configuration bugs on a regular basis so repeatable builds is only a problem for software distributors and CI maintainers, not me (unless I hit on a configuration bug of course)</p>



<a name="261850600"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/lean%204%20hackers/near/261850600" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/lean.204.20hackers.html#261850600">(Nov 17 2021 at 21:18)</a>:</h4>
<p>If nix is a "build tool" then why should users need to care about it? If they just get the resulting executable then no build process is needed</p>



<a name="261850714"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/lean%204%20hackers/near/261850714" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/lean.204.20hackers.html#261850714">(Nov 17 2021 at 21:18)</a>:</h4>
<p>if you mean the build process for lean projects, that's managed by lake not nix</p>



<a name="261851658"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/lean%204%20hackers/near/261851658" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anders Christiansen Sørby <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/lean.204.20hackers.html#261851658">(Nov 17 2021 at 21:25)</a>:</h4>
<p>There is a nix build as well which works very fine. I use this for all my lean projects.<br>
You need to try it to experience the benefits. It is not perfect, but since I started using it I've never wanted to go back.<br>
Nix is just as nice for one package as it is for the entire system. <br>
It is not about installing stuff as much as providing a very configurable content addressed environment. Usually you express all dependencies in a file.<br>
It has been especially useful for FFI since it can load and build any package.</p>



<a name="261852076"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/lean%204%20hackers/near/261852076" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anders Christiansen Sørby <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/lean.204.20hackers.html#261852076">(Nov 17 2021 at 21:29)</a>:</h4>
<p>The thing nix does that for example lake doesn't is provide the content addresses lean binary and Lean packages for the build which can be set to any value. You don't need elan because nix provides lean already.</p>



<a name="261869178"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/lean%204%20hackers/near/261869178" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> James King <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/lean.204.20hackers.html#261869178">(Nov 18 2021 at 00:07)</a>:</h4>
<p>I'd consider adding a separate page off the main one for nix at least. I'm not a nix user myself but I know quite a few hackers who are. A PR would be more than welcome as I'm not sure I should be writing about nix. :)</p>



<a name="261882926"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/lean%204%20hackers/near/261882926" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/lean.204.20hackers.html#261882926">(Nov 18 2021 at 03:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="433842">Anders Christiansen Sørby</span> <a href="#narrow/stream/270676-lean4/topic/lean.204.20hackers/near/261852076">said</a>:</p>
<blockquote>
<p>The thing nix does that for example lake doesn't is provide the content addresses lean binary and Lean packages for the build which can be set to any value. You don't need elan because nix provides lean already.</p>
</blockquote>
<p>I do not get this statement. Currently, everything lake builds and uses <em>is</em> content addressed -- that is what  the <code>.trace</code> file is  -- the content hash for fetching the target in question.</p>



<a name="261882959"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/lean%204%20hackers/near/261882959" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/lean.204.20hackers.html#261882959">(Nov 18 2021 at 03:49)</a>:</h4>
<p>Also, even without Lake, every Lean package is content addressed because they are Git repositories and thus the commit hash serves as a content address.</p>



<a name="261905500"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/lean%204%20hackers/near/261905500" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/lean.204.20hackers.html#261905500">(Nov 18 2021 at 09:47)</a>:</h4>
<blockquote>
<p>To be honest, I'd prefer to keep discussion of nix out of any getting started and new user guides.</p>
</blockquote>
<p>I can only agree with this statement.  The nix build is a wonderful tech demo.  I would have never thought that you could use nix on this level of granularity and that it would be as fast as Sebastian made it.</p>
<p>That said, it splits the ecosystem.  The nix build configuration is completely separate from the lake one.  You effectively need to maintain (and test) two build configurations.  Otherwise we get into a wonderful version of hell: "yes we have a formalization of reals and a formalization of linear algebra.  But one uses nix and the other uses lake, so no you can't use them together."</p>
<p>I think that the nix build should only be used in production once we have a reliable lake2nix tool.  And then the lakefile should always come first.</p>



<a name="261906375"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/lean%204%20hackers/near/261906375" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/lean.204.20hackers.html#261906375">(Nov 18 2021 at 09:57)</a>:</h4>
<blockquote>
<p>which means caching and distribution of builds is super easy.</p>
</blockquote>
<p>While this sounds like a neat solution on first glance, I don't think this will work for formalized mathematics (where we have multi-hour build times).  For the current programming projects this is much less of a necessity.  Who needs caching if a fresh build only takes a minute?</p>
<p>The reason I don't think it will work for math is because nix (by design) only reuses the cache if it was produced by the same Lean binary, with the same dependencies, etc.  (Fun fact: changing a comment in the build script for the glibc package will rebuild all of nixpkgs.)  In particular, this means you can't reuse the cache from Linux/amd64 on Darwin/aarch64 (even though both are supported by nixpkgs).  Even ignoring windows, this means we need to build mathlib a couple of times, once for each architecture.<br>
This is simply unacceptable, we are already at the limit of CI capacity.  Compiling mathlib multiple times is out of the question.</p>



<a name="261906698"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/lean%204%20hackers/near/261906698" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/lean.204.20hackers.html#261906698">(Nov 18 2021 at 10:00)</a>:</h4>
<p>At least not nightly (or even PRly) builds. I guess we could build a monthly nix cache, or so.</p>



<a name="261910750"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/lean%204%20hackers/near/261910750" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/lean.204.20hackers.html#261910750">(Nov 18 2021 at 10:43)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110043">Gabriel Ebner</span> <a href="#narrow/stream/270676-lean4/topic/lean.204.20hackers/near/261906375">said</a>:</p>
<blockquote>
<p>In particular, this means you can't reuse the cache from Linux/amd64 on Darwin/aarch64 (even though both are supported by nixpkgs).</p>
</blockquote>
<p>I'm not volunteering <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span> , but I have long wondered what a general solution to this issue could look like. Perhaps with content addressing activated, one could simply tell Nix "yeah, this derivation for macOS will definitely be realised into this store path produced by the Linux derivation, just trust me on that". I don't think Cachix supports storing and querying the realisation map yet though, it's still early days regarding CA.</p>



<a name="261911040"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/lean%204%20hackers/near/261911040" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/lean.204.20hackers.html#261911040">(Nov 18 2021 at 10:46)</a>:</h4>
<p>And then every month or so you might want to <code>--check</code> that invariant on the actual platforms</p>



<a name="261914007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/lean%204%20hackers/near/261914007" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anders Christiansen Sørby <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/lean.204.20hackers.html#261914007">(Nov 18 2021 at 11:17)</a>:</h4>
<p>I see your points. Didn't mean to hijack this as a nix discussion. Let's continue in the "Nix builds" topic.</p>



<a name="261915972"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/lean%204%20hackers/near/261915972" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/lean.204.20hackers.html#261915972">(Nov 18 2021 at 11:41)</a>:</h4>
<blockquote>
<p>one could simply tell Nix "yeah, this derivation for macOS will definitely be realised into this store path produced by the Linux derivation, just trust me on that"</p>
</blockquote>
<p>I don't think such an option would ever make it past Eelco.  He's already super unhappy about the cargo-vendor stuff (i.e., that we use a fixed-output derivation for the automatically generated vendor directory, instead of checksums for the individual upstream tarballs).  Intentional impurity seems even less likely to be accepted.</p>



<a name="262257220"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/lean%204%20hackers/near/262257220" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> James King <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/lean.204.20hackers.html#262257220">(Nov 21 2021 at 19:52)</a>:</h4>
<p>Alright, updated the guide again and added our first real-world program: an implementation of the <code>wc</code> program in Lean 4. <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span></p>



<a name="262407547"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/lean%204%20hackers/near/262407547" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Varun Gandhi <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/lean.204.20hackers.html#262407547">(Nov 23 2021 at 03:06)</a>:</h4>
<p>Hey folks. I was wondering if a contribution for supporting Ninja as the generator would be accepted. Currently, only the Unix Makefiles generator is supported. (Related question: I noticed files under <code>stage0/</code> being marked as auto-generated, and they largely seem to be the same as the files under <code>src/</code> -- how do I trigger that generation?)</p>



<a name="262408615"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/lean%204%20hackers/near/262408615" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/lean.204.20hackers.html#262408615">(Nov 23 2021 at 03:28)</a>:</h4>
<p><span class="user-mention" data-user-id="459441">@Varun Gandhi</span> The Lean devs are very pragmatic, so an additional generator is only likely to be accepted if the benefit of adding it outweighs the burden of code review and build breakage and maintenance. What would the benefit of Ninja be? Note that Lean already builds on all supported platforms (with MinGW on Windows).</p>
<p>For updating <code>stage0/</code>, you can use <code>scripts/update-stage0</code>. Lean 4 is a self-compiling compiler, and the <code>stage0/</code> files serve to <a href="https://en.wikipedia.org/wiki/Bootstrapping_(compilers)">bootstrap</a> it.</p>



<a name="262415891"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/lean%204%20hackers/near/262415891" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Varun Gandhi <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/lean.204.20hackers.html#262415891">(Nov 23 2021 at 05:50)</a>:</h4>
<p>The benefits of Ninja are (1) faster incremental builds, especially when working on leaf-y files, (2) <code>ninjatracing</code> (<a href="https://github.com/nico/ninjatracing">https://github.com/nico/ninjatracing</a>) to profile builds and (3) built-in functionality to query targets via different subtools.</p>
<p>As an example, I did some preliminary measurements with Clang (files recompiled/total files), since that is a project I'm familiar with:</p>
<ul>
<li>When changing a leafy file (e.g. 20/4300): 3.7s (Ninja) vs 7.0s (Make) -- To me, this is the most compelling point.</li>
<li>When changing a file much deeper (600/4300), or doing a full build (4300/4300): They're about the same with Ninja being 1~2% faster. This is not a big deal IMO: the key bit is Ninja is not slower.<br>
When I worked on Swiftc, we did not support make at all, because ninja is ~better along nearly all dimensions, with the incremental builds being the biggest win.</li>
</ul>
<p>That said, I haven't actually implemented the change for Lean (I wanted to ask first), so I don't know how much the incremental build benefits will carry over.</p>
<p>Thanks for the pointer in the code.</p>



<a name="262418821"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/lean%204%20hackers/near/262418821" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/lean.204.20hackers.html#262418821">(Nov 23 2021 at 06:52)</a>:</h4>
<p><span class="user-mention" data-user-id="459441">@Varun Gandhi</span> the problem with this idea  is that primary bottleneck for the Lean dev build is not the CMake build but the rather the bootstrap Lean build which would be unaffected by the change in the CMake generator.</p>



<a name="262538726"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/lean%204%20hackers/near/262538726" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Varun Gandhi <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/lean.204.20hackers.html#262538726">(Nov 24 2021 at 02:02)</a>:</h4>
<p><span class="user-mention" data-user-id="315577">@Mac</span>   : Just to make sure I'm correctly understanding what you're saying, the slow part of incremental builds is due to <code>src/lean.mk.in</code>, is that right?</p>



<a name="262548954"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/lean%204%20hackers/near/262548954" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/lean.204.20hackers.html#262548954">(Nov 24 2021 at 05:52)</a>:</h4>
<p><span class="user-mention" data-user-id="459441">@Varun Gandhi</span> yes, though it is more due to the inefficiency of Lean builds (due to transitive import dependencies) than the Makefile / make itself</p>



<a name="262957625"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/lean%204%20hackers/near/262957625" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> James King <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/lean.204.20hackers.html#262957625">(Nov 29 2021 at 00:51)</a>:</h4>
<p>Updated the <code>WordCount</code> example program and benchmarks, thanks for all of the feedback from here and on Github and Reddit. <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>