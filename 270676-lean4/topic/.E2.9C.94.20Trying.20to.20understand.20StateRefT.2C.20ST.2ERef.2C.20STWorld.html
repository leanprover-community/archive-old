---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/.E2.9C.94.20Trying.20to.20understand.20StateRefT.2C.20ST.2ERef.2C.20STWorld.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20Trying.20to.20understand.20StateRefT.2C.20ST.2ERef.2C.20STWorld.html">âœ” Trying to understand StateRefT, ST.Ref, STWorld</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="274988281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20Trying%20to%20understand%20StateRefT%2C%20ST.Ref%2C%20STWorld/near/274988281" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Richard L Ford <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20Trying.20to.20understand.20StateRefT.2C.20ST.2ERef.2C.20STWorld.html#274988281">(Mar 11 2022 at 15:14)</a>:</h4>
<p>Thanks for the pointers and clarification.</p>



<a name="274988388"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20Trying%20to%20understand%20StateRefT%2C%20ST.Ref%2C%20STWorld/near/274988388" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Leonardo de Moura <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20Trying.20to.20understand.20StateRefT.2C.20ST.2ERef.2C.20STWorld.html#274988388">(Mar 11 2022 at 15:15)</a>:</h4>
<blockquote>
<p>A final question: It seems that the implementation mutates the ST.Ref's in place so their use seems to violate the purity of functional paradigm. Is that because we know these are only being used once so it is OK?</p>
</blockquote>
<p>Note that we can only use the mutations inside of the <code>IO</code> and <code>ST</code> monads, or monad stacks built on top of them.</p>



<a name="274988651"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20Trying%20to%20understand%20StateRefT%2C%20ST.Ref%2C%20STWorld/near/274988651" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Leonardo de Moura <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20Trying.20to.20understand.20StateRefT.2C.20ST.2ERef.2C.20STWorld.html#274988651">(Mar 11 2022 at 15:17)</a>:</h4>
<blockquote>
<p>So is the purpose of this lifting so that the ST.Ref functions can be used as actions in any monad?</p>
</blockquote>
<p>Yes. Note that many monads in the Lean implementation (i.e., <code>MetaM</code>, <code>TermElabM</code>, <code>TacticM</code>) are built on top of <code>IO</code> or <code>ST</code>.</p>



<a name="274993128"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20Trying%20to%20understand%20StateRefT%2C%20ST.Ref%2C%20STWorld/near/274993128" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20Trying.20to.20understand.20StateRefT.2C.20ST.2ERef.2C.20STWorld.html#274993128">(Mar 11 2022 at 15:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="296262">Richard L Ford</span> has marked this topic as resolved.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>