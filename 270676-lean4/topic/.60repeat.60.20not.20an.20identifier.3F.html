---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/.60repeat.60.20not.20an.20identifier.3F.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.60repeat.60.20not.20an.20identifier.3F.html">`repeat` not an identifier?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="276077738"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%60repeat%60%20not%20an%20identifier%3F/near/276077738" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Horatiu Cheval <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.60repeat.60.20not.20an.20identifier.3F.html#276077738">(Mar 21 2022 at 16:27)</a>:</h4>
<p>I'm getting <code>expected identifier</code> from this and I find it very confusing.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">repeat</span> <span class="o">:=</span> <span class="mi">2</span>
</code></pre></div>
<p>I'm on 2022-03-17. Could someone help me figure out what's happening here?</p>



<a name="276078219"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%60repeat%60%20not%20an%20identifier%3F/near/276078219" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.60repeat.60.20not.20an.20identifier.3F.html#276078219">(Mar 21 2022 at 16:30)</a>:</h4>
<p>It's a keyword now, used in infinite loops e.g. <code>do repeat IO.println "beep"</code>.</p>



<a name="276078598"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%60repeat%60%20not%20an%20identifier%3F/near/276078598" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.60repeat.60.20not.20an.20identifier.3F.html#276078598">(Mar 21 2022 at 16:32)</a>:</h4>
<p>Although I'm not sure why keywords from do-notation leak into term mode.</p>



<a name="276078818"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%60repeat%60%20not%20an%20identifier%3F/near/276078818" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Horatiu Cheval <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.60repeat.60.20not.20an.20identifier.3F.html#276078818">(Mar 21 2022 at 16:34)</a>:</h4>
<p>Thank you! It makes sense, it made me very confused :)</p>



<a name="276078904"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%60repeat%60%20not%20an%20identifier%3F/near/276078904" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Horatiu Cheval <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.60repeat.60.20not.20an.20identifier.3F.html#276078904">(Mar 21 2022 at 16:34)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110043">Gabriel Ebner</span> <a href="#narrow/stream/270676-lean4/topic/.60repeat.60.20not.20an.20identifier.3F/near/276078598">said</a>:</p>
<blockquote>
<p>Although I'm not sure why keywords from do-notation leak into term mode.</p>
</blockquote>
<p>I see the same happens for instance with <code>for</code></p>



<a name="276079222"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%60repeat%60%20not%20an%20identifier%3F/near/276079222" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Horatiu Cheval <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.60repeat.60.20not.20an.20identifier.3F.html#276079222">(Mar 21 2022 at 16:36)</a>:</h4>
<p>And then, I think that if <code>repeat</code> is no longer a valid identifier, this raises the question as to what should mathlib things like <code>list.repeat</code> be called in Lean 4.</p>



<a name="276080105"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%60repeat%60%20not%20an%20identifier%3F/near/276080105" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Leonardo de Moura <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.60repeat.60.20not.20an.20identifier.3F.html#276080105">(Mar 21 2022 at 16:41)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110043">Gabriel Ebner</span> <a href="#narrow/stream/270676-lean4/topic/.60repeat.60.20not.20an.20identifier.3F/near/276078598">said</a>:</p>
<blockquote>
<p>Although I'm not sure why keywords from do-notation leak into term mode.</p>
</blockquote>
<p>We currently have a single global token table.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">declare_syntax_cat</span> <span class="n">my_dsl</span>

<span class="n">syntax</span> <span class="s2">"foo"</span> <span class="o">:</span> <span class="n">my_dsl</span>

<span class="kd">def</span> <span class="n">foo</span> <span class="c">/-</span><span class="cm"> error: expected identifier -/</span>  <span class="o">:=</span> <span class="mi">10</span>
</code></pre></div>



<a name="276081314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%60repeat%60%20not%20an%20identifier%3F/near/276081314" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.60repeat.60.20not.20an.20identifier.3F.html#276081314">(Mar 21 2022 at 16:49)</a>:</h4>
<p>I guess I was confused because this does not apply to tactics.  After <code>syntax "foo" : tactic</code>, <code>foo</code> can still be used as an identifier.  But I realize now that this is special opt-in behavior for some categories (using <code>LeadingIdentBehavior</code>).</p>



<a name="276083475"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%60repeat%60%20not%20an%20identifier%3F/near/276083475" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Leonardo de Moura <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.60repeat.60.20not.20an.20identifier.3F.html#276083475">(Mar 21 2022 at 17:03)</a>:</h4>
<p>Yes, there is this hack for <code>tactic</code> :)</p>



<a name="276120634"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%60repeat%60%20not%20an%20identifier%3F/near/276120634" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.60repeat.60.20not.20an.20identifier.3F.html#276120634">(Mar 21 2022 at 22:10)</a>:</h4>
<p><span class="user-mention silent" data-user-id="329243">Horatiu Cheval</span> <a href="#narrow/stream/270676-lean4/topic/.60repeat.60.20not.20an.20identifier.3F/near/276079222">said</a>:</p>
<blockquote>
<p>And then, I think that if <code>repeat</code> is no longer a valid identifier, this raises the question as to what should mathlib things like <code>list.repeat</code> be called in Lean 4.</p>
</blockquote>
<p>Note that it is always an option to put the identifier in guillemets if it is a keyword, although this can be inconvenient. For something like <code>List.repeat</code> which is always referred to either with a namespace or as dot-notation on an expression, you don't need the guillemets so it might be okay</p>



<a name="276120706"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%60repeat%60%20not%20an%20identifier%3F/near/276120706" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.60repeat.60.20not.20an.20identifier.3F.html#276120706">(Mar 21 2022 at 22:11)</a>:</h4>
<p>that is, it's not a problem for <code>protected</code> definitions, or equivalently definitions whose name is a keyword are effectively <code>protected</code> even if not by name</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>