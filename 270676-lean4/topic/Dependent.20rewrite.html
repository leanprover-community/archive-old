---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/Dependent.20rewrite.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Dependent.20rewrite.html">Dependent rewrite</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="293532932"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Dependent%20rewrite/near/293532932" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> James Gallicchio <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Dependent.20rewrite.html#293532932">(Aug 15 2022 at 14:44)</a>:</h4>
<p>Newbie question about rewriting functions with dependencies -- I know I should do an explicit generalization here, but I have no clue what generalization to do:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">opaque</span> <span class="n">map'</span> <span class="o">(</span><span class="n">L</span> <span class="o">:</span> <span class="n">List</span> <span class="n">τ</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">τ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">L</span> <span class="bp">→</span> <span class="n">τ'</span><span class="o">)</span> <span class="o">:</span> <span class="n">List</span> <span class="n">τ'</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">L1</span> <span class="n">L2</span> <span class="o">:</span> <span class="n">List</span> <span class="n">τ</span><span class="o">)</span> <span class="o">(</span><span class="n">hL</span> <span class="o">:</span> <span class="n">L2</span> <span class="bp">=</span> <span class="n">L1</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">τ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">L1</span> <span class="bp">→</span> <span class="n">τ'</span><span class="o">)</span>
  <span class="o">:</span> <span class="n">map'</span> <span class="n">L1</span> <span class="n">f</span> <span class="bp">=</span> <span class="n">map'</span> <span class="n">L2</span> <span class="o">(</span><span class="k">fun</span> <span class="n">x</span> <span class="n">h</span> <span class="bp">=&gt;</span> <span class="n">f</span> <span class="n">x</span> <span class="o">(</span><span class="n">hL.subst</span> <span class="n">h</span><span class="o">))</span>
  <span class="o">:=</span> <span class="kd">by</span>
  <span class="gr">sorry</span>
</code></pre></div>



<a name="293533059"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Dependent%20rewrite/near/293533059" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> James Gallicchio <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Dependent.20rewrite.html#293533059">(Aug 15 2022 at 14:45)</a>:</h4>
<p>help would be sorely appreciated; I keep guessing what to generalize, and failing <span aria-label="joy" class="emoji emoji-1f602" role="img" title="joy">:joy:</span></p>



<a name="293533681"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Dependent%20rewrite/near/293533681" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> James Gallicchio <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Dependent.20rewrite.html#293533681">(Aug 15 2022 at 14:47)</a>:</h4>
<p>wait a minute, casing on hL is enough</p>



<a name="293533914"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Dependent%20rewrite/near/293533914" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> James Gallicchio <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Dependent.20rewrite.html#293533914">(Aug 15 2022 at 14:48)</a>:</h4>
<p>okay, new question: will eliminating on eq always work if it's between two variables? is the goal of doing explicit generalizations to make an equality be between two variables so you can eliminate on it?</p>



<a name="293533941"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Dependent%20rewrite/near/293533941" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> James Gallicchio <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Dependent.20rewrite.html#293533941">(Aug 15 2022 at 14:49)</a>:</h4>
<p>this actually makes substantially more sense now. hm.</p>



<a name="293534588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Dependent%20rewrite/near/293534588" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Dependent.20rewrite.html#293534588">(Aug 15 2022 at 14:52)</a>:</h4>
<p>Or even if just one side is a variable</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>