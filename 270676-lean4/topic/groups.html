---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/groups.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/groups.html">groups</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="239508477"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/groups/near/239508477" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> learnerofmaths <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/groups.html#239508477">(May 19 2021 at 23:04)</a>:</h4>
<p>Hello, I am trying to define groups in lean4 to get a sense of what it would mean to use a theorem prover for work. Here is how far I have gotten:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">section</span> <span class="n">groupdefs</span>

<span class="kd">class</span> <span class="n">One</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="n">where</span>
  <span class="n">one</span> <span class="o">:</span> <span class="n">α</span>

<span class="kd">class</span> <span class="n">Inv</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="n">where</span>
  <span class="n">inv</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span>

<span class="kd">class</span> <span class="n">Mul</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="n">where</span>
  <span class="n">mul</span> <span class="o">:</span> <span class="n">G</span> <span class="bp">→</span> <span class="n">G</span>

<span class="c1">-- Set up notation typeclass using `extends`.</span>
<span class="kd">class</span> <span class="n">has_group_notation</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="kd">extends</span> <span class="n">Mul</span> <span class="n">G</span><span class="o">,</span> <span class="n">One</span> <span class="n">G</span><span class="o">,</span> <span class="n">Inv</span> <span class="n">G</span>

<span class="c1">-- definition of the group structure</span>
<span class="kd">class</span> <span class="n">group</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="kd">extends</span> <span class="n">has_group_notation</span> <span class="n">G</span> <span class="n">where</span>
  <span class="n">mul_assoc</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="n">c</span><span class="o">)</span>
</code></pre></div>
<p>But I am having issues here since I keep getting an error "(kernel) declaration has metavariables 'mygroup.group.mk'Lean 4" . Does anyone know what's happening? Is this the right way to start defining one's own definition of a group? <br>
Best!</p>



<a name="239509240"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/groups/near/239509240" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/groups.html#239509240">(May 19 2021 at 23:12)</a>:</h4>
<p>I get an error on <code>class Mul</code> saying that <code>Mul</code> is already declared. What version of lean 4 are you using?</p>



<a name="239509437"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/groups/near/239509437" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/groups.html#239509437">(May 19 2021 at 23:15)</a>:</h4>
<p>You need to use the <code>Mul</code> declared in the core library if you want to get the <code>*</code> notation, or declare your own <code>*</code> notation in terms of your <code>Mul</code></p>



<a name="239509470"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/groups/near/239509470" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/groups.html#239509470">(May 19 2021 at 23:15)</a>:</h4>
<p>Here's a version using the classes from core:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">class</span> <span class="n">abbrev</span> <span class="n">One</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">:=</span> <span class="n">OfNat</span> <span class="n">α</span> <span class="mi">1</span>

<span class="kd">class</span> <span class="n">Inv</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="n">where</span>
  <span class="n">inv</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span>

<span class="c1">-- Set up notation typeclass using `extends`.</span>
<span class="kd">class</span> <span class="n">has_group_notation</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="kd">extends</span> <span class="n">Mul</span> <span class="n">G</span><span class="o">,</span> <span class="n">One</span> <span class="n">G</span><span class="o">,</span> <span class="n">Inv</span> <span class="n">G</span>

<span class="c1">-- definition of the group structure</span>
<span class="kd">class</span> <span class="n">group</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="kd">extends</span> <span class="n">has_group_notation</span> <span class="n">G</span> <span class="n">where</span>
  <span class="n">mul_assoc</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="n">c</span><span class="o">)</span>
</code></pre></div>



<a name="239509493"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/groups/near/239509493" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> learnerofmaths <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/groups.html#239509493">(May 19 2021 at 23:15)</a>:</h4>
<p>Sorry about that you need a custom namespace. I missed that</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">namespace</span> <span class="n">mygroup</span>

<span class="c1">-- definitions of the group classes</span>

<span class="kn">section</span> <span class="n">groupdefs</span>

<span class="kd">class</span> <span class="n">One</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="n">where</span>
  <span class="n">one</span> <span class="o">:</span> <span class="n">α</span>

<span class="kd">class</span> <span class="n">Inv</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="n">where</span>
  <span class="n">inv</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span>

<span class="kd">class</span> <span class="n">Mul</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="n">where</span>
  <span class="n">mul</span> <span class="o">:</span> <span class="n">G</span> <span class="bp">→</span> <span class="n">G</span>

<span class="c1">-- Set up notation typeclass using `extends`.</span>
<span class="kd">class</span> <span class="n">has_group_notation</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="kd">extends</span> <span class="n">Mul</span> <span class="n">G</span><span class="o">,</span> <span class="n">One</span> <span class="n">G</span><span class="o">,</span> <span class="n">Inv</span> <span class="n">G</span>

<span class="c1">-- definition of the group structure</span>
<span class="kd">class</span> <span class="n">group</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="kd">extends</span> <span class="n">has_group_notation</span> <span class="n">G</span> <span class="n">where</span>
  <span class="n">mul_assoc</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="n">c</span><span class="o">)</span>
</code></pre></div>
<p>The version of lean is "leanprover/lean4:4.0.0"</p>



<a name="239509659"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/groups/near/239509659" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> learnerofmaths <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/groups.html#239509659">(May 19 2021 at 23:17)</a>:</h4>
<p>I see thank you!</p>



<a name="239509689"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/groups/near/239509689" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> learnerofmaths <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/groups.html#239509689">(May 19 2021 at 23:18)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/270676-lean4/topic/groups/near/239509437">said</a>:</p>
<blockquote>
<p>You need to use the <code>Mul</code> declared in the core library if you want to get the <code>*</code> notation, or declare your own <code>*</code> notation in terms of your <code>Mul</code></p>
</blockquote>
<p>Thank you!</p>



<a name="239510022"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/groups/near/239510022" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> learnerofmaths <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/groups.html#239510022">(May 19 2021 at 23:21)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">section</span> <span class="n">groupdefs</span>

<span class="kd">class</span> <span class="n">abbrev</span> <span class="n">One</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">:=</span> <span class="n">OfNat</span> <span class="n">α</span> <span class="mi">1</span>

<span class="kd">class</span> <span class="n">Inv</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="n">where</span>
  <span class="n">inv</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span>

<span class="c1">-- Set up notation typeclass using `extends`.</span>
<span class="kd">class</span> <span class="n">has_group_notation</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="kd">extends</span> <span class="n">Mul</span> <span class="n">G</span><span class="o">,</span> <span class="n">One</span> <span class="n">G</span><span class="o">,</span> <span class="n">Inv</span> <span class="n">G</span>

<span class="c1">-- definition of the group structure</span>
<span class="kd">class</span> <span class="n">group</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="kd">extends</span> <span class="n">has_group_notation</span> <span class="n">G</span> <span class="n">where</span>
  <span class="n">mul_assoc</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="n">c</span><span class="o">)</span>
  <span class="n">one_mul</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a</span>
  <span class="n">mul_left_inv</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">1</span>
</code></pre></div>
<p>Now almost works. But I get a strange error with using \^-1. "expected termLean 4"  <a href="/user_uploads/3121/t2GqWpbeyT50KoXRyGOczRyc/Screen-Shot-2021-05-19-at-7.20.50-PM.png">Screen-Shot-2021-05-19-at-7.20.50-PM.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/t2GqWpbeyT50KoXRyGOczRyc/Screen-Shot-2021-05-19-at-7.20.50-PM.png" title="Screen-Shot-2021-05-19-at-7.20.50-PM.png"><img src="/user_uploads/3121/t2GqWpbeyT50KoXRyGOczRyc/Screen-Shot-2021-05-19-at-7.20.50-PM.png"></a></div>



<a name="239510130"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/groups/near/239510130" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/groups.html#239510130">(May 19 2021 at 23:22)</a>:</h4>
<p>Just like <code>Mul</code>, <code>Inv</code> doesn't itself come with any notation, especially since it was just defined</p>



<a name="239510163"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/groups/near/239510163" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/groups.html#239510163">(May 19 2021 at 23:23)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">notation</span> <span class="n">a</span> <span class="s2">"⁻¹"</span> <span class="bp">=&gt;</span> <span class="n">Inv.inv</span> <span class="n">a</span>
</code></pre></div>



<a name="239510182"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/groups/near/239510182" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> learnerofmaths <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/groups.html#239510182">(May 19 2021 at 23:23)</a>:</h4>
<p>ah!  Ok, starting to get the hang of that.</p>



<a name="239510200"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/groups/near/239510200" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> learnerofmaths <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/groups.html#239510200">(May 19 2021 at 23:23)</a>:</h4>
<p>makes sense.</p>



<a name="239510298"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/groups/near/239510298" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/groups.html#239510298">(May 19 2021 at 23:24)</a>:</h4>
<p><code>One</code> does work because it is abbreviating the class <code>OfNat A 1</code> that is used to resolve the meaning of <code>1 : A</code></p>



<a name="239510358"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/groups/near/239510358" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> learnerofmaths <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/groups.html#239510358">(May 19 2021 at 23:25)</a>:</h4>
<p>I see. But why is 1 not considered a type of "notation" but rather a class?</p>



<a name="239510432"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/groups/near/239510432" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/groups.html#239510432">(May 19 2021 at 23:26)</a>:</h4>
<p>Just like inv and mul, there is a notation that says that number literals are defined to be <code>OfNat.ofNat A n</code> where <code>OfNat</code> is a class</p>



<a name="239510486"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/groups/near/239510486" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/groups.html#239510486">(May 19 2021 at 23:26)</a>:</h4>
<p>it's defined somewhere in the core library and it's a bit more complicated because it has to match on number literals</p>



<a name="239510544"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/groups/near/239510544" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> learnerofmaths <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/groups.html#239510544">(May 19 2021 at 23:27)</a>:</h4>
<p>So something like <code>notation "1"  =&gt; OfNat.ofNat 1</code> (This is wrong, but something like this?) ? But my 1 has nothing to do with natural numbers, right? It's just notation?</p>



<a name="239510690"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/groups/near/239510690" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/groups.html#239510690">(May 19 2021 at 23:29)</a>:</h4>
<p>Conceptually that's what it is doing, yes</p>



<a name="239510731"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/groups/near/239510731" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/groups.html#239510731">(May 19 2021 at 23:29)</a>:</h4>
<p>there are an infinite number of such notations that have to be declared though so it is written in a more complicated way</p>



<a name="239510905"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/groups/near/239510905" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/groups.html#239510905">(May 19 2021 at 23:30)</a>:</h4>
<p>the actual code is <a href="https://github.com/leanprover/lean4/blob/master/src/Lean/Elab/Term.lean#L1514-L1523">here</a>. It is using the more low level interface that <code>notation</code> desugars into</p>



<a name="239510973"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/groups/near/239510973" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/groups.html#239510973">(May 19 2021 at 23:31)</a>:</h4>
<p>it's probably unreadable but you can see <code>OfNat.ofNat</code> getting referenced</p>



<a name="239510984"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/groups/near/239510984" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> learnerofmaths <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/groups.html#239510984">(May 19 2021 at 23:31)</a>:</h4>
<p>Alright. Sometimes the easiest things are so fundamental they are complicated.  Off to prove some theorems and excited to learn lean : )</p>



<a name="239982500"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/groups/near/239982500" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> learnerofmaths <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/groups.html#239982500">(May 23 2021 at 22:27)</a>:</h4>
<p>Hello again, I am trying to prove some properties of groups. But I am getting hung up on various syntax issues. Here is my initial definition </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="c1">-- We're overwriting inbuilt group theory here so we always work in</span>
<span class="c1">-- a namespace</span>
<span class="kn">namespace</span> <span class="n">mygroup</span>

<span class="c1">-- definitions of the group classes</span>
<span class="kn">section</span> <span class="n">groupdefs</span>

<span class="c1">-- Notation for One done in an odd way</span>
<span class="kd">class</span> <span class="n">abbrev</span> <span class="n">One</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">:=</span> <span class="n">OfNat</span> <span class="n">α</span> <span class="mi">1</span>

<span class="c1">-- define inverse class and notation</span>
<span class="kd">class</span> <span class="n">Inv</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="n">where</span>
  <span class="n">inv</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span>

<span class="kd">notation</span> <span class="n">a</span> <span class="s2">"⁻¹"</span> <span class="bp">=&gt;</span> <span class="n">Inv.inv</span> <span class="n">a</span>

<span class="c1">-- Set up notation typeclass using `extends` for define classes</span>
<span class="kd">class</span> <span class="n">has_group_notation</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="kd">extends</span> <span class="n">Mul</span> <span class="n">G</span><span class="o">,</span> <span class="n">One</span> <span class="n">G</span><span class="o">,</span> <span class="n">Inv</span> <span class="n">G</span>

<span class="c1">-- definition of the group structure</span>
<span class="kd">class</span> <span class="n">group</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="kd">extends</span> <span class="n">has_group_notation</span> <span class="n">G</span> <span class="n">where</span>
  <span class="n">mul_assoc</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="n">c</span><span class="o">)</span>
  <span class="n">one_mul</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a</span>
  <span class="n">mul_left_inv</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">1</span>


<span class="kn">export</span> <span class="n">group</span> <span class="o">(</span><span class="n">mul_assoc</span> <span class="n">one_mul</span> <span class="n">mul_left_inv</span> <span class="o">)</span>

<span class="c1">-- example of abelian group</span>
<span class="kd">class</span> <span class="n">comm_group</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="kd">extends</span> <span class="n">group</span> <span class="n">G</span> <span class="n">where</span>
  <span class="n">mul_comm</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">a</span>
<span class="kd">end</span> <span class="n">groupdefs</span>

<span class="kn">namespace</span> <span class="n">group</span>


<span class="kd">theorem</span> <span class="n">inv_mul_cancel_left</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">b</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="k">have</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">a</span><span class="o">)</span> <span class="bp">*</span> <span class="n">b</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">mul_assoc</span><span class="o">]</span>
  <span class="k">have</span> <span class="o">(</span><span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">a</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">mul_left_inv</span><span class="o">]</span>
  <span class="k">have</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">b</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">one_mul</span><span class="o">]</span>

<span class="kd">end</span> <span class="n">group</span>

<span class="kd">end</span> <span class="n">mygroup</span>
</code></pre></div>
<ol>
<li>
<p>the first issue is that <code>[group G ] (a b : G)</code> is not valid while <code>[group α ] (a b : α )</code> why this statement sensitive to Unicode greek letters? I get an "unknown identifier 'G'".</p>
</li>
<li>
<p>My next issue is that I am not sure how to tell lean to complete a proof when I replace G with α:</p>
</li>
</ol>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">inv_mul_cancel_left</span> <span class="o">[</span><span class="n">group</span> <span class="n">α</span> <span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">α</span> <span class="o">)</span> <span class="o">:</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">b</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="k">have</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">a</span><span class="o">)</span> <span class="bp">*</span> <span class="n">b</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">mul_assoc</span><span class="o">]</span>
  <span class="k">have</span> <span class="o">(</span><span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">a</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">mul_left_inv</span><span class="o">]</span>
  <span class="k">have</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">b</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">one_mul</span><span class="o">]</span>
</code></pre></div>
<p>Gives a bunch of errors that I attached. </p>
<p>Thank your help. <a href="/user_uploads/3121/Lm155UsUjVr4YI4LCZkA07gE/Screen-Shot-2021-05-23-at-6.25.54-PM.png">Screen-Shot-2021-05-23-at-6.25.54-PM.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/Lm155UsUjVr4YI4LCZkA07gE/Screen-Shot-2021-05-23-at-6.25.54-PM.png" title="Screen-Shot-2021-05-23-at-6.25.54-PM.png"><img src="/user_uploads/3121/Lm155UsUjVr4YI4LCZkA07gE/Screen-Shot-2021-05-23-at-6.25.54-PM.png"></a></div>



<a name="239983922"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/groups/near/239983922" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/groups.html#239983922">(May 23 2021 at 22:54)</a>:</h4>
<p><span class="user-mention silent" data-user-id="315577">Mac</span> <a href="#narrow/stream/270676-lean4/topic/associativity.20of.20.60.E2.86.94.60/near/236761867">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/270676-lean4/topic/associativity.20of.20.60.E2.86.94.60/near/236760712">said</a>:</p>
<blockquote>
<p>I'm on today's nightly.</p>
<p><div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">),</span> <span class="n">x</span> <span class="bp">↔</span> <span class="n">x</span> <span class="bp">↔</span> <span class="n">x</span> <span class="o">:=</span> <span class="gr">sorry</span> <span class="c1">-- compiles</span>
<span class="kd">example</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">),</span> <span class="n">A</span> <span class="bp">↔</span> <span class="n">A</span> <span class="bp">↔</span> <span class="n">A</span> <span class="o">:=</span> <span class="gr">sorry</span> <span class="c1">-- fails on third A</span>
<span class="kd">example</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">),</span> <span class="n">a</span> <span class="bp">↔</span> <span class="n">a</span> <span class="bp">↔</span> <span class="n">a</span> <span class="o">:=</span> <span class="gr">sorry</span> <span class="c1">-- compiles?!</span>
</code></pre></div><br>
</p>
</blockquote>
<p>This is because it is being parsed as <span class="user-mention silent" data-user-id="110049">Mario Carneiro</span>  showed and then the unbound lowercase latin letters are being auto bound as specified in <a href="https://leanprover.github.io/lean4/doc/autobound.html">https://leanprover.github.io/lean4/doc/autobound.html</a></p>
</blockquote>
<p>I'm guessing you are seeing this behaviour and you need to add <code>{G : Type u}</code> to have it work</p>



<a name="239998806"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/groups/near/239998806" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> learnerofmaths <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/groups.html#239998806">(May 24 2021 at 03:18)</a>:</h4>
<p>I checked it out. I tried that change and a different error happened. I attached it. <a href="/user_uploads/3121/dF_rTLBGdMKnJo4byX7c93fY/Screen-Shot-2021-05-23-at-11.17.43-PM.png">Screen-Shot-2021-05-23-at-11.17.43-PM.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/dF_rTLBGdMKnJo4byX7c93fY/Screen-Shot-2021-05-23-at-11.17.43-PM.png" title="Screen-Shot-2021-05-23-at-11.17.43-PM.png"><img src="/user_uploads/3121/dF_rTLBGdMKnJo4byX7c93fY/Screen-Shot-2021-05-23-at-11.17.43-PM.png"></a></div>



<a name="239999308"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/groups/near/239999308" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/groups.html#239999308">(May 24 2021 at 03:27)</a>:</h4>
<p>Please post code blocks (ideally as <a href="https://leanprover-community.github.io/mwe.html">#mwe</a>), rather than screenshots! You'll get much more help. :-)</p>



<a name="240001078"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/groups/near/240001078" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/groups.html#240001078">(May 24 2021 at 03:57)</a>:</h4>
<p>You need {G : Type u} [group G] (a b : G)</p>



<a name="240001170"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/groups/near/240001170" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/groups.html#240001170">(May 24 2021 at 03:59)</a>:</h4>
<p>We first postulate an arbitrary type G, then postulate that it has a group structure, then say "let a and b be terms of G"</p>



<a name="240004243"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/groups/near/240004243" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> learnerofmaths <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/groups.html#240004243">(May 24 2021 at 04:40)</a>:</h4>
<p>ahhh! I see that. Makes total sense <span class="user-mention" data-user-id="308899">@Yakov Pechersky</span> . Now I get some of others with </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="c1">-- We're overwriting inbuilt group theory here so we always work in</span>
<span class="c1">-- a namespace</span>
<span class="kn">namespace</span> <span class="n">mygroup</span>

<span class="c1">-- definitions of the group classes</span>
<span class="kn">section</span> <span class="n">groupdefs</span>

<span class="c1">-- Notation for One done in an odd way</span>
<span class="kd">class</span> <span class="n">abbrev</span> <span class="n">One</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">:=</span> <span class="n">OfNat</span> <span class="n">α</span> <span class="mi">1</span>

<span class="c1">-- define inverse class and notation</span>
<span class="kd">class</span> <span class="n">Inv</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="n">where</span>
  <span class="n">inv</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span>

<span class="kd">notation</span> <span class="n">a</span> <span class="s2">"⁻¹"</span> <span class="bp">=&gt;</span> <span class="n">Inv.inv</span> <span class="n">a</span>

<span class="c1">-- Set up notation typeclass using `extends` for define classes</span>
<span class="kd">class</span> <span class="n">has_group_notation</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="kd">extends</span> <span class="n">Mul</span> <span class="n">G</span><span class="o">,</span> <span class="n">One</span> <span class="n">G</span><span class="o">,</span> <span class="n">Inv</span> <span class="n">G</span>

<span class="c1">-- definition of the group structure</span>
<span class="kd">class</span> <span class="n">group</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="kd">extends</span> <span class="n">has_group_notation</span> <span class="n">G</span> <span class="n">where</span>
  <span class="n">mul_assoc</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="n">c</span><span class="o">)</span>
  <span class="n">one_mul</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a</span>
  <span class="n">mul_left_inv</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">1</span>


<span class="kn">export</span> <span class="n">group</span> <span class="o">(</span><span class="n">mul_assoc</span> <span class="n">one_mul</span> <span class="n">mul_left_inv</span> <span class="o">)</span>

<span class="c1">-- example of abelian group</span>
<span class="kd">class</span> <span class="n">comm_group</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="kd">extends</span> <span class="n">group</span> <span class="n">G</span> <span class="n">where</span>
  <span class="n">mul_comm</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">a</span>
<span class="kd">end</span> <span class="n">groupdefs</span>

<span class="kn">namespace</span> <span class="n">group</span>


<span class="kd">theorem</span> <span class="n">inv_mul_cancel_left</span> <span class="o">{</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">b</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="k">have</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">a</span><span class="o">)</span> <span class="bp">*</span> <span class="n">b</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">mul_assoc</span><span class="o">]</span>
  <span class="k">have</span> <span class="o">(</span><span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">a</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">mul_left_inv</span><span class="o">]</span>
  <span class="k">have</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">b</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">one_mul</span><span class="o">]</span>

<span class="kd">end</span> <span class="n">group</span>

<span class="kd">end</span> <span class="n">mygroup</span>
</code></pre></div>
<p>I get two instances of  "failed to synthesize instance OfNat G 1" and I can't seem to tell lean that I have proved the theorem. </p>
<p>Thanks for the tip <span class="user-mention" data-user-id="110087">@Scott Morrison</span> ! : )</p>



<a name="240005155"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/groups/near/240005155" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/groups.html#240005155">(May 24 2021 at 04:50)</a>:</h4>
<p>You haven't proved the theorem, you've proved three intermediate results without joining them together</p>



<a name="240005244"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/groups/near/240005244" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/groups.html#240005244">(May 24 2021 at 04:51)</a>:</h4>
<p>Adding <code>rw this</code> after each <code>have</code> probably resolves that</p>



<a name="240012177"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/groups/near/240012177" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/groups.html#240012177">(May 24 2021 at 06:38)</a>:</h4>
<p>Your first comment in the code is not correct. Lean 4 does not have inbuilt groups</p>



<a name="240047808"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/groups/near/240047808" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> learnerofmaths <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/groups.html#240047808">(May 24 2021 at 13:03)</a>:</h4>
<p>Hi, <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span>  I was referring to <a href="https://github.com/leanprover/lean4/blob/master/tests/lean/run/alg.lean">https://github.com/leanprover/lean4/blob/master/tests/lean/run/alg.lean</a> and <a href="https://github.com/leanprover/lean4/blob/master/tests/lean/run/alg.lean">https://github.com/leanprover/lean4/blob/master/tests/lean/run/alg.lean</a> . But these appear as tests, so I will remove that comment.</p>



<a name="240047959"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/groups/near/240047959" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/groups.html#240047959">(May 24 2021 at 13:04)</a>:</h4>
<p>If you import <code>Mathlib.Algebra.Group.Defs</code> from <a href="https://github.com/leanprover-community/mathlib4">mathlib4</a> you can have groups :-)</p>



<a name="240049209"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/groups/near/240049209" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> learnerofmaths <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/groups.html#240049209">(May 24 2021 at 13:15)</a>:</h4>
<p><span class="user-mention" data-user-id="310045">@Eric Wieser</span> , awesome. But I still get "failed to synthesize instance OfNat G 1" and red squiggly lines under the ones ('1').  Have you seen that before? </p>
<p>Do you happen to know what "rw this" means? Is there another way without <code>rw this</code>? My understanding was that for lean3 there was something called 'calc' and you could write proofs using chains of implications that looked like:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="k">calc</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">a</span><span class="o">)</span> <span class="bp">*</span> <span class="n">b</span> <span class="o">:</span> <span class="kd">by</span> <span class="n">rw</span> <span class="n">mul_assoc</span>
<span class="bp">...</span>  <span class="o">(</span><span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">a</span><span class="o">)</span> <span class="bp">*</span> <span class="n">b</span> <span class="o">:</span> <span class="kd">by</span>  <span class="n">rw</span> <span class="n">mul_left_inv</span>
<span class="bp">...</span>  <span class="mi">1</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">b</span> <span class="o">:</span>  <span class="kd">by</span> <span class="n">rw</span> <span class="n">one_mul</span>
</code></pre></div>
<p>Here's the current code so far. Thank you for getting me on board.  </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="c1">-- 'If you import Mathlib.Algebra.Group.Defs from mathlib4 you can have groups :-)' ~ Kevin Buzzard</span>
<span class="c1">-- To get the swing of things built everything here</span>
<span class="kn">namespace</span> <span class="n">mygroup</span>

<span class="c1">-- definitions of the group classes</span>
<span class="kn">section</span> <span class="n">groupdefs</span>

<span class="c1">-- Notation for One done in an odd way</span>
<span class="kd">class</span> <span class="n">abbrev</span> <span class="n">One</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">:=</span> <span class="n">OfNat</span> <span class="n">α</span> <span class="mi">1</span>

<span class="c1">-- define inverse class and notation</span>
<span class="kd">class</span> <span class="n">Inv</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="n">where</span>
  <span class="n">inv</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span>

<span class="kd">notation</span> <span class="n">a</span> <span class="s2">"⁻¹"</span> <span class="bp">=&gt;</span> <span class="n">Inv.inv</span> <span class="n">a</span>

<span class="c1">-- Set up notation typeclass using `extends` for define classes</span>
<span class="kd">class</span> <span class="n">has_group_notation</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="kd">extends</span> <span class="n">Mul</span> <span class="n">G</span><span class="o">,</span> <span class="n">One</span> <span class="n">G</span><span class="o">,</span> <span class="n">Inv</span> <span class="n">G</span>

<span class="c1">-- definition of the group structure</span>
<span class="kd">class</span> <span class="n">group</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="kd">extends</span> <span class="n">has_group_notation</span> <span class="n">G</span> <span class="n">where</span>
  <span class="n">mul_assoc</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="n">c</span><span class="o">)</span>
  <span class="n">one_mul</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a</span>
  <span class="n">mul_left_inv</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">1</span>


<span class="kn">export</span> <span class="n">group</span> <span class="o">(</span><span class="n">mul_assoc</span> <span class="n">one_mul</span> <span class="n">mul_left_inv</span> <span class="o">)</span>

<span class="c1">-- example of abelian group</span>
<span class="kd">class</span> <span class="n">comm_group</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="kd">extends</span> <span class="n">group</span> <span class="n">G</span> <span class="n">where</span>
  <span class="n">mul_comm</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">a</span>
<span class="kd">end</span> <span class="n">groupdefs</span>

<span class="kn">namespace</span> <span class="n">group</span>


<span class="kd">theorem</span> <span class="n">inv_mul_cancel_left</span> <span class="o">{</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">b</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="k">have</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">a</span><span class="o">)</span> <span class="bp">*</span> <span class="n">b</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">mul_assoc</span><span class="o">]</span>
  <span class="n">rw</span> <span class="n">this</span>
  <span class="k">have</span> <span class="o">(</span><span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">a</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">mul_left_inv</span><span class="o">]</span>
  <span class="n">rw</span> <span class="n">this</span>
  <span class="k">have</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">b</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">one_mul</span><span class="o">]</span>
  <span class="n">rw</span> <span class="n">this</span>

<span class="kd">end</span> <span class="n">group</span>

<span class="kd">end</span> <span class="n">mygroup</span>
</code></pre></div>
<p><a href="/user_uploads/3121/BTiSk23kDSEl00FmRx195Dx0/Screen-Shot-2021-05-24-at-9.14.17-AM.png">Screen-Shot-2021-05-24-at-9.14.17-AM.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/BTiSk23kDSEl00FmRx195Dx0/Screen-Shot-2021-05-24-at-9.14.17-AM.png" title="Screen-Shot-2021-05-24-at-9.14.17-AM.png"><img src="/user_uploads/3121/BTiSk23kDSEl00FmRx195Dx0/Screen-Shot-2021-05-24-at-9.14.17-AM.png"></a></div>



<a name="240049607"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/groups/near/240049607" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/groups.html#240049607">(May 24 2021 at 13:19)</a>:</h4>
<p><code>have some_statement := sorry</code> is short for <code>have this : some_statement := sorry</code>, meaning "prove <code>some_statement</code> and put the proof in a hypothesis called <code>this</code>" (at least, it is in lean3 and I assume it hasn't changed in lean 4).</p>



<a name="240049837"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/groups/near/240049837" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/groups.html#240049837">(May 24 2021 at 13:20)</a>:</h4>
<p>Someone else who actually knows lean4 will have to help you with your ofNat problem</p>



<a name="240050203"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/groups/near/240050203" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/groups.html#240050203">(May 24 2021 at 13:23)</a>:</h4>
<p>The calc proof you show there doesn't work in lean3 either though - an<code>=</code> is in the wrong place</p>



<a name="240050669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/groups/near/240050669" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/groups.html#240050669">(May 24 2021 at 13:27)</a>:</h4>
<p>Check out <a href="https://github.com/leanprover-community/mathlib4/blob/master/Mathlib/Algebra/Group/Defs.lean">Mathlib.Algebra.Group.Defs</a> for how to do 1 in Lean 4.</p>



<a name="240050877"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/groups/near/240050877" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> learnerofmaths <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/groups.html#240050877">(May 24 2021 at 13:29)</a>:</h4>
<p>I see <span class="user-mention" data-user-id="310045">@Eric Wieser</span> . I am very new to lean. I saw that notation used elsewhere. I have also seen </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">inv_mul_cancel_left</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">b</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="bp">←</span> <span class="n">mul_assoc</span><span class="o">,</span> <span class="n">mul_left_inv</span><span class="o">,</span> <span class="n">one_mul</span><span class="o">]</span>
</code></pre></div>
<p>Is the above version with the "have"  and "rw this" the same? What is "← " doing here? I am happy to look at documentation just not sure what to search for. Are there names for these different styles?</p>



<a name="240051169"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/groups/near/240051169" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/groups.html#240051169">(May 24 2021 at 13:31)</a>:</h4>
<p><code>rw mul_assoc</code> rewrites <code>a * b * c</code> to <code>a * (b * c)</code>; <code>rw ←mul_assoc</code> rewrites <code>a * (b * c)</code> to <code>a * b * c</code></p>



<a name="240051501"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/groups/near/240051501" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> learnerofmaths <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/groups.html#240051501">(May 24 2021 at 13:33)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> I tried your suggestion. But I get <code>unknown identifier 'nat_lit'Lean 4</code> </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="c1">-- 'If you import Mathlib.Algebra.Group.Defs from mathlib4 you can have groups :-)' ~ Kevin Buzzard</span>
<span class="c1">-- To get the swing of things built everything here</span>

<span class="kn">namespace</span> <span class="n">mygroup</span>

<span class="c1">-- definitions of the group classes</span>
<span class="kn">section</span> <span class="n">groupdefs</span>

<span class="c1">-- -- Notation for One done in an odd way</span>
<span class="c1">-- class abbrev One (α : Type u) := OfNat α 1</span>
<span class="kd">class</span> <span class="n">One</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="n">where</span>
  <span class="n">one</span> <span class="o">:</span> <span class="n">α</span>

<span class="kd">instance</span> <span class="o">[</span><span class="n">One</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span> <span class="n">OfNat</span> <span class="n">α</span> <span class="o">(</span><span class="n">nat_lit</span> <span class="mi">1</span><span class="o">)</span> <span class="n">where</span>
  <span class="n">ofNat</span> <span class="o">:=</span> <span class="n">One.one</span>


<span class="c1">-- define inverse class and notation</span>
<span class="kd">class</span> <span class="n">Inv</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="n">where</span>
  <span class="n">inv</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span>

<span class="kd">notation</span> <span class="n">a</span> <span class="s2">"⁻¹"</span> <span class="bp">=&gt;</span> <span class="n">Inv.inv</span> <span class="n">a</span>

<span class="c1">-- Set up notation typeclass using `extends` for define classes</span>
<span class="kd">class</span> <span class="n">has_group_notation</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="kd">extends</span> <span class="n">Mul</span> <span class="n">G</span><span class="o">,</span> <span class="n">One</span> <span class="n">G</span><span class="o">,</span> <span class="n">Inv</span> <span class="n">G</span>

<span class="c1">-- definition of the group structure</span>
<span class="kd">class</span> <span class="n">group</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="kd">extends</span> <span class="n">has_group_notation</span> <span class="n">G</span> <span class="n">where</span>
  <span class="n">mul_assoc</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">*</span> <span class="n">c</span><span class="o">)</span>
  <span class="n">one_mul</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">a</span>
  <span class="n">mul_left_inv</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">1</span>


<span class="kn">export</span> <span class="n">group</span> <span class="o">(</span><span class="n">mul_assoc</span> <span class="n">one_mul</span> <span class="n">mul_left_inv</span> <span class="o">)</span>

<span class="c1">-- example of abelian group</span>
<span class="kd">class</span> <span class="n">comm_group</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="kd">extends</span> <span class="n">group</span> <span class="n">G</span> <span class="n">where</span>
  <span class="n">mul_comm</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">a</span>
<span class="kd">end</span> <span class="n">groupdefs</span>

<span class="kn">namespace</span> <span class="n">group</span>


<span class="kd">theorem</span> <span class="n">inv_mul_cancel_left</span> <span class="o">{</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">b</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="k">have</span> <span class="n">intial_assumption</span> <span class="o">:</span> <span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">a</span><span class="o">)</span> <span class="bp">*</span> <span class="n">b</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">mul_assoc</span><span class="o">]</span>
  <span class="n">rw</span> <span class="n">intial_assumption</span>
  <span class="k">have</span> <span class="o">(</span><span class="n">a</span><span class="bp">⁻¹</span> <span class="bp">*</span> <span class="n">a</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">mul_left_inv</span><span class="o">]</span>
  <span class="n">rw</span> <span class="n">this</span>
  <span class="k">have</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">b</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">one_mul</span><span class="o">]</span>
  <span class="n">rw</span> <span class="n">this</span>

<span class="kd">end</span> <span class="n">group</span>

<span class="kd">end</span> <span class="n">mygroup</span>
</code></pre></div>



<a name="240057521"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/groups/near/240057521" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/groups.html#240057521">(May 24 2021 at 14:20)</a>:</h4>
<p>I think that'll mean your lean4 is too old -- what does <code>lean --version</code> say? (Or just update to a more recent one). <code>nat_lit</code> used to be called <code>natLit!</code>.</p>



<a name="240058098"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/groups/near/240058098" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> learnerofmaths <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/groups.html#240058098">(May 24 2021 at 14:24)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="321696">@Julian Berman</span> . My current version of lean is </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">group_theory</span><span class="bp">$</span> <span class="n">lean</span> <span class="c1">--version</span>
<span class="n">Lean</span> <span class="o">(</span><span class="n">version</span> <span class="mi">4</span><span class="bp">.</span><span class="mi">0</span><span class="bp">.</span><span class="mi">0</span><span class="bp">-</span><span class="n">m2</span><span class="o">,</span> <span class="n">commit</span> <span class="mi">26</span><span class="n">dda3f63d88</span><span class="o">,</span> <span class="n">Release</span><span class="o">)</span>
</code></pre></div>



<a name="240058235"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/groups/near/240058235" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/groups.html#240058235">(May 24 2021 at 14:25)</a>:</h4>
<p>Hello -- yeah <code>natLit!</code> got renamed about 10 days after that -- you should probably stick to the version of Lean that mathlib4 itself uses if you're going to use things from it</p>



<a name="240058401"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/groups/near/240058401" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/groups.html#240058401">(May 24 2021 at 14:26)</a>:</h4>
<p>which according to <a href="https://github.com/leanprover-community/mathlib4/blob/master/leanpkg.toml#L4">https://github.com/leanprover-community/mathlib4/blob/master/leanpkg.toml#L4</a> is <code>leanprover/lean4:nightly-2021-05-18</code></p>



<a name="240058419"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/groups/near/240058419" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> learnerofmaths <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/groups.html#240058419">(May 24 2021 at 14:26)</a>:</h4>
<p>Ah, cool! Changing to natLit! fixed it. But I will see about updating, too!</p>



<a name="240058446"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/groups/near/240058446" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> learnerofmaths <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/groups.html#240058446">(May 24 2021 at 14:26)</a>:</h4>
<p>Thank you all!! Off to prove more theorems. Your help is really appreciated. Have a good day everyone.</p>



<a name="240094197"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/groups/near/240094197" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/groups.html#240094197">(May 24 2021 at 18:48)</a>:</h4>
<p>To add what the others were saying: At some point we will surely have a <code>calc</code> and <code>conv</code> environment in Lean 4, they're not implemented yet, though.</p>



<a name="240101069"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/groups/near/240101069" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/groups.html#240101069">(May 24 2021 at 19:37)</a>:</h4>
<p>Sebastian wrote a version of <code>calc</code> in a thread here: (maybe there was another one in a thread too)<br>
<span class="user-mention silent" data-user-id="110024">Sebastian Ullrich</span> <a href="#narrow/stream/270676-lean4/topic/microcalc/near/225283676">said</a>:</p>
<blockquote>
<p>Here's one solution for a heterogeneous <code>calc</code> based on a <code>Trans</code> typeclass and <code>...</code> as a term notation:</p>
<p><div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">class</span> <span class="n">Trans</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">β</span> <span class="bp">→</span> <span class="n">γ</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">(</span><span class="n">t</span> <span class="o">:</span> <span class="n">outParam</span> <span class="o">(</span><span class="n">α</span> <span class="bp">→</span> <span class="n">γ</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">))</span> <span class="n">where</span>
  <span class="n">trans</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span><span class="o">}</span> <span class="o">:</span> <span class="n">r</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">s</span> <span class="n">b</span> <span class="n">c</span> <span class="bp">→</span> <span class="n">t</span> <span class="n">a</span> <span class="n">c</span>

<span class="kn">export</span> <span class="n">Trans</span> <span class="o">(</span><span class="n">trans</span><span class="o">)</span>

<span class="kd">instance</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">γ</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:</span> <span class="n">Trans</span> <span class="n">Eq</span> <span class="n">r</span> <span class="n">r</span> <span class="n">where</span>
  <span class="n">trans</span> <span class="n">heq</span> <span class="n">h'</span> <span class="o">:=</span> <span class="n">heq</span> <span class="bp">▸</span> <span class="n">h'</span>

<span class="kd">instance</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:</span> <span class="n">Trans</span> <span class="n">r</span> <span class="n">Eq</span> <span class="n">r</span> <span class="n">where</span>
  <span class="n">trans</span> <span class="n">h'</span> <span class="n">heq</span> <span class="o">:=</span> <span class="n">heq</span> <span class="bp">▸</span> <span class="n">h'</span>

<span class="kd">notation</span> <span class="s2">"..."</span> <span class="bp">=&gt;</span> <span class="n">_</span>
<span class="c1">-- enforce indentation of calc steps so we know when to stop parsing them</span>
<span class="n">syntax</span> <span class="n">calcStep</span> <span class="o">:=</span> <span class="n">colGe</span> <span class="n">term</span> <span class="s2">" := "</span> <span class="n">term</span>
<span class="n">syntax</span> <span class="s2">"calc "</span> <span class="n">withPosition</span><span class="o">(</span><span class="n">calcStep</span><span class="bp">+</span><span class="o">)</span> <span class="o">:</span> <span class="n">term</span>

<span class="n">macro_rules</span>
  <span class="bp">|</span> <span class="bp">`</span><span class="o">(</span><span class="k">calc</span> <span class="bp">$</span><span class="n">p</span><span class="o">:</span><span class="n">term</span> <span class="o">:=</span> <span class="bp">$</span><span class="n">h</span><span class="o">:</span><span class="n">term</span><span class="o">)</span> <span class="bp">=&gt;</span> <span class="bp">`</span><span class="o">((</span><span class="bp">$</span><span class="n">h</span> <span class="o">:</span> <span class="bp">$</span><span class="n">p</span><span class="o">))</span>
  <span class="bp">|</span> <span class="bp">`</span><span class="o">(</span><span class="k">calc</span> <span class="bp">$</span><span class="n">p</span><span class="o">:</span><span class="n">term</span> <span class="o">:=</span> <span class="bp">$</span><span class="n">h</span><span class="o">:</span><span class="n">term</span> <span class="bp">$</span><span class="n">rest</span><span class="o">:</span><span class="n">calcStep</span><span class="bp">*</span><span class="o">)</span> <span class="bp">=&gt;</span> <span class="bp">`</span><span class="o">(</span><span class="n">trans</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span> <span class="o">(</span><span class="bp">$</span><span class="n">h</span> <span class="o">:</span> <span class="bp">$</span><span class="n">p</span><span class="o">)</span> <span class="o">(</span><span class="k">calc</span> <span class="bp">$</span><span class="n">rest</span><span class="o">:</span><span class="n">calcStep</span><span class="bp">*</span><span class="o">))</span>

<span class="kd">variable</span> <span class="o">(</span><span class="n">t1</span> <span class="n">t2</span> <span class="n">t3</span> <span class="n">t4</span> <span class="o">:</span> <span class="n">Nat</span><span class="o">)</span>
<span class="kd">variable</span> <span class="o">(</span><span class="n">pf12</span> <span class="o">:</span> <span class="n">t1</span> <span class="bp">=</span> <span class="n">t2</span><span class="o">)</span> <span class="o">(</span><span class="n">pf23</span> <span class="o">:</span> <span class="n">t2</span> <span class="bp">=</span> <span class="n">t3</span><span class="o">)</span> <span class="o">(</span><span class="n">pf34</span> <span class="o">:</span> <span class="n">t3</span> <span class="bp">=</span> <span class="n">t4</span><span class="o">)</span>

<span class="kd">theorem</span> <span class="n">foo</span> <span class="o">:</span> <span class="n">t1</span> <span class="bp">=</span> <span class="n">t4</span> <span class="o">:=</span>
 <span class="k">calc</span>
   <span class="n">t1</span> <span class="bp">=</span> <span class="n">t2</span> <span class="o">:=</span> <span class="n">pf12</span>
   <span class="bp">...</span> <span class="bp">=</span> <span class="n">t3</span> <span class="o">:=</span> <span class="n">pf23</span>
   <span class="bp">...</span> <span class="bp">=</span> <span class="n">t4</span> <span class="o">:=</span> <span class="n">pf34</span>

<span class="kd">variable</span> <span class="o">(</span><span class="n">t5</span> <span class="o">:</span> <span class="n">Nat</span><span class="o">)</span>
<span class="kd">variable</span> <span class="o">(</span><span class="n">pf23'</span> <span class="o">:</span> <span class="n">t2</span> <span class="bp">&lt;</span> <span class="n">t3</span><span class="o">)</span> <span class="o">(</span><span class="n">pf45'</span> <span class="o">:</span> <span class="n">t4</span> <span class="bp">&lt;</span> <span class="n">t5</span><span class="o">)</span>

<span class="kd">instance</span> <span class="o">[</span><span class="n">HasLess</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span> <span class="n">Trans</span> <span class="o">(</span><span class="n">α</span> <span class="o">:=</span> <span class="n">α</span><span class="o">)</span> <span class="n">Less</span> <span class="n">Less</span> <span class="n">Less</span> <span class="n">where</span>
  <span class="n">trans</span> <span class="o">:=</span> <span class="gr">sorry</span>

<span class="kd">theorem</span> <span class="n">foo'</span> <span class="o">:</span> <span class="n">t1</span> <span class="bp">&lt;</span> <span class="n">t5</span> <span class="o">:=</span>
 <span class="k">calc</span>
   <span class="n">t1</span> <span class="bp">=</span> <span class="n">t2</span> <span class="o">:=</span> <span class="n">pf12</span>
   <span class="bp">...</span> <span class="bp">&lt;</span> <span class="n">t3</span> <span class="o">:=</span> <span class="n">pf23'</span>
   <span class="bp">...</span> <span class="bp">=</span> <span class="n">t4</span> <span class="o">:=</span> <span class="n">pf34</span>
   <span class="bp">...</span> <span class="bp">&lt;</span> <span class="n">t5</span> <span class="o">:=</span> <span class="n">pf45'</span>
</code></pre></div><br>
</p>
</blockquote>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>