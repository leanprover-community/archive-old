---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/.22do.20unchained.22.20paper.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.22do.20unchained.22.20paper.html">"do unchained" paper</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="265415592"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%22do%20unchained%22%20paper/near/265415592" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marius Melzer <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.22do.20unchained.22.20paper.html#265415592">(Dec 18 2021 at 12:22)</a>:</h4>
<p>Hi, in the lean4 stdlib, I stumbled over the note: Typeclass for the polymorphic <code>forM</code> operation described in the "do unchained" paper (in src/Init/Control/Basic.lean). Could somebody tell me which paper this is?</p>



<a name="265416975"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%22do%20unchained%22%20paper/near/265416975" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Taucher <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.22do.20unchained.22.20paper.html#265416975">(Dec 18 2021 at 12:55)</a>:</h4>
<p>As this perked my curiosity I looked for the paper and failed to find it. </p>
<hr>
<p><a href="https://github.com/leanprover/lean4/blob/master/src/Init/Control/Basic.lean#L101-L109">https://github.com/leanprover/lean4/blob/master/src/Init/Control/Basic.lean#L101-L109</a></p>



<a name="265418068"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%22do%20unchained%22%20paper/near/265418068" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mauricio Collares <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.22do.20unchained.22.20paper.html#265418068">(Dec 18 2021 at 13:19)</a>:</h4>
<p>It's probably an upcoming paper (<a href="https://github.com/leanprover/lean4/commit/ef4d5950ae360b9ee65ad69c746ada938f402845">https://github.com/leanprover/lean4/commit/ef4d5950ae360b9ee65ad69c746ada938f402845</a>)</p>



<a name="265418146"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%22do%20unchained%22%20paper/near/265418146" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Huisinga <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.22do.20unchained.22.20paper.html#265418146">(Dec 18 2021 at 13:21)</a>:</h4>
<p>I'm not sure if that was ever published. I looked on arxiv but couldn't find it there either. <br>
There are a few comments in <a href="https://github.com/leanprover/lean4/blob/master/src/Lean/Elab/Do.lean#L134">Do.lean</a> explaining how Lean 4's do notation works, though. Note that there is also a <a href="https://github.com/leanprover/lean4/blob/e15a656fd2569c12b8e73da9be707f0a5f420bad/src/Init/Core.lean#L82">forIn</a> class, and if I'm not mistaken, that's the one used for do notation (e.g. <code>#synth ForM Id (Array Nat) Nat</code> fails, but <code>#synth ForIn Id (Array Nat) Nat</code> succeeds).</p>



<a name="289844819"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%22do%20unchained%22%20paper/near/289844819" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.22do.20unchained.22.20paper.html#289844819">(Jul 16 2022 at 19:55)</a>:</h4>
<p>A littler later, the paper is finally published! <a href="https://twitter.com/derKha/status/1548325704877559810">https://twitter.com/derKha/status/1548325704877559810</a></p>
<div class="inline-preview-twitter"><div class="twitter-tweet"><a href="https://twitter.com/derKha/status/1548325704877559810"><img class="twitter-avatar" src="https://uploads.zulipusercontent.net/73b1cc6b0e68078201ad1856c80ab187a3c03baa/68747470733a2f2f7062732e7477696d672e636f6d2f70726f66696c655f696d616765732f313239313333333833303131333230363237332f4f7778726633696c5f6e6f726d616c2e6a7067"></a><p>Accepted to ICFP'22:
‘do’ Unchained: Embracing Local Imperativity in a Purely
Functional Language (Functional Pearl) with <a href="https://twitter.com/leodemoura">@leodemoura</a>!

PDF: <a href="https://t.co/POrLzgcIu7">https://leanprover.github.io/papers/do.pdf</a>
supplement rendered via LeanInk/Alectryon: <a href="https://t.co/Qkow3SlItQ">https://kha.github.io/do-supplement/</a> <a href="https://t.co/ubLIp1Blku">https://twitter.com/derKha/status/1548325704877559810/photo/1</a></p><span>- Sebastian Ullrich (@derKha)</span><div class="twitter-image"><a href="https://t.co/ubLIp1Blku"><img src="https://uploads.zulipusercontent.net/d09d6e7b908f3be520395eb2d586e3e1451e23a3/68747470733a2f2f7062732e7477696d672e636f6d2f6d656469612f46587a43424b4c5655414d6a7956442e706e673a736d616c6c"></a></div></div></div>



<a name="289844976"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%22do%20unchained%22%20paper/near/289844976" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.22do.20unchained.22.20paper.html#289844976">(Jul 16 2022 at 19:59)</a>:</h4>
<p>Am I expected to see those little oval links which I can click on, on mobile, in the supplement?</p>



<a name="289845072"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%22do%20unchained%22%20paper/near/289845072" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.22do.20unchained.22.20paper.html#289845072">(Jul 16 2022 at 20:01)</a>:</h4>
<p>In proofs and <code>#</code> commands, yes. Do you not see them, or would you like to not see them :) ?</p>



<a name="289845078"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%22do%20unchained%22%20paper/near/289845078" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.22do.20unchained.22.20paper.html#289845078">(Jul 16 2022 at 20:01)</a>:</h4>
<p>Oh, I didn't test it on mobile yet though. edit: works for me</p>



<a name="289845298"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%22do%20unchained%22%20paper/near/289845298" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.22do.20unchained.22.20paper.html#289845298">(Jul 16 2022 at 20:06)</a>:</h4>
<p>Aah I was expecting to see ovals. Yes I don't see them on duck duck go browser on Android but clicking directly on a proof or # command gives me the popup. When I asked I wasn't sure what I should be clicking on</p>



<a name="289845315"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%22do%20unchained%22%20paper/near/289845315" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.22do.20unchained.22.20paper.html#289845315">(Jul 16 2022 at 20:07)</a>:</h4>
<p>Oh I've got them! They're very small! I just needed my glasses ;-)</p>



<a name="289845559"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%22do%20unchained%22%20paper/near/289845559" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.22do.20unchained.22.20paper.html#289845559">(Jul 16 2022 at 20:12)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110024">Sebastian Ullrich</span> <a href="#narrow/stream/270676-lean4/topic/.22do.20unchained.22.20paper/near/289844819">said</a>:</p>
<blockquote>
<p>A littler later, the paper is finally published! <a href="https://twitter.com/derKha/status/1548325704877559810">https://twitter.com/derKha/status/1548325704877559810</a></p>
</blockquote>
<p>Reading it and trying the List example I noticed that we dont have <code>Monad List</code> even though there even exists <code>List.bind</code>, what's the reason for that?</p>



<a name="289845642"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%22do%20unchained%22%20paper/near/289845642" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.22do.20unchained.22.20paper.html#289845642">(Jul 16 2022 at 20:14)</a>:</h4>
<p>Partially for the same reasons we didn't have <code>Monad Option</code> for a long time. But much more than for <code>Option</code>, strictness might also not be what you'd expect from a list monad.</p>



<a name="289845675"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%22do%20unchained%22%20paper/near/289845675" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.22do.20unchained.22.20paper.html#289845675">(Jul 16 2022 at 20:15)</a>:</h4>
<p>So if we ever end up having one it'd be <code>Monad LazyList</code> I guess?</p>



<a name="289845890"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%22do%20unchained%22%20paper/near/289845890" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.22do.20unchained.22.20paper.html#289845890">(Jul 16 2022 at 20:20)</a>:</h4>
<p>Yes, see <a href="https://kha.github.io/do-supplement/LazyList.lean.html">https://kha.github.io/do-supplement/LazyList.lean.html</a> <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p>



<a name="289845899"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%22do%20unchained%22%20paper/near/289845899" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.22do.20unchained.22.20paper.html#289845899">(Jul 16 2022 at 20:20)</a>:</h4>
<p>But I doubt that will get into the stdlib</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>