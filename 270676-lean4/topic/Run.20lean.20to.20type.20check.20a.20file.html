---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/Run.20lean.20to.20type.20check.20a.20file.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Run.20lean.20to.20type.20check.20a.20file.html">Run lean to type check a file</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="236332039"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Run%20lean%20to%20type%20check%20a%20file/near/236332039" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Haniel Barbosa <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Run.20lean.20to.20type.20check.20a.20file.html#236332039">(Apr 27 2021 at 13:04)</a>:</h4>
<p>Hello. In lean3 I could run the lean binary on a lean file to typecheck it modulo a set of imports. I've only managed to do this in lean4 for files without imports (other than the stdlib). Looking through other topics it seems that the way to do this is by manually setting <code>LEAN_PATH</code> and <code>LEAN4_DIR</code>, but it was not so clear to me how exactly I should set them. What is the best way to do this?</p>



<a name="236342686"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Run%20lean%20to%20type%20check%20a%20file/near/236342686" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Run.20lean.20to.20type.20check.20a.20file.html#236342686">(Apr 27 2021 at 14:07)</a>:</h4>
<p>The standard way is to use <code>leanpkg build</code> with a <code>leanpkg.toml</code></p>



<a name="236343582"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Run%20lean%20to%20type%20check%20a%20file/near/236343582" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Run.20lean.20to.20type.20check.20a.20file.html#236343582">(Apr 27 2021 at 14:13)</a>:</h4>
<p>For more information on <code>LEAN_PATH</code>, see <a href="https://github.com/leanprover/lean4/blob/master/src/Lean/Util/Path.lean#L6-L9">https://github.com/leanprover/lean4/blob/master/src/Lean/Util/Path.lean#L6-L9</a></p>



<a name="236348423"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Run%20lean%20to%20type%20check%20a%20file/near/236348423" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Haniel Barbosa <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Run.20lean.20to.20type.20check.20a.20file.html#236348423">(Apr 27 2021 at 14:38)</a>:</h4>
<p>Thanks! I have been using <code>leanpkg build</code> already but it's a bit cumbersome for my use case (where I've deep embedded a calculus and I'm checking whether a derivation in this calculus type checks). I'll try to figure out <code>LEAN_PATH</code> from the link you sent.</p>



<a name="236367309"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Run%20lean%20to%20type%20check%20a%20file/near/236367309" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Run.20lean.20to.20type.20check.20a.20file.html#236367309">(Apr 27 2021 at 16:20)</a>:</h4>
<p>Would it be possible for <code>leanpkg</code> to support building a single file specified at the command line plus its dependencies? That would allow getting back some of the functionality of <code>lean --make</code></p>



<a name="236369458"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Run%20lean%20to%20type%20check%20a%20file/near/236369458" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Run.20lean.20to.20type.20check.20a.20file.html#236369458">(Apr 27 2021 at 16:34)</a>:</h4>
<p>Yes, <code>leanpkg print-paths A.B</code> will build <code>A.B</code>. This is what the server is running automatically when you open that file.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>