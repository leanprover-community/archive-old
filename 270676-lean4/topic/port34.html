---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/port34.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/port34.html">port34</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="224428510"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/port34/near/224428510" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Selsam <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/port34.html#224428510">(Jan 29 2021 at 04:01)</a>:</h4>
<p>I finished a first proof-of-concept of a mathlib porting tool: <a href="https://github.com/dselsam/port34">https://github.com/dselsam/port34</a> The tool produces lean4 <code>.olean</code> files for every lean3 <code>.lean</code> file in mathlib. A lot of information is preserved, including (kernel) terms, attributes (e.g. reducible, class, instance, simp), mixfix notation, export declarations, and more. Some definitions and theorems can be restated easily but most are still very cumbersome to elaborate due to a myriad of differences between the two systems that have yet to be accounted for.</p>



<a name="224446556"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/port34/near/224446556" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/port34.html#224446556">(Jan 29 2021 at 09:22)</a>:</h4>
<p>This is amazing!  Two things I noticed in case anybody else runs into them as well:</p>
<ul>
<li>Even though the lean4 path is hardcoded in the makefile, you still need to add lean4 to PATH or make an elan override.</li>
<li>You need to manually create the <code>lean3/library/all.lean</code> and <code>mathlib/src/all.lean</code> files.</li>
</ul>



<a name="224449781"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/port34/near/224449781" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/port34.html#224449781">(Jan 29 2021 at 09:57)</a>:</h4>
<p>After half an hour and 32 gigabytes of RAM, <code>make portMathlib</code> fails with:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="o">[</span><span class="n">addDecl</span><span class="o">]</span> <span class="n">END</span>   <span class="n">analysis</span><span class="bp">/</span><span class="n">normed_space</span><span class="bp">/</span><span class="n">dual</span> <span class="n">inner_product_space.norm_to_dual_symm_apply</span>
<span class="o">[</span><span class="n">genOLeanFor</span><span class="o">]</span> <span class="n">END</span>   <span class="n">analysis</span><span class="bp">/</span><span class="n">normed_space</span><span class="bp">/</span><span class="n">dual</span>
<span class="n">uncaught</span> <span class="n">exception</span><span class="o">:</span> <span class="o">(</span><span class="n">kernel</span><span class="o">)</span> <span class="n">unknown</span> <span class="kd">constant</span> <span class="bp">'</span><span class="n">Mathlib.category_theory.sheaf.subcanonical'</span>
<span class="n">Command</span> <span class="n">exited</span> <span class="k">with</span> <span class="n">non</span><span class="bp">-</span><span class="n">zero</span> <span class="n">status</span> <span class="mi">1</span>
</code></pre></div>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>