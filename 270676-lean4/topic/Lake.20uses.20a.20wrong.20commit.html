---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/Lake.20uses.20a.20wrong.20commit.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lake.20uses.20a.20wrong.20commit.html">Lake uses a wrong commit</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="289453504"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Lake%20uses%20a%20wrong%20commit/near/289453504" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lake.20uses.20a.20wrong.20commit.html#289453504">(Jul 13 2022 at 12:46)</a>:</h4>
<p>Hello! I'm not being able to make Lake download the right revision for our <code>YatimaStdLib.lean</code> repo (see PR <a href="https://github.com/yatima-inc/yatima-lang/pull/101">here</a>)</p>
<p>The lakefile explicits the hash <code>877d4fe8d42fbef22cd151efabe7e319bf325e6f</code> but Lake is downloading a previous one (<code>35aecd8951778f45a47d12376635c26a815dcb25</code>). Help is much appreciated. Thanks in advance!</p>



<a name="289458959"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Lake%20uses%20a%20wrong%20commit/near/289458959" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lake.20uses.20a.20wrong.20commit.html#289458959">(Jul 13 2022 at 13:28)</a>:</h4>
<p>How come is it memorizing <code>35aecd8951778f45a47d12376635c26a815dcb25</code>? Is Lake caching something in my computer? I tried to find it and I couldn't find anything. I've already deleted the <code>build</code> and <code>lean_packages</code> folder and it keeps downloading the wrong revision</p>



<a name="289460084"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Lake%20uses%20a%20wrong%20commit/near/289460084" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lake.20uses.20a.20wrong.20commit.html#289460084">(Jul 13 2022 at 13:36)</a>:</h4>
<p>I can reproduce here FWIW, so whatever it is isn't some local state.</p>



<a name="289460299"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Lake%20uses%20a%20wrong%20commit/near/289460299" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lake.20uses.20a.20wrong.20commit.html#289460299">(Jul 13 2022 at 13:38)</a>:</h4>
<p>Thank you very much for your input Julian! <span aria-label="heart" class="emoji emoji-2764" role="img" title="heart">:heart:</span></p>



<a name="289460371"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Lake%20uses%20a%20wrong%20commit/near/289460371" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lake.20uses.20a.20wrong.20commit.html#289460371">(Jul 13 2022 at 13:39)</a>:</h4>
<p>Easiest thank you I ever got, I ran 2 commands :) but you're welcome. I don't see anything wrong FWIW, and I want to say I've had to manually mess with <code>lean_packages</code> myself previously IIRC so I'd love to know what's wrong here too.</p>



<a name="289460745"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Lake%20uses%20a%20wrong%20commit/near/289460745" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lake.20uses.20a.20wrong.20commit.html#289460745">(Jul 13 2022 at 13:42)</a>:</h4>
<p><a href="https://github.com/leanprover/lake/issues/85">https://github.com/leanprover/lake/issues/85</a></p>



<a name="289460954"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Lake%20uses%20a%20wrong%20commit/near/289460954" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lake.20uses.20a.20wrong.20commit.html#289460954">(Jul 13 2022 at 13:44)</a>:</h4>
<p>That's not this is it? This happens even after blowing away the <code>lean_packages</code> folder.</p>



<a name="289461858"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Lake%20uses%20a%20wrong%20commit/near/289461858" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lake.20uses.20a.20wrong.20commit.html#289461858">(Jul 13 2022 at 13:50)</a>:</h4>
<p>Maybe it uses the revision from the ipld lakefile.  See also <a href="https://github.com/leanprover/lake/issues/70">https://github.com/leanprover/lake/issues/70</a></p>



<a name="289462084"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Lake%20uses%20a%20wrong%20commit/near/289462084" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lake.20uses.20a.20wrong.20commit.html#289462084">(Jul 13 2022 at 13:52)</a>:</h4>
<p>Oh my, that must be precisely it!</p>



<a name="289462197"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Lake%20uses%20a%20wrong%20commit/near/289462197" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lake.20uses.20a.20wrong.20commit.html#289462197">(Jul 13 2022 at 13:53)</a>:</h4>
<p>Probably the "real" "real" fix is Lake having a dependency solver, which I assume is a decent chunk of effort.</p>



<a name="289462229"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Lake%20uses%20a%20wrong%20commit/near/289462229" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lake.20uses.20a.20wrong.20commit.html#289462229">(Jul 13 2022 at 13:53)</a>:</h4>
<p>And then blowing up for impossible / incompatible dependencies?</p>



<a name="289462475"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Lake%20uses%20a%20wrong%20commit/near/289462475" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik BÃ¶ving <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lake.20uses.20a.20wrong.20commit.html#289462475">(Jul 13 2022 at 13:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="321696">Julian Berman</span> <a href="#narrow/stream/270676-lean4/topic/Lake.20uses.20a.20wrong.20commit/near/289462197">said</a>:</p>
<blockquote>
<p>Probably the "real" "real" fix is Lake having a dependency solver, which I assume is a decent chunk of effort.</p>
</blockquote>
<p>Dependency solving as a SAT tactic! :P</p>



<a name="289524993"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Lake%20uses%20a%20wrong%20commit/near/289524993" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lake.20uses.20a.20wrong.20commit.html#289524993">(Jul 13 2022 at 21:42)</a>:</h4>
<p>A low-hanging fruit might be a simple warning that a dependency uses a different version than the one that is required by the lib</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>