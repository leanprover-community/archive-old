---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/.60().20and.20.60.3A.20comparing.20Lean.203.20and.204.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.60().20and.20.60.3A.20comparing.20Lean.203.20and.204.html">`() and `: comparing Lean 3 and 4</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="318222854"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%60%28%29%20and%20%60%3A%20comparing%20Lean%203%20and%204/near/318222854" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Evgenia Karunus <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.60().20and.20.60.3A.20comparing.20Lean.203.20and.204.html#318222854">(Dec 28 2022 at 09:52)</a>:</h4>
<h2>This is Lean 3</h2>
<ul>
<li><code> `() </code> creates an <code>expr</code>, the more backticks - the more permissive.</li>
<li><code> ` </code> creates a <code>name</code>, the more backticks - the less permissive.</li>
</ul>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="c1">-- 1. Expressions `()</span>
<span class="kd">run_cmd</span> <span class="k">do</span>
  <span class="k">let</span> <span class="n">e1</span> <span class="o">:</span> <span class="n">expr</span> <span class="o">:=</span> <span class="bp">`</span><span class="o">(</span><span class="n">list.map</span> <span class="o">(</span><span class="bp">λ</span><span class="n">n</span> <span class="o">:</span> <span class="n">nat</span><span class="o">,</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">[</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">]),</span>
  <span class="n">tactic.trace</span> <span class="s2">"true"</span>

<span class="kd">run_cmd</span> <span class="k">do</span>
  <span class="k">let</span> <span class="n">e1</span> <span class="o">:</span> <span class="n">pexpr</span> <span class="o">:=</span> <span class="bp">``</span><span class="o">(</span><span class="n">list.map</span> <span class="o">(</span><span class="bp">λ</span><span class="n">n</span><span class="o">,</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">[</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">]),</span>
  <span class="k">let</span> <span class="n">e2</span> <span class="o">:</span> <span class="n">pexpr</span> <span class="o">:=</span> <span class="bp">``</span><span class="o">(</span><span class="n">list.map</span> <span class="n">_</span> <span class="o">[</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">]),</span>
  <span class="n">tactic.trace</span> <span class="s2">"true"</span>

<span class="kd">run_cmd</span> <span class="k">do</span>
  <span class="k">let</span> <span class="n">e1</span> <span class="o">:</span> <span class="n">pexpr</span> <span class="o">:=</span> <span class="bp">```</span><span class="o">(</span><span class="n">list.map</span> <span class="o">(</span><span class="bp">λ</span><span class="n">n</span><span class="o">,</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">[</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">]),</span>
  <span class="k">let</span> <span class="n">e2</span> <span class="o">:</span> <span class="n">pexpr</span> <span class="o">:=</span> <span class="bp">```</span><span class="o">(</span><span class="n">list.map</span> <span class="n">_</span> <span class="o">[</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">]),</span>
  <span class="k">let</span> <span class="n">e3</span> <span class="o">:</span> <span class="n">pexpr</span> <span class="o">:=</span> <span class="bp">```</span><span class="o">(</span><span class="n">seattle.washington</span><span class="o">),</span>
  <span class="n">tactic.trace</span> <span class="s2">"true"</span>

<span class="c1">-- 2. Names `</span>
<span class="kd">run_cmd</span> <span class="k">do</span>
  <span class="k">let</span> <span class="n">n1</span> <span class="o">:</span> <span class="n">name</span> <span class="o">:=</span> <span class="bp">`</span><span class="n">and.intro</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">n2</span> <span class="o">:</span> <span class="n">name</span> <span class="o">:=</span> <span class="bp">`</span><span class="n">seattle.washington</span><span class="o">,</span>
  <span class="n">tactic.trace</span> <span class="s2">"true"</span>

<span class="kd">run_cmd</span> <span class="k">do</span>
  <span class="k">let</span> <span class="n">n1</span> <span class="o">:</span> <span class="n">name</span> <span class="o">:=</span> <span class="bp">``</span><span class="n">and.intro</span><span class="o">,</span>
  <span class="n">tactic.trace</span> <span class="s2">"true"</span>
</code></pre></div>
<h2>This is Lean 4</h2>
<ul>
<li><code> `() </code> creates a <code>TSyntax</code>, the more backticks - the less permissive.</li>
<li><code> ` </code> creates a <code>Name</code>, the more backticks - the less permissive.</li>
</ul>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="c1">-- 1. Expressions `()</span>
<span class="c1">-- "Basically the `() syntax is smart enough to figure out the most general syntax category the syntax we are matching might be coming from (in this case term)."</span>
<span class="kd">def</span> <span class="n">exprSingle</span> <span class="o">:</span> <span class="n">MetaM</span> <span class="n">Unit</span> <span class="o">:=</span> <span class="k">do</span>
  <span class="k">let</span> <span class="n">x</span> <span class="o">:</span> <span class="n">TSyntax</span> <span class="bp">`</span><span class="n">term</span> <span class="bp">←</span> <span class="bp">`</span><span class="o">(</span><span class="mi">5</span><span class="o">)</span>
  <span class="k">let</span> <span class="n">y</span> <span class="o">:</span> <span class="n">TSyntax</span> <span class="bp">`</span><span class="n">term</span> <span class="bp">←</span> <span class="bp">`</span><span class="o">(</span><span class="n">seattle.washington</span><span class="o">)</span>
  <span class="n">return</span> <span class="o">()</span>

<span class="kd">def</span> <span class="n">exprDouble</span> <span class="o">:</span> <span class="n">MetaM</span> <span class="n">Unit</span> <span class="o">:=</span> <span class="k">do</span>
  <span class="k">let</span> <span class="n">x</span> <span class="o">:</span> <span class="n">TSyntax</span> <span class="bp">`</span><span class="n">term</span> <span class="bp">←</span> <span class="bp">``</span><span class="o">(</span><span class="mi">5</span><span class="o">)</span>
  <span class="n">return</span> <span class="o">()</span>

<span class="c1">-- 2. Names `</span>
<span class="kd">def</span> <span class="n">nameSingle</span> <span class="o">:=</span>
  <span class="k">let</span> <span class="n">x</span> <span class="o">:</span> <span class="n">Name</span> <span class="o">:=</span> <span class="bp">`</span><span class="n">And.intro</span>
  <span class="k">let</span> <span class="n">y</span> <span class="o">:</span> <span class="n">Name</span> <span class="o">:=</span> <span class="bp">`</span><span class="n">seattle.washington</span>
  <span class="n">true</span>

<span class="kd">def</span> <span class="n">nameDouble</span> <span class="o">:=</span>
  <span class="k">let</span> <span class="n">x</span> <span class="o">:</span> <span class="n">Name</span> <span class="o">:=</span> <span class="bp">``</span><span class="n">And.intro</span>
  <span class="n">true</span>
</code></pre></div>
<h2>Questions</h2>
<ol>
<li>In Lean 3 - why wasn't the syntax consistent, would it not be more intuitive to have more backticks =&gt; always less permissive? Was it intentional/some legacy code accident?</li>
<li>In Lean 4 - do I understand it right that <code> `() </code> creates expressions in Lean 3, and creates  syntax in Lean 4? Is there a backticks-based way to create an expression? Or what's usually used?</li>
</ol>



<a name="318228927"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%60%28%29%20and%20%60%3A%20comparing%20Lean%203%20and%204/near/318228927" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.60().20and.20.60.3A.20comparing.20Lean.203.20and.204.html#318228927">(Dec 28 2022 at 10:34)</a>:</h4>
<p>It was accidental in Lean 3. You can use <a href="https://github.com/gebner/quote4">https://github.com/gebner/quote4</a> in Lean 4.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>