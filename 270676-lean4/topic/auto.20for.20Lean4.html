---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/auto.20for.20Lean4.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/auto.20for.20Lean4.html">auto for Lean4</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="273907453"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/auto%20for%20Lean4/near/273907453" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/auto.20for.20Lean4.html#273907453">(Mar 03 2022 at 01:24)</a>:</h4>
<p><span class="user-mention" data-user-id="256311">@Jannis Limperg</span> I thought I'd respond to you here.</p>
<blockquote>
<p>Simon Hudon: I don't know if that's relevant but I have a prototype of Coq-style auto I've been working on, using discrimination tree to index lemmas and combining forward and backward reasoning. I'd be happy to polish it off if that helps</p>
<p>Jannis Limperg: Do publish please! I'm interested in your integration of forward reasoning in particular.</p>
</blockquote>
<p>The repo is already published but the version in  question is not in master yet. I'll get it merged quickly. What I'm doing for forward reasoning is that some rules that are marked as <code>@[auto]</code> get marked as forward rules for e.g. (<code>p /\ q -&gt; p</code>) when the antecedent is in some sense more complex than the consequent. Then, every iteration starts with a forward reasoning phase to create new assumptions by applying forward rules and next, we check if we can use <code>intro</code> or apply a backward rule (which can include assumptions)</p>



<a name="273945396"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/auto%20for%20Lean4/near/273945396" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jannis Limperg <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/auto.20for.20Lean4.html#273945396">(Mar 03 2022 at 09:28)</a>:</h4>
<p>Nice, thanks! My tactic supports this style of forward reasoning as well, but it requires more explicit annotations (so you have to say "this should be an elim rule"). What exactly is your heuristic for deciding to make something an elim rule? If it's robust, I could integrate it as well.</p>



<a name="274058859"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/auto%20for%20Lean4/near/274058859" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/auto.20for.20Lean4.html#274058859">(Mar 03 2022 at 23:57)</a>:</h4>
<p>Right now, I'm only calculating the tree size of the antecedent vs consequent and if the consequent is smaller than the antecedent, I label it as a forward rule. I don't have a big number of proofs using it yet so I'm waiting to see how it does over time and how well it plays along with the heuristics for backward reasoning (i.e. starting with the rules with fewer assumptions and with rules that are less general)</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>