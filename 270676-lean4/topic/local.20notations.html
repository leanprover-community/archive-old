---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/local.20notations.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/local.20notations.html">local notations</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="230089279"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/local%20notations/near/230089279" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/local.20notations.html#230089279">(Mar 12 2021 at 20:04)</a>:</h4>
<p><code>local notation</code> is supposed to disappear at the end of a section, right?</p>



<a name="230092622"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/local%20notations/near/230092622" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Leonardo de Moura <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/local.20notations.html#230092622">(Mar 12 2021 at 20:28)</a>:</h4>
<p>Yes.</p>



<a name="230093081"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/local%20notations/near/230093081" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/local.20notations.html#230093081">(Mar 12 2021 at 20:31)</a>:</h4>
<p>Hm, I hit a case where they don't (perhaps because I <code>set_option hygiene false</code> in the section?), but I'm struggling to minimize it because I can't seem to get small examples of notations working at all.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">notation</span> <span class="s2">"ℕ"</span> <span class="bp">=&gt;</span> <span class="n">Nat</span>
<span class="k">#check</span> <span class="n">ℕ</span> <span class="c1">-- Nat : Type  -- why not print ℕ?</span>
</code></pre></div>



<a name="230093389"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/local%20notations/near/230093389" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/local.20notations.html#230093389">(Mar 12 2021 at 20:33)</a>:</h4>
<p>Hm, <code>local notation</code> seems to just not disappear after sections?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">axiom</span> <span class="n">n</span> <span class="o">:</span> <span class="kt">Type</span> <span class="bp">→</span> <span class="kt">Type</span>
<span class="kn">section</span>
<span class="kn">local</span> <span class="kd">notation</span> <span class="s2">"ℕ"</span> <span class="n">x</span> <span class="bp">=&gt;</span> <span class="n">n</span> <span class="n">x</span>
<span class="kd">end</span>
<span class="k">#check</span> <span class="n">n</span> <span class="n">Nat</span> <span class="c1">-- ℕ Nat : Type</span>
</code></pre></div>



<a name="230093923"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/local%20notations/near/230093923" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Leonardo de Moura <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/local.20notations.html#230093923">(Mar 12 2021 at 20:37)</a>:</h4>
<p>I will investigate.</p>



<a name="230132720"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/local%20notations/near/230132720" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Leonardo de Moura <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/local.20notations.html#230132720">(Mar 13 2021 at 03:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="241007">Jason Gross</span> <a href="#narrow/stream/270676-lean4/topic/local.20notations/near/230093081">said</a>:</p>
<blockquote>
<p>Hm, I hit a case where they don't (perhaps because I <code>set_option hygiene false</code> in the section?), but I'm struggling to minimize it because I can't seem to get small examples of notations working at all.</p>
<p><div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">notation</span> <span class="s2">"ℕ"</span> <span class="bp">=&gt;</span> <span class="n">Nat</span>
<span class="k">#check</span> <span class="n">ℕ</span> <span class="c1">-- Nat : Type  -- why not print ℕ?</span>
</code></pre></div><br>
</p>
</blockquote>
<p>Fixed this one.</p>



<a name="230133460"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/local%20notations/near/230133460" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Leonardo de Moura <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/local.20notations.html#230133460">(Mar 13 2021 at 04:09)</a>:</h4>
<p><span class="user-mention silent" data-user-id="241007">Jason Gross</span> <a href="#narrow/stream/270676-lean4/topic/local.20notations/near/230093389">said</a>:</p>
<blockquote>
<p>Hm, <code>local notation</code> seems to just not disappear after sections?</p>
<p><div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">axiom</span> <span class="n">n</span> <span class="o">:</span> <span class="kt">Type</span> <span class="bp">→</span> <span class="kt">Type</span>
<span class="kn">section</span>
<span class="kn">local</span> <span class="kd">notation</span> <span class="s2">"ℕ"</span> <span class="n">x</span> <span class="bp">=&gt;</span> <span class="n">n</span> <span class="n">x</span>
<span class="kd">end</span>
<span class="k">#check</span> <span class="n">n</span> <span class="n">Nat</span> <span class="c1">-- ℕ Nat : Type</span>
</code></pre></div><br>
</p>
</blockquote>
<p>I found the problem with this one but didn't fix yet. The parser is scoped, but the pretty printer is not :(<br>
Note that <code>#check ℕ Nat</code> is a syntax error after the <code>end</code>.</p>



<a name="230159274"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/local%20notations/near/230159274" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/local.20notations.html#230159274">(Mar 13 2021 at 12:21)</a>:</h4>
<p>Fixed in <a href="https://github.com/leanprover/lean4/commit/00a0db4231156fbdd0e316b9ce0b2d1c301aa74f">https://github.com/leanprover/lean4/commit/00a0db4231156fbdd0e316b9ce0b2d1c301aa74f</a></p>



<a name="230390079"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/local%20notations/near/230390079" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/local.20notations.html#230390079">(Mar 15 2021 at 17:48)</a>:</h4>
<p>Thanks!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>