---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/First.20release.20of.20.22Functional.20Programming.20in.20Lean.22.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/First.20release.20of.20.22Functional.20Programming.20in.20Lean.22.html">First release of "Functional Programming in Lean"</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="285568236"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/First%20release%20of%20%22Functional%20Programming%20in%20Lean%22/near/285568236" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Thrane Christiansen <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/First.20release.20of.20.22Functional.20Programming.20in.20Lean.22.html#285568236">(Jun 09 2022 at 17:22)</a>:</h4>
<p>This is a re-post from #announce, because that's not a great place for follow-up discussion.</p>
<p>With generous support from Microsoft Research, I've been working on an online book called _Functional Programming in Lean_. The goal of the book is to be an accessible introduction to using Lean 4 as a programming language. My hope is that it is useful both to people who want to use Lean as a general-purpose programming language and to mathematicians who want to develop larger-scale proof automation but do not have a background in functional programming. I'm not assuming any background with FP, though it's probably not a good first book on programming in general.</p>
<p>New content will be added once per month until it's done. I'll announce new updates here and in the usual venues.</p>
<p>You can read what's there and follow along with the development at <a href="https://leanprover.github.io/functional_programming_in_lean/">https://leanprover.github.io/functional_programming_in_lean/</a> .</p>
<p>I'd like this book to be as useful as possible, and feedback is always welcome if there's some part that you didn't understand. You can contact me here or at <a href="mailto:david@davidchristiansen.dk">david@davidchristiansen.dk</a>.</p>



<a name="285568518"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/First%20release%20of%20%22Functional%20Programming%20in%20Lean%22/near/285568518" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/First.20release.20of.20.22Functional.20Programming.20in.20Lean.22.html#285568518">(Jun 09 2022 at 17:24)</a>:</h4>
<p>This is really nice. It will be really useful in combination with the metaprogramming book that basically assumes people have read this one.</p>



<a name="285568601"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/First%20release%20of%20%22Functional%20Programming%20in%20Lean%22/near/285568601" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/First.20release.20of.20.22Functional.20Programming.20in.20Lean.22.html#285568601">(Jun 09 2022 at 17:24)</a>:</h4>
<p>Do you have any idea how soon you'll have covered enough monad magic to read that metabook?</p>



<a name="285568937"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/First%20release%20of%20%22Functional%20Programming%20in%20Lean%22/near/285568937" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/First.20release.20of.20.22Functional.20Programming.20in.20Lean.22.html#285568937">(Jun 09 2022 at 17:27)</a>:</h4>
<p>As an idea for David what counts as "enough monad magic", the metaprogramming book takes over at monad transformers and stacks, everything up to that is assumed as given.</p>



<a name="285569168"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/First%20release%20of%20%22Functional%20Programming%20in%20Lean%22/near/285569168" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/First.20release.20of.20.22Functional.20Programming.20in.20Lean.22.html#285569168">(Jun 09 2022 at 17:29)</a>:</h4>
<p>Henrik, are you sure the latest version covers transformers and stacks? I think that got removed</p>



<a name="285569205"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/First%20release%20of%20%22Functional%20Programming%20in%20Lean%22/near/285569205" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/First.20release.20of.20.22Functional.20Programming.20in.20Lean.22.html#285569205">(Jun 09 2022 at 17:29)</a>:</h4>
<p>It's in the <code>temp/</code> folder right now but not rendered yes.</p>



<a name="285569256"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/First%20release%20of%20%22Functional%20Programming%20in%20Lean%22/near/285569256" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/First.20release.20of.20.22Functional.20Programming.20in.20Lean.22.html#285569256">(Jun 09 2022 at 17:29)</a>:</h4>
<p><a href="https://github.com/arthurpaulino/lean4-metaprogramming-book/tree/master/temp">https://github.com/arthurpaulino/lean4-metaprogramming-book/tree/master/temp</a> here</p>



<a name="285569402"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/First%20release%20of%20%22Functional%20Programming%20in%20Lean%22/near/285569402" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/First.20release.20of.20.22Functional.20Programming.20in.20Lean.22.html#285569402">(Jun 09 2022 at 17:30)</a>:</h4>
<p>Though it would make sense to eventually move this knowledge to functional programming in lean I think.</p>



<a name="285569406"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/First%20release%20of%20%22Functional%20Programming%20in%20Lean%22/near/285569406" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/First.20release.20of.20.22Functional.20Programming.20in.20Lean.22.html#285569406">(Jun 09 2022 at 17:30)</a>:</h4>
<p>I'm an old man, I <em>printed</em> the book two days ago. Nothing else exists <span aria-label="stuck out tongue wink" class="emoji emoji-1f61c" role="img" title="stuck out tongue wink">:stuck_out_tongue_wink:</span></p>



<a name="285569493"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/First%20release%20of%20%22Functional%20Programming%20in%20Lean%22/near/285569493" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Thrane Christiansen <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/First.20release.20of.20.22Functional.20Programming.20in.20Lean.22.html#285569493">(Jun 09 2022 at 17:31)</a>:</h4>
<p>There'll likely be a few months until then. I expect the next few chapters to have this rough outline:</p>
<ul>
<li>"Hello world", including how to think about side effects in a pure language, though without the M-word, along with practical tasks like how to use the compiler to build executables</li>
<li>Type classes as a principled way to do ad-hoc polymorphism</li>
<li>Monads for things like Option</li>
<li>Revisit "hello world", show how do-notation works, cover the nifty Lean features</li>
<li>Do other stuff for a while...</li>
<li>Then do some monad transformers and introduce big parts of the Lean library that use them</li>
</ul>



<a name="285569554"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/First%20release%20of%20%22Functional%20Programming%20in%20Lean%22/near/285569554" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/First.20release.20of.20.22Functional.20Programming.20in.20Lean.22.html#285569554">(Jun 09 2022 at 17:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110031">Patrick Massot</span> <a href="#narrow/stream/270676-lean4/topic/First.20release.20of.20.22Functional.20Programming.20in.20Lean.22/near/285569406">said</a>:</p>
<blockquote>
<p>I'm an old man, I <em>printed</em> the book two days ago. Nothing else exists <span aria-label="stuck out tongue wink" class="emoji emoji-1f61c" role="img" title="stuck out tongue wink">:stuck_out_tongue_wink:</span></p>
</blockquote>
<p>You actually went through with it hahaha.</p>



<a name="285569745"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/First%20release%20of%20%22Functional%20Programming%20in%20Lean%22/near/285569745" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/First.20release.20of.20.22Functional.20Programming.20in.20Lean.22.html#285569745">(Jun 09 2022 at 17:33)</a>:</h4>
<p><span class="user-mention silent" data-user-id="354934">David Thrane Christiansen</span> <a href="#narrow/stream/270676-lean4/topic/First.20release.20of.20.22Functional.20Programming.20in.20Lean.22/near/285569493">said</a>:</p>
<blockquote>
<p>There'll likely be a few months until then. I expect the next few chapters to have this rough outline:</p>
<ul>
<li>"Hello world", including how to think about side effects in a pure language, though without the M-word, along with practical tasks like how to use the compiler to build executables</li>
<li>Type classes as a principled way to do ad-hoc polymorphism</li>
<li>Monads for things like Option</li>
<li>Revisit "hello world", show how do-notation works, cover the nifty Lean features</li>
<li>Do other stuff for a while...</li>
<li>Then do some monad transformers and introduce big parts of the Lean library that use them</li>
</ul>
</blockquote>
<p>I think one of the reasons patrick is asking is that towards the end of july there is a plan to teach a bunch of Lean mathematicians how to meta program in lean 4 so they can help porting the tactics over and for that it would be optimal if we had resources that lead the way from very little Lean 4 programming knowledge to meta programming.</p>



<a name="285569972"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/First%20release%20of%20%22Functional%20Programming%20in%20Lean%22/near/285569972" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Thrane Christiansen <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/First.20release.20of.20.22Functional.20Programming.20in.20Lean.22.html#285569972">(Jun 09 2022 at 17:34)</a>:</h4>
<p>I'm working as fast as I can on this, but I'm not so sure that I can get all the way to monad transformers by July. But let's check in at the next release and see where things stand.</p>



<a name="285570002"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/First%20release%20of%20%22Functional%20Programming%20in%20Lean%22/near/285570002" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/First.20release.20of.20.22Functional.20Programming.20in.20Lean.22.html#285570002">(Jun 09 2022 at 17:34)</a>:</h4>
<p>Indeed that's part of the motivation. It seems that Lean 4 requires more monadic understanding than Lean 3.</p>



<a name="285570069"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/First%20release%20of%20%22Functional%20Programming%20in%20Lean%22/near/285570069" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/First.20release.20of.20.22Functional.20Programming.20in.20Lean.22.html#285570069">(Jun 09 2022 at 17:35)</a>:</h4>
<p>In Lean 3 I was able to write <a href="https://leanprover-community.github.io/extras/tactic_writing.html">https://leanprover-community.github.io/extras/tactic_writing.html</a> which covers very little monadology and still allows to write easy tactics.</p>



<a name="285571474"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/First%20release%20of%20%22Functional%20Programming%20in%20Lean%22/near/285571474" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/First.20release.20of.20.22Functional.20Programming.20in.20Lean.22.html#285571474">(Jun 09 2022 at 17:48)</a>:</h4>
<p>Not sure how important it is at this very moment but have you given any thought to contacting a publisher? O'Reilly at least always says they're trying to find the next new thing. Maybe they'd be interested in funding some of the writing of these books (which yeah seems also super helpful!).</p>



<a name="285571617"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/First%20release%20of%20%22Functional%20Programming%20in%20Lean%22/near/285571617" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/First.20release.20of.20.22Functional.20Programming.20in.20Lean.22.html#285571617">(Jun 09 2022 at 17:49)</a>:</h4>
<p>Ah sorry, I see you said you're already getting supported by MS.</p>



<a name="285590741"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/First%20release%20of%20%22Functional%20Programming%20in%20Lean%22/near/285590741" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/First.20release.20of.20.22Functional.20Programming.20in.20Lean.22.html#285590741">(Jun 09 2022 at 20:23)</a>:</h4>
<p>Patrick I'm curious why you say that Lean4 requires more monadic understanding? Is it because of the uses of <code>lift</code>s all over the place? I would think the fact that you can write for loops in the usual way is an argument against this claim!</p>



<a name="285591664"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/First%20release%20of%20%22Functional%20Programming%20in%20Lean%22/near/285591664" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/First.20release.20of.20.22Functional.20Programming.20in.20Lean.22.html#285591664">(Jun 09 2022 at 20:32)</a>:</h4>
<p>Yes, I'm thinking about <code>liftWhatever</code> and <code>withStuff</code> that appear everywhere. The words "monad stack" and "monad transformer" don't appear anywhere in our elementary Lean 3 tactic writing documentation (and I don't think they appear in Rob's lectures).</p>



<a name="285591759"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/First%20release%20of%20%22Functional%20Programming%20in%20Lean%22/near/285591759" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/First.20release.20of.20.22Functional.20Programming.20in.20Lean.22.html#285591759">(Jun 09 2022 at 20:33)</a>:</h4>
<p>However this is a very superficial comment. I only claim I see things that I didn't need to know in Lean 3 and seem really important from the very beginning here.</p>



<a name="285596553"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/First%20release%20of%20%22Functional%20Programming%20in%20Lean%22/near/285596553" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/First.20release.20of.20.22Functional.20Programming.20in.20Lean.22.html#285596553">(Jun 09 2022 at 21:15)</a>:</h4>
<p>I spoke in ETH Zurich last Friday and after the talk a Springer/Birkhäuser publisher approached me and asked if I was interested in writing a book. I said no but I can pass their details on if you're interested.</p>



<a name="285601106"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/First%20release%20of%20%22Functional%20Programming%20in%20Lean%22/near/285601106" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/First.20release.20of.20.22Functional.20Programming.20in.20Lean.22.html#285601106">(Jun 09 2022 at 21:59)</a>:</h4>
<p>I think tactic writing / monadic programming in Lean 4 can look scarier because the syntax is richer, there are more monads and the API is more extensive. But in the very core, it's still monads and the fundamental concepts remain</p>



<a name="285636956"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/First%20release%20of%20%22Functional%20Programming%20in%20Lean%22/near/285636956" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Siddhartha Gadgil <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/First.20release.20of.20.22Functional.20Programming.20in.20Lean.22.html#285636956">(Jun 10 2022 at 06:37)</a>:</h4>
<p>In my personal experience one can work with <code>liftWhatever</code> and <code>withStuff</code> without really knowing monad transformers. Signatures of these things and examples (from the lean 4 source, now from the metaprogramming book) are often enough.</p>



<a name="285638405"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/First%20release%20of%20%22Functional%20Programming%20in%20Lean%22/near/285638405" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Thrane Christiansen <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/First.20release.20of.20.22Functional.20Programming.20in.20Lean.22.html#285638405">(Jun 10 2022 at 06:59)</a>:</h4>
<p>The book is for free on the Lean web page - no publisher needed right now, but that might be a nice way to extend the reach of Lean someday. I was also very happy with my experience with the MIT Press for _The Little Typer_, so they'd be good to talk to.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>