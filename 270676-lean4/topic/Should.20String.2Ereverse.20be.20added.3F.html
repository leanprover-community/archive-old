---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/Should.20String.2Ereverse.20be.20added.3F.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Should.20String.2Ereverse.20be.20added.3F.html">Should String.reverse be added?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="284131929"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Should%20String.reverse%20be%20added%3F/near/284131929" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Should.20String.2Ereverse.20be.20added.3F.html#284131929">(May 27 2022 at 13:26)</a>:</h4>
<p>Should a <code>String.reverse</code> be added to the std? I have found myself needing it quite a few times, and I even have an implementation in my <code>Soup</code> project:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">String.reverse</span> <span class="o">:=</span> <span class="o">(</span><span class="n">String.intercalate</span> <span class="s2">""</span><span class="o">)</span> <span class="bp">∘</span> <span class="o">(</span><span class="n">List.map</span> <span class="n">toString</span><span class="o">)</span> <span class="bp">∘</span> <span class="n">List.reverse</span> <span class="bp">∘</span> <span class="n">String.toList</span>
</code></pre></div>
<p>I also looked through the docs carefully and wasn't able to find one.</p>



<a name="284132412"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Should%20String.reverse%20be%20added%3F/near/284132412" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Should.20String.2Ereverse.20be.20added.3F.html#284132412">(May 27 2022 at 13:29)</a>:</h4>
<p>You can make use of <code>List.reverse</code>:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">String.reverse</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">String</span><span class="o">)</span> <span class="o">:</span> <span class="n">String</span> <span class="o">:=</span>
  <span class="o">⟨</span><span class="n">s.data.reverse</span><span class="o">⟩</span>
</code></pre></div>



<a name="284132783"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Should%20String.reverse%20be%20added%3F/near/284132783" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Should.20String.2Ereverse.20be.20added.3F.html#284132783">(May 27 2022 at 13:32)</a>:</h4>
<p>Doesnt that return a list?<br>
Or do the brackets do something special</p>



<a name="284132904"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Should%20String.reverse%20be%20added%3F/near/284132904" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Should.20String.2Ereverse.20be.20added.3F.html#284132904">(May 27 2022 at 13:33)</a>:</h4>
<p>The brackets are the anonymous constructor notation which you can use if the expected data type has only one constructor because what you want can be inferred perfectly then.</p>



<a name="284132981"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Should%20String.reverse%20be%20added%3F/near/284132981" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Should.20String.2Ereverse.20be.20added.3F.html#284132981">(May 27 2022 at 13:33)</a>:</h4>
<p>So it implicitly converts the list to a String?</p>



<a name="284133057"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Should%20String.reverse%20be%20added%3F/near/284133057" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Should.20String.2Ereverse.20be.20added.3F.html#284133057">(May 27 2022 at 13:34)</a>:</h4>
<p>No its quite explicit, after all you wrote it out</p>



<a name="284133213"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Should%20String.reverse%20be%20added%3F/near/284133213" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Should.20String.2Ereverse.20be.20added.3F.html#284133213">(May 27 2022 at 13:35)</a>:</h4>
<p>But I didn't call <code>String.intercalate ""</code></p>



<a name="284133266"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Should%20String.reverse%20be%20added%3F/near/284133266" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Should.20String.2Ereverse.20be.20added.3F.html#284133266">(May 27 2022 at 13:35)</a>:</h4>
<p>That being said operating directly on <code>String</code>s data field is mayube not what you really want to do? Strings have an FFI representation as evident by their constructors etc. being external functions <a href="https://github.com/leanprover/lean4/blob/d13fac6f458bd1efd772424066f2a85f8c8ba32a/src/Init/Prelude.lean#L1122-L1123">https://github.com/leanprover/lean4/blob/d13fac6f458bd1efd772424066f2a85f8c8ba32a/src/Init/Prelude.lean#L1122-L1123</a> so you probably want to define this function either in terms of existing string functions or via the FFI</p>



<a name="284133390"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Should%20String.reverse%20be%20added%3F/near/284133390" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Should.20String.2Ereverse.20be.20added.3F.html#284133390">(May 27 2022 at 13:36)</a>:</h4>
<p>So you can construct a string with a list essentially? I guess it makes sense, as a string is a list of chars</p>



<a name="284133404"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Should%20String.reverse%20be%20added%3F/near/284133404" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Should.20String.2Ereverse.20be.20added.3F.html#284133404">(May 27 2022 at 13:36)</a>:</h4>
<p><span class="user-mention silent" data-user-id="467926">Joseph O</span> <a href="#narrow/stream/270676-lean4/topic/Should.20String.2Ereverse.20be.20added.3F/near/284133213">said</a>:</p>
<blockquote>
<p>But I didn't call <code>String.intercalate ""</code></p>
</blockquote>
<p>That doesnt matter at all, string is a structure around a list of characters so calling the constructor of that structure is the only thing you need to do, however as explained this "list of characters" is just the representation that is given to the lean programmer and not the one you usually want to work with</p>



<a name="284133461"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Should%20String.reverse%20be%20added%3F/near/284133461" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Should.20String.2Ereverse.20be.20added.3F.html#284133461">(May 27 2022 at 13:37)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="k">#eval</span> <span class="o">(⟨[</span><span class="sc">'h'</span><span class="o">,</span> <span class="sc">'i'</span><span class="o">]⟩</span> <span class="o">:</span> <span class="n">String</span><span class="o">)</span> <span class="c1">-- "hi"</span>
</code></pre></div>



<a name="284133487"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Should%20String.reverse%20be%20added%3F/near/284133487" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Should.20String.2Ereverse.20be.20added.3F.html#284133487">(May 27 2022 at 13:37)</a>:</h4>
<p><span class="user-mention silent" data-user-id="395550">Henrik Böving</span> <a href="#narrow/stream/270676-lean4/topic/Should.20String.2Ereverse.20be.20added.3F/near/284133404">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="467926">Joseph O</span> <a href="#narrow/stream/270676-lean4/topic/Should.20String.2Ereverse.20be.20added.3F/near/284133213">said</a>:</p>
<blockquote>
<p>But I didn't call <code>String.intercalate ""</code></p>
</blockquote>
<p>That doesnt matter at all, string is a structure around a list of characters so calling the constructor of that structure is the only thing you need to do, however as explained this "list of characters" is just the representation that is given to the lean programmer and not the one you usually want to work with</p>
</blockquote>
<p>Yeah I see<br>
Thats pretty cool</p>



<a name="284133516"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Should%20String.reverse%20be%20added%3F/near/284133516" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Should.20String.2Ereverse.20be.20added.3F.html#284133516">(May 27 2022 at 13:37)</a>:</h4>
<p>But now to the original question, should this be added to the std</p>



<a name="284133682"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Should%20String.reverse%20be%20added%3F/near/284133682" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Should.20String.2Ereverse.20be.20added.3F.html#284133682">(May 27 2022 at 13:38)</a>:</h4>
<p>Maybe in a future. I wouldn't worry about Std at the moment. The core devs have bigger fish to fry</p>



<a name="284133691"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Should%20String.reverse%20be%20added%3F/near/284133691" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Should.20String.2Ereverse.20be.20added.3F.html#284133691">(May 27 2022 at 13:39)</a>:</h4>
<p>As you've been told before, <code>Std</code> is the things the compiler needs to work and not a general purpose Std library that is receiving contributions right now so no, not unless the compiler needs it.</p>



<a name="284134651"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Should%20String.reverse%20be%20added%3F/near/284134651" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Should.20String.2Ereverse.20be.20added.3F.html#284134651">(May 27 2022 at 13:46)</a>:</h4>
<p>What about the case with <code>HashMap.toList</code>?</p>



<a name="284134729"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Should%20String.reverse%20be%20added%3F/near/284134729" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Should.20String.2Ereverse.20be.20added.3F.html#284134729">(May 27 2022 at 13:46)</a>:</h4>
<p>But if it isn't needed in the std, Ill probably add it in mathlib 4</p>



<a name="284134972"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Should%20String.reverse%20be%20added%3F/near/284134972" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Should.20String.2Ereverse.20be.20added.3F.html#284134972">(May 27 2022 at 13:48)</a>:</h4>
<p>String reversal is a questionable operation if there's not a specification for what it's supposed to do.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">String.reverse</span> <span class="o">:=</span> <span class="o">(</span><span class="n">String.intercalate</span> <span class="s2">""</span><span class="o">)</span> <span class="bp">∘</span> <span class="o">(</span><span class="n">List.map</span> <span class="n">toString</span><span class="o">)</span> <span class="bp">∘</span> <span class="n">List.reverse</span> <span class="bp">∘</span> <span class="n">String.toList</span>

<span class="k">#eval</span> <span class="s2">"mañana"</span><span class="bp">.</span><span class="n">reverse</span>
<span class="c1">-- "anãnam"</span>
</code></pre></div>



<a name="284135056"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Should%20String.reverse%20be%20added%3F/near/284135056" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Should.20String.2Ereverse.20be.20added.3F.html#284135056">(May 27 2022 at 13:49)</a>:</h4>
<p>Well all it does it reverse a string</p>



<a name="284135205"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Should%20String.reverse%20be%20added%3F/near/284135205" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Should.20String.2Ereverse.20be.20added.3F.html#284135205">(May 27 2022 at 13:50)</a>:</h4>
<p>I might have expected <code>anañam</code> if you just told me that this reverses strings.</p>



<a name="284135320"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Should%20String.reverse%20be%20added%3F/near/284135320" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Should.20String.2Ereverse.20be.20added.3F.html#284135320">(May 27 2022 at 13:51)</a>:</h4>
<p>There's also grapheme cluster reversal. Codepoint reversal is valid, but my point is that there's not just one string reversal operation.</p>



<a name="284135359"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Should%20String.reverse%20be%20added%3F/near/284135359" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Should.20String.2Ereverse.20be.20added.3F.html#284135359">(May 27 2022 at 13:51)</a>:</h4>
<p>Ah right</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>