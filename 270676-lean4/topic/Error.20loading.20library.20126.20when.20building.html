---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/Error.20loading.20library.20126.20when.20building.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Error.20loading.20library.20126.20when.20building.html">Error loading library 126 when building</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="311557468"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Error%20loading%20library%20126%20when%20building/near/311557468" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yicheng Qian <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Error.20loading.20library.20126.20when.20building.html#311557468">(Nov 22 2022 at 10:05)</a>:</h4>
<p>I'm having problem when compiling lean code.<br>
After cloning the latest version of <code>https://github.com/abentkamp/duper</code>, I ran <code>lake build</code> in the folder and lean raised an error</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">libc</span><span class="bp">++</span><span class="n">abi</span><span class="o">:</span> <span class="n">terminating</span> <span class="bp">&lt;...&gt;</span><span class="n">lean</span><span class="o">::</span><span class="n">exception</span><span class="o">:</span> <span class="n">error</span> <span class="n">loading</span> <span class="n">library</span> <span class="n">Duper</span><span class="bp">-</span><span class="n">Util</span><span class="bp">-</span><span class="n">Misc.dll</span><span class="o">:</span> <span class="mi">126</span>
<span class="n">error</span><span class="o">:</span> <span class="n">external</span> <span class="n">command</span> <span class="bp">`&lt;...\</span><span class="n">lean.exe</span><span class="bp">&gt;`</span> <span class="n">exited</span> <span class="k">with</span> <span class="n">code</span> <span class="mi">3221226505</span>
</code></pre></div>
<p>What should I do to make it work?<br>
The complete error message:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">stderr</span><span class="o">:</span>
<span class="n">info</span><span class="o">:</span> <span class="n">Building</span> <span class="n">Duper.Clause</span>
<span class="n">error</span><span class="o">:</span> <span class="bp">&gt;</span> <span class="n">LEAN_PATH</span><span class="bp">=.\</span><span class="n">lean_packages</span><span class="bp">\</span><span class="n">std</span><span class="bp">\</span><span class="n">build</span><span class="bp">\</span><span class="n">lib</span><span class="bp">;.\</span><span class="n">build</span><span class="bp">\</span><span class="n">lib</span> <span class="bp">&lt;...&gt;\</span><span class="n">lean.exe</span> <span class="bp">.\.\.\</span><span class="n">Duper</span><span class="bp">\</span><span class="n">Clause.lean</span> <span class="bp">-</span><span class="n">R</span> <span class="bp">.\.\.</span> <span class="bp">-</span><span class="n">o</span> <span class="bp">.\</span><span class="n">build</span><span class="bp">\</span><span class="n">lib</span><span class="bp">\</span><span class="n">Duper</span><span class="bp">\</span><span class="n">Clause.olean</span> <span class="bp">-</span><span class="n">i</span> <span class="bp">.\</span><span class="n">build</span><span class="bp">\</span><span class="n">lib</span><span class="bp">\</span><span class="n">Duper</span><span class="bp">\</span><span class="n">Clause.ilean</span> <span class="bp">-</span><span class="n">c</span> <span class="bp">.\</span><span class="n">build</span><span class="bp">\</span><span class="n">ir</span><span class="bp">\</span><span class="n">Duper</span><span class="bp">\</span><span class="n">Clause.c</span> <span class="c1">--load-dynlib=Duper-Util-Misc.dll --load-dynlib=Duper-Expr.dll --load-dynlib=Duper-Order.dll</span>
<span class="n">error</span><span class="o">:</span> <span class="n">stderr</span><span class="o">:</span>
<span class="n">libc</span><span class="bp">++</span><span class="n">abi</span><span class="o">:</span> <span class="n">terminating</span> <span class="n">due</span> <span class="n">to</span> <span class="n">uncaught</span> <span class="n">exception</span> <span class="n">of</span> <span class="n">type</span> <span class="n">lean</span><span class="o">::</span><span class="n">exception</span><span class="o">:</span> <span class="n">error</span> <span class="n">loading</span> <span class="n">library</span> <span class="n">Duper</span><span class="bp">-</span><span class="n">Util</span><span class="bp">-</span><span class="n">Misc.dll</span><span class="o">:</span> <span class="mi">126</span>
<span class="n">error</span><span class="o">:</span> <span class="n">external</span> <span class="n">command</span> <span class="bp">`</span><span class="n">c</span><span class="o">:</span><span class="bp">\</span><span class="n">Users</span><span class="bp">\</span><span class="n">yiche</span><span class="bp">\.</span><span class="n">elan</span><span class="bp">\</span><span class="n">toolchains</span><span class="bp">\</span><span class="n">leanprover</span><span class="c1">--lean4---nightly-2022-11-19\bin\lean.exe` exited with code 3221226505</span>
</code></pre></div>



<a name="311652922"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Error%20loading%20library%20126%20when%20building/near/311652922" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yicheng Qian <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Error.20loading.20library.20126.20when.20building.html#311652922">(Nov 22 2022 at 16:04)</a>:</h4>
<p>Ah. I've tried WSL, and it compiled successfully. However I just can't get it to compile on Windows.</p>



<a name="311654753"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Error%20loading%20library%20126%20when%20building/near/311654753" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Error.20loading.20library.20126.20when.20building.html#311654753">(Nov 22 2022 at 16:13)</a>:</h4>
<p><span class="user-mention" data-user-id="315577">@Mac</span> 126 is <code>ERROR_MOD_NOT_FOUND</code>, so the <code>PATH</code> may not be correctly set up. Unfortunately, the error message doesn't tell us whether the mentioned DLL or any of its dependencies was not found.</p>



<a name="311928336"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Error%20loading%20library%20126%20when%20building/near/311928336" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Error.20loading.20library.20126.20when.20building.html#311928336">(Nov 24 2022 at 01:06)</a>:</h4>
<p><span class="user-mention" data-user-id="110024">@Sebastian Ullrich</span>  Yeah the problem is that augmented PATH environment variable does not properly forward to the worker processes on Windows. This is a relatively recent phenomenon that I think may be related to the changes in <a href="https://github.com/leanprover/lean4/pull/1739">lean4#1759</a>. However, I have a fix in the works which should solve this regardless. This plan is deploy it with the v4.1.0 release by the end of the month.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>