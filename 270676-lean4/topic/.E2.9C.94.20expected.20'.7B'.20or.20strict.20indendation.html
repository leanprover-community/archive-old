---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/.E2.9C.94.20expected.20'.7B'.20or.20strict.20indendation.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20expected.20'.7B'.20or.20strict.20indendation.html">âœ” expected '{' or strict indendation</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="312423590"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20expected%20%27%7B%27%20or%20strict%20indendation/near/312423590" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20expected.20'.7B'.20or.20strict.20indendation.html#312423590">(Nov 27 2022 at 04:26)</a>:</h4>
<p>yes, this is expected: the token <code>go</code> starts a <code>withPosition</code> and everything else has to be after that, so either you need a bunch of indentation or <code>go</code> needs to be on the next line</p>



<a name="312423691"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20expected%20%27%7B%27%20or%20strict%20indendation/near/312423691" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20expected.20'.7B'.20or.20strict.20indendation.html#312423691">(Nov 27 2022 at 04:28)</a>:</h4>
<p>the specific breakage here is due to <code>by</code> now requiring strict indentation, but you would already have hit an issue here if you put e.g.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">:</span> <span class="n">true</span> <span class="o">:=</span> <span class="n">go</span>
<span class="n">where</span> <span class="n">go</span> <span class="o">:</span>
    <span class="n">true</span> <span class="o">:=</span>
  <span class="n">id</span> <span class="n">rfl</span>
</code></pre></div>



<a name="312423853"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20expected%20%27%7B%27%20or%20strict%20indendation/near/312423853" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20expected.20'.7B'.20or.20strict.20indendation.html#312423853">(Nov 27 2022 at 04:30)</a>:</h4>
<p>if you want to minimize the number of newlines in this notation I would suggest</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">:</span> <span class="n">true</span> <span class="o">:=</span> <span class="n">go</span> <span class="n">where</span>
  <span class="n">go</span> <span class="o">:</span> <span class="n">id</span> <span class="n">true</span> <span class="o">:=</span> <span class="kd">by</span>
    <span class="n">trivial</span>
</code></pre></div>



<a name="312425277"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20expected%20%27%7B%27%20or%20strict%20indendation/near/312425277" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20expected.20'.7B'.20or.20strict.20indendation.html#312425277">(Nov 27 2022 at 04:56)</a>:</h4>
<p>Hm, the issue is that in the actual example the type is too long to fit on one line, so I was going for the "indent type by 4, proof by 2" that I'd usually use for theorems. But putting <code>go</code> on a new line solves that, thanks!</p>



<a name="312425280"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20expected%20%27%7B%27%20or%20strict%20indendation/near/312425280" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20expected.20'.7B'.20or.20strict.20indendation.html#312425280">(Nov 27 2022 at 04:56)</a>:</h4>
<p><span class="user-mention silent" data-user-id="128280">Wojciech Nawrocki</span> has marked this topic as resolved.</p>



<a name="312426091"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20expected%20%27%7B%27%20or%20strict%20indendation/near/312426091" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20expected.20'.7B'.20or.20strict.20indendation.html#312426091">(Nov 27 2022 at 05:07)</a>:</h4>
<p>I would do that like so:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">:</span> <span class="n">true</span> <span class="o">:=</span> <span class="n">go</span> <span class="n">where</span>
  <span class="n">go</span> <span class="o">:</span> <span class="n">long</span>
      <span class="n">type</span> <span class="o">:=</span> <span class="kd">by</span>
    <span class="n">trivial</span>
</code></pre></div>



<a name="312426196"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20expected%20%27%7B%27%20or%20strict%20indendation/near/312426196" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20expected.20'.7B'.20or.20strict.20indendation.html#312426196">(Nov 27 2022 at 05:09)</a>:</h4>
<p>so the type of <code>go</code> is indented by 6 and the body is indented by 4, and similarly for any other where-functions</p>



<a name="312445433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20expected%20%27%7B%27%20or%20strict%20indendation/near/312445433" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20expected.20'.7B'.20or.20strict.20indendation.html#312445433">(Nov 27 2022 at 09:52)</a>:</h4>
<p>Core style would probably be</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">:</span> <span class="n">true</span> <span class="o">:=</span>
  <span class="n">go</span>
<span class="n">where</span>
  <span class="n">go</span> <span class="o">:</span>
      <span class="n">long</span> <span class="n">type</span> <span class="o">:=</span> <span class="kd">by</span>
    <span class="n">trivial</span>
</code></pre></div>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>