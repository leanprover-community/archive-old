---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/VS.20Code.20Extension.20LSP.20stack.20overflow.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/VS.20Code.20Extension.20LSP.20stack.20overflow.html">VS Code Extension LSP stack overflow</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="242897463"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/VS%20Code%20Extension%20LSP%20stack%20overflow/near/242897463" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/VS.20Code.20Extension.20LSP.20stack.20overflow.html#242897463">(Jun 16 2021 at 15:28)</a>:</h4>
<p>I am getting </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">Stack</span> <span class="n">overflow</span> <span class="n">detected.</span> <span class="n">Aborting.</span>
<span class="o">[</span><span class="n">Error</span> <span class="bp">-</span> <span class="mi">11</span><span class="o">:</span><span class="mi">22</span><span class="o">:</span><span class="mi">34</span> <span class="n">AM</span><span class="o">]</span> <span class="n">Request</span> <span class="n">textDocument</span><span class="bp">/</span><span class="n">completion</span> <span class="n">failed.</span>
  <span class="n">Message</span><span class="o">:</span> <span class="n">Server</span> <span class="n">process</span> <span class="n">for</span> <span class="n">file</span><span class="o">:</span><span class="bp">///</span><span class="n">home</span><span class="bp">/</span><span class="n">matt</span><span class="bp">/</span><span class="n">foo</span><span class="bp">/</span><span class="n">Foo.lean</span> <span class="n">crashed</span><span class="o">,</span> <span class="n">likely</span> <span class="n">due</span> <span class="n">to</span> <span class="n">a</span> <span class="n">stack</span> <span class="n">overflow</span> <span class="k">in</span> <span class="n">user</span> <span class="n">code.</span>
  <span class="n">Code</span><span class="o">:</span> <span class="bp">-</span><span class="mi">32603</span>
<span class="o">[</span><span class="n">Error</span> <span class="bp">-</span> <span class="mi">11</span><span class="o">:</span><span class="mi">22</span><span class="o">:</span><span class="mi">34</span> <span class="n">AM</span><span class="o">]</span> <span class="n">Request</span> <span class="n">textDocument</span><span class="bp">/</span><span class="n">semanticTokens</span><span class="bp">/</span><span class="n">full</span> <span class="n">failed.</span>
  <span class="n">Message</span><span class="o">:</span> <span class="n">Server</span> <span class="n">process</span> <span class="n">for</span> <span class="n">file</span><span class="o">:</span><span class="bp">///</span><span class="n">home</span><span class="bp">/</span><span class="n">matt</span><span class="bp">/</span><span class="n">foo</span><span class="bp">/</span><span class="n">Foo.lean</span> <span class="n">crashed</span><span class="o">,</span> <span class="n">likely</span> <span class="n">due</span> <span class="n">to</span> <span class="n">a</span> <span class="n">stack</span> <span class="n">overflow</span> <span class="k">in</span> <span class="n">user</span> <span class="n">code.</span>
  <span class="n">Code</span><span class="o">:</span> <span class="bp">-</span><span class="mi">32603</span>
<span class="o">[</span><span class="n">Error</span> <span class="bp">-</span> <span class="mi">11</span><span class="o">:</span><span class="mi">22</span><span class="o">:</span><span class="mi">34</span> <span class="n">AM</span><span class="o">]</span> <span class="n">Request</span> <span class="n">textDocument</span><span class="bp">/</span><span class="n">documentSymbol</span> <span class="n">failed.</span>
  <span class="n">Message</span><span class="o">:</span> <span class="n">Server</span> <span class="n">process</span> <span class="n">for</span> <span class="n">file</span><span class="o">:</span><span class="bp">///</span><span class="n">home</span><span class="bp">/</span><span class="n">matt</span><span class="bp">/</span><span class="n">foo</span><span class="bp">/</span><span class="n">Foo.lean</span> <span class="n">crashed</span><span class="o">,</span> <span class="n">likely</span> <span class="n">due</span> <span class="n">to</span> <span class="n">a</span> <span class="n">stack</span> <span class="n">overflow</span> <span class="k">in</span> <span class="n">user</span> <span class="n">code.</span>
  <span class="n">Code</span><span class="o">:</span> <span class="bp">-</span><span class="mi">32603</span>
</code></pre></div>
<p>when the extension attempts auto-complete at F in </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">inductive</span> <span class="n">Foo</span> <span class="n">where</span>
 <span class="bp">|</span> <span class="n">bar</span> <span class="o">:</span> <span class="n">F</span>
</code></pre></div>
<p>Can someone replicate this?</p>



<a name="242898880"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/VS%20Code%20Extension%20LSP%20stack%20overflow/near/242898880" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/VS.20Code.20Extension.20LSP.20stack.20overflow.html#242898880">(Jun 16 2021 at 15:38)</a>:</h4>
<p>Yep. Auto-completing at F causes the server hang and then after ~1min it crashes with the stack overflow. (I tested it on the 06-14 nightly.)</p>



<a name="242898932"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/VS%20Code%20Extension%20LSP%20stack%20overflow/near/242898932" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/VS.20Code.20Extension.20LSP.20stack.20overflow.html#242898932">(Jun 16 2021 at 15:38)</a>:</h4>
<p>I would suggest submit this as an issue to the GitHub: <a href="https://github.com/leanprover/lean4/issues">https://github.com/leanprover/lean4/issues</a></p>



<a name="242899196"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/VS%20Code%20Extension%20LSP%20stack%20overflow/near/242899196" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/VS.20Code.20Extension.20LSP.20stack.20overflow.html#242899196">(Jun 16 2021 at 15:40)</a>:</h4>
<p>Thanks. That is the next step - just wanted to make sure nothing idiosyncratic was happening with my machines.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>