---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html">New release of Functional Programming in Lean</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="288866895"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/288866895" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Thrane Christiansen <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#288866895">(Jul 07 2022 at 21:14)</a>:</h4>
<p>The second release of <em>Functional Programming in Lean</em> is up. This release completes Chapter 1. As always, feedback is more than welcome here or via email.</p>
<p>I hope you find it useful! It's available at <a href="https://leanprover.github.io/functional_programming_in_lean/">https://leanprover.github.io/functional_programming_in_lean/</a> .</p>



<a name="292333157"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/292333157" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Thrane Christiansen <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#292333157">(Aug 07 2022 at 18:36)</a>:</h4>
<p>Hello again! The third release is up. It contains <a href="https://leanprover.github.io/functional_programming_in_lean/hello-world.html">Chapter 2</a>, which describes <code>IO</code>, <code>lake</code>, and introduces <code>do</code>-notation.</p>



<a name="292346818"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/292346818" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#292346818">(Aug 07 2022 at 23:13)</a>:</h4>
<p><span class="user-mention" data-user-id="354934">@David Thrane Christiansen</span> One note: the <code>feline</code> example could use <code>lake new feline exe</code> instead to generate just an executable configuration.</p>



<a name="292347610"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/292347610" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> František Silváši <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#292347610">(Aug 07 2022 at 23:32)</a>:</h4>
<p>I love the way you introduce IO actions, no monoids in the category of endofunctors, no algebraic effects; 10/10 :).<br>
A few very minor observations:<br>
a) 2.1 - Anatomy of a Greeting</p>
<blockquote>
<p>Because this action doesn't read any interesting information from the environment in the process of emitting the string, IO.println has type String → IO Unit</p>
</blockquote>
<p>I don't think it's immediately obvious as to what the type would be if it did indeed read anything interesting from the environment, but perhaps it's just my inability to process the sentence properly :).</p>
<p>b) 2.2 - IO Actions vs Values</p>
<blockquote>
<p>It's structure....</p>
</blockquote>
<p>Just a typo from 'Its structure'.</p>
<p>c) 2.4 - Main<br>
This is more so a nitpick and realistically completely irrelevant in a Lean book, but in specifically C (and rules are different in C++):<br>
0) you'll never see a standard-compliant <code>main</code> that returns void unless you want to rely on <code>/* or in some other implementation-defined manner. */</code> in the standard<br>
1) technically, any function in C that does not specify <code>void</code> in the parameter list takes any number of arguments; as such, especially main should be explicitly labelled as <code>int main(void)</code> if you want the one that takes no arguments</p>



<a name="292356015"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/292356015" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Tom <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#292356015">(Aug 08 2022 at 03:00)</a>:</h4>
<p>The counter worker/cook analogy is really nice but it threw me off a bit upon first reading and I had to do a mental "flip" when I reached the conclusion.</p>
<p>Once I got to the end of the paragraph it was clear the counter worker is the IO monad that interacts with the real world but my expectation reading initially was exactly the opposite:  I, the client, am interacting with the nice/clean/polite and friendly counter worker Lean (it also made sense in the sense of requesting what I want, i.e. being declarative) while, behind the scenes, the cook (the runtime) does all the "heavy lifting".</p>



<a name="292367191"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/292367191" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Thrane Christiansen <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#292367191">(Aug 08 2022 at 07:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="315577">Mac</span> <a href="#narrow/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean/near/292346818">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="354934">David Thrane Christiansen</span> One note: the <code>feline</code> example could use <code>lake new feline exe</code> instead to generate just an executable configuration.</p>
</blockquote>
<p>Thanks! I'll consider revising it. I think there's some value in people editing the file, just to get the experience, but it's also nice to show the available conveniences.</p>



<a name="292367900"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/292367900" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Thrane Christiansen <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#292367900">(Aug 08 2022 at 07:17)</a>:</h4>
<p><span class="user-mention" data-user-id="364929">@František Silváši</span> I've created an issue on my tracker to make sure I follow up on these points - they'll be fixed in the next release. Thank you! And given that C has a strong culture of reading and adhering to standards, rather than just what implementations actually do, I think it's important to respect it so as not to lose C programmers who are less sold on Lean. This feedback is very valuable (as are the other points), so thank you very much!</p>



<a name="292367996"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/292367996" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Thrane Christiansen <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#292367996">(Aug 08 2022 at 07:18)</a>:</h4>
<p><span class="user-mention" data-user-id="515083">@Tom</span> thanks for the feedback! I'll think a bit more about that analogy.</p>



<a name="292380672"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/292380672" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#292380672">(Aug 08 2022 at 09:50)</a>:</h4>
<p>I like the analogy and I read it correctly from the beginning but of course I already know about monads. David, maybe you could simply insert a stronger hint at the very beginning clarifying who is the cook and who is the counter worker.</p>



<a name="293342718"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/293342718" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Paul  Chisholm <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#293342718">(Aug 14 2022 at 04:48)</a>:</h4>
<p>A couple of comments on chapter 1:</p>
<ul>
<li>1.6 Polymorphism-Option<br>
Might be worth mentioning coercion allows the body of <code>List.head?</code> to be written</li>
</ul>
<div class="codehilite" data-code-language="def"><pre><span></span><code>  match xs with
  | [] =&gt; none
  | y :: _ =&gt; y
</code></pre></div>
<p>and Lean infers the <code>y</code> really means <code>some y</code>. This may be a little advanced for an introductory text, but it is the sort of thing that could catch out newcomers from languages where the <code>some</code> is mandatory. Perhaps it would be better in the <code>Additional Conveniences</code> section.</p>
<ul>
<li>1.7 Additional Conveniences<br>
Would be worth mentioning that match cases can be combined when the expression on the RHS is the same, so the <code>halve</code> example  can be written:</li>
</ul>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">halve</span> <span class="o">:</span> <span class="n">Nat</span> <span class="bp">→</span> <span class="n">Nat</span>
  <span class="bp">|</span> <span class="mi">0</span>
  <span class="bp">|</span> <span class="mi">1</span> <span class="bp">=&gt;</span> <span class="mi">0</span>
  <span class="bp">|</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">2</span> <span class="bp">=&gt;</span> <span class="n">halve</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span>
</code></pre></div>



<a name="293360228"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/293360228" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Paul  Chisholm <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#293360228">(Aug 14 2022 at 09:37)</a>:</h4>
<p>Another couple of things it would be good to cover:</p>
<ul>
<li>The difference between <code>=</code> and <code>==</code> (even if just to note <code>==</code> is used for the moment and <code>=</code> will be explained in <code>From Programming to Proving</code>).</li>
<li>Explanation of the <code>.name</code> notation where Lean infers the namespace from context (I see this in a couple of the examples and in Zulip topics, but not in the documentation yet that I have observed).</li>
</ul>



<a name="293360775"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/293360775" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#293360775">(Aug 14 2022 at 09:43)</a>:</h4>
<p>Note that we would usually write</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">halve</span> <span class="o">:</span> <span class="n">Nat</span> <span class="bp">-&gt;</span> <span class="n">Nat</span>
  <span class="bp">|</span> <span class="mi">0</span> <span class="bp">|</span> <span class="mi">1</span> <span class="bp">=&gt;</span> <span class="mi">0</span>
  <span class="bp">|</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">2</span> <span class="bp">=&gt;</span> <span class="n">halve</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span>
</code></pre></div>
<p>Not splitting the combined case out over multiple lines</p>



<a name="293376955"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/293376955" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Thrane Christiansen <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#293376955">(Aug 14 2022 at 12:25)</a>:</h4>
<p><span class="user-mention" data-user-id="383769">@Paul  Chisholm</span> thanks for the feedback!</p>
<blockquote>
<p>Lean infers the <code>y</code> really means <code>some y</code></p>
</blockquote>
<p>I'm intentionally avoiding all coercions until the feature can be explained properly. Lean has so many features that their interactions can be quite overwhelming even for people with deep experience with proof assistants and functional programming, and this text is intended for readers with zero experience in either. I need to be careful in how much they get in chapter 1, but coercions are absolutely on the radar for later in the book, and this is a good example.</p>



<a name="293377344"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/293377344" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Thrane Christiansen <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#293377344">(Aug 14 2022 at 12:29)</a>:</h4>
<p>I've created issues in my repository tracking each of the points that you brought up. I think that Ch1 is already longer than it should be, but it's certainly important to get to all of them at some point. Thanks again!</p>



<a name="293447680"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/293447680" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Paul  Chisholm <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#293447680">(Aug 14 2022 at 22:53)</a>:</h4>
<p><span class="user-mention" data-user-id="354934">@David Thrane Christiansen</span> Thanks for the response. The book is shaping up nicely. I think it will be an invaluable resource for Lean programming.<br>
<span class="user-mention" data-user-id="395550">@Henrik Böving</span> That formatting makes sense. Is there, or is there planned, a Lean style guidelines, or even an automated code formatter?</p>



<a name="293447805"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/293447805" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#293447805">(Aug 14 2022 at 22:56)</a>:</h4>
<p>The plan is to eventually get the delaborator to a point where it can act as a pretty printer for Lean. However right now it isn't even guaranteed to produce things that typecheck/evaluate to the same thing as their input properly so that is still a long way to go but we have people investigating and working on the issue right now.</p>



<a name="299346723"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/299346723" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Thrane Christiansen <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#299346723">(Sep 17 2022 at 17:25)</a>:</h4>
<p><span class="user-mention" data-user-id="364929">@František Silváši 🦉</span> Thanks again for the comment! I've fixed the issues you identified on my main branch, and the corrections will find their way into the imminent release.</p>



<a name="299464860"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/299464860" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Thrane Christiansen <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#299464860">(Sep 18 2022 at 18:33)</a>:</h4>
<p>It's that time again! There's a fresh release of <em>Functional Programming in Lean</em> available for your reading pleasure. This time around, the first half of the type class chapter is available. It's later than usual this month due to my summer vacation and ICFP, but releases will be returning to the usual schedule next month.</p>
<p>As usual, feedback is welcome both here and in my email. Thank you for reading it!</p>



<a name="299491203"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/299491203" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Tom <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#299491203">(Sep 19 2022 at 02:07)</a>:</h4>
<p>Thank you!  </p>
<p>Very minor nit:   On the first page,  you write:</p>
<blockquote>
<p>an instance is created that contains an implementation of each operation for the new type. For <strong>instance</strong>, a type class named Add</p>
</blockquote>
<p>I wonder if in this case the second instance <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span> of the world "instance" (emphasis mine) would be better served with "example" for clarity's sake.  (This also re-occurs later in the chapter)</p>



<a name="299493118"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/299493118" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Paul  Chisholm <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#299493118">(Sep 19 2022 at 02:40)</a>:</h4>
<p>Good description of type classes.</p>
<p>A few minor typos:</p>
<ul>
<li>3.1, Overloaded Addition,  second paragraph. "While an understanding the full..." -&gt; "While an understanding <em>of</em> the full..."</li>
<li>3.1, Overloaded Multiplication, first paragraph. "...with the same time" -&gt; "...with the same <em>type</em>"</li>
<li>3.1, Literal Numbers, second last paragraph. Missing '.' at end of the second sentence, immediately before 'Just'.</li>
<li>3.2, Methods and Implicit Arguments, first paragraph. "because the declaring a" -&gt; "because declaring a"</li>
<li>3.2, Methods and Implicit Arguments, third paragraph. ""In order for the Lean" -&gt; "In order for Lean"</li>
<li>3.3, Heterogenous Overloadings, second paragraph. "For instance, given the above two instances..." -&gt; "Given the above two instances...". The repeated use of 'instance' seems awkward.</li>
</ul>



<a name="299715956"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/299715956" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> František Silváši 🦉 <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#299715956">(Sep 20 2022 at 09:51)</a>:</h4>
<p>This reads very coherently, I genuinely like this.</p>
<p>I have two notes that are of stylistic nature and can be safely disregarded :).<br>
0) In 3.1. - <code>open Plus (plus)</code> the 'selective export of plus' feature is first introduced (unless I am misremembering!) here, which is a section 'Classes and Instances'; it feels to me a little bit buried here if this is to be the first exposition to the feature. Maybe its first mention in 2.3. 'Libraries and Imports' might be a nicer place.</p>
<p>1) In 3.1. - 'Conversion to Strings', in the context of:</p>
<blockquote>
<p>Additionally, if a type has a ToString instance, then it can be used to display the result of #eval...</p>
</blockquote>
<p>This is, to me, begging for a short explanation of the difference between <code>Repr</code> and <code>ToString</code>, but I can also imagine this being elsewhere (or not present at all :)), as there are admittedly better contexts for this.</p>
<p>Again, this is very much a 'personal take', do feel more than encouraged to ignore this, there's nothing wrong with either of these :).</p>



<a name="306877412"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/306877412" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Thrane Christiansen <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#306877412">(Oct 29 2022 at 18:54)</a>:</h4>
<p><span class="user-mention" data-user-id="383769">@Paul  Chisholm</span>  I've fixed all those in the latest version, thanks! And sorry it took me a bit to get back to you here.</p>



<a name="306877451"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/306877451" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Thrane Christiansen <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#306877451">(Oct 29 2022 at 18:54)</a>:</h4>
<p><span class="user-mention" data-user-id="364929">@František Silváši 🦉</span> These are very good suggestions that I've put into the book's issue tracker.</p>



<a name="306877473"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/306877473" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Thrane Christiansen <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#306877473">(Oct 29 2022 at 18:55)</a>:</h4>
<p>Halloween is approaching, but there's no need to be afraid of proofs or of type classes.</p>
<p>A new release of <em>Functional Programming in Lean</em>  is up, containing the rest of the chapter on type classes as well as updates based on your excellent feedback. This release also contains a short interlude that lightly introduces the idea of propositions, proofs, and truth, because they were really necessary in order to explain things like <code>GetElem</code>.</p>
<p>As always, your feedback is much appreciated.</p>



<a name="306890182"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/306890182" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#306890182">(Oct 29 2022 at 21:39)</a>:</h4>
<p>In <a href="https://leanprover.github.io/functional_programming_in_lean/type-classes/coercion.html">https://leanprover.github.io/functional_programming_in_lean/type-classes/coercion.html</a>, the last section seems outdated since <code>CoeHead</code> and <code>CoeTail</code> are discussed in this chapter.</p>



<a name="306890317"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/306890317" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#306890317">(Oct 29 2022 at 21:41)</a>:</h4>
<p>A very minor point: in several places you use tree names as examples, but this will add completely unnecessary friction for people whose native language isn't English. I have no idea what is a birch or a beech. I understand that it doesn't matter, but it still slows me a tiny bit while reading.</p>



<a name="306890484"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/306890484" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#306890484">(Oct 29 2022 at 21:44)</a>:</h4>
<p>In <a href="https://leanprover.github.io/functional_programming_in_lean/type-classes/coercion.html">https://leanprover.github.io/functional_programming_in_lean/type-classes/coercion.html</a>, there is an inconsistency betwenn <code>howMany</code> and <code>howMuch</code>.</p>



<a name="306890550"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/306890550" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#306890550">(Oct 29 2022 at 21:45)</a>:</h4>
<p>In <a href="https://leanprover.github.io/functional_programming_in_lean/type-classes/pos.html#another-representation">https://leanprover.github.io/functional_programming_in_lean/type-classes/pos.html#another-representation</a> I don't understand the example, but maybe I forgot a previous explanation of this syntax.</p>



<a name="306890658"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/306890658" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#306890658">(Oct 29 2022 at 21:47)</a>:</h4>
<p>Oh I see: this is the syntax to overload the constructor name, right? I always forget about this possibility.</p>



<a name="306903659"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/306903659" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> František Silváši 🦉 <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#306903659">(Oct 30 2022 at 01:28)</a>:</h4>
<p>Another good chapter :).</p>
<p>Minor notes - once again, really just stylistic (in addition to what Patrick's already mentioned):</p>
<p>In 4.5 - Equality and Ordering, in the context of:</p>
<blockquote>
<p>From the perspective of mathematics, two functions are equal if they map equal inputs to equal outputs, so this statement is even true, though it requires a two-line proof to convince Lean of this fact.</p>
</blockquote>
<p>Mathematics doesn't technically 'need to' do extensional, it's just the common set-theoretic one; might be worth rephrasing.</p>
<p>In 4.6 - Chaining Coercions:<br>
There's a mention of CoeHead that's like: oh yeah, this exists. I would actually be interested in seeing an example of where this is useful, because frankly, I can't think of one and a quick grep of the Lean 4 repo comes up with a single instance of this, some deep in Syntax that's far from immediately straightforward to understand.</p>
<p>In 4.6  - Design Considerations</p>
<blockquote>
<p>'First off,coercion' - typo, space after comma</p>
</blockquote>
<p>Very enjoyable read btw.</p>



<a name="306905380"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/306905380" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arien Malec <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#306905380">(Oct 30 2022 at 02:00)</a>:</h4>
<p>Thanks for this!</p>
<p>In the coercions chapter should the need to tag coercion methods with <code>@[coe]</code> be mentioned? I'm not clear on when that attribute is required but I do know that it can trip one up.</p>



<a name="306935887"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/306935887" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#306935887">(Oct 30 2022 at 09:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="364929">František Silváši 🦉</span> <a href="#narrow/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean/near/306903659">said</a>:</p>
<blockquote>
<p>In 4.5 - Equality and Ordering, in the context of:</p>
<blockquote>
<p>From the perspective of mathematics, two functions are equal if they map equal inputs to equal outputs, so this statement is even true, though it requires a two-line proof to convince Lean of this fact.</p>
</blockquote>
<p>Mathematics doesn't technically 'need to' do extensional, it's just the common set-theoretic one; might be worth rephrasing.</p>
</blockquote>
<p>At the level of detail of this book about mathematics, I think it is really pointless to mention that some extremely specialized areas of mathematics need more refined versions of function equality. This has nothing to do with foundations of mathematics, it is simply the meaning of the word function in informal real world mathematics.</p>



<a name="306986940"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/306986940" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> František Silváši 🦉 <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#306986940">(Oct 30 2022 at 17:25)</a>:</h4>
<p>I don't necessarily disagree; that doesn't mean the sentence can't be phrased in a slightly different way that also includes the fact that this is 'merely' the most common interpretation. Of course, this is exceedingly minor :).</p>



<a name="308119202"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/308119202" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Thrane Christiansen <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#308119202">(Nov 05 2022 at 10:54)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> Thanks for all the great suggestions! I've fixed the errors in the development version of the book, and I added a little reminder about the structure constructor syntax in the exercise. WRT the tree names: I realy don't want to use lists of numbers, as my experience is that meaningful examples are much more meaningful for most people. But it sounds like picking trees from my local ecosystem is not a good solution for a big population of readers, so I'll think about some different themes to use (or at least drop some of the more similar-sounding ones).</p>



<a name="308119828"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/308119828" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Thrane Christiansen <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#308119828">(Nov 05 2022 at 10:59)</a>:</h4>
<p><span class="user-mention" data-user-id="364929">@František Silváši 🦉</span> : I'm aiming for a level of mathematics background here that is quite low. Just as I'm not planning on having an extensive discussion of constructive vs classical reasoning (except just enough to talk about computable vs noncomputable definitions), I'm not planning on talking about intensional vs extensional characterizations of functions or any such thing. I'll be mostly just appealing to the ideas of sets and functions that people learn when they're 13 years old, because that's not what this is about. I suspect that anyone with the background to stumble over this will also be in a position to realize that they're at a different level.</p>
<p>Thanks!</p>



<a name="308121052"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/308121052" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Thrane Christiansen <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#308121052">(Nov 05 2022 at 11:04)</a>:</h4>
<p><span class="user-mention silent" data-user-id="542196">Arien Malec</span> <a href="#narrow/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean/near/306905380">said</a>:</p>
<blockquote>
<p>Thanks for this!</p>
<p>In the coercions chapter should the need to tag coercion methods with <code>@[coe]</code> be mentioned? I'm not clear on when that attribute is required but I do know that it can trip one up.</p>
</blockquote>
<p>I'm actually not aware of that attribute! I can't find any instances of it in the Lean source code. Can you point me to some information so I can investigate? Thanks!</p>



<a name="308155036"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/308155036" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arien Malec <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#308155036">(Nov 05 2022 at 15:17)</a>:</h4>
<p>Here’s the thread where I ran into the coercion registration issue:</p>
<p><a href="#narrow/stream/270676-lean4/topic/norm_cast.20not.20seeing.20coercion.3F">https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/norm_cast.20not.20seeing.20coercion.3F</a></p>



<a name="308164755"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/308164755" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Petar Maymounkov <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#308164755">(Nov 05 2022 at 16:37)</a>:</h4>
<p>I am following _Functional programming in lean_ and trying to define a basic type which is ordered.<br>
I am puzzled as to why I get an error when I try to evaluate the &lt; operator:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">inductive</span> <span class="n">Bit</span> <span class="n">where</span>
   <span class="bp">|</span> <span class="n">zero</span> <span class="o">:</span> <span class="n">Bit</span>
   <span class="bp">|</span> <span class="n">one</span> <span class="o">:</span> <span class="n">Bit</span>

<span class="kn">open</span> <span class="n">Bit</span>

<span class="kd">def</span> <span class="n">Bit.compare</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">Bit</span><span class="o">)</span> <span class="o">:</span> <span class="n">Ordering</span> <span class="o">:=</span>
   <span class="k">match</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">)</span> <span class="k">with</span>
   <span class="bp">|</span> <span class="o">(</span><span class="n">zero</span><span class="o">,</span> <span class="n">zero</span><span class="o">)</span> <span class="bp">=&gt;</span> <span class="n">Ordering.eq</span>
   <span class="bp">|</span> <span class="o">(</span><span class="n">zero</span><span class="o">,</span> <span class="n">one</span><span class="o">)</span> <span class="bp">=&gt;</span> <span class="n">Ordering.lt</span>
   <span class="bp">|</span> <span class="o">(</span><span class="n">one</span><span class="o">,</span> <span class="n">zero</span><span class="o">)</span> <span class="bp">=&gt;</span> <span class="n">Ordering.gt</span>
   <span class="bp">|</span> <span class="o">(</span><span class="n">one</span><span class="o">,</span> <span class="n">one</span><span class="o">)</span> <span class="bp">=&gt;</span> <span class="n">Ordering.eq</span>

<span class="kd">instance</span> <span class="o">:</span> <span class="n">Ord</span> <span class="n">Bit</span> <span class="n">where</span>
   <span class="n">compare</span> <span class="o">:=</span> <span class="n">Bit.compare</span>

<span class="k">#eval</span> <span class="n">zero</span> <span class="bp">&lt;</span> <span class="n">zero</span> <span class="c1">-- &lt;- failed to synthesize</span>
</code></pre></div>



<a name="308165221"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/308165221" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#308165221">(Nov 05 2022 at 16:42)</a>:</h4>
<p>This topic was moved here from <a class="stream-topic" data-stream-id="270676" href="/#narrow/stream/270676-lean4/topic/instantiating.20Ord.20and.20.22failed.20to.20synthesize.20instance.22">#lean4 &gt; instantiating Ord and "failed to synthesize instance"</a> by <span class="user-mention silent" data-user-id="295150">Petar Maymounkov</span>.</p>



<a name="308165321"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/308165321" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#308165321">(Nov 05 2022 at 16:43)</a>:</h4>
<p>Currently <code>Ord</code> does not automatically imply <code>LT</code> (which powers <code>&lt;</code>). This is likely to improve soon: <a href="https://github.com/leanprover/lean4/issues/1777">https://github.com/leanprover/lean4/issues/1777</a></p>



<a name="308165404"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/308165404" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#308165404">(Nov 05 2022 at 16:44)</a>:</h4>
<p>You can use</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="o">:</span> <span class="n">LT</span> <span class="n">Bit</span> <span class="o">:=</span> <span class="n">ltOfOrd</span>
</code></pre></div>
<p>for now</p>



<a name="308165470"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/308165470" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Petar Maymounkov <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#308165470">(Nov 05 2022 at 16:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110024">Sebastian Ullrich</span> <a href="#narrow/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean/near/308165321">said</a>:</p>
<blockquote>
<p>Currently <code>Ord</code> does not automatically imply <code>LT</code> (which powers <code>&lt;</code>). This is likely to improve soon: <a href="https://github.com/leanprover/lean4/issues/1777">https://github.com/leanprover/lean4/issues/1777</a></p>
</blockquote>
<p>But I have the same issue with LT:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">inductive</span> <span class="n">Bit</span> <span class="n">where</span>
   <span class="bp">|</span> <span class="n">zero</span> <span class="o">:</span> <span class="n">Bit</span>
   <span class="bp">|</span> <span class="n">one</span> <span class="o">:</span> <span class="n">Bit</span>

<span class="kn">open</span> <span class="n">Bit</span>

<span class="kd">def</span> <span class="n">Bit.lt</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">Bit</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
   <span class="k">match</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">)</span> <span class="k">with</span>
   <span class="bp">|</span> <span class="o">(</span><span class="n">zero</span><span class="o">,</span> <span class="n">zero</span><span class="o">)</span> <span class="bp">=&gt;</span> <span class="n">false</span>
   <span class="bp">|</span> <span class="o">(</span><span class="n">zero</span><span class="o">,</span> <span class="n">one</span><span class="o">)</span> <span class="bp">=&gt;</span> <span class="n">true</span>
   <span class="bp">|</span> <span class="o">(</span><span class="n">one</span><span class="o">,</span> <span class="n">zero</span><span class="o">)</span> <span class="bp">=&gt;</span> <span class="n">false</span>
   <span class="bp">|</span> <span class="o">(</span><span class="n">one</span><span class="o">,</span> <span class="n">one</span><span class="o">)</span> <span class="bp">=&gt;</span> <span class="n">false</span>

<span class="kd">instance</span> <span class="o">:</span> <span class="n">LT</span> <span class="n">Bit</span> <span class="n">where</span>
   <span class="n">lt</span> <span class="o">:=</span> <span class="n">lt</span>

<span class="k">#eval</span> <span class="n">zero</span> <span class="bp">&lt;</span> <span class="n">zero</span> <span class="c1">-- &lt;-- fail</span>
</code></pre></div>



<a name="308165780"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/308165780" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#308165780">(Nov 05 2022 at 16:48)</a>:</h4>
<p>Ah, you cannot <code>#eval</code> propositions - they don't have a value. Lean is trying to be helpful and convert it to a <code>Bool</code> using the <code>Decidable</code> typeclass, but there is no instance of that for <code>Bit</code>. If you use <code>ltOfOrd</code> as above, you get a <code>Decidable</code> instance for free.</p>



<a name="308165905"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/308165905" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#308165905">(Nov 05 2022 at 16:49)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">Bit.lt</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">Bit</span><span class="o">)</span> <span class="o">:</span> <span class="n">Bool</span> <span class="o">:=</span>  <span class="c1">-- Bool!</span>
   <span class="k">match</span> <span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">)</span> <span class="k">with</span>
   <span class="bp">|</span> <span class="o">(</span><span class="n">zero</span><span class="o">,</span> <span class="n">zero</span><span class="o">)</span> <span class="bp">=&gt;</span> <span class="n">false</span>
   <span class="bp">|</span> <span class="o">(</span><span class="n">zero</span><span class="o">,</span> <span class="n">one</span><span class="o">)</span> <span class="bp">=&gt;</span> <span class="n">true</span>
   <span class="bp">|</span> <span class="o">(</span><span class="n">one</span><span class="o">,</span> <span class="n">zero</span><span class="o">)</span> <span class="bp">=&gt;</span> <span class="n">false</span>
   <span class="bp">|</span> <span class="o">(</span><span class="n">one</span><span class="o">,</span> <span class="n">one</span><span class="o">)</span> <span class="bp">=&gt;</span> <span class="n">false</span>

<span class="kd">instance</span> <span class="o">:</span> <span class="n">LT</span> <span class="n">Bit</span> <span class="n">where</span>
   <span class="n">lt</span> <span class="n">a</span> <span class="n">b</span> <span class="o">:=</span> <span class="n">lt</span> <span class="n">a</span> <span class="n">b</span>
</code></pre></div>
<p>also works fwiw</p>



<a name="308165909"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/308165909" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#308165909">(Nov 05 2022 at 16:49)</a>:</h4>
<p>Is that true? I think you still have to register it</p>



<a name="308166101"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/308166101" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#308166101">(Nov 05 2022 at 16:51)</a>:</h4>
<p>it is true</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="o">:</span> <span class="n">Ord</span> <span class="n">Bit</span> <span class="n">where</span>
   <span class="n">compare</span> <span class="o">:=</span> <span class="n">Bit.compare</span>

<span class="kd">instance</span> <span class="o">:</span> <span class="n">LT</span> <span class="n">Bit</span> <span class="o">:=</span> <span class="n">ltOfOrd</span>

<span class="k">#eval</span> <span class="n">zero</span> <span class="bp">&lt;</span> <span class="n">zero</span> <span class="c1">-- works</span>
</code></pre></div>



<a name="308166107"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/308166107" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#308166107">(Nov 05 2022 at 16:51)</a>:</h4>
<p><a href="https://github.com/leanprover/lean4/blob/999b61007cbae0cad15172fcad5cffba43c13488/src/Init/Data/Ord.lean#L71-L72">https://github.com/leanprover/lean4/blob/999b61007cbae0cad15172fcad5cffba43c13488/src/Init/Data/Ord.lean#L71-L72</a></p>



<a name="308166188"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/308166188" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#308166188">(Nov 05 2022 at 16:52)</a>:</h4>
<p>Since we're already using <code>ltOfOrd</code>, it's fine to infer the rest</p>



<a name="308166208"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/308166208" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#308166208">(Nov 05 2022 at 16:52)</a>:</h4>
<p>I would have thought that declaring the instance would make that instance not apply anymore since it is wrapped</p>



<a name="308166299"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/308166299" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#308166299">(Nov 05 2022 at 16:53)</a>:</h4>
<p>that is, here:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="n">myLt</span> <span class="o">:</span> <span class="n">LT</span> <span class="n">Bit</span> <span class="o">:=</span> <span class="n">ltOfOrd</span>
</code></pre></div>
<p>we would end up with <code>Decidable (@LT.lt Bit myLt)</code> instead of <code>Decidable (@LT.lt Bit ltOfOrd)</code></p>



<a name="308166568"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/308166568" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#308166568">(Nov 05 2022 at 16:56)</a>:</h4>
<p>Typeclass inference unfolds reducibles and instances</p>



<a name="308172724"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/308172724" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Thrane Christiansen <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#308172724">(Nov 05 2022 at 18:03)</a>:</h4>
<p><span class="user-mention silent" data-user-id="542196">Arien Malec</span> <a href="#narrow/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean/near/308155036">said</a>:</p>
<blockquote>
<p>Here’s the thread where I ran into the coercion registration issue:</p>
<p><a href="#narrow/stream/270676-lean4/topic/norm_cast.20not.20seeing.20coercion.3F">https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/norm_cast.20not.20seeing.20coercion.3F</a></p>
</blockquote>
<p>As far as I can tell, this is a  mathlib4 concern, rather than one of Lean <em>per se</em>. Mathlib4 is explicitly out of scope for this book. But thanks!</p>



<a name="308180200"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/308180200" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> eyelash <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#308180200">(Nov 05 2022 at 19:38)</a>:</h4>
<p>I noticed something minor in chapter 4.4:</p>
<blockquote>
<p>much like a Java ArrayList, a C++ std::vector, or a Rust std::vec.</p>
</blockquote>
<p>The data structure in Rust is actually called <code>Vec</code> (with an upper case V), <code>std::vec</code> is just the module where that data structure is defined. <code>std::vec::Vec</code> is also part of the <a href="https://doc.rust-lang.org/stable/std/prelude/index.html">prelude</a> so it probably makes sense to refer to it as just <code>Vec</code>.</p>



<a name="308181857"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/308181857" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> eyelash <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#308181857">(Nov 05 2022 at 19:58)</a>:</h4>
<p>I also find the sentence "arrays occupy a contiguous region of memory, which is much better for processor caches" a bit confusing since AFAIK (someone please correct me if I'm wrong) the values of the array are still boxed in Lean, so only the pointers are stored in a contiguous region, especially after the comparison to C++ and Rust where the values themselves are actually stored in a contiguous region of memory.</p>



<a name="308183760"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/308183760" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> James Gallicchio <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#308183760">(Nov 05 2022 at 20:24)</a>:</h4>
<p>Scalars will be stored unboxed. But, yeah, many objects are boxed P:</p>



<a name="308187650"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/308187650" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arien Malec <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#308187650">(Nov 05 2022 at 21:14)</a>:</h4>
<p><span class="user-mention" data-user-id="354934">@David Thrane Christiansen</span> none of that code depended on Mathlib4</p>



<a name="308189338"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/308189338" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Thrane Christiansen <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#308189338">(Nov 05 2022 at 21:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="422011">eyelash</span> <a href="#narrow/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean/near/308180200">said</a>:</p>
<blockquote>
<p>I noticed something minor in chapter 4.4:</p>
<blockquote>
<p>much like a Java ArrayList, a C++ std::vector, or a Rust std::vec.</p>
</blockquote>
<p>The data structure in Rust is actually called <code>Vec</code> (with an upper case V), <code>std::vec</code> is just the module where that data structure is defined. <code>std::vec::Vec</code> is also part of the <a href="https://doc.rust-lang.org/stable/std/prelude/index.html">prelude</a> so it probably makes sense to refer to it as just <code>Vec</code>.</p>
</blockquote>
<p>Thanks! I fixed this in the latest development release.</p>



<a name="308189367"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/308189367" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Thrane Christiansen <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#308189367">(Nov 05 2022 at 21:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="422011">eyelash</span> <a href="#narrow/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean/near/308181857">said</a>:</p>
<blockquote>
<p>I also find the sentence "arrays occupy a contiguous region of memory, which is much better for processor caches" a bit confusing since AFAIK (someone please correct me if I'm wrong) the values of the array are still boxed in Lean, so only the pointers are stored in a contiguous region, especially after the comparison to C++ and Rust where the values themselves are actually stored in a contiguous region of memory.</p>
</blockquote>
<p>This is a good point, so I've created an issue to track it.</p>



<a name="308189475"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/308189475" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Thrane Christiansen <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#308189475">(Nov 05 2022 at 21:40)</a>:</h4>
<p><span class="user-mention silent" data-user-id="542196">Arien Malec</span> <a href="#narrow/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean/near/308187650">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="354934">David Thrane Christiansen</span> none of that code depended on Mathlib4</p>
</blockquote>
<p>As far as I can see, that attribute only exists in mathlib4. But I'll ask about it next time I talk to Lean developers on the phone - I could very well be overlooking something.</p>



<a name="308193265"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/308193265" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#308193265">(Nov 05 2022 at 22:33)</a>:</h4>
<p>It's in std4 now <a href="https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Tactic.NormCast.Attr.coe#doc">docs4#Tactic.NormCast.Attr.coe</a></p>



<a name="308272447"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/308272447" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Evgenia Karunus <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#308272447">(Nov 06 2022 at 16:13)</a>:</h4>
<p>In <a href="https://leanprover.github.io/functional_programming_in_lean/type-classes/coercion.html">https://leanprover.github.io/functional_programming_in_lean/type-classes/coercion.html</a> <code>#eval (buildResponse "Functional Programming in Lean" Str "Programming is fun!").asString</code> the <code>.asString</code> call doesn't work for me with <code>the environment does not contain 'JSON.asString'</code>.</p>



<a name="312357283"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/312357283" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Thrane Christiansen <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#312357283">(Nov 26 2022 at 14:46)</a>:</h4>
<p><span class="user-mention silent" data-user-id="422011">eyelash</span> <a href="#narrow/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean/near/308181857">said</a>:</p>
<blockquote>
<p>I also find the sentence "arrays occupy a contiguous region of memory, which is much better for processor caches" a bit confusing since AFAIK (someone please correct me if I'm wrong) the values of the array are still boxed in Lean, so only the pointers are stored in a contiguous region, especially after the comparison to C++ and Rust where the values themselves are actually stored in a contiguous region of memory.</p>
</blockquote>
<p>I fixed this in the latest development version. It's now more clear that it's referring to the array itself being in a contiguous block, rather than having a pointer at each node like a linked list. Thanks again!</p>



<a name="312357774"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/312357774" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Thrane Christiansen <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#312357774">(Nov 26 2022 at 14:50)</a>:</h4>
<p><span class="user-mention silent" data-user-id="480079">Evgenia Karunus</span> <a href="#narrow/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean/near/308272447">said</a>:</p>
<blockquote>
<p>In <a href="https://leanprover.github.io/functional_programming_in_lean/type-classes/coercion.html">https://leanprover.github.io/functional_programming_in_lean/type-classes/coercion.html</a> <code>#eval (buildResponse "Functional Programming in Lean" Str "Programming is fun!").asString</code> the <code>.asString</code> call doesn't work for me with <code>the environment does not contain 'JSON.asString'</code>.</p>
</blockquote>
<p>Thanks for this. The implementation of <code>JSON.asString</code> is a bit hairy, so I was hoping to get away with not having it along. I'll beautify it and add it in the next release.</p>



<a name="313156778"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/313156778" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Thrane Christiansen <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#313156778">(Nov 30 2022 at 21:12)</a>:</h4>
<p>The November release is out at <a href="https://leanprover.github.io/functional_programming_in_lean/">https://leanprover.github.io/functional_programming_in_lean/</a> ! The new chapter covers monads, and I'm now hard at work on writing about monad transformers.</p>
<p>Thank you all for your ongoing support and feedback, the book is much improved by your comments.</p>



<a name="313163961"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/313163961" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arien Malec <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#313163961">(Nov 30 2022 at 21:54)</a>:</h4>
<p>The way you present the motivation in terms of obvious patterns before using the "M" word is lovely.</p>



<a name="313164635"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/313164635" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Thrane Christiansen <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#313164635">(Nov 30 2022 at 21:58)</a>:</h4>
<p>Thanks! The M-word is scary for people who haven't seen it before, and experience in classrooms has made it crystal clear to me that most people do better seeing examples before definitions, so that's how I tried to write it.</p>



<a name="313167086"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/313167086" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#313167086">(Nov 30 2022 at 22:13)</a>:</h4>
<p>Did you take a look at "programming in Lean"? This is a half-finished lean 3 book from five years ago which taught me what a monad was (by going through four examples). I suspect Jeremy wrote it, he's good at writing stuff which teaches me things</p>



<a name="313188687"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/313188687" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jeremy Avigad <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#313188687">(Dec 01 2022 at 01:26)</a>:</h4>
<p>Yup, that was me. Bas Spitters once told me that the reason that there are so many monad tutorials online is that everyone who finally understands them is so proud of themselves that they are compelled to write a tutorial. I visited Microsoft in the summer of 2016 and I learned how to use monads. I was so proud of myself that I wrote a tutorial.</p>



<a name="313229229"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/313229229" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Thrane Christiansen <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#313229229">(Dec 01 2022 at 08:51)</a>:</h4>
<p>For some of the readers I want to reach, I think that the definition-first approach taken in his book will not work as well as the example-first approach that I'm going for here. I'm also intentionally trying to avoid mathematical jargon, though I didn't entirely succeed :-)</p>



<a name="313230604"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/313230604" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#313230604">(Dec 01 2022 at 09:00)</a>:</h4>
<p>I've had a brief look and I think the example first approach is very good. Even though I am a mathematician by training I hate all of the 'monads are a part of category theory' nonsense, since it does not help you to understand anything and I was slightly sad that keeps appearing.</p>



<a name="313231458"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/313231458" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Thrane Christiansen <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#313231458">(Dec 01 2022 at 09:05)</a>:</h4>
<p>Ideally, there are different learning resources for different audiences, adapted to their specific needs. I know people who learned Haskell after knowing a fair bit of category theory already, and they had quite different challenges in learning to program with monads than most people!</p>
<p>Programming with monads requires approximately zero category theory, just as you really don't need to know any graph theory to implement A* search for pathfinding in a game.</p>



<a name="313249448"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/313249448" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#313249448">(Dec 01 2022 at 10:48)</a>:</h4>
<p>I think this chapter still lacks an introduction warning readers that you will first solve a problem in a very painful way for the sake of motivating some abstract gadget. Otherwise innocent readers will simply be terrified by the first examples.</p>



<a name="313249797"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/313249797" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#313249797">(Dec 01 2022 at 10:50)</a>:</h4>
<p>And, as far as I remember, Jeremy's explanation doesn't feature any category theory.</p>



<a name="313251231"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/313251231" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#313251231">(Dec 01 2022 at 10:57)</a>:</h4>
<p>It might also help to give people a taste of what the final result is, since otherwise it's not really clear where it is all going. The endpoint of the <code>Option</code> example is not really that satisfactory:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">firstThirdFifthSeventh</span> <span class="o">(</span><span class="n">xs</span> <span class="o">:</span> <span class="n">List</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">Option</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">α</span> <span class="bp">×</span> <span class="n">α</span> <span class="bp">×</span> <span class="n">α</span><span class="o">)</span> <span class="o">:=</span>
  <span class="n">xs</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span><span class="bp">?</span> <span class="bp">~~&gt;</span> <span class="k">fun</span> <span class="n">first</span> <span class="bp">=&gt;</span>
  <span class="n">xs</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span><span class="bp">?</span> <span class="bp">~~&gt;</span> <span class="k">fun</span> <span class="n">third</span> <span class="bp">=&gt;</span>
  <span class="n">xs</span><span class="o">[</span><span class="mi">4</span><span class="o">]</span><span class="bp">?</span> <span class="bp">~~&gt;</span> <span class="k">fun</span> <span class="n">fifth</span> <span class="bp">=&gt;</span>
  <span class="n">xs</span><span class="o">[</span><span class="mi">6</span><span class="o">]</span><span class="bp">?</span> <span class="bp">~~&gt;</span> <span class="k">fun</span> <span class="n">seventh</span> <span class="bp">=&gt;</span>
  <span class="n">some</span> <span class="o">(</span><span class="n">first</span><span class="o">,</span> <span class="n">third</span><span class="o">,</span> <span class="n">fifth</span><span class="o">,</span> <span class="n">seventh</span><span class="o">)</span>
</code></pre></div>
<p>I sure am glad I don't have to write that and can do this instead:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">firstThirdFifthSeventh</span> <span class="o">(</span><span class="n">xs</span> <span class="o">:</span> <span class="n">List</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">Option</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">α</span> <span class="bp">×</span> <span class="n">α</span> <span class="bp">×</span> <span class="n">α</span><span class="o">)</span> <span class="o">:=</span> <span class="k">do</span>
  <span class="n">return</span> <span class="o">(</span><span class="bp">←</span> <span class="n">xs</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span><span class="bp">?</span><span class="o">,</span> <span class="bp">←</span> <span class="n">xs</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span><span class="bp">?</span><span class="o">,</span> <span class="bp">←</span> <span class="n">xs</span><span class="o">[</span><span class="mi">4</span><span class="o">]</span><span class="bp">?</span><span class="o">,</span> <span class="bp">←</span> <span class="n">xs</span><span class="o">[</span><span class="mi">6</span><span class="o">]</span><span class="bp">?</span><span class="o">)</span>
</code></pre></div>



<a name="313321487"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/313321487" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arien Malec <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#313321487">(Dec 01 2022 at 16:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110031">Patrick Massot</span> <a href="#narrow/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean/near/313249448">said</a>:</p>
<blockquote>
<p>I think this chapter still lacks an introduction warning readers that you will first solve a problem in a very painful way for the sake of motivating some abstract gadget. Otherwise innocent readers will simply be terrified by the first examples.</p>
</blockquote>
<p>well the handrolled Monadic functions specialized to <code>Option</code>, etc. is exactly how Rust gets on, with some special <code>?</code> syntax for <code>Option</code> and <code>Result</code> where short circuiting on failure is what's wanted. And and the piles of nested function calls is exactly how Promise based async code used to work in JS until everyone borrowed <code>async/await</code> from C# which ultimately was from…Haskell (via Simon Marlow).</p>



<a name="313361994"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/313361994" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#313361994">(Dec 01 2022 at 19:47)</a>:</h4>
<p>Mario, the only difference between what appears in the book and your example is some syntactic sugar right? In that case, I think an easy fix without breaking too much the flow would be to add this right before the section <a href="https://leanprover.github.io/functional_programming_in_lean/monads.html#logging">Logging</a>:</p>
<p>"In Section 5.3 we'll learn some that we have some syntactic sugar which can simplify this even further to:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">firstThirdFifthSeventh</span> <span class="o">(</span><span class="n">xs</span> <span class="o">:</span> <span class="n">List</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">Option</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">α</span> <span class="bp">×</span> <span class="n">α</span> <span class="bp">×</span> <span class="n">α</span><span class="o">)</span> <span class="o">:=</span> <span class="k">do</span>
  <span class="n">return</span> <span class="o">(</span><span class="bp">←</span> <span class="n">xs</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span><span class="bp">?</span><span class="o">,</span> <span class="bp">←</span> <span class="n">xs</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span><span class="bp">?</span><span class="o">,</span> <span class="bp">←</span> <span class="n">xs</span><span class="o">[</span><span class="mi">4</span><span class="o">]</span><span class="bp">?</span><span class="o">,</span> <span class="bp">←</span> <span class="n">xs</span><span class="o">[</span><span class="mi">6</span><span class="o">]</span><span class="bp">?</span><span class="o">)</span>
</code></pre></div>
<p>But for now we'll postpone explanation of this syntax in order to consider several more examples."</p>
<p>This succinct version should then also be included in Section 5.3. (<span class="user-mention" data-user-id="354934">@David Thrane Christiansen</span> of course, these are only suggestions!)</p>



<a name="313362320"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/313362320" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Thrane Christiansen <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#313362320">(Dec 01 2022 at 19:49)</a>:</h4>
<p>These are great suggestions, thanks everyone!</p>



<a name="313539581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/313539581" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#313539581">(Dec 02 2022 at 16:39)</a>:</h4>
<p>I saw a certain trend on Mastodon today, I wonder if it's helpful here as well...</p>
<div class="spoiler-block"><div class="spoiler-header">
<p>ChatGPT on "write biblical verses in the style of the king james bible in the form of a rap explaining the concept of monads from functional programming"</p>
</div><div class="spoiler-content" aria-hidden="true">
<p>Verse 1:</p>
<p>In the beginning, God created the code<br>
And with it, the concept of monads bestowed<br>
A way to compose functions in a pure mode<br>
A building block for functional programming, it bode</p>
<p>Chorus:</p>
<p>Monads, monads, the building blocks of code<br>
A way to create functional flows<br>
An abstract concept, but one that we must hold<br>
For the power of functional programming to unfold</p>
<p>Verse 2:</p>
<p>Monads allow us to bind and chain<br>
Functions together, without causing pain<br>
To the purity of the code, we remain<br>
As monads ensure our functions remain the same</p>
<p>Chorus:</p>
<p>Monads, monads, the building blocks of code<br>
A way to create functional flows<br>
An abstract concept, but one that we must hold<br>
For the power of functional programming to unfold</p>
<p>Bridge:</p>
<p>Monads may seem complex at first glance<br>
But with study and practice, they will enhance<br>
Your understanding of functional programming's advance<br>
And open up new possibilities in your code's expanse</p>
<p>Chorus:</p>
<p>Monads, monads, the building blocks of code<br>
A way to create functional flows<br>
An abstract concept, but one that we must hold<br>
For the power of functional programming to unfold</p>
</div></div>



<a name="313718543"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/313718543" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> František Silváši 🦉 <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#313718543">(Dec 03 2022 at 18:01)</a>:</h4>
<p>Another chapter written with a very good 'flow' to it :).  <em>Maybe</em> introducing the way of creating infix notations in a chapter 'Monad' is not ideal, but I understand it's very much on 'needed now' bases. This book is excellent.</p>



<a name="320118783"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/320118783" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Thrane Christiansen <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#320118783">(Jan 08 2023 at 21:00)</a>:</h4>
<p>Hi everyone! There's a new release out at <a href="https://leanprover.github.io/functional_programming_in_lean/">https://leanprover.github.io/functional_programming_in_lean/</a>, with a chapter on <code>Applicative</code> that takes a few necessary detours through universe polymorphism and structure inheritance. I haven't yet made the improvements suggested up-thread, but they're certainly on the radar still. Thanks again for reading!</p>



<a name="320118868"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/320118868" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Thrane Christiansen <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#320118868">(Jan 08 2023 at 21:01)</a>:</h4>
<p>Next up is monad transformers. It's already half written, but I realized that I needed to already have <code>Applicative</code> to make progress so I backtracked a bit :-) It was a busy December.</p>



<a name="320123781"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/320123781" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marcus Rossel <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#320123781">(Jan 08 2023 at 22:12)</a>:</h4>
<p>In Universes &gt; <code>Prop</code> and Polymorphism:</p>
<blockquote>
<p><code>Prop</code> is at the bottom of the universe hierarchy, and the type of <code>Prop</code> is <code>Type</code>. This means that lists of propositions have type <code>List Type</code>:</p>
</blockquote>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">someTruePropositions</span> <span class="o">:</span> <span class="n">List</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="o">[</span>
  <span class="mi">1</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="mi">2</span><span class="o">,</span>
  <span class="s2">"Hello, "</span> <span class="bp">++</span> <span class="s2">"world!"</span> <span class="bp">=</span> <span class="s2">"Hello, world!"</span>
<span class="o">]</span>
</code></pre></div>
<p>... should the "have type <code>List Type</code>" actually be "have type <code>List Prop</code>"?</p>



<a name="320125032"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/320125032" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#320125032">(Jan 08 2023 at 22:31)</a>:</h4>
<p>Yes it should be i think.</p>



<a name="320125148"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/320125148" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#320125148">(Jan 08 2023 at 22:33)</a>:</h4>
<p>The fact that <code>Prop : Type</code> is irrelevant here, I think</p>



<a name="320224620"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/320224620" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Thrane Christiansen <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#320224620">(Jan 09 2023 at 13:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="372804">Marcus Rossel</span> <a href="#narrow/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean/near/320123781">said</a>:</p>
<blockquote>
<p>In Universes &gt; <code>Prop</code> and Polymorphism:</p>
<blockquote>
<p><code>Prop</code> is at the bottom of the universe hierarchy, and the type of <code>Prop</code> is <code>Type</code>. This means that lists of propositions have type <code>List Type</code>:</p>
</blockquote>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">someTruePropositions</span> <span class="o">:</span> <span class="n">List</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="o">[</span>
  <span class="mi">1</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="mi">2</span><span class="o">,</span>
  <span class="s2">"Hello, "</span> <span class="bp">++</span> <span class="s2">"world!"</span> <span class="bp">=</span> <span class="s2">"Hello, world!"</span>
<span class="o">]</span>
</code></pre></div>
<p>... should the "have type <code>List Type</code>" actually be "have type <code>List Prop</code>"?</p>
</blockquote>
<p>Nice catch!</p>



<a name="320391739"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/320391739" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Thrane Christiansen <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#320391739">(Jan 10 2023 at 07:42)</a>:</h4>
<p>All right, it's fixed in the development release of the book. Thanks again!</p>



<a name="320898419"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/320898419" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#320898419">(Jan 12 2023 at 10:12)</a>:</h4>
<p>In the section on types, it looks like this sentence is missing a word: <code>To use a type that can represent the negative integers, provide a it directly:</code></p>



<a name="320899227"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/320899227" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#320899227">(Jan 12 2023 at 10:16)</a>:</h4>
<p>In functions and definitions, I think you meant</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">so</span> <span class="n">the</span> <span class="n">preceding</span> <span class="n">function</span> <span class="n">types</span> <span class="n">can</span> <span class="n">be</span> <span class="n">written</span> <span class="bp">`</span><span class="n">Nat</span> <span class="bp">-&gt;</span> <span class="n">Nat</span><span class="bp">`</span> <span class="n">and</span> <span class="bp">`</span><span class="n">Nat</span> <span class="bp">-&gt;</span> <span class="n">Nat</span> <span class="bp">-&gt;</span> <span class="n">Nat</span><span class="bp">`</span><span class="o">,</span> <span class="n">respectively.</span>
</code></pre></div>
<p>rather than</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">so</span> <span class="n">the</span> <span class="n">preceding</span> <span class="n">function</span> <span class="n">types</span> <span class="n">can</span> <span class="n">be</span> <span class="n">written</span> <span class="bp">`</span><span class="n">Nat</span> <span class="bp">-&gt;</span> <span class="n">Bool</span><span class="bp">`</span> <span class="n">and</span> <span class="bp">`</span><span class="n">Nat</span> <span class="bp">-&gt;</span> <span class="n">Nat</span> <span class="bp">-&gt;</span> <span class="n">Nat</span><span class="bp">`</span><span class="o">,</span> <span class="n">respectively.</span>
</code></pre></div>



<a name="320906677"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/320906677" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#320906677">(Jan 12 2023 at 10:51)</a>:</h4>
<p>In Polymorphism, <code>Just as C# and Java require type arguments to provided explicitly</code> should be <code>Just as C# and Java require type arguments to be provided explicitly </code></p>



<a name="321033201"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/321033201" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arien Malec <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#321033201">(Jan 12 2023 at 20:59)</a>:</h4>
<p>I think it would be helpful to note that while you are working through inheritance of structures, it generally better to use typeclasses rather than structural inheritance to encapsulate common behavior.</p>



<a name="321320654"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/321320654" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Thrane Christiansen <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#321320654">(Jan 14 2023 at 09:19)</a>:</h4>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean/near/320898419">said</a>:</p>
<blockquote>
<p>In the section on types, it looks like this sentence is missing a word: <code>To use a type that can represent the negative integers, provide a it directly:</code></p>
</blockquote>
<p>Thanks! It was actually just a spurious "a", which is now deleted.</p>



<a name="321321524"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/321321524" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Thrane Christiansen <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#321321524">(Jan 14 2023 at 09:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean/near/320899227">said</a>:</p>
<blockquote>
<p>In functions and definitions, I think you meant</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">so</span> <span class="n">the</span> <span class="n">preceding</span> <span class="n">function</span> <span class="n">types</span> <span class="n">can</span> <span class="n">be</span> <span class="n">written</span> <span class="bp">`</span><span class="n">Nat</span> <span class="bp">-&gt;</span> <span class="n">Nat</span><span class="bp">`</span> <span class="n">and</span> <span class="bp">`</span><span class="n">Nat</span> <span class="bp">-&gt;</span> <span class="n">Nat</span> <span class="bp">-&gt;</span> <span class="n">Nat</span><span class="bp">`</span><span class="o">,</span> <span class="n">respectively.</span>
</code></pre></div>
<p>rather than</p>
<p><div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">so</span> <span class="n">the</span> <span class="n">preceding</span> <span class="n">function</span> <span class="n">types</span> <span class="n">can</span> <span class="n">be</span> <span class="n">written</span> <span class="bp">`</span><span class="n">Nat</span> <span class="bp">-&gt;</span> <span class="n">Bool</span><span class="bp">`</span> <span class="n">and</span> <span class="bp">`</span><span class="n">Nat</span> <span class="bp">-&gt;</span> <span class="n">Nat</span> <span class="bp">-&gt;</span> <span class="n">Nat</span><span class="bp">`</span><span class="o">,</span> <span class="n">respectively.</span>
</code></pre></div><br>
</p>
</blockquote>
<p>Thanks! I've fixed it. This was one of the few types shown in the book that wasn't machine-checked - I've rectified that now :-)</p>



<a name="321321578"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/321321578" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Thrane Christiansen <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#321321578">(Jan 14 2023 at 09:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean/near/320906677">said</a>:</p>
<blockquote>
<p>In Polymorphism, <code>Just as C# and Java require type arguments to provided explicitly</code> should be <code>Just as C# and Java require type arguments to be provided explicitly </code></p>
</blockquote>
<p>This is now fixed as well. Thank you for your sharp eyes and careful attention!</p>



<a name="321321673"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/321321673" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Thrane Christiansen <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#321321673">(Jan 14 2023 at 09:27)</a>:</h4>
<p><span class="user-mention silent" data-user-id="542196">Arien Malec</span> <a href="#narrow/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean/near/321033201">said</a>:</p>
<blockquote>
<p>I think it would be helpful to note that while you are working through inheritance of structures, it generally better to use typeclasses rather than structural inheritance to encapsulate common behavior.</p>
</blockquote>
<p>This is a good note to have somewhere, but I don't think it should be there because inheritance of type classes has not yet been introduced. I'll think about the right place to put it, along with a way of explaining why.</p>



<a name="321348088"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/321348088" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> František Silváši 🦉 <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#321348088">(Jan 14 2023 at 12:23)</a>:</h4>
<p>You know a chapter is great when 'the best' people can find is minor typos! :)</p>
<ul>
<li>6.2: Checking whether an [sic] value of type α is in the subtype...</li>
<li>6.7: Defining a class defines a structure, and additionally creates a [sic] empty table of instances...</li>
</ul>



<a name="321363644"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/321363644" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Thrane Christiansen <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#321363644">(Jan 14 2023 at 14:18)</a>:</h4>
<p><span class="user-mention silent" data-user-id="364929">František Silváši 🦉</span> <a href="#narrow/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean/near/321348088">said</a>:</p>
<blockquote>
<p>You know a chapter is great when 'the best' people can find is minor typos! :)</p>
<ul>
<li>6.2: Checking whether an [sic] value of type α is in the subtype...</li>
<li>6.7: Defining a class defines a structure, and additionally creates a [sic] empty table of instances...</li>
</ul>
</blockquote>
<p><span aria-label="embarrassed" class="emoji emoji-1f633" role="img" title="embarrassed">:embarrassed:</span> I should have caught those proofreading! Sorry, and thanks for the kind way of pointing them out :-)</p>



<a name="321525149"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/321525149" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#321525149">(Jan 15 2023 at 19:41)</a>:</h4>
<ul>
<li>2.6 : Missing <code>s</code> in <code>While most language allow</code></li>
<li>
<ol start="3">
<li>: The sentence <code>Computer-aided theorem provers like Lean are designed to allow mathematicians to write proofs while omitting many details, while the software fills in the missing explicit steps, decreasing the likelihood of oversights or mistakes.</code> reads a bit heavy. Maybe because of the duplicated "while"?</li>
</ol>
</li>
<li>
<ol start="3">
<li><code>propositions are a kind of type</code>. I know "type" is referring to <code>p : Prop</code>, but it could be misread as meaning <code>Prop</code> because of the singular</li>
</ol>
</li>
</ul>



<a name="321558686"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/321558686" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#321558686">(Jan 16 2023 at 03:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="354934">David Thrane Christiansen</span> <a href="#narrow/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean/near/321321673">said</a>:</p>
<blockquote>
<p>This is a good note to have somewhere, but I don't think it should be there because inheritance of type classes has not yet been introduced. I'll think about the right place to put it, along with a way of explaining why.</p>
</blockquote>
<p>How about a footnote, possibly with a forward reference?</p>



<a name="321588493"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/321588493" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Thrane Christiansen <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#321588493">(Jan 16 2023 at 08:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean/near/321525149">said</a>:</p>
<blockquote>
<ul>
<li>2.6 : Missing <code>s</code> in <code>While most language allow</code></li>
<li>
<ol start="3">
<li>: The sentence <code>Computer-aided theorem provers like Lean are designed to allow mathematicians to write proofs while omitting many details, while the software fills in the missing explicit steps, decreasing the likelihood of oversights or mistakes.</code> reads a bit heavy. Maybe because of the duplicated "while"?</li>
</ol>
</li>
<li>
<ol start="3">
<li><code>propositions are a kind of type</code>. I know "type" is referring to <code>p : Prop</code>, but it could be misread as meaning <code>Prop</code> because of the singular</li>
</ol>
</li>
</ul>
</blockquote>
<p>Thanks, these are fixed in the development branch!</p>



<a name="321588993"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/321588993" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Thrane Christiansen <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#321588993">(Jan 16 2023 at 08:56)</a>:</h4>
<p><span class="user-mention silent" data-user-id="197836">Jireh Loreaux</span> <a href="#narrow/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean/near/321558686">said</a>:</p>
<blockquote>
<p>How about a footnote, possibly with a forward reference?</p>
</blockquote>
<p>I don't think footnotes work well in writing that's intended to be consumed online - they end up being a bit like endnotes in paper books, where they're so inconvenient to consult that they might as well not be there. And Markdown/mdbook unfortunately doesn't have reasonable support for asides, marginalia, or other things that work well for this task.</p>
<p>I'll puzzle over it.</p>



<a name="321677561"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/321677561" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#321677561">(Jan 16 2023 at 16:18)</a>:</h4>
<p>Footnotes with return hyperlinks (generally denoted by a ↩) I find to be easily read even online, but it's fine if you disagree. Dealing with non-linearity of topics is always hard.</p>



<a name="322915381"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/New%20release%20of%20Functional%20Programming%20in%20Lean/near/322915381" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ian Young <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/New.20release.20of.20Functional.20Programming.20in.20Lean.html#322915381">(Jan 22 2023 at 22:45)</a>:</h4>
<p>I haven't really got this far yet*, but while I was reading ahead, I noticed that in <a href="https://leanprover.github.io/functional_programming_in_lean/functor-applicative-monad/applicative.html#validated-input">6.2 Applicative Functors: Validated Input</a> the code block following "Finally, these three components can be combined using seq:" is the same as the previous code block, whereas the following text implies that it should define <code>checkInput</code>.</p>
<p>*I'm finding myself a bit confounded by the <a href="https://leanprover.github.io/functional_programming_in_lean/type-classes/polymorphism.html#even-number-literals">Even Number Literals</a> exercise in 4.2. But that's another story.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>