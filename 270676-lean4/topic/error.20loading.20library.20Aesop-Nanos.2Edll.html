---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/error.20loading.20library.20Aesop-Nanos.2Edll.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/error.20loading.20library.20Aesop-Nanos.2Edll.html">error loading library Aesop-Nanos.dll</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="316512297"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/error%20loading%20library%20Aesop-Nanos.dll/near/316512297" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sky Wilshaw <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/error.20loading.20library.20Aesop-Nanos.2Edll.html#316512297">(Dec 17 2022 at 21:28)</a>:</h4>
<p>I'm trying to get started again with porting now that I'm back on my windows machine but I'm having real trouble getting aesop to build. I keep getting errors like this when viewing files in mathlib4 that depend on aesop:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">`</span><span class="n">c</span><span class="o">:</span><span class="bp">\</span><span class="n">Users</span><span class="bp">\</span><span class="n">skywi</span><span class="bp">\.</span><span class="n">elan</span><span class="bp">\</span><span class="n">toolchains</span><span class="bp">\</span><span class="n">leanprover</span><span class="c1">--lean4---nightly-2022-12-13\bin\lake.exe print-paths Init Mathlib.Data.Rat.Defs Mathlib.Algebra.Order.Ring.Defs` failed:</span>

<span class="n">stderr</span><span class="o">:</span>
<span class="n">warning</span><span class="o">:</span> <span class="n">manifest</span> <span class="n">out</span> <span class="n">of</span> <span class="n">date</span><span class="o">:</span> <span class="n">package</span> <span class="n">directory</span> <span class="n">changed</span><span class="o">,</span> <span class="n">use</span> <span class="bp">`</span><span class="n">lake</span> <span class="n">update</span><span class="bp">`</span> <span class="n">to</span> <span class="n">update</span>
<span class="n">warning</span><span class="o">:</span> <span class="n">wanted</span> <span class="n">prebuilt</span> <span class="n">release</span><span class="o">,</span> <span class="n">but</span> <span class="n">release</span> <span class="n">repository</span> <span class="n">and</span> <span class="n">tag</span> <span class="n">was</span> <span class="n">not</span> <span class="n">known</span>
<span class="n">info</span><span class="o">:</span> <span class="n">Building</span> <span class="n">Aesop.Constants</span>
<span class="n">info</span><span class="o">:</span> <span class="n">Building</span> <span class="n">Aesop.Tracing</span>
<span class="n">info</span><span class="o">:</span> <span class="n">Building</span> <span class="n">Aesop.Util.Basic</span>
<span class="n">error</span><span class="o">:</span> <span class="bp">&gt;</span> <span class="n">LEAN_PATH</span><span class="bp">=.\</span><span class="n">build</span><span class="bp">\</span><span class="n">lib</span><span class="bp">;.\./</span><span class="n">lake</span><span class="bp">-</span><span class="n">packages</span><span class="bp">\</span><span class="n">Qq</span><span class="bp">\</span><span class="n">build</span><span class="bp">\</span><span class="n">lib</span><span class="bp">;.\./</span><span class="n">lake</span><span class="bp">-</span><span class="n">packages</span><span class="bp">\</span><span class="n">aesop</span><span class="bp">\</span><span class="n">build</span><span class="bp">\</span><span class="n">lib</span><span class="bp">;.\./</span><span class="n">lake</span><span class="bp">-</span><span class="n">packages</span><span class="bp">\</span><span class="n">std</span><span class="bp">\</span><span class="n">build</span><span class="bp">\</span><span class="n">lib</span> <span class="n">PATH</span> <span class="n">c</span><span class="o">:</span><span class="bp">\</span><span class="n">Users</span><span class="bp">\</span><span class="n">skywi</span><span class="bp">\.</span><span class="n">elan</span><span class="bp">\</span><span class="n">toolchains</span><span class="bp">\</span><span class="n">leanprover</span><span class="c1">--lean4---nightly-2022-12-13\bin\lean.exe .\./lake-packages\aesop\.\.\Aesop\Util\Basic.lean -R .\./lake-packages\aesop\.\. -o .\./lake-packages\aesop\build\lib\Aesop\Util\Basic.olean -i .\./lake-packages\aesop\build\lib\Aesop\Util\Basic.ilean -c .\./lake-packages\aesop\build\ir\Aesop\Util\Basic.c --load-dynlib=Aesop-Nanos.dll --load-dynlib=Std-Classes-BEq.dll --load-dynlib=Std-Lean-Delaborator.dll --load-dynlib=Std-Tactic-CoeExt.dll --load-dynlib=Std-Util-LibraryNote.dll --load-dynlib=Std-Classes-Cast.dll --load-dynlib=Std-Classes-Dvd.dll --load-dynlib=Std-Tactic-Unreachable.dll --load-dynlib=Std-Linter-UnreachableTactic.dll --load-dynlib=Std-Lean-TagAttribute.dll --load-dynlib=Std-Lean-AttributeExtra.dll --load-dynlib=Std-Linter-UnnecessarySeqFocus.dll --load-dynlib=Std-Linter.dll --load-dynlib=Std-Tactic-OpenPrivate.dll --load-dynlib=Std-Tactic-NoMatch.dll --load-dynlib=Std-Tactic-GuardExpr.dll --load-dynlib=Std-Tactic-ByCases.dll --load-dynlib=Std-Tactic-SeqFocus.dll --load-dynlib=Std-Tactic-TryThis.dll --load-dynlib=Std-Tactic-ShowTerm.dll --load-dynlib=Std-Lean-Parser.dll --load-dynlib=Std-Tactic-SimpTrace.dll --load-dynlib=Std-Lean-Meta-Basic.dll --load-dynlib=Std-Lean-Tactic.dll --load-dynlib=Std-Tactic-Basic.dll --load-dynlib=Std-Util-TermUnsafe.dll --load-dynlib=Std-Lean-NameMapAttribute.dll --load-dynlib=Std-Tactic-Lint-Basic.dll --load-dynlib=Std-Data-List-Init-Lemmas.dll --load-dynlib=Std-Data-Array-Init-Basic.dll --load-dynlib=Std-Data-Array-Basic.dll --load-dynlib=Std-Tactic-Lint-Misc.dll --load-dynlib=Std-Logic.dll --load-dynlib=Std-Classes-LawfulMonad.dll --load-dynlib=Std-Lean-Meta-LCtx.dll --load-dynlib=Std-Tactic-Simpa.dll --load-dynlib=Std-Classes-Order.dll --load-dynlib=Std-Util-ExtendedBinder.dll --load-dynlib=Std-Classes-SetNotation.dll --load-dynlib=Std-Control-ForInStep-Basic.dll --load-dynlib=Std-Control-ForInStep-Lemmas.dll --load-dynlib=Std-Control-ForInStep.dll --load-dynlib=Std-Tactic-HaveI.dll --load-dynlib=Std-Data-Array-Init-Lemmas.dll --load-dynlib=Std-Data-Nat-Basic.dll --load-dynlib=Std-Data-Nat-Lemmas.dll --load-dynlib=Std-Data-Option-Init-Lemmas.dll --load-dynlib=Std-Data-List-Basic.dll --load-dynlib=Std-Data-Option-Basic.dll --load-dynlib=Std-Tactic-RCases.dll --load-dynlib=Std-Lean-Command.dll --load-dynlib=Std-Tactic-Ext-Attr.dll --load-dynlib=Std-Data-Option-Lemmas.dll --load-dynlib=Std-Tactic-Ext.dll --load-dynlib=Std-Data-List-Lemmas.dll --load-dynlib=Std-Data-Array-Lemmas.dll --load-dynlib=Std-Data-AssocList.dll --load-dynlib=Std-Data-BinomialHeap.dll --load-dynlib=Std-Data-Char.dll --load-dynlib=Std-Data-DList.dll --load-dynlib=Std-Data-Fin-Lemmas.dll --load-dynlib=Std-Data-HashMap-Basic.dll --load-dynlib=Std-Data-HashMap-WF.dll --load-dynlib=Std-Data-HashMap.dll --load-dynlib=Std-Data-Int-Basic.dll --load-dynlib=Std-Tactic-NormCast-Ext.dll --load-dynlib=Std-Tactic-NormCast-Lemmas.dll --load-dynlib=Std-Data-Int-Lemmas.dll --load-dynlib=Std-Data-Int-DivMod.dll --load-dynlib=Std-Data-Nat-Gcd.dll --load-dynlib=Std-Data-PairingHeap.dll --load-dynlib=Std-Data-RBMap-Basic.dll --load-dynlib=Std-Data-RBMap-WF.dll --load-dynlib=Std-Data-RBMap.dll --load-dynlib=Std-Data-RBMap-Alter.dll --load-dynlib=Std-Data-RBMap-Lemmas.dll --load-dynlib=Std-Data-Rat-Basic.dll --load-dynlib=Std-Data-Rat-Lemmas.dll --load-dynlib=Std-Data-Rat.dll --load-dynlib=Std-Data-String.dll --load-dynlib=Std-Lean-Expr.dll --load-dynlib=Std-Lean-Meta-AssertHypotheses.dll --load-dynlib=Std-Lean-Meta-Clear.dll --load-dynlib=Std-Lean-Meta-Inaccessible.dll --load-dynlib=Std-Lean-Meta-InstantiateMVars.dll --load-dynlib=Std-Lean-MonadBacktrack.dll --load-dynlib=Std-Lean-Meta-SavedState.dll --load-dynlib=Std-Lean-Meta-UnusedNames.dll --load-dynlib=Std-Tactic-Congr.dll --load-dynlib=Std-Tactic-Lint-Simp.dll --load-dynlib=Std-Tactic-Lint-TypeClass.dll --load-dynlib=Std-Tactic-Lint-Frontend.dll --load-dynlib=Std-Tactic-Lint.dll --load-dynlib=Std-Tactic-SqueezeScope.dll --load-dynlib=Std.dll --load-dynlib=Aesop-Util-UnionFind.dll</span>
<span class="n">error</span><span class="o">:</span> <span class="n">stderr</span><span class="o">:</span>
<span class="n">libc</span><span class="bp">++</span><span class="n">abi</span><span class="o">:</span> <span class="n">terminating</span> <span class="n">due</span> <span class="n">to</span> <span class="n">uncaught</span> <span class="n">exception</span> <span class="n">of</span> <span class="n">type</span> <span class="n">lean</span><span class="o">::</span><span class="n">exception</span><span class="o">:</span> <span class="n">error</span> <span class="n">loading</span> <span class="n">library</span> <span class="n">Aesop</span><span class="bp">-</span><span class="n">Nanos.dll</span><span class="o">:</span> <span class="mi">126</span>
<span class="n">error</span><span class="o">:</span> <span class="n">external</span> <span class="n">command</span> <span class="bp">`</span><span class="n">c</span><span class="o">:</span><span class="bp">\</span><span class="n">Users</span><span class="bp">\</span><span class="n">skywi</span><span class="bp">\.</span><span class="n">elan</span><span class="bp">\</span><span class="n">toolchains</span><span class="bp">\</span><span class="n">leanprover</span><span class="c1">--lean4---nightly-2022-12-13\bin\lean.exe` exited with code 3221226505</span>
<span class="n">error</span><span class="o">:</span> <span class="bp">&gt;</span> <span class="n">LEAN_PATH</span><span class="bp">=.\</span><span class="n">build</span><span class="bp">\</span><span class="n">lib</span><span class="bp">;.\./</span><span class="n">lake</span><span class="bp">-</span><span class="n">packages</span><span class="bp">\</span><span class="n">Qq</span><span class="bp">\</span><span class="n">build</span><span class="bp">\</span><span class="n">lib</span><span class="bp">;.\./</span><span class="n">lake</span><span class="bp">-</span><span class="n">packages</span><span class="bp">\</span><span class="n">aesop</span><span class="bp">\</span><span class="n">build</span><span class="bp">\</span><span class="n">lib</span><span class="bp">;.\./</span><span class="n">lake</span><span class="bp">-</span><span class="n">packages</span><span class="bp">\</span><span class="n">std</span><span class="bp">\</span><span class="n">build</span><span class="bp">\</span><span class="n">lib</span> <span class="n">PATH</span> <span class="n">c</span><span class="o">:</span><span class="bp">\</span><span class="n">Users</span><span class="bp">\</span><span class="n">skywi</span><span class="bp">\.</span><span class="n">elan</span><span class="bp">\</span><span class="n">toolchains</span><span class="bp">\</span><span class="n">leanprover</span><span class="c1">--lean4---nightly-2022-12-13\bin\lean.exe .\./lake-packages\aesop\.\.\Aesop\Constants.lean -R .\./lake-packages\aesop\.\. -o .\./lake-packages\aesop\build\lib\Aesop\Constants.olean -i .\./lake-packages\aesop\build\lib\Aesop\Constants.ilean -c .\./lake-packages\aesop\build\ir\Aesop\Constants.c --load-dynlib=Aesop-Percent.dll</span>
<span class="n">error</span><span class="o">:</span> <span class="n">stderr</span><span class="o">:</span>
<span class="n">libc</span><span class="bp">++</span><span class="n">abi</span><span class="o">:</span> <span class="n">terminating</span> <span class="n">due</span> <span class="n">to</span> <span class="n">uncaught</span> <span class="n">exception</span> <span class="n">of</span> <span class="n">type</span> <span class="n">lean</span><span class="o">::</span><span class="n">exception</span><span class="o">:</span> <span class="n">error</span> <span class="n">loading</span> <span class="n">library</span> <span class="n">Aesop</span><span class="bp">-</span><span class="n">Percent.dll</span><span class="o">:</span> <span class="mi">126</span>
<span class="n">error</span><span class="o">:</span> <span class="n">external</span> <span class="n">command</span> <span class="bp">`</span><span class="n">c</span><span class="o">:</span><span class="bp">\</span><span class="n">Users</span><span class="bp">\</span><span class="n">skywi</span><span class="bp">\.</span><span class="n">elan</span><span class="bp">\</span><span class="n">toolchains</span><span class="bp">\</span><span class="n">leanprover</span><span class="c1">--lean4---nightly-2022-12-13\bin\lean.exe` exited with code 3221226505</span>
<span class="n">error</span><span class="o">:</span> <span class="bp">&gt;</span> <span class="n">LEAN_PATH</span><span class="bp">=.\</span><span class="n">build</span><span class="bp">\</span><span class="n">lib</span><span class="bp">;.\./</span><span class="n">lake</span><span class="bp">-</span><span class="n">packages</span><span class="bp">\</span><span class="n">Qq</span><span class="bp">\</span><span class="n">build</span><span class="bp">\</span><span class="n">lib</span><span class="bp">;.\./</span><span class="n">lake</span><span class="bp">-</span><span class="n">packages</span><span class="bp">\</span><span class="n">aesop</span><span class="bp">\</span><span class="n">build</span><span class="bp">\</span><span class="n">lib</span><span class="bp">;.\./</span><span class="n">lake</span><span class="bp">-</span><span class="n">packages</span><span class="bp">\</span><span class="n">std</span><span class="bp">\</span><span class="n">build</span><span class="bp">\</span><span class="n">lib</span> <span class="n">PATH</span> <span class="n">c</span><span class="o">:</span><span class="bp">\</span><span class="n">Users</span><span class="bp">\</span><span class="n">skywi</span><span class="bp">\.</span><span class="n">elan</span><span class="bp">\</span><span class="n">toolchains</span><span class="bp">\</span><span class="n">leanprover</span><span class="c1">--lean4---nightly-2022-12-13\bin\lean.exe .\./lake-packages\aesop\.\.\Aesop\Tracing.lean -R .\./lake-packages\aesop\.\. -o .\./lake-packages\aesop\build\lib\Aesop\Tracing.olean -i .\./lake-packages\aesop\build\lib\Aesop\Tracing.ilean -c .\./lake-packages\aesop\build\ir\Aesop\Tracing.c --load-dynlib=Aesop-Tracing-Init.dll</span>
<span class="n">error</span><span class="o">:</span> <span class="n">stderr</span><span class="o">:</span>
<span class="n">libc</span><span class="bp">++</span><span class="n">abi</span><span class="o">:</span> <span class="n">terminating</span> <span class="n">due</span> <span class="n">to</span> <span class="n">uncaught</span> <span class="n">exception</span> <span class="n">of</span> <span class="n">type</span> <span class="n">lean</span><span class="o">::</span><span class="n">exception</span><span class="o">:</span> <span class="n">error</span> <span class="n">loading</span> <span class="n">library</span> <span class="n">Aesop</span><span class="bp">-</span><span class="n">Tracing</span><span class="bp">-</span><span class="n">Init.dll</span><span class="o">:</span> <span class="mi">126</span>
<span class="n">error</span><span class="o">:</span> <span class="n">external</span> <span class="n">command</span> <span class="bp">`</span><span class="n">c</span><span class="o">:</span><span class="bp">\</span><span class="n">Users</span><span class="bp">\</span><span class="n">skywi</span><span class="bp">\.</span><span class="n">elan</span><span class="bp">\</span><span class="n">toolchains</span><span class="bp">\</span><span class="n">leanprover</span><span class="c1">--lean4---nightly-2022-12-13\bin\lean.exe` exited with code 3221226505</span>
</code></pre></div>
<p>Running <code>lake build</code> gives a similar error:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">error</span><span class="o">:</span> <span class="bp">&gt;</span> <span class="n">LEAN_PATH</span><span class="bp">=.\</span><span class="n">build</span><span class="bp">\</span><span class="n">lib</span><span class="bp">;.\./</span><span class="n">lake</span><span class="bp">-</span><span class="n">packages</span><span class="bp">\</span><span class="n">Qq</span><span class="bp">\</span><span class="n">build</span><span class="bp">\</span><span class="n">lib</span><span class="bp">;.\./</span><span class="n">lake</span><span class="bp">-</span><span class="n">packages</span><span class="bp">\</span><span class="n">aesop</span><span class="bp">\</span><span class="n">build</span><span class="bp">\</span><span class="n">lib</span><span class="bp">;.\./</span><span class="n">lake</span><span class="bp">-</span><span class="n">packages</span><span class="bp">\</span><span class="n">std</span><span class="bp">\</span><span class="n">build</span><span class="bp">\</span><span class="n">lib</span> <span class="n">PATH</span> <span class="n">c</span><span class="o">:</span><span class="bp">\</span><span class="n">Users</span><span class="bp">\</span><span class="n">skywi</span><span class="bp">\.</span><span class="n">elan</span><span class="bp">\</span><span class="n">toolchains</span><span class="bp">\</span><span class="n">leanprover</span><span class="c1">--lean4---nightly-2022-12-13\bin\lean.exe .\./lake-packages\aesop\.\.\Aesop\Constants.lean -R .\./lake-packages\aesop\.\. -o .\./lake-packages\aesop\build\lib\Aesop\Constants.olean -i .\./lake-packages\aesop\build\lib\Aesop\Constants.ilean -c .\./lake-packages\aesop\build\ir\Aesop\Constants.c --load-dynlib=Aesop-Percent.dll</span>
<span class="n">error</span><span class="o">:</span> <span class="n">stderr</span><span class="o">:</span>
<span class="n">libc</span><span class="bp">++</span><span class="n">abi</span><span class="o">:</span> <span class="n">terminating</span> <span class="n">due</span> <span class="n">to</span> <span class="n">uncaught</span> <span class="n">exception</span> <span class="n">of</span> <span class="n">type</span> <span class="n">lean</span><span class="o">::</span><span class="n">exception</span><span class="o">:</span> <span class="n">error</span> <span class="n">loading</span> <span class="n">library</span> <span class="n">Aesop</span><span class="bp">-</span><span class="n">Percent.dll</span><span class="o">:</span> <span class="mi">126</span>
<span class="n">error</span><span class="o">:</span> <span class="n">external</span> <span class="n">command</span> <span class="bp">`</span><span class="n">c</span><span class="o">:</span><span class="bp">\</span><span class="n">Users</span><span class="bp">\</span><span class="n">skywi</span><span class="bp">\.</span><span class="n">elan</span><span class="bp">\</span><span class="n">toolchains</span><span class="bp">\</span><span class="n">leanprover</span><span class="c1">--lean4---nightly-2022-12-13\bin\lean.exe` exited with code 3221226505</span>
</code></pre></div>



<a name="316512400"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/error%20loading%20library%20Aesop-Nanos.dll/near/316512400" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/error.20loading.20library.20Aesop-Nanos.2Edll.html#316512400">(Dec 17 2022 at 21:28)</a>:</h4>
<p>update your <code>lean-toolchain</code> to match mathlib/aesop</p>



<a name="316512483"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/error%20loading%20library%20Aesop-Nanos.dll/near/316512483" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sky Wilshaw <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/error.20loading.20library.20Aesop-Nanos.2Edll.html#316512483">(Dec 17 2022 at 21:30)</a>:</h4>
<p>Ah, I'm not on master so perhaps the toolchain in this branch is old.</p>



<a name="316512616"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/error%20loading%20library%20Aesop-Nanos.dll/near/316512616" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/error.20loading.20library.20Aesop-Nanos.2Edll.html#316512616">(Dec 17 2022 at 21:31)</a>:</h4>
<p>you should also try deleting the <code>lake-packages</code> directory, it might be using incompatible build data</p>



<a name="316512669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/error%20loading%20library%20Aesop-Nanos.dll/near/316512669" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sky Wilshaw <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/error.20loading.20library.20Aesop-Nanos.2Edll.html#316512669">(Dec 17 2022 at 21:31)</a>:</h4>
<p>I'd also run <code>lake clean</code>, presumably it does the same thing. Currently waiting for it to try building with the <code>lean-toolchain</code> from master, hopefully this works...</p>



<a name="316513730"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/error%20loading%20library%20Aesop-Nanos.dll/near/316513730" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sky Wilshaw <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/error.20loading.20library.20Aesop-Nanos.2Edll.html#316513730">(Dec 17 2022 at 21:44)</a>:</h4>
<p>Unfortunately this still doesn't work. This error is from <code>CategoryTheory.NatIso</code> (just because it uses aesop) on current <code>master</code>, after a <code>lake clean</code>:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">`</span><span class="n">c</span><span class="o">:</span><span class="bp">\</span><span class="n">Users</span><span class="bp">\</span><span class="n">skywi</span><span class="bp">\.</span><span class="n">elan</span><span class="bp">\</span><span class="n">toolchains</span><span class="bp">\</span><span class="n">leanprover</span><span class="c1">--lean4---nightly-2022-12-13\bin\lake.exe print-paths Init Mathlib.CategoryTheory.Functor.Category Mathlib.CategoryTheory.Iso` failed:</span>

<span class="n">stderr</span><span class="o">:</span>
<span class="n">warning</span><span class="o">:</span> <span class="n">manifest</span> <span class="n">out</span> <span class="n">of</span> <span class="n">date</span><span class="o">:</span> <span class="n">package</span> <span class="n">directory</span> <span class="n">changed</span><span class="o">,</span> <span class="n">use</span> <span class="bp">`</span><span class="n">lake</span> <span class="n">update</span><span class="bp">`</span> <span class="n">to</span> <span class="n">update</span>
<span class="n">warning</span><span class="o">:</span> <span class="n">wanted</span> <span class="n">prebuilt</span> <span class="n">release</span><span class="o">,</span> <span class="n">but</span> <span class="n">release</span> <span class="n">repository</span> <span class="n">and</span> <span class="n">tag</span> <span class="n">was</span> <span class="n">not</span> <span class="n">known</span>
<span class="n">info</span><span class="o">:</span> <span class="n">Building</span> <span class="n">Aesop.Constants</span>
<span class="n">info</span><span class="o">:</span> <span class="n">Building</span> <span class="n">Aesop.Tracing</span>
<span class="n">info</span><span class="o">:</span> <span class="n">Building</span> <span class="n">Mathlib.Combinatorics.Quiver.Basic</span>
<span class="n">info</span><span class="o">:</span> <span class="n">Linking</span> <span class="n">Std.Data.HashMap</span>
<span class="n">info</span><span class="o">:</span> <span class="n">Linking</span> <span class="n">Std</span>
<span class="n">info</span><span class="o">:</span> <span class="n">Linking</span> <span class="n">Aesop.Util.UnionFind</span>
<span class="n">info</span><span class="o">:</span> <span class="n">Building</span> <span class="n">Aesop.Util.Basic</span>
<span class="n">error</span><span class="o">:</span> <span class="bp">&gt;</span> <span class="n">LEAN_PATH</span><span class="bp">=.\</span><span class="n">build</span><span class="bp">\</span><span class="n">lib</span><span class="bp">;.\./</span><span class="n">lake</span><span class="bp">-</span><span class="n">packages</span><span class="bp">\</span><span class="n">Qq</span><span class="bp">\</span><span class="n">build</span><span class="bp">\</span><span class="n">lib</span><span class="bp">;.\./</span><span class="n">lake</span><span class="bp">-</span><span class="n">packages</span><span class="bp">\</span><span class="n">aesop</span><span class="bp">\</span><span class="n">build</span><span class="bp">\</span><span class="n">lib</span><span class="bp">;.\./</span><span class="n">lake</span><span class="bp">-</span><span class="n">packages</span><span class="bp">\</span><span class="n">std</span><span class="bp">\</span><span class="n">build</span><span class="bp">\</span><span class="n">lib</span> <span class="n">PATH</span> <span class="n">c</span><span class="o">:</span><span class="bp">\</span><span class="n">Users</span><span class="bp">\</span><span class="n">skywi</span><span class="bp">\.</span><span class="n">elan</span><span class="bp">\</span><span class="n">toolchains</span><span class="bp">\</span><span class="n">leanprover</span><span class="c1">--lean4---nightly-2022-12-13\bin\lean.exe .\./lake-packages\aesop\.\.\Aesop\Tracing.lean -R .\./lake-packages\aesop\.\. -o .\./lake-packages\aesop\build\lib\Aesop\Tracing.olean -i .\./lake-packages\aesop\build\lib\Aesop\Tracing.ilean -c .\./lake-packages\aesop\build\ir\Aesop\Tracing.c --load-dynlib=Aesop-Tracing-Init.dll</span>
<span class="n">error</span><span class="o">:</span> <span class="n">stderr</span><span class="o">:</span>
<span class="n">libc</span><span class="bp">++</span><span class="n">abi</span><span class="o">:</span> <span class="n">terminating</span> <span class="n">due</span> <span class="n">to</span> <span class="n">uncaught</span> <span class="n">exception</span> <span class="n">of</span> <span class="n">type</span> <span class="n">lean</span><span class="o">::</span><span class="n">exception</span><span class="o">:</span> <span class="n">error</span> <span class="n">loading</span> <span class="n">library</span> <span class="n">Aesop</span><span class="bp">-</span><span class="n">Tracing</span><span class="bp">-</span><span class="n">Init.dll</span><span class="o">:</span> <span class="mi">126</span>
<span class="n">error</span><span class="o">:</span> <span class="n">external</span> <span class="n">command</span> <span class="bp">`</span><span class="n">c</span><span class="o">:</span><span class="bp">\</span><span class="n">Users</span><span class="bp">\</span><span class="n">skywi</span><span class="bp">\.</span><span class="n">elan</span><span class="bp">\</span><span class="n">toolchains</span><span class="bp">\</span><span class="n">leanprover</span><span class="c1">--lean4---nightly-2022-12-13\bin\lean.exe` exited with code 3221226505</span>
<span class="n">error</span><span class="o">:</span> <span class="bp">&gt;</span> <span class="n">LEAN_PATH</span><span class="bp">=.\</span><span class="n">build</span><span class="bp">\</span><span class="n">lib</span><span class="bp">;.\./</span><span class="n">lake</span><span class="bp">-</span><span class="n">packages</span><span class="bp">\</span><span class="n">Qq</span><span class="bp">\</span><span class="n">build</span><span class="bp">\</span><span class="n">lib</span><span class="bp">;.\./</span><span class="n">lake</span><span class="bp">-</span><span class="n">packages</span><span class="bp">\</span><span class="n">aesop</span><span class="bp">\</span><span class="n">build</span><span class="bp">\</span><span class="n">lib</span><span class="bp">;.\./</span><span class="n">lake</span><span class="bp">-</span><span class="n">packages</span><span class="bp">\</span><span class="n">std</span><span class="bp">\</span><span class="n">build</span><span class="bp">\</span><span class="n">lib</span> <span class="n">PATH</span> <span class="n">c</span><span class="o">:</span><span class="bp">\</span><span class="n">Users</span><span class="bp">\</span><span class="n">skywi</span><span class="bp">\.</span><span class="n">elan</span><span class="bp">\</span><span class="n">toolchains</span><span class="bp">\</span><span class="n">leanprover</span><span class="c1">--lean4---nightly-2022-12-13\bin\lean.exe .\./lake-packages\aesop\.\.\Aesop\Constants.lean -R .\./lake-packages\aesop\.\. -o .\./lake-packages\aesop\build\lib\Aesop\Constants.olean -i .\./lake-packages\aesop\build\lib\Aesop\Constants.ilean -c .\./lake-packages\aesop\build\ir\Aesop\Constants.c --load-dynlib=Aesop-Percent.dll</span>
<span class="n">error</span><span class="o">:</span> <span class="n">stderr</span><span class="o">:</span>
<span class="n">libc</span><span class="bp">++</span><span class="n">abi</span><span class="o">:</span> <span class="n">terminating</span> <span class="n">due</span> <span class="n">to</span> <span class="n">uncaught</span> <span class="n">exception</span> <span class="n">of</span> <span class="n">type</span> <span class="n">lean</span><span class="o">::</span><span class="n">exception</span><span class="o">:</span> <span class="n">error</span> <span class="n">loading</span> <span class="n">library</span> <span class="n">Aesop</span><span class="bp">-</span><span class="n">Percent.dll</span><span class="o">:</span> <span class="mi">126</span>
<span class="n">error</span><span class="o">:</span> <span class="n">external</span> <span class="n">command</span> <span class="bp">`</span><span class="n">c</span><span class="o">:</span><span class="bp">\</span><span class="n">Users</span><span class="bp">\</span><span class="n">skywi</span><span class="bp">\.</span><span class="n">elan</span><span class="bp">\</span><span class="n">toolchains</span><span class="bp">\</span><span class="n">leanprover</span><span class="c1">--lean4---nightly-2022-12-13\bin\lean.exe` exited with code 3221226505</span>
<span class="n">error</span><span class="o">:</span> <span class="bp">&gt;</span> <span class="n">LEAN_PATH</span><span class="bp">=.\</span><span class="n">build</span><span class="bp">\</span><span class="n">lib</span><span class="bp">;.\./</span><span class="n">lake</span><span class="bp">-</span><span class="n">packages</span><span class="bp">\</span><span class="n">Qq</span><span class="bp">\</span><span class="n">build</span><span class="bp">\</span><span class="n">lib</span><span class="bp">;.\./</span><span class="n">lake</span><span class="bp">-</span><span class="n">packages</span><span class="bp">\</span><span class="n">aesop</span><span class="bp">\</span><span class="n">build</span><span class="bp">\</span><span class="n">lib</span><span class="bp">;.\./</span><span class="n">lake</span><span class="bp">-</span><span class="n">packages</span><span class="bp">\</span><span class="n">std</span><span class="bp">\</span><span class="n">build</span><span class="bp">\</span><span class="n">lib</span> <span class="n">PATH</span> <span class="n">c</span><span class="o">:</span><span class="bp">\</span><span class="n">Users</span><span class="bp">\</span><span class="n">skywi</span><span class="bp">\.</span><span class="n">elan</span><span class="bp">\</span><span class="n">toolchains</span><span class="bp">\</span><span class="n">leanprover</span><span class="c1">--lean4---nightly-2022-12-13\bin\lean.exe .\./lake-packages\aesop\.\.\Aesop\Util\Basic.lean -R .\./lake-packages\aesop\.\. -o .\./lake-packages\aesop\build\lib\Aesop\Util\Basic.olean -i .\./lake-packages\aesop\build\lib\Aesop\Util\Basic.ilean -c .\./lake-packages\aesop\build\ir\Aesop\Util\Basic.c --load-dynlib=Aesop-Nanos.dll --load-dynlib=Std-Classes-BEq.dll --load-dynlib=Std-Lean-Delaborator.dll --load-dynlib=Std-Tactic-CoeExt.dll --load-dynlib=Std-Util-LibraryNote.dll --load-dynlib=Std-Classes-Cast.dll --load-dynlib=Std-Classes-Dvd.dll --load-dynlib=Std-Tactic-Unreachable.dll --load-dynlib=Std-Linter-UnreachableTactic.dll --load-dynlib=Std-Lean-TagAttribute.dll --load-dynlib=Std-Lean-AttributeExtra.dll --load-dynlib=Std-Linter-UnnecessarySeqFocus.dll --load-dynlib=Std-Linter.dll --load-dynlib=Std-Tactic-OpenPrivate.dll --load-dynlib=Std-Tactic-NoMatch.dll --load-dynlib=Std-Tactic-GuardExpr.dll --load-dynlib=Std-Tactic-ByCases.dll --load-dynlib=Std-Tactic-SeqFocus.dll --load-dynlib=Std-Tactic-TryThis.dll --load-dynlib=Std-Tactic-ShowTerm.dll --load-dynlib=Std-Lean-Parser.dll --load-dynlib=Std-Tactic-SimpTrace.dll --load-dynlib=Std-Lean-Meta-Basic.dll --load-dynlib=Std-Lean-Tactic.dll --load-dynlib=Std-Tactic-Basic.dll --load-dynlib=Std-Util-TermUnsafe.dll --load-dynlib=Std-Lean-NameMapAttribute.dll --load-dynlib=Std-Tactic-Lint-Basic.dll --load-dynlib=Std-Data-List-Init-Lemmas.dll --load-dynlib=Std-Data-Array-Init-Basic.dll --load-dynlib=Std-Data-Array-Basic.dll --load-dynlib=Std-Tactic-Lint-Misc.dll --load-dynlib=Std-Logic.dll --load-dynlib=Std-Classes-LawfulMonad.dll --load-dynlib=Std-Lean-Meta-LCtx.dll --load-dynlib=Std-Tactic-Simpa.dll --load-dynlib=Std-Classes-Order.dll --load-dynlib=Std-Util-ExtendedBinder.dll --load-dynlib=Std-Classes-SetNotation.dll --load-dynlib=Std-Control-ForInStep-Basic.dll --load-dynlib=Std-Control-ForInStep-Lemmas.dll --load-dynlib=Std-Control-ForInStep.dll --load-dynlib=Std-Tactic-HaveI.dll --load-dynlib=Std-Data-Array-Init-Lemmas.dll --load-dynlib=Std-Data-Nat-Basic.dll --load-dynlib=Std-Data-Nat-Lemmas.dll --load-dynlib=Std-Data-Option-Init-Lemmas.dll --load-dynlib=Std-Data-List-Basic.dll --load-dynlib=Std-Data-Option-Basic.dll --load-dynlib=Std-Tactic-RCases.dll --load-dynlib=Std-Lean-Command.dll --load-dynlib=Std-Tactic-Ext-Attr.dll --load-dynlib=Std-Data-Option-Lemmas.dll --load-dynlib=Std-Tactic-Ext.dll --load-dynlib=Std-Data-List-Lemmas.dll --load-dynlib=Std-Data-Array-Lemmas.dll --load-dynlib=Std-Data-AssocList.dll --load-dynlib=Std-Data-BinomialHeap.dll --load-dynlib=Std-Data-Char.dll --load-dynlib=Std-Data-DList.dll --load-dynlib=Std-Data-Fin-Lemmas.dll --load-dynlib=Std-Data-HashMap-Basic.dll --load-dynlib=Std-Data-HashMap-WF.dll --load-dynlib=Std-Data-HashMap.dll --load-dynlib=Std-Data-Int-Basic.dll --load-dynlib=Std-Tactic-NormCast-Ext.dll --load-dynlib=Std-Tactic-NormCast-Lemmas.dll --load-dynlib=Std-Data-Int-Lemmas.dll --load-dynlib=Std-Data-Int-DivMod.dll --load-dynlib=Std-Data-Nat-Gcd.dll --load-dynlib=Std-Data-PairingHeap.dll --load-dynlib=Std-Data-RBMap-Basic.dll --load-dynlib=Std-Data-RBMap-WF.dll --load-dynlib=Std-Data-RBMap.dll --load-dynlib=Std-Data-RBMap-Alter.dll --load-dynlib=Std-Data-RBMap-Lemmas.dll --load-dynlib=Std-Data-Rat-Basic.dll --load-dynlib=Std-Data-Rat-Lemmas.dll --load-dynlib=Std-Data-Rat.dll --load-dynlib=Std-Data-String.dll --load-dynlib=Std-Lean-Expr.dll --load-dynlib=Std-Lean-Meta-AssertHypotheses.dll --load-dynlib=Std-Lean-Meta-Clear.dll --load-dynlib=Std-Lean-Meta-Inaccessible.dll --load-dynlib=Std-Lean-Meta-InstantiateMVars.dll --load-dynlib=Std-Lean-MonadBacktrack.dll --load-dynlib=Std-Lean-Meta-SavedState.dll --load-dynlib=Std-Lean-Meta-UnusedNames.dll --load-dynlib=Std-Tactic-Congr.dll --load-dynlib=Std-Tactic-Lint-Simp.dll --load-dynlib=Std-Tactic-Lint-TypeClass.dll --load-dynlib=Std-Tactic-Lint-Frontend.dll --load-dynlib=Std-Tactic-Lint.dll --load-dynlib=Std-Tactic-SqueezeScope.dll --load-dynlib=Std.dll --load-dynlib=Aesop-Util-UnionFind.dll</span>
<span class="n">error</span><span class="o">:</span> <span class="n">stderr</span><span class="o">:</span>
<span class="n">libc</span><span class="bp">++</span><span class="n">abi</span><span class="o">:</span> <span class="n">terminating</span> <span class="n">due</span> <span class="n">to</span> <span class="n">uncaught</span> <span class="n">exception</span> <span class="n">of</span> <span class="n">type</span> <span class="n">lean</span><span class="o">::</span><span class="n">exception</span><span class="o">:</span> <span class="n">error</span> <span class="n">loading</span> <span class="n">library</span> <span class="n">Aesop</span><span class="bp">-</span><span class="n">Nanos.dll</span><span class="o">:</span> <span class="mi">126</span>
<span class="n">error</span><span class="o">:</span> <span class="n">external</span> <span class="n">command</span> <span class="bp">`</span><span class="n">c</span><span class="o">:</span><span class="bp">\</span><span class="n">Users</span><span class="bp">\</span><span class="n">skywi</span><span class="bp">\.</span><span class="n">elan</span><span class="bp">\</span><span class="n">toolchains</span><span class="bp">\</span><span class="n">leanprover</span><span class="c1">--lean4---nightly-2022-12-13\bin\lean.exe` exited with code 3221226505</span>
</code></pre></div>



<a name="316519471"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/error%20loading%20library%20Aesop-Nanos.dll/near/316519471" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jannis Limperg <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/error.20loading.20library.20Aesop-Nanos.2Edll.html#316519471">(Dec 17 2022 at 22:56)</a>:</h4>
<p>Someone reported a similar issue in <a href="https://github.com/JLimperg/aesop/pull/33">JLimperg/aesop#33</a>. No idea what causes it I'm afraid.</p>



<a name="316520139"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/error%20loading%20library%20Aesop-Nanos.dll/near/316520139" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/error.20loading.20library.20Aesop-Nanos.2Edll.html#316520139">(Dec 17 2022 at 23:04)</a>:</h4>
<p>Also, <a href="#narrow/stream/270676-lean4/topic/Error.20loading.20library.20126.20when.20building">https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Error.20loading.20library.20126.20when.20building</a></p>



<a name="316520315"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/error%20loading%20library%20Aesop-Nanos.dll/near/316520315" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sky Wilshaw <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/error.20loading.20library.20Aesop-Nanos.2Edll.html#316520315">(Dec 17 2022 at 23:06)</a>:</h4>
<p>Ah, that's unfortunate. I may be unable to contribute until this bug gets fixed, I'm pretty much stuck working on Windows for now.</p>



<a name="316529638"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/error%20loading%20library%20Aesop-Nanos.dll/near/316529638" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/error.20loading.20library.20Aesop-Nanos.2Edll.html#316529638">(Dec 18 2022 at 01:11)</a>:</h4>
<p>Maybe we should disable precompiled modules in aesop for now?  (That is, until the bug is fixed.)</p>



<a name="316767700"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/error%20loading%20library%20Aesop-Nanos.dll/near/316767700" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jannis Limperg <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/error.20loading.20library.20Aesop-Nanos.2Edll.html#316767700">(Dec 19 2022 at 15:20)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110043">Gabriel Ebner</span> <a href="#narrow/stream/270676-lean4/topic/error.20loading.20library.20Aesop-Nanos.2Edll/near/316529638">said</a>:</p>
<blockquote>
<p>Maybe we should disable precompiled modules in aesop for now?  (That is, until the bug is fixed.)</p>
</blockquote>
<p>Good idea, done.</p>



<a name="317059880"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/error%20loading%20library%20Aesop-Nanos.dll/near/317059880" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sky Wilshaw <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/error.20loading.20library.20Aesop-Nanos.2Edll.html#317059880">(Dec 20 2022 at 23:34)</a>:</h4>
<p>Thank you, I'm now able to compile mathlib!</p>



<a name="320669491"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/error%20loading%20library%20Aesop-Nanos.dll/near/320669491" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/error.20loading.20library.20Aesop-Nanos.2Edll.html#320669491">(Jan 11 2023 at 11:00)</a>:</h4>
<p>Is this being tracked somewhere? I'd like to follow it <span aria-label="eyes" class="emoji emoji-1f440" role="img" title="eyes">:eyes:</span> <br>
I've been hit by this issue when importing a <a href="https://github.com/yatima-inc/YatimaStdLib.lean/blob/704823e421b333ea9960347e305c60f654618422/lakefile.lean#L7-L9">different package</a></p>



<a name="320678077"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/error%20loading%20library%20Aesop-Nanos.dll/near/320678077" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/error.20loading.20library.20Aesop-Nanos.2Edll.html#320678077">(Jan 11 2023 at 11:41)</a>:</h4>
<p>Please open a Lake issue, I don't there is one yet</p>



<a name="320680797"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/error%20loading%20library%20Aesop-Nanos.dll/near/320680797" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/error.20loading.20library.20Aesop-Nanos.2Edll.html#320680797">(Jan 11 2023 at 11:48)</a>:</h4>
<p><a href="https://github.com/leanprover/lake/issues/146">https://github.com/leanprover/lake/issues/146</a></p>



<a name="320797271"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/error%20loading%20library%20Aesop-Nanos.dll/near/320797271" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/error.20loading.20library.20Aesop-Nanos.2Edll.html#320797271">(Jan 11 2023 at 21:04)</a>:</h4>
<p>So I was debugging this issue and found some interesting behavior. Passing the library name to <code>--load-dynlib</code> and augmenting the environment  library path works to build modules every EXCEPT from within the Lean server for some reason (at least on Windows). I even verified the  environment path from <code>lake print-paths</code> on the terminal and <code>lake print-paths</code> in the server are the same and it still did not work.</p>
<p>To fix this, I am providing the full library path to <code>--load-dynlib</code>. This does mean we are likely to run into command line length limit sooner though.</p>



<a name="320799037"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/error%20loading%20library%20Aesop-Nanos.dll/near/320799037" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/error.20loading.20library.20Aesop-Nanos.2Edll.html#320799037">(Jan 11 2023 at 21:16)</a>:</h4>
<p>I'm not sure what you mean by environment path. There is no shared object search path in <code>print-paths</code>, is there? It's just immediate file names.</p>



<a name="320811707"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/error%20loading%20library%20Aesop-Nanos.dll/near/320811707" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/error.20loading.20library.20Aesop-Nanos.2Edll.html#320811707">(Jan 11 2023 at 22:44)</a>:</h4>
<p><span class="user-mention" data-user-id="110024">@Sebastian Ullrich</span> When Lake builds modules in <code>print-paths</code> it augments the environment of the <code>lean</code> command. One thing it does is add the directories of shared libraries (e.g. <code>build.lib</code>) tot the platform-specific shared library path environment variable (e.g., <code>LD_LIBRARY_PATH</code> on Linux, <code>PATH</code> on Windows). This allowed it to get away with using just <code>load-dynlib=Mod-Name.so</code> instead of <code>load-dynlib=build/lib/Mod-Name.so</code>. However, for some reason this does not work when run from the server (at least on Windows). It does work when <code>print-paths</code> is run directly from the command line though.</p>



<a name="320811980"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/error%20loading%20library%20Aesop-Nanos.dll/near/320811980" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/error.20loading.20library.20Aesop-Nanos.2Edll.html#320811980">(Jan 11 2023 at 22:46)</a>:</h4>
<p>Another issue I just ran into is that Linux requires an augmented environment even if a full path is provided to <code>--load-dynlib</code> to load nested linked dynlibs  (MacOS and Windows allow nested libraries to be preloaded to avoid this check). This is a problem for external libraries  loaded by the server because we don't know the path of the library until the build completes and by thus we cannot ahead-of-time augment the Lean server's environment to include those paths.</p>



<a name="320879813"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/error%20loading%20library%20Aesop-Nanos.dll/near/320879813" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/error.20loading.20library.20Aesop-Nanos.2Edll.html#320879813">(Jan 12 2023 at 08:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="315577">Mac</span> <a href="#narrow/stream/270676-lean4/topic/error.20loading.20library.20Aesop-Nanos.2Edll/near/320811707">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="110024">Sebastian Ullrich</span> When Lake builds modules in <code>print-paths</code> it augments the environment of the <code>lean</code> command.</p>
</blockquote>
<p>Are you thinking of <code>lake env</code>? There is no way for the current <code>print-paths</code> to affect the environment of the calling process, especially since changing the environment of a running process is Problematic anyway on certain platforms and thus not exposed in the IO API.</p>



<a name="320882770"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/error%20loading%20library%20Aesop-Nanos.dll/near/320882770" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/error.20loading.20library.20Aesop-Nanos.2Edll.html#320882770">(Jan 12 2023 at 08:49)</a>:</h4>
<blockquote>
<p>However, for some reason this does not work when run from the server (at least on Windows).</p>
</blockquote>
<p>Did you check that the worker process has the expected <code>PATH</code>? I suppose there's also Dependency Walker, but I don't know if that's convenient to use in this multi-process scenario.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>