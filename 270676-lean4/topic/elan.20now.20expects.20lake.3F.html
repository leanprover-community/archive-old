---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/elan.20now.20expects.20lake.3F.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/elan.20now.20expects.20lake.3F.html">elan now expects lake?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="257287877"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/elan%20now%20expects%20lake%3F/near/257287877" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/elan.20now.20expects.20lake.3F.html#257287877">(Oct 12 2021 at 23:33)</a>:</h4>
<p>I'm getting errors from <code>elan</code>, saying:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">error</span><span class="o">:</span> <span class="n">toolchain</span> <span class="bp">'</span><span class="n">leanprover</span><span class="bp">/</span><span class="n">lean4</span><span class="o">:</span><span class="n">nightly</span><span class="bp">-</span><span class="mi">2021</span><span class="bp">-</span><span class="mi">10</span><span class="bp">-</span><span class="mi">12</span><span class="bp">'</span> <span class="n">does</span> <span class="n">not</span> <span class="k">have</span> <span class="n">the</span> <span class="n">binary</span> <span class="bp">`/</span><span class="n">home</span><span class="bp">/</span><span class="n">lean</span><span class="bp">/.</span><span class="n">elan</span><span class="bp">/</span><span class="n">toolchains</span><span class="bp">/</span><span class="n">leanprover</span><span class="c1">--lean4---nightly-2021-10-12/bin/lake`</span>
</code></pre></div>
<p>Presumably this means that <code>elan</code> is now expecting binaries to contain <code>lake</code>, but this hasn't quite happened yet?</p>



<a name="257289427"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/elan%20now%20expects%20lake%3F/near/257289427" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/elan.20now.20expects.20lake.3F.html#257289427">(Oct 12 2021 at 23:53)</a>:</h4>
<p><span class="user-mention" data-user-id="315577">@Mac</span>, do you know the status here?</p>



<a name="257290424"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/elan%20now%20expects%20lake%3F/near/257290424" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/elan.20now.20expects.20lake.3F.html#257290424">(Oct 13 2021 at 00:03)</a>:</h4>
<p>Ah, I see, this is presumably <code>elan</code> getting ahead of the PR that adds <code>lake</code> to lean4 <a href="https://github.com/leanprover/lean4/pull/683">https://github.com/leanprover/lean4/pull/683</a>, and once that has merged then <code>elan</code> will work with all subsequent nightlies.</p>



<a name="257290489"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/elan%20now%20expects%20lake%3F/near/257290489" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/elan.20now.20expects.20lake.3F.html#257290489">(Oct 13 2021 at 00:04)</a>:</h4>
<p>I guess one should not update to elan 1.1.0 until then</p>



<a name="257290616"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/elan%20now%20expects%20lake%3F/near/257290616" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/elan.20now.20expects.20lake.3F.html#257290616">(Oct 13 2021 at 00:06)</a>:</h4>
<p>Sometimes it's hard to avoid updating -- e.g. even if you run an old <code>elan-init.sh</code>, it obtains v1.1.0. :-( It's okay, I can wait on this.</p>



<a name="257290659"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/elan%20now%20expects%20lake%3F/near/257290659" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/elan.20now.20expects.20lake.3F.html#257290659">(Oct 13 2021 at 00:06)</a>:</h4>
<p>It might be a good idea for elan to only produce a warning rather than error if a nightly is missing lake</p>



<a name="257290747"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/elan%20now%20expects%20lake%3F/near/257290747" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/elan.20now.20expects.20lake.3F.html#257290747">(Oct 13 2021 at 00:07)</a>:</h4>
<p>(especially as that may be required to support downloading older nightlies/versions)</p>



<a name="257290909"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/elan%20now%20expects%20lake%3F/near/257290909" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/elan.20now.20expects.20lake.3F.html#257290909">(Oct 13 2021 at 00:09)</a>:</h4>
<p>Exactly. I'm stuck on this with mathport today. (Trying to make a reproducible build of mathport, but it's hard because I can't download a fresh copy of elan. :-)</p>



<a name="257291172"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/elan%20now%20expects%20lake%3F/near/257291172" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/elan.20now.20expects.20lake.3F.html#257291172">(Oct 13 2021 at 00:12)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span>  you should be able to just grab the release for your OS of an older elan from the <a href="https://github.com/leanprover/elan/releases">releases page</a> and use that</p>



<a name="257291200"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/elan%20now%20expects%20lake%3F/near/257291200" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/elan.20now.20expects.20lake.3F.html#257291200">(Oct 13 2021 at 00:12)</a>:</h4>
<p>which is probably a better idea than using the master <code>elan-init.sh</code> for a reproducible build (e.g., a docker container) as it fixes the version of elan being used</p>



<a name="257321969"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/elan%20now%20expects%20lake%3F/near/257321969" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/elan.20now.20expects.20lake.3F.html#257321969">(Oct 13 2021 at 07:23)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> I assume you have a locally built <code>lake</code> in your PATH. Putting that ahead of <code>elan/bin</code> should fix this error.</p>



<a name="257332895"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/elan%20now%20expects%20lake%3F/near/257332895" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/elan.20now.20expects.20lake.3F.html#257332895">(Oct 13 2021 at 09:00)</a>:</h4>
<p><span class="user-mention" data-user-id="110024">@Sebastian Ullrich</span> fair enough, but I imagine we still want elan to regain support for downloading older nightlies without a Lake executable, correct? Or does the error not actually prevent the successful download/install of a toolchain lacking Lake?</p>



<a name="257333321"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/elan%20now%20expects%20lake%3F/near/257333321" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/elan.20now.20expects.20lake.3F.html#257333321">(Oct 13 2021 at 09:04)</a>:</h4>
<p>It shouldn't. Lean 3 doesn't have <code>leanc</code> either after all.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>