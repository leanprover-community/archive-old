---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/Is.20code.20displayed.20at.20the.20infoview.20guaranteed.20to.20be.20well-typ.3F.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Is.20code.20displayed.20at.20the.20infoview.20guaranteed.20to.20be.20well-typ.3F.html">Is code displayed at the infoview guaranteed to be well-typ?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="288600999"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Is%20code%20displayed%20at%20the%20infoview%20guaranteed%20to%20be%20well-typ%3F/near/288600999" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Siddharth Bhat <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Is.20code.20displayed.20at.20the.20infoview.20guaranteed.20to.20be.20well-typ.3F.html#288600999">(Jul 05 2022 at 22:47)</a>:</h4>
<p>I had a situation where copy-pasting an expression from the InfoView produced an expression that failed to <code>#check</code> (ie, the expression type errors). On the other hand, using <code>set_option pp.all true</code> (as suggested by <span class="user-mention" data-user-id="484617">@SÃ©bastien Michelland</span> ) produced a gargantuan expression that did pass the <code>#check</code> (ie, Lean inferred the correct type for this expression). </p>
<p>In general, are the expressions that are displayed  in the InfoView guaranteed to be well-typed in their context? Said differently, should I try to find an MWE for the case I ran into?</p>



<a name="288601218"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Is%20code%20displayed%20at%20the%20infoview%20guaranteed%20to%20be%20well-typ%3F/near/288601218" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Leonardo de Moura <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Is.20code.20displayed.20at.20the.20infoview.20guaranteed.20to.20be.20well-typ.3F.html#288601218">(Jul 05 2022 at 22:51)</a>:</h4>
<p>No, there is no guarantee that any term there can be re-elaborated. The focus is on readability. <br>
The option <code>set_option pp.analyze true</code> is between the default and <code>pp.all</code>, it often generates terms that can be re-elaborated, but it is not perfect.</p>



<a name="288629072"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Is%20code%20displayed%20at%20the%20infoview%20guaranteed%20to%20be%20well-typ%3F/near/288629072" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Is.20code.20displayed.20at.20the.20infoview.20guaranteed.20to.20be.20well-typ.3F.html#288629072">(Jul 06 2022 at 06:36)</a>:</h4>
<p>Is the output with <code>pp.all</code> intended to always re-elaborate?</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>