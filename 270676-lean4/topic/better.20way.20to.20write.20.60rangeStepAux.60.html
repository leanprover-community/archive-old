---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html">better way to write `rangeStepAux`</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="272813928"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272813928" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272813928">(Feb 22 2022 at 14:57)</a>:</h4>
<p>I have this function, but it is not structural recursion.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">protected</span> <span class="kd">def</span> <span class="n">List.rangeStepAux</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="n">Nat</span><span class="o">)</span> <span class="o">(</span><span class="n">l</span> <span class="o">:</span> <span class="n">List</span> <span class="n">Nat</span><span class="o">):</span> <span class="n">List</span> <span class="n">Nat</span> <span class="o">:=</span>
  <span class="k">if</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">m</span> <span class="k">then</span>
    <span class="n">l</span>
  <span class="k">else</span>
    <span class="n">List.rangeStepAux</span> <span class="n">m</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">2</span><span class="o">)</span> <span class="o">(</span><span class="n">l.take</span> <span class="n">n</span> <span class="bp">|&gt;.</span><span class="n">append</span> <span class="bp">$</span> <span class="n">l.drop</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="bp">|&gt;.</span><span class="n">take</span> <span class="o">(</span><span class="n">l.length</span> <span class="bp">-</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)))</span>
</code></pre></div>
<p>What different/better ways are there to do this where I won't have to prove termination, and, I would prefer no code, and rather verbal suggestions so I can try to work this out myself. Thanks in advance!</p>



<a name="272815290"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272815290" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272815290">(Feb 22 2022 at 15:07)</a>:</h4>
<p>use <code>partial</code></p>



<a name="272815514"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272815514" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272815514">(Feb 22 2022 at 15:08)</a>:</h4>
<p>I don't really know what your function is supposed to do, but it infinite loops when I test it</p>



<a name="272815575"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272815575" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272815575">(Feb 22 2022 at 15:09)</a>:</h4>
<p>so proving termination is probably going to be difficult</p>



<a name="272821546"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272821546" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272821546">(Feb 22 2022 at 15:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60/near/272815514">said</a>:</p>
<blockquote>
<p>I don't really know what your function is supposed to do, but it infinite loops when I test it</p>
</blockquote>
<p>Make a range from 0-n, and skip every <code>m</code>th term</p>



<a name="272821896"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272821896" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272821896">(Feb 22 2022 at 15:50)</a>:</h4>
<p>so like <code>1,2,4,5,7,8</code>?</p>



<a name="272821956"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272821956" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272821956">(Feb 22 2022 at 15:50)</a>:</h4>
<p>Your algorithm also looks cubic</p>



<a name="272822256"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272822256" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272822256">(Feb 22 2022 at 15:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60/near/272821896">said</a>:</p>
<blockquote>
<p>so like <code>1,2,4,5,7,8</code>?</p>
</blockquote>
<p>yes. that would be skipping every third term</p>



<a name="272822272"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272822272" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272822272">(Feb 22 2022 at 15:52)</a>:</h4>
<p>What do you do if <code>m</code> is negative, if the start point is greater than the end point, or if the end point is not a multiple of the step? Lots of things cause that code to miss its exit point</p>



<a name="272822290"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272822290" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272822290">(Feb 22 2022 at 15:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60/near/272821956">said</a>:</p>
<blockquote>
<p>Your algorithm also looks cubic</p>
</blockquote>
<p>im thinking of scratching my algorithm</p>



<a name="272822325"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272822325" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272822325">(Feb 22 2022 at 15:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60/near/272822272">said</a>:</p>
<blockquote>
<p>What do you do if <code>m</code> is negative, if the start point is greater than the end point, or if the end point is not a multiple of the step? Lots of things cause that code to miss its exit point</p>
</blockquote>
<p>m will never be negative</p>



<a name="272822362"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272822362" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272822362">(Feb 22 2022 at 15:52)</a>:</h4>
<p>your function signature doesn't say so</p>



<a name="272822417"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272822417" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272822417">(Feb 22 2022 at 15:53)</a>:</h4>
<p><code>(m n : Nat)</code></p>



<a name="272822461"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272822461" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272822461">(Feb 22 2022 at 15:53)</a>:</h4>
<p>er I meant the other thing</p>



<a name="272822498"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272822498" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272822498">(Feb 22 2022 at 15:53)</a>:</h4>
<p>the start point can be greater than the end point in the aux function</p>



<a name="272822588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272822588" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272822588">(Feb 22 2022 at 15:54)</a>:</h4>
<p>also a step size of 0 is bad</p>



<a name="272822636"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272822636" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272822636">(Feb 22 2022 at 15:54)</a>:</h4>
<p>Yes, but I use this in a function <code>rangeStep</code> where I use it correctly</p>



<a name="272822691"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272822691" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272822691">(Feb 22 2022 at 15:55)</a>:</h4>
<p>okay, then <code>rangeStepAux</code> needs hypotheses asserting that it's being called correctly</p>



<a name="272822714"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272822714" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272822714">(Feb 22 2022 at 15:55)</a>:</h4>
<p>But I would like to use a different algorithm? Do you have ideas for a different one?</p>



<a name="272822800"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272822800" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272822800">(Feb 22 2022 at 15:55)</a>:</h4>
<p>sure, this sounds like <code>(range n).filter (\lam i, i % m != 0)</code></p>



<a name="272822834"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272822834" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272822834">(Feb 22 2022 at 15:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60/near/272822691">said</a>:</p>
<blockquote>
<p>okay, then <code>rangeStepAux</code> needs hypotheses asserting that it's being called correctly</p>
</blockquote>
<p>ok. I cant do that, but I dont really have to worry about what you said, because i'm pretty sure that cant appen</p>



<a name="272823077"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272823077" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272823077">(Feb 22 2022 at 15:57)</a>:</h4>
<p>You misunderstand. You say that <code>rangeStep</code> checks that certain boundary cases don't happen, while <code>rangeStepAux</code> relies on those boundary cases not being inputs. That means that <code>rangeStepAux</code> needs to assert that the bad cases are not legal in its type signature or else you won't be able to prove termination</p>



<a name="272823202"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272823202" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272823202">(Feb 22 2022 at 15:58)</a>:</h4>
<p>because <code>rangeStepAux</code> is just a regular function, people can call it themselves if they want</p>



<a name="272823493"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272823493" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272823493">(Feb 22 2022 at 16:00)</a>:</h4>
<p>For example</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">protected</span> <span class="kd">def</span> <span class="n">List.rangeStepAux</span> <span class="o">(</span><span class="n">start</span> <span class="n">stop</span> <span class="n">step</span> <span class="o">:</span> <span class="n">Nat</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">start</span> <span class="bp">≤</span> <span class="n">stop</span><span class="o">)</span> <span class="o">(</span><span class="n">s0</span> <span class="o">:</span> <span class="n">step</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">List</span> <span class="n">Nat</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div>



<a name="272823870"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272823870" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272823870">(Feb 22 2022 at 16:01)</a>:</h4>
<p>but I made it protected so people cant use it</p>



<a name="272823926"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272823926" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272823926">(Feb 22 2022 at 16:02)</a>:</h4>
<p>nope, that's not what protected means</p>



<a name="272823930"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272823930" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272823930">(Feb 22 2022 at 16:02)</a>:</h4>
<p>or do I have to use <code>private</code>, if that is a keyword</p>



<a name="272823970"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272823970" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272823970">(Feb 22 2022 at 16:02)</a>:</h4>
<p>protected means you have to write <code>List.rangeStepAux</code> even if you <code>open List</code></p>



<a name="272824042"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272824042" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272824042">(Feb 22 2022 at 16:02)</a>:</h4>
<p>Ah. If I use private, will that allow people not to use it?</p>



<a name="272824057"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272824057" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272824057">(Feb 22 2022 at 16:02)</a>:</h4>
<p><code>private</code> makes the function not <em>easily</em> accessible outside the current section</p>



<a name="272824096"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272824096" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272824096">(Feb 22 2022 at 16:03)</a>:</h4>
<p>oh</p>



<a name="272824109"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272824109" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272824109">(Feb 22 2022 at 16:03)</a>:</h4>
<p>but it's not air tight and more to the point it is not something you can use to do proofs</p>



<a name="272824150"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272824150" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272824150">(Feb 22 2022 at 16:03)</a>:</h4>
<p>if you want to know that a fact is true, you take it as an argument</p>



<a name="272824190"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272824190" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272824190">(Feb 22 2022 at 16:03)</a>:</h4>
<p>right</p>



<a name="272824273"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272824273" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272824273">(Feb 22 2022 at 16:04)</a>:</h4>
<p>this makes the function inconvenient to call, but that's fine since this is an aux function</p>



<a name="272824274"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272824274" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272824274">(Feb 22 2022 at 16:04)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60/near/272823493">said</a>:</p>
<blockquote>
<p>For example</p>
<p><div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">protected</span> <span class="kd">def</span> <span class="n">List.rangeStepAux</span> <span class="o">(</span><span class="n">start</span> <span class="n">stop</span> <span class="n">step</span> <span class="o">:</span> <span class="n">Nat</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">start</span> <span class="bp">≤</span> <span class="n">stop</span><span class="o">)</span> <span class="o">(</span><span class="n">s0</span> <span class="o">:</span> <span class="n">step</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">List</span> <span class="n">Nat</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div><br>
</p>
</blockquote>
<p>I dont take start as an argument</p>



<a name="272824294"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272824294" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272824294">(Feb 22 2022 at 16:04)</a>:</h4>
<p>At least with my current algorithm</p>



<a name="272824319"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272824319" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272824319">(Feb 22 2022 at 16:04)</a>:</h4>
<p>in your code <code>start</code> was <code>n</code> and <code>stop</code> was <code>m</code> and <code>step</code> was... 2?</p>



<a name="272824402"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272824402" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272824402">(Feb 22 2022 at 16:05)</a>:</h4>
<p>So <code>start</code> is the current value, it increases until it exceeds <code>stop</code></p>



<a name="272824741"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272824741" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272824741">(Feb 22 2022 at 16:07)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60/near/272824319">said</a>:</p>
<blockquote>
<p>in your code <code>start</code> was <code>n</code> and <code>stop</code> was <code>m</code> and <code>step</code> was... 2?</p>
</blockquote>
<p>sorry if it was very unclear. <code>m</code> was stop, and <code>n</code> was step</p>



<a name="272824766"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272824766" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272824766">(Feb 22 2022 at 16:07)</a>:</h4>
<p>I should have made that more clear</p>



<a name="272825303"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272825303" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272825303">(Feb 22 2022 at 16:10)</a>:</h4>
<p>If that's the case, then your step increased by 2 on every iteration</p>



<a name="272825385"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272825385" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272825385">(Feb 22 2022 at 16:11)</a>:</h4>
<p>maybe you and I mean different things by "step"</p>



<a name="272827467"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272827467" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272827467">(Feb 22 2022 at 16:23)</a>:</h4>
<p>ah, that is not what i meant. I meant to increase by step</p>



<a name="272827488"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272827488" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272827488">(Feb 22 2022 at 16:23)</a>:</h4>
<p>Let me see what fixing my mistake does.</p>



<a name="272827864"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272827864" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272827864">(Feb 22 2022 at 16:25)</a>:</h4>
<p>I still seem to need to prove termination</p>



<a name="272828027"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272828027" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272828027">(Feb 22 2022 at 16:26)</a>:</h4>
<p>well yes, but now it's actually provable (hopefully)</p>



<a name="272828110"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272828110" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272828110">(Feb 22 2022 at 16:27)</a>:</h4>
<p>if you don't want to prove termination you can use <code>partial</code>, but if it is actually nonterminating for some inputs then users will not like it</p>



<a name="272828315"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272828315" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272828315">(Feb 22 2022 at 16:28)</a>:</h4>
<p>but if your definition is not structurally recursive then in all likelihood you will need to prove termination manually assuming no <code>partial</code></p>



<a name="272828458"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272828458" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272828458">(Feb 22 2022 at 16:29)</a>:</h4>
<p>note that mathlib will almost certainly want such a function to <em>not</em> be <code>partial</code> because you can't prove facts about <code>partial</code> functions</p>



<a name="272828783"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272828783" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272828783">(Feb 22 2022 at 16:31)</a>:</h4>
<p>Yes. The only problem now is, how can we prove termination? On what case. I think I have an idea.</p>



<a name="272828987"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272828987" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272828987">(Feb 22 2022 at 16:32)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">protected</span> <span class="kd">def</span> <span class="n">List.rangeStepAux</span> <span class="o">(</span><span class="n">stop</span> <span class="n">step</span> <span class="o">:</span> <span class="n">Nat</span><span class="o">)</span> <span class="o">(</span><span class="n">l</span> <span class="o">:</span> <span class="n">List</span> <span class="n">Nat</span><span class="o">):</span> <span class="n">List</span> <span class="n">Nat</span> <span class="o">:=</span>
  <span class="k">if</span> <span class="n">step</span> <span class="bp">=</span> <span class="n">stop</span> <span class="k">then</span>
    <span class="n">l</span>
  <span class="k">else</span>
    <span class="n">List.rangeStepAux</span> <span class="n">stop</span> <span class="o">(</span><span class="n">step</span><span class="bp">*</span><span class="mi">2</span><span class="o">)</span> <span class="o">(</span><span class="n">l.take</span> <span class="n">step</span> <span class="bp">|&gt;.</span><span class="n">append</span> <span class="bp">$</span> <span class="n">l.drop</span> <span class="o">(</span><span class="n">step</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="bp">|&gt;.</span><span class="n">take</span> <span class="o">(</span><span class="n">l.length</span> <span class="bp">-</span> <span class="o">(</span><span class="n">step</span><span class="bp">+</span><span class="mi">1</span><span class="o">)))</span>
<span class="n">termination_by</span> <span class="n">List.rangeStepAux</span> <span class="n">m</span> <span class="n">n</span> <span class="n">_</span> <span class="bp">=&gt;</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">m</span>
</code></pre></div>
<p>i think I am close?</p>



<a name="272829132"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272829132" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272829132">(Feb 22 2022 at 16:33)</a>:</h4>
<p>This code has exactly the same nontermination issues as the original</p>



<a name="272829237"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272829237" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272829237">(Feb 22 2022 at 16:34)</a>:</h4>
<p>I would rename <code>step</code> to <code>start</code> btw</p>



<a name="272829262"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272829262" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272829262">(Feb 22 2022 at 16:34)</a>:</h4>
<p>the step is 2 there</p>



<a name="272829366"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272829366" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272829366">(Feb 22 2022 at 16:35)</a>:</h4>
<p>your termination measure should be <code>stop - start</code> most likely</p>



<a name="272829428"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272829428" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272829428">(Feb 22 2022 at 16:35)</a>:</h4>
<p>Wait, I still didn't fix the previous bug</p>



<a name="272829462"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272829462" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272829462">(Feb 22 2022 at 16:35)</a>:</h4>
<p>Actually nevermind</p>



<a name="272829529"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272829529" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272829529">(Feb 22 2022 at 16:36)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60/near/272829237">said</a>:</p>
<blockquote>
<p>I would rename <code>step</code> to <code>start</code> btw</p>
</blockquote>
<p>Why?</p>



<a name="272829608"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272829608" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272829608">(Feb 22 2022 at 16:36)</a>:</h4>
<p>because it's not a step</p>



<a name="272829658"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272829658" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272829658">(Feb 22 2022 at 16:37)</a>:</h4>
<p>it's the first value produced by the code</p>



<a name="272831004"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272831004" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272831004">(Feb 22 2022 at 16:46)</a>:</h4>
<p>Ok</p>



<a name="272831009"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272831009" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272831009">(Feb 22 2022 at 16:46)</a>:</h4>
<p>Right</p>



<a name="272831709"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272831709" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272831709">(Feb 22 2022 at 16:50)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60/near/272829366">said</a>:</p>
<blockquote>
<p>your termination measure should be <code>stop - start</code> most likely</p>
</blockquote>
<p>hmm</p>



<a name="272839325"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272839325" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272839325">(Feb 22 2022 at 17:39)</a>:</h4>
<p>And what could I compare that with? <code>stop - start  =  0</code>?</p>



<a name="272846162"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272846162" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272846162">(Feb 22 2022 at 18:27)</a>:</h4>
<p>nothing, <code>termination_by</code> is expecting an expression of type Nat (or other well ordered type)</p>



<a name="272848769"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272848769" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272848769">(Feb 22 2022 at 18:46)</a>:</h4>
<p>Ah. So just that. I will try it</p>



<a name="272856353"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272856353" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272856353">(Feb 22 2022 at 19:43)</a>:</h4>
<p>I get this <a href="/user_uploads/3121/7u62afFR4VIUs0VYlG4s6nSO/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/7u62afFR4VIUs0VYlG4s6nSO/image.png" title="image.png"><img src="/user_uploads/3121/7u62afFR4VIUs0VYlG4s6nSO/image.png"></a></div>



<a name="272857697"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272857697" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mauricio Collares <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272857697">(Feb 22 2022 at 19:53)</a>:</h4>
<p>The argument order in your recursive call seems wrong</p>



<a name="272859596"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272859596" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272859596">(Feb 22 2022 at 20:07)</a>:</h4>
<p>You may be right</p>



<a name="272859931"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272859931" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272859931">(Feb 22 2022 at 20:10)</a>:</h4>
<p>So now it results into something that will be false most of the time <a href="/user_uploads/3121/4rfHhyY4MOH8h-qq8gMcQ6DM/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/4rfHhyY4MOH8h-qq8gMcQ6DM/image.png" title="image.png"><img src="/user_uploads/3121/4rfHhyY4MOH8h-qq8gMcQ6DM/image.png"></a></div>



<a name="272860144"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272860144" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mauricio Collares <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272860144">(Feb 22 2022 at 20:12)</a>:</h4>
<p>Why? This is now true unless start == 0. By the way, originally you had <code>+2</code> and now you have <code>*2</code>, is that intentional?</p>



<a name="272860656"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272860656" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mauricio Collares <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272860656">(Feb 22 2022 at 20:16)</a>:</h4>
<p>I guess I am having trouble understanding what the function is supposed to do, so it's entirely possible that my suggestion makes no sense</p>



<a name="272860913"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272860913" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mauricio Collares <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272860913">(Feb 22 2022 at 20:18)</a>:</h4>
<p>I would recommend making the function partial and running it to check if the outputs match what you expect, before proving termination</p>



<a name="272861790"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272861790" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272861790">(Feb 22 2022 at 20:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="325367">Mauricio Collares</span> <a href="#narrow/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60/near/272860144">said</a>:</p>
<blockquote>
<p>Why? This is now true unless <code>start = 0</code>. By the way, originally (before renaming from <code>m n</code> to <code>start stop</code>) you had <code>+2</code> and now you have <code>*2</code>, is that intentional?</p>
</blockquote>
<p>The <code>+2</code> was a mistake</p>



<a name="272861902"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272861902" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272861902">(Feb 22 2022 at 20:27)</a>:</h4>
<p><span class="user-mention silent" data-user-id="325367">Mauricio Collares</span> <a href="#narrow/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60/near/272860656">said</a>:</p>
<blockquote>
<p>I guess I am having trouble understanding what the function is supposed to do, so it's entirely possible that my suggestion makes no sense</p>
</blockquote>
<p><a href="#narrow/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60/near/272821546">https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60/near/272821546</a></p>



<a name="272861926"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272861926" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272861926">(Feb 22 2022 at 20:27)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60/near/272822800">said</a>:</p>
<blockquote>
<p>sure, this sounds like <code>(range n).filter (\lam i, i % m != 0)</code></p>
</blockquote>
<p>I missed this entirely</p>



<a name="272862018"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272862018" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272862018">(Feb 22 2022 at 20:28)</a>:</h4>
<p>This is a filter, I just didn’t know how to keep track of something. thanks again,</p>



<a name="272864211"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272864211" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272864211">(Feb 22 2022 at 20:47)</a>:</h4>
<p><span class="user-mention silent" data-user-id="467926">Joseph O</span> <a href="#narrow/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60/near/272861790">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="325367">Mauricio Collares</span> <a href="#narrow/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60/near/272860144">said</a>:</p>
<blockquote>
<p>Why? This is now true unless <code>start = 0</code>. By the way, originally (before renaming from <code>m n</code> to <code>start stop</code>) you had <code>+2</code> and now you have <code>*2</code>, is that intentional?</p>
</blockquote>
<p>The <code>+2</code> was a mistake</p>
</blockquote>
<p>The <code>*2</code> looks like even more of a mistake. <code>start</code> will go over powers of 2, which doesn't seem to have anything to do with your goal</p>



<a name="272864218"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272864218" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272864218">(Feb 22 2022 at 20:47)</a>:</h4>
<p>Now I solved this without recursion or an auxiliary function</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">List.rangeStep</span> <span class="o">(</span><span class="n">start</span> <span class="n">stop</span> <span class="n">step</span> <span class="o">:</span> <span class="n">Nat</span><span class="o">)</span> <span class="o">:=</span>
  <span class="o">(</span><span class="n">List.drop</span> <span class="n">start</span> <span class="bp">$</span> <span class="n">List.range</span> <span class="n">stop</span><span class="o">)</span><span class="bp">.</span><span class="n">filter</span> <span class="o">(</span><span class="k">fun</span> <span class="n">i</span> <span class="bp">=&gt;</span> <span class="n">i</span> <span class="bp">%</span> <span class="n">step</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span>
</code></pre></div>



<a name="272864325"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272864325" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272864325">(Feb 22 2022 at 20:48)</a>:</h4>
<p>Thanks so much for your algorithm idea</p>



<a name="272864341"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272864341" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272864341">(Feb 22 2022 at 20:48)</a>:</h4>
<p>I think there is a variant on <code>range</code> that lets you control the starting point</p>



<a name="272864357"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272864357" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272864357">(Feb 22 2022 at 20:48)</a>:</h4>
<p>Is there?</p>



<a name="272864430"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272864430" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272864430">(Feb 22 2022 at 20:49)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="sd">/-- `range' s n` is the list of numbers `[s, s+1, ..., s+n-1]`.</span>
<span class="sd">  It is intended mainly for proving properties of `range` and `iota`. -/</span>
<span class="kd">@[simp]</span>
<span class="kd">def</span> <span class="n">range'</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">List</span> <span class="n">ℕ</span>
<span class="bp">|</span> <span class="n">s</span><span class="o">,</span> <span class="mi">0</span> <span class="bp">=&gt;</span> <span class="o">[]</span>
<span class="bp">|</span> <span class="n">s</span><span class="o">,</span> <span class="n">n</span><span class="bp">+</span><span class="mi">1</span> <span class="bp">=&gt;</span> <span class="n">s</span> <span class="o">::</span> <span class="n">range'</span> <span class="o">(</span><span class="n">s</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="n">n</span>
</code></pre></div>



<a name="272864530"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272864530" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272864530">(Feb 22 2022 at 20:50)</a>:</h4>
<p>so it is <code>start</code> and <code>len</code></p>



<a name="272864547"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272864547" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272864547">(Feb 22 2022 at 20:50)</a>:</h4>
<p>where <code>len</code> is <code>stop - start</code></p>



<a name="272864550"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272864550" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272864550">(Feb 22 2022 at 20:50)</a>:</h4>
<p>Ah thank you</p>



<a name="272864568"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272864568" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272864568">(Feb 22 2022 at 20:50)</a>:</h4>
<p>I didn't know</p>



<a name="272864585"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272864585" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272864585">(Feb 22 2022 at 20:50)</a>:</h4>
<p>that's in mathlib(4)</p>



<a name="272864865"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272864865" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272864865">(Feb 22 2022 at 20:53)</a>:</h4>
<p>Ah, im afraid I cant use it then</p>



<a name="272865304"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272865304" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272865304">(Feb 22 2022 at 20:57)</a>:</h4>
<p>Well, in another sense, it's on Zulip, in Mario's message.</p>



<a name="272866977"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272866977" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272866977">(Feb 22 2022 at 21:07)</a>:</h4>
<p>Well yes, but I would have to either inline it into my functions or make it private which in lean 4 i dont think is possible</p>



<a name="272867231"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272867231" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272867231">(Feb 22 2022 at 21:09)</a>:</h4>
<p>or just copy it into your project</p>



<a name="272867268"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272867268" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272867268">(Feb 22 2022 at 21:09)</a>:</h4>
<p>you can't inline it anyway, it's a recursive function</p>



<a name="272867359"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272867359" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272867359">(Feb 22 2022 at 21:10)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60/near/272867268">said</a>:</p>
<blockquote>
<p>you can't inline it anyway, it's a recursive function</p>
</blockquote>
<p>I meant localize it with <code>let rec</code></p>



<a name="272867373"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272867373" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272867373">(Feb 22 2022 at 21:10)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60/near/272867231">said</a>:</p>
<blockquote>
<p>or just copy it into your project</p>
</blockquote>
<p>under the given circumstances, I cant do that either</p>



<a name="272867376"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272867376" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272867376">(Feb 22 2022 at 21:10)</a>:</h4>
<p>I don't really understand your decision procedures</p>



<a name="272867392"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272867392" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272867392">(Feb 22 2022 at 21:10)</a>:</h4>
<p>what are the circumstances?</p>



<a name="272868678"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272868678" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272868678">(Feb 22 2022 at 21:23)</a>:</h4>
<p>I’m contributing somewhere</p>



<a name="272868854"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272868854" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272868854">(Feb 22 2022 at 21:25)</a>:</h4>
<p>Besides you can make it private Lean 4 does have a private keyword.</p>



<a name="272869265"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272869265" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272869265">(Feb 22 2022 at 21:29)</a>:</h4>
<p>Mario told me it is not exactly private</p>



<a name="272869283"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272869283" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272869283">(Feb 22 2022 at 21:29)</a>:</h4>
<p>and can be accessed</p>



<a name="272871207"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272871207" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272871207">(Feb 22 2022 at 21:49)</a>:</h4>
<p>And why is it an issue if some helper range function can be accessed?</p>



<a name="272882120"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272882120" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272882120">(Feb 22 2022 at 23:36)</a>:</h4>
<p>I don’t know if the maintainers would like that, since they should be declared under the List namespace</p>



<a name="272882169"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272882169" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272882169">(Feb 22 2022 at 23:37)</a>:</h4>
<p>I could add them there, but  as said, I don’t think the Lean4 maintainers want new list methods in their std</p>



<a name="272882323"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272882323" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272882323">(Feb 22 2022 at 23:38)</a>:</h4>
<p>My understanding from the <a href="https://leanprover.github.io/lean4/doc/faq.html">Lean 4 FAQ</a> is that right now unrequested pull requests are not welcome.</p>



<a name="272882379"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272882379" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272882379">(Feb 22 2022 at 23:39)</a>:</h4>
<p>OTOH the more experimental <a class="stream" data-stream-id="287929" href="/#narrow/stream/287929-mathlib4">#mathlib4</a>  repo is much more open to PRs.</p>



<a name="272884518"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272884518" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272884518">(Feb 23 2022 at 00:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60/near/272882323">said</a>:</p>
<blockquote>
<p>My understanding from the <a href="https://leanprover.github.io/lean4/doc/faq.html">Lean 4 FAQ</a> is that right now unrequested pull requests are not welcome.</p>
</blockquote>
<p>Oh.</p>



<a name="272886815"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272886815" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272886815">(Feb 23 2022 at 00:31)</a>:</h4>
<p>I guess I will make an issue to see if they would want it.</p>



<a name="272887249"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272887249" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272887249">(Feb 23 2022 at 00:36)</a>:</h4>
<p>My advice would be to leave them alone for now.</p>



<a name="272887291"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272887291" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272887291">(Feb 23 2022 at 00:37)</a>:</h4>
<p>They haven't even made an official release yet and have other things to worry about.</p>



<a name="272888974"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272888974" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272888974">(Feb 23 2022 at 00:56)</a>:</h4>
<p>Ok. Yet I wasn't bothering them in the first place. Either way,  I will keep this change until they accept pull requests</p>



<a name="272889411"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272889411" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272889411">(Feb 23 2022 at 01:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="467926">Joseph O</span> has marked this topic as resolved.</p>



<a name="272890429"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272890429" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272890429">(Feb 23 2022 at 01:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="467926">Joseph O</span> has marked this topic as unresolved.</p>



<a name="272890557"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/better%20way%20to%20write%20%60rangeStepAux%60/near/272890557" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/better.20way.20to.20write.20.60rangeStepAux.60.html#272890557">(Feb 23 2022 at 01:17)</a>:</h4>
<p>They did say I could share my idea on Zulip</p>
<p>here it is: <br>
add a <code>toList</code> method for the <code>Range</code> structure found in <code>Init.Data.Range</code> so that you can use the list methods to apply transformations on it. </p>
<p>As well as a <code>toString</code> and <code>Repr</code> instance, but that isnt important</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>