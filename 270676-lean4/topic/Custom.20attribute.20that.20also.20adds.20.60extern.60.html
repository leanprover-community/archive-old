---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/Custom.20attribute.20that.20also.20adds.20.60extern.60.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Custom.20attribute.20that.20also.20adds.20.60extern.60.html">Custom attribute that also adds `extern`</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="264655085"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Custom%20attribute%20that%20also%20adds%20%60extern%60/near/264655085" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Custom.20attribute.20that.20also.20adds.20.60extern.60.html#264655085">(Dec 13 2021 at 01:32)</a>:</h4>
<p>I'm trying to create a custom attribute that, besides serving as our own tag, also adds the <code>extern</code> tag to a declaration.<br>
<a href="https://github.com/lecopivo/lean4-karray/blob/a1631c399da2cc0496d395231ae19571065c3bb7/KArray/KArrayCompile.lean#L10">This</a> is my current attempt, but turns out this ends up <em>not</em> adding the <code>extern</code> tag to declarations.<br>
Is it possible to do so? Thanks in advance!</p>



<a name="264655500"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Custom%20attribute%20that%20also%20adds%20%60extern%60/near/264655500" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Custom.20attribute.20that.20also.20adds.20.60extern.60.html#264655500">(Dec 13 2021 at 01:42)</a>:</h4>
<p>If this cannot be done, we can get away with using two tags, but it would be more comfortable if a single tag could be used.</p>



<a name="264661139"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Custom%20attribute%20that%20also%20adds%20%60extern%60/near/264661139" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joe Hendrix <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Custom.20attribute.20that.20also.20adds.20.60extern.60.html#264661139">(Dec 13 2021 at 03:48)</a>:</h4>
<p><span class="user-mention" data-user-id="451983">@Arthur Paulino</span> I'm curious about this to.<br>
I did notice the condition <code>env.isProjectionFn declName || env.isConstructor declName</code> evaluates to false, and when I just remove the check, I get a kernel panic in <code>addExtern</code>.  Maybe there's a different way to attach an attribute to a declaration in the environment?</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>