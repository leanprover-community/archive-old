---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/Fixed.20precision.20signed.20integer.20types.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Fixed.20precision.20signed.20integer.20types.html">Fixed precision signed integer types</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="313890779"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Fixed%20precision%20signed%20integer%20types/near/313890779" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Cole Shepherd <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Fixed.20precision.20signed.20integer.20types.html#313890779">(Dec 05 2022 at 05:41)</a>:</h4>
<p>Does Lean 4 have fixed precision signed integer types? I see types like <code>UInt8</code> and <code>UInt32</code>, but no corresponding signed types.</p>



<a name="313891162"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Fixed%20precision%20signed%20integer%20types/near/313891162" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Bailey <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Fixed.20precision.20signed.20integer.20types.html#313891162">(Dec 05 2022 at 05:44)</a>:</h4>
<p>I have an implementation <a href="https://github.com/ammkrn/timelib/blob/main/Timelib/SignedInt.lean">here</a> but there aren't signed integers in core/std yet.</p>



<a name="313893857"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Fixed%20precision%20signed%20integer%20types/near/313893857" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Cole Shepherd <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Fixed.20precision.20signed.20integer.20types.html#313893857">(Dec 05 2022 at 06:12)</a>:</h4>
<p>Is this on the roadmap for core/std?</p>



<a name="313900089"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Fixed%20precision%20signed%20integer%20types/near/313900089" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Fixed.20precision.20signed.20integer.20types.html#313900089">(Dec 05 2022 at 07:06)</a>:</h4>
<p>That has to be in core, because the operations need a primitive implementation</p>



<a name="313902618"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Fixed%20precision%20signed%20integer%20types/near/313902618" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Fixed.20precision.20signed.20integer.20types.html#313902618">(Dec 05 2022 at 07:27)</a>:</h4>
<p>Conversely I thought that the idea of core was that it contained only the things needed to implement core?</p>



<a name="313902831"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Fixed%20precision%20signed%20integer%20types/near/313902831" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Fixed.20precision.20signed.20integer.20types.html#313902831">(Dec 05 2022 at 07:29)</a>:</h4>
<p>It contains things that need support / integration with the runtime and/or compiler</p>



<a name="313902962"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Fixed%20precision%20signed%20integer%20types/near/313902962" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Fixed.20precision.20signed.20integer.20types.html#313902962">(Dec 05 2022 at 07:30)</a>:</h4>
<p>obviously the compiler should know about your signed integer type so it can do e.g. constant propagation</p>



<a name="313903036"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Fixed%20precision%20signed%20integer%20types/near/313903036" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Fixed.20precision.20signed.20integer.20types.html#313903036">(Dec 05 2022 at 07:31)</a>:</h4>
<p>and it may or may not warrant support in the ABI as well, seeing as C has signed integer types</p>



<a name="314075370"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Fixed%20precision%20signed%20integer%20types/near/314075370" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik BÃ¶ving <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Fixed.20precision.20signed.20integer.20types.html#314075370">(Dec 05 2022 at 16:40)</a>:</h4>
<p>I actually designed the new constant folder to allow users to add their own folders. In theory any library can inject their own constant folder for their own numeric types without issues so thats not a blocker.</p>
<p>The other reason I can see would be that we might want to translate them to C types as you mentioned. But as mentioned in previous meetings I was hoping that ideally we might figure out a general way to have custom c integer types addable from outside the compiler.</p>



<a name="314077734"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Fixed%20precision%20signed%20integer%20types/near/314077734" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Tomas Skrivan <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Fixed.20precision.20signed.20integer.20types.html#314077734">(Dec 05 2022 at 16:51)</a>:</h4>
<p>What is Chris Bailey's approach missing? If I understand it correctly, his integers will be unboxed if possible, right? However, I'm not 100% sure what is constant propagation doing and that might be the problematic part.</p>



<a name="314078190"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Fixed%20precision%20signed%20integer%20types/near/314078190" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Tomas Skrivan <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Fixed.20precision.20signed.20integer.20types.html#314078190">(Dec 05 2022 at 16:53)</a>:</h4>
<p>Maybe the function <code>Int8.neg</code> could be written in C to avoid subtraction and modulo.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>