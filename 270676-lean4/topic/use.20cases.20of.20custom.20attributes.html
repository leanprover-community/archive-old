---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/use.20cases.20of.20custom.20attributes.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/use.20cases.20of.20custom.20attributes.html">use cases of custom attributes</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="284881646"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/use%20cases%20of%20custom%20attributes/near/284881646" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/use.20cases.20of.20custom.20attributes.html#284881646">(Jun 03 2022 at 13:53)</a>:</h4>
<p><span class="user-mention" data-user-id="130575">@Siddharth Bhat</span> and I are brainstorming about the use cases of custom attributes for the metaprogramming book and we came up with "simply recovering tagged declarations and then doing something else with them"</p>
<p>The problem is that "something else" is not super clear for us. Also, we are aware that it's possible to implement our own env modification function when those declarations are tagged with our custom attributes.</p>
<p>That said, we want to ask the community: what are interesting use cases of custom attributes you know?</p>



<a name="284881905"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/use%20cases%20of%20custom%20attributes/near/284881905" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/use.20cases.20of.20custom.20attributes.html#284881905">(Jun 03 2022 at 13:55)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#norm_cast">tactic#norm_cast</a> is an important case.</p>



<a name="284882056"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/use%20cases%20of%20custom%20attributes/near/284882056" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/use.20cases.20of.20custom.20attributes.html#284882056">(Jun 03 2022 at 13:56)</a>:</h4>
<p>It relies on the eponymous attribute.</p>



<a name="284883129"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/use%20cases%20of%20custom%20attributes/near/284883129" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/use.20cases.20of.20custom.20attributes.html#284883129">(Jun 03 2022 at 14:04)</a>:</h4>
<blockquote>
<p>what are interesting use cases of custom attributes you know?</p>
</blockquote>
<p>I can think of roughly two big classes of attributes:</p>
<ol>
<li>Attributes that generate definitions.  For example <code>@[ext] structure foo</code> generates <code>@[ext] theorem foo.ext</code>.  (Other attributes in this class are <code>to_additive</code>, <code>simps</code>, etc.)</li>
<li>Tags that influence tactics.  For example <code>@[simp]</code>.  But also <code>@[ext]</code> is used as a tag on theorems, and <code>to_additive</code> is used as a tag that influences the to-additive-translation.</li>
</ol>



<a name="284887398"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/use%20cases%20of%20custom%20attributes/near/284887398" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Tomas Skrivan <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/use.20cases.20of.20custom.20attributes.html#284887398">(Jun 03 2022 at 14:38)</a>:</h4>
<p>With the recent discussion about testing, I'm thinking about marking certain definitions with attribute <code>unit_test</code>. Then you can create a command that goes over the whole project and runs these tests.</p>



<a name="284893118"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/use%20cases%20of%20custom%20attributes/near/284893118" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Siddharth Bhat <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/use.20cases.20of.20custom.20attributes.html#284893118">(Jun 03 2022 at 15:23)</a>:</h4>
<p>Thanks! I'll try and explain these use-cases in the tutorial I'm writing: <a href="https://github.com/arthurpaulino/lean4-metaprogramming-book/pull/31">https://github.com/arthurpaulino/lean4-metaprogramming-book/pull/31</a></p>



<a name="284916486"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/use%20cases%20of%20custom%20attributes/near/284916486" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/use.20cases.20of.20custom.20attributes.html#284916486">(Jun 03 2022 at 18:28)</a>:</h4>
<p><span class="user-mention" data-user-id="130575">@Siddharth Bhat</span> we don't need to go too deep on every use case. If we can get <em>one</em> use case well explained, that should be enough for the goal of displaying part of the API as the tooling. Other use cases can be mentioned as ideas for the reader to think about.</p>



<a name="284956553"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/use%20cases%20of%20custom%20attributes/near/284956553" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Siddhartha Gadgil <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/use.20cases.20of.20custom.20attributes.html#284956553">(Jun 04 2022 at 04:05)</a>:</h4>
<p>Similar to the <code>@[ext]</code> attribute one can use <code>@[symm]</code> and <code>@[trans]</code> for symmetry and transitivity results. Indeed code using this is in my (long dormant) pull request <a href="https://github.com/leanprover-community/mathlib4/pull/253">https://github.com/leanprover-community/mathlib4/pull/253</a> to mathlib4.</p>



<a name="284956640"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/use%20cases%20of%20custom%20attributes/near/284956640" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Siddhartha Gadgil <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/use.20cases.20of.20custom.20attributes.html#284956640">(Jun 04 2022 at 04:07)</a>:</h4>
<p>Maybe the <code>symm</code> tactic can be an example of a writing a tactic too.</p>



<a name="284956973"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/use%20cases%20of%20custom%20attributes/near/284956973" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Siddhartha Gadgil <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/use.20cases.20of.20custom.20attributes.html#284956973">(Jun 04 2022 at 04:14)</a>:</h4>
<p>I can write this part if appropriate.</p>



<a name="284978529"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/use%20cases%20of%20custom%20attributes/near/284978529" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/use.20cases.20of.20custom.20attributes.html#284978529">(Jun 04 2022 at 12:56)</a>:</h4>
<p><span class="user-mention" data-user-id="266304">@Siddhartha Gadgil</span> it's not clear to me what the <code>symm</code> tactic teaches in terms of "building tactics". Maybe it's a better example of use cases of custom attributes. Let's see how the chapter will look once <span class="user-mention" data-user-id="130575">@Siddharth Bhat</span> finishes it <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="284978563"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/use%20cases%20of%20custom%20attributes/near/284978563" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Siddhartha Gadgil <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/use.20cases.20of.20custom.20attributes.html#284978563">(Jun 04 2022 at 12:57)</a>:</h4>
<p>Sure. I meant as an example of custom attributes, with a free tactic example thrown in. If there are alternative examples with custom attributes put to good use that would be fine.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>