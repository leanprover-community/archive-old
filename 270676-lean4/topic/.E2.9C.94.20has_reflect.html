---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/.E2.9C.94.20has_reflect.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20has_reflect.html">âœ” has_reflect</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="249398304"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20has_reflect/near/249398304" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20has_reflect.html#249398304">(Aug 13 2021 at 18:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110044">Chris Hughes</span> has marked this topic as resolved.</p>



<a name="249400075"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20has_reflect/near/249400075" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20has_reflect.html#249400075">(Aug 13 2021 at 19:05)</a>:</h4>
<p>What's wrong with <code>ToExpr Expr</code>? If it's buggy, should there be a github issue? (I couldn't find one.)</p>



<a name="249402274"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20has_reflect/near/249402274" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20has_reflect.html#249402274">(Aug 13 2021 at 19:23)</a>:</h4>
<p><span class="user-mention" data-user-id="128280">@Wojciech Nawrocki</span> The current implementation of <code>ToExpr Expr</code> is as the identity function, which does not match any of the other implementations of <code>ToExpr A</code>, which does "quoting" (producing a term which if typechecked would have type <code>A</code>). In other words, <code>ToExpr</code> acts like any <code>Expr</code> subterm is antiquoted, so things like <code>ToExpr (Expr x Expr)</code> end up being mangled</p>



<a name="249403373"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20has_reflect/near/249403373" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20has_reflect.html#249403373">(Aug 13 2021 at 19:32)</a>:</h4>
<p>I see, the other instances (<code>ToExpr Nat</code>, say) do all seem to quote. It's hard to say what the intended behaviour is given no docstring but this does look like a bug that should be fixed in core.</p>



<a name="249403452"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20has_reflect/near/249403452" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20has_reflect.html#249403452">(Aug 13 2021 at 19:33)</a>:</h4>
<p>The name <code>ToExpr</code> also contributes to the confusion of purpose. This is discussed in an earlier thread, let me look it up</p>



<a name="249403733"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20has_reflect/near/249403733" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20has_reflect.html#249403733">(Aug 13 2021 at 19:35)</a>:</h4>
<p><a href="#narrow/stream/270676-lean4/topic/implementing.20.60.28x.29">https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/implementing.20.60.28x.29</a></p>



<a name="249404639"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20has_reflect/near/249404639" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20has_reflect.html#249404639">(Aug 13 2021 at 19:43)</a>:</h4>
<p>Well, that instance is never used -- Lean compiles fine without it. Might be okay to just remove it for the time being.</p>



<a name="249404669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20has_reflect/near/249404669" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20has_reflect.html#249404669">(Aug 13 2021 at 19:43)</a>:</h4>
<p>(I also agree on the name being confusing.)</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>