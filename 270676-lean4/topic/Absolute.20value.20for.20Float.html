---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/Absolute.20value.20for.20Float.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html">Absolute value for Float</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="262585765"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262585765" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262585765">(Nov 24 2021 at 13:08)</a>:</h4>
<p>Do we have an absolute value function for float right now? I grepped around in the Lean4 repo for <code>abs</code> <code>absolute</code> and <code>fabs</code> a bit but couldn't find anything.</p>



<a name="262600004"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262600004" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xubai Wang <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262600004">(Nov 24 2021 at 15:05)</a>:</h4>
<p>Shall we create a new repo to hold some common utility functions for Lean types (as standard library may not be Lean 4's current focus)? It's very distractive to think about their implementation each time when we need them.</p>



<a name="262601137"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262601137" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> František Silváši <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262601137">(Nov 24 2021 at 15:14)</a>:</h4>
<p>I am more than happy to contribute an arbitrary assortment of... stuff that I write.</p>



<a name="262601494"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262601494" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262601494">(Nov 24 2021 at 15:17)</a>:</h4>
<p>Yeah having some external (collection) of libraries of things one might expect in Std seems reasonable while the focus is on mathlib4.</p>



<a name="262604148"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262604148" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262604148">(Nov 24 2021 at 15:38)</a>:</h4>
<p>Creating a stop gap <code>lean4-stdlib</code>  repository seems like a great idea to me! (I have some stuff that may be worth tossing in there as well.)</p>



<a name="262619609"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262619609" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262619609">(Nov 24 2021 at 17:39)</a>:</h4>
<p>Sooo I guess the question that remains is who makes the repo and where?</p>



<a name="262620091"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262620091" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262620091">(Nov 24 2021 at 17:43)</a>:</h4>
<p>I would suggest that folks put such things in <code>mathlib4</code> for the present. It will get split up into more packages when it reaches critical mass - I think there is plenty of space for such a thing in lean 4 - but for now it simplifies maintenance to keep things together, and at least for now the concerns about mathlib being too big don't apply since the vast majority of mathlib is still not ported</p>



<a name="262660992"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262660992" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xubai Wang <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262660992">(Nov 25 2021 at 02:28)</a>:</h4>
<p>Do these utility functions meet the purpose of <code>mathlib4</code>? </p>
<p>I think most of the stuff is about general programming (e.g. <code>Float.abs</code>, <code>String.isInfixOf</code>), so a "stdgap" and <code>mathlib4</code> will be independent of each other. </p>
<p>There is also a difference in the pace of development: a stop gap means a lot of issues for discussion and we may "port" a large number of functions from other languages. </p>
<p>We may also need a simple doc (which may go against the previous discussed <code>doc-gen4</code>, which <code>mathlib4</code> may use in the future), which can show users what it provides and how these functions are similar to those in other languages (e.g. <code>Float.abs</code> to <code>fabs</code>, <code>String.isInfixOf</code> to Haskell's <code>isInfixOf</code> and other languages' <code>String.contains</code>), so programmers can quickly find what they need. A simple lake script would suffice.</p>



<a name="262662186"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262662186" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262662186">(Nov 25 2021 at 02:58)</a>:</h4>
<blockquote>
<p>I think most of the stuff is about general programming (e.g. Float.abs, String.isInfixOf), so a "stdgap" and mathlib4 will be independent of each other. </p>
</blockquote>
<p>I've said this on many occasions, but mathlib was always intended to be an std-like library. The math stuff came later, and came to dominate due to our particular clientele, but mathlib already contains lots of programmy stuff like lists, hashmaps and other data structures. For various reasons, I believe that mathlib4 will be able to deliver on the CS goals much more effectively than mathlib could, so expect to see much more of this programmy stuff in mathlib4.</p>



<a name="262662507"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262662507" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262662507">(Nov 25 2021 at 03:04)</a>:</h4>
<blockquote>
<p>There is also a difference in the pace of development: a stop gap means a lot of issues for discussion and we may "port" a large number of functions from other languages. </p>
</blockquote>
<p>I don't see how this conflicts with mathlib4's model at all.</p>
<blockquote>
<p>We may also need a simple doc (which may go against the previous discussed doc-gen4, which mathlib4 may use in the future), which can show users what it provides and how these functions are similar to those in other languages (e.g. Float.abs to fabs, String.isInfixOf to Haskell's isInfixOf and other languages' String.contains), so programmers can quickly find what they need. A simple lake script would suffice.</p>
</blockquote>
<p>No, that sounds very much in scope for what we would want doc-gen4 to support. Doc-gen is not all that different from the documentation generators in other programming languages, and all the things you mention sound fairly standard as far as documentation goes, but don't really even need any support from the tool - you write what you want in the doc comment and it renders that.</p>



<a name="262663322"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262663322" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262663322">(Nov 25 2021 at 03:25)</a>:</h4>
<p>I loved contributing proofs of the validity of the natural number parser to mathlib, which is extremely CS and practical operational semantics, no deep mathematical content. It taught me a lot about how mathlib is set up to make any proving easier.</p>



<a name="262664303"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262664303" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262664303">(Nov 25 2021 at 03:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/270676-lean4/topic/Absolute.20value.20for.20Float/near/262620091">said</a>:</p>
<blockquote>
<p>I would suggest that folks put such things in <code>mathlib4</code> for the present.</p>
</blockquote>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/270676-lean4/topic/Absolute.20value.20for.20Float/near/262662186">said</a>:</p>
<blockquote>
<p>I've said this on many occasions, but mathlib was always intended to be an std-like library. The math stuff came later, and came to dominate due to our particular clientele, but mathlib already contains lots of programmy stuff like lists, hashmaps and other data structures.</p>
</blockquote>
<p>As I have stated elsewhere I am very much opposed to this proposal. I think the situation should be the other way around. The stdlib should be focused on the CS stuff with some maths sprinkled in when necessary / useful. Mathlib can then expand on this library in its own way.</p>
<p>Some problems with sticking this stuff in mathlib:</p>
<ul>
<li>It does not abide by CS style in a lot of its code and it has linters to enforce this (e.g., braces).</li>
<li>It  puts a lot of things into the root namespace that many user packages may not want (and would be forced to acquire if they wanted the stdlib and it was merged with mathlib) whereas the stdlib would have (most) everything under <code>Std</code> (fitting much better with standard CS packaging style)</li>
<li>There would be a large clash in scope (with a hefty mix of expert mathematicians and computer scientists) that would be very confusing to  new users (a CS person would likely be put off by the mathematical branding and large amount of mathematics related PRs to such a joint repo). A split between mathlib and stdlib would keep the balance clearer (with mostly mathematicians and some CS people maintaining mathlib and mostly CS people and  maybe some mathematicians maintaining the stdlib).</li>
</ul>
<p>While I will grant that <span class="user-mention" data-user-id="110049">@Mario Carneiro</span> is just suggesting to do this "at present" (and not all these criticism currently apply to mathlib4), I personally think it is starting off on the wrong foot and thought it worthwhile to mention why.</p>



<a name="262665201"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262665201" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262665201">(Nov 25 2021 at 04:09)</a>:</h4>
<p>I didn't say mathlib, I said mathlib4, which is for the present a very different library</p>



<a name="262665281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262665281" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262665281">(Nov 25 2021 at 04:11)</a>:</h4>
<p>Once we start moving material from mathlib to mathlib4 in bulk, we will need to split this material off. But importantly, the stuff to split off will not all be added stuff, at least half of it will be material currently in mathlib. So that's why I'm suggesting to mix it together and find a natural split point later, because the two don't coincide</p>



<a name="262665638"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262665638" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262665638">(Nov 25 2021 at 04:22)</a>:</h4>
<p>Even if a std++ library is developed as a separate package from lean's POV, I would still want it to be developmentally integrated with mathlib. For example, one would expect data structures in std++ being proven correct in mathlib, which puts some design constraints on the std++ stuff (e.g. no private, no <code>partial</code> except as a stopgap solution), plus any changes in one would have to be reflected in the other in order to preserve overall cohesiveness</p>



<a name="262665742"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262665742" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262665742">(Nov 25 2021 at 04:24)</a>:</h4>
<blockquote>
<p>It does not abide by CS style in a lot of its code and it has linters to enforce this (e.g., braces).</p>
</blockquote>
<p>What is "CS style"? I want mathlib and std++ to follow the same style guide, determined based on how lean 4 syntax works and with consensus among <em>all</em> lean 4 users. Diverging styles helps no one and splits the ecosystem</p>



<a name="262673287"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262673287" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262673287">(Nov 25 2021 at 07:20)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/270676-lean4/topic/Absolute.20value.20for.20Float/near/262665742">said</a>:</p>
<blockquote>
<p>with consensus among <em>all</em> lean 4 users</p>
</blockquote>
<p>This is infeasible. I do not believe there is any way that we are going to get all users to agree on a single style to lint. Even Sebastian and Leo disagree on style in some areas (e.g., parentheses around the argument to <code>match</code>).</p>



<a name="262673386"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262673386" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262673386">(Nov 25 2021 at 07:22)</a>:</h4>
<p>Furthermore, a lot of developers have very strong opinions on style. So while it may be feasible to get a consistent style for a single project with a clear lead team which can enforce the style on others (e.g., mathlib, the Lean core, etc.), once there are multiple packages with different lead maintainer, they are inevitably going to require different styles.</p>



<a name="262673511"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262673511" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262673511">(Nov 25 2021 at 07:25)</a>:</h4>
<p>It's certainly possible to have a language style guide, even when there are many users. Just consider the style guide of any major language (rustfmt comes to mind). Plenty of people will disagree on the fine points, but not enough to make the proposition worthless</p>



<a name="262673567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262673567" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262673567">(Nov 25 2021 at 07:26)</a>:</h4>
<p>Given that we will have a round-tripping pretty printer, and at least early on the entirety of the mathlib port will be run through that pretty printer, in some sense the style guide should basically be documentation of the pretty printer.</p>



<a name="262673581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262673581" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262673581">(Nov 25 2021 at 07:27)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span>  true, however, most language style guides tend to be rather flexible and general and linters based around them are customizable whereas most project style guides are much more specific and fixed.</p>



<a name="262673592"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262673592" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262673592">(Nov 25 2021 at 07:27)</a>:</h4>
<p>Frankly I couldn't care less about where the braces go. On the other hand, the uniformity in mathlib is just wonderful for easy reading of others' code.</p>



<a name="262673633"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262673633" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262673633">(Nov 25 2021 at 07:28)</a>:</h4>
<p>I, on the other hand, care immensely about where braces go (to a certain extent).</p>



<a name="262673638"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262673638" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262673638">(Nov 25 2021 at 07:28)</a>:</h4>
<p>that's <em>entirely</em> language dependent. Style guides vary hugely in the extent to which they allow flexibility</p>



<a name="262673643"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262673643" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262673643">(Nov 25 2021 at 07:28)</a>:</h4>
<p>some are just AST pretty printers</p>



<a name="262673645"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262673645" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262673645">(Nov 25 2021 at 07:28)</a>:</h4>
<p>and I think lean will be one of these</p>



<a name="262673670"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262673670" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262673670">(Nov 25 2021 at 07:29)</a>:</h4>
<p>Obviously an inflexible pretty printer has to be very good, or else you will get riots in the streets</p>



<a name="262673726"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262673726" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262673726">(Nov 25 2021 at 07:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/270676-lean4/topic/Absolute.20value.20for.20Float/near/262673638">said</a>:</p>
<blockquote>
<p>that's <em>entirely</em> language dependent. Style guides vary hugely in the extent to which they allow flexibility</p>
</blockquote>
<p>true, but they are also varying hugely as to whether programs within the language follow the style guide (e.g., Python).</p>



<a name="262673741"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262673741" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262673741">(Nov 25 2021 at 07:30)</a>:</h4>
<p>People who are 'opinionated' about style will generally want to opt out of the whole endeavor, but they still have to play by the rules when it comes to contributing to "that one big project"</p>



<a name="262673768"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262673768" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262673768">(Nov 25 2021 at 07:32)</a>:</h4>
<p>Yes, hence why I don't contribute to mathlib. <span aria-label="stuck out tongue wink" class="emoji emoji-1f61c" role="img" title="stuck out tongue wink">:stuck_out_tongue_wink:</span> (That is half a joke and half not.)</p>



<a name="262673827"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262673827" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262673827">(Nov 25 2021 at 07:33)</a>:</h4>
<p>I would, however, very much like to contribute to the standard library.</p>



<a name="262673860"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262673860" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262673860">(Nov 25 2021 at 07:33)</a>:</h4>
<p>While it is possible I am alone on this matter, I suspect that is unlikely the case.</p>



<a name="262673865"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262673865" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262673865">(Nov 25 2021 at 07:33)</a>:</h4>
<p>My guess is that you <span class="user-mention" data-user-id="315577">@Mac</span> are not going to be satisfied with any style guide we come up with, even if you are taking part in the discussion, so I think you should approach this with the understanding that you won't be using the style guide and don't try to filibuster things too much</p>



<a name="262673962"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262673962" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262673962">(Nov 25 2021 at 07:35)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> And I would do so, <em>if</em> we were just talking about mathlib. However, the current trend of this discussion seems to imply that you are suggesting enforcing this style guide on all core Lean projects (of which, I should note, Lake is currently one), which is a very different matter.</p>



<a name="262674037"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262674037" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262674037">(Nov 25 2021 at 07:36)</a>:</h4>
<p>but the big projects absolutely have to be using the style guide, I don't see how that's even an option</p>



<a name="262674057"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262674057" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262674057">(Nov 25 2021 at 07:36)</a>:</h4>
<p>Hence my argument about what the style guide should be...</p>



<a name="262674063"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262674063" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xubai Wang <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262674063">(Nov 25 2021 at 07:36)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/270676-lean4/topic/Absolute.20value.20for.20Float/near/262662186">said</a>:</p>
<blockquote>
<p>I've said this on many occasions, but mathlib was always intended to be an std-like library.</p>
</blockquote>
<p>I have another question, do you think these functions will eventually go to <code>mathlib4</code> rather than <code>Std</code>(I think it's the latter one)? A separate repo may be easier to cope with when lean is moving towards a better <code>Std</code>, without changing the <code>mathlib4</code></p>



<a name="262674076"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262674076" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262674076">(Nov 25 2021 at 07:37)</a>:</h4>
<p>Not necessarily all lean projects, just the big ones that need community support</p>



<a name="262674172"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262674172" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262674172">(Nov 25 2021 at 07:38)</a>:</h4>
<p><span class="user-mention" data-user-id="414345">@Xubai Wang</span> <code>Std</code> is in a bit of an awkward position because it is part of the lean bootstrap. I don't know whether what I'm calling std++ will be able to merge with <code>Std</code>, but it would be nice if we could do something like that</p>



<a name="262674237"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262674237" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262674237">(Nov 25 2021 at 07:39)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> that  was previously the plan as discussed in the original proposal for the standard library (<a href="https://github.com/leanprover/lean4/issues/528">#528</a>)</p>



<a name="262674240"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262674240" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262674240">(Nov 25 2021 at 07:39)</a>:</h4>
<p>So as I see it now, in the far future there will probably be three packages, for <code>Std</code>, <code>StdExtra</code> and <code>Mathlib</code> (<code>Mathlib</code> might also break into more packages, we'll see), unless we find a way to merge <code>StdExtra</code> into <code>Std</code></p>



<a name="262674299"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262674299" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262674299">(Nov 25 2021 at 07:40)</a>:</h4>
<p><code>StdExtra</code> might also be split into more packages if needed</p>



<a name="262674306"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262674306" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262674306">(Nov 25 2021 at 07:40)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> what is the problem with the <code>stdlib</code> just adding more stuff to <code>Std</code>?</p>



<a name="262674345"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262674345" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262674345">(Nov 25 2021 at 07:41)</a>:</h4>
<p>Well, last time we talked about this you were pretty adamantly against that kind of namespace pollution</p>



<a name="262674434"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262674434" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262674434">(Nov 25 2021 at 07:42)</a>:</h4>
<p>I do think that it would make more sense for the current <code>Std</code> to be renamed to <code>StdCore</code> and <code>StdExtra</code> -&gt; <code>Std</code> though</p>



<a name="262674460"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262674460" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262674460">(Nov 25 2021 at 07:43)</a>:</h4>
<p>but none of this changes my views on integration between <code>Std</code> and <code>Mathlib</code></p>



<a name="262674476"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262674476" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262674476">(Nov 25 2021 at 07:43)</a>:</h4>
<p>this is not a license to have it run off and be completely disconnected from mathlib</p>



<a name="262674489"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262674489" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262674489">(Nov 25 2021 at 07:43)</a>:</h4>
<p>Yes, but the idea here is that <code>stdlib</code> will (be the canonical owner of <code>Std</code>, so I don't have a problem with it in this case. Also as a core Lean library, I am willingly to give it more leeway than I would a user library.</p>



<a name="262674573"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262674573" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262674573">(Nov 25 2021 at 07:44)</a>:</h4>
<p>Are you saying that <code>StdExtra</code> should also be shipped with lean?</p>



<a name="262674588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262674588" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262674588">(Nov 25 2021 at 07:44)</a>:</h4>
<p>Ideally, Lake would also eventually depend on the <code>stdlib</code> (or at the very least make it available in the lakefile).</p>



<a name="262674611"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262674611" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262674611">(Nov 25 2021 at 07:45)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span>  that was the original plan, yes (again see <a href="https://github.com/leanprover/lean4/issues/528">#528</a>).</p>



<a name="262674629"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262674629" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262674629">(Nov 25 2021 at 07:45)</a>:</h4>
<p>I suppose that can work, but it's going to be pretty hefty</p>



<a name="262674682"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262674682" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262674682">(Nov 25 2021 at 07:46)</a>:</h4>
<p>Most languages ship with a standard library, I don't think Lean doing would be all too weird.</p>



<a name="262674701"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262674701" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262674701">(Nov 25 2021 at 07:46)</a>:</h4>
<p>well, languages differ on how full featured they want the standard library to be. Are we following the java/python model or the rust model?</p>



<a name="262674746"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262674746" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262674746">(Nov 25 2021 at 07:47)</a>:</h4>
<p>The advantage of the <code>StdExtra</code> package is that you can basically choose either one</p>



<a name="262674789"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262674789" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262674789">(Nov 25 2021 at 07:48)</a>:</h4>
<p>I would assume closer to the Java model. Especially given the current less than pure modularity of Lean.</p>



<a name="262674825"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262674825" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262674825">(Nov 25 2021 at 07:49)</a>:</h4>
<p>but it's true that lakefiles have some unique constraints that would encourage putting more stuff in the base package</p>



<a name="262677128"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262677128" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xubai Wang <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262677128">(Nov 25 2021 at 08:22)</a>:</h4>
<p><span class="user-mention silent" data-user-id="315577">Mac</span> <a href="#narrow/stream/270676-lean4/topic/Absolute.20value.20for.20Float/near/262674588">said</a>:</p>
<blockquote>
<p>Ideally, Lake would also eventually depend on the <code>stdlib</code> (or at the very least make it available in the lakefile).</p>
</blockquote>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/270676-lean4/topic/Absolute.20value.20for.20Float/near/262674825">said</a>:</p>
<blockquote>
<p>but it's true that lakefiles have some unique constraints that would encourage putting more stuff in the base package</p>
</blockquote>
<p>It's important to make all packages(build dependencies) available  in the lakefile (although the current import mechanism does not support this). So if there is a <code>StdExtra</code>, it doesn't matter whether it's shipped with lean (if build dependency is available).</p>



<a name="262677217"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262677217" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262677217">(Nov 25 2021 at 08:23)</a>:</h4>
<p>All packages? That's a big chicken and egg problem</p>



<a name="262677384"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262677384" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262677384">(Nov 25 2021 at 08:25)</a>:</h4>
<p>I would like to keep lakefiles to a bootstrap-like collection of packages only. You shouldn't need that much infrastructure to describe what you want to build. Worst case scenario you describe how to download some package to power a second-tier lakefile that can do fancier stuff</p>



<a name="262677622"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262677622" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xubai Wang <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262677622">(Nov 25 2021 at 08:28)</a>:</h4>
<p>But what if when e.g. we want to parse markdown, run cargo, or call emscripten as build process or lake script? It's ridiculous to rewrite everything in a single lakefile, which should be a package otherwise.</p>



<a name="262677837"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262677837" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262677837">(Nov 25 2021 at 08:31)</a>:</h4>
<p>isn't the lakefile for that just a bunch of "call process X, call process Y" etc?</p>



<a name="262677947"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262677947" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262677947">(Nov 25 2021 at 08:32)</a>:</h4>
<p>probably you won't be able to parse markdown with the default set of packages but like I said you can have a lakefile to build another lakefile</p>



<a name="262678043"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262678043" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262678043">(Nov 25 2021 at 08:33)</a>:</h4>
<p>the point is that we don't want to have to resolve dependencies in order to resolve dependencies</p>



<a name="262678109"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262678109" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262678109">(Nov 25 2021 at 08:34)</a>:</h4>
<p>the lakefile should be as "declarative" as possible, and not do too much fancy stuff</p>



<a name="262682514"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262682514" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262682514">(Nov 25 2021 at 09:18)</a>:</h4>
<p>Let's please not have the monstrosities that <code>build.sbt</code> seems to inevitably turn into.</p>



<a name="262682667"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262682667" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262682667">(Nov 25 2021 at 09:19)</a>:</h4>
<p>What's build.sbt?</p>



<a name="262683956"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262683956" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262683956">(Nov 25 2021 at 09:34)</a>:</h4>
<p><a href="https://en.wikipedia.org/wiki/Sbt_(software)">https://en.wikipedia.org/wiki/Sbt_(software)</a></p>



<a name="262684017"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262684017" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262684017">(Nov 25 2021 at 09:35)</a>:</h4>
<p>oh, here's a fun fact:</p>
<blockquote>
<p>The sbt project uses sbt to build itself, and considers that dogfooding is a positive feature. To the Debian project, however, that is considered a circular dependency, that they try to minimize. As a result, sbt is not yet in Debian.</p>
</blockquote>
<p>That's definitely what you don't want in a build tool</p>



<a name="262684129"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262684129" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262684129">(Nov 25 2021 at 09:36)</a>:</h4>
<p>I wonder if sbt supports building projects that require themselves</p>



<a name="262687371"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262687371" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262687371">(Nov 25 2021 at 10:11)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/270676-lean4/topic/Absolute.20value.20for.20Float/near/262684017">said</a>:</p>
<blockquote>
<p>oh, here's a fun fact:</p>
<blockquote>
<p>The sbt project uses sbt to build itself, and considers that dogfooding is a positive feature. To the Debian project, however, that is considered a circular dependency, that they try to minimize. As a result, sbt is not yet in Debian.</p>
</blockquote>
<p>That's definitely what you don't want in a build tool</p>
</blockquote>
<p>Are you sure? I use Lake to build Lake these days. <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span></p>



<a name="262688269"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262688269" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262688269">(Nov 25 2021 at 10:20)</a>:</h4>
<p>It appears even good old GNU make builds itself: <a href="https://git.savannah.gnu.org/cgit/make.git/tree/README.git">https://git.savannah.gnu.org/cgit/make.git/tree/README.git</a> so I don't think that should be tooo much of an issue?</p>



<a name="262691503"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Absolute%20value%20for%20Float/near/262691503" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Absolute.20value.20for.20Float.html#262691503">(Nov 25 2021 at 10:55)</a>:</h4>
<blockquote>
<p>Let's please not have the monstrosities that build.sbt seems to inevitably turn into.</p>
</blockquote>
<p>I've maintained a largeish scala project for a couple of years, and in my experience the main problem with sbt is not that people write large build scripts but the fact that the sbt dsl sucks.  Virtually nothing works like you'd expect from vanilla scala.  There's dynamically scoped variables which have several namespaces (project, target, etc.).  Go-to-definition is broken because it takes you to the variable declaration instead of anything useful.  Dependencies are implicit (iirc?).  Pretty much everything (writing files, resolving paths, etc.) uses sbt-specific functions and not Scala ones.  Did I mention that there are two+ different dsls? See here for a longer discussion on the many ways that sbt sucks: <a href="https://www.lihaoyi.com/post/SowhatswrongwithSBT.html">https://www.lihaoyi.com/post/SowhatswrongwithSBT.html</a></p>
<p>In other words, as long as lakefiles remain reasonably close to vanilla lean and all the standard tooling works then I'm confident that even large lakefiles can stay maintainable.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>