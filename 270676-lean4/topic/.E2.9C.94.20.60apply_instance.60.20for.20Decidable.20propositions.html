---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/.E2.9C.94.20.60apply_instance.60.20for.20Decidable.20propositions.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20.60apply_instance.60.20for.20Decidable.20propositions.html">✔ `apply_instance` for Decidable propositions</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="247871385"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20%60apply_instance%60%20for%20Decidable%20propositions/near/247871385" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anand Rao <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20.60apply_instance.60.20for.20Decidable.20propositions.html#247871385">(Aug 01 2021 at 18:39)</a>:</h4>
<p>Sorry for the late reply, I don't check Zulip often. <br>
I tried the <code>show</code> tactic, but I couldn't get it working for some reason. I've looked up the LEAN3 syntax of this tactic, but I haven't been able to figure out a way to translate it to the corresponding LEAN4 syntax without the commas.</p>
<p>Thank you for the explanation about the kernel reduction. I'll keep that in mind.</p>



<a name="247871444"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20%60apply_instance%60%20for%20Decidable%20propositions/near/247871444" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20.60apply_instance.60.20for.20Decidable.20propositions.html#247871444">(Aug 01 2021 at 18:40)</a>:</h4>
<p><span class="user-mention" data-user-id="303675">@Anand Rao</span> Do you have a <a href="https://leanprover-community.github.io/mwe.html">#mwe</a> showing what you tried?</p>



<a name="247871738"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20%60apply_instance%60%20for%20Decidable%20propositions/near/247871738" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anand Rao <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20.60apply_instance.60.20for.20Decidable.20propositions.html#247871738">(Aug 01 2021 at 18:48)</a>:</h4>
<p><a href="/user_uploads/3121/h4lcidTWtiPNkqmrvkxPJP31/mwe.lean">mwe.lean</a></p>



<a name="247871743"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20%60apply_instance%60%20for%20Decidable%20propositions/near/247871743" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anand Rao <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20.60apply_instance.60.20for.20Decidable.20propositions.html#247871743">(Aug 01 2021 at 18:48)</a>:</h4>
<p>I have created one now</p>



<a name="247871755"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20%60apply_instance%60%20for%20Decidable%20propositions/near/247871755" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anand Rao <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20.60apply_instance.60.20for.20Decidable.20propositions.html#247871755">(Aug 01 2021 at 18:49)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="c1">-- LEAN4 version : nightly-2021-07-17</span>

<span class="kd">structure</span> <span class="n">test</span> <span class="n">where</span>
  <span class="n">a</span> <span class="o">:</span> <span class="n">Nat</span>
  <span class="n">b</span> <span class="o">:</span> <span class="n">Nat</span>

<span class="kn">namespace</span> <span class="n">test</span>
  <span class="kd">def</span> <span class="n">le</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">test</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="n">x.a</span> <span class="bp">≤</span> <span class="n">y.a</span>
<span class="kd">end</span> <span class="n">test</span>

<span class="kd">instance</span> <span class="o">:</span> <span class="n">LE</span> <span class="n">test</span> <span class="n">where</span>
  <span class="n">le</span> <span class="o">:=</span> <span class="n">test.le</span>

<span class="kd">instance</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">test</span><span class="o">)</span> <span class="o">:</span> <span class="n">Decidable</span> <span class="o">(</span><span class="n">x</span> <span class="bp">≤</span> <span class="n">y</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="k">have</span> <span class="o">:</span> <span class="o">((</span><span class="n">x</span> <span class="bp">≤</span> <span class="n">y</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">x.a</span> <span class="bp">≤</span> <span class="n">y.a</span><span class="o">))</span> <span class="o">:=</span> <span class="n">rfl</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">this</span><span class="o">]</span>
  <span class="n">exact</span> <span class="n">inferInstance</span>

<span class="c">/-</span><span class="cm"> This does not work for me</span>
<span class="cm">instance (x y : test) : Decidable (x ≤ y) := by</span>
<span class="cm">  show ((x ≤ y) = (x.a ≤ y.a))</span>
<span class="cm">  exact inferInstance</span>
<span class="cm">-/</span>
</code></pre></div>



<a name="247871814"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20%60apply_instance%60%20for%20Decidable%20propositions/near/247871814" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20.60apply_instance.60.20for.20Decidable.20propositions.html#247871814">(Aug 01 2021 at 18:50)</a>:</h4>
<p>That <code>show</code> doesn't work because your goal is not defeq to <code>(x ≤ y) = (x.a ≤ y.a)</code></p>



<a name="247871817"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20%60apply_instance%60%20for%20Decidable%20propositions/near/247871817" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20.60apply_instance.60.20for.20Decidable.20propositions.html#247871817">(Aug 01 2021 at 18:50)</a>:</h4>
<p><code>show</code> is for changing the goal to something defeq</p>



<a name="247871820"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20%60apply_instance%60%20for%20Decidable%20propositions/near/247871820" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20.60apply_instance.60.20for.20Decidable.20propositions.html#247871820">(Aug 01 2021 at 18:50)</a>:</h4>
<p>Instead, you would write <code>show Decidable (x.a ≤ y.a)</code></p>



<a name="247871837"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20%60apply_instance%60%20for%20Decidable%20propositions/near/247871837" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20.60apply_instance.60.20for.20Decidable.20propositions.html#247871837">(Aug 01 2021 at 18:51)</a>:</h4>
<p>By the way, there is a shortcut version of <code>inferInstance</code> just for this:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">test</span><span class="o">)</span> <span class="o">:</span> <span class="n">Decidable</span> <span class="o">(</span><span class="n">x</span> <span class="bp">≤</span> <span class="n">y</span><span class="o">)</span> <span class="o">:=</span> <span class="n">inferInstanceAs</span> <span class="o">(</span><span class="n">Decidable</span> <span class="o">(</span><span class="n">x.a</span> <span class="bp">≤</span> <span class="n">y.a</span><span class="o">))</span>
</code></pre></div>



<a name="247871910"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20%60apply_instance%60%20for%20Decidable%20propositions/near/247871910" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anand Rao <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20.60apply_instance.60.20for.20Decidable.20propositions.html#247871910">(Aug 01 2021 at 18:53)</a>:</h4>
<p>Oh, I see. Thank you very much for this. It looks like I was understanding the tactic completely wrong.</p>



<a name="247871975"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20%60apply_instance%60%20for%20Decidable%20propositions/near/247871975" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anand Rao <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20.60apply_instance.60.20for.20Decidable.20propositions.html#247871975">(Aug 01 2021 at 18:55)</a>:</h4>
<p>The one-line version is really convenient. Thank you!</p>



<a name="247871980"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20%60apply_instance%60%20for%20Decidable%20propositions/near/247871980" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20.60apply_instance.60.20for.20Decidable.20propositions.html#247871980">(Aug 01 2021 at 18:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="303675">Anand Rao</span> has marked this topic as resolved.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>