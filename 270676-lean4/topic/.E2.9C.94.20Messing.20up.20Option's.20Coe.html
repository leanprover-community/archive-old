---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/.E2.9C.94.20Messing.20up.20Option's.20Coe.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20Messing.20up.20Option's.20Coe.html">âœ” Messing up Option's Coe</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="279680481"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20Messing%20up%20Option%27s%20Coe/near/279680481" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20Messing.20up.20Option's.20Coe.html#279680481">(Apr 21 2022 at 13:32)</a>:</h4>
<p>Your Coe instance can be combined with itself an unbounded number of times, synthesizing larger and larger types. You need to use the right Coe class for instances with an arbitrary source/target type: <a href="https://github.com/leanprover/lean4/blob/d8ad343885d87f6ab6715ee443f0db826d1286d1/src/Init/Coe.lean#L92-L96">https://github.com/leanprover/lean4/blob/d8ad343885d87f6ab6715ee443f0db826d1286d1/src/Init/Coe.lean#L92-L96</a></p>



<a name="279681413"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20Messing%20up%20Option%27s%20Coe/near/279681413" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marcus Rossel <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20Messing.20up.20Option's.20Coe.html#279681413">(Apr 21 2022 at 13:40)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110024">Sebastian Ullrich</span> <a href="#narrow/stream/270676-lean4/topic/Messing.20up.20Option's.20Coe/near/279680481">said</a>:</p>
<blockquote>
<p>Your Coe instance can be combined with itself an unbounded number of times, synthesizing larger and larger types. You need to use the right Coe class for instances with an arbitrary source/target type: <a href="https://github.com/leanprover/lean4/blob/d8ad343885d87f6ab6715ee443f0db826d1286d1/src/Init/Coe.lean#L92-L96">https://github.com/leanprover/lean4/blob/d8ad343885d87f6ab6715ee443f0db826d1286d1/src/Init/Coe.lean#L92-L96</a></p>
</blockquote>
<p>So assuming I would tend to want a <code>Numbered X</code> to be coerced to an <code>X</code> first, and then have other coercions applied, I would have to use <code>CoeHead</code>?</p>



<a name="279681714"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20Messing%20up%20Option%27s%20Coe/near/279681714" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20Messing.20up.20Option's.20Coe.html#279681714">(Apr 21 2022 at 13:43)</a>:</h4>
<p>Yes, exactly</p>



<a name="279681744"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20Messing%20up%20Option%27s%20Coe/near/279681744" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20Messing.20up.20Option's.20Coe.html#279681744">(Apr 21 2022 at 13:43)</a>:</h4>
<p><span class="user-mention silent" data-user-id="372804">Marcus Rossel</span> has marked this topic as resolved.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>