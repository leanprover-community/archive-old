---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html">Port NNG to Lean 4</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="224330756"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/224330756" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#224330756">(Jan 28 2021 at 14:14)</a>:</h4>
<p>Is it possible to port NNG to Lean 4? Will we do it?</p>



<a name="224331433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/224331433" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#224331433">(Jan 28 2021 at 14:19)</a>:</h4>
<p>I would imagine that porting the Lean code would be a very pleasant exercise, and indeed a few weeks ago someone posted to this Zulip a bunch of NNG stuff in Lean 4. I have no clue about how one turns Lean 4 code into a browser game though so cannot comment on that. It would probably be not unfair to say that this is not high priority for me right now (although of course if someone else wants to take it on I'm not going to be complaining!). However once we're at the stage where we are expecting newcomers to use Lean 4 rather than Lean 3 (and I have no clue about when this will happen, I am adopting a "wait and see" approach here because I have no idea about any of the subtleties involved) then I would imagine that this would become a much higher priority, because NNG seems to work as a way of attracting people with a mathematical interest to Lean.</p>



<a name="224332130"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/224332130" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#224332130">(Jan 28 2021 at 14:24)</a>:</h4>
<p>step 1: figure out how to compile Lean 4 to Wasm<br>
step 2: figure out how to connect the Lean 4 server with a web editor<br>
step 3: remove "<strong>and don't forget the comma</strong>"</p>



<a name="224332201"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/224332201" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#224332201">(Jan 28 2021 at 14:25)</a>:</h4>
<p>you forgot all semicolons in your message</p>



<a name="224332228"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/224332228" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#224332228">(Jan 28 2021 at 14:25)</a>:</h4>
<p>I noticed <code>rw</code> doesn't like to apply <del><code>refl</code></del> <code>rfl</code> afterwards now, so Kevin will be happy about that!</p>



<a name="224332384"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/224332384" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#224332384">(Jan 28 2021 at 14:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204/near/224332201">said</a>:</p>
<blockquote>
<p>you forgot all semicolons in your message</p>
</blockquote>
<p>I prefer whitespace sensitivity</p>



<a name="224332437"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/224332437" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#224332437">(Jan 28 2021 at 14:26)</a>:</h4>
<p>So we see!</p>



<a name="292178394"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/292178394" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#292178394">(Aug 05 2022 at 16:35)</a>:</h4>
<p>(I also use it to tex and lean from my iPad)</p>



<a name="292204840"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/292204840" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexander Bentkamp <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#292204840">(Aug 05 2022 at 20:39)</a>:</h4>
<p>I had worked on the idea of running Lean on a server a while ago, and now I've worked on it a little more. Here is the result so far: <a href="https://lean-browser.herokuapp.com/">https://lean-browser.herokuapp.com/</a>. It may take a while to load because I am not paying for the server. As soon as you see a little "1" in the top left corner, write some Lean code. You can hover over anything that gets underlined. There is no info view yet... And the whole thing seems to collapse after some time of inactivity. But it definitely seems fast enough to work with, at least from Europe where the server is located.</p>



<a name="292205241"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/292205241" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexander Bentkamp <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#292205241">(Aug 05 2022 at 20:43)</a>:</h4>
<p>Oh, and I haven't worked out how to handle multiple users at once. So if you get output that doesn't seem to belong to you, somebody else is playing at the same time <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span></p>



<a name="292205494"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/292205494" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexander Bentkamp <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#292205494">(Aug 05 2022 at 20:45)</a>:</h4>
<p>Here is the source code: <a href="https://github.com/abentkamp/lean-browser">https://github.com/abentkamp/lean-browser</a></p>



<a name="293975065"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/293975065" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#293975065">(Aug 17 2022 at 20:58)</a>:</h4>
<p>Alexander Bentkamp <a href="#narrow/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204/near/292205241">said</a>:</p>
<blockquote>
<p>Oh, and I haven't worked out how to handle multiple users at once. So if you get output that doesn't seem to belong to you, somebody else is playing at the same time <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span></p>
</blockquote>
<p>I'm interested in playing a bit with this idea but I realize I have no idea how stateful web applications work. How can I tell my Apache server that whenever it gets a request on a certain url it should check whether this user already runs Lean and either talk to the corresponding Lean process or start one? Is that something that FastCGI can do? How does something like GitPod handles this? Then how does GitPod or a similar application decides to kill any process? Does it simply wait for a certain time after the last request?</p>



<a name="294022549"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/294022549" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexander Bentkamp <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#294022549">(Aug 18 2022 at 07:00)</a>:</h4>
<p>I've fixed this issue by now. I am using websockets, which is a protocol that can identify different clients much more easily than HTTP. I think Gitpod is using websockets, too. I don't know FastCGI.</p>



<a name="294022641"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/294022641" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexander Bentkamp <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#294022641">(Aug 18 2022 at 07:01)</a>:</h4>
<p>With HTTP, you would need to assign an identifier to each client that the client would include with each request. The identifier should be hard to guess so that you can't steal other people's identity.</p>



<a name="294053023"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/294053023" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#294053023">(Aug 18 2022 at 10:59)</a>:</h4>
<p><span class="user-mention" data-user-id="129120">@Alexander Bentkamp</span>  Do you have any documentation to recommend about all that?</p>



<a name="294056189"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/294056189" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexander Bentkamp <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#294056189">(Aug 18 2022 at 11:21)</a>:</h4>
<p>It depends on what you would like to use to implement the server. I used NodeJS. Here is a tutorial about that: <a href="https://dev.to/codesphere/getting-started-with-web-sockets-in-nodejs-49n0">https://dev.to/codesphere/getting-started-with-web-sockets-in-nodejs-49n0</a></p>



<a name="294056465"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/294056465" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexander Bentkamp <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#294056465">(Aug 18 2022 at 11:22)</a>:</h4>
<p>Here is documentation about the client side: <a href="https://developer.mozilla.org/de/docs/Web/API/WebSocket">https://developer.mozilla.org/de/docs/Web/API/WebSocket</a><br>
And here documentation about the (NodeJS) server side: <a href="https://www.npmjs.com/package/ws">https://www.npmjs.com/package/ws</a></p>



<a name="294058678"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/294058678" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#294058678">(Aug 18 2022 at 11:37)</a>:</h4>
<p>So NodeJS is directly taking connections from the outside world without going through Apache or Nginx or anything like that?</p>



<a name="294058868"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/294058868" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#294058868">(Aug 18 2022 at 11:38)</a>:</h4>
<p>It's a pity that we can't do that directly in Lean 4 yet. But maybe František Silváši will tell us it actually can.</p>



<a name="294062462"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/294062462" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexander Bentkamp <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#294062462">(Aug 18 2022 at 12:03)</a>:</h4>
<p>You don't need Apache or Nginx. I also used express (<a href="https://www.npmjs.com/package/express">https://www.npmjs.com/package/express</a>) in the prototype above, although maybe that wasn't even necessary.</p>



<a name="294062622"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/294062622" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexander Bentkamp <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#294062622">(Aug 18 2022 at 12:04)</a>:</h4>
<p>Implementing the server directly in Lean would be nice :-)</p>



<a name="294065940"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/294065940" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Siddhartha Gadgil <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#294065940">(Aug 18 2022 at 12:24)</a>:</h4>
<p>I assume that will come when someone writes ffi bindings to something like <a href="https://github.com/cesanta/mongoose">https://github.com/cesanta/mongoose</a></p>



<a name="294066255"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/294066255" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Siddhartha Gadgil <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#294066255">(Aug 18 2022 at 12:25)</a>:</h4>
<p>Or maybe <a href="https://www.gnu.org/software/libmicrohttpd/">https://www.gnu.org/software/libmicrohttpd/</a> which seems smaller.</p>



<a name="294066328"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/294066328" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexander Bentkamp <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#294066328">(Aug 18 2022 at 12:26)</a>:</h4>
<p>I think <span class="user-mention" data-user-id="364929">@František Silváši</span> is actually doing it the hard way and implements the protocol from scratch :-).</p>



<a name="294066392"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/294066392" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Siddhartha Gadgil <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#294066392">(Aug 18 2022 at 12:26)</a>:</h4>
<p>I am familiar with the JVM world so the specific libraries mentioned above are just from naive googleing.</p>



<a name="294066638"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/294066638" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexander Bentkamp <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#294066638">(Aug 18 2022 at 12:28)</a>:</h4>
<p>Anyway, for a usable Lean web interface, it's mostly the client side that needs more love. The server just forwards messages.</p>



<a name="294066875"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/294066875" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexander Bentkamp <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#294066875">(Aug 18 2022 at 12:29)</a>:</h4>
<p>And of course, there is the problem that someone would need to pay for the server.</p>



<a name="294077828"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/294077828" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#294077828">(Aug 18 2022 at 13:33)</a>:</h4>
<p>This is just a proof of concept, isn't it? Because you didn't do security verification to prevent Lean from damaging the system, right?</p>



<a name="294078076"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/294078076" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#294078076">(Aug 18 2022 at 13:34)</a>:</h4>
<p>It is possible to write programs in Lean. Programs in Lean can do anything programs in other languages can.</p>



<a name="294078974"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/294078974" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexander Bentkamp <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#294078974">(Aug 18 2022 at 13:40)</a>:</h4>
<p>Hm, yeah, good point. Any ideas how to prevent that?</p>



<a name="294079613"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/294079613" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#294079613">(Aug 18 2022 at 13:43)</a>:</h4>
<p>run lean in a container</p>



<a name="294079641"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/294079641" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#294079641">(Aug 18 2022 at 13:43)</a>:</h4>
<p>Is that enough?</p>



<a name="294079734"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/294079734" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#294079734">(Aug 18 2022 at 13:44)</a>:</h4>
<p>I think that's the standard approach for projects like <a href="http://tio.run">tio.run</a> and <a href="http://godbolt.org">godbolt.org</a></p>



<a name="294079828"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/294079828" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#294079828">(Aug 18 2022 at 13:44)</a>:</h4>
<p>you also need resource limits</p>



<a name="294079992"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/294079992" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#294079992">(Aug 18 2022 at 13:45)</a>:</h4>
<p>This question has come up other times and the conclusion is often "run it in a VM/container". I don't have other ideas.</p>
<p>I have memories of someone mentioning that they were trying to build an inoffensive version of Lean 4 without <code>IO</code></p>



<a name="294080044"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/294080044" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#294080044">(Aug 18 2022 at 13:45)</a>:</h4>
<p>yeah I strongly recommend against internal sandboxing here</p>



<a name="294080177"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/294080177" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#294080177">(Aug 18 2022 at 13:46)</a>:</h4>
<p>it's way too hard to get right and if you fail your server is hosed</p>



<a name="294080256"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/294080256" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#294080256">(Aug 18 2022 at 13:46)</a>:</h4>
<p>If it is not in the browser, then I would just make sure to have a kill switch and nothing of value on the machine.</p>



<a name="294080395"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/294080395" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#294080395">(Aug 18 2022 at 13:47)</a>:</h4>
<p>at the very least the machine has credentials to communicate with the website</p>



<a name="294083995"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/294083995" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#294083995">(Aug 18 2022 at 14:06)</a>:</h4>
<p><a href="https://go.googlesource.com/playground/+/refs/heads/master">Source code</a> for the playground at <a href="http://go.dev/play">go.dev/play</a>. In case anyone wants an example.</p>



<a name="301790596"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/301790596" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#301790596">(Oct 01 2022 at 09:18)</a>:</h4>
<p>I'm pleased to announce that an early prototype of the first five levels of the natural number game is very temporarily available on <a href="http://pat.perso.ens-lyon.org/nng4/">http://pat.perso.ens-lyon.org/nng4/</a>. I know that several things are missing (for instance you can easily type unicode characters if you want to right to left rewrite). This was mostly a learning project for me (Lean 4 programming of course but also React that I wanted to learn for future  widget writing purposes). It is also a technological demo.</p>



<a name="301790672"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/301790672" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#301790672">(Oct 01 2022 at 09:19)</a>:</h4>
<p>Note that, when you play the game, Lean runs on my home computer acting as a server. I won't keep this server running forever. So if you read the above message late and can't see anything but a circular loading icon in the middle of a webpage then it means the server is switched off.</p>
<p>EDIT: There is a small issue currently. If you see the circular loading thing forever when the server is meant to be running then you can open <code>about:config</code>  in Firefox and toggle <code>network.websocket.allowInsecureFromHTTPS</code> to true.</p>



<a name="301790772"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/301790772" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#301790772">(Oct 01 2022 at 09:20)</a>:</h4>
<p>Please see <a href="https://github.com/PatrickMassot/lean4-game-server">https://github.com/PatrickMassot/lean4-game-server</a>, <a href="https://github.com/PatrickMassot/NNG4">https://github.com/PatrickMassot/NNG4</a> and <a href="https://github.com/PatrickMassot/nng4-interface">https://github.com/PatrickMassot/nng4-interface</a> for a lot more details.</p>



<a name="301790875"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/301790875" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#301790875">(Oct 01 2022 at 09:21)</a>:</h4>
<p>/me can't see anything but a circular loading icon in the middle of a webpage</p>



<a name="301791282"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/301791282" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#301791282">(Oct 01 2022 at 09:25)</a>:</h4>
<p>This is extremely weird. Can you try reloading the page?</p>



<a name="301791294"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/301791294" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#301791294">(Oct 01 2022 at 09:25)</a>:</h4>
<p>It worked yesterday evening with Kevin</p>



<a name="301791427"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/301791427" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#301791427">(Oct 01 2022 at 09:26)</a>:</h4>
<p><code>Ctrl-F5</code> doesn't help</p>



<a name="301791714"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/301791714" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#301791714">(Oct 01 2022 at 09:29)</a>:</h4>
<p>Same here.</p>



<a name="301791761"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/301791761" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#301791761">(Oct 01 2022 at 09:29)</a>:</h4>
<p>Tried with firefox and chrome</p>



<a name="301792806"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/301792806" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#301792806">(Oct 01 2022 at 09:39)</a>:</h4>
<p><code>Firefox can’t establish a connection to the server at wss://pat.perso.ens-lyon.org:8765/.</code></p>



<a name="301792981"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/301792981" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#301792981">(Oct 01 2022 at 09:40)</a>:</h4>
<p>I'll need to fix that but in the mean time you can open <code>about:config</code>  in Firefox and toggle <code>network.websocket.allowInsecureFromHTTPS</code></p>



<a name="301793316"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/301793316" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#301793316">(Oct 01 2022 at 09:43)</a>:</h4>
<p>It still seems to try to upgrade the connection, probably because of HTTPS-only mode... will try from another browser.</p>



<a name="301793356"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/301793356" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#301793356">(Oct 01 2022 at 09:43)</a>:</h4>
<p>It now works for Johan</p>



<a name="301793484"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/301793484" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#301793484">(Oct 01 2022 at 09:45)</a>:</h4>
<p>To be clear, what happens is that the website is running over https but it tries to talk to Lean through a non-secure websocket connection. I'll have to understand how to use a secure websocket connection.</p>



<a name="301793979"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/301793979" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#301793979">(Oct 01 2022 at 09:49)</a>:</h4>
<p>It still doesn't work here, (either because I'm on a newer version of FF beta than Johan or because my HTTPS-only mode is on the maximum security which I think isn't the default) but what does work is:</p>
<p><a href="/user_uploads/3121/0ausZVyJp4dmeom7ROpXFMpC/Screen-Shot-2022-10-01-at-10.48.23.png">Screen-Shot-2022-10-01-at-10.48.23.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/3121/0ausZVyJp4dmeom7ROpXFMpC/Screen-Shot-2022-10-01-at-10.48.23.png" title="Screen-Shot-2022-10-01-at-10.48.23.png"><img src="/user_uploads/3121/0ausZVyJp4dmeom7ROpXFMpC/Screen-Shot-2022-10-01-at-10.48.23.png"></a></div><p>i.e. just whitelisting your domain to allow non-HTTPS connections. And it's cool!</p>



<a name="301794106"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/301794106" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#301794106">(Oct 01 2022 at 09:50)</a>:</h4>
<p>I really like the game-play. The way you get hints at a very granular level along the way is super nice!</p>



<a name="301794159"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/301794159" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#301794159">(Oct 01 2022 at 09:51)</a>:</h4>
<p>That granularity was a very important target. It was one of main pains of the original NNG.</p>



<a name="301794257"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/301794257" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#301794257">(Oct 01 2022 at 09:52)</a>:</h4>
<p>You can see how tactic-state-triggered messages are registered at <a href="https://github.com/PatrickMassot/NNG4/blob/main/NNG/Levels/Level2.lean#L31-L32">https://github.com/PatrickMassot/NNG4/blob/main/NNG/Levels/Level2.lean#L31-L32</a> for instance.</p>



<a name="301802533"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/301802533" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexander Bentkamp <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#301802533">(Oct 01 2022 at 10:59)</a>:</h4>
<p>Wow, this is beautiful. Great work!</p>
<p>Do you have a way to get a server from your university? I assume I will get access to a university server next week. If you won't get one, I'd go ahead and host it there. It would be a pity to take it down, even if it's just a demo now.</p>



<a name="301807416"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/301807416" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#301807416">(Oct 01 2022 at 11:40)</a>:</h4>
<p>It would make more sense to get a server from the Hoskinson center (cc <span class="user-mention" data-user-id="110865">@Jeremy Avigad</span> ). But this is a bit premature. We need people to work a bit more on the interface (at least implementing unicode abbreviations and navigating the proof) and more people porting levels. Note that I stopped porting after the first level using induction.</p>



<a name="301807590"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/301807590" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#301807590">(Oct 01 2022 at 11:41)</a>:</h4>
<p>Then before making wide announcements we would need someone who understand security to have a look at this.</p>



<a name="301808614"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/301808614" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexander Bentkamp <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#301808614">(Oct 01 2022 at 11:48)</a>:</h4>
<p>Ok, right, hosting it at the Hoskinson center would be even better.</p>
<p>It seems that security is not that much of an issue here because the interface to Lean is very restricted. You can just run a handful of tactics, not execute arbitrary Lean code. Anyway, sandboxing the Lean instances might still be a good idea, as Mario proposed above.</p>



<a name="301808800"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/301808800" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#301808800">(Oct 01 2022 at 11:50)</a>:</h4>
<p>Sure, this is the main reason why I'm not allowing to run any tactic. I also prevents "cheating".</p>



<a name="301817537"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/301817537" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> pcpthm <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#301817537">(Oct 01 2022 at 12:58)</a>:</h4>
<p>I found a way to cheat</p>
<div class="spoiler-block"><div class="spoiler-header">
</div><div class="spoiler-content" aria-hidden="true">
<p>rewrite [] &lt;;&gt; sorry</p>
</div></div>
<p>Maybe the server should check the proof for axioms?</p>



<a name="301821359"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/301821359" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#301821359">(Oct 01 2022 at 13:28)</a>:</h4>
<p>The tactic detection is indeed really basic. This is why I wrote this should be strengthened before advertising it more widely.</p>



<a name="301906803"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/301906803" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexander Bentkamp <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#301906803">(Oct 02 2022 at 08:44)</a>:</h4>
<p>I tried to build nng4-interface locally. I get:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">$</span> <span class="n">npm</span> <span class="n">run</span> <span class="n">build</span>

<span class="bp">&gt;</span> <span class="n">nng_interface</span><span class="bp">@</span><span class="mi">0</span><span class="bp">.</span><span class="mi">1</span><span class="bp">.</span><span class="mi">0</span> <span class="n">build</span>
<span class="bp">&gt;</span> <span class="n">react</span><span class="bp">-</span><span class="n">scripts</span> <span class="n">build</span>

<span class="n">Could</span> <span class="n">not</span> <span class="n">find</span> <span class="n">a</span> <span class="n">required</span> <span class="n">file.</span>
  <span class="n">Name</span><span class="o">:</span> <span class="n">index.html</span>
  <span class="n">Searched</span> <span class="k">in</span><span class="o">:</span> <span class="bp">/</span><span class="n">Users</span><span class="bp">/</span><span class="n">alex</span><span class="bp">/</span><span class="n">Projects</span><span class="bp">/</span><span class="n">nng4</span><span class="bp">-</span><span class="n">interface</span><span class="bp">/</span><span class="n">public</span>
</code></pre></div>



<a name="301908294"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/301908294" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexander Bentkamp <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#301908294">(Oct 02 2022 at 09:03)</a>:</h4>
<p>Ok, got it to work using this standard React app <code>index.html</code> file: <a href="https://github.com/react-cosmos/create-react-app-example/blob/master/public/index.html">https://github.com/react-cosmos/create-react-app-example/blob/master/public/index.html</a></p>



<a name="301919771"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/301919771" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#301919771">(Oct 02 2022 at 10:59)</a>:</h4>
<p>Oops, I forgot the <code>public</code> folder. Indeed I don't think I touched anything in that folder since launching the react app creation script. I just pushed it, sorry about the inconvenience.</p>



<a name="301953552"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/301953552" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexander Bentkamp <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#301953552">(Oct 02 2022 at 16:35)</a>:</h4>
<p>No problem, thanks!</p>



<a name="302144924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302144924" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302144924">(Oct 03 2022 at 20:40)</a>:</h4>
<p>Could anyone have a look at whether <a href="https://pat.perso.ens-lyon.org/nng4ssl/">https://pat.perso.ens-lyon.org/nng4ssl/</a> works without switching off any security thing?</p>



<a name="302144985"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302144985" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302144985">(Oct 03 2022 at 20:40)</a>:</h4>
<p>It seems to work fine for me</p>



<a name="302145023"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302145023" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302145023">(Oct 03 2022 at 20:41)</a>:</h4>
<p>And did you test the previous version?</p>



<a name="302145038"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302145038" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302145038">(Oct 03 2022 at 20:41)</a>:</h4>
<p>No :-/</p>



<a name="302145104"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302145104" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302145104">(Oct 03 2022 at 20:41)</a>:</h4>
<p>Ok, it's still useful information but it would be even better to have someone who had to change something to get the previous version.</p>



<a name="302145194"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302145194" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302145194">(Oct 03 2022 at 20:42)</a>:</h4>
<p>The issue is that it depends on web browser paranoia setting.</p>



<a name="302145228"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302145228" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302145228">(Oct 03 2022 at 20:42)</a>:</h4>
<p>I'll try again with https everywhere turned on</p>



<a name="302145281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302145281" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302145281">(Oct 03 2022 at 20:42)</a>:</h4>
<p>On Saturday night Kevin had no trouble accessing the non-secure version but on Sunday morning Johan, Julian and Riccardo couldn't.</p>



<a name="302145282"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302145282" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302145282">(Oct 03 2022 at 20:42)</a>:</h4>
<p>Works for me also (Safari).</p>



<a name="302145352"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302145352" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302145352">(Oct 03 2022 at 20:43)</a>:</h4>
<p>Also did not test the previous version.</p>



<a name="302145353"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302145353" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302145353">(Oct 03 2022 at 20:43)</a>:</h4>
<p><span class="user-mention silent" data-user-id="243562">Adam Topaz</span> <a href="#narrow/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204/near/302145228">said</a>:</p>
<blockquote>
<p>I'll try again with https everywhere turned on</p>
</blockquote>
<p>https everywhere on and it still works</p>



<a name="302145578"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302145578" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302145578">(Oct 03 2022 at 20:45)</a>:</h4>
<p>So now I have all the default paranoid settings from firefox turned on (https everywhere, full tracker blocking) as well as ublock origin turned on, and things still look good!</p>



<a name="302145932"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302145932" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302145932">(Oct 03 2022 at 20:48)</a>:</h4>
<p>I tried it on iPadOS Safari and it works there. In my experience, iPadOS has the most stringent security defaults.</p>



<a name="302147022"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302147022" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302147022">(Oct 03 2022 at 20:55)</a>:</h4>
<p>Nice. For people interested in hosting their own game, I pushed a sample <a href="https://github.com/PatrickMassot/NNG4/blob/main/gameserver_ssl.py">https://github.com/PatrickMassot/NNG4/blob/main/gameserver_ssl.py</a> creating a wss server talking to Lean.</p>



<a name="302147291"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302147291" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302147291">(Oct 03 2022 at 20:57)</a>:</h4>
<p>By the way <span class="user-mention" data-user-id="110099">@Frantisek Silvasi</span> the above 50 lines of python are the only non-Lean piece of the Lean 4  NNG prototype. If your planned WebSocket lib in Lean can do that then we could have a 100% Lean setup.</p>



<a name="302147857"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302147857" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302147857">(Oct 03 2022 at 21:00)</a>:</h4>
<p>I would be interested if any real Lean 4 programmer could have a look at what I did at <a href="https://github.com/PatrickMassot/lean4-game-server">https://github.com/PatrickMassot/lean4-game-server</a>. It was a nice exercise to do this myself (with help of answers to my questions here of course), but now I would be very happy to see the official textbook solution.</p>



<a name="302219556"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302219556" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> František Silváši 🦉 <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302219556">(Oct 04 2022 at 09:10)</a>:</h4>
<p>The project's being worked on, albeit slowly - I'll be happy to open source this mid-development if someone's interested, although maybe this is a good time to ping <span class="user-mention" data-user-id="414345">@Xubai Wang</span> to see if they're willing to put some license on: <a href="https://github.com/xubaiw/BaseN.lean/">https://github.com/xubaiw/BaseN.lean/</a> :).</p>
<p>Nevertheless, the current state of affairs is such that one can handshake/negotiate a WebSocket connection and I am in the process of finishing/debugging the basic frame structure that this connection requires. I can make few promises wrt. timelines here as this is very much a 'weekend evening' project, but it's not dead.</p>



<a name="302222221"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302222221" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302222221">(Oct 04 2022 at 09:27)</a>:</h4>
<p>It's not really blocking anything, but it would be nice for Leo's talks to be able to say that Lean 4 goes all the way from checking proofs in the game to serving websocket connections.</p>



<a name="302229767"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302229767" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302229767">(Oct 04 2022 at 10:20)</a>:</h4>
<p>We should not abandon the goal of making all this work without a server either though :) . In fact a custom UI like this should make that quite a bit easier since replicating the LSP editor interface always seemed like the biggest hurdle.</p>



<a name="302240063"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302240063" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302240063">(Oct 04 2022 at 11:30)</a>:</h4>
<p>What do you mean by "without a server"? Do you mean running Lean directly in the browser?</p>



<a name="302240685"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302240685" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302240685">(Oct 04 2022 at 11:35)</a>:</h4>
<p>Yes. You're not using the language server, so "export these specific Lean functions to (single-threaded) JS/WASM" is all you need, right?</p>



<a name="302240790"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302240790" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302240790">(Oct 04 2022 at 11:35)</a>:</h4>
<p>Plus "load this restricted set of imports from bundled .olean files". The size of .olean files (Init+Lean) was another in-browser worry, but that shouldn't be an issue for your case I assume.</p>



<a name="302248839"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302248839" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrés Goens <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302248839">(Oct 04 2022 at 12:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110031">Patrick Massot</span> <a href="#narrow/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204/near/302145104">said</a>:</p>
<blockquote>
<p>Ok, it's still useful information but it would be even better to have someone who had to change something to get the previous version.</p>
</blockquote>
<p>this works for me and the previous version didn't! (and it's really cool)</p>



<a name="302250168"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302250168" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302250168">(Oct 04 2022 at 12:33)</a>:</h4>
<p>I love the geeky RPG vibes of this version. Well done!</p>



<a name="302267557"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302267557" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302267557">(Oct 04 2022 at 14:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110024">Sebastian Ullrich</span> <a href="#narrow/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204/near/302240685">said</a>:</p>
<blockquote>
<p>Yes. You're not using the language server, so "export these specific Lean functions to (single-threaded) JS/WASM" is all you need, right?</p>
</blockquote>
<p>I don't really know. What I I think I need is exactly what is in <a href="https://github.com/PatrickMassot/lean4-game-server">https://github.com/PatrickMassot/lean4-game-server</a></p>



<a name="302267957"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302267957" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302267957">(Oct 04 2022 at 14:04)</a>:</h4>
<p><span class="user-mention silent" data-user-id="451983">Arthur Paulino</span> <a href="#narrow/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204/near/302250168">said</a>:</p>
<blockquote>
<p>I love the geeky RPG vibes of this version. Well done!</p>
</blockquote>
<p>Some of it is already in the original NNG, but I wanted to emphasize that Lean 4 meta programming allows to use Lean in a way that doesn't look like Lean, and this is part of it. As explained in <a href="https://github.com/PatrickMassot/NNG4#some-game-play-choices">https://github.com/PatrickMassot/NNG4#some-game-play-choices</a>, this is completely specific to NNG and not baked in the game server.</p>



<a name="302384118"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302384118" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Lovett <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302384118">(Oct 05 2022 at 04:23)</a>:</h4>
<p>I'm also interested in doing the nng as a lean4 sample that runs in vscode  (or in gitpod), see <a href="https://github.com/leanprover/lean4-samples/tree/clovett/NaturalNumberGame/NaturalNumberGame">https://github.com/leanprover/lean4-samples/tree/clovett/NaturalNumberGame/NaturalNumberGame</a>.</p>



<a name="302400567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302400567" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302400567">(Oct 05 2022 at 07:27)</a>:</h4>
<p>What is the motivation for that version?</p>



<a name="302527893"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302527893" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Lovett <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302527893">(Oct 05 2022 at 19:18)</a>:</h4>
<p>mostly trying to decouple from the problem of "web hosting" so we can make progress on the actual content, and providing a place for the code to be checked in so multiple folks can work on it...   I saw you posted this link <a href="http://pat.perso.ens-lyon.org/nng4/">http://pat.perso.ens-lyon.org/nng4/</a> but the web page you posted didn't respond.  Ah, but now I see you have a repo already at <a href="https://github.com/PatrickMassot/NNG4">https://github.com/PatrickMassot/NNG4</a> so I'll check that out.  Ignore my branch then, unless you want to make this an official lean4-sample.  My branch has more of additional world too I think.  Should I port that to your repo? are you actively working on this or should I continue with my branch? Your TacticDocs stuff is interesting... I see you are also working on <a href="https://github.com/PatrickMassot/lean4-game-server">https://github.com/PatrickMassot/lean4-game-server</a>, so I'll check that out also...</p>



<a name="302533838"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302533838" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302533838">(Oct 05 2022 at 19:55)</a>:</h4>
<p>You can try <a href="http://pat.perso.ens-lyon.org/nng4ssl/">http://pat.perso.ens-lyon.org/nng4ssl/</a> that has less SSL issues.</p>



<a name="302534174"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302534174" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302534174">(Oct 05 2022 at 19:57)</a>:</h4>
<p>And indeed contributing more levels to <a href="https://github.com/PatrickMassot/NNG4">https://github.com/PatrickMassot/NNG4</a> is very welcome. I stopped at the first inductive proof because I was interested in building the framework, not porting levels. I hope Kevin will easily find people interested in porting levels. Also the game server currently does not put levels into worlds. This refinement would be very easy to add, but doing it from the beginning would have been a distraction only.</p>



<a name="302537316"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302537316" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Lovett <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302537316">(Oct 05 2022 at 20:16)</a>:</h4>
<p>ha ha, it works, that's pretty fun, thanks.  I found that the <code>rfl</code> after <code>rewrite</code> was unnecessary because <code>rewrite</code> now does a <code>rfl</code> automatically, but your version of the game still acts like the <code>rfl</code> is needed... also the instructions talk about typing "\l" to get a left arrow, but that doesn't work in your Invocation box...</p>



<a name="302538022"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302538022" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302538022">(Oct 05 2022 at 20:20)</a>:</h4>
<p>removing the <code>rfl</code> after <code>rw</code> is one of the changes that was made in the original NNG to make it more orthogonal for teaching purposes</p>



<a name="302539546"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302539546" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Lovett <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302539546">(Oct 05 2022 at 20:30)</a>:</h4>
<p>and I take it level 5 is not complete yet? It doesn't let me "cast an induction spell"...<br>
<a href="/user_uploads/3121/J5l-KeJKYYAzxJvcm0SYwN7F/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/J5l-KeJKYYAzxJvcm0SYwN7F/image.png" title="image.png"><img src="/user_uploads/3121/J5l-KeJKYYAzxJvcm0SYwN7F/image.png"></a></div>



<a name="302539601"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302539601" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302539601">(Oct 05 2022 at 20:31)</a>:</h4>
<p>That's because you didn't read the explanation about how to cast that spell</p>



<a name="302539852"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302539852" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302539852">(Oct 05 2022 at 20:32)</a>:</h4>
<p>The game server is really meant for single line tactics. The new-style induction tactic is completely orthogonal to that, so I wrote a custom induction tactic. And for that game in particular <code>induction</code> won't work anyway because the natural numbers that are used are <em>not</em> an inductive type, see the discussion at <a href="https://github.com/PatrickMassot/NNG4#some-game-play-choices">https://github.com/PatrickMassot/NNG4#some-game-play-choices</a></p>



<a name="302541058"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302541058" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302541058">(Oct 05 2022 at 20:41)</a>:</h4>
<p>The blurb at the end of level 3 mentions <code>rewrite ← h</code> which is problematic both because of the lack of unicode and the missing brackets</p>



<a name="302541301"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302541301" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302541301">(Oct 05 2022 at 20:43)</a>:</h4>
<p><span aria-label="sad" class="emoji emoji-2639" role="img" title="sad">:sad:</span> I tried to find all those missing brackets but obviously they were <em>everywhere</em> since you would never put them for a single rewrite in Lean 3.</p>



<a name="302541424"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302541424" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302541424">(Oct 05 2022 at 20:44)</a>:</h4>
<p>why not have the NNG version be just <code>rw h</code> with no brackets and no option for multiple rewrite?</p>



<a name="302541852"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302541852" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302541852">(Oct 05 2022 at 20:46)</a>:</h4>
<p>in level 5 if you write <code>induction_on n with n ih</code> it gives an "unexpected end of input" error</p>



<a name="302541871"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302541871" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Lovett <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302541871">(Oct 05 2022 at 20:46)</a>:</h4>
<p><code>rw h</code> doesn't work for me in VS Code with latest lean4 ...? It seems I have to write <code>rw [h]</code></p>



<a name="302541913"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302541913" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302541913">(Oct 05 2022 at 20:47)</a>:</h4>
<p>that's the lean 3 syntax</p>



<a name="302541944"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302541944" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302541944">(Oct 05 2022 at 20:47)</a>:</h4>
<p>you were allowed to omit the brackets if there was only one rewrite</p>



<a name="302541959"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302541959" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302541959">(Oct 05 2022 at 20:47)</a>:</h4>
<p>in lean 4 this was removed</p>



<a name="302542068"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302542068" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Lovett <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302542068">(Oct 05 2022 at 20:48)</a>:</h4>
<p>That seems to go counter to your goal in lean4-game-server of "This discrepancy led to some issues down the road where people got confused by ways tactic have subtly different behaviors in NNG and regular Lean"</p>



<a name="302542074"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302542074" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302542074">(Oct 05 2022 at 20:48)</a>:</h4>
<p>I fixed those issues (sorry for people who were playing, I restarted the server)</p>



<a name="302542115"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302542115" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302542115">(Oct 05 2022 at 20:48)</a>:</h4>
<p>What goes counter to my goal?</p>



<a name="302542181"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302542181" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302542181">(Oct 05 2022 at 20:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204/near/302541424">said</a>:</p>
<blockquote>
<p>why not have the NNG version be just <code>rw h</code> with no brackets and no option for multiple rewrite?</p>
</blockquote>
<p>I also considered doing that. But since <code>rewrite</code> already existed it was faster to simply use it. I also wasn't sure how to shadow the existing <code>rw</code> tactic.</p>



<a name="302542224"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302542224" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302542224">(Oct 05 2022 at 20:49)</a>:</h4>
<p>I assumed that's why you spelled your induction tactic <code>induction_on</code> as well</p>



<a name="302542246"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302542246" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302542246">(Oct 05 2022 at 20:49)</a>:</h4>
<p>Yes</p>



<a name="302542304"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302542304" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302542304">(Oct 05 2022 at 20:50)</a>:</h4>
<p>I believe <code>(priority := high)</code> on the syntax should suffice</p>



<a name="302542359"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302542359" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Lovett <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302542359">(Oct 05 2022 at 20:50)</a>:</h4>
<blockquote>
<p>What goes counter to my goal?</p>
</blockquote>
<p>teaching to tactics that you invented just for the game...</p>



<a name="302542433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302542433" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302542433">(Oct 05 2022 at 20:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="434989">Chris Lovett</span> <a href="#narrow/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204/near/302542068">said</a>:</p>
<blockquote>
<p>That seems to go counter to your goal in lean4-game-server of "This discrepancy led to some issues down the road where people got confused by ways tactic have subtly different behaviors in NNG and regular Lean"</p>
</blockquote>
<p>I think you misunderstood the proposed solution here. Patrick's approach is not to better stick with Lean4, but on the contrary to make a clear distinction between the game and Lean4 so that there is no confusion possible</p>



<a name="302542436"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302542436" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302542436">(Oct 05 2022 at 20:51)</a>:</h4>
<p>Renaming the induction tactic also helps if people want to switch to regular Lean. This way it's clear it's a different tactic.</p>



<a name="302542640"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302542640" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302542640">(Oct 05 2022 at 20:52)</a>:</h4>
<p>It might be easier to use a custom syntax category if you want to deviate from <code>tactic</code> in general</p>



<a name="302542974"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302542974" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Lovett <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302542974">(Oct 05 2022 at 20:54)</a>:</h4>
<p>so do you plan to stick with single line input for the whole game? If so, perhaps my "vs code" version of NNG serves a different goal for folks who want to learn Lean while editing actual lean programs, doing the NNG levels (exercises) as they go with the power of the full lean editor at their finger tips - this is what I personally would prefer but perhaps this then is for a different audience.  Question is though would this cause confusion having 2 versions?  Should I rename my "lean4-sample" perhaps just call it "NaturalNumbers" or something... since it doesn't really have all the fun "game" elements that the online version has.</p>



<a name="302543224"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302543224" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302543224">(Oct 05 2022 at 20:56)</a>:</h4>
<p>Indeed I think it's better to have a clear distinction between the game and more serious stuff. As I explained in the README, Kevin really wanted this to be a game from the beginning. It became a common first Lean learning step by accident.</p>



<a name="302545064"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302545064" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302545064">(Oct 05 2022 at 21:08)</a>:</h4>
<p>Yes we were all surprised about how well it took off.</p>



<a name="302563177"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302563177" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Lovett <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302563177">(Oct 05 2022 at 23:51)</a>:</h4>
<p>Ok, I've renamed the sample to just "Natural Numbers" and prepared it as a leanink style book (removing the game elements).  See <a href="https://github.com/leanprover/lean4-samples/tree/main/NaturalNumbers">https://github.com/leanprover/lean4-samples/tree/main/NaturalNumbers</a>.  This can be hosted on a simple github pages site like this: <a href="https://lovettsoftware.com/NaturalNumbers/index.html">https://lovettsoftware.com/NaturalNumbers/index.html</a></p>



<a name="302567681"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302567681" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Lovett <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302567681">(Oct 06 2022 at 00:42)</a>:</h4>
<p>Now I'm running into an interesting bug in my version and I'm not sure why, I'm finding I need to add this theorem <code>theorem zero_is_0 : MyNat.zero = 0 := by rfl</code> and use it in some places like in <a href="file:///D:/git/leanprover/lean4-samples/NaturalNumbers/docs/AdditionWorld/Level4.lean.html">Addition Level 4</a> and I'm not sure why.  Is there something missing from MyNat definition that makes it so that I have to do this? I think I implemented OfNat properly because I can do this <code>#eval (zero : MyNat) -- 0</code>, so I'm confused why I need this hack?</p>



<a name="302568230"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302568230" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302568230">(Oct 06 2022 at 00:50)</a>:</h4>
<p>When you just apply the induction principle for <code>Nat</code>, you end up with the actual constructors of the type, unadorned with any <code>OfNat</code> wrapper. The original NNG had to deal with this as well</p>



<a name="302568248"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302568248" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302568248">(Oct 06 2022 at 00:50)</a>:</h4>
<p>this is part of why NNG overrides the implementation of <code>induction</code> to handle this</p>



<a name="302568613"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302568613" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302568613">(Oct 06 2022 at 00:55)</a>:</h4>
<p>the regular <code>induction</code> tactic has the same behavior:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">Nat</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">induction</span> <span class="n">x</span>
<span class="c1">-- case zero</span>
<span class="c1">-- ⊢ Nat.zero = Nat.zero</span>
<span class="c1">-- case succ</span>
<span class="c1">-- n✝: ℕ</span>
<span class="c1">-- : n✝ = n✝</span>
<span class="c1">-- ⊢ Nat.succ n✝ = Nat.succ n✝</span>
</code></pre></div>



<a name="302570959"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302570959" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Lovett <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302570959">(Oct 06 2022 at 01:32)</a>:</h4>
<p>Ok, so it sounds like my having to add <code>rw [zero_is_0]</code> is not a bug, but things are working normally then.  If so, I will try and add some explanation for this.  I also found that the <code>simp</code> example didn't work in Lean 4 with the <a href="https://lovettsoftware.com/NaturalNumbers/AdditionWorld/Level6.lean.html">Level 6 example</a> of <code>(((a+b)+c)+d)+e=(c+((b+e)+a))+d</code>, is this because I have not completed the AddMonoid  instances and does that somehow extend the power of <code>simp</code>?</p>



<a name="302571205"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302571205" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302571205">(Oct 06 2022 at 01:37)</a>:</h4>
<p>you need to simp with <code>add_assoc</code>, <code>add_comm</code>, <code>add_left_comm</code> either by passing them to the <code>simp</code> call or marking the lemmas as <code>@[simp]</code></p>



<a name="302571429"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302571429" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Lovett <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302571429">(Oct 06 2022 at 01:40)</a>:</h4>
<p>I already have this: <code>attribute [simp]  zero_add add_assoc add_comm succ_add add_succ succ_eq_add_one one_eq_succ_zero add_right_comm</code> but there is no add_left_com in the original NNG?</p>



<a name="302572455"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302572455" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Lovett <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302572455">(Oct 06 2022 at 01:57)</a>:</h4>
<p>But interestingly, when I got to multiplication level 9 that example worked:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="n">e</span> <span class="o">:</span> <span class="n">MyNat</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(((</span><span class="n">a</span><span class="bp">*</span><span class="n">b</span><span class="o">)</span><span class="bp">*</span><span class="n">c</span><span class="o">)</span><span class="bp">*</span><span class="n">d</span><span class="o">)</span><span class="bp">*</span><span class="n">e</span><span class="bp">=</span><span class="o">(</span><span class="n">c</span><span class="bp">*</span><span class="o">((</span><span class="n">b</span><span class="bp">*</span><span class="n">e</span><span class="o">)</span><span class="bp">*</span><span class="n">a</span><span class="o">))</span><span class="bp">*</span><span class="n">d</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">simp</span>
</code></pre></div>



<a name="302572751"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302572751" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Lovett <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302572751">(Oct 06 2022 at 02:01)</a>:</h4>
<p>and this has a left_comm <code>attribute [simp] mul_assoc mul_comm mul_left_comm</code> so I went back to level6 and changed it to this, and now it works too :-) </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">attribute</span> <span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="n">add_assoc</span> <span class="n">add_comm</span> <span class="n">add_left_comm</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="n">e</span> <span class="o">:</span> <span class="n">MyNat</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(((</span><span class="n">a</span><span class="bp">+</span><span class="n">b</span><span class="o">)</span><span class="bp">+</span><span class="n">c</span><span class="o">)</span><span class="bp">+</span><span class="n">d</span><span class="o">)</span><span class="bp">+</span><span class="n">e</span><span class="bp">=</span><span class="o">(</span><span class="n">c</span><span class="bp">+</span><span class="o">((</span><span class="n">b</span><span class="bp">+</span><span class="n">e</span><span class="o">)</span><span class="bp">+</span><span class="n">a</span><span class="o">))</span><span class="bp">+</span><span class="n">d</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">simp</span>
</code></pre></div>



<a name="302593982"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302593982" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302593982">(Oct 06 2022 at 07:09)</a>:</h4>
<p>Yeah, this was a problem in Lean 3 NNG; <code>0</code> is <code>has_zero.zero</code> whereas <code>induction</code> would spit out <code>nat.zero</code> which printed differently and confused users. <a href="https://github.com/ImperialCollegeLondon/natural_number_game/blob/f29b6c2884299fc63fdfc81ae5d7daaa3219f9fd/src/tactic/modded.lean#L71">here</a> is where I change <code>induction</code> so that it does usual induction and then runs <code>dsimp</code> with a simp set including <a href="https://github.com/ImperialCollegeLondon/natural_number_game/blob/e662e49ac977d4f0bbe53502e677e18025f9394c/src/mynat/definition.lean#L24">this</a> which means that users don't ever see the problem.</p>



<a name="302637843"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302637843" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexander Bentkamp <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302637843">(Oct 06 2022 at 12:11)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110024">Sebastian Ullrich</span> <a href="#narrow/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204/near/302240685">said</a>:</p>
<blockquote>
<p>Yes. You're not using the language server, so "export these specific Lean functions to (single-threaded) JS/WASM" is all you need, right?</p>
</blockquote>
<p>Do you have some hints on how to do this?</p>



<a name="302639057"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302639057" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302639057">(Oct 06 2022 at 12:18)</a>:</h4>
<p>I think the most promising way to an official Emscripten build of Lean was last discussed in <a href="#narrow/stream/270676-lean4/topic/wasm.20nix.20emscripten.20build/near/271113368">https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/wasm.20nix.20emscripten.20build/near/271113368</a>. Though if someone is seriously considering completing that work, we should first chat with <span class="user-mention" data-user-id="112857">@Leonardo de Moura</span> about .olean platform portability expectations.</p>



<a name="302752476"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/302752476" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Lovett <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#302752476">(Oct 06 2022 at 22:32)</a>:</h4>
<p>I found this Lean 4 solution to Power World Level 8, not using "Ring", but is there a simpler one?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">add_squared</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">MyNat</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="bp">^</span> <span class="n">two</span> <span class="bp">=</span> <span class="n">a</span> <span class="bp">^</span> <span class="n">two</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">^</span> <span class="n">two</span> <span class="bp">+</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="o">:=</span> <span class="kd">by</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">two_eq_succ_one</span><span class="o">]</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">one_eq_succ_zero</span><span class="o">]</span>
  <span class="n">repeat</span> <span class="n">rw</span> <span class="o">[</span><span class="n">pow_succ</span><span class="o">]</span>
  <span class="n">repeat</span> <span class="n">rw</span> <span class="o">[</span><span class="n">pow_zero</span><span class="o">]</span>
  <span class="n">repeat</span> <span class="n">rw</span> <span class="o">[</span><span class="n">one_mul</span><span class="o">]</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">mul_add</span><span class="o">]</span>
  <span class="n">repeat</span> <span class="n">rw</span> <span class="o">[</span><span class="n">add_mul</span><span class="o">]</span>
  <span class="n">rw</span> <span class="o">[</span><span class="bp">←</span><span class="n">one_plus_one</span><span class="o">]</span>
  <span class="n">repeat</span> <span class="n">rw</span> <span class="o">[</span><span class="n">add_mul</span><span class="o">]</span>
  <span class="n">repeat</span> <span class="n">rw</span> <span class="o">[</span><span class="n">one_mul</span><span class="o">]</span>
  <span class="n">simp</span>
</code></pre></div>
<p>See <a href="http://lovettsoftware.com/NaturalNumbers/PowerWorld/Level8.lean.html">lean ink version</a></p>
<p>I couldn't get Mathlib.Tactic.Ring to work here as shown in <a href="https://github.com/ImperialCollegeLondon/natural_number_game/blob/master/src/game/world4/level8.lean">Lean 3 NNG</a>.</p>



<a name="303965735"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/303965735" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Lovett <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#303965735">(Oct 14 2022 at 05:29)</a>:</h4>
<p>I'm happy to report the entire NNG is now ported to lean4, here's the raw source code :</p>
<ul>
<li>
<p><a href="https://github.com/leanprover/lean4-samples">https://github.com/leanprover/lean4-samples</a><br>
which is published in a non-interactive-game format as a tutorial here:</p>
</li>
<li>
<p><a href="https://lovettsoftware.com/NaturalNumbers/TutorialWorld.lean.html">https://lovettsoftware.com/NaturalNumbers/TutorialWorld.lean.html</a></p>
</li>
</ul>
<p>The effort was a great learning experience and I have to thank Mario Carneiro, Heather Macbeth for much help and guidance along the way.</p>
<p>Note that this is not a 1:1 port as some tactics are missing still, like <code>cc</code> so the port includes  rewriting proofs so they do not depend on these missing tactics. I think <code>cc</code> was the only real big missing piece I ran into.  I also did not use <code>ring</code> since it was more work to setup.  But if someone wants to go back and put <code>ring</code> back in PR's are welcome.</p>
<p>TBD: the stuff about collectable "instances" of things that use your proofs is not implemented because some of that stuff is still missing from mathlib4.  If you search the web page for BUGBUG you will see where those TBD work items exist.</p>



<a name="303987529"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/303987529" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Lovett <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#303987529">(Oct 14 2022 at 08:50)</a>:</h4>
<p>Oh, and having gone through the whole thing with a fine tooth comb, I have to say huge thanks to Kevin Buzzard for the original content - it is definitely well thought out and presents things in a really clear and enjoyable way.  I only found 1 typo: <code>your your goal</code></p>



<a name="304009155"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/304009155" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Lovett <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#304009155">(Oct 14 2022 at 11:16)</a>:</h4>
<p>This is a map of the tactics covered and where they are first introduced:</p>
<p><a href="/user_uploads/3121/O_BR94uG-FgDpOYwKSm3cGgw/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/O_BR94uG-FgDpOYwKSm3cGgw/image.png" title="image.png"><img src="/user_uploads/3121/O_BR94uG-FgDpOYwKSm3cGgw/image.png"></a></div>



<a name="304018104"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/304018104" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#304018104">(Oct 14 2022 at 12:17)</a>:</h4>
<p>The reason I push for "naturals are a semiring" before starting on order theory is that to prove naturals are a semiring you only need to know three tactics! I found this extraordinary. I remember telling <span class="user-mention" data-user-id="110865">@Jeremy Avigad</span> at the time and him replying "sure, it's just equational reasoning" and me not having a clue what that even meant.</p>



<a name="304018549"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/304018549" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#304018549">(Oct 14 2022 at 12:19)</a>:</h4>
<p>It was conversations like this which made me realise that 25 years of being a professional number theorist doesn't teach you anything about how mathematics actually <em>works</em></p>



<a name="304034713"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/304034713" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Michael Roberts <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#304034713">(Oct 14 2022 at 13:42)</a>:</h4>
<p>In classic category theorist fashion, I guess I get to say "number theory is really just the study of the free semiring on one generator"...</p>
<p>More seriously, there is such impressive richness in our playground, even from humble origins.</p>



<a name="304071628"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/304071628" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jeremy Avigad <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#304071628">(Oct 14 2022 at 16:28)</a>:</h4>
<p>What I had in mind was Birkhoff's theorem: <br>
<a href="https://en.wikipedia.org/wiki/Variety_(universal_algebra)">https://en.wikipedia.org/wiki/Variety_(universal_algebra)</a><br>
It tells us that lots of interesting structures can be axiomatized by equations, and that consequences of those equations can be proved with just <code>rw</code>.<br>
<a href="https://en.wikipedia.org/wiki/Birkhoff%27s_theorem_(equational_logic)">https://en.wikipedia.org/wiki/Birkhoff%27s_theorem_(equational_logic)</a></p>



<a name="305066058"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/305066058" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> joaogui1 (he/him) <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#305066058">(Oct 20 2022 at 01:20)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> given that Chris Lovett ported the content to Lean4 are you just going to use his port for the content and keep working on the interface? What's your plan?</p>



<a name="305157645"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/305157645" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#305157645">(Oct 20 2022 at 14:07)</a>:</h4>
<p>Chris's effort is completely orthogonal to what is needed for the game. He wanted a set of Lean files to edit normally in VSCode, using an inductive type for natural numbers and Lean regular tactics. Also, in the game version, a lot of the work is to update the explanations from the Lean 3 game to remove unneeded parts and, much more importantly, to give explanations in response to tactic states.</p>



<a name="305182472"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Port%20NNG%20to%20Lean%204/near/305182472" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> joaogui1 (he/him) <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Port.20NNG.20to.20Lean.204.html#305182472">(Oct 20 2022 at 16:00)</a>:</h4>
<p>Got it!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>