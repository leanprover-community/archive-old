---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/withSaveInfoContext.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/withSaveInfoContext.html">withSaveInfoContext</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="293434800"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/withSaveInfoContext/near/293434800" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/withSaveInfoContext.html#293434800">(Aug 14 2022 at 19:23)</a>:</h4>
<p>What does <a href="https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Lean.Elab.withSaveInfoContext#doc">docs4#Lean.Elab.withSaveInfoContext</a> do? I've read the docstring and the code but I still have no idea what it is supposed to do.</p>
<blockquote>
<p>Resets the trees state <code>t₀</code>, runs <code>x</code> to produce a new trees state <code>t₁</code> and sets the state to be <code>t₀ ++ (InfoTree.context Γ &lt;$&gt; t₁)</code> where <code>Γ</code> is the context derived from the monad state.</p>
</blockquote>
<p>Is there an example of how or why you would want to wrap something in <code>withSaveInfoContext</code>?</p>



<a name="293442585"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/withSaveInfoContext/near/293442585" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wojciech Nawrocki <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/withSaveInfoContext.html#293442585">(Aug 14 2022 at 21:12)</a>:</h4>
<p>Nodes in the info tree use the innermost withContext ancestor when pretty-printing and so on, so you'd want to use this whenever you change the (local, and maybe metavar, i forget) context so that the info nodes produced with this change in effect refer to the correct context.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>