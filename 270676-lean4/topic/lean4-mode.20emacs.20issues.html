---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/lean4-mode.20emacs.20issues.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/lean4-mode.20emacs.20issues.html">lean4-mode emacs issues</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="229914818"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/lean4-mode%20emacs%20issues/near/229914818" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/lean4-mode.20emacs.20issues.html#229914818">(Mar 11 2021 at 19:55)</a>:</h4>
<p>What should I do when lean4-mode in Emacs starts misbehaving?  e.g., often when I switch files I get <code>unknown package 'Syntax'</code> on the first line about <code>import</code>, and then weird errors like <code>expected prio</code> at the <code>h</code> in <code>high</code> in <code>local infix :70 (priority:=high) " ~&gt; " =&gt; Arr</code>, I'm told that <code>C-c C-n is undefined</code> when I try to view errors, etc.  Restarting emacs generally fixes the issue, but I've already hit this three times in the past half-hour</p>



<a name="229924879"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/lean4-mode%20emacs%20issues/near/229924879" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/lean4-mode.20emacs.20issues.html#229924879">(Mar 11 2021 at 21:00)</a>:</h4>
<p>(I don't use emacs so ignore me if you tried it already, but probably better than trying to restart emacs immediately is restarting the language server client and seeing if that fixes it)</p>



<a name="229924953"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/lean4-mode%20emacs%20issues/near/229924953" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/lean4-mode.20emacs.20issues.html#229924953">(Mar 11 2021 at 21:01)</a>:</h4>
<p>How do I restart the language server client?</p>



<a name="229928378"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/lean4-mode%20emacs%20issues/near/229928378" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/lean4-mode.20emacs.20issues.html#229928378">(Mar 11 2021 at 21:23)</a>:</h4>
<p>Can try to figure it out in a little bit if someone who knows what they're talking about doesn't chime in, but maybe <code>pkill -f lean</code> will do it automaticlaly (i.e. killing the server process)</p>



<a name="229928625"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/lean4-mode%20emacs%20issues/near/229928625" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Gross <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/lean4-mode.20emacs.20issues.html#229928625">(Mar 11 2021 at 21:24)</a>:</h4>
<p>Ah, I think I figured out part of the issue: when I have unsaved changes in an emacs buffer, switching to another emacs buffer tries to call <code>leanpkg build</code> or something, and this will fail because it will try to compile my unsaved changes in <code>.#whatever.lean</code>.  (This suggests that the emacs mode might also not be able to handle having multiple files in the directory which don't compile, and trying to fix one of them?)</p>



<a name="236079585"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/lean4-mode%20emacs%20issues/near/236079585" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Viteri <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/lean4-mode.20emacs.20issues.html#236079585">(Apr 25 2021 at 17:10)</a>:</h4>
<p>(deleted)</p>



<a name="236079610"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/lean4-mode%20emacs%20issues/near/236079610" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Viteri <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/lean4-mode.20emacs.20issues.html#236079610">(Apr 25 2021 at 17:11)</a>:</h4>
<p><span class="user-mention silent" data-user-id="241007">Jason Gross</span> <a href="#narrow/stream/270676-lean4/topic/lean4-mode.20emacs.20issues/near/229924953">said</a>:</p>
<blockquote>
<p>How do I restart the language server client?</p>
</blockquote>
<p>M-x lsp-workspace-restart</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>