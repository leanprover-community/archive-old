---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/mathlib.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html">mathlib</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="221658709"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221658709" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221658709">(Jan 05 2021 at 15:25)</a>:</h4>
<p>is there a mathlib for lean 4 yet? as in, a place to port lean 3 mathlib to</p>



<a name="221658834"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221658834" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221658834">(Jan 05 2021 at 15:26)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> I heard that you're working on <code>logic.basic</code></p>



<a name="221658853"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221658853" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221658853">(Jan 05 2021 at 15:26)</a>:</h4>
<p>working is a strong word</p>



<a name="221658911"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221658911" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221658911">(Jan 05 2021 at 15:26)</a>:</h4>
<p>There is certainly no place to port mathlib yet, and I think that's still premature</p>



<a name="221658947"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221658947" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221658947">(Jan 05 2021 at 15:27)</a>:</h4>
<p>I think for the present we should be doing single file experiments</p>



<a name="221658975"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221658975" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221658975">(Jan 05 2021 at 15:27)</a>:</h4>
<p>what do you have now?</p>



<a name="221658990"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221658990" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221658990">(Jan 05 2021 at 15:27)</a>:</h4>
<p>~nothing</p>



<a name="221659329"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221659329" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221659329">(Jan 05 2021 at 15:30)</a>:</h4>
<p>Well at least it would be better if there's an empty repository on github that has Lean 4 environment</p>



<a name="221688953"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221688953" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221688953">(Jan 05 2021 at 19:16)</a>:</h4>
<p>Is it too early to start threads to discuss design changes to mathlib that could be implemented during the port?</p>



<a name="221689537"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221689537" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221689537">(Jan 05 2021 at 19:21)</a>:</h4>
<p>I think we should get <code>logic.basic</code> working first</p>



<a name="221689762"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221689762" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221689762">(Jan 05 2021 at 19:23)</a>:</h4>
<p>Zulip threads are cheap, so I would say no; it's not too early. Proposals with supporting evidence from code experiments will of course be more useful, and it will also take some time before enough people are comfortable with Lean 4 for there to be much feedback. </p>
<p>(I agree that porting <code>logic.basic</code> is a reasonable first milestone.)</p>



<a name="221690968"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221690968" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221690968">(Jan 05 2021 at 19:35)</a>:</h4>
<p>It's the <code>logic.basic</code> game!</p>



<a name="221692999"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221692999" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221692999">(Jan 05 2021 at 19:51)</a>:</h4>
<p>Johannes Holzl used to warn against mixing porting and design changes. He said you would fail on both parts if you tried that.</p>



<a name="221694273"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221694273" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221694273">(Jan 05 2021 at 20:01)</a>:</h4>
<p>I can't see full porting ever happening unless we either:</p>
<ul>
<li>Work out a compatibility layer, like how the python ecosystem ran against both 2 and 3 with the same source code.</li>
<li>Freeze the lean3 mathlib</li>
<li>Automate the translation (a la <code>2to3.py</code>)</li>
</ul>
<p>Is there a path I'm missing?</p>



<a name="221694440"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221694440" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221694440">(Jan 05 2021 at 20:02)</a>:</h4>
<p>Manual porting over the next few years</p>



<a name="221694493"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221694493" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Selsam <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221694493">(Jan 05 2021 at 20:03)</a>:</h4>
<p>I am planning to implement a preliminary version of the tool Leo suggested yesterday, with the hope that it will be easy enough for the community to tweak and extend as desired.</p>



<a name="221694566"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221694566" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221694566">(Jan 05 2021 at 20:03)</a>:</h4>
<p>(For reference, <a href="https://youtu.be/UeGvhfW1v9M?t=4311">here's the relevant timestamp to Leo's talk</a>)</p>
<div class="youtube-video message_inline_image"><a data-id="UeGvhfW1v9M" href="https://youtu.be/UeGvhfW1v9M?t=4311"><img src="https://i.ytimg.com/vi/UeGvhfW1v9M/default.jpg"></a></div>



<a name="221694754"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221694754" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221694754">(Jan 05 2021 at 20:05)</a>:</h4>
<p>which tool do you mean Daniel - a tool to let include both lean 3 and lean 4 files in the same build, or a tool to export lean 3 things to lean 4?</p>



<a name="221695633"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221695633" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Selsam <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221695633">(Jan 05 2021 at 20:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="238605">Kevin Lacker</span> <a href="#narrow/stream/270676-lean4/topic/mathlib/near/221694754">said</a>:</p>
<blockquote>
<p>which tool do you mean Daniel - a tool to let include both lean 3 and lean 4 files in the same build, or a tool to export lean 3 things to lean 4?</p>
</blockquote>
<ol>
<li>add functionality to Lean3 to allow exporting the declarations plus metadata such as typeclass instances and notation in (say) a <code>foo.lean3port</code> file for each <code>foo.lean</code></li>
<li>a stand-alone executable that transforms <code>.lean3port</code> files into the <code>.olean</code> format that Lean4 can import.</li>
</ol>



<a name="221696409"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221696409" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221696409">(Jan 05 2021 at 20:20)</a>:</h4>
<p><span class="user-mention silent" data-user-id="302826">Aaron Anderson</span> <a href="#narrow/stream/270676-lean4/topic/mathlib/near/221688953">said</a>:</p>
<blockquote>
<p>Is it too early to start threads to discuss design changes to mathlib that could be implemented during the port?</p>
</blockquote>
<p>I'd say instead: it's not too late to start threads about design changes that could be implemented before the port <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span></p>



<a name="221697128"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221697128" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221697128">(Jan 05 2021 at 20:26)</a>:</h4>
<p><span class="user-mention" data-user-id="110043">@Gabriel Ebner</span> had a similar tool described here: <a href="#narrow/stream/113488-general/topic/Importing.20mathlib.20into.20Lean.204/near/187561178">https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Importing.20mathlib.20into.20Lean.204/near/187561178</a></p>



<a name="221697455"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221697455" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221697455">(Jan 05 2021 at 20:29)</a>:</h4>
<p>Presumably we'll want a tool in both directions if we're starting from logic.basic - otherwise we'd have to start at the other end</p>



<a name="221697490"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221697490" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221697490">(Jan 05 2021 at 20:29)</a>:</h4>
<p>That is, importing lean 4 data into lean3 source files</p>



<a name="221697792"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221697792" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Selsam <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221697792">(Jan 05 2021 at 20:32)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110032">Reid Barton</span> <a href="#narrow/stream/270676-lean4/topic/mathlib/near/221697128">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="110043">Gabriel Ebner</span> had a similar tool described here: <a href="#narrow/stream/113488-general/topic/Importing.20mathlib.20into.20Lean.204/near/187561178">https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Importing.20mathlib.20into.20Lean.204/near/187561178</a></p>
</blockquote>
<p>Thanks, looking at it now. It seems like the two things missing (besides all the tweaks I wasn't planning to add) are:</p>
<ul>
<li>don't require a monolithic import, and instead do this for each file individually</li>
<li>export more metadata, in particular instances and notation</li>
</ul>



<a name="221698586"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221698586" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221698586">(Jan 05 2021 at 20:39)</a>:</h4>
<p>Is "exporting instances" anything other than exporting attributes?</p>



<a name="221700845"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221700845" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221700845">(Jan 05 2021 at 21:00)</a>:</h4>
<p>My importer tool actually handles classes, instances, and simp lemmas.  (There's a separate text file for the additional metadata).</p>



<a name="221701710"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221701710" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221701710">(Jan 05 2021 at 21:06)</a>:</h4>
<p>The hard parts are:</p>
<ol>
<li>Recursors are now different.  (The construction of the old recursor is not hard, but you to invent a new name, etc.)</li>
<li>I think it's important to map at least some core definition to the Lean 4 equivalent, such as natural numbers, logical constants, decidability, etc.  Otherwise the imported library is basically impossible to use.  A lot of stuff maps directly, but it's a chore to list all the new names.</li>
<li>However many definitions in core were already different when I wrote the tool.  Now the core library has diverged even further.  (Think HasCoe, or numerals, etc.)</li>
<li>Some definitions no longer check because of subtle changes in the type checker.  (Think large numerals, e.g. in <code>unsigned</code>.)  This should be trivial to fix when porting manually, but in an automatic tool it's a nasty curveball.</li>
</ol>



<a name="221706623"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221706623" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221706623">(Jan 05 2021 at 21:51)</a>:</h4>
<p>my current translation of the very beginning of <a href="https://github.com/leanprover-community/mathlib/blob/d1b2d6eb6d5934c086393014ce93258ff0fe5090/src/logic/basic.lean"><code>logic.basic</code></a>:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">universes</span> <span class="n">u</span> <span class="n">v</span>

<span class="sd">/-- Ex falso, the nondependent eliminator for the `Empty` type. -/</span>
<span class="kd">def</span> <span class="n">Empty.elim</span> <span class="o">{</span><span class="n">C</span> <span class="o">:</span> <span class="kt">Sort</span> <span class="n">u</span><span class="o">}</span> <span class="o">(</span><span class="n">t</span> <span class="o">:</span> <span class="n">Empty</span><span class="o">)</span> <span class="o">:</span> <span class="n">C</span> <span class="o">:=</span> <span class="n">nomatch</span> <span class="n">t</span>

<span class="kd">instance</span> <span class="o">:</span> <span class="n">Subsingleton</span> <span class="n">Empty</span> <span class="o">:=</span> <span class="o">⟨</span><span class="bp">λ</span> <span class="n">a</span> <span class="bp">=&gt;</span> <span class="n">a.elim</span><span class="o">⟩</span>

<span class="kd">instance</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">{</span><span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">}</span> <span class="o">[</span><span class="n">Subsingleton</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">Subsingleton</span> <span class="n">β</span><span class="o">]</span> <span class="o">:</span> <span class="n">Subsingleton</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">β</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">⟨</span><span class="bp">λ</span> <span class="o">⟨</span><span class="n">a₁</span><span class="o">,</span> <span class="n">b₁</span><span class="o">⟩</span> <span class="o">⟨</span><span class="n">a₂</span><span class="o">,</span> <span class="n">b₂</span><span class="o">⟩</span> <span class="bp">=&gt;</span> <span class="n">congr</span> <span class="o">(</span><span class="n">congrArg</span> <span class="n">_</span> <span class="bp">$</span> <span class="n">Subsingleton.elim</span> <span class="n">_</span> <span class="n">_</span><span class="o">)</span> <span class="o">(</span><span class="n">Subsingleton.elim</span> <span class="n">_</span> <span class="n">_</span><span class="o">)⟩</span>

<span class="kd">instance</span> <span class="o">:</span> <span class="n">DecidableEq</span> <span class="n">Empty</span> <span class="o">:=</span> <span class="bp">λ</span><span class="n">a</span> <span class="bp">=&gt;</span> <span class="n">a.elim</span>

<span class="kd">instance</span> <span class="n">instSortInhabited'</span> <span class="o">:</span> <span class="n">Inhabited</span> <span class="o">(</span><span class="n">Inhabited.default</span> <span class="o">:</span> <span class="kt">Sort</span> <span class="n">u</span><span class="o">)</span> <span class="o">:=</span> <span class="o">⟨</span><span class="n">PUnit.unit</span><span class="o">⟩</span>

<span class="kd">instance</span> <span class="n">decidableEqOfSubsingleton</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Sort</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">Subsingleton</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span> <span class="n">DecidableEq</span> <span class="n">α</span> <span class="o">:=</span>
<span class="k">fun</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">=&gt;</span> <span class="n">isTrue</span> <span class="o">(</span><span class="n">Subsingleton.elim</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span>

<span class="kd">@[simp]</span> <span class="kd">theorem</span> <span class="n">eqIffTrueOfSubsingleton</span> <span class="o">[</span><span class="n">Subsingleton</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span> <span class="bp">↔</span> <span class="n">true</span> <span class="o">:=</span>
<span class="o">⟨</span><span class="bp">λ</span> <span class="n">_</span> <span class="bp">=&gt;</span> <span class="o">⟨</span><span class="n">_</span><span class="o">⟩,</span> <span class="bp">λ</span> <span class="n">_</span> <span class="bp">=&gt;</span> <span class="n">Subsingleton.elim</span> <span class="n">x</span> <span class="n">y</span><span class="o">⟩</span>
</code></pre></div>



<a name="221711032"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221711032" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221711032">(Jan 05 2021 at 22:35)</a>:</h4>
<p>Porting has officially begun :D</p>



<a name="221711171"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221711171" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221711171">(Jan 05 2021 at 22:36)</a>:</h4>
<p>So where's the repo? <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="221713443"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221713443" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221713443">(Jan 05 2021 at 23:01)</a>:</h4>
<p>Rather than creating a new community repo and reinviting everyone, for now I think we could create one (or several) orphan branches in the mathlib repo for Lean 4 experiments. These branches won't share any history or files with the Lean 3 mathlib (so CI won't run on them).</p>
<p>Instructions (copied from <a href="https://stackoverflow.com/a/4288660">this SO post</a>):</p>
<div class="codehilite" data-code-language="Text only"><pre><span></span><code>git checkout --orphan my_lean4_experiment
git rm -rf .
&lt;do work&gt;
git add your files
git commit -m 'Initial commit'
</code></pre></div>



<a name="221713715"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221713715" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221713715">(Jan 05 2021 at 23:03)</a>:</h4>
<p>Then anyone can add commits to these branches as usual. <code>leanproject get-cache</code> won't work on these branches (until we set up some kind of CI), so anyone checking out such a branch will have to compile everything themselves.</p>



<a name="221713799"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221713799" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221713799">(Jan 05 2021 at 23:04)</a>:</h4>
<p>(Feel free to point out reasons why this might be a terrible idea...)</p>



<a name="221714487"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221714487" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Peattie <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221714487">(Jan 05 2021 at 23:12)</a>:</h4>
<p>If there's no CI/olean compilation concerns, I guess a Lean 4 mathlib repo could theoretically use the "normal" model for a Github repository. E.g. a repo with the maintainers invited, but then people work on forks + PRing rather than pushing their branches to the main repo? Which would mean no worries about reinviting everyone? Although I think orphan branches is a certainly clever approach if the preference is to avoid a new repo <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="221726706"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221726706" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Selsam <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221726706">(Jan 06 2021 at 02:16)</a>:</h4>
<p>Has anyone made a back-of-the-envelope estimate of how much time it would take to just port Mathlib manually, bottom-up? Here is a heavily-simplified first attempt:</p>
<p>Assuming:</p>
<ul>
<li>50,000 theorems</li>
<li>100 collaborators</li>
<li>X minutes on average to port a theorem (this has high variance)</li>
<li>40 hour work-weeks</li>
</ul>
<p>It would take:</p>
<ul>
<li>500 theorems per person</li>
<li>500 * X minutes per person</li>
<li>500 * X / (60 * 40) weeks in total</li>
</ul>
<p>After an initial investment to write Lean3-parity tactics/automation in Lean4 (which will presumably be necessary anyway), what would be a good estimate for X? 2? 5? 10? Even if X is 10, the porting would only take two weeks under this model. Even if a better model predicted 2 months, it might still be worth just pulling off the band-aid. Note: I am not suggesting this approach, only floating the idea.</p>



<a name="221726907"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221726907" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221726907">(Jan 06 2021 at 02:20)</a>:</h4>
<p>I think we should be using some sort of automation, maybe parse the current mathlib into some sort of abstract syntax tree and then visit that syntax tree to emit Lean 4 code. <a href="https://blog.isquaredsoftware.com/2018/11/git-js-history-rewriting/">https://blog.isquaredsoftware.com/2018/11/git-js-history-rewriting/</a></p>



<a name="221726992"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221726992" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221726992">(Jan 06 2021 at 02:22)</a>:</h4>
<p>At the end of the day there would many steps that are purely mechanical and doing them by hand would be a waste of time.</p>



<a name="221727169"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221727169" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Selsam <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221727169">(Jan 06 2021 at 02:26)</a>:</h4>
<p>Yes, there is a lot that could be done automatically, though I expect the porting time will be dominated by the time it takes to fix the tactic scripts that (even after syntactically adjusting them) no longer work for subtle reasons.</p>



<a name="221727603"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221727603" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Rute <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221727603">(Jan 06 2021 at 02:34)</a>:</h4>
<p>As someone who has written automation to parse proofs into abstract syntax trees, it is really hard to do.  Lean's grammar is dynamic and only Lean can truly parse Lean.  One option is to modify the current C++ Lean 3 parser to output the needed information.  </p>
<p>Or, we were able to get pretty far by hacking into to parts of the Lean parsing framework and writing a light weight parser to get the rest of the way there. (It would also be possible to build on the current C++ Lean 3 parser to get this data as well.) I'm happy to share what we have when it's ready.  We don't have ASTs for the whole file, just for tactic proofs and we don't parse expressions (which one would have to change because of capitalization changes).  We just store the expressions as strings right now.  I'm not sure if this would be helpful or not (especially in light of Daniel's comments).</p>



<a name="221727954"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221727954" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joe Hendrix <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221727954">(Jan 06 2021 at 02:42)</a>:</h4>
<p>I'm wondering how feasible it would be to adopt an incremental approach where files in Lean 3 are incrementally "frozen" in Lean 3 and then ported to Lean 4.   Once a given file is done, you shouldn't merge any PR changes into those files, but before then, it's ok to keep working on the Lean 3 versions.  If you are predominantly working in certain files, then you could migrate to Lean 4 once they are ported.  A file would only be eligible for freezing after all it's imports are.</p>



<a name="221728274"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221728274" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221728274">(Jan 06 2021 at 02:50)</a>:</h4>
<p>That sounds a lot like the "strangler pattern".</p>



<a name="221729668"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221729668" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Selsam <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221729668">(Jan 06 2021 at 03:19)</a>:</h4>
<p><span class="user-mention" data-user-id="110994">@Joe Hendrix</span> One risk for any incremental approach is a bad Nash-equilibrium. I fear that individuals may not have sufficient incentive to invest heavily in Lean4 until they are confident that others will as well. In the 'pulling off the band-aid' approach, the community-optimal incentives could be achieved immediately by a community decision to freeze mathlib3 and to port to Lean4 before resuming business-as-usual.</p>



<a name="221735602"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221735602" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joe Hendrix <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221735602">(Jan 06 2021 at 05:33)</a>:</h4>
<p>I was thinking kinda thinking that it would be good to let people interested in formalizing particular theories continue to do so while the more fundamental building blocks (e.g., decision procedures, logical foundations) are ported.  The collective community decision though would be that Lean 3 versions are not to be updated for any reason once the Lean 4 porting of those versions is underway.<br>
There could be a long tail of porting various particular contributions over with this though, so maybe there would be a deadline associated with freezing the entire codebase.<br>
I'm not familiar with the strangler pattern, but I wasn't thinking about intermingling the ability to use Lean 3 within Lean 4 (or vice versa).</p>



<a name="221735671"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221735671" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221735671">(Jan 06 2021 at 05:35)</a>:</h4>
<p><span class="user-mention" data-user-id="230999">@Daniel Selsam</span> the problem with your calculation is that it only works if you can port file <code>xyzzy</code> even though you don't know what its ported dependencies <code>foo</code>, <code>bar</code>, and <code>quux</code> look like. You can do it with 100 people in two weeks <em>if</em> you can parallelise the tasks. But I don't know if that is true.</p>



<a name="221735723"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221735723" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221735723">(Jan 06 2021 at 05:36)</a>:</h4>
<p>We had a lintsprint two months ago. That worked well, with say 10-15 people contributing several PRs a day. But there were no interdependencies between those PRs.</p>



<a name="221735733"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221735733" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221735733">(Jan 06 2021 at 05:37)</a>:</h4>
<p>So, if we can get lean 4 to work with special <code>.lean3olean_plus_mathlib_metadata</code> files, then we might be able to parallelise the porting effort.</p>



<a name="221735751"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221735751" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221735751">(Jan 06 2021 at 05:37)</a>:</h4>
<p>Also, as warned above, porting would need to be very <em>very</em> strict, otherwise the parallelism will break. Everytime you see some bad design, leave a comment, but copy it faithfully. People importing your file will thank you later.</p>



<a name="221742242"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221742242" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221742242">(Jan 06 2021 at 08:04)</a>:</h4>
<p><span class="user-mention silent" data-user-id="230999">Daniel Selsam</span> <a href="#narrow/stream/270676-lean4/topic/mathlib/near/221726706">said</a>:</p>
<blockquote>
<p>Assuming:</p>
<ul>
<li>50,000 theorems</li>
<li>100 collaborators</li>
<li>X minutes on average to port a theorem (this has high variance)</li>
<li>40 hour work-weeks</li>
</ul>
<p>It would take:</p>
<ul>
<li>500 theorems per person</li>
<li>500 * X minutes per person</li>
<li>500 * X / (60 * 40) weeks in total</li>
</ul>
</blockquote>
<p>Also, I don't think 100 people will invest 2 weeks of 40 hours in porting stuff. In Feb/March I can probably invest 3 full weeks, but I guess I'm an exception. So it will probably be more like 10 people working for 20 weeks... and then, I don't have 20 weeks that I can work nonstop on this project.</p>



<a name="221744326"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221744326" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221744326">(Jan 06 2021 at 08:36)</a>:</h4>
<p>I guess the olean export/import is what is meant to allow parallelism. But I also think that some kind of automatic preliminary translation of <em>statements</em> would be nice (tactic proofs are probably hopeless and for term proofs we want to use the new features of Lean 4 to kill <code>@ _ _ _ _</code>).</p>



<a name="221746207"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221746207" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221746207">(Jan 06 2021 at 09:04)</a>:</h4>
<p>My two cents here:</p>
<p>Some of us remember the old days when Lean was always changing underneath us, and we all know the "bump Lean to 3.24.0c" PRs to mathlib. These can be painful, and Lean 4 is brand new and presumably in flux. <em>This is fine,</em> even good. It's a sign the system is improving. But it adds tremendously to the cost of a port.</p>



<a name="221746214"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221746214" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221746214">(Jan 06 2021 at 09:04)</a>:</h4>
<p>I don't think we should start a full port now, or even necessarily soon. It's time to experiment. And there are a number of experiments to do, all somewhat independent.</p>



<a name="221746218"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221746218" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221746218">(Jan 06 2021 at 09:04)</a>:</h4>
<p>One is what Leo suggested in his talk: import Lean 3 mathlib with metadata and try to build on that, or port files at the top of the import hierarchy. This gives very important information about how Lean 4 features will scale. There was a lot about Lean 3 that we didn't learn until mathlib got big.</p>



<a name="221746227"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221746227" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221746227">(Jan 06 2021 at 09:05)</a>:</h4>
<p>This is a really important experiment but I'm skeptical about it as a long-term survival strategy for mathlib. IMO the Frankenstein approach will be harder to maintain and much harder for new contributors to wrap their heads around. The community development style is an essential part of mathlib and if we arrive at something that we can't teach newcomers, we've lost the game.</p>



<a name="221746234"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221746234" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221746234">(Jan 06 2021 at 09:05)</a>:</h4>
<p>Two is what people started yesterday, just start porting things from the ground up. Learn Lean 4 syntax and bug hunt on smaller proofs. This is totally independent of the first approach. As I said, I think it's too early to dump everyone's full effort into doing this. But carving out an initial chunk -- <code>logic.basic</code>, some of <code>algebra</code>, core pieces of <code>data</code> -- will be really helpful, especially to see the effects of the inevitable changes to Lean 4.</p>



<a name="221746240"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221746240" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221746240">(Jan 06 2021 at 09:05)</a>:</h4>
<p>Three, there's the 20k loc in <code>tactic</code>. Any kind of automated porting here seems hopeless. Many mathlib tactics are basically just linguistic things (<code>obtain</code>, <code>set</code>, etc) that might even be two-line macros in Lean 4. <code>ring</code>, <code>linarith</code>, <code>slim_check</code>, etc will be hard to port. (Leo said he plans to implement a version of <code>linarith</code> himself at some point.) The current <code>omega</code> is almost certainly dead. For a native Lean 4 mathlib, we need versions of most of this. Porting tactics isn't completely independent of the second approach, but I think it can be started independently. And as before, we should experiment with metaprogramming before committing to porting the big stuff.</p>



<a name="221746246"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221746246" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221746246">(Jan 06 2021 at 09:05)</a>:</h4>
<p>So I'd like to see three experiments done in parallel and independently. These can help us in the future but none is expected to be the future. Lean 3 mathlib development can continue in Lean 3, albeit likely at a slower pace if people are directing their time to the porting effort. After some iteration on these experiments, we'll have a better idea how to approach a full port. In particular we'll have more accurate numbers for Daniel's time estimate.</p>



<a name="221746250"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221746250" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221746250">(Jan 06 2021 at 09:05)</a>:</h4>
<p>(Sorry for the essay!)</p>



<a name="221746424"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221746424" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221746424">(Jan 06 2021 at 09:07)</a>:</h4>
<p>Don't forget to add experimentation with rebuilding the basic algebraic hierarchy (without proving any lemma) using the structure command provided by Lean4 or a new new structure command somewhat simulating the old structure command using the new one. Or even try to rebuild it using unification hints!</p>



<a name="221746913"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221746913" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221746913">(Jan 06 2021 at 09:15)</a>:</h4>
<p>I mostly agree with Rob, except that the critique of Frankenlean's monster maybe misses the point a bit.  The motivation behind a hybrid Lean 3 / Lean 4 mathlib is as a viable <em>temporary transition strategy</em>.  Porting mathlib is gonna take a few months.  We know from linting sprints that we can organize incremental library cleanups.  I am not sure we can pull off having two separate repositories.</p>



<a name="221747307"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221747307" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221747307">(Jan 06 2021 at 09:20)</a>:</h4>
<p>I don't see how we achieve a full port top-down, but I'd be happy to be proven wrong.</p>



<a name="221747371"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221747371" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221747371">(Jan 06 2021 at 09:21)</a>:</h4>
<p>I fear the rate at which mathlib is ported will be slower that the rate at which the lean3 version grows - so a multiple repository approach seems like it wouldn't work, and a hybrid approach is the only option.</p>



<a name="221747377"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221747377" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221747377">(Jan 06 2021 at 09:21)</a>:</h4>
<p>Can we strive for a bottom-up port instead?</p>



<a name="221747581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221747581" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221747581">(Jan 06 2021 at 09:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/270676-lean4/topic/mathlib/near/221747371">said</a>:</p>
<blockquote>
<p>I fear the rate at which mathlib is ported will be slower that the rate at which the lean3 version grows - so a multiple repository approach seems like it wouldn't work</p>
</blockquote>
<p>I wonder if there are some areas of interest to mathlib that are not well represented in mathlib so far (and so have few serious dependecies). People could start working on some of these from almost nothing in a mathlib 4, such projects might be a fun way for the community to learn lean 4 that isn't just porting existing work.</p>



<a name="221747746"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221747746" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221747746">(Jan 06 2021 at 09:27)</a>:</h4>
<p>numerical analysis?</p>



<a name="221747767"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221747767" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221747767">(Jan 06 2021 at 09:27)</a>:</h4>
<p>see the undergrad page, there are several sections that are just empty</p>



<a name="221749112"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221749112" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221749112">(Jan 06 2021 at 09:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/270676-lean4/topic/mathlib/near/221747371">said</a>:</p>
<blockquote>
<p>I fear the rate at which mathlib is ported will be slower that the rate at which the lean3 version grows - so a multiple repository approach seems like it wouldn't work, and a hybrid approach is the only option.</p>
</blockquote>
<p>Once the porting gets far enough, it will be stable enough that people can feel comfortable writing new things in lean 4 mathlib, so the rate of lean 3 mathlib contributions will plateau and eventually dwindle</p>



<a name="221749144"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221749144" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221749144">(Jan 06 2021 at 09:49)</a>:</h4>
<p>But I definitely think that porting will take far too long for a global freeze to be viable</p>



<a name="221749339"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221749339" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221749339">(Jan 06 2021 at 09:51)</a>:</h4>
<p>Freezing at a file level is maybe doable, although I don't think it's particularly necessary, since the changes that happen to a given file are usually pretty low frequency. We have done lint sprints and other refactorings at about this level of disruptiveness already in the past</p>



<a name="221756086"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221756086" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221756086">(Jan 06 2021 at 11:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/270676-lean4/topic/mathlib/near/221749144">said</a>:</p>
<blockquote>
<p>But I definitely think that porting will take far too long for a global freeze to be viable</p>
</blockquote>
<p>Once all tactic files and all basic algebra files are ported, I wouldn't be surprised if the port were essentially mechanical. Maybe I'm too optimistic, but I guess we will stumble all the time on the same issues, so once we know how to fix these I don't see why it wouldn't be pretty smooth.</p>



<a name="221767444"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221767444" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221767444">(Jan 06 2021 at 13:38)</a>:</h4>
<p>I think it is definitely worth the time to set up the means to make it as mechanical as possible, but I don't think we will be able to reduce the manual part of the porting to zero. A few files a day seems like an upper limit on the amount of work one person could get done if it's all going smoothly, so together with the PRs and coordination I think a few months sounds about right</p>



<a name="221802435"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221802435" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221802435">(Jan 06 2021 at 18:19)</a>:</h4>
<p>In terms of new designs for mathlib, after the port, it would be valuable to move tactics into a separate packages so that we can run them in mathlib in compiled form. (unless Leo implements just-in-time compilation) That will likely be a big change.</p>



<a name="221825799"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221825799" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Lacker <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221825799">(Jan 06 2021 at 21:26)</a>:</h4>
<p>in my experience with porting projects, they fail not when there is too much overall work, but when there are 2 or 3 critical things that are so hard to port, the people working on it eventually give up and nobody wants to try any more. so I am curious what are the hardest parts of mathlib to port, that are critical for mathlib. is it complex but commonly used tactics like <code>ring</code>, <code>omega</code>, <code>simp</code>, <code>linarith</code>, etc?</p>



<a name="221825951"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221825951" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joe Hendrix <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221825951">(Jan 06 2021 at 21:27)</a>:</h4>
<p>I haven't thought through the implementation, but it seems like it should be possible to compile tactics in one module and use the compiled version in other modules without a JIT.  I think this would result in using the compiled versions in most cases.</p>



<a name="221826020"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221826020" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221826020">(Jan 06 2021 at 21:27)</a>:</h4>
<p>Lean 4 has a simplifier, but all the other tactics you mentioned will have to be ported.</p>



<a name="221832551"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221832551" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221832551">(Jan 06 2021 at 22:32)</a>:</h4>
<p>For most tactics, I expect that we can port them just like we port other things. That said I would bet that we want to make more significant changes to some of them: <code>omega</code> needs to be rewritten, <code>simp</code> will be rewritten, <code>linarith</code> might be rewritten</p>



<a name="221834072"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221834072" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221834072">(Jan 06 2021 at 22:47)</a>:</h4>
<p>Should mathlib porting guidelines make a firm statement about <code>set_option autoBoundImplicitLocal false</code>?</p>



<a name="221834190"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221834190" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221834190">(Jan 06 2021 at 22:48)</a>:</h4>
<p>What's it mean?</p>



<a name="221834229"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221834229" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221834229">(Jan 06 2021 at 22:49)</a>:</h4>
<p>Consider the following: <a href="https://gist.github.com/shingtaklam1324/7451d7e329aa32efd42dd49d784ac8a5#file-algebra_groups_defs-lean-L15">https://gist.github.com/shingtaklam1324/7451d7e329aa32efd42dd49d784ac8a5#file-algebra_groups_defs-lean-L15</a></p>



<a name="221834251"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221834251" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221834251">(Jan 06 2021 at 22:49)</a>:</h4>
<p>The <code>u</code> is coming from the fact that it is a lowercase letter, and can be inferred, so it is.</p>



<a name="221834289"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221834289" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221834289">(Jan 06 2021 at 22:49)</a>:</h4>
<p>I would say use it freely</p>



<a name="221834295"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221834295" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221834295">(Jan 06 2021 at 22:49)</a>:</h4>
<p>As remarked on here <a href="https://leanprover.github.io/lean4/doc/autobound.html?highlight=lower#auto-bound-implict-arguments">https://leanprover.github.io/lean4/doc/autobound.html?highlight=lower#auto-bound-implict-arguments</a></p>



<a name="221834354"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221834354" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221834354">(Jan 06 2021 at 22:50)</a>:</h4>
<p>If it's possible, I want to bring back <code>Sort*</code> via notation</p>



<a name="221834440"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221834440" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221834440">(Jan 06 2021 at 22:51)</a>:</h4>
<p>I think, as long as it's still basically making the right guesses, we should use <code>Sort*</code> or <code>Type*</code> wherever possible, because it makes universe errors less likely</p>



<a name="221834462"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221834462" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221834462">(Jan 06 2021 at 22:51)</a>:</h4>
<p>The bottom snippet in <a href="https://leanprover.github.io/lean4/doc/typeobjs.html?highlight=type%20_#types-as-objects">https://leanprover.github.io/lean4/doc/typeobjs.html?highlight=type%20_#types-as-objects</a> is about <code>Type*</code> or <code>Sort*</code></p>



<a name="221834494"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221834494" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221834494">(Jan 06 2021 at 22:51)</a>:</h4>
<p>Right, we're going to need a mathlib prelude anyway and this should go in it</p>



<a name="221834633"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221834633" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221834633">(Jan 06 2021 at 22:53)</a>:</h4>
<p>For times when it's necessary to use explicit universes, it's marginally more convenient to use implicit universe arguments than <code>universes u v</code> which is mostly noise</p>



<a name="221935363"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221935363" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221935363">(Jan 07 2021 at 12:22)</a>:</h4>
<p><a href="https://github.com/kckennylau/mathlib4/blob/master/src/logic/basic.lean">https://github.com/kckennylau/mathlib4/blob/master/src/logic/basic.lean</a></p>



<a name="221935386"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221935386" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221935386">(Jan 07 2021 at 12:22)</a>:</h4>
<p>Is that the official mathlib port repo? :D</p>



<a name="221935419"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221935419" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221935419">(Jan 07 2021 at 12:22)</a>:</h4>
<p>it’s my unofficial mathlib port repo</p>



<a name="221935430"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221935430" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221935430">(Jan 07 2021 at 12:23)</a>:</h4>
<p>You'd better document your instances or the linter will complain</p>



<a name="221935478"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221935478" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221935478">(Jan 07 2021 at 12:23)</a>:</h4>
<p>In fact <span class="user-mention" data-user-id="116045">@Jesse Michael Han</span> was telling me that we should document all theorems too, because then AI will be able to learn better about mathematical natural language</p>



<a name="221936110"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221936110" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221936110">(Jan 07 2021 at 12:31)</a>:</h4>
<p>Maybe then we can train <code>gpt</code> to insert a comment explaining in natural language why it rewrote <code>add_comm</code> repeatedly</p>



<a name="221936133"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221936133" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221936133">(Jan 07 2021 at 12:31)</a>:</h4>
<p>"Because it's there"</p>



<a name="221936242"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221936242" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221936242">(Jan 07 2021 at 12:32)</a>:</h4>
<p>More seriously though, that knowledge would definitely help build a more powerful method for searching theorems in the docs</p>



<a name="221997949"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221997949" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jesse Michael Han <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221997949">(Jan 07 2021 at 20:43)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/270676-lean4/topic/mathlib/near/221935478">said</a>:</p>
<blockquote>
<p>In fact <span class="user-mention silent" data-user-id="116045">Jesse Michael Han</span> was telling me that we should document all theorems too, because then AI will be able to learn better about mathematical natural language</p>
</blockquote>
<p>yes, this would be extremely useful as training data for informal-to-formal machine translation</p>



<a name="221999616"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/221999616" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#221999616">(Jan 07 2021 at 20:56)</a>:</h4>
<p>Perhaps vice versa too, given the discussion in the teaching panel about transitioning to paper from lean</p>



<a name="222017609"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/222017609" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mohamed Al-Fahim <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#222017609">(Jan 07 2021 at 23:41)</a>:</h4>
<p>(deleted)</p>



<a name="222081040"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/222081040" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alena Gusakov <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#222081040">(Jan 08 2021 at 14:55)</a>:</h4>
<blockquote>
<p>I wonder if there are some areas of interest to mathlib that are not well represented in mathlib so far (and so have few serious dependecies). </p>
</blockquote>
<p>graph theory and combinatorics!</p>



<a name="222081281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/222081281" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#222081281">(Jan 08 2021 at 14:57)</a>:</h4>
<p><span class="user-mention" data-user-id="303889">@Alena Gusakov</span> so are you going to work on graph theory in Lean 4</p>



<a name="222081303"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/222081303" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alena Gusakov <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#222081303">(Jan 08 2021 at 14:57)</a>:</h4>
<p>I might</p>



<a name="222081446"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/222081446" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alena Gusakov <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#222081446">(Jan 08 2021 at 14:58)</a>:</h4>
<p>I've just barely started wrapping my head around how Lean 3 works but it might be worth it for me to start experimenting w/ Lean 4 since we're planning to port anyway</p>



<a name="222081749"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/222081749" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#222081749">(Jan 08 2021 at 15:01)</a>:</h4>
<p>let's go</p>



<a name="224828740"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/224828740" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nasos Evangelou-Oost <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#224828740">(Feb 02 2021 at 04:48)</a>:</h4>
<p><span class="user-mention" data-user-id="270523">@Huỳnh Trần Khanh</span> thank you. i am interested in experimenting with some category theory stuff in lean. is anything available yet for lean4? how long would you expect for mathlib to be upgraded for lean4? as someone who has never uesd lean before, would you suggest i stick to lean3 for now or to try to port myself the relevant bits from mathlib to lean4?</p>



<a name="224829607"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/224829607" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#224829607">(Feb 02 2021 at 05:06)</a>:</h4>
<p><span class="user-mention" data-user-id="386149">@Nasos Evangelou-Oost</span> I'd say stick with Lean 3 for now. Lean 4 is still unstable.</p>



<a name="224829697"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/224829697" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#224829697">(Feb 02 2021 at 05:08)</a>:</h4>
<p>There was a recent soundness bug. Already fixed, but who knows if there are still other bugs lurking somewhere.</p>



<a name="224829718"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/224829718" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#224829718">(Feb 02 2021 at 05:08)</a>:</h4>
<p>more importantly, it doesn't have many of the features of lean 3 yet, only the ability to eventually write them. This is going to take a while</p>



<a name="224830030"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/224830030" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nasos Evangelou-Oost <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#224830030">(Feb 02 2021 at 05:15)</a>:</h4>
<p><span class="user-mention" data-user-id="270523">@Huỳnh Trần Khanh</span> i see. actually what i'm more interested is in computational category theory and general purpose programming. i recently was surprised to learn that lean4 is actually quite capable of this.  i'm currently working on a project in F# but the lack of dependent types is limiting. i also considered idris2 as a general-purpose dependently typed language but it is in prerelease and its development seems slow (idris 1 seems too slow to be able to do anything useful).</p>



<a name="230591743"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/230591743" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> SnowFox <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#230591743">(Mar 16 2021 at 21:09)</a>:</h4>
<p>Is there a roadmap until <code>port : Lean3 -&gt; Lean4</code> <code>port mathlib</code>?</p>



<a name="232122060"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/232122060" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sayantan Majumdar <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#232122060">(Mar 27 2021 at 22:15)</a>:</h4>
<p>lean4 seems significantly different. Does this mean mathlib has to be written again?</p>



<a name="232123823"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib/near/232123823" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.html#232123823">(Mar 27 2021 at 22:48)</a>:</h4>
<p>Lean 4 is very similar to lean 3, but sufficiently different to make porting the maths library a nontrivial problem. Right now we're letting the experts think about this but it's still early days.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>