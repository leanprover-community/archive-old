---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/Can't.20get.20lean4.20working.20with.20VS.20Code.2E.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Can't.20get.20lean4.20working.20with.20VS.20Code.2E.html">Can't get lean4 working with VS Code.</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="306612616"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Can%27t%20get%20lean4%20working%20with%20VS%20Code./near/306612616" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Can't.20get.20lean4.20working.20with.20VS.20Code.2E.html#306612616">(Oct 28 2022 at 09:17)</a>:</h4>
<p>I have a working install of lean 3 on this machine, but I wanted to try out switching to lean4. I followed the instructions for installing lean 4 and activating it in my current directory, it appears to be able to run, but VS Code just says "Waiting for the Lean server to start..." and hangs there. This is on WSL in Windows 11.</p>
<p>Also: what is the best way to manage having active lean 3 and lean 4 projects? I don't seem to be able to use lake unless lean4 is activated in a directory: so how do I start a new lean 4 project if lean 3 is my default?</p>



<a name="306613353"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Can%27t%20get%20lean4%20working%20with%20VS%20Code./near/306613353" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Can't.20get.20lean4.20working.20with.20VS.20Code.2E.html#306613353">(Oct 28 2022 at 09:21)</a>:</h4>
<p>(My understanding is that leanproject is only to be used with lean 3 and it's lake that should be used with lean 4?)</p>



<a name="306615382"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Can%27t%20get%20lean4%20working%20with%20VS%20Code./near/306615382" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Can't.20get.20lean4.20working.20with.20VS.20Code.2E.html#306615382">(Oct 28 2022 at 09:33)</a>:</h4>
<p>OK so if I do <code>elan default leanprover/lean4:stable</code>, that works (wheras <code>elan override set leanprover/lean4:stable</code> did not).</p>



<a name="306615692"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Can%27t%20get%20lean4%20working%20with%20VS%20Code./near/306615692" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Can't.20get.20lean4.20working.20with.20VS.20Code.2E.html#306615692">(Oct 28 2022 at 09:34)</a>:</h4>
<p>But then I need to do <code>elean default stable</code> if I want to switch back to Lean 3. So do they just not coexist well?</p>



<a name="306618552"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Can%27t%20get%20lean4%20working%20with%20VS%20Code./near/306618552" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Can't.20get.20lean4.20working.20with.20VS.20Code.2E.html#306618552">(Oct 28 2022 at 09:51)</a>:</h4>
<p>doesn't VSCode automatically find the correct Lean version for you? The VSCode extension should take care of everything. If I start in a Lean4 folder VSCode says "Lean 4" instead of "Lean" in the bottom right corner. On elan my default toolchain is leanprover-community/lean:stable</p>



<a name="306620382"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Can%27t%20get%20lean4%20working%20with%20VS%20Code./near/306620382" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Can't.20get.20lean4.20working.20with.20VS.20Code.2E.html#306620382">(Oct 28 2022 at 10:01)</a>:</h4>
<p>Do you have both the "lean" and "lean4" extensions installed in vscode?</p>



<a name="306620940"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Can%27t%20get%20lean4%20working%20with%20VS%20Code./near/306620940" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Can't.20get.20lean4.20working.20with.20VS.20Code.2E.html#306620940">(Oct 28 2022 at 10:05)</a>:</h4>
<p>In my experience they coexist fairly well, creating a new project is one point where it is a little bit tricky though, but normally its not something I do too often:<br>
You can also use commands like</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">elan</span> <span class="n">run</span> <span class="n">leanprover</span><span class="bp">-</span><span class="n">community</span><span class="bp">/</span><span class="n">lean</span><span class="o">:</span><span class="mi">3</span><span class="bp">.</span><span class="mi">45</span><span class="bp">.</span><span class="mi">0</span> <span class="n">leanpkg</span> <span class="n">new</span> <span class="n">blah</span>
<span class="n">elan</span> <span class="n">run</span> <span class="n">leanprover</span><span class="bp">/</span><span class="n">lean4</span><span class="o">:</span><span class="n">nightly</span> <span class="n">lake</span> <span class="n">new</span> <span class="n">blah</span>
</code></pre></div>
<p>rather than setting overrides if you want to make a new project for a specific version</p>



<a name="306622130"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Can%27t%20get%20lean4%20working%20with%20VS%20Code./near/306622130" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Can't.20get.20lean4.20working.20with.20VS.20Code.2E.html#306622130">(Oct 28 2022 at 10:12)</a>:</h4>
<p>No, VS Code seems to get confused</p>



<a name="306735082"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Can%27t%20get%20lean4%20working%20with%20VS%20Code./near/306735082" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Can't.20get.20lean4.20working.20with.20VS.20Code.2E.html#306735082">(Oct 28 2022 at 19:38)</a>:</h4>
<p>Yeah I've been running lean 3 and lean 4 together on my laptop (Ubuntu 20.04) no problem, switching between various branches of mathlib in lean 3 and various branches of mathlib4 in lean 4 and it's working seamlessly for me</p>



<a name="307418878"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Can%27t%20get%20lean4%20working%20with%20VS%20Code./near/307418878" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Lovett <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Can't.20get.20lean4.20working.20with.20VS.20Code.2E.html#307418878">(Nov 01 2022 at 23:03)</a>:</h4>
<p><span class="user-mention" data-user-id="330967">@Wrenna Robson</span>  this should be fixed by <a href="https://github.com/leanprover/vscode-lean4/pull/264">https://github.com/leanprover/vscode-lean4/pull/264</a></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>