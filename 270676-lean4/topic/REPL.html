---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/REPL.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/REPL.html">REPL</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="222159220"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/REPL/near/222159220" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Petrica Chiriac <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/REPL.html#222159220">(Jan 09 2021 at 07:42)</a>:</h4>
<p>Do we have a REPL (read–eval–print loop) for lean4? or is there a plan to exist?</p>



<a name="222159540"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/REPL/near/222159540" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/REPL.html#222159540">(Jan 09 2021 at 07:54)</a>:</h4>
<p>The ability to use that would require typing a line of code perfectly without looking at the error message, which I believe only a handful in this community can do.</p>



<a name="222160308"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/REPL/near/222160308" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joe Hendrix <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/REPL.html#222160308">(Jan 09 2021 at 08:18)</a>:</h4>
<p>There is not a REPL nor plans to write one afaik.  I think it would have very limited utility.<br>
I had thought I wanted a REPL when I first started using Lean, but once you have development environment integration working there isn't a need.  If you want to interactively evaluate a term or print the type of an expression it is easier  to quickly type commands like <code>#eval</code> or <code>#check</code> in your buffer then to switch to a terminal and use a REPL.</p>



<a name="222160357"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/REPL/near/222160357" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/REPL.html#222160357">(Jan 09 2021 at 08:19)</a>:</h4>
<p>Also <code>#eval foo</code> updates automatically when you tweak <code>foo</code>. Continuous compilation is awesome.</p>



<a name="258359414"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/REPL/near/258359414" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/REPL.html#258359414">(Oct 20 2021 at 12:40)</a>:</h4>
<p>Just for the sake of clarification: is there any active Lean REPL project you're aware of?</p>



<a name="258359670"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/REPL/near/258359670" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/REPL.html#258359670">(Oct 20 2021 at 12:42)</a>:</h4>
<p>Ah, I guess the thread speaks by itself :D</p>



<a name="268268031"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/REPL/near/268268031" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/REPL.html#268268031">(Jan 17 2022 at 13:09)</a>:</h4>
<p>I'm trying to treat specific REPL commands <a href="https://github.com/arthurpaulino/LeanREPL/blob/b0f1628327d930d679970f0242cbd9cb8a55a797/Main.lean#L42">here</a>.<br>
For instance, <code>"!quit"</code> and <code>"!reset"</code>.</p>
<p><code>"!quit"</code> is easy because I just need to break the loop. But <code>"!reset"</code> is supposed to start the loop again from a fresh environment. Is it possible to do so?</p>



<a name="268270245"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/REPL/near/268270245" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/REPL.html#268270245">(Jan 17 2022 at 13:28)</a>:</h4>
<p>I tried throwing an error from <code>loop</code> but I wasn't able to catch it in <code>runCommandElabM</code></p>



<a name="268284780"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/REPL/near/268284780" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexander Bentkamp <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/REPL.html#268284780">(Jan 17 2022 at 15:27)</a>:</h4>
<p>For <code>!reset</code>, maybe you can do</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code>      <span class="k">let</span> <span class="n">env</span> <span class="bp">←</span> <span class="n">importModules</span> <span class="o">[{</span> <span class="n">module</span> <span class="o">:=</span> <span class="bp">`</span><span class="n">Init</span> <span class="o">}]</span> <span class="o">{}</span>
      <span class="n">modifyEnv</span> <span class="o">(</span><span class="k">fun</span> <span class="n">_</span> <span class="bp">=&gt;</span> <span class="n">env</span><span class="o">)</span>
      <span class="n">loop</span>
</code></pre></div>



<a name="268285076"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/REPL/near/268285076" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexander Bentkamp <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/REPL.html#268285076">(Jan 17 2022 at 15:29)</a>:</h4>
<p>For <code>!quit</code>, maybe simply do not call <code>loop</code> recursively?</p>



<a name="268285320"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/REPL/near/268285320" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/REPL.html#268285320">(Jan 17 2022 at 15:31)</a>:</h4>
<p><code>Environment</code> is a persistent data structure, no need to recreate it. You can simply store the initial one in a variable.</p>



<a name="268286761"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/REPL/near/268286761" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/REPL.html#268286761">(Jan 17 2022 at 15:43)</a>:</h4>
<p>Thanks for both ideas!</p>



<a name="268320027"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/REPL/near/268320027" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/REPL.html#268320027">(Jan 17 2022 at 22:19)</a>:</h4>
<p>Alright, I was able to do this:<br>
<a href="https://github.com/arthurpaulino/LeanREPL">https://github.com/arthurpaulino/LeanREPL</a><br>
Thanks for the help everyone!</p>
<p>I'd also like to know what you guys think about having something like this bundled in the Lean 4 binary so one could simply call:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>$ lean --repl
</code></pre></div>
<p>I know it's not very useful for theorem proving, but it can allow people to build computational environments for Lean on top of it. For example, one possibility is making a Lean 4 kernel for Jupyter and having an extension that does the job of the Lean Infoview inside the Jupyter interface. Or if Jupyter is not plastic enough, another possibility is building an app dedicated for Lean 4.</p>
<p>Such environment would be suitable for applications that use libraries like Tomas' <a href="https://github.com/lecopivo/SciLean">SciLean</a></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>