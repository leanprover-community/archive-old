---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/product.20of.20categories.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/product.20of.20categories.html">product of categories</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="322649145"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/product%20of%20categories/near/322649145" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kind Bubble <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/product.20of.20categories.html#322649145">(Jan 21 2023 at 01:40)</a>:</h4>
<p>Hi all!</p>
<p>I've moved my question over here to the lean4 stream to see if it could get an answer. Right now CatPrdId1B is giving me trouble and I can't figure out why.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">Init.Data.ToString.Basic</span>
<span class="kd">universe</span> <span class="n">u</span>
<span class="kd">universe</span> <span class="n">v</span>

<span class="c1">-- Construction of the category of categories</span>

<span class="kd">structure</span> <span class="n">Cat</span> <span class="n">where</span>
  <span class="n">Obj</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span>
  <span class="n">Hom</span> <span class="o">:</span> <span class="bp">∀</span><span class="o">(</span><span class="n">_</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span><span class="bp">∀</span><span class="o">(</span><span class="n">_</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span> <span class="kt">Type</span> <span class="n">v</span>
  <span class="n">Idn</span> <span class="o">:</span> <span class="bp">∀</span><span class="o">(</span><span class="n">X</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span><span class="n">Hom</span> <span class="n">X</span> <span class="n">X</span>
  <span class="n">Cmp</span> <span class="o">:</span> <span class="bp">∀</span><span class="o">(</span><span class="n">X</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span><span class="bp">∀</span><span class="o">(</span><span class="n">Y</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span><span class="bp">∀</span><span class="o">(</span><span class="n">Z</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span><span class="bp">∀</span><span class="o">(</span><span class="n">_</span><span class="o">:</span><span class="n">Hom</span> <span class="n">X</span> <span class="n">Y</span><span class="o">),</span><span class="bp">∀</span><span class="o">(</span><span class="n">_</span><span class="o">:</span><span class="n">Hom</span> <span class="n">Y</span> <span class="n">Z</span><span class="o">),</span><span class="n">Hom</span> <span class="n">X</span> <span class="n">Z</span>
  <span class="n">Id1</span> <span class="o">:</span> <span class="bp">∀</span><span class="o">(</span><span class="n">X</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span><span class="bp">∀</span><span class="o">(</span><span class="n">Y</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span><span class="bp">∀</span><span class="o">(</span><span class="n">f</span><span class="o">:</span><span class="n">Hom</span> <span class="n">X</span> <span class="n">Y</span><span class="o">),(</span><span class="n">Cmp</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">Y</span><span class="o">)</span> <span class="n">f</span> <span class="o">(</span><span class="n">Idn</span> <span class="n">Y</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f</span>
  <span class="n">Id2</span> <span class="o">:</span> <span class="bp">∀</span><span class="o">(</span><span class="n">X</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span><span class="bp">∀</span><span class="o">(</span><span class="n">Y</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span><span class="bp">∀</span><span class="o">(</span><span class="n">f</span><span class="o">:</span><span class="n">Hom</span> <span class="n">X</span> <span class="n">Y</span><span class="o">),(</span><span class="n">Cmp</span> <span class="n">X</span> <span class="n">X</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">Idn</span> <span class="n">X</span><span class="o">)</span> <span class="n">f</span> <span class="bp">=</span> <span class="n">f</span>
  <span class="n">Ass</span> <span class="o">:</span> <span class="bp">∀</span><span class="o">(</span><span class="n">W</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span><span class="bp">∀</span><span class="o">(</span><span class="n">X</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span><span class="bp">∀</span><span class="o">(</span><span class="n">Y</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span><span class="bp">∀</span><span class="o">(</span><span class="n">Z</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span><span class="bp">∀</span><span class="o">(</span><span class="n">f</span><span class="o">:</span><span class="n">Hom</span> <span class="n">W</span> <span class="n">X</span><span class="o">),</span><span class="bp">∀</span><span class="o">(</span><span class="n">g</span><span class="o">:</span><span class="n">Hom</span> <span class="n">X</span> <span class="n">Y</span><span class="o">),</span><span class="bp">∀</span><span class="o">(</span><span class="n">h</span><span class="o">:</span><span class="n">Hom</span> <span class="n">Y</span> <span class="n">Z</span><span class="o">),(</span><span class="n">Cmp</span> <span class="n">W</span> <span class="n">X</span> <span class="n">Z</span><span class="o">)</span> <span class="n">f</span> <span class="o">(</span><span class="n">Cmp</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="n">g</span> <span class="n">h</span><span class="o">)</span> <span class="bp">=</span> <span class="n">Cmp</span> <span class="n">W</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">(</span><span class="n">Cmp</span> <span class="n">W</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">f</span> <span class="n">g</span><span class="o">)</span> <span class="n">h</span>
<span class="kd">def</span> <span class="n">Cmp</span> <span class="o">{</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">}</span> <span class="o">{</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">}</span> <span class="o">{</span><span class="n">Y</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">}</span> <span class="o">{</span><span class="n">Z</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">C.Hom</span> <span class="n">X</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">C.Hom</span> <span class="n">Y</span> <span class="n">Z</span><span class="o">)</span> <span class="o">:=</span> <span class="n">C.Cmp</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="n">f</span> <span class="n">g</span>
<span class="kd">notation</span> <span class="n">g</span> <span class="s2">"∘"</span> <span class="n">f</span> <span class="bp">=&gt;</span> <span class="n">Cmp</span> <span class="n">f</span> <span class="n">g</span>

<span class="kd">def</span> <span class="n">Hom</span> <span class="o">{</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">}</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span> <span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span> <span class="o">:=</span> <span class="n">C.Hom</span> <span class="n">X</span> <span class="n">Y</span>
<span class="kd">def</span> <span class="n">Idn</span> <span class="o">{</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">}</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span> <span class="o">:=</span> <span class="n">C.Idn</span> <span class="n">X</span>

<span class="kd">structure</span> <span class="n">Fun</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="n">where</span>
   <span class="n">Obj</span> <span class="o">:</span> <span class="bp">∀</span><span class="o">(</span><span class="n">_</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">),</span><span class="n">D.Obj</span>
   <span class="n">Mor</span> <span class="o">:</span> <span class="bp">∀</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">),</span><span class="bp">∀</span><span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">),</span><span class="bp">∀</span><span class="o">(</span><span class="n">_</span> <span class="o">:</span> <span class="n">C.Hom</span> <span class="n">X</span> <span class="n">Y</span><span class="o">),</span><span class="n">D.Hom</span> <span class="o">(</span><span class="n">Obj</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">Obj</span> <span class="n">Y</span><span class="o">)</span>
   <span class="n">Idn</span> <span class="o">:</span> <span class="bp">∀</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">),</span><span class="n">Mor</span> <span class="n">X</span> <span class="n">X</span> <span class="o">(</span><span class="n">C.Idn</span> <span class="n">X</span><span class="o">)</span> <span class="bp">=</span> <span class="n">D.Idn</span> <span class="o">(</span><span class="n">Obj</span> <span class="n">X</span><span class="o">)</span>
   <span class="n">Cmp</span> <span class="o">:</span> <span class="bp">∀</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">),</span><span class="bp">∀</span><span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">),</span><span class="bp">∀</span><span class="o">(</span><span class="n">Z</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">),</span><span class="bp">∀</span><span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">C.Hom</span> <span class="n">X</span> <span class="n">Y</span><span class="o">),</span><span class="bp">∀</span><span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">C.Hom</span> <span class="n">Y</span> <span class="n">Z</span><span class="o">),</span><span class="n">D.Cmp</span> <span class="o">(</span><span class="n">Obj</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">Obj</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">Obj</span> <span class="n">Z</span><span class="o">)</span> <span class="o">(</span><span class="n">Mor</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">Mor</span> <span class="n">Y</span> <span class="n">Z</span> <span class="n">g</span><span class="o">)</span> <span class="bp">=</span> <span class="n">Mor</span> <span class="n">X</span> <span class="n">Z</span> <span class="o">(</span><span class="n">C.Cmp</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">(</span><span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span><span class="o">))</span>

<span class="kd">def</span> <span class="n">CatIdn</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">:</span> <span class="n">Fun</span> <span class="n">C</span> <span class="n">C</span> <span class="o">:=</span>
<span class="o">{</span><span class="n">Obj</span> <span class="o">:=</span> <span class="k">fun</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="n">X</span><span class="o">,</span> <span class="n">Mor</span> <span class="o">:=</span> <span class="k">fun</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">C.Hom</span> <span class="n">X</span> <span class="n">Y</span><span class="o">)</span><span class="bp">=&gt;</span><span class="n">f</span><span class="o">,</span> <span class="n">Idn</span> <span class="o">:=</span> <span class="k">fun</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="n">Eq.refl</span> <span class="o">(</span><span class="n">C.Idn</span> <span class="n">X</span><span class="o">),</span><span class="n">Cmp</span> <span class="o">:=</span> <span class="k">fun</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">Z</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">C.Hom</span> <span class="n">X</span> <span class="n">Y</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">C.Hom</span> <span class="n">Y</span> <span class="n">Z</span><span class="o">)</span><span class="bp">=&gt;</span><span class="n">Eq.refl</span> <span class="o">(</span><span class="n">C.Cmp</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="n">f</span> <span class="n">g</span><span class="o">)}</span>

<span class="kd">def</span> <span class="n">CatCmp</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">E</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="n">Fun</span> <span class="n">C</span> <span class="n">D</span><span class="o">)</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="n">Fun</span> <span class="n">D</span> <span class="n">E</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">Fun</span> <span class="n">C</span> <span class="n">E</span><span class="o">):=</span>
<span class="o">{</span><span class="n">Obj</span> <span class="o">:=</span> <span class="k">fun</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="o">(</span><span class="n">G.Obj</span> <span class="o">(</span><span class="n">F.Obj</span> <span class="n">X</span><span class="o">)),</span><span class="n">Mor</span> <span class="o">:=</span> <span class="k">fun</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">C.Hom</span> <span class="n">X</span> <span class="n">Y</span><span class="o">)</span><span class="bp">=&gt;</span><span class="o">(</span><span class="n">G.Mor</span><span class="o">)</span> <span class="o">(</span><span class="n">F.Obj</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">F.Obj</span> <span class="n">Y</span><span class="o">)</span> <span class="o">((</span><span class="n">F.Mor</span><span class="o">)</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">f</span><span class="o">),</span><span class="n">Idn</span> <span class="o">:=</span> <span class="k">fun</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span> <span class="o">((</span><span class="n">Eq.trans</span><span class="o">)</span> <span class="o">(</span><span class="n">congrArg</span> <span class="o">(</span><span class="n">G.Mor</span> <span class="o">(</span><span class="n">F.Obj</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">F.Obj</span> <span class="n">X</span><span class="o">))</span> <span class="o">(</span><span class="n">F.Idn</span> <span class="n">X</span><span class="o">)</span> <span class="o">)</span> <span class="o">(</span><span class="n">G.Idn</span> <span class="o">(</span><span class="n">F.Obj</span> <span class="n">X</span><span class="o">))),</span><span class="n">Cmp</span> <span class="o">:=</span> <span class="k">fun</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">Z</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">C.Hom</span> <span class="n">X</span> <span class="n">Y</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">C.Hom</span> <span class="n">Y</span> <span class="n">Z</span><span class="o">)</span><span class="bp">=&gt;</span><span class="o">((</span><span class="n">Eq.trans</span><span class="o">)</span> <span class="o">(</span><span class="n">G.Cmp</span> <span class="o">(</span><span class="n">F.Obj</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">F.Obj</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">F.Obj</span> <span class="n">Z</span><span class="o">)</span> <span class="o">(</span><span class="n">F.Mor</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">F.Mor</span> <span class="n">Y</span> <span class="n">Z</span> <span class="n">g</span><span class="o">))</span> <span class="o">(</span><span class="n">congrArg</span> <span class="o">(</span><span class="n">G.Mor</span> <span class="o">(</span><span class="n">F.Obj</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">F.Obj</span> <span class="n">Z</span><span class="o">))</span> <span class="o">(</span><span class="n">F.Cmp</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="n">f</span> <span class="n">g</span><span class="o">)))}</span>

<span class="kd">def</span> <span class="n">CatId1</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="n">Fun</span> <span class="n">C</span> <span class="n">D</span><span class="o">)</span> <span class="o">:</span> <span class="o">((</span><span class="n">CatCmp</span> <span class="n">C</span> <span class="n">D</span> <span class="n">D</span><span class="o">)</span> <span class="n">F</span> <span class="o">(</span><span class="n">CatIdn</span> <span class="n">D</span><span class="o">)</span> <span class="bp">=</span> <span class="n">F</span><span class="o">)</span> <span class="o">:=</span> <span class="n">Eq.refl</span> <span class="n">F</span>

<span class="kd">def</span> <span class="n">CatId2</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="n">Fun</span> <span class="n">C</span> <span class="n">D</span><span class="o">)</span> <span class="o">:</span> <span class="o">((</span><span class="n">CatCmp</span> <span class="n">C</span> <span class="n">C</span> <span class="n">D</span><span class="o">)</span> <span class="o">(</span><span class="n">CatIdn</span> <span class="n">C</span><span class="o">)</span> <span class="n">F</span> <span class="bp">=</span> <span class="n">F</span><span class="o">)</span> <span class="o">:=</span> <span class="n">Eq.refl</span> <span class="n">F</span>

<span class="kd">def</span> <span class="n">CatAss</span> <span class="o">(</span><span class="n">B</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">E</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="n">Fun</span> <span class="n">B</span> <span class="n">C</span><span class="o">)</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="n">Fun</span> <span class="n">C</span> <span class="n">D</span><span class="o">)</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="n">Fun</span> <span class="n">D</span> <span class="n">E</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">CatCmp</span> <span class="n">B</span> <span class="n">C</span> <span class="n">E</span> <span class="n">F</span> <span class="o">(</span><span class="n">CatCmp</span> <span class="n">C</span> <span class="n">D</span> <span class="n">E</span> <span class="n">G</span> <span class="n">H</span><span class="o">)</span> <span class="bp">=</span> <span class="n">CatCmp</span> <span class="n">B</span> <span class="n">D</span> <span class="n">E</span> <span class="o">(</span><span class="n">CatCmp</span> <span class="n">B</span> <span class="n">C</span> <span class="n">D</span> <span class="n">F</span> <span class="n">G</span><span class="o">)</span> <span class="n">H</span><span class="o">)</span> <span class="o">:=</span> <span class="n">Eq.refl</span> <span class="o">(</span><span class="n">CatCmp</span> <span class="n">B</span> <span class="n">C</span> <span class="n">E</span> <span class="n">F</span> <span class="o">(</span><span class="n">CatCmp</span> <span class="n">C</span> <span class="n">D</span> <span class="n">E</span> <span class="n">G</span> <span class="n">H</span><span class="o">))</span>

<span class="kd">def</span> <span class="n">Cats</span> <span class="o">:</span> <span class="n">Cat</span> <span class="o">:=</span> <span class="o">{</span><span class="n">Obj</span> <span class="o">:=</span> <span class="n">Cat</span><span class="o">,</span><span class="n">Hom</span> <span class="o">:=</span> <span class="n">Fun</span><span class="o">,</span><span class="n">Idn</span> <span class="o">:=</span> <span class="n">CatIdn</span><span class="o">,</span><span class="n">Cmp</span> <span class="o">:=</span> <span class="n">CatCmp</span><span class="o">,</span><span class="n">Id1</span> <span class="o">:=</span> <span class="n">CatId1</span><span class="o">,</span><span class="n">Id2</span> <span class="o">:=</span> <span class="n">CatId2</span><span class="o">,</span><span class="n">Ass</span> <span class="o">:=</span> <span class="n">CatAss</span><span class="o">}</span>

<span class="c1">-- Construction of the product of categories</span>

<span class="kd">def</span> <span class="n">CatPrdObj</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">:=</span> <span class="n">C.Obj</span> <span class="bp">×</span> <span class="n">D.Obj</span>

<span class="kd">def</span> <span class="n">CatPrdHom</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">CatPrdObj</span> <span class="n">C</span> <span class="n">D</span><span class="o">)</span> <span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">CatPrdObj</span> <span class="n">C</span> <span class="n">D</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="n">Hom</span> <span class="n">X.1</span> <span class="n">Y.1</span><span class="o">)</span> <span class="bp">×</span> <span class="o">(</span><span class="n">Hom</span> <span class="n">X.2</span> <span class="n">Y.2</span><span class="o">)</span>

<span class="kd">def</span> <span class="n">CatPrdIdn</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">P</span> <span class="o">:</span> <span class="n">CatPrdObj</span> <span class="n">C</span> <span class="n">D</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="n">C.Idn</span> <span class="n">P.1</span><span class="o">,</span> <span class="n">D.Idn</span> <span class="n">P.2</span><span class="o">)</span>

<span class="kd">def</span> <span class="n">CatPrdCmp</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">CatPrdObj</span> <span class="n">C</span> <span class="n">D</span><span class="o">)</span> <span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">CatPrdObj</span> <span class="n">C</span> <span class="n">D</span><span class="o">)</span> <span class="o">(</span><span class="n">Z</span> <span class="o">:</span> <span class="n">CatPrdObj</span> <span class="n">C</span> <span class="n">D</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">CatPrdHom</span> <span class="n">C</span> <span class="n">D</span> <span class="n">X</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">CatPrdHom</span> <span class="n">C</span> <span class="n">D</span> <span class="n">Y</span> <span class="n">Z</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="n">C.Cmp</span> <span class="n">X.1</span> <span class="n">Y.1</span> <span class="n">Z.1</span> <span class="n">f.1</span> <span class="n">g.1</span><span class="o">,</span> <span class="n">D.Cmp</span> <span class="n">X.2</span> <span class="n">Y.2</span> <span class="n">Z.2</span> <span class="n">f.2</span> <span class="n">g.2</span><span class="o">)</span>
<span class="kd">theorem</span> <span class="n">CatPrdId1A</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">CatPrdObj</span> <span class="n">C</span> <span class="n">D</span><span class="o">)</span> <span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">CatPrdObj</span> <span class="n">C</span> <span class="n">D</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">CatPrdHom</span> <span class="n">C</span> <span class="n">D</span> <span class="n">X</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">CatPrdCmp</span> <span class="n">C</span> <span class="n">D</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">Y</span> <span class="n">f</span> <span class="o">(</span><span class="n">CatPrdIdn</span> <span class="n">C</span> <span class="n">D</span> <span class="n">Y</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">C.Cmp</span> <span class="n">X.1</span> <span class="n">Y.1</span> <span class="n">Y.1</span> <span class="n">f.1</span> <span class="o">(</span><span class="n">C.Idn</span> <span class="n">Y.1</span><span class="o">),</span> <span class="n">D.Cmp</span> <span class="n">X.2</span> <span class="n">Y.2</span> <span class="n">Y.2</span> <span class="n">f.2</span> <span class="o">(</span><span class="n">D.Idn</span> <span class="n">Y.2</span><span class="o">)))</span> <span class="o">:=</span> <span class="n">Eq.refl</span> <span class="o">(</span><span class="n">C.Cmp</span> <span class="n">X.1</span> <span class="n">Y.1</span> <span class="n">Y.1</span> <span class="n">f.1</span> <span class="o">(</span><span class="n">C.Idn</span> <span class="n">Y.1</span><span class="o">),</span> <span class="n">D.Cmp</span> <span class="n">X.2</span> <span class="n">Y.2</span> <span class="n">Y.2</span> <span class="n">f.2</span> <span class="o">(</span><span class="n">D.Idn</span> <span class="n">Y.2</span><span class="o">))</span>

<span class="kd">theorem</span> <span class="n">CatPrdId1B</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">CatPrdObj</span> <span class="n">C</span> <span class="n">D</span><span class="o">)</span> <span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">CatPrdObj</span> <span class="n">C</span> <span class="n">D</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">CatPrdHom</span> <span class="n">C</span> <span class="n">D</span> <span class="n">X</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">C.Cmp</span> <span class="n">X.1</span> <span class="n">Y.1</span> <span class="n">Y.1</span> <span class="n">f.1</span> <span class="o">(</span><span class="n">C.Idn</span> <span class="n">Y.1</span><span class="o">),</span> <span class="n">D.Cmp</span> <span class="n">X.2</span> <span class="n">Y.2</span> <span class="n">Y.2</span> <span class="n">f.2</span> <span class="o">(</span><span class="n">D.Idn</span> <span class="n">Y.2</span><span class="o">))</span> <span class="bp">=</span> <span class="o">(</span><span class="n">f.1</span><span class="o">,</span> <span class="n">f.2</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="n">C.Id1</span> <span class="n">X.1</span> <span class="n">Y.1</span> <span class="n">f.1</span><span class="o">)</span> <span class="bp">▸</span> <span class="o">(</span><span class="n">D.Id1</span> <span class="n">X.2</span> <span class="n">Y.2</span> <span class="n">f.2</span><span class="o">)</span>
<span class="c1">--def CatPrd (C : Cat) (D : Cat) : Cat2 := {Obj := CatPrdObj C D, Hom := CatPrdHom C D, Idn := CatPrdIdn C D, Cmp := CatPrdCmp C D, Id1 := CatPrdId1A C D}</span>
</code></pre></div>
<p>I figured out that this ▸ isn't doing what I want. I just need a simple F which takes in p : a = b and q : c = d and gives F p q : (a, c) = (b, d). But congr and  ▸ aren't working for me.</p>



<a name="322650618"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/product%20of%20categories/near/322650618" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kind Bubble <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/product.20of.20categories.html#322650618">(Jan 21 2023 at 02:01)</a>:</h4>
<p><span class="user-mention silent" data-user-id="559197">Kind Bubble</span> <a href="#narrow/stream/270676-lean4/topic/product.20of.20categories/near/322649145">said</a>:</p>
<blockquote>
<p>Hi all!</p>
<p>I've moved my question over here to the lean4 stream to see if it could get an answer. Right now CatPrdId1B is giving me trouble and I can't figure out why.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">Init.Data.ToString.Basic</span>
<span class="kd">universe</span> <span class="n">u</span>
<span class="kd">universe</span> <span class="n">v</span>

<span class="c1">-- Construction of the category of categories</span>

<span class="kd">structure</span> <span class="n">Cat</span> <span class="n">where</span>
  <span class="n">Obj</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span>
  <span class="n">Hom</span> <span class="o">:</span> <span class="bp">∀</span><span class="o">(</span><span class="n">_</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span><span class="bp">∀</span><span class="o">(</span><span class="n">_</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span> <span class="kt">Type</span> <span class="n">v</span>
  <span class="n">Idn</span> <span class="o">:</span> <span class="bp">∀</span><span class="o">(</span><span class="n">X</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span><span class="n">Hom</span> <span class="n">X</span> <span class="n">X</span>
  <span class="n">Cmp</span> <span class="o">:</span> <span class="bp">∀</span><span class="o">(</span><span class="n">X</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span><span class="bp">∀</span><span class="o">(</span><span class="n">Y</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span><span class="bp">∀</span><span class="o">(</span><span class="n">Z</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span><span class="bp">∀</span><span class="o">(</span><span class="n">_</span><span class="o">:</span><span class="n">Hom</span> <span class="n">X</span> <span class="n">Y</span><span class="o">),</span><span class="bp">∀</span><span class="o">(</span><span class="n">_</span><span class="o">:</span><span class="n">Hom</span> <span class="n">Y</span> <span class="n">Z</span><span class="o">),</span><span class="n">Hom</span> <span class="n">X</span> <span class="n">Z</span>
  <span class="n">Id1</span> <span class="o">:</span> <span class="bp">∀</span><span class="o">(</span><span class="n">X</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span><span class="bp">∀</span><span class="o">(</span><span class="n">Y</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span><span class="bp">∀</span><span class="o">(</span><span class="n">f</span><span class="o">:</span><span class="n">Hom</span> <span class="n">X</span> <span class="n">Y</span><span class="o">),(</span><span class="n">Cmp</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">Y</span><span class="o">)</span> <span class="n">f</span> <span class="o">(</span><span class="n">Idn</span> <span class="n">Y</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f</span>
  <span class="n">Id2</span> <span class="o">:</span> <span class="bp">∀</span><span class="o">(</span><span class="n">X</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span><span class="bp">∀</span><span class="o">(</span><span class="n">Y</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span><span class="bp">∀</span><span class="o">(</span><span class="n">f</span><span class="o">:</span><span class="n">Hom</span> <span class="n">X</span> <span class="n">Y</span><span class="o">),(</span><span class="n">Cmp</span> <span class="n">X</span> <span class="n">X</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">Idn</span> <span class="n">X</span><span class="o">)</span> <span class="n">f</span> <span class="bp">=</span> <span class="n">f</span>
  <span class="n">Ass</span> <span class="o">:</span> <span class="bp">∀</span><span class="o">(</span><span class="n">W</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span><span class="bp">∀</span><span class="o">(</span><span class="n">X</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span><span class="bp">∀</span><span class="o">(</span><span class="n">Y</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span><span class="bp">∀</span><span class="o">(</span><span class="n">Z</span><span class="o">:</span><span class="n">Obj</span><span class="o">),</span><span class="bp">∀</span><span class="o">(</span><span class="n">f</span><span class="o">:</span><span class="n">Hom</span> <span class="n">W</span> <span class="n">X</span><span class="o">),</span><span class="bp">∀</span><span class="o">(</span><span class="n">g</span><span class="o">:</span><span class="n">Hom</span> <span class="n">X</span> <span class="n">Y</span><span class="o">),</span><span class="bp">∀</span><span class="o">(</span><span class="n">h</span><span class="o">:</span><span class="n">Hom</span> <span class="n">Y</span> <span class="n">Z</span><span class="o">),(</span><span class="n">Cmp</span> <span class="n">W</span> <span class="n">X</span> <span class="n">Z</span><span class="o">)</span> <span class="n">f</span> <span class="o">(</span><span class="n">Cmp</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="n">g</span> <span class="n">h</span><span class="o">)</span> <span class="bp">=</span> <span class="n">Cmp</span> <span class="n">W</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">(</span><span class="n">Cmp</span> <span class="n">W</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">f</span> <span class="n">g</span><span class="o">)</span> <span class="n">h</span>
<span class="kd">def</span> <span class="n">Cmp</span> <span class="o">{</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">}</span> <span class="o">{</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">}</span> <span class="o">{</span><span class="n">Y</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">}</span> <span class="o">{</span><span class="n">Z</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">C.Hom</span> <span class="n">X</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">C.Hom</span> <span class="n">Y</span> <span class="n">Z</span><span class="o">)</span> <span class="o">:=</span> <span class="n">C.Cmp</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="n">f</span> <span class="n">g</span>
<span class="kd">notation</span> <span class="n">g</span> <span class="s2">"∘"</span> <span class="n">f</span> <span class="bp">=&gt;</span> <span class="n">Cmp</span> <span class="n">f</span> <span class="n">g</span>

<span class="kd">def</span> <span class="n">Hom</span> <span class="o">{</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">}</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span> <span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span> <span class="o">:=</span> <span class="n">C.Hom</span> <span class="n">X</span> <span class="n">Y</span>
<span class="kd">def</span> <span class="n">Idn</span> <span class="o">{</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">}</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span> <span class="o">:=</span> <span class="n">C.Idn</span> <span class="n">X</span>

<span class="kd">structure</span> <span class="n">Fun</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="n">where</span>
   <span class="n">Obj</span> <span class="o">:</span> <span class="bp">∀</span><span class="o">(</span><span class="n">_</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">),</span><span class="n">D.Obj</span>
   <span class="n">Mor</span> <span class="o">:</span> <span class="bp">∀</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">),</span><span class="bp">∀</span><span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">),</span><span class="bp">∀</span><span class="o">(</span><span class="n">_</span> <span class="o">:</span> <span class="n">C.Hom</span> <span class="n">X</span> <span class="n">Y</span><span class="o">),</span><span class="n">D.Hom</span> <span class="o">(</span><span class="n">Obj</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">Obj</span> <span class="n">Y</span><span class="o">)</span>
   <span class="n">Idn</span> <span class="o">:</span> <span class="bp">∀</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">),</span><span class="n">Mor</span> <span class="n">X</span> <span class="n">X</span> <span class="o">(</span><span class="n">C.Idn</span> <span class="n">X</span><span class="o">)</span> <span class="bp">=</span> <span class="n">D.Idn</span> <span class="o">(</span><span class="n">Obj</span> <span class="n">X</span><span class="o">)</span>
   <span class="n">Cmp</span> <span class="o">:</span> <span class="bp">∀</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">),</span><span class="bp">∀</span><span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">),</span><span class="bp">∀</span><span class="o">(</span><span class="n">Z</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">),</span><span class="bp">∀</span><span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">C.Hom</span> <span class="n">X</span> <span class="n">Y</span><span class="o">),</span><span class="bp">∀</span><span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">C.Hom</span> <span class="n">Y</span> <span class="n">Z</span><span class="o">),</span><span class="n">D.Cmp</span> <span class="o">(</span><span class="n">Obj</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">Obj</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">Obj</span> <span class="n">Z</span><span class="o">)</span> <span class="o">(</span><span class="n">Mor</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">Mor</span> <span class="n">Y</span> <span class="n">Z</span> <span class="n">g</span><span class="o">)</span> <span class="bp">=</span> <span class="n">Mor</span> <span class="n">X</span> <span class="n">Z</span> <span class="o">(</span><span class="n">C.Cmp</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">(</span><span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span><span class="o">))</span>

<span class="kd">def</span> <span class="n">CatIdn</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">:</span> <span class="n">Fun</span> <span class="n">C</span> <span class="n">C</span> <span class="o">:=</span>
<span class="o">{</span><span class="n">Obj</span> <span class="o">:=</span> <span class="k">fun</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="n">X</span><span class="o">,</span> <span class="n">Mor</span> <span class="o">:=</span> <span class="k">fun</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">C.Hom</span> <span class="n">X</span> <span class="n">Y</span><span class="o">)</span><span class="bp">=&gt;</span><span class="n">f</span><span class="o">,</span> <span class="n">Idn</span> <span class="o">:=</span> <span class="k">fun</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="n">Eq.refl</span> <span class="o">(</span><span class="n">C.Idn</span> <span class="n">X</span><span class="o">),</span><span class="n">Cmp</span> <span class="o">:=</span> <span class="k">fun</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">Z</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">C.Hom</span> <span class="n">X</span> <span class="n">Y</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">C.Hom</span> <span class="n">Y</span> <span class="n">Z</span><span class="o">)</span><span class="bp">=&gt;</span><span class="n">Eq.refl</span> <span class="o">(</span><span class="n">C.Cmp</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="n">f</span> <span class="n">g</span><span class="o">)}</span>

<span class="kd">def</span> <span class="n">CatCmp</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">E</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="n">Fun</span> <span class="n">C</span> <span class="n">D</span><span class="o">)</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="n">Fun</span> <span class="n">D</span> <span class="n">E</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">Fun</span> <span class="n">C</span> <span class="n">E</span><span class="o">):=</span>
<span class="o">{</span><span class="n">Obj</span> <span class="o">:=</span> <span class="k">fun</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="o">(</span><span class="n">G.Obj</span> <span class="o">(</span><span class="n">F.Obj</span> <span class="n">X</span><span class="o">)),</span><span class="n">Mor</span> <span class="o">:=</span> <span class="k">fun</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">C.Hom</span> <span class="n">X</span> <span class="n">Y</span><span class="o">)</span><span class="bp">=&gt;</span><span class="o">(</span><span class="n">G.Mor</span><span class="o">)</span> <span class="o">(</span><span class="n">F.Obj</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">F.Obj</span> <span class="n">Y</span><span class="o">)</span> <span class="o">((</span><span class="n">F.Mor</span><span class="o">)</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">f</span><span class="o">),</span><span class="n">Idn</span> <span class="o">:=</span> <span class="k">fun</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span> <span class="o">((</span><span class="n">Eq.trans</span><span class="o">)</span> <span class="o">(</span><span class="n">congrArg</span> <span class="o">(</span><span class="n">G.Mor</span> <span class="o">(</span><span class="n">F.Obj</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">F.Obj</span> <span class="n">X</span><span class="o">))</span> <span class="o">(</span><span class="n">F.Idn</span> <span class="n">X</span><span class="o">)</span> <span class="o">)</span> <span class="o">(</span><span class="n">G.Idn</span> <span class="o">(</span><span class="n">F.Obj</span> <span class="n">X</span><span class="o">))),</span><span class="n">Cmp</span> <span class="o">:=</span> <span class="k">fun</span><span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">Z</span> <span class="o">:</span> <span class="n">C.Obj</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">C.Hom</span> <span class="n">X</span> <span class="n">Y</span><span class="o">)</span><span class="bp">=&gt;</span><span class="k">fun</span><span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">C.Hom</span> <span class="n">Y</span> <span class="n">Z</span><span class="o">)</span><span class="bp">=&gt;</span><span class="o">((</span><span class="n">Eq.trans</span><span class="o">)</span> <span class="o">(</span><span class="n">G.Cmp</span> <span class="o">(</span><span class="n">F.Obj</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">F.Obj</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">F.Obj</span> <span class="n">Z</span><span class="o">)</span> <span class="o">(</span><span class="n">F.Mor</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">F.Mor</span> <span class="n">Y</span> <span class="n">Z</span> <span class="n">g</span><span class="o">))</span> <span class="o">(</span><span class="n">congrArg</span> <span class="o">(</span><span class="n">G.Mor</span> <span class="o">(</span><span class="n">F.Obj</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">F.Obj</span> <span class="n">Z</span><span class="o">))</span> <span class="o">(</span><span class="n">F.Cmp</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="n">f</span> <span class="n">g</span><span class="o">)))}</span>

<span class="kd">def</span> <span class="n">CatId1</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="n">Fun</span> <span class="n">C</span> <span class="n">D</span><span class="o">)</span> <span class="o">:</span> <span class="o">((</span><span class="n">CatCmp</span> <span class="n">C</span> <span class="n">D</span> <span class="n">D</span><span class="o">)</span> <span class="n">F</span> <span class="o">(</span><span class="n">CatIdn</span> <span class="n">D</span><span class="o">)</span> <span class="bp">=</span> <span class="n">F</span><span class="o">)</span> <span class="o">:=</span> <span class="n">Eq.refl</span> <span class="n">F</span>

<span class="kd">def</span> <span class="n">CatId2</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="n">Fun</span> <span class="n">C</span> <span class="n">D</span><span class="o">)</span> <span class="o">:</span> <span class="o">((</span><span class="n">CatCmp</span> <span class="n">C</span> <span class="n">C</span> <span class="n">D</span><span class="o">)</span> <span class="o">(</span><span class="n">CatIdn</span> <span class="n">C</span><span class="o">)</span> <span class="n">F</span> <span class="bp">=</span> <span class="n">F</span><span class="o">)</span> <span class="o">:=</span> <span class="n">Eq.refl</span> <span class="n">F</span>

<span class="kd">def</span> <span class="n">CatAss</span> <span class="o">(</span><span class="n">B</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">E</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="n">Fun</span> <span class="n">B</span> <span class="n">C</span><span class="o">)</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="n">Fun</span> <span class="n">C</span> <span class="n">D</span><span class="o">)</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="n">Fun</span> <span class="n">D</span> <span class="n">E</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">CatCmp</span> <span class="n">B</span> <span class="n">C</span> <span class="n">E</span> <span class="n">F</span> <span class="o">(</span><span class="n">CatCmp</span> <span class="n">C</span> <span class="n">D</span> <span class="n">E</span> <span class="n">G</span> <span class="n">H</span><span class="o">)</span> <span class="bp">=</span> <span class="n">CatCmp</span> <span class="n">B</span> <span class="n">D</span> <span class="n">E</span> <span class="o">(</span><span class="n">CatCmp</span> <span class="n">B</span> <span class="n">C</span> <span class="n">D</span> <span class="n">F</span> <span class="n">G</span><span class="o">)</span> <span class="n">H</span><span class="o">)</span> <span class="o">:=</span> <span class="n">Eq.refl</span> <span class="o">(</span><span class="n">CatCmp</span> <span class="n">B</span> <span class="n">C</span> <span class="n">E</span> <span class="n">F</span> <span class="o">(</span><span class="n">CatCmp</span> <span class="n">C</span> <span class="n">D</span> <span class="n">E</span> <span class="n">G</span> <span class="n">H</span><span class="o">))</span>

<span class="kd">def</span> <span class="n">Cats</span> <span class="o">:</span> <span class="n">Cat</span> <span class="o">:=</span> <span class="o">{</span><span class="n">Obj</span> <span class="o">:=</span> <span class="n">Cat</span><span class="o">,</span><span class="n">Hom</span> <span class="o">:=</span> <span class="n">Fun</span><span class="o">,</span><span class="n">Idn</span> <span class="o">:=</span> <span class="n">CatIdn</span><span class="o">,</span><span class="n">Cmp</span> <span class="o">:=</span> <span class="n">CatCmp</span><span class="o">,</span><span class="n">Id1</span> <span class="o">:=</span> <span class="n">CatId1</span><span class="o">,</span><span class="n">Id2</span> <span class="o">:=</span> <span class="n">CatId2</span><span class="o">,</span><span class="n">Ass</span> <span class="o">:=</span> <span class="n">CatAss</span><span class="o">}</span>

<span class="c1">-- Construction of the product of categories</span>

<span class="kd">def</span> <span class="n">CatPrdObj</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">:=</span> <span class="n">C.Obj</span> <span class="bp">×</span> <span class="n">D.Obj</span>

<span class="kd">def</span> <span class="n">CatPrdHom</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">CatPrdObj</span> <span class="n">C</span> <span class="n">D</span><span class="o">)</span> <span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">CatPrdObj</span> <span class="n">C</span> <span class="n">D</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="n">Hom</span> <span class="n">X.1</span> <span class="n">Y.1</span><span class="o">)</span> <span class="bp">×</span> <span class="o">(</span><span class="n">Hom</span> <span class="n">X.2</span> <span class="n">Y.2</span><span class="o">)</span>

<span class="kd">def</span> <span class="n">CatPrdIdn</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">P</span> <span class="o">:</span> <span class="n">CatPrdObj</span> <span class="n">C</span> <span class="n">D</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="n">C.Idn</span> <span class="n">P.1</span><span class="o">,</span> <span class="n">D.Idn</span> <span class="n">P.2</span><span class="o">)</span>

<span class="kd">def</span> <span class="n">CatPrdCmp</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">CatPrdObj</span> <span class="n">C</span> <span class="n">D</span><span class="o">)</span> <span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">CatPrdObj</span> <span class="n">C</span> <span class="n">D</span><span class="o">)</span> <span class="o">(</span><span class="n">Z</span> <span class="o">:</span> <span class="n">CatPrdObj</span> <span class="n">C</span> <span class="n">D</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">CatPrdHom</span> <span class="n">C</span> <span class="n">D</span> <span class="n">X</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">CatPrdHom</span> <span class="n">C</span> <span class="n">D</span> <span class="n">Y</span> <span class="n">Z</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="n">C.Cmp</span> <span class="n">X.1</span> <span class="n">Y.1</span> <span class="n">Z.1</span> <span class="n">f.1</span> <span class="n">g.1</span><span class="o">,</span> <span class="n">D.Cmp</span> <span class="n">X.2</span> <span class="n">Y.2</span> <span class="n">Z.2</span> <span class="n">f.2</span> <span class="n">g.2</span><span class="o">)</span>
<span class="kd">theorem</span> <span class="n">CatPrdId1A</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">CatPrdObj</span> <span class="n">C</span> <span class="n">D</span><span class="o">)</span> <span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">CatPrdObj</span> <span class="n">C</span> <span class="n">D</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">CatPrdHom</span> <span class="n">C</span> <span class="n">D</span> <span class="n">X</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">CatPrdCmp</span> <span class="n">C</span> <span class="n">D</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">Y</span> <span class="n">f</span> <span class="o">(</span><span class="n">CatPrdIdn</span> <span class="n">C</span> <span class="n">D</span> <span class="n">Y</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">C.Cmp</span> <span class="n">X.1</span> <span class="n">Y.1</span> <span class="n">Y.1</span> <span class="n">f.1</span> <span class="o">(</span><span class="n">C.Idn</span> <span class="n">Y.1</span><span class="o">),</span> <span class="n">D.Cmp</span> <span class="n">X.2</span> <span class="n">Y.2</span> <span class="n">Y.2</span> <span class="n">f.2</span> <span class="o">(</span><span class="n">D.Idn</span> <span class="n">Y.2</span><span class="o">)))</span> <span class="o">:=</span> <span class="n">Eq.refl</span> <span class="o">(</span><span class="n">C.Cmp</span> <span class="n">X.1</span> <span class="n">Y.1</span> <span class="n">Y.1</span> <span class="n">f.1</span> <span class="o">(</span><span class="n">C.Idn</span> <span class="n">Y.1</span><span class="o">),</span> <span class="n">D.Cmp</span> <span class="n">X.2</span> <span class="n">Y.2</span> <span class="n">Y.2</span> <span class="n">f.2</span> <span class="o">(</span><span class="n">D.Idn</span> <span class="n">Y.2</span><span class="o">))</span>

<span class="kd">theorem</span> <span class="n">CatPrdId1B</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">CatPrdObj</span> <span class="n">C</span> <span class="n">D</span><span class="o">)</span> <span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">CatPrdObj</span> <span class="n">C</span> <span class="n">D</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">CatPrdHom</span> <span class="n">C</span> <span class="n">D</span> <span class="n">X</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">C.Cmp</span> <span class="n">X.1</span> <span class="n">Y.1</span> <span class="n">Y.1</span> <span class="n">f.1</span> <span class="o">(</span><span class="n">C.Idn</span> <span class="n">Y.1</span><span class="o">),</span> <span class="n">D.Cmp</span> <span class="n">X.2</span> <span class="n">Y.2</span> <span class="n">Y.2</span> <span class="n">f.2</span> <span class="o">(</span><span class="n">D.Idn</span> <span class="n">Y.2</span><span class="o">))</span> <span class="bp">=</span> <span class="o">(</span><span class="n">f.1</span><span class="o">,</span> <span class="n">f.2</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="n">C.Id1</span> <span class="n">X.1</span> <span class="n">Y.1</span> <span class="n">f.1</span><span class="o">)</span> <span class="bp">▸</span> <span class="o">(</span><span class="n">D.Id1</span> <span class="n">X.2</span> <span class="n">Y.2</span> <span class="n">f.2</span><span class="o">)</span>
<span class="c1">--def CatPrd (C : Cat) (D : Cat) : Cat2 := {Obj := CatPrdObj C D, Hom := CatPrdHom C D, Idn := CatPrdIdn C D, Cmp := CatPrdCmp C D, Id1 := CatPrdId1A C D}</span>
</code></pre></div>
<p>I figured out that this ▸ isn't doing what I want. I just need a simple F which takes in p : a = b and q : c = d and gives F p q : (a, c) = (b, d). But congr and  ▸ aren't working for me. Here's the reply that makes me think this:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">Main.lean</span><span class="o">:</span><span class="mi">91</span><span class="o">:</span><span class="mi">215</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="n">type</span> <span class="n">mismatch</span>
  <span class="n">Cat.Id1</span> <span class="n">D</span> <span class="n">X.snd</span> <span class="n">Y.snd</span> <span class="n">f.snd</span>
<span class="n">has</span> <span class="n">type</span>
  <span class="n">Cat.Cmp</span> <span class="n">D</span> <span class="n">X.snd</span> <span class="n">Y.snd</span> <span class="n">Y.snd</span> <span class="n">f.snd</span> <span class="o">(</span><span class="n">Cat.Idn</span> <span class="n">D</span> <span class="n">Y.snd</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f.snd</span> <span class="o">:</span> <span class="kt">Prop</span>
<span class="n">but</span> <span class="n">is</span> <span class="n">expected</span> <span class="n">to</span> <span class="k">have</span> <span class="n">type</span>
  <span class="o">(</span><span class="n">Cat.Cmp</span> <span class="n">C</span> <span class="n">X.fst</span> <span class="n">Y.fst</span> <span class="n">Y.fst</span> <span class="o">(</span><span class="n">Cat.Cmp</span> <span class="n">C</span> <span class="n">X.fst</span> <span class="n">Y.fst</span> <span class="n">Y.fst</span> <span class="n">f.fst</span> <span class="o">(</span><span class="n">Cat.Idn</span> <span class="n">C</span> <span class="n">Y.fst</span><span class="o">))</span> <span class="o">(</span><span class="n">Cat.Idn</span> <span class="n">C</span> <span class="n">Y.fst</span><span class="o">),</span>
      <span class="n">Cat.Cmp</span> <span class="n">D</span> <span class="n">X.snd</span> <span class="n">Y.snd</span> <span class="n">Y.snd</span> <span class="n">f.snd</span> <span class="o">(</span><span class="n">Cat.Idn</span> <span class="n">D</span> <span class="n">Y.snd</span><span class="o">))</span> <span class="bp">=</span>
    <span class="o">(</span><span class="n">Cat.Cmp</span> <span class="n">C</span> <span class="n">X.fst</span> <span class="n">Y.fst</span> <span class="n">Y.fst</span> <span class="n">f.fst</span> <span class="o">(</span><span class="n">Cat.Idn</span> <span class="n">C</span> <span class="n">Y.fst</span><span class="o">),</span> <span class="n">f.snd</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span>
</code></pre></div>
</blockquote>



<a name="322651592"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/product%20of%20categories/near/322651592" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kind Bubble <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/product.20of.20categories.html#322651592">(Jan 21 2023 at 02:14)</a>:</h4>
<p>Aha! ok here's a <em>much</em> simpler problem:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">p</span> <span class="o">:</span> <span class="o">(</span><span class="mi">1</span><span class="bp">+</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">)</span> <span class="o">:=</span> <span class="n">Eq.refl</span> <span class="mi">1</span> <span class="bp">▸</span> <span class="n">Eq.refl</span> <span class="mi">2</span>
</code></pre></div>
<p>gives</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">Main.lean</span><span class="o">:</span><span class="mi">89</span><span class="o">:</span><span class="mi">51</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="n">failed</span> <span class="n">to</span> <span class="n">synthesize</span> <span class="kd">instance</span>
  <span class="n">OfNat</span> <span class="o">(</span><span class="n">Nat</span> <span class="bp">×</span> <span class="n">Nat</span><span class="o">)</span> <span class="mi">2</span>
<span class="n">Main.lean</span><span class="o">:</span><span class="mi">93</span><span class="o">:</span><span class="mi">215</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="n">type</span> <span class="n">mismatch</span>
  <span class="n">Cat.Id1</span> <span class="n">D</span> <span class="n">X.snd</span> <span class="n">Y.snd</span> <span class="n">f.snd</span>
<span class="n">has</span> <span class="n">type</span>
  <span class="n">Cat.Cmp</span> <span class="n">D</span> <span class="n">X.snd</span> <span class="n">Y.snd</span> <span class="n">Y.snd</span> <span class="n">f.snd</span> <span class="o">(</span><span class="n">Cat.Idn</span> <span class="n">D</span> <span class="n">Y.snd</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f.snd</span> <span class="o">:</span> <span class="kt">Prop</span>
<span class="n">but</span> <span class="n">is</span> <span class="n">expected</span> <span class="n">to</span> <span class="k">have</span> <span class="n">type</span>
  <span class="o">(</span><span class="n">Cat.Cmp</span> <span class="n">C</span> <span class="n">X.fst</span> <span class="n">Y.fst</span> <span class="n">Y.fst</span> <span class="o">(</span><span class="n">Cat.Cmp</span> <span class="n">C</span> <span class="n">X.fst</span> <span class="n">Y.fst</span> <span class="n">Y.fst</span> <span class="n">f.fst</span> <span class="o">(</span><span class="n">Cat.Idn</span> <span class="n">C</span> <span class="n">Y.fst</span><span class="o">))</span> <span class="o">(</span><span class="n">Cat.Idn</span> <span class="n">C</span> <span class="n">Y.fst</span><span class="o">),</span>
      <span class="n">Cat.Cmp</span> <span class="n">D</span> <span class="n">X.snd</span> <span class="n">Y.snd</span> <span class="n">Y.snd</span> <span class="n">f.snd</span> <span class="o">(</span><span class="n">Cat.Idn</span> <span class="n">D</span> <span class="n">Y.snd</span><span class="o">))</span> <span class="bp">=</span>
    <span class="o">(</span><span class="n">Cat.Cmp</span> <span class="n">C</span> <span class="n">X.fst</span> <span class="n">Y.fst</span> <span class="n">Y.fst</span> <span class="n">f.fst</span> <span class="o">(</span><span class="n">Cat.Idn</span> <span class="n">C</span> <span class="n">Y.fst</span><span class="o">),</span> <span class="n">f.snd</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span>
<span class="n">f</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:</span> <span class="n">Nat</span>
</code></pre></div>



<a name="322652659"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/product%20of%20categories/near/322652659" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kind Bubble <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/product.20of.20categories.html#322652659">(Jan 21 2023 at 02:30)</a>:</h4>
<p>can anyone solve my puzzle <em>exactly</em>?</p>
<p>Here it is:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">universe</span> <span class="n">u</span>
<span class="kd">universe</span> <span class="n">v</span>
<span class="kd">def</span> <span class="n">F</span> <span class="o">{</span><span class="n">A</span> <span class="o">:</span> <span class="n">u</span><span class="o">}</span> <span class="o">{</span><span class="n">B</span> <span class="o">:</span> <span class="n">u</span><span class="o">}</span> <span class="o">{</span><span class="n">a1</span> <span class="o">:</span> <span class="n">A</span><span class="o">}</span> <span class="o">{</span><span class="n">a2</span> <span class="o">:</span> <span class="n">A</span><span class="o">}</span> <span class="o">{</span><span class="n">b1</span> <span class="o">:</span> <span class="n">B</span><span class="o">}</span> <span class="o">{</span><span class="n">b2</span> <span class="o">:</span> <span class="n">B</span><span class="o">}</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">a1</span> <span class="bp">=</span> <span class="n">b1</span><span class="o">)</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">a2</span> <span class="bp">=</span> <span class="n">b2</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">a1</span><span class="o">,</span> <span class="n">a2</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">b1</span><span class="o">,</span> <span class="n">b2</span><span class="o">)</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div>



<a name="322656351"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/product%20of%20categories/near/322656351" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/product.20of.20categories.html#322656351">(Jan 21 2023 at 03:14)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">CatPrdId1B</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">CatPrdObj</span> <span class="n">C</span> <span class="n">D</span><span class="o">)</span> <span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">CatPrdObj</span> <span class="n">C</span> <span class="n">D</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">CatPrdHom</span> <span class="n">C</span> <span class="n">D</span> <span class="n">X</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">C.Cmp</span> <span class="n">X.1</span> <span class="n">Y.1</span> <span class="n">Y.1</span> <span class="n">f.1</span> <span class="o">(</span><span class="n">C.Idn</span> <span class="n">Y.1</span><span class="o">),</span> <span class="n">D.Cmp</span> <span class="n">X.2</span> <span class="n">Y.2</span> <span class="n">Y.2</span> <span class="n">f.2</span> <span class="o">(</span><span class="n">D.Idn</span> <span class="n">Y.2</span><span class="o">))</span> <span class="bp">=</span> <span class="o">(</span><span class="n">f.1</span><span class="o">,</span> <span class="n">f.2</span><span class="o">)</span> <span class="o">:=</span>
  <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="k">show</span> <span class="o">(</span><span class="n">f.fst</span><span class="o">,</span> <span class="n">f.snd</span><span class="o">)</span> <span class="bp">=</span> <span class="n">_</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="bp">←</span> <span class="n">C.Id1</span> <span class="n">X.1</span> <span class="n">Y.1</span> <span class="n">f.1</span><span class="o">,</span> <span class="bp">←</span> <span class="n">D.Id1</span> <span class="n">X.2</span> <span class="n">Y.2</span> <span class="n">f.2</span><span class="o">]]</span>
</code></pre></div>
<p>I must say, it took me a while to figure out what's going on only because your code is hard to read. Your lines are so long that they don't nearly fit in my editor (the longest one has 481 characters). Also a lot of code is missing spaces in the natural places.</p>



<a name="322656559"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/product%20of%20categories/near/322656559" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/product.20of.20categories.html#322656559">(Jan 21 2023 at 03:17)</a>:</h4>
<p>If you insist of a proof with triangles:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">CatPrdId1B</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="n">Cat</span><span class="o">)</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">CatPrdObj</span> <span class="n">C</span> <span class="n">D</span><span class="o">)</span> <span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">CatPrdObj</span> <span class="n">C</span> <span class="n">D</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">CatPrdHom</span> <span class="n">C</span> <span class="n">D</span> <span class="n">X</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">C.Cmp</span> <span class="n">X.1</span> <span class="n">Y.1</span> <span class="n">Y.1</span> <span class="n">f.1</span> <span class="o">(</span><span class="n">C.Idn</span> <span class="n">Y.1</span><span class="o">),</span> <span class="n">D.Cmp</span> <span class="n">X.2</span> <span class="n">Y.2</span> <span class="n">Y.2</span> <span class="n">f.2</span> <span class="o">(</span><span class="n">D.Idn</span> <span class="n">Y.2</span><span class="o">))</span> <span class="bp">=</span> <span class="o">(</span><span class="n">f.1</span><span class="o">,</span> <span class="n">f.2</span><span class="o">)</span> <span class="o">:=</span>
  <span class="o">(</span><span class="n">C.Id1</span> <span class="n">X.1</span> <span class="n">Y.1</span> <span class="n">f.1</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span> <span class="bp">▸</span> <span class="o">(</span><span class="n">D.Id1</span> <span class="n">X.2</span> <span class="n">Y.2</span> <span class="n">f.2</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span> <span class="bp">▸</span> <span class="n">rfl</span>
</code></pre></div>
<p>The issue with the original proof was that <code>f.fst</code> and <code>f.snd</code> appear on both sides of the equality, and both get rewritten. If you rewrite backward, you only end up rewriting on one side, so you can make progress.</p>



<a name="322656734"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/product%20of%20categories/near/322656734" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kind Bubble <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/product.20of.20categories.html#322656734">(Jan 21 2023 at 03:19)</a>:</h4>
<p>Thanks so much for your help Adam!</p>
<p>Your feedback is much appreciated since I'm new here. </p>
<p>"Your lines are so long that they don't nearly fit in my editor (the longest one has 481 characters)."</p>
<p>What's a good limit, like 100 or less?</p>



<a name="322656756"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/product%20of%20categories/near/322656756" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/product.20of.20categories.html#322656756">(Jan 21 2023 at 03:20)</a>:</h4>
<p>100 is the standard I think</p>



<a name="322656807"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/product%20of%20categories/near/322656807" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kind Bubble <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/product.20of.20categories.html#322656807">(Jan 21 2023 at 03:20)</a>:</h4>
<p>ok thanks a ton!</p>



<a name="322656841"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/product%20of%20categories/near/322656841" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/product.20of.20categories.html#322656841">(Jan 21 2023 at 03:20)</a>:</h4>
<p>no problem! I might also recommend that you take a look at how category was set up in mathlib.</p>



<a name="322656855"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/product%20of%20categories/near/322656855" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kind Bubble <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/product.20of.20categories.html#322656855">(Jan 21 2023 at 03:21)</a>:</h4>
<p>Oh definitely. Possibly you know a link?</p>



<a name="322656893"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/product%20of%20categories/near/322656893" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/product.20of.20categories.html#322656893">(Jan 21 2023 at 03:21)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/">https://leanprover-community.github.io/mathlib_docs/</a> and navigate to the <code>category_theory</code> folder on the LHS</p>



<a name="322656960"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/product%20of%20categories/near/322656960" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/product.20of.20categories.html#322656960">(Jan 21 2023 at 03:22)</a>:</h4>
<p>If you want the category of categories specifically, here it is <a href="https://leanprover-community.github.io/mathlib_docs/find/category_theory.Cat">docs#category_theory.Cat</a></p>



<a name="322658441"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/product%20of%20categories/near/322658441" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kind Bubble <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/product.20of.20categories.html#322658441">(Jan 21 2023 at 03:42)</a>:</h4>
<p>Thanks Adam!</p>
<p>Before you go, could you explain a bit about this triangle? And more importantly, I actually don't care for this triangle and want to know how you would have done it otherwise.</p>
<p>Also, here's a more general situation that is going to arise a lot for me:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">universe</span> <span class="n">u</span>
<span class="kd">def</span> <span class="n">F</span> <span class="o">{</span><span class="n">A</span> <span class="o">:</span> <span class="n">u</span><span class="o">}</span> <span class="o">{</span><span class="n">B</span> <span class="o">:</span> <span class="n">u</span><span class="o">}</span> <span class="o">{</span><span class="n">a1</span> <span class="o">:</span> <span class="n">A</span><span class="o">}</span> <span class="o">{</span><span class="n">a2</span> <span class="o">:</span> <span class="n">A</span><span class="o">}</span> <span class="o">{</span><span class="n">b1</span> <span class="o">:</span> <span class="n">B</span><span class="o">}</span> <span class="o">{</span><span class="n">b2</span> <span class="o">:</span> <span class="n">B</span><span class="o">}</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">a1</span> <span class="bp">=</span> <span class="n">b1</span><span class="o">)</span> <span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">a2</span> <span class="bp">=</span> <span class="n">b2</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">a1</span><span class="o">,</span> <span class="n">a2</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">b1</span><span class="o">,</span> <span class="n">b2</span><span class="o">)</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div>
<p>What is the ideal way here?</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>