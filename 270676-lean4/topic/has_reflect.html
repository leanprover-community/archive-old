---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/has_reflect.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/has_reflect.html">has_reflect</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="249369660"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/has_reflect/near/249369660" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/has_reflect.html#249369660">(Aug 13 2021 at 14:49)</a>:</h4>
<p>Is there something like Lean3's <code>has_reflect</code> class in Lean 4?</p>



<a name="249369912"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/has_reflect/near/249369912" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/has_reflect.html#249369912">(Aug 13 2021 at 14:51)</a>:</h4>
<p>You should avoid the built-in <code>ToExpr</code> class because it has a broken <code>ToExpr Expr</code> instance.   I've written (and partly copied from Mario's code) a lawful <code>Reflect</code> alternative here: <a href="https://github.com/gebner/quote4/blob/8fd8422dfe2cd5d061754944ca345ffa6061781b/Qq/Reflect.lean">https://github.com/gebner/quote4/blob/8fd8422dfe2cd5d061754944ca345ffa6061781b/Qq/Reflect.lean</a></p>



<a name="249371219"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/has_reflect/near/249371219" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/has_reflect.html#249371219">(Aug 13 2021 at 15:00)</a>:</h4>
<p>If I don't want to use <code>ToExpr Expr</code> is it okay to use the built in class?</p>



<a name="249371495"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/has_reflect/near/249371495" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/has_reflect.html#249371495">(Aug 13 2021 at 15:02)</a>:</h4>
<p>If you want something quick, then sure.  It's fine otherwise.  I'd just avoid having <code>[ToExpr Î±]</code> anywhere (since you could get the <code>ToExpr Expr</code> class accidentally).</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>