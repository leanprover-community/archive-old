---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/language.20server.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/language.20server.html">language server</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="271105120"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/language%20server/near/271105120" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anders Christiansen Sørby <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/language.20server.html#271105120">(Feb 08 2022 at 10:05)</a>:</h4>
<p>I usually develop with nix and use nix develop to set <code>LEAN_PATH</code> and <code>LEAN_SRC_PATH</code> with the respective dependencies. I also add local directories with to <code>LEAN_PATH</code>, but this isn't perfect. Because the language server <code>lean --server</code> complains that there is no .olean files in the local dir. Why can't it just compile them? I want to make several improvements to the Lsp so that it becomes more nix friendly. </p>
<p>On a different note: Would it be possible to integrate the lean parser with <code>tree-sitter</code> so that one doesn't have to reimplement the parser there?</p>



<a name="271105597"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/language%20server/near/271105597" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/language.20server.html#271105597">(Feb 08 2022 at 10:10)</a>:</h4>
<p>You should not have to do any of this. <code>lean-dev/emacs-dev/vscode-dev</code> take care of compiling everything on the fly.</p>



<a name="271106012"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/language%20server/near/271106012" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/language.20server.html#271106012">(Feb 08 2022 at 10:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="433842">Anders Christiansen Sørby</span> <a href="#narrow/stream/270676-lean4/topic/language.20server/near/271105120">said</a>:</p>
<blockquote>
<p>On a different note: Would it be possible to integrate the lean parser with <code>tree-sitter</code> so that one doesn't have to reimplement the parser there?</p>
</blockquote>
<p>A static grammar like Tree-sitter's will never fully understand Lean's dynamic syntax. But writing a tool that generates a Tree-sitter grammar from a given set of Lean modules might be possible.</p>



<a name="271109523"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/language%20server/near/271109523" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anders Christiansen Sørby <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/language.20server.html#271109523">(Feb 08 2022 at 10:47)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110024">Sebastian Ullrich</span> <a href="#narrow/stream/270676-lean4/topic/language.20server/near/271105597">said</a>:</p>
<blockquote>
<p>You should not have to do any of this. <code>lean-dev/emacs-dev/vscode-dev</code> take care of compiling everything on the fly.</p>
</blockquote>
<p>Yes, but I'm using helix editor and it would be nice if the language server itself took care of generating olean files IMO.</p>



<a name="271109604"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/language%20server/near/271109604" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anders Christiansen Sørby <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/language.20server.html#271109604">(Feb 08 2022 at 10:48)</a>:</h4>
<p>Now I have to do it manually with lean</p>



<a name="271109675"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/language%20server/near/271109675" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/language.20server.html#271109675">(Feb 08 2022 at 10:49)</a>:</h4>
<p>Then use <code>lean-dev</code> from your editor, just like <code>emacs-dev</code> and <code>vscode-dev</code> do</p>



<a name="271110504"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/language%20server/near/271110504" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/language.20server.html#271110504">(Feb 08 2022 at 10:57)</a>:</h4>
<p><span class="user-mention" data-user-id="321696">@Julian Berman</span> has been working on a tree sitter parser iiuc <a href="https://github.com/Julian/tree-sitter-lean">https://github.com/Julian/tree-sitter-lean</a></p>



<a name="271111011"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/language%20server/near/271111011" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anders Christiansen Sørby <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/language.20server.html#271111011">(Feb 08 2022 at 11:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110024">Sebastian Ullrich</span> <a href="#narrow/stream/270676-lean4/topic/language.20server/near/271105597">said</a>:</p>
<blockquote>
<p>You should not have to do any of this. <code>lean-dev/emacs-dev/vscode-dev</code> take care of compiling everything on the fly.</p>
</blockquote>
<p>I missed that part. Maybe move/copy it to an editor specific section?</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>