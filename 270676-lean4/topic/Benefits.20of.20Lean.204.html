---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/Benefits.20of.20Lean.204.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Benefits.20of.20Lean.204.html">Benefits of Lean 4</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="304924914"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Benefits%20of%20Lean%204/near/304924914" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Will Fourie <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Benefits.20of.20Lean.204.html#304924914">(Oct 19 2022 at 10:47)</a>:</h4>
<p>Hi all, sorry if this is the wrong channel (was a bit split between this, general, and new members). </p>
<p>I am aware that Lean 4 is quite a big change compared to Lean 3, to the point that Lean 3 code is not compatible with Lean 4 (though there is some hope of an automated translation for at least some areas).</p>
<p>Given the scale of the work therefore required to move the Math Library, I wonder why the new version is worth this cost in time and effort? What does Lean 4 offer compared to Lean 3 that makes it worth it?</p>
<p>I have had a look on the main lean website but haven’t been able to find a specific “smoking gun” that jumped out as being a large upgrade, but this may just be due to me not being familiar enough with Lean to see the downsides of Lean 3.</p>



<a name="304926318"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Benefits%20of%20Lean%204/near/304926318" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Benefits.20of.20Lean.204.html#304926318">(Oct 19 2022 at 10:55)</a>:</h4>
<p>For maths one benefit is a better typeclass system. It is true that there is mounting evidence that Lean 3 is "good enough" for mathematics, but basically we're greedy.</p>



<a name="304926916"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Benefits%20of%20Lean%204/near/304926916" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Benefits.20of.20Lean.204.html#304926916">(Oct 19 2022 at 10:58)</a>:</h4>
<p>Also, compiled tactics will make automation faster.</p>



<a name="304927397"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Benefits%20of%20Lean%204/near/304927397" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marcus Rossel <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Benefits.20of.20Lean.204.html#304927397">(Oct 19 2022 at 11:01)</a>:</h4>
<p>Also, from what I've heard, metaprogramming in Lean 3 had to be done by abusing the monad meant for tactics. In Lean 4 there's a coherent hierarchy of monads for different use cases.</p>



<a name="304928719"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Benefits%20of%20Lean%204/near/304928719" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Will Fourie <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Benefits.20of.20Lean.204.html#304928719">(Oct 19 2022 at 11:09)</a>:</h4>
<p>Great, thanks, I’ll give typeclasses a look in the new Theorem Proving in Lean 4 text. </p>
<p><span class="user-mention" data-user-id="372804">@Marcus Rossel</span>  I am not sure what metaprogramming is or monads in this context, but I’ll give them a look, thanks</p>



<a name="304928823"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Benefits%20of%20Lean%204/near/304928823" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Benefits.20of.20Lean.204.html#304928823">(Oct 19 2022 at 11:10)</a>:</h4>
<p>Also notation will be far more flexible, and mathematicians take notation seriously (the ideal is to have Lean code which looks as close as possible to mathematics written in unicode).</p>
<p>Metaprogramming/monads are to do with how tactics are written.</p>



<a name="304929773"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Benefits%20of%20Lean%204/near/304929773" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marcus Rossel <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Benefits.20of.20Lean.204.html#304929773">(Oct 19 2022 at 11:16)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/270676-lean4/topic/Benefits.20of.20Lean.204/near/304928823">said</a>:</p>
<blockquote>
<p>Metaprogramming/monads are to do with how tactics are written.</p>
</blockquote>
<p>They are also used to define notations/macros. So a better monad stack makes it easier to define (complex) math notation.</p>



<a name="304933183"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Benefits%20of%20Lean%204/near/304933183" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Benefits.20of.20Lean.204.html#304933183">(Oct 19 2022 at 11:37)</a>:</h4>
<p>Some more points:</p>
<ul>
<li>In Lean 4 it is easier to create custom domain specific languages, which may be useful in mathematical projects.</li>
<li>Lean 4 is maintained by the original developers currently, so there is more chance of bug reports receiving expert attention compared with the frozen lean 3.</li>
</ul>



<a name="304933191"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Benefits%20of%20Lean%204/near/304933191" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Will Fourie <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Benefits.20of.20Lean.204.html#304933191">(Oct 19 2022 at 11:37)</a>:</h4>
<p>Ah, thank you for explaining. I guess that also helps answer the question of why Lean 3 code won’t work in Lean 4. If it did, then you’d presumably have to give up that feature due to having to carry tactics over</p>



<a name="304935534"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Benefits%20of%20Lean%204/near/304935534" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Leonardo de Moura <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Benefits.20of.20Lean.204.html#304935534">(Oct 19 2022 at 11:52)</a>:</h4>
<p>We (try to) address this question at the ICERM talk <a href="http://leanprover.github.io/talks/ICERM-2022.pdf">http://leanprover.github.io/talks/ICERM-2022.pdf</a> (starting at slide 20).<br>
The recording is available online here <a href="https://icerm.brown.edu/video_archive/?play=2906">https://icerm.brown.edu/video_archive/?play=2906</a></p>



<a name="304950360"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Benefits%20of%20Lean%204/near/304950360" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Benefits.20of.20Lean.204.html#304950360">(Oct 19 2022 at 13:01)</a>:</h4>
<p>A significant difference that hasn't really been mentioned here is that Lean 4 is a general purpose programming language (while Lean 3 wasn't quite). Having a functional programming language with an extremely expressive type system, that nevertheless compiles to efficient binaries is important for many potential use cases beyond just mathematics. (And the development of a "programming language ecosystem" around Lean 4 will be of immeasurable value even if you were only interested in the mathematics applications. This is part of the reason the library structure is developing differently already, with <code>Std</code> intermediate between the core language and <code>mathlib4</code>.)</p>



<a name="304985125"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Benefits%20of%20Lean%204/near/304985125" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Benefits.20of.20Lean.204.html#304985125">(Oct 19 2022 at 15:49)</a>:</h4>
<p>Another point: accessible FFI with C</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>