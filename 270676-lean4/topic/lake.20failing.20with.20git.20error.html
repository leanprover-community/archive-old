---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/lake.20failing.20with.20git.20error.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/lake.20failing.20with.20git.20error.html">lake failing with git error</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="261875867"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/lake%20failing%20with%20git%20error/near/261875867" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/lake.20failing.20with.20git.20error.html#261875867">(Nov 18 2021 at 01:36)</a>:</h4>
<p>In <a href="https://github.com/leanprover-community/mathlib3-port">https://github.com/leanprover-community/mathlib3-port</a>, the first run of <code>lake build</code>gives various output, amongst which there is <code>error: git exited with code 128</code>.</p>
<p>Subsequent runs just fail with this error:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">$</span> <span class="n">lake</span> <span class="n">build</span>
<span class="n">leanbin</span><span class="o">:</span> <span class="n">trying</span> <span class="n">to</span> <span class="n">update</span> <span class="bp">./</span><span class="n">lean_packages</span><span class="bp">/</span><span class="n">leanbin</span> <span class="n">to</span> <span class="n">revision</span> <span class="n">master</span>
<span class="n">mathlib</span><span class="o">:</span> <span class="n">trying</span> <span class="n">to</span> <span class="n">update</span> <span class="bp">./</span><span class="n">lean_packages</span><span class="bp">/</span><span class="n">mathlib</span> <span class="n">to</span> <span class="n">revision</span> <span class="mi">64</span><span class="n">f9c43eb9a75fb4c5989ac711623d06e9696e60</span>
<span class="n">error</span><span class="o">:</span> <span class="n">git</span> <span class="n">exited</span> <span class="k">with</span> <span class="n">code</span> <span class="mi">128</span>
<span class="n">error</span><span class="o">:</span> <span class="n">build</span> <span class="n">failed</span>
</code></pre></div>



<a name="261875891"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/lake%20failing%20with%20git%20error/near/261875891" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/lake.20failing.20with.20git.20error.html#261875891">(Nov 18 2021 at 01:36)</a>:</h4>
<p>I'd like to know the <code>git</code> command that <code>lake</code> is running in order to diagnose the problem.</p>



<a name="261875900"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/lake%20failing%20with%20git%20error/near/261875900" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/lake.20failing.20with.20git.20error.html#261875900">(Nov 18 2021 at 01:37)</a>:</h4>
<p><span class="user-mention" data-user-id="315577">@Mac</span>  or otherwise, is there a way to uncover this easily?</p>



<a name="261880442"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/lake%20failing%20with%20git%20error/near/261880442" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/lake.20failing.20with.20git.20error.html#261880442">(Nov 18 2021 at 03:00)</a>:</h4>
<p>In the meantime, the problem seems to have gone away. The only thing I seem to have changed is to rename the repository, and the dependent repository, so they don't have <code>-</code> in the name. If that rings any bells, perhaps this is worth investigating. Otherwise, it's just a generic request for better error reporting from lake when git fails!</p>



<a name="261882502"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/lake%20failing%20with%20git%20error/near/261882502" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/lake.20failing.20with.20git.20error.html#261882502">(Nov 18 2021 at 03:38)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span>  feel free to post this issue on Lake (i.e., logging for the executed Git command). Sorry that I haven't be speedily addressing your comments this week. I have been otherwise occupied.</p>



<a name="261884258"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/lake%20failing%20with%20git%20error/near/261884258" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/lake.20failing.20with.20git.20error.html#261884258">(Nov 18 2021 at 04:11)</a>:</h4>
<p>No worries! I'll see if I can make a repro later.</p>



<a name="280582768"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/lake%20failing%20with%20git%20error/near/280582768" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexander Bentkamp <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/lake.20failing.20with.20git.20error.html#280582768">(Apr 29 2022 at 03:37)</a>:</h4>
<p>I just had the same issue. I was able to work around it by manually cloning the dependencies into <code>lean_packages</code>.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>