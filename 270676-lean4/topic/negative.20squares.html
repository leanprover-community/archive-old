---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/negative.20squares.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/negative.20squares.html">negative squares</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="307647089"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/negative%20squares/near/307647089" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/negative.20squares.html#307647089">(Nov 03 2022 at 02:14)</a>:</h4>
<p>Way back in May 2020 we changed the precedence of unary negation to be lower than the power operator in the community edition of lean 3 <a href="https://github.com/leanprover-community/lean/pull/287">lean#287</a> (following <a href="#narrow/stream/113488-general/topic/Negative.20squares/near/197021708">https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Negative.20squares/near/197021708</a>).<br>
In Lean 4 it seems that the defaults are the same as in Lean 3.4.2, so that Lean 4 and Lean 3 community now behave differently when taking (even) powers of negative numbers (eg. integers, floats,...):</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="c1">--Lean 4</span>
<span class="k">#eval</span> <span class="bp">-</span><span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="n">Int</span><span class="o">)</span><span class="bp">^</span><span class="mi">2</span> <span class="c1">--     1</span>
</code></pre></div>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="c1">-- community lean 3</span>
<span class="kn">import</span> <span class="n">data.int.basic</span>
<span class="k">#eval</span> <span class="bp">-</span><span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="n">â„¤</span><span class="o">)</span><span class="bp">^</span><span class="mi">2</span> <span class="c1">--     -1</span>
</code></pre></div>
<p>Was this an intentional choice for Lean 4?<br>
If not (or even if so) is there support for changing this in Lean 4 so that <code>-1^2 = -1</code>.<br>
The motivation is the same as in the thread linked above, this is a less surprising convention mathematically and to users of computer algebra systems this can be a source of copy-paste inconsistencies when moving things to lean.</p>



<a name="307666708"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/negative%20squares/near/307666708" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/negative.20squares.html#307666708">(Nov 03 2022 at 06:59)</a>:</h4>
<p>The precedence of Boolean not <code>!</code> has also changed leading to issues when I was porting <code>data.bool.basic</code></p>



<a name="307684253"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/negative%20squares/near/307684253" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/negative.20squares.html#307684253">(Nov 03 2022 at 09:19)</a>:</h4>
<blockquote>
<p>Was this an intentional choice for Lean 4?</p>
</blockquote>
<p>Recall that Lean 4 has been forked from Lean 3.3.0 :) . So the most probable default answer is "no-one has proposed the corresponding change for Lean 4 so far". If the motivation applies to Lean 4 just as well, I'd say go ahead and PR it.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>