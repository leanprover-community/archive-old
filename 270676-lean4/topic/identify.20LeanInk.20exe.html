---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/identify.20LeanInk.20exe.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/identify.20LeanInk.20exe.html">identify LeanInk exe</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="306561597"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/identify%20LeanInk%20exe/near/306561597" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/identify.20LeanInk.20exe.html#306561597">(Oct 28 2022 at 00:21)</a>:</h4>
<p>I'm trying to use <a href="https://github.com/leanprover/LeanInk">LeanInk</a>.  I think I must be using the wrong <code>leanInk</code>.  When I try to use leanInk on one of the <a href="https://github.com/leanprover/LeanInk/tree/main/test/playground">tests provided</a>, either with</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">%</span> <span class="n">leanInk</span> <span class="n">a</span> <span class="n">test</span><span class="bp">/</span><span class="n">playground</span><span class="bp">/</span><span class="n">Simple.lean</span>
</code></pre></div>
<p>or</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">%</span> <span class="n">build</span><span class="bp">/</span><span class="n">bin</span><span class="bp">/</span><span class="n">leanInk</span> <span class="n">a</span> <span class="n">test</span><span class="bp">/</span><span class="n">playground</span><span class="bp">/</span><span class="n">Simple.lean</span>
</code></pre></div>
<p>I get almost nothing out:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">%</span> <span class="n">cat</span> <span class="n">test</span><span class="bp">/</span><span class="n">playground</span><span class="bp">/</span><span class="n">Simple.lean.leanInk</span>
<span class="o">[{</span><span class="s2">"contents"</span><span class="o">:</span><span class="s2">"def add (x y : Nat) := x + y"</span><span class="o">,</span><span class="s2">"_type"</span><span class="o">:</span><span class="s2">"text"</span><span class="o">}]</span><span class="bp">%</span>
</code></pre></div>
<p>But the test script passes:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">%</span> <span class="n">lake</span> <span class="n">script</span> <span class="n">run</span> <span class="n">tests</span>
<span class="n">Running</span> <span class="n">diff</span> <span class="n">tests</span> <span class="n">for</span> <span class="n">leanInk</span>
<span class="n">Running</span> <span class="n">test</span> <span class="bp">./</span><span class="n">test</span><span class="bp">/</span><span class="n">bench</span><span class="bp">/</span><span class="n">Basic.lean</span> <span class="n">using</span> <span class="n">lake...</span>
  <span class="n">SUCCESS</span>
<span class="n">Running</span> <span class="n">test</span> <span class="bp">./</span><span class="n">test</span><span class="bp">/</span><span class="n">playground</span><span class="bp">/</span><span class="n">playground_2.lean...</span>
  <span class="n">SUCCESS</span>
<span class="n">Running</span> <span class="n">test</span> <span class="bp">./</span><span class="n">test</span><span class="bp">/</span><span class="n">playground</span><span class="bp">/</span><span class="n">infoTree.lean...</span>
  <span class="n">SUCCESS</span>
<span class="n">Running</span> <span class="n">test</span> <span class="bp">./</span><span class="n">test</span><span class="bp">/</span><span class="n">playground</span><span class="bp">/</span><span class="n">playground_3.lean...</span>
  <span class="n">SUCCESS</span>
<span class="n">Running</span> <span class="n">test</span> <span class="bp">./</span><span class="n">test</span><span class="bp">/</span><span class="n">playground</span><span class="bp">/</span><span class="n">Simple.lean...</span>
  <span class="n">SUCCESS</span>
<span class="bp">...</span>
</code></pre></div>
<p>and after running the test script the <code>Simple.lean.leanInk</code> file also looks correct:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">%</span> <span class="n">cat</span> <span class="n">test</span><span class="bp">/</span><span class="n">playground</span><span class="bp">/</span><span class="n">Simple.lean.leanInk</span>
<span class="o">[{</span><span class="s2">"contents"</span><span class="o">:</span>
  <span class="o">[{</span><span class="s2">"typeinfo"</span><span class="o">:</span> <span class="n">null</span><span class="o">,</span>
    <span class="s2">"semanticType"</span><span class="o">:</span> <span class="s2">"Keyword"</span><span class="o">,</span>
    <span class="s2">"raw"</span><span class="o">:</span> <span class="s2">"def"</span><span class="o">,</span>
    <span class="s2">"link"</span><span class="o">:</span> <span class="n">null</span><span class="o">,</span>
    <span class="s2">"docstring"</span><span class="o">:</span> <span class="n">null</span><span class="o">,</span>
    <span class="s2">"_type"</span><span class="o">:</span> <span class="s2">"token"</span><span class="o">},</span>
   <span class="o">{</span><span class="s2">"typeinfo"</span><span class="o">:</span> <span class="n">null</span><span class="o">,</span>
    <span class="s2">"semanticType"</span><span class="o">:</span> <span class="n">null</span><span class="o">,</span>
    <span class="s2">"raw"</span><span class="o">:</span> <span class="s2">" "</span><span class="o">,</span>
    <span class="s2">"link"</span><span class="o">:</span> <span class="n">null</span><span class="o">,</span>
    <span class="s2">"docstring"</span><span class="o">:</span> <span class="n">null</span><span class="o">,</span>
    <span class="s2">"_type"</span><span class="o">:</span> <span class="s2">"token"</span><span class="o">},</span>
   <span class="o">{</span><span class="s2">"typeinfo"</span><span class="o">:</span> <span class="o">{</span><span class="s2">"type"</span><span class="o">:</span> <span class="s2">"Nat → Nat → Nat"</span><span class="o">,</span> <span class="s2">"name"</span><span class="o">:</span> <span class="s2">"add"</span><span class="o">,</span> <span class="s2">"_type"</span><span class="o">:</span> <span class="s2">"typeinfo"</span><span class="o">},</span>
    <span class="s2">"semanticType"</span><span class="o">:</span> <span class="s2">"Name.Variable"</span><span class="o">,</span>
    <span class="s2">"raw"</span><span class="o">:</span> <span class="s2">"add"</span><span class="o">,</span>
    <span class="s2">"link"</span><span class="o">:</span> <span class="n">null</span><span class="o">,</span>
    <span class="s2">"docstring"</span><span class="o">:</span> <span class="n">null</span><span class="o">,</span>
    <span class="s2">"_type"</span><span class="o">:</span> <span class="s2">"token"</span><span class="o">},</span>
   <span class="o">{</span><span class="s2">"typeinfo"</span><span class="o">:</span> <span class="n">null</span><span class="o">,</span>
    <span class="s2">"semanticType"</span><span class="o">:</span> <span class="n">null</span><span class="o">,</span>
<span class="bp">...</span>
</code></pre></div>



<a name="306561701"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/identify%20LeanInk%20exe/near/306561701" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/identify.20LeanInk.20exe.html#306561701">(Oct 28 2022 at 00:22)</a>:</h4>
<p>Could someone help me figure out from the <a href="https://github.com/leanprover/LeanInk/blob/main/lakefile.lean">test script</a> where it is finding its good <code>leanInk</code>, so that I can also use that one?</p>



<a name="306562367"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/identify%20LeanInk%20exe/near/306562367" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/identify.20LeanInk.20exe.html#306562367">(Oct 28 2022 at 00:31)</a>:</h4>
<p>Not sure if this helps you for what you are doing or not if you are just experimenting, but I literally just set up <code>doc-gen4</code> (which builds leanInk files by default) on a project and it was fairly straightforward following <a href="https://github.com/leanprover/doc-gen4">https://github.com/leanprover/doc-gen4</a>:<br>
In the <code>lakefile.lean</code> I added</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">meta</span> <span class="k">if</span> <span class="n">get_config</span><span class="bp">?</span> <span class="n">env</span> <span class="bp">=</span> <span class="n">some</span> <span class="s2">"dev"</span> <span class="k">then</span> <span class="c1">-- dev is so not everyone has to build it</span>
<span class="n">require</span> <span class="bp">«</span><span class="n">doc</span><span class="bp">-</span><span class="n">gen4</span><span class="bp">»</span> <span class="k">from</span> <span class="n">git</span> <span class="s2">"https://github.com/leanprover/doc-gen4"</span> <span class="bp">@</span> <span class="s2">"main"</span>
</code></pre></div>
<p>then ran</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">lake</span> <span class="bp">-</span><span class="n">Kenv</span><span class="bp">=</span><span class="n">dev</span> <span class="n">update</span>
<span class="n">lake</span> <span class="bp">-</span><span class="n">Kenv</span><span class="bp">=</span><span class="n">dev</span> <span class="n">build</span> <span class="n">MyPackageName</span><span class="o">:</span><span class="n">docs</span>
</code></pre></div>
<p>and in <code>build/doc</code> I have a nice copy of dec-gen4 with links to the leanInk version of all my files</p>



<a name="306570554"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/identify%20LeanInk%20exe/near/306570554" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/identify.20LeanInk.20exe.html#306570554">(Oct 28 2022 at 01:22)</a>:</h4>
<p>The <code>master</code> LeanInk supports tactic  infos only. doc-gen4 and the Lean docs use a fork that adds term information.</p>



<a name="306570655"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/identify%20LeanInk%20exe/near/306570655" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/identify.20LeanInk.20exe.html#306570655">(Oct 28 2022 at 01:24)</a>:</h4>
<p><span class="user-mention" data-user-id="110024">@Sebastian Ullrich</span>, thanks for the reply.  Since the tests seem to be working correctly, are you saying that somehow the tests are obtaining and running a fork of LeanInk?</p>



<a name="306570896"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/identify%20LeanInk%20exe/near/306570896" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/identify.20LeanInk.20exe.html#306570896">(Oct 28 2022 at 01:29)</a>:</h4>
<p>Oh I completely missed that you were running the same file twice. In that case you're just missing command line arguments enabling the extra term info: <a href="https://github.com/leanprover/LeanInk/blob/main/lakefile.lean#L26">https://github.com/leanprover/LeanInk/blob/main/lakefile.lean#L26</a></p>



<a name="306571054"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/identify%20LeanInk%20exe/near/306571054" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/identify.20LeanInk.20exe.html#306571054">(Oct 28 2022 at 01:30)</a>:</h4>
<p>My comments above were also wrong: it's Alectryon we use a fork of for displaying term info, not LeanInk. I shouldn't answer question from my phone on vacation!</p>



<a name="306571328"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/identify%20LeanInk%20exe/near/306571328" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/identify.20LeanInk.20exe.html#306571328">(Oct 28 2022 at 01:34)</a>:</h4>
<p>Aha!  Indeed,</p>
<div class="codehilite" data-code-language="Text only"><pre><span></span><code>% leanInk a test/playground/Simple.lean --x-enable-type-info --x-enable-docStrings --x-enable-semantic-token --prettify-output
</code></pre></div>
<p>gives exactly the same output as the <code>expected</code> file records.  Thanks!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>