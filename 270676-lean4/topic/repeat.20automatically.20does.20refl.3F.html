---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/repeat.20automatically.20does.20refl.3F.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/repeat.20automatically.20does.20refl.3F.html">repeat automatically does refl?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="270864917"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/repeat%20automatically%20does%20refl%3F/near/270864917" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matt Yan <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/repeat.20automatically.20does.20refl.3F.html#270864917">(Feb 06 2022 at 03:15)</a>:</h4>
<p>I have a goal which can be closed by<code>rw lemma, rw lemma, rw lemma, refl,</code>, it turns out <code>repeat {rw lemma},</code> also does the refl for me. Is it built in to all combinators?</p>



<a name="270865203"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/repeat%20automatically%20does%20refl%3F/near/270865203" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/repeat.20automatically.20does.20refl.3F.html#270865203">(Feb 06 2022 at 03:21)</a>:</h4>
<p>Is this actually Lean 4 or 3?</p>



<a name="270865526"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/repeat%20automatically%20does%20refl%3F/near/270865526" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matt Yan <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/repeat.20automatically.20does.20refl.3F.html#270865526">(Feb 06 2022 at 03:28)</a>:</h4>
<p>Then one used in Buzzard's natural number game, I noticed that both <code>rwa</code> and <code>repeat</code> does the <code>refl</code> for you. And thus the shortest proof in <a href="https://www.ma.imperial.ac.uk/~buzzard/xena/natural_number_game/?world=3&amp;level=5">world 3 level 5</a> being </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">induction</span> <span class="n">c</span> <span class="k">with</span> <span class="n">n</span> <span class="n">hn</span><span class="o">,</span>
<span class="n">repeat</span> <span class="o">{</span><span class="n">rw</span> <span class="n">mul_zero</span><span class="o">},</span> <span class="c1">-- does 3 rewrites followed by a refl</span>

<span class="n">rw</span> <span class="n">mul_succ</span><span class="o">,</span>
<span class="n">rwa</span> <span class="o">[</span><span class="n">hn</span><span class="o">,</span> <span class="n">mul_succ</span><span class="o">,</span> <span class="n">mul_add</span><span class="o">],</span> <span class="c1">-- followed by a refl</span>
</code></pre></div>
<p>If this is not version dependent behavior <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> you might want to update the notes a bit</p>



<a name="270866559"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/repeat%20automatically%20does%20refl%3F/near/270866559" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/repeat.20automatically.20does.20refl.3F.html#270866559">(Feb 06 2022 at 03:54)</a>:</h4>
<p><span class="user-mention" data-user-id="476897">@Matt Yan</span> you might have a better chance finding your answer on <a class="stream" data-stream-id="113489" href="/#narrow/stream/113489-new-members">#new members</a>. The natural numbers game uses Lean 3 and this stream is more specific to Lean 4</p>



<a name="270866666"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/repeat%20automatically%20does%20refl%3F/near/270866666" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matt Yan <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/repeat.20automatically.20does.20refl.3F.html#270866666">(Feb 06 2022 at 03:57)</a>:</h4>
<p>Thanks!</p>



<a name="270866723"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/repeat%20automatically%20does%20refl%3F/near/270866723" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matt Yan <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/repeat.20automatically.20does.20refl.3F.html#270866723">(Feb 06 2022 at 03:58)</a>:</h4>
<p>What version is the reference manual based on? <a href="https://leanprover.github.io/reference/index.html">https://leanprover.github.io/reference/index.html</a></p>



<a name="270866858"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/repeat%20automatically%20does%20refl%3F/near/270866858" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/repeat.20automatically.20does.20refl.3F.html#270866858">(Feb 06 2022 at 04:00)</a>:</h4>
<p>That's Lean 3</p>



<a name="270867063"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/repeat%20automatically%20does%20refl%3F/near/270867063" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/repeat.20automatically.20does.20refl.3F.html#270867063">(Feb 06 2022 at 04:04)</a>:</h4>
<p>Also keep in mind that the NNG uses a certain version of Lean 3 that might differ from the version that's largely used by the community in some aspects. I tried searching for the source code of <code>repeat</code> on my smartphone but I had no success</p>



<a name="270867068"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/repeat%20automatically%20does%20refl%3F/near/270867068" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/repeat.20automatically.20does.20refl.3F.html#270867068">(Feb 06 2022 at 04:05)</a>:</h4>
<p>Yes, the answer I believe will have to do with the fact that NNG specifically uses a simplified version of <code>rw</code>.</p>



<a name="270867074"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/repeat%20automatically%20does%20refl%3F/near/270867074" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/repeat.20automatically.20does.20refl.3F.html#270867074">(Feb 06 2022 at 04:05)</a>:</h4>
<p>Normally <code>rw</code> will call <code>refl</code>, but NNG's does not (for pedagogical reasons).</p>



<a name="270867075"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/repeat%20automatically%20does%20refl%3F/near/270867075" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/repeat.20automatically.20does.20refl.3F.html#270867075">(Feb 06 2022 at 04:05)</a>:</h4>
<p>But probably it doesn't similarly cripple <code>repeat</code> or <code>rwa</code>, so you get the normal behavior.</p>



<a name="270867082"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/repeat%20automatically%20does%20refl%3F/near/270867082" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matt Yan <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/repeat.20automatically.20does.20refl.3F.html#270867082">(Feb 06 2022 at 04:06)</a>:</h4>
<p>I see...I do find lean 4 and relevant docs on GitHub and github io, Is there any plan to migrate NNG to lean 4? <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span></p>



<a name="270867126"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/repeat%20automatically%20does%20refl%3F/near/270867126" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/repeat.20automatically.20does.20refl.3F.html#270867126">(Feb 06 2022 at 04:06)</a>:</h4>
<p>This is probably already documented somewhere, but yeah NNG is also a very old version of Lean 3.</p>



<a name="270867143"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/repeat%20automatically%20does%20refl%3F/near/270867143" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/repeat.20automatically.20does.20refl.3F.html#270867143">(Feb 06 2022 at 04:06)</a>:</h4>
<p>Yes I believe it eventually will. But it's still early, Lean 4 is still changing often, and mathlib, the major library for Lean 3, is still not very close to ported to Lean 4, so that will likely happen first.</p>



<a name="270867219"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/repeat%20automatically%20does%20refl%3F/near/270867219" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matt Yan <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/repeat.20automatically.20does.20refl.3F.html#270867219">(Feb 06 2022 at 04:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="321696">Julian Berman</span> <a href="#narrow/stream/270676-lean4/topic/repeat.20automatically.20does.20refl.3F/near/270867126">said</a>:</p>
<blockquote>
<p>This is probably already documented somewhere, but yeah NNG is also a very old version of Lean 3.</p>
</blockquote>
<p>In which case it would still be better if NNG uses the latest stable Lean 3</p>



<a name="270867465"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/repeat%20automatically%20does%20refl%3F/near/270867465" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/repeat.20automatically.20does.20refl.3F.html#270867465">(Feb 06 2022 at 04:14)</a>:</h4>
<p>It's definitely been discussed before, see e.g. <a href="#narrow/stream/113488-general/topic/Adding.20logging.20for.20cases.20where.20oleans.20are.20not.20picked.20up/near/259862000">https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Adding.20logging.20for.20cases.20where.20oleans.20are.20not.20picked.20up/near/259862000</a> -- I don't know if there's a status update but I'd guess Kevin certainly wouldn't mind if someone sent a PR doing so, it likely will involve some fixes it sounds like though.</p>



<a name="270867962"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/repeat%20automatically%20does%20refl%3F/near/270867962" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/repeat.20automatically.20does.20refl.3F.html#270867962">(Feb 06 2022 at 04:27)</a>:</h4>
<p>This topic was moved by <span class="user-mention silent" data-user-id="306601">Kyle Miller</span> to <a class="stream-topic" data-stream-id="113489" href="/#narrow/stream/113489-new-members/topic/repeat.20automatically.20does.20refl.3F">#new members &gt; repeat automatically does refl?</a></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>