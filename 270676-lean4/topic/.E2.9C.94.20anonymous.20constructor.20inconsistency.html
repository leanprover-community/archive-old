---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/.E2.9C.94.20anonymous.20constructor.20inconsistency.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20anonymous.20constructor.20inconsistency.html">âœ” anonymous constructor inconsistency</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="286154858"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20anonymous%20constructor%20inconsistency/near/286154858" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20anonymous.20constructor.20inconsistency.html#286154858">(Jun 15 2022 at 01:45)</a>:</h4>
<p>I'm not sure I would call this a consistency thing. These two syntaxes are very different</p>



<a name="286154967"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20anonymous%20constructor%20inconsistency/near/286154967" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20anonymous.20constructor.20inconsistency.html#286154967">(Jun 15 2022 at 01:47)</a>:</h4>
<p>The main reason to allow the <code>: type }</code> in structure instances (which is something completely specific to structure instances) is because it makes it more reliably pick up the correct <code>field := </code> elements, referring to fields from the expected structure type. (In lean 3, it was not even a full type, it was just the structure name itself like <code>{ ... : Prod }</code>.)</p>



<a name="286155024"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20anonymous%20constructor%20inconsistency/near/286155024" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20anonymous.20constructor.20inconsistency.html#286155024">(Jun 15 2022 at 01:48)</a>:</h4>
<p>This is not really a concern for anonymous constructor brackets since you don't refer to fields by name and you also don't get the field-flattening effect that structure instances get</p>



<a name="286155126"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20anonymous%20constructor%20inconsistency/near/286155126" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20anonymous.20constructor.20inconsistency.html#286155126">(Jun 15 2022 at 01:50)</a>:</h4>
<p>If anything, I would try to make it "more consistent" by seeing whether it is possible to remove the <code>: type }</code> from structure instances and just use type ascription for everything. I know that this feature is used very rarely in mathlib</p>



<a name="286159707"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20anonymous%20constructor%20inconsistency/near/286159707" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yuri de Wit <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20anonymous.20constructor.20inconsistency.html#286159707">(Jun 15 2022 at 03:10)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/270676-lean4/topic/anonymous.20constructor.20inconsistency/near/286155126">said</a>:</p>
<blockquote>
<p>If anything, I would try to make it "more consistent" by seeing whether it is possible to remove the <code>: type }</code> from structure instances and just use type ascription for everything. I know that this feature is used very rarely in mathlib</p>
</blockquote>
<p>Indeed, that also satisfies consistency in a diff way!</p>



<a name="286159714"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20anonymous%20constructor%20inconsistency/near/286159714" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20anonymous.20constructor.20inconsistency.html#286159714">(Jun 15 2022 at 03:10)</a>:</h4>
<p><span class="user-mention silent" data-user-id="463095">Yuri de Wit</span> has marked this topic as resolved.</p>



<a name="286160386"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20anonymous%20constructor%20inconsistency/near/286160386" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> James Gallicchio <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20anonymous.20constructor.20inconsistency.html#286160386">(Jun 15 2022 at 03:24)</a>:</h4>
<p>the <code>{ ... : Prod _ _ }</code> syntax made me think it was type ascribing the last element of the structure, not the whole structure <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>