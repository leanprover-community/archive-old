---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/Beginner.20questions.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html">Beginner questions</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="234211940"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234211940" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234211940">(Apr 12 2021 at 18:59)</a>:</h4>
<p>Hello!</p>
<ol>
<li>How do people navigate the code base? I want to know all the functions I can call on a <code>List</code> - how can I do that?</li>
<li>What do people recommend as good starting <code>theorem</code> examples in Lean4 to get started? I'm looking at the <code>Advent-of-code-lean4</code> repo and that's cool, but I haven't found other repos that are building up code alongside the proofs. Any recommendations? I've started looking at <code>lean4/src/Std/Data/</code>, and proving basic properties of those data structures seems neat.<br>
Thanks!</li>
</ol>



<a name="234215634"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234215634" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234215634">(Apr 12 2021 at 19:25)</a>:</h4>
<ol>
<li>So far, I'm using "grep" (aka vscode find in files) to find the files that deal with <code>List</code> and browse around</li>
<li>You are going to run into lots and lots of problems when proving theorems about programs right now. (See also "Proving findLeast" thread.) The code there might be helpful, as well as the language reference on tactics</li>
</ol>



<a name="234215733"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234215733" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234215733">(Apr 12 2021 at 19:26)</a>:</h4>
<p>Lean 3 is much better suited for proving theorems about programs ATM</p>



<a name="234215799"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234215799" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234215799">(Apr 12 2021 at 19:26)</a>:</h4>
<p>as well as theorems about random mathematics of course</p>



<a name="234215915"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234215915" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234215915">(Apr 12 2021 at 19:27)</a>:</h4>
<p>Even if you ultimately want to prove stuff about a lean 4 program, it might be worthwhile to cut your teeth on lean 3 proving because the infrastructure is much more mature and the skills are very transferrable</p>



<a name="234215956"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234215956" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234215956">(Apr 12 2021 at 19:27)</a>:</h4>
<p>you might even be able to mostly transliterate the proof</p>



<a name="234216003"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234216003" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Selsam <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234216003">(Apr 12 2021 at 19:28)</a>:</h4>
<p>Generally speaking, these functions will be exactly the ones in the <code>List</code> namespace that have an argument of type <code>List _</code>. I don't know of any supported/maintained search facility for this but here is a starting point for now:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">Lean</span>
<span class="kn">open</span> <span class="n">Lean</span> <span class="n">Lean.Meta</span>

<span class="kd">structure</span> <span class="n">FindOptions</span> <span class="n">where</span>
  <span class="n">stage1</span>        <span class="o">:</span> <span class="n">Bool</span> <span class="o">:=</span> <span class="n">true</span>
  <span class="n">checkPrivate</span>  <span class="o">:</span> <span class="n">Bool</span> <span class="o">:=</span> <span class="n">false</span>
  <span class="n">checkInternal</span> <span class="o">:</span> <span class="n">Bool</span> <span class="o">:=</span> <span class="n">false</span>

<span class="kd">def</span> <span class="n">findCore</span> <span class="o">(</span><span class="n">ϕ</span> <span class="o">:</span> <span class="n">ConstantInfo</span> <span class="bp">→</span> <span class="n">MetaM</span> <span class="n">Bool</span><span class="o">)</span> <span class="o">(</span><span class="n">opts</span> <span class="o">:</span> <span class="n">FindOptions</span> <span class="o">:=</span> <span class="o">{})</span> <span class="o">:</span> <span class="n">MetaM</span> <span class="o">(</span><span class="n">Array</span> <span class="n">ConstantInfo</span><span class="o">)</span> <span class="o">:=</span> <span class="k">do</span>
  <span class="k">let</span> <span class="n">matches</span> <span class="bp">←</span> <span class="k">if</span> <span class="bp">!</span><span class="n">opts.stage1</span> <span class="k">then</span> <span class="bp">#</span><span class="o">[]</span> <span class="k">else</span> <span class="o">(</span><span class="bp">←</span> <span class="n">getEnv</span><span class="o">)</span><span class="bp">.</span><span class="kd">constants</span><span class="bp">.</span><span class="n">map₁.foldM</span> <span class="o">(</span><span class="n">init</span> <span class="o">:=</span> <span class="bp">#</span><span class="o">[])</span> <span class="n">check</span>
  <span class="o">(</span><span class="bp">←</span> <span class="n">getEnv</span><span class="o">)</span><span class="bp">.</span><span class="kd">constants</span><span class="bp">.</span><span class="n">map₂.foldlM</span> <span class="o">(</span><span class="n">init</span> <span class="o">:=</span> <span class="n">matches</span><span class="o">)</span> <span class="n">check</span>

  <span class="n">where</span>
    <span class="n">check</span> <span class="n">matches</span> <span class="n">name</span> <span class="n">cinfo</span> <span class="o">:=</span> <span class="k">do</span>
      <span class="k">if</span> <span class="n">isPrivateName</span> <span class="n">name</span> <span class="bp">&amp;&amp;</span> <span class="n">not</span> <span class="n">opts.checkPrivate</span> <span class="k">then</span> <span class="n">pure</span> <span class="n">matches</span>
      <span class="k">else</span> <span class="k">if</span> <span class="n">name.isInternal</span> <span class="bp">&amp;&amp;</span> <span class="n">not</span> <span class="n">opts.checkInternal</span> <span class="k">then</span> <span class="n">pure</span> <span class="n">matches</span>
      <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="bp">←</span> <span class="n">ϕ</span> <span class="n">cinfo</span><span class="o">)</span> <span class="k">then</span> <span class="n">pure</span> <span class="o">(</span><span class="n">matches.push</span> <span class="n">cinfo</span><span class="o">)</span>
      <span class="k">else</span> <span class="n">pure</span> <span class="n">matches</span>

<span class="kd">def</span> <span class="n">find</span> <span class="o">(</span><span class="n">ϕ</span> <span class="o">:</span> <span class="n">ConstantInfo</span> <span class="bp">→</span> <span class="n">MetaM</span> <span class="n">Bool</span><span class="o">)</span> <span class="o">(</span><span class="n">opts</span> <span class="o">:</span> <span class="n">FindOptions</span> <span class="o">:=</span> <span class="o">{})</span> <span class="o">:</span> <span class="n">MetaM</span> <span class="n">Unit</span> <span class="o">:=</span> <span class="k">do</span>
  <span class="k">let</span> <span class="n">cinfos</span> <span class="bp">←</span> <span class="n">findCore</span> <span class="n">ϕ</span> <span class="n">opts</span>
  <span class="k">let</span> <span class="n">cinfos</span> <span class="o">:=</span> <span class="n">cinfos.qsort</span> <span class="o">(</span><span class="k">fun</span> <span class="n">p</span> <span class="n">q</span> <span class="bp">=&gt;</span> <span class="n">p.name.lt</span> <span class="n">q.name</span><span class="o">)</span>
  <span class="n">for</span> <span class="n">cinfo</span> <span class="k">in</span> <span class="n">cinfos</span> <span class="k">do</span>
    <span class="n">println</span><span class="bp">!</span> <span class="s2">"{cinfo.name} : {← Meta.ppExpr cinfo.type}"</span>

<span class="k">#eval</span> <span class="n">println</span><span class="bp">!</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">All declarations in namespace 'List':</span><span class="se">\n</span><span class="s2">"</span>
<span class="k">#eval</span> <span class="n">find</span> <span class="bp">λ</span> <span class="n">cinfo</span> <span class="bp">=&gt;</span> <span class="o">(</span><span class="bp">`</span><span class="n">List</span><span class="o">)</span><span class="bp">.</span><span class="n">isPrefixOf</span> <span class="n">cinfo.name</span>
</code></pre></div>



<a name="234216198"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234216198" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234216198">(Apr 12 2021 at 19:29)</a>:</h4>
<p>Oh hey look it's our old friend <code>#print prefix</code></p>



<a name="234216923"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234216923" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234216923">(Apr 12 2021 at 19:34)</a>:</h4>
<p>You can just use auto completion now. It mostly works!</p>



<a name="234217146"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234217146" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234217146">(Apr 12 2021 at 19:35)</a>:</h4>
<p>Does <code>foo</code> autocomplete to <code>Foo.Bar.foo</code> yet?</p>



<a name="234217277"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234217277" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Selsam <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234217277">(Apr 12 2021 at 19:36)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110024">Sebastian Ullrich</span> <a href="#narrow/stream/270676-lean4/topic/Beginner.20questions/near/234216923">said</a>:</p>
<blockquote>
<p>You can just use auto completion now. It mostly works!</p>
</blockquote>
<p>Cool! Does this work in Emacs? I can't seem to figure out how to trigger it.</p>



<a name="234217283"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234217283" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234217283">(Apr 12 2021 at 19:36)</a>:</h4>
<p>this will be super helpful for hunting down <code>Lean.?.elabTerm</code> stuff</p>



<a name="234217410"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234217410" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234217410">(Apr 12 2021 at 19:37)</a>:</h4>
<p>Oh, also can the hover print the fully qualified name? It's nice to be able to hover over a definition to see the current namespace</p>



<a name="234217539"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234217539" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234217539">(Apr 12 2021 at 19:38)</a>:</h4>
<p>(maybe there should be an option for that, I can imagine situations where it is noisy)</p>



<a name="234217572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234217572" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234217572">(Apr 12 2021 at 19:38)</a>:</h4>
<p>Don't you see the current namespace from the bread crumb bar?</p>



<a name="234217605"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234217605" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234217605">(Apr 12 2021 at 19:38)</a>:</h4>
<p>I see the file path</p>



<a name="234217882"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234217882" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234217882">(Apr 12 2021 at 19:40)</a>:</h4>
<p>Oh, hovering over a definition doesn't work</p>



<a name="234217924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234217924" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234217924">(Apr 12 2021 at 19:41)</a>:</h4>
<p>you have to hover on a use of the definition</p>



<a name="234218074"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234218074" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234218074">(Apr 12 2021 at 19:42)</a>:</h4>
<p>Hovering over a definition seems a bit redundant, all the information is already there? The breadcrumb bar should look something like <a href="/user_uploads/3121/nXGJYxpDJsw-xo2cjjnNLnCA/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/nXGJYxpDJsw-xo2cjjnNLnCA/image.png" title="image.png"><img src="/user_uploads/3121/nXGJYxpDJsw-xo2cjjnNLnCA/image.png"></a></div>



<a name="234218357"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234218357" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234218357">(Apr 12 2021 at 19:44)</a>:</h4>
<p>Mine ends at the <code>.lean</code> part</p>



<a name="234218392"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234218392" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234218392">(Apr 12 2021 at 19:44)</a>:</h4>
<blockquote>
<p>Hovering over a definition seems a bit redundant, all the information is already there?</p>
</blockquote>
<p>Ha! Have you forgotten about type inference? Variables?</p>



<a name="234218439"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234218439" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234218439">(Apr 12 2021 at 19:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="230999">Daniel Selsam</span> <a href="#narrow/stream/270676-lean4/topic/Beginner.20questions/near/234217277">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="110024">Sebastian Ullrich</span> <a href="#narrow/stream/270676-lean4/topic/Beginner.20questions/near/234216923">said</a>:</p>
<blockquote>
<p>You can just use auto completion now. It mostly works!</p>
</blockquote>
<p>Cool! Does this work in Emacs? I can't seem to figure out how to trigger it.</p>
</blockquote>
<p>Leo mentioned he was missing <code>company</code>. After that, Ctrl+Space should just work.</p>



<a name="234218461"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234218461" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Selsam <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234218461">(Apr 12 2021 at 19:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="230999">Daniel Selsam</span> <a href="#narrow/stream/270676-lean4/topic/Beginner.20questions/near/234217277">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="110024">Sebastian Ullrich</span> <a href="#narrow/stream/270676-lean4/topic/Beginner.20questions/near/234216923">said</a>:</p>
<blockquote>
<p>You can just use auto completion now. It mostly works!</p>
</blockquote>
<p>Cool! Does this work in Emacs? I can't seem to figure out how to trigger it.</p>
</blockquote>
<p>I think I figured it out. Auto-complete is automatic in certain circumstances. There is a delay after pressing <code>&lt;term&gt;.</code> and if you press anything during that delay, it will stop autocomplete from ever showing, and then you need to delete the <code>.</code> and type it again.</p>



<a name="234218532"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234218532" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234218532">(Apr 12 2021 at 19:45)</a>:</h4>
<p>Oh wait the breadcrumb is working now</p>



<a name="234218750"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234218750" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234218750">(Apr 12 2021 at 19:46)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/270676-lean4/topic/Beginner.20questions/near/234218392">said</a>:</p>
<blockquote>
<blockquote>
<p>Hovering over a definition seems a bit redundant, all the information is already there?</p>
</blockquote>
<p>Ha! Have you forgotten about type inference? Variables?</p>
</blockquote>
<p>I can't even tell if hovering over the definition should or should not show the variables. But it could be useful, yeah.</p>



<a name="234219173"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234219173" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234219173">(Apr 12 2021 at 19:49)</a>:</h4>
<p>I think it should always show the variables. The only time it should be shown without variables is when you hover over a recursive use of the definition</p>



<a name="234219287"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234219287" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234219287">(Apr 12 2021 at 19:50)</a>:</h4>
<p>I don't actually understand the rules for when definitions need extra args. "Right of the colon" doesn't seem to be correct anymore</p>



<a name="234219412"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234219412" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234219412">(Apr 12 2021 at 19:50)</a>:</h4>
<p>I have observed that moving a definition from one file to another can cause recursive uses of the definition to need more arguments</p>



<a name="234219469"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234219469" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234219469">(Apr 12 2021 at 19:51)</a>:</h4>
<p>so I'm guessing the new rule is that variables are not specified but everything else is</p>



<a name="234219951"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234219951" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Selsam <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234219951">(Apr 12 2021 at 19:54)</a>:</h4>
<p>You can sort-of simulate the old right-of-the-colon behavior with a <code>where</code>:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">foo</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">xs</span> <span class="o">:</span> <span class="n">List</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">Nat</span> <span class="bp">→</span> <span class="n">Nat</span> <span class="o">:=</span> <span class="n">foo</span> <span class="n">where</span>
  <span class="n">foo</span>
   <span class="bp">|</span> <span class="mi">0</span>   <span class="bp">=&gt;</span> <span class="mi">0</span>
   <span class="bp">|</span> <span class="n">n</span><span class="bp">+</span><span class="mi">1</span> <span class="bp">=&gt;</span> <span class="n">foo</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span>
</code></pre></div>



<a name="234220011"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234220011" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234220011">(Apr 12 2021 at 19:55)</a>:</h4>
<p>Thanks for the reccs <span class="user-mention" data-user-id="110049">@Mario Carneiro</span> .<br>
Another question: Say I can prove that one of my functions holds a certain property. Can Lean4 optimize the performance of that function by using that new information?</p>



<a name="234220167"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234220167" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234220167">(Apr 12 2021 at 19:56)</a>:</h4>
<p>No</p>



<a name="234220251"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234220251" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234220251">(Apr 12 2021 at 19:56)</a>:</h4>
<p>If you want something like that you have to bake it into the definition</p>



<a name="234220378"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234220378" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234220378">(Apr 12 2021 at 19:57)</a>:</h4>
<p>There are a few examples of that (I think), like array indexing with <code>Array.get</code> takes an argument of type <code>Fin n</code>, which is a pair of a natural number and a proof that it is in range; in principle that means that the compiler doesn't have to emit bounds checks</p>



<a name="234220413"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234220413" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234220413">(Apr 12 2021 at 19:57)</a>:</h4>
<p>You could do some juggling with typeclasses and instance priorities</p>



<a name="234220471"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234220471" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Selsam <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234220471">(Apr 12 2021 at 19:57)</a>:</h4>
<p><span class="user-mention silent" data-user-id="243947">Miguel Raz Guzmán Macedo</span> <a href="#narrow/stream/270676-lean4/topic/Beginner.20questions/near/234220011">said</a>:</p>
<blockquote>
<p>Another question: Say I can prove that one of my functions holds a certain property. Can Lean4 optimize the performance of that function by using that new information?</p>
</blockquote>
<p>There is a long term goal to exploit theorems/proofs in various ways during compilation (maybe interactively), but right now Lean will not magically optimize your code based on a theorem in the environment.</p>



<a name="234220615"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234220615" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234220615">(Apr 12 2021 at 19:58)</a>:</h4>
<p>You can also use <code>implementedBy</code> to replace a slow definition with a fast one, so for example you can write a slow definition, prove a theorem about it, then write the not-obviously-the-same fast version and use the theorem to prove equivalence and <code>implementedBy</code> to swap it out</p>



<a name="234220847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234220847" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234220847">(Apr 12 2021 at 20:00)</a>:</h4>
<p>Although right now <code>implementedBy</code> is unsafe, in the sense that it doesn't require the two definitions to be equivalent, so your theorem is going to waste</p>



<a name="234221098"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234221098" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234221098">(Apr 12 2021 at 20:01)</a>:</h4>
<p>Leo has talked about plans to use <code>simp</code> in the compiler to rewrite slow definitions with fast ones and perform transformations like <code>map f (map g l) = map (f o g) l</code> a la haskell</p>



<a name="234221253"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234221253" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234221253">(Apr 12 2021 at 20:02)</a>:</h4>
<p>That approach would be proven correct since it's using an equation that had to be proved</p>



<a name="234221404"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234221404" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234221404">(Apr 12 2021 at 20:03)</a>:</h4>
<p>Wow, Lean people are cooking up cool stuff. Nice!</p>



<a name="234224976"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234224976" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234224976">(Apr 12 2021 at 20:29)</a>:</h4>
<p><span class="user-mention" data-user-id="243947">@Miguel Raz Guzmán Macedo</span> another few things that may help -- you can find repos tagging themselves with lean4 in GitHub which I've clicked on a few times just to see -- <a href="https://github.com/topics/lean4">https://github.com/topics/lean4</a></p>



<a name="234225095"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234225095" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234225095">(Apr 12 2021 at 20:30)</a>:</h4>
<p>Oh, that is handy. Neat!</p>



<a name="234225141"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234225141" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234225141">(Apr 12 2021 at 20:30)</a>:</h4>
<p>also I think <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span>'s mathlib4 noodling repo has some more theorem-y lean4 code -- <a href="https://github.com/kbuzzard/mathlib4_experiments">https://github.com/kbuzzard/mathlib4_experiments</a></p>



<a name="234225191"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234225191" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234225191">(Apr 12 2021 at 20:31)</a>:</h4>
<p>it's only a file or two, but yeah I flipped through it to learn some tricks myself.</p>



<a name="234225335"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234225335" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Berman <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234225335">(Apr 12 2021 at 20:31)</a>:</h4>
<p>Also also I wrote up my own small list of lean4 repos to keep an eye on here: <a href="https://github.com/Julian/tree-sitter-lean/issues/1">https://github.com/Julian/tree-sitter-lean/issues/1</a> (which contains nothing other than what I just shared) :) but if you find good examples I'd love to hear them myself too</p>



<a name="234385070"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234385070" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234385070">(Apr 13 2021 at 19:19)</a>:</h4>
<p>Alright, so this has been a nice detour - I want to go back to beginner questions.</p>



<a name="234385119"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234385119" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234385119">(Apr 13 2021 at 19:20)</a>:</h4>
<p>I'm trying to implement the basics of Linear Temporal Logic, I think it makes for a nice side project for now.</p>



<a name="234385157"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234385157" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234385157">(Apr 13 2021 at 19:20)</a>:</h4>
<p>I'm using this document as reference: <a href="https://www.dc.fi.udc.es/~cabalar/vv/T4-LTL.pdf">https://www.dc.fi.udc.es/~cabalar/vv/T4-LTL.pdf</a></p>



<a name="234385207"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234385207" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234385207">(Apr 13 2021 at 19:20)</a>:</h4>
<p>It's "almost" set theory and propositions with a few more operators sprinkled on top.</p>



<a name="234385310"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234385310" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234385310">(Apr 13 2021 at 19:21)</a>:</h4>
<p>Right now, I want to try and add the definition of a <code>\Sigma</code>:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">open</span> <span class="n">Std</span>
<span class="kd">structure</span> <span class="n">Sigma</span> <span class="n">where</span>
    <span class="n">props</span> <span class="o">:</span> <span class="n">HashSet</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="o">[]</span>
</code></pre></div>



<a name="234385352"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234385352" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234385352">(Apr 13 2021 at 19:21)</a>:</h4>
<p>After that, I want to try and define the <code>state s</code>, as a function that takes in a set of propositions and returns  a boolean</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">state</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">Sigma</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">HashSet</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:</span> <span class="n">Bool</span> <span class="o">:=</span>
    <span class="bp">...</span>
</code></pre></div>



<a name="234386245"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234386245" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Selsam <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234386245">(Apr 13 2021 at 19:27)</a>:</h4>
<p><span class="user-mention" data-user-id="243947">@Miguel Raz Guzmán Macedo</span> It doesn't seem like you have asked a question yet, but I'll save you some time to mention that you can't have a <code>HashSet</code> of <code>Prop</code>. You can't hash a <code>Prop</code>, nor can you compare it for equality.</p>



<a name="234386329"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234386329" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234386329">(Apr 13 2021 at 19:28)</a>:</h4>
<p>Ah, thanks <span class="user-mention" data-user-id="230999">@Daniel Selsam</span> yeah I was getting to that.</p>



<a name="234386405"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234386405" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234386405">(Apr 13 2021 at 19:28)</a>:</h4>
<p>ok, so if I have that <code>p q r : Prop</code>, and I want to have them in a Set for easy inclusion comparisons, how could I do that?</p>



<a name="234386536"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234386536" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234386536">(Apr 13 2021 at 19:29)</a>:</h4>
<p>(Also, I don't see many tutorials about using datastructures in Lean, so that would be a nice resource to know about.)</p>



<a name="234386538"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234386538" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Selsam <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234386538">(Apr 13 2021 at 19:29)</a>:</h4>
<p>This is not possible. You probably need to create a DSL/inductive-type for the kinds of Props are you interested in (and define <code>hash</code> and <code>beq</code> on it), and then write a <code>denote</code> function that maps them to actual <code>Prop</code>s if necessary.</p>



<a name="234386689"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234386689" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234386689">(Apr 13 2021 at 19:30)</a>:</h4>
<p>Oh lord.</p>



<a name="234386701"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234386701" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234386701">(Apr 13 2021 at 19:30)</a>:</h4>
<p><span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="234386731"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234386731" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Selsam <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234386731">(Apr 13 2021 at 19:30)</a>:</h4>
<p>It is not so bad, this is a well-trodden path</p>



<a name="234386748"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234386748" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Selsam <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234386748">(Apr 13 2021 at 19:31)</a>:</h4>
<p>And quite clean/elegant</p>



<a name="234386783"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234386783" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234386783">(Apr 13 2021 at 19:31)</a>:</h4>
<p>Ok, that's not too bad then.</p>



<a name="234386854"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234386854" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Selsam <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234386854">(Apr 13 2021 at 19:32)</a>:</h4>
<p>Basically a <code>Prop</code> has no computational content. You can't write executable code that manipulates them directly. You need to "reify" them into data that can be manipulated.</p>



<a name="234386960"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234386960" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234386960">(Apr 13 2021 at 19:32)</a>:</h4>
<p>Well all the <code>Prop</code>s I care about are <code>Booleans</code>, I just need them to have different names.</p>



<a name="234387064"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234387064" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234387064">(Apr 13 2021 at 19:33)</a>:</h4>
<p>Maybe I should have a <code>HashSet Bool</code>...</p>



<a name="234387304"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234387304" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Selsam <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234387304">(Apr 13 2021 at 19:35)</a>:</h4>
<p>I don't know what you are trying to do, but my off-the-cusp guess is that you'll want something like:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">Std.Data.HashSet</span>
<span class="kn">open</span> <span class="n">Std</span> <span class="o">(</span><span class="n">HashSet</span><span class="o">)</span>

<span class="kn">namespace</span> <span class="n">LTL</span>

<span class="kd">inductive</span> <span class="n">Property</span>
  <span class="bp">|</span> <span class="n">reachable</span> <span class="o">:</span> <span class="n">Nat</span> <span class="bp">→</span> <span class="n">Nat</span> <span class="bp">→</span> <span class="n">Property</span>
  <span class="bp">|</span> <span class="n">sink</span>      <span class="o">:</span> <span class="n">Nat</span> <span class="bp">→</span> <span class="n">Property</span>
  <span class="n">deriving</span> <span class="n">Repr</span><span class="o">,</span> <span class="n">Hashable</span><span class="o">,</span> <span class="n">BEq</span><span class="o">,</span> <span class="n">DecidableEq</span>

<span class="kd">axiom</span> <span class="n">Reachable</span> <span class="o">(</span><span class="n">n₁</span> <span class="n">n₂</span> <span class="o">:</span> <span class="n">Nat</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span>
<span class="kd">axiom</span> <span class="n">Sink</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">Nat</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span>

<span class="kd">def</span> <span class="n">Property.denote</span> <span class="o">:</span> <span class="n">Property</span> <span class="bp">→</span> <span class="kt">Prop</span>
  <span class="bp">|</span> <span class="n">reachable</span> <span class="n">n₁</span> <span class="n">n₂</span> <span class="bp">=&gt;</span> <span class="n">Reachable</span> <span class="n">n₁</span> <span class="n">n₂</span>
  <span class="bp">|</span> <span class="n">sink</span> <span class="n">n</span>          <span class="bp">=&gt;</span> <span class="n">Sink</span> <span class="n">n</span>

<span class="kd">structure</span> <span class="n">Sigma</span> <span class="n">where</span>
    <span class="n">props</span> <span class="o">:</span> <span class="n">HashSet</span> <span class="n">Property</span> <span class="o">:=</span> <span class="o">{}</span>

<span class="kd">end</span> <span class="n">LTL</span>
</code></pre></div>



<a name="234387511"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234387511" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Selsam <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234387511">(Apr 13 2021 at 19:36)</a>:</h4>
<p>^ I just made up <code>Reachable</code> and <code>Sink</code>, you would replace those with whatever properties you actually care about</p>



<a name="234387556"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234387556" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234387556">(Apr 13 2021 at 19:37)</a>:</h4>
<p>Nice, that's super cool you did that. Thanks!</p>



<a name="234387599"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234387599" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234387599">(Apr 13 2021 at 19:37)</a>:</h4>
<p>(This is my first actual dive into Lean4 so I'm taking it slow.)</p>



<a name="234388807"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234388807" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234388807">(Apr 13 2021 at 19:46)</a>:</h4>
<p>Alright I think this is much more barebones but it might be good enough for what I need:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">structure</span> <span class="n">ZZZ</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="n">where</span>
  <span class="n">props</span> <span class="o">:</span> <span class="n">Array</span> <span class="n">Bool</span>

<span class="kd">def</span> <span class="n">mkZZZ</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">Array</span> <span class="n">Bool</span><span class="o">)</span> <span class="o">:</span> <span class="n">ZZZ</span> <span class="n">Bool</span> <span class="o">:=</span>
  <span class="o">{</span> <span class="n">props</span> <span class="o">:=</span> <span class="n">a</span>  <span class="o">}</span>

<span class="k">#eval</span> <span class="n">mkZZZ</span> <span class="bp">#</span><span class="o">[</span><span class="n">true</span><span class="o">,</span> <span class="n">false</span><span class="o">]</span>
</code></pre></div>



<a name="234388836"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234388836" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234388836">(Apr 13 2021 at 19:46)</a>:</h4>
<p>Why does the <code>mkZZZ</code> fail?</p>



<a name="234388869"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234388869" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234388869">(Apr 13 2021 at 19:46)</a>:</h4>
<p>I also tried calling it <code>\Sigma</code> but Lean complained so <span aria-label="shrug" class="emoji emoji-1f937" role="img" title="shrug">:shrug:</span></p>



<a name="234389774"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234389774" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Selsam <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234389774">(Apr 13 2021 at 19:52)</a>:</h4>
<p>It just doesn't know how to print the result to the screen. Just add:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">structure</span> <span class="n">ZZZ</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="n">where</span>
  <span class="n">props</span> <span class="o">:</span> <span class="n">Array</span> <span class="n">Bool</span>
  <span class="n">deriving</span> <span class="n">Repr</span> <span class="c1">-- add this</span>
</code></pre></div>



<a name="234390081"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234390081" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234390081">(Apr 13 2021 at 19:54)</a>:</h4>
<p>Neat, didn't know about the <code>deriving</code> trick.</p>



<a name="234390197"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234390197" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234390197">(Apr 13 2021 at 19:55)</a>:</h4>
<p>I now get a <code>term has type ZZZ Bool / failed to syntehsize Lean.Eval ?m.2068</code> prompt.</p>



<a name="234390590"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234390590" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Selsam <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234390590">(Apr 13 2021 at 19:57)</a>:</h4>
<p>It works for me:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">structure</span> <span class="n">ZZZ</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="n">where</span>
  <span class="n">props</span> <span class="o">:</span> <span class="n">Array</span> <span class="n">Bool</span>
  <span class="n">deriving</span> <span class="n">Repr</span>

<span class="kd">def</span> <span class="n">mkZZZ</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">Array</span> <span class="n">Bool</span><span class="o">)</span> <span class="o">:</span> <span class="n">ZZZ</span> <span class="n">Bool</span> <span class="o">:=</span>
  <span class="o">{</span> <span class="n">props</span> <span class="o">:=</span> <span class="n">a</span>  <span class="o">}</span>

<span class="k">#eval</span> <span class="n">mkZZZ</span> <span class="bp">#</span><span class="o">[</span><span class="n">true</span><span class="o">,</span> <span class="n">false</span><span class="o">]</span> <span class="c1">-- prints { props := #[true, false] }</span>
</code></pre></div>
<p>Note: I am using a very recent commit 292bab5a11dc05e019068a579a42eac251bf587f</p>



<a name="234390711"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234390711" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Selsam <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234390711">(Apr 13 2021 at 19:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="243947">Miguel Raz Guzmán Macedo</span> <a href="#narrow/stream/270676-lean4/topic/Beginner.20questions/near/234388869">said</a>:</p>
<blockquote>
<p>I also tried calling it <code>\Sigma</code> but Lean complained so <span aria-label="shrug" class="emoji emoji-1f937" role="img" title="shrug">:shrug:</span></p>
</blockquote>
<p>You can name your structure <code>Sigma</code> if you are in a namespace. In the example I posted above, I declare <code>Sigma</code> inside <code>LTL</code> namespace.</p>



<a name="234391624"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234391624" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234391624">(Apr 13 2021 at 20:03)</a>:</h4>
<p>Ugh, this is so weird.</p>



<a name="234391723"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234391723" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234391723">(Apr 13 2021 at 20:03)</a>:</h4>
<p>the <code>import ... open ...</code> lines don't work for me either.</p>



<a name="234391984"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234391984" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Selsam <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234391984">(Apr 13 2021 at 20:05)</a>:</h4>
<p>The example in <a href="#narrow/stream/270676-lean4/topic/Beginner.20questions/near/234390590">https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner.20questions/near/234390590</a> does not require any imports nor opens.</p>



<a name="234392066"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234392066" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234392066">(Apr 13 2021 at 20:05)</a>:</h4>
<p>Yes - I tried using a <code>HashSet String</code> for the time being.</p>



<a name="234392142"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234392142" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234392142">(Apr 13 2021 at 20:06)</a>:</h4>
<p>the <code>import</code> is underlined and says <code>expected command</code>.</p>



<a name="234392205"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234392205" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joe Hendrix <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234392205">(Apr 13 2021 at 20:06)</a>:</h4>
<p>It's been a while since I looked at this, but <a href="https://github.com/GaloisInc/lean-protocol-support/blob/cabfa3abedbdd6fdca6e2da6fbbf91a13ed48dda/galois/temporal/temporal.lean">here</a> is a link to how we formalized temporal logic in Lean 3.  It's in terms of properties over traces.</p>



<a name="234392241"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234392241" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234392241">(Apr 13 2021 at 20:07)</a>:</h4>
<p>Oh neat, thanks a lot <span class="user-mention" data-user-id="110994">@Joe Hendrix</span></p>



<a name="234392282"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234392282" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234392282">(Apr 13 2021 at 20:07)</a>:</h4>
<p>Oh no way, I was just building this to show it off to some Galois people on twitter later <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="234392442"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234392442" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joe Hendrix <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234392442">(Apr 13 2021 at 20:08)</a>:</h4>
<p>We also defined a data structure for <a href="https://github.com/GaloisInc/lean-protocol-support/blob/cabfa3abedbdd6fdca6e2da6fbbf91a13ed48dda/galois/sequent/ltl.lean#L43-L50">LTL formulas</a> that was polymorphic over the underlying state predicates.</p>



<a name="234392665"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234392665" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234392665">(Apr 13 2021 at 20:10)</a>:</h4>
<p>That's pretty cool stuff.</p>



<a name="234392722"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234392722" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234392722">(Apr 13 2021 at 20:10)</a>:</h4>
<p>I see there's no Until / Release operators yet.</p>



<a name="234395129"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Beginner%20questions/near/234395129" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joe Hendrix <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Beginner.20questions.html#234395129">(Apr 13 2021 at 20:28)</a>:</h4>
<p><span class="user-mention" data-user-id="243947">@Miguel Raz Guzmán Macedo</span>  Yes, I noticed that as well.  We have it in the semantics file.  I don't actually recall what the formula datatype was used for actually.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>