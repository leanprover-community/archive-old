---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/Coinduction.3F.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Coinduction.3F.html">Coinduction?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="274618996"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Coinduction%3F/near/274618996" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Siddharth Bhat <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Coinduction.3F.html#274618996">(Mar 08 2022 at 22:48)</a>:</h4>
<p>I'd like to reason with infinite program traces in the style of <a href="https://github.com/DeepSpec/InteractionTrees/find/master">interaction trees</a>. I see that we have a <code>coinductive</code> keyword, but I'm not sure how to actually declare a coinductive type :)</p>



<a name="274639857"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Coinduction%3F/near/274639857" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Coinduction.3F.html#274639857">(Mar 09 2022 at 03:35)</a>:</h4>
<p>Lean does not support coinduction natively. It has to be defined as a library which is something I've been working on</p>



<a name="274640074"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Coinduction%3F/near/274640074" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Coinduction.3F.html#274640074">(Mar 09 2022 at 03:39)</a>:</h4>
<p><span class="user-mention" data-user-id="110865">@Jeremy Avigad</span>, <span class="user-mention" data-user-id="110049">@Mario Carneiro</span> and I wrote a paper about it so we know what we want as a foundation but the implementation has taken longer than expected</p>



<a name="274640257"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Coinduction%3F/near/274640257" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Coinduction.3F.html#274640257">(Mar 09 2022 at 03:42)</a>:</h4>
<p>Jeremy tells me that a student of <span class="user-mention" data-user-id="121058">@Jasmin Blanchette</span> is working on this</p>



<a name="274647199"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Coinduction%3F/near/274647199" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Coinduction.3F.html#274647199">(Mar 09 2022 at 06:07)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112857">Leonardo de Moura</span> has marked this topic as resolved.</p>



<a name="274647248"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Coinduction%3F/near/274647248" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Coinduction.3F.html#274647248">(Mar 09 2022 at 06:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112857">Leonardo de Moura</span> has marked this topic as unresolved.</p>



<a name="274653972"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Coinduction%3F/near/274653972" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jasmin Blanchette <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Coinduction.3F.html#274653972">(Mar 09 2022 at 08:05)</a>:</h4>
<p>I have an MSc student who has started looking into developing a package based on QPFs -- we just had our first meeting with Jeremy on Monday. Here's a very good student, but I doubt he will have the time to finish anything by the time he has to hand in his MSc thesis, so it's more a long-term project if anything.</p>



<a name="274682186"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Coinduction%3F/near/274682186" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Coinduction.3F.html#274682186">(Mar 09 2022 at 12:50)</a>:</h4>
<p>What's QPF?</p>



<a name="274682483"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Coinduction%3F/near/274682483" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Coinduction.3F.html#274682483">(Mar 09 2022 at 12:53)</a>:</h4>
<p><a href="https://www.andrew.cmu.edu/user/avigad/Talks/qpf.pdf">https://www.andrew.cmu.edu/user/avigad/Talks/qpf.pdf</a> presumably</p>



<a name="274698054"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Coinduction%3F/near/274698054" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jeremy Avigad <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Coinduction.3F.html#274698054">(Mar 09 2022 at 14:51)</a>:</h4>
<p>Conference paper here: <a href="https://drops.dagstuhl.de/opus/volltexte/2019/11061/">https://drops.dagstuhl.de/opus/volltexte/2019/11061/</a>. Isabelle has an excellent datatype package that uses a different though more-or-less equivalent construction; see here and references: <a href="https://arxiv.org/pdf/2104.05348.pdf">https://arxiv.org/pdf/2104.05348.pdf</a>.</p>



<a name="274811090"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Coinduction%3F/near/274811090" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Siddharth Bhat <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Coinduction.3F.html#274811090">(Mar 10 2022 at 09:43)</a>:</h4>
<p>I was under the impression that quotients in lean are not computable, and hence any coinductive code written using QPFs would not be extractable into programs? or am I mistaken? :)</p>



<a name="274862275"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Coinduction%3F/near/274862275" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Coinduction.3F.html#274862275">(Mar 10 2022 at 16:47)</a>:</h4>
<p><span class="user-mention" data-user-id="130575">@Siddharth Bhat</span> That is false on both counts: Quotients in lean are computable, but the code generated for QPFs would not be making use of this anyway and would use a different reduction mechanism than the one the kernel implements (which would inspect the QPF construction itself which is not what we want).</p>



<a name="274870636"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Coinduction%3F/near/274870636" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Siddharth Bhat <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Coinduction.3F.html#274870636">(Mar 10 2022 at 17:47)</a>:</h4>
<p>Thanks! I didn't know either of those facts</p>



<a name="277722266"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Coinduction%3F/near/277722266" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julien Marquet <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Coinduction.3F.html#277722266">(Apr 04 2022 at 12:21)</a>:</h4>
<p>I'm interested in defining coinductive types too ! Technically, I'd like to work with a variant of <code>streams</code><br>
Is there a wip implementation of <a href="https://drops.dagstuhl.de/opus/volltexte/2019/11061/pdf/LIPIcs-ITP-2019-6.pdf">https://drops.dagstuhl.de/opus/volltexte/2019/11061/pdf/LIPIcs-ITP-2019-6.pdf</a> publicly available ? (I'd understand if people were working on this but not willing to release their work for now)<br>
Would it be possible to define some inductive datatypes "by hand", as a workaround for the lack of meta engineering while waiting for a proper implementation of the paper ? I mean, is it reasonably feasible, or the cost of manipulating low-level data is so high that I might as well spend this time writing an implementation ?</p>
<p>By the way, I have some time to spend on lean4, and I'm willing to help with defining coinductive data types :)</p>



<a name="277723694"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Coinduction%3F/near/277723694" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sébastien Michelland <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Coinduction.3F.html#277723694">(Apr 04 2022 at 12:33)</a>:</h4>
<p>There is a working example with a simpler model (infinite sequence of agreeing finite structures) here: <a href="https://github.com/leanprover/lean/wiki/Coinductive-Types">https://github.com/leanprover/lean/wiki/Coinductive-Types</a><br>
(But my understanding is that QPF was considered after that and superseded it)</p>



<a name="277726082"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Coinduction%3F/near/277726082" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julien Marquet <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Coinduction.3F.html#277726082">(Apr 04 2022 at 12:53)</a>:</h4>
<p>This page is very interesting, thanks !<br>
It seems to answer one of my questions: it is possible to define coinductive data types "by hand", but it's a lot of work, all the more since I actually need reflexive coinductive types...</p>



<a name="277726288"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Coinduction%3F/near/277726288" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Keizer <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Coinduction.3F.html#277726288">(Apr 04 2022 at 12:54)</a>:</h4>
<p>I'm the student Jasmin mentioned! My work so far can be seen at <a href="https://github.com/alexkeizer/qpf4">https://github.com/alexkeizer/qpf4</a>. It is very WIP, I'm still working on porting the formalizations of QPFs to lean4 so you cannot write stuff by hand using it.</p>



<a name="277726322"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Coinduction%3F/near/277726322" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sébastien Michelland <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Coinduction.3F.html#277726322">(Apr 04 2022 at 12:55)</a>:</h4>
<p>I believe that goal was always to have coinductive definitions compile down to a construction like this or QPF. The Lean4 kernel is purposefully kept small so you won't have native support like in Coq.</p>



<a name="277727428"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Coinduction%3F/near/277727428" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Keizer <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Coinduction.3F.html#277727428">(Apr 04 2022 at 13:02)</a>:</h4>
<p>Ah, I misremembered. I've actually gotten most of it to compile, so you could hand-write stuff now, but it uses <code>sorry</code> very liberally, so probably wouldn't recommend doing so. If anyone wants to contribute, feel free to try to provide proofs for some of those sorrys!</p>



<a name="277858876"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Coinduction%3F/near/277858876" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jannis Limperg <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Coinduction.3F.html#277858876">(Apr 05 2022 at 10:56)</a>:</h4>
<p><span class="user-mention silent" data-user-id="385405">Julien Marquet</span> <a href="#narrow/stream/270676-lean4/topic/Coinduction.3F/near/277722266">said</a>:</p>
<blockquote>
<p>Technically, I'd like to work with a variant of <code>streams</code>.</p>
</blockquote>
<p>If you only need streams, <code>stream A</code> is isomorphic to <code>Nat -&gt; A</code>. Coinductive types only become interesting once you have a non-degenerate tree structure.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>