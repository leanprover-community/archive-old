---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/error.20when.20building.20Std.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/error.20when.20building.20Std.html">error when building Std</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="301443412"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/error%20when%20building%20Std/near/301443412" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/error.20when.20building.20Std.html#301443412">(Sep 29 2022 at 13:45)</a>:</h4>
<p>I just updated <code>mathlib4</code> and ran <code>lake build</code>. I got the output below. I think I got something similar when I updated last time.<br>
Is this something I should be worried about? Do I need to update anything?</p>
<div class="codehilite" data-code-language="Text only"><pre><span></span><code>[...]
Compiling Std.Tactic.Lint
Compiling Std.Logic
Building Std.Data.RBMap
Building Std.Classes.LawfulMonad
Building Std.Data.Nat.Lemmas
Building Std.Tactic.Ext
Compiling Std.Tactic.Ext.Attr
error: &gt; /home/vandoorn/.elan/toolchains/leanprover--lean4---nightly-2022-09-26/bin/leanc -c -o ./lean_packages/std/build/ir/Std/Tactic/Lint/Frontend.o ./lean_packages/std/build/ir/Std/Tactic/Lint/Frontend.c -O3 -DNDEBUG
error: stderr:
PLEASE submit a bug report to https://github.com/llvm/llvm-project/issues/ and include the crash backtrace, preprocessed source, and associated run script.
Stack dump:
0.  Program arguments: /home/vandoorn/.elan/toolchains/leanprover--lean4---nightly-2022-09-26/bin/clang -I /home/vandoorn/.elan/toolchains/leanprover--lean4---nightly-2022-09-26/include -fPIC -fvisibility=hidden -nostdinc -isystem /home/vandoorn/.elan/toolchains/leanprover--lean4---nightly-2022-09-26/include/clang -c -o ./lean_packages/std/build/ir/Std/Tactic/Lint/Frontend.o ./lean_packages/std/build/ir/Std/Tactic/Lint/Frontend.c -O3 -DNDEBUG -L /home/vandoorn/.elan/toolchains/leanprover--lean4---nightly-2022-09-26/lib -L /home/vandoorn/.elan/toolchains/leanprover--lean4---nightly-2022-09-26/lib/glibc /home/vandoorn/.elan/toolchains/leanprover--lean4---nightly-2022-09-26/lib/glibc/libc_nonshared.a -Wl,--as-needed -static-libgcc -Wl,-Bstatic -lgmp -lunwind -Wl,-Bdynamic -Wl,--no-as-needed -fuse-ld=lld -L /home/vandoorn/.elan/toolchains/leanprover--lean4---nightly-2022-09-26/lib/lean -Wl,--start-group -lleancpp -lLean -Wl,--end-group -Wl,--start-group -lInit -lleanrt -Wl,--end-group -Wl,-Bstatic -lc++ -lc++abi -Wl,-Bdynamic -lm -Wl,--as-needed -lgmp -Wl,--no-as-needed -ldl -pthread -Wno-unused-command-line-argument
1.  &lt;unknown&gt; parser at unknown location
Stack dump without symbol names (ensure you have llvm-symbolizer in your PATH or set the environment var `LLVM_SYMBOLIZER_PATH` to point to it):
/home/vandoorn/.elan/toolchains/leanprover--lean4---nightly-2022-09-26/lib/libLLVM-14.so(_ZN4llvm3sys15PrintStackTraceERNS_11raw_ostreamEi+0x23)[0x7f6186efe633]
/home/vandoorn/.elan/toolchains/leanprover--lean4---nightly-2022-09-26/lib/libLLVM-14.so(_ZN4llvm3sys17RunSignalHandlersEv+0xee)[0x7f6186efc60e]
/home/vandoorn/.elan/toolchains/leanprover--lean4---nightly-2022-09-26/lib/libLLVM-14.so(_ZN4llvm3sys15CleanupOnSignalEm+0xdd)[0x7f6186efdaad]
/home/vandoorn/.elan/toolchains/leanprover--lean4---nightly-2022-09-26/lib/libLLVM-14.so(+0x152bb90)[0x7f6186e2bb90]
/lib/x86_64-linux-gnu/libpthread.so.0(+0x14420)[0x7f618c6e1420]
/home/vandoorn/.elan/toolchains/leanprover--lean4---nightly-2022-09-26/lib/libclang-cpp.so.14(_ZN5clang5Lexer16LexTokenInternalERNS_5TokenEb+0x98)[0x7f618a2ea748]
/home/vandoorn/.elan/toolchains/leanprover--lean4---nightly-2022-09-26/lib/libclang-cpp.so.14(_ZN5clang12Preprocessor3LexERNS_5TokenE+0x54)[0x7f618a34cc84]
/home/vandoorn/.elan/toolchains/leanprover--lean4---nightly-2022-09-26/lib/libclang-cpp.so.14(+0x11e2e9f)[0x7f618a359e9f]
/home/vandoorn/.elan/toolchains/leanprover--lean4---nightly-2022-09-26/lib/libclang-cpp.so.14(_ZN5clang6Parser16ExpectAndConsumeENS_3tok9TokenKindEjN4llvm9StringRefE+0xb56)[0x7f618a41cd66]
/home/vandoorn/.elan/toolchains/leanprover--lean4---nightly-2022-09-26/lib/libclang-cpp.so.14(_ZN5clang6Parser18ParseGNUAttributesERNS_25ParsedAttributesWithRangeEPNS_14SourceLocationEPNS0_18LateParsedAttrListEPNS_10DeclaratorE+0xbff)[0x7f618a35d06f]
/home/vandoorn/.elan/toolchains/leanprover--lean4---nightly-2022-09-26/lib/libclang-cpp.so.14(_ZN5clang6Parser26ParseDeclarationSpecifiersERNS_8DeclSpecERKNS0_18ParsedTemplateInfoENS_15AccessSpecifierENS0_15DeclSpecContextEPNS0_18LateParsedAttrListE+0xc20)[0x7f618a368750]
/home/vandoorn/.elan/toolchains/leanprover--lean4---nightly-2022-09-26/lib/libclang-cpp.so.14(_ZN5clang6Parser30ParseDeclOrFunctionDefInternalERNS_25ParsedAttributesWithRangeERNS_15ParsingDeclSpecENS_15AccessSpecifierE+0x6a)[0x7f618a421f9a]
/home/vandoorn/.elan/toolchains/leanprover--lean4---nightly-2022-09-26/lib/libclang-cpp.so.14(_ZN5clang6Parser36ParseDeclarationOrFunctionDefinitionERNS_25ParsedAttributesWithRangeEPNS_15ParsingDeclSpecENS_15AccessSpecifierE+0x17c)[0x7f618a421d4c]
/home/vandoorn/.elan/toolchains/leanprover--lean4---nightly-2022-09-26/lib/libclang-cpp.so.14(_ZN5clang6Parser24ParseExternalDeclarationERNS_25ParsedAttributesWithRangeEPNS_15ParsingDeclSpecE+0x7ac)[0x7f618a4210cc]
/home/vandoorn/.elan/toolchains/leanprover--lean4---nightly-2022-09-26/lib/libclang-cpp.so.14(_ZN5clang6Parser17ParseTopLevelDeclERNS_9OpaquePtrINS_12DeclGroupRefEEEb+0x33c)[0x7f618a41f66c]
/home/vandoorn/.elan/toolchains/leanprover--lean4---nightly-2022-09-26/lib/libclang-cpp.so.14(_ZN5clang8ParseASTERNS_4SemaEbb+0x2dd)[0x7f618a35349d]
/home/vandoorn/.elan/toolchains/leanprover--lean4---nightly-2022-09-26/lib/libclang-cpp.so.14(_ZN5clang14FrontendAction7ExecuteEv+0x57)[0x7f618bd54c07]
/home/vandoorn/.elan/toolchains/leanprover--lean4---nightly-2022-09-26/lib/libclang-cpp.so.14(_ZN5clang16CompilerInstance13ExecuteActionERNS_14FrontendActionE+0x346)[0x7f618bcbb026]
/home/vandoorn/.elan/toolchains/leanprover--lean4---nightly-2022-09-26/lib/libclang-cpp.so.14(_ZN5clang25ExecuteCompilerInvocationEPNS_16CompilerInstanceE+0x2ae)[0x7f618bdc731e]
/home/vandoorn/.elan/toolchains/leanprover--lean4---nightly-2022-09-26/bin/clang(_Z8cc1_mainN4llvm8ArrayRefIPKcEES2_Pv+0x81a)[0x55808a8cfffa]
/home/vandoorn/.elan/toolchains/leanprover--lean4---nightly-2022-09-26/bin/clang(+0xf2ab)[0x55808a8ce2ab]
/home/vandoorn/.elan/toolchains/leanprover--lean4---nightly-2022-09-26/lib/libclang-cpp.so.14(+0x27d0d12)[0x7f618b947d12]
/home/vandoorn/.elan/toolchains/leanprover--lean4---nightly-2022-09-26/lib/libLLVM-14.so(_ZN4llvm20CrashRecoveryContext9RunSafelyENS_12function_refIFvvEEE+0xdd)[0x7f6186e2b93d]
/home/vandoorn/.elan/toolchains/leanprover--lean4---nightly-2022-09-26/lib/libclang-cpp.so.14(_ZNK5clang6driver10CC1Command7ExecuteEN4llvm8ArrayRefINS2_8OptionalINS2_9StringRefEEEEEPNSt3__112basic_stringIcNS8_11char_traitsIcEENS8_9allocatorIcEEEEPb+0x135)[0x7f618b947985]
/home/vandoorn/.elan/toolchains/leanprover--lean4---nightly-2022-09-26/lib/libclang-cpp.so.14(_ZNK5clang6driver11Compilation14ExecuteCommandERKNS0_7CommandERPS3_+0x2cb)[0x7f618b913dbb]
/home/vandoorn/.elan/toolchains/leanprover--lean4---nightly-2022-09-26/lib/libclang-cpp.so.14(_ZNK5clang6driver11Compilation11ExecuteJobsERKNS0_7JobListERN4llvm15SmallVectorImplINSt3__14pairIiPKNS0_7CommandEEEEE+0x77)[0x7f618b914187]
/home/vandoorn/.elan/toolchains/leanprover--lean4---nightly-2022-09-26/lib/libclang-cpp.so.14(_ZN5clang6driver6Driver18ExecuteCompilationERNS0_11CompilationERN4llvm15SmallVectorImplINSt3__14pairIiPKNS0_7CommandEEEEE+0x17b)[0x7f618b92cb2b]
/home/vandoorn/.elan/toolchains/leanprover--lean4---nightly-2022-09-26/bin/clang(main+0x27c5)[0x55808a8cdb05]
/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xf3)[0x7f618547f083]
/home/vandoorn/.elan/toolchains/leanprover--lean4---nightly-2022-09-26/bin/clang(_start+0x2a)[0x55808a8cb02a]
clang: error: clang frontend command failed with exit code 135 (use -v to see invocation)
clang version 14.0.0 (https://github.com/llvm/llvm-project 329fda39c507e8740978d10458451dcdb21563be)
Target: x86_64-unknown-linux-gnu
Thread model: posix
InstalledDir: /home/vandoorn/.elan/toolchains/leanprover--lean4---nightly-2022-09-26/bin
clang: note: diagnostic msg:
********************

PLEASE ATTACH THE FOLLOWING FILES TO THE BUG REPORT:
Preprocessed source(s) and associated run script(s) are located at:
clang: note: diagnostic msg: /tmp/Frontend-2594d0.c
clang: note: diagnostic msg: /tmp/libc_nonshared-6cde26.c
clang: note: diagnostic msg: /tmp/Frontend-2594d0.sh
clang: note: diagnostic msg:

********************
error: external command `/home/vandoorn/.elan/toolchains/leanprover--lean4---nightly-2022-09-26/bin/leanc` exited with code 135
Compiling Std.Data.Nat.Lemmas
Building Std.Data.Nat.Gcd
Building Std.Data.Int.Lemmas
Building Std.Data.BinomialHeap
Compiling Std.Tactic.Ext
Compiling Std.Data.Nat.Gcd
Building Std.Data.AssocList
Building Mathlib.Tactic.Cases
Building Mathlib.Tactic.PermuteGoals
Compiling Std.Data.List.Basic
[...]
</code></pre></div>



<a name="301444922"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/error%20when%20building%20Std/near/301444922" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/error.20when.20building.20Std.html#301444922">(Sep 29 2022 at 13:52)</a>:</h4>
<p>Oops, that doesn't look good. Very weird that it doesn't happen in CI as well even though the clang binary should be identical.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>