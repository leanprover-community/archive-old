---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html">Making a RungeKutta 4</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="242975409"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/242975409" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#242975409">(Jun 17 2021 at 05:44)</a>:</h4>
<p>Hello all!<br>
I'm trying to dive again into Lean4.<br>
I was inspired by this post to make a functional RungeKutta4 function <a href="https://www.johndcook.com/blog/2016/06/02/ode-solver-as-a-functional-fold/">https://www.johndcook.com/blog/2016/06/02/ode-solver-as-a-functional-fold/</a></p>
<p>So far, I have this:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">Data</span>
<span class="kd">def</span> <span class="n">rk</span> <span class="o">(</span><span class="n">t</span><span class="o">,</span> <span class="n">y</span><span class="o">)</span> <span class="n">t'</span> <span class="o">:</span> <span class="o">(</span><span class="n">t'</span><span class="o">,</span> <span class="n">y</span><span class="o">):=</span> <span class="k">do</span>
  <span class="k">let</span> <span class="n">h</span>  <span class="o">:=</span> <span class="n">t'</span> <span class="bp">-</span> <span class="n">t</span>
  <span class="k">let</span> <span class="n">k1</span> <span class="o">:=</span> <span class="n">f</span> <span class="n">t</span> <span class="n">y</span>
  <span class="k">let</span> <span class="n">k2</span> <span class="o">:=</span> <span class="n">f</span> <span class="o">(</span><span class="n">t</span> <span class="bp">+</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">5</span><span class="bp">*</span><span class="n">h</span><span class="o">)</span> <span class="o">(</span><span class="n">y</span> <span class="bp">+</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">5</span><span class="bp">*</span><span class="n">h</span><span class="bp">*</span><span class="n">k1</span><span class="o">)</span>
  <span class="k">let</span> <span class="n">k3</span> <span class="o">:=</span> <span class="n">f</span> <span class="o">(</span><span class="n">t</span> <span class="bp">+</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">5</span><span class="bp">*</span><span class="n">h</span><span class="o">)</span> <span class="o">(</span><span class="n">y</span> <span class="bp">+</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">5</span><span class="bp">*</span><span class="n">h</span><span class="bp">*</span><span class="n">k2</span><span class="o">)</span>
  <span class="k">let</span> <span class="n">k4</span> <span class="o">:=</span> <span class="n">f</span> <span class="o">(</span><span class="n">t</span> <span class="bp">+</span> <span class="mi">1</span><span class="bp">.</span><span class="mi">0</span><span class="bp">*</span><span class="n">h</span><span class="o">)</span> <span class="o">(</span><span class="n">y</span> <span class="bp">+</span> <span class="mi">1</span><span class="bp">.</span><span class="mi">0</span><span class="bp">*</span><span class="n">h</span><span class="bp">*</span><span class="n">k3</span><span class="o">)</span>
  <span class="n">return</span> <span class="o">(</span><span class="n">t'</span><span class="o">,</span> <span class="n">y</span> <span class="bp">+</span> <span class="n">h</span><span class="bp">*</span><span class="o">(</span><span class="n">k1</span> <span class="bp">+</span> <span class="mi">2</span><span class="bp">.</span><span class="mi">0</span><span class="bp">*</span><span class="n">k2</span> <span class="bp">+</span> <span class="mi">2</span><span class="bp">.</span><span class="mi">0</span><span class="bp">*</span><span class="n">k3</span> <span class="bp">+</span> <span class="n">k4</span><span class="o">)</span><span class="bp">/</span><span class="mi">6</span><span class="bp">.</span><span class="mi">0</span><span class="o">)</span>

<span class="kd">def</span> <span class="n">f</span> <span class="o">(</span><span class="n">t</span> <span class="n">y</span> <span class="o">:</span> <span class="n">Float</span><span class="o">)</span> <span class="o">:</span> <span class="n">Float</span> <span class="o">:=</span> <span class="o">(</span><span class="n">t</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">-</span> <span class="n">y</span><span class="bp">*</span><span class="mi">2</span><span class="o">)</span> <span class="bp">*</span> <span class="n">sin</span> <span class="n">y</span>

<span class="k">#eval</span> <span class="n">f</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">1</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">2</span>

<span class="k">#eval</span> <span class="n">foldl</span> <span class="n">rk</span> <span class="o">(</span><span class="mi">0</span><span class="bp">.</span><span class="mi">0</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="bp">.</span><span class="mi">0</span><span class="o">)</span> <span class="bp">#</span><span class="o">[</span><span class="mi">0</span><span class="bp">.</span><span class="mi">01</span><span class="o">,</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">03</span><span class="o">,</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">04</span><span class="o">,</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">06</span><span class="o">]</span>
</code></pre></div>
<p>My problems are the following:</p>
<ol>
<li>I don't know how to import <code>sin</code></li>
<li>I don't know how to use <code>foldl</code></li>
<li>I don't know how to use the unit testing facilities</li>
</ol>



<a name="242975424"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/242975424" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#242975424">(Jun 17 2021 at 05:44)</a>:</h4>
<p>Please ping if you are answering, thanks!</p>



<a name="242977280"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/242977280" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#242977280">(Jun 17 2021 at 06:20)</a>:</h4>
<p>Does that <code>import Data</code> line actually work for you? I'm getting <code>unknown package Data</code> but that might be my setup</p>



<a name="242977507"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/242977507" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#242977507">(Jun 17 2021 at 06:24)</a>:</h4>
<p>This works:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">rk</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">Float</span> <span class="bp">→</span> <span class="n">Float</span> <span class="bp">→</span> <span class="n">Float</span><span class="o">)</span> <span class="o">:</span> <span class="n">Float</span> <span class="bp">×</span> <span class="n">Float</span> <span class="bp">→</span> <span class="n">Float</span> <span class="bp">→</span> <span class="n">Float</span> <span class="bp">×</span> <span class="n">Float</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">t</span><span class="o">,</span> <span class="n">y</span><span class="o">),</span> <span class="n">t'</span> <span class="bp">=&gt;</span>
  <span class="k">let</span> <span class="n">h</span>  <span class="o">:=</span> <span class="n">t'</span> <span class="bp">-</span> <span class="n">t</span>
  <span class="k">let</span> <span class="n">k1</span> <span class="o">:=</span> <span class="n">f</span> <span class="n">t</span> <span class="n">y</span>
  <span class="k">let</span> <span class="n">k2</span> <span class="o">:=</span> <span class="n">f</span> <span class="o">(</span><span class="n">t</span> <span class="bp">+</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">5</span><span class="bp">*</span><span class="n">h</span><span class="o">)</span> <span class="o">(</span><span class="n">y</span> <span class="bp">+</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">5</span><span class="bp">*</span><span class="n">h</span><span class="bp">*</span><span class="n">k1</span><span class="o">)</span>
  <span class="k">let</span> <span class="n">k3</span> <span class="o">:=</span> <span class="n">f</span> <span class="o">(</span><span class="n">t</span> <span class="bp">+</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">5</span><span class="bp">*</span><span class="n">h</span><span class="o">)</span> <span class="o">(</span><span class="n">y</span> <span class="bp">+</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">5</span><span class="bp">*</span><span class="n">h</span><span class="bp">*</span><span class="n">k2</span><span class="o">)</span>
  <span class="k">let</span> <span class="n">k4</span> <span class="o">:=</span> <span class="n">f</span> <span class="o">(</span><span class="n">t</span> <span class="bp">+</span> <span class="mi">1</span><span class="bp">.</span><span class="mi">0</span><span class="bp">*</span><span class="n">h</span><span class="o">)</span> <span class="o">(</span><span class="n">y</span> <span class="bp">+</span> <span class="mi">1</span><span class="bp">.</span><span class="mi">0</span><span class="bp">*</span><span class="n">h</span><span class="bp">*</span><span class="n">k3</span><span class="o">)</span>
  <span class="n">return</span> <span class="o">(</span><span class="n">t'</span><span class="o">,</span> <span class="n">y</span> <span class="bp">+</span> <span class="n">h</span><span class="bp">*</span><span class="o">(</span><span class="n">k1</span> <span class="bp">+</span> <span class="mi">2</span><span class="bp">.</span><span class="mi">0</span><span class="bp">*</span><span class="n">k2</span> <span class="bp">+</span> <span class="mi">2</span><span class="bp">.</span><span class="mi">0</span><span class="bp">*</span><span class="n">k3</span> <span class="bp">+</span> <span class="n">k4</span><span class="o">)</span><span class="bp">/</span><span class="mi">6</span><span class="bp">.</span><span class="mi">0</span><span class="o">)</span>

<span class="kd">def</span> <span class="n">f</span> <span class="o">(</span><span class="n">t</span> <span class="n">y</span> <span class="o">:</span> <span class="n">Float</span><span class="o">)</span> <span class="o">:</span> <span class="n">Float</span> <span class="o">:=</span> <span class="o">(</span><span class="n">t</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">-</span> <span class="n">y</span><span class="bp">*</span><span class="mi">2</span><span class="o">)</span> <span class="bp">*</span> <span class="n">y.sin</span>

<span class="k">#eval</span> <span class="n">f</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">1</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">2</span>

<span class="k">#eval</span> <span class="n">Array.foldl</span> <span class="o">(</span><span class="n">rk</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">init</span> <span class="o">:=</span> <span class="o">(</span><span class="mi">0</span><span class="bp">.</span><span class="mi">0</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="bp">.</span><span class="mi">0</span><span class="o">))</span> <span class="bp">#</span><span class="o">[</span><span class="mi">0</span><span class="bp">.</span><span class="mi">01</span><span class="o">,</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">03</span><span class="o">,</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">04</span><span class="o">,</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">06</span><span class="o">]</span>
</code></pre></div>



<a name="242977558"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/242977558" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#242977558">(Jun 17 2021 at 06:25)</a>:</h4>
<p>if you want to open <code>sin</code> instead of using projection notation, you can do this</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">open</span> <span class="n">Float</span> <span class="o">(</span><span class="n">sin</span><span class="o">)</span>
<span class="kn">open</span> <span class="n">Array</span> <span class="o">(</span><span class="n">foldl</span><span class="o">)</span>

<span class="kd">def</span> <span class="n">f</span> <span class="o">(</span><span class="n">t</span> <span class="n">y</span> <span class="o">:</span> <span class="n">Float</span><span class="o">)</span> <span class="o">:</span> <span class="n">Float</span> <span class="o">:=</span> <span class="o">(</span><span class="n">t</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">-</span> <span class="n">y</span><span class="bp">*</span><span class="mi">2</span><span class="o">)</span> <span class="bp">*</span> <span class="n">sin</span> <span class="n">y</span>

<span class="k">#eval</span> <span class="n">f</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">1</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">2</span>

<span class="k">#eval</span> <span class="n">foldl</span> <span class="o">(</span><span class="n">rk</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">init</span> <span class="o">:=</span> <span class="o">(</span><span class="mi">0</span><span class="bp">.</span><span class="mi">0</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="bp">.</span><span class="mi">0</span><span class="o">))</span> <span class="bp">#</span><span class="o">[</span><span class="mi">0</span><span class="bp">.</span><span class="mi">01</span><span class="o">,</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">03</span><span class="o">,</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">04</span><span class="o">,</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">06</span><span class="o">]</span>
</code></pre></div>



<a name="242977631"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/242977631" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#242977631">(Jun 17 2021 at 06:26)</a>:</h4>
<p><code>foldl</code> takes its arguments in the opposite order, so you can either use named arguments like <code>init :=</code> here or else swap the arguments</p>



<a name="242977936"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/242977936" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#242977936">(Jun 17 2021 at 06:31)</a>:</h4>
<p>and in case you are wondering why you are getting <code>-1.1099</code> instead of <code>-0.9527</code> like the blog post, it's because your definition of <code>f</code> uses <code>y*2</code> instead of <code>y^2</code></p>



<a name="243031680"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243031680" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243031680">(Jun 17 2021 at 15:04)</a>:</h4>
<p>Thanks a ton <span class="user-mention" data-user-id="110049">@Mario Carneiro</span> , super helpful as always.</p>



<a name="243031777"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243031777" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243031777">(Jun 17 2021 at 15:05)</a>:</h4>
<p>Next question:  do I  _need_ to specify the type signature of <code>rk</code> that explicitly?</p>



<a name="243077609"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243077609" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243077609">(Jun 17 2021 at 20:13)</a>:</h4>
<p>You still have to say that <code>f</code> is a function because lean does not try to guess if a function is dependent or not, but other than that you can do without all the types</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">rk</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">_</span> <span class="bp">→</span> <span class="n">_</span> <span class="bp">→</span> <span class="n">_</span><span class="o">)</span> <span class="o">:=</span> <span class="k">fun</span> <span class="o">(</span><span class="n">t</span><span class="o">,</span> <span class="n">y</span><span class="o">)</span> <span class="n">t'</span> <span class="bp">=&gt;</span>
  <span class="k">let</span> <span class="n">h</span>  <span class="o">:=</span> <span class="n">t'</span> <span class="bp">-</span> <span class="n">t</span>
  <span class="k">let</span> <span class="n">k1</span> <span class="o">:=</span> <span class="n">f</span> <span class="n">t</span> <span class="n">y</span>
  <span class="k">let</span> <span class="n">k2</span> <span class="o">:=</span> <span class="n">f</span> <span class="o">(</span><span class="n">t</span> <span class="bp">+</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">5</span><span class="bp">*</span><span class="n">h</span><span class="o">)</span> <span class="o">(</span><span class="n">y</span> <span class="bp">+</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">5</span><span class="bp">*</span><span class="n">h</span><span class="bp">*</span><span class="n">k1</span><span class="o">)</span>
  <span class="k">let</span> <span class="n">k3</span> <span class="o">:=</span> <span class="n">f</span> <span class="o">(</span><span class="n">t</span> <span class="bp">+</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">5</span><span class="bp">*</span><span class="n">h</span><span class="o">)</span> <span class="o">(</span><span class="n">y</span> <span class="bp">+</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">5</span><span class="bp">*</span><span class="n">h</span><span class="bp">*</span><span class="n">k2</span><span class="o">)</span>
  <span class="k">let</span> <span class="n">k4</span> <span class="o">:=</span> <span class="n">f</span> <span class="o">(</span><span class="n">t</span> <span class="bp">+</span> <span class="mi">1</span><span class="bp">.</span><span class="mi">0</span><span class="bp">*</span><span class="n">h</span><span class="o">)</span> <span class="o">(</span><span class="n">y</span> <span class="bp">+</span> <span class="mi">1</span><span class="bp">.</span><span class="mi">0</span><span class="bp">*</span><span class="n">h</span><span class="bp">*</span><span class="n">k3</span><span class="o">)</span>
  <span class="o">(</span><span class="n">t'</span><span class="o">,</span> <span class="n">y</span> <span class="bp">+</span> <span class="n">h</span><span class="bp">*</span><span class="o">(</span><span class="n">k1</span> <span class="bp">+</span> <span class="mi">2</span><span class="bp">.</span><span class="mi">0</span><span class="bp">*</span><span class="n">k2</span> <span class="bp">+</span> <span class="mi">2</span><span class="bp">.</span><span class="mi">0</span><span class="bp">*</span><span class="n">k3</span> <span class="bp">+</span> <span class="n">k4</span><span class="o">)</span><span class="bp">/</span><span class="mi">6</span><span class="bp">.</span><span class="mi">0</span><span class="o">)</span>
</code></pre></div>



<a name="243077798"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243077798" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243077798">(Jun 17 2021 at 20:15)</a>:</h4>
<p>the <code>return</code> is not necessary and is bad for type inference</p>



<a name="243077815"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243077815" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243077815">(Jun 17 2021 at 20:15)</a>:</h4>
<p><span class="user-mention" data-user-id="243947">@Miguel Raz Guzmán Macedo</span></p>



<a name="243078481"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243078481" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243078481">(Jun 17 2021 at 20:20)</a>:</h4>
<p>Oooh, those are very useful tips, thanks a lot! I didn't know about <code>return</code>.</p>



<a name="243079198"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243079198" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243079198">(Jun 17 2021 at 20:25)</a>:</h4>
<p>Normally you would use <code>return</code> in a <code>do</code> block, although it's not necessary at the last statement</p>



<a name="243079305"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243079305" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243079305">(Jun 17 2021 at 20:26)</a>:</h4>
<p>If you are just creating lets then you don't need <code>do</code></p>



<a name="243079336"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243079336" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243079336">(Jun 17 2021 at 20:26)</a>:</h4>
<p>Ok, Gotcha.</p>



<a name="243079509"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243079509" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243079509">(Jun 17 2021 at 20:27)</a>:</h4>
<p>lean 4 has <code>where</code> syntax as well, but it doesn't seem to work with local variables introduced by pattern matching</p>



<a name="243079790"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243079790" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243079790">(Jun 17 2021 at 20:30)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">rk</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">_</span> <span class="bp">→</span> <span class="n">_</span> <span class="bp">→</span> <span class="n">_</span><span class="o">)</span> <span class="n">t</span> <span class="n">y</span> <span class="n">t'</span> <span class="o">:=</span>
  <span class="o">(</span><span class="n">t'</span><span class="o">,</span> <span class="n">y</span> <span class="bp">+</span> <span class="n">h</span><span class="bp">*</span><span class="o">(</span><span class="n">k1</span> <span class="bp">+</span> <span class="mi">2</span><span class="bp">.</span><span class="mi">0</span><span class="bp">*</span><span class="n">k2</span> <span class="bp">+</span> <span class="mi">2</span><span class="bp">.</span><span class="mi">0</span><span class="bp">*</span><span class="n">k3</span> <span class="bp">+</span> <span class="n">k4</span><span class="o">)</span><span class="bp">/</span><span class="mi">6</span><span class="bp">.</span><span class="mi">0</span><span class="o">)</span>
<span class="n">where</span>
  <span class="n">h</span>  <span class="o">:=</span> <span class="n">t'</span> <span class="bp">-</span> <span class="n">t</span>
  <span class="n">k1</span> <span class="o">:=</span> <span class="n">f</span> <span class="n">t</span> <span class="n">y</span>
  <span class="n">k2</span> <span class="o">:=</span> <span class="n">f</span> <span class="o">(</span><span class="n">t</span> <span class="bp">+</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">5</span><span class="bp">*</span><span class="n">h</span><span class="o">)</span> <span class="o">(</span><span class="n">y</span> <span class="bp">+</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">5</span><span class="bp">*</span><span class="n">h</span><span class="bp">*</span><span class="n">k1</span><span class="o">)</span>
  <span class="n">k3</span> <span class="o">:=</span> <span class="n">f</span> <span class="o">(</span><span class="n">t</span> <span class="bp">+</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">5</span><span class="bp">*</span><span class="n">h</span><span class="o">)</span> <span class="o">(</span><span class="n">y</span> <span class="bp">+</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">5</span><span class="bp">*</span><span class="n">h</span><span class="bp">*</span><span class="n">k2</span><span class="o">)</span>
  <span class="n">k4</span> <span class="o">:=</span> <span class="n">f</span> <span class="o">(</span><span class="n">t</span> <span class="bp">+</span> <span class="mi">1</span><span class="bp">.</span><span class="mi">0</span><span class="bp">*</span><span class="n">h</span><span class="o">)</span> <span class="o">(</span><span class="n">y</span> <span class="bp">+</span> <span class="mi">1</span><span class="bp">.</span><span class="mi">0</span><span class="bp">*</span><span class="n">h</span><span class="bp">*</span><span class="n">k3</span><span class="o">)</span>
</code></pre></div>



<a name="243079996"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243079996" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243079996">(Jun 17 2021 at 20:30)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> nice, I had only seen the <code>where</code> for structs and types, so I didn't know how to use it.</p>



<a name="243082853"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243082853" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243082853">(Jun 17 2021 at 20:51)</a>:</h4>
<p>Hmmm - I can't get the final line to work - here is all my code:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">open</span> <span class="n">Float</span> <span class="o">(</span><span class="n">sin</span><span class="o">)</span>
<span class="kn">open</span> <span class="n">Array</span> <span class="o">(</span><span class="n">foldl</span><span class="o">)</span>
<span class="kd">def</span> <span class="n">rk</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">_</span> <span class="bp">→</span> <span class="n">_</span> <span class="bp">→</span> <span class="n">_</span><span class="o">)</span> <span class="n">t</span> <span class="n">y</span> <span class="n">t'</span> <span class="o">:=</span>
  <span class="o">(</span><span class="n">t'</span><span class="o">,</span> <span class="n">y</span> <span class="bp">+</span> <span class="n">h</span><span class="bp">*</span><span class="o">(</span><span class="n">k1</span> <span class="bp">+</span> <span class="mi">2</span><span class="bp">.</span><span class="mi">0</span><span class="bp">*</span><span class="n">k2</span> <span class="bp">+</span> <span class="mi">2</span><span class="bp">.</span><span class="mi">0</span><span class="bp">*</span><span class="n">k3</span> <span class="bp">+</span> <span class="n">k4</span><span class="o">)</span><span class="bp">/</span><span class="mi">6</span><span class="bp">.</span><span class="mi">0</span><span class="o">)</span>
<span class="n">where</span>
  <span class="n">h</span>  <span class="o">:=</span> <span class="n">t'</span> <span class="bp">-</span> <span class="n">t</span>
  <span class="n">k1</span> <span class="o">:=</span> <span class="n">f</span> <span class="n">t</span> <span class="n">y</span>
  <span class="n">k2</span> <span class="o">:=</span> <span class="n">f</span> <span class="o">(</span><span class="n">t</span> <span class="bp">+</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">5</span><span class="bp">*</span><span class="n">h</span><span class="o">)</span> <span class="o">(</span><span class="n">y</span> <span class="bp">+</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">5</span><span class="bp">*</span><span class="n">h</span><span class="bp">*</span><span class="n">k1</span><span class="o">)</span>
  <span class="n">k3</span> <span class="o">:=</span> <span class="n">f</span> <span class="o">(</span><span class="n">t</span> <span class="bp">+</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">5</span><span class="bp">*</span><span class="n">h</span><span class="o">)</span> <span class="o">(</span><span class="n">y</span> <span class="bp">+</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">5</span><span class="bp">*</span><span class="n">h</span><span class="bp">*</span><span class="n">k2</span><span class="o">)</span>
  <span class="n">k4</span> <span class="o">:=</span> <span class="n">f</span> <span class="o">(</span><span class="n">t</span> <span class="bp">+</span> <span class="mi">1</span><span class="bp">.</span><span class="mi">0</span><span class="bp">*</span><span class="n">h</span><span class="o">)</span> <span class="o">(</span><span class="n">y</span> <span class="bp">+</span> <span class="mi">1</span><span class="bp">.</span><span class="mi">0</span><span class="bp">*</span><span class="n">h</span><span class="bp">*</span><span class="n">k3</span><span class="o">)</span>

<span class="kd">def</span> <span class="n">f</span> <span class="o">(</span><span class="n">t</span> <span class="n">y</span> <span class="o">:</span> <span class="n">Float</span><span class="o">)</span> <span class="o">:</span> <span class="n">Float</span> <span class="o">:=</span> <span class="o">(</span><span class="n">t</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">-</span> <span class="n">y</span><span class="bp">^</span><span class="mi">2</span><span class="o">)</span> <span class="bp">*</span> <span class="n">sin</span> <span class="n">y</span>

<span class="k">#eval</span> <span class="n">f</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">1</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">2</span>

<span class="k">#eval</span> <span class="n">foldl</span> <span class="n">rk</span> <span class="o">(</span><span class="n">init</span> <span class="o">:=</span> <span class="o">(</span><span class="mi">0</span><span class="bp">.</span><span class="mi">0</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="bp">.</span><span class="mi">0</span><span class="o">))</span> <span class="bp">#</span><span class="o">[</span><span class="mi">0</span><span class="bp">.</span><span class="mi">01</span><span class="o">,</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">03</span><span class="o">,</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">04</span><span class="o">,</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">06</span><span class="o">]</span>
</code></pre></div>



<a name="243084437"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243084437" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243084437">(Jun 17 2021 at 21:02)</a>:</h4>
<p>the last version changes the type of <code>rk</code>, so you would have to use <code>uncurry (rk f)</code> instead of <code>rk</code> in the eval line</p>



<a name="243087019"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243087019" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243087019">(Jun 17 2021 at 21:24)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="k">#eval</span> <span class="n">foldl</span> <span class="n">uncurry</span> <span class="o">(</span><span class="n">rk</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">init</span> <span class="o">:=</span> <span class="o">(</span><span class="mi">0</span><span class="bp">.</span><span class="mi">0</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="bp">.</span><span class="mi">0</span><span class="o">))</span> <span class="bp">#</span><span class="o">[</span><span class="mi">0</span><span class="bp">.</span><span class="mi">01</span><span class="o">,</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">03</span><span class="o">,</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">04</span><span class="o">,</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">06</span><span class="o">]</span>
</code></pre></div>
<p>Am I missing an export?</p>



<a name="243099005"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243099005" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243099005">(Jun 17 2021 at 23:33)</a>:</h4>
<p>The manual really needs some updating.</p>



<a name="243099011"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243099011" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243099011">(Jun 17 2021 at 23:33)</a>:</h4>
<p><code>(uncurry (rk f))</code> needs to be in parentheses since otherwise you are passing <code>uncurry</code> and <code>(rk f)</code> separately to <code>foldl</code>; also <code>uncurry</code> probably doesn't exist in lean 4 yet</p>



<a name="243099016"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243099016" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243099016">(Jun 17 2021 at 23:33)</a>:</h4>
<p>I keep wanting a <code>Lean4 by example</code> guide</p>



<a name="243099029"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243099029" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243099029">(Jun 17 2021 at 23:33)</a>:</h4>
<p>that's called the lean 4 source code ATM <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span></p>



<a name="243099084"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243099084" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243099084">(Jun 17 2021 at 23:34)</a>:</h4>
<p>Even looking at the source code is not too helpful - how do you navigate when you want to see what a function does?</p>



<a name="243099094"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243099094" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243099094">(Jun 17 2021 at 23:34)</a>:</h4>
<p>ctrl-click</p>



<a name="243099114"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243099114" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243099114">(Jun 17 2021 at 23:34)</a>:</h4>
<p>Use vscode with the lean 4 extension to look at the lean 4 sources</p>



<a name="243099132"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243099132" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243099132">(Jun 17 2021 at 23:35)</a>:</h4>
<p>I'm used to searching for unit tests, but I don't think Lean4 has a good system for that.</p>



<a name="243099150"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243099150" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243099150">(Jun 17 2021 at 23:35)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> I have Lean3 installed in VSCode and Lean4 on Emacs, and that's after a few days of battle with the nix stuff.</p>



<a name="243099157"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243099157" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243099157">(Jun 17 2021 at 23:35)</a>:</h4>
<p>I don't really get how to keep the installations separate.</p>



<a name="243099159"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243099159" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243099159">(Jun 17 2021 at 23:35)</a>:</h4>
<p>There are unit tests in lean 4 but not enough to be usable as an example guide</p>



<a name="243099196"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243099196" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243099196">(Jun 17 2021 at 23:36)</a>:</h4>
<p>thanks for your patience, sorry for being a newbie :(</p>



<a name="243099222"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243099222" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243099222">(Jun 17 2021 at 23:36)</a>:</h4>
<p>I have the lean 4 extension disabled by default and enabled on specific workspaces (like the lean4 repo)</p>



<a name="243099232"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243099232" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243099232">(Jun 17 2021 at 23:36)</a>:</h4>
<p>Oh that's nice.</p>



<a name="243099241"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243099241" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243099241">(Jun 17 2021 at 23:37)</a>:</h4>
<p>I just want a little package that I can make little examples for.</p>



<a name="243099243"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243099243" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243099243">(Jun 17 2021 at 23:37)</a>:</h4>
<p>Like exercism.</p>



<a name="243099249"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243099249" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243099249">(Jun 17 2021 at 23:37)</a>:</h4>
<p>And start to benchmark different solutions.</p>



<a name="243099250"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243099250" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243099250">(Jun 17 2021 at 23:37)</a>:</h4>
<p>I ran into some issues with lean files getting misinterpreted as lean4 if I don't selectively enable the extension</p>



<a name="243099262"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243099262" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243099262">(Jun 17 2021 at 23:37)</a>:</h4>
<p>Understandable.</p>



<a name="243099325"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243099325" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243099325">(Jun 17 2021 at 23:38)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> A bit besides the point, but how likely is Lean5 to completely change Lean4 semantics? Do you find much transition pain from Lean3 to Lean4?</p>



<a name="243099333"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243099333" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243099333">(Jun 17 2021 at 23:38)</a>:</h4>
<p>I have no idea whether lean 5 will exist or what it will do</p>



<a name="243099386"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243099386" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243099386">(Jun 17 2021 at 23:39)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> hoo boy.</p>



<a name="243099393"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243099393" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243099393">(Jun 17 2021 at 23:39)</a>:</h4>
<p>there is a lot of transition pain from lean 3 to lean 4, but working on fixing that is literally in my job description at the moment</p>



<a name="243099404"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243099404" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243099404">(Jun 17 2021 at 23:39)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Oh neat - where at?</p>



<a name="243099420"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243099420" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243099420">(Jun 17 2021 at 23:40)</a>:</h4>
<p>microsoft research</p>



<a name="243099474"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243099474" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243099474">(Jun 17 2021 at 23:40)</a>:</h4>
<p>Oh neat, so I guess there's at least 3 people working on Lean4 now? Kudos!</p>



<a name="243099501"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243099501" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243099501">(Jun 17 2021 at 23:41)</a>:</h4>
<p>heh, I'm not on the core team, but my spirit is</p>



<a name="243099525"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243099525" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243099525">(Jun 17 2021 at 23:41)</a>:</h4>
<p>Neat.</p>



<a name="243099543"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243099543" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243099543">(Jun 17 2021 at 23:42)</a>:</h4>
<p>I'm working with <span class="user-mention silent" data-user-id="230999">Daniel Selsam</span> on the mathport tool</p>



<a name="243099618"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243099618" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243099618">(Jun 17 2021 at 23:42)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Neat!</p>



<a name="243099626"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243099626" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243099626">(Jun 17 2021 at 23:42)</a>:</h4>
<p>Wait, which extension is the good Lean4 extension?</p>



<a name="243099663"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243099663" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243099663">(Jun 17 2021 at 23:43)</a>:</h4>
<p>mhuisi.lean4 I think</p>



<a name="243099724"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243099724" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243099724">(Jun 17 2021 at 23:44)</a>:</h4>
<p>no wait, it's leanprover.lean4 now</p>



<a name="243099865"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243099865" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243099865">(Jun 17 2021 at 23:46)</a>:</h4>
<p>By the way, it's easy to write uncurry yourself:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">uncurry</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span> <span class="bp">→</span> <span class="n">γ</span><span class="o">)</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">×</span> <span class="n">β</span> <span class="bp">→</span> <span class="n">γ</span> <span class="bp">|</span> <span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=&gt;</span> <span class="n">f</span> <span class="n">a</span> <span class="n">b</span>
<span class="k">#eval</span> <span class="n">Array.foldl</span> <span class="o">(</span><span class="n">uncurry</span> <span class="o">(</span><span class="n">rk</span> <span class="n">f</span><span class="o">))</span> <span class="o">(</span><span class="n">init</span> <span class="o">:=</span> <span class="o">(</span><span class="mi">0</span><span class="bp">.</span><span class="mi">0</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="bp">.</span><span class="mi">0</span><span class="o">))</span> <span class="bp">#</span><span class="o">[</span><span class="mi">0</span><span class="bp">.</span><span class="mi">01</span><span class="o">,</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">03</span><span class="o">,</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">04</span><span class="o">,</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">06</span><span class="o">]</span>
</code></pre></div>



<a name="243099906"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243099906" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243099906">(Jun 17 2021 at 23:47)</a>:</h4>
<p>Oh neat.</p>



<a name="243099909"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243099909" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243099909">(Jun 17 2021 at 23:47)</a>:</h4>
<p>Ugh, I'm stuck in elan hell again.</p>



<a name="243100163"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243100163" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243100163">(Jun 17 2021 at 23:51)</a>:</h4>
<p>Alright, not worth my sanity to fight this package manager today. thanks though!</p>



<a name="243100406"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243100406" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243100406">(Jun 17 2021 at 23:54)</a>:</h4>
<p>That uncurry doesn't work btw</p>



<a name="243100530"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243100530" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243100530">(Jun 17 2021 at 23:56)</a>:</h4>
<p>full example:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">rk</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">_</span> <span class="bp">→</span> <span class="n">_</span> <span class="bp">→</span> <span class="n">_</span><span class="o">)</span> <span class="n">t</span> <span class="n">y</span> <span class="n">t'</span> <span class="o">:=</span>
  <span class="o">(</span><span class="n">t'</span><span class="o">,</span> <span class="n">y</span> <span class="bp">+</span> <span class="n">h</span><span class="bp">*</span><span class="o">(</span><span class="n">k1</span> <span class="bp">+</span> <span class="mi">2</span><span class="bp">.</span><span class="mi">0</span><span class="bp">*</span><span class="n">k2</span> <span class="bp">+</span> <span class="mi">2</span><span class="bp">.</span><span class="mi">0</span><span class="bp">*</span><span class="n">k3</span> <span class="bp">+</span> <span class="n">k4</span><span class="o">)</span><span class="bp">/</span><span class="mi">6</span><span class="bp">.</span><span class="mi">0</span><span class="o">)</span>
<span class="n">where</span>
  <span class="n">h</span>  <span class="o">:=</span> <span class="n">t'</span> <span class="bp">-</span> <span class="n">t</span>
  <span class="n">k1</span> <span class="o">:=</span> <span class="n">f</span> <span class="n">t</span> <span class="n">y</span>
  <span class="n">k2</span> <span class="o">:=</span> <span class="n">f</span> <span class="o">(</span><span class="n">t</span> <span class="bp">+</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">5</span><span class="bp">*</span><span class="n">h</span><span class="o">)</span> <span class="o">(</span><span class="n">y</span> <span class="bp">+</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">5</span><span class="bp">*</span><span class="n">h</span><span class="bp">*</span><span class="n">k1</span><span class="o">)</span>
  <span class="n">k3</span> <span class="o">:=</span> <span class="n">f</span> <span class="o">(</span><span class="n">t</span> <span class="bp">+</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">5</span><span class="bp">*</span><span class="n">h</span><span class="o">)</span> <span class="o">(</span><span class="n">y</span> <span class="bp">+</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">5</span><span class="bp">*</span><span class="n">h</span><span class="bp">*</span><span class="n">k2</span><span class="o">)</span>
  <span class="n">k4</span> <span class="o">:=</span> <span class="n">f</span> <span class="o">(</span><span class="n">t</span> <span class="bp">+</span> <span class="mi">1</span><span class="bp">.</span><span class="mi">0</span><span class="bp">*</span><span class="n">h</span><span class="o">)</span> <span class="o">(</span><span class="n">y</span> <span class="bp">+</span> <span class="mi">1</span><span class="bp">.</span><span class="mi">0</span><span class="bp">*</span><span class="n">h</span><span class="bp">*</span><span class="n">k3</span><span class="o">)</span>

<span class="kd">def</span> <span class="n">f</span> <span class="o">(</span><span class="n">t</span> <span class="n">y</span> <span class="o">:</span> <span class="n">Float</span><span class="o">)</span> <span class="o">:</span> <span class="n">Float</span> <span class="o">:=</span> <span class="o">(</span><span class="n">t</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">-</span> <span class="n">y</span><span class="bp">^</span><span class="mi">2</span><span class="o">)</span> <span class="bp">*</span> <span class="n">y.sin</span>

<span class="k">#eval</span> <span class="n">f</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">1</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">2</span>

<span class="kd">def</span> <span class="n">uncurry</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span> <span class="bp">→</span> <span class="n">γ</span><span class="o">)</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">×</span> <span class="n">β</span> <span class="bp">→</span> <span class="n">γ</span> <span class="bp">|</span> <span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=&gt;</span> <span class="n">f</span> <span class="n">a</span> <span class="n">b</span>

<span class="k">#eval</span> <span class="n">Array.foldl</span> <span class="o">(</span><span class="n">uncurry</span> <span class="o">(</span><span class="n">rk</span> <span class="n">f</span><span class="o">))</span> <span class="o">(</span><span class="n">init</span> <span class="o">:=</span> <span class="o">(</span><span class="mi">0</span><span class="bp">.</span><span class="mi">0</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span><span class="bp">.</span><span class="mi">0</span><span class="o">))</span> <span class="bp">#</span><span class="o">[</span><span class="mi">0</span><span class="bp">.</span><span class="mi">01</span><span class="o">,</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">03</span><span class="o">,</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">04</span><span class="o">,</span> <span class="mi">0</span><span class="bp">.</span><span class="mi">06</span><span class="o">]</span>
</code></pre></div>



<a name="243103929"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243103929" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243103929">(Jun 18 2021 at 00:39)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> mmmmm nope, not on my <code>leanprover/lean4:4.0.0</code> version.</p>



<a name="243104002"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243104002" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243104002">(Jun 18 2021 at 00:40)</a>:</h4>
<p>What's the error? I use nightly</p>



<a name="243104261"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243104261" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243104261">(Jun 18 2021 at 00:44)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> <code>unknown declaration '_eval', failed to synthesize instance.</code></p>



<a name="243104288"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243104288" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243104288">(Jun 18 2021 at 00:45)</a>:</h4>
<p>What does <code>#check</code> give in place of <code>#eval</code>?</p>



<a name="243104327"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243104327" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243104327">(Jun 18 2021 at 00:45)</a>:</h4>
<p><code>#check</code> is green</p>



<a name="243104330"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243104330" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243104330">(Jun 18 2021 at 00:45)</a>:</h4>
<p>it says:</p>



<a name="243104393"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243104393" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243104393">(Jun 18 2021 at 00:46)</a>:</h4>
<p>what instance was failed to synthesize?</p>



<a name="243104400"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243104400" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243104400">(Jun 18 2021 at 00:46)</a>:</h4>
<p><code>foldl (uncurry (rk f)) (0.0 sorryAx Float) #[num1, num2, num3, num4] 0</code></p>



<a name="243104402"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243104402" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243104402">(Jun 18 2021 at 00:46)</a>:</h4>
<p>Oh, it's probably <code>Repr Float</code></p>



<a name="243104414"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243104414" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243104414">(Jun 18 2021 at 00:46)</a>:</h4>
<p>oh wait that looks bad</p>



<a name="243104455"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243104455" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243104455">(Jun 18 2021 at 00:47)</a>:</h4>
<p>where did <code>num1</code> come from?</p>



<a name="243104463"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243104463" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243104463">(Jun 18 2021 at 00:47)</a>:</h4>
<p>are you using the code as written?</p>



<a name="243104472"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243104472" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243104472">(Jun 18 2021 at 00:47)</a>:</h4>
<p>Sorry, I got lazy. The full array is:</p>



<a name="243104486"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243104486" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243104486">(Jun 18 2021 at 00:47)</a>:</h4>
<p><code>#[ 1e-2, 3e-2, 4e-2, 6e-2]</code></p>



<a name="243104546"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243104546" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243104546">(Jun 18 2021 at 00:48)</a>:</h4>
<p>Could you post the code as written and the output as printed?</p>



<a name="243104611"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243104611" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243104611">(Jun 18 2021 at 00:49)</a>:</h4>
<p>here ya go</p>



<a name="243104613"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243104613" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243104613">(Jun 18 2021 at 00:49)</a>:</h4>
<div class="message_inline_image"><a href="https://imgur.com/WEatQq4.png"><img src="https://uploads.zulipusercontent.net/10e14ec6b0cf6d65fefd7a15e3a662974bd39fef/68747470733a2f2f696d6775722e636f6d2f574561745171342e706e67"></a></div>



<a name="243104716"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243104716" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243104716">(Jun 18 2021 at 00:50)</a>:</h4>
<p>oh, that makes a lot more sense with the comma</p>



<a name="243104723"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243104723" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243104723">(Jun 18 2021 at 00:50)</a>:</h4>
<p>it's saying <code>-1.0</code> has an instance problem</p>



<a name="243104736"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243104736" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243104736">(Jun 18 2021 at 00:50)</a>:</h4>
<p>so it's probably missing <code>Neg Float</code></p>



<a name="243104763"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243104763" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243104763">(Jun 18 2021 at 00:51)</a>:</h4>
<p>and that probably happened some time after 4.0.0 (which is pretty old)</p>



<a name="243104792"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243104792" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243104792">(Jun 18 2021 at 00:51)</a>:</h4>
<p>OK, if I swap <code>-1.0 -&gt; 1.0</code> Everything works!</p>



<a name="243104797"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243104797" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243104797">(Jun 18 2021 at 00:51)</a>:</h4>
<p><span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span></p>



<a name="243104804"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243104804" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243104804">(Jun 18 2021 at 00:51)</a>:</h4>
<p>I ... don't know how to update the Lean4 here.</p>



<a name="243104822"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243104822" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243104822">(Jun 18 2021 at 00:51)</a>:</h4>
<p><code>elan update leanprover/lean4:nightly</code></p>



<a name="243104825"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243104825" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243104825">(Jun 18 2021 at 00:51)</a>:</h4>
<p>I tried to <code>elan update</code> but I got a 404 download error.</p>



<a name="243104886"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243104886" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243104886">(Jun 18 2021 at 00:52)</a>:</h4>
<p>Oh what... now it's downloading.</p>



<a name="243104897"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243104897" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243104897">(Jun 18 2021 at 00:52)</a>:</h4>
<p>Must've mixed up some flags.</p>



<a name="243104945"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243104945" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243104945">(Jun 18 2021 at 00:53)</a>:</h4>
<p>Also, the failed to synthesize instance message should say more about the missing instance if you look at the error detail</p>



<a name="243105077"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243105077" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243105077">(Jun 18 2021 at 00:55)</a>:</h4>
<p>Well, I don't get any output in the <code>#eval 2+2</code> now <span aria-label="confused" class="emoji emoji-1f615" role="img" title="confused">:confused:</span></p>



<a name="243105083"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243105083" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243105083">(Jun 18 2021 at 00:55)</a>:</h4>
<p>maybe restart the editor</p>



<a name="243105092"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243105092" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243105092">(Jun 18 2021 at 00:55)</a>:</h4>
<p>(This is Lean4 in Doom emacs.)</p>



<a name="243105095"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243105095" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243105095">(Jun 18 2021 at 00:55)</a>:</h4>
<p>Lemme do that restart.</p>



<a name="243105384"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243105384" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243105384">(Jun 18 2021 at 00:59)</a>:</h4>
<p>Hmm no luck.</p>



<a name="243106214"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243106214" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Miguel Raz Guzmán Macedo <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243106214">(Jun 18 2021 at 01:11)</a>:</h4>
<p>You know what? The easiest way to set this up is just using the TBA gitpod setup by <span class="user-mention" data-user-id="110024">@Sebastian Ullrich</span> .</p>



<a name="243106641"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243106641" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243106641">(Jun 18 2021 at 01:19)</a>:</h4>
<p>Oh, you also have to update the extension</p>



<a name="243106698"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Making%20a%20RungeKutta%204/near/243106698" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Making.20a.20RungeKutta.204.html#243106698">(Jun 18 2021 at 01:20)</a>:</h4>
<p>the communication protocol also changes by lean version</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>