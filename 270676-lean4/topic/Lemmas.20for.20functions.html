---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/Lemmas.20for.20functions.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lemmas.20for.20functions.html">Lemmas for functions</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="238910940"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Lemmas%20for%20functions/near/238910940" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julien Marquet <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lemmas.20for.20functions.html#238910940">(May 15 2021 at 16:57)</a>:</h4>
<p>I couldn't find these lemmas in lean4, are there somewhere ?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">∀</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">)</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">α</span><span class="o">},</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">f</span> <span class="n">b</span>
<span class="bp">∀</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span><span class="o">}</span> <span class="o">{</span><span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">},</span> <span class="n">f</span> <span class="bp">=</span> <span class="n">g</span> <span class="bp">→</span> <span class="bp">∀</span> <span class="n">a</span><span class="o">,</span> <span class="n">f</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">g</span> <span class="n">a</span>
</code></pre></div>



<a name="238911047"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Lemmas%20for%20functions/near/238911047" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lemmas.20for.20functions.html#238911047">(May 15 2021 at 16:59)</a>:</h4>
<p><code>congrArg</code>/<code>congrFun</code></p>



<a name="238911335"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Lemmas%20for%20functions/near/238911335" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julien Marquet <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lemmas.20for.20functions.html#238911335">(May 15 2021 at 17:02)</a>:</h4>
<p>(Oh, I understand why I didn't find them, I was expecting a <code>f a = f b</code> notation but they are written with <code>Eq</code>. Thanks !)</p>



<a name="238918290"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Lemmas%20for%20functions/near/238918290" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lemmas.20for.20functions.html#238918290">(May 15 2021 at 18:58)</a>:</h4>
<p>A lot of lean 4 core stuff is written without notation. Is there a reason for this?</p>



<a name="238918564"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Lemmas%20for%20functions/near/238918564" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Selsam <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lemmas.20for.20functions.html#238918564">(May 15 2021 at 19:02)</a>:</h4>
<p>I presume it is a staging issue -- defining the notations (e.g. in <code>Init/Notation.Lean</code>) depends on many things from <code>Init/Prelude.lean</code>. AFAICT only <code>Prelude.lean</code> cannot use the notations defined in <code>Notation.lean</code>.</p>



<a name="238920051"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Lemmas%20for%20functions/near/238920051" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julien Marquet <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lemmas.20for.20functions.html#238920051">(May 15 2021 at 19:29)</a>:</h4>
<p>By the way, is there a theorem for beta reduction ?<br>
(I noticed that <code>simp only []</code> already does beta reductions)</p>



<a name="238920254"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Lemmas%20for%20functions/near/238920254" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julien Marquet <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lemmas.20for.20functions.html#238920254">(May 15 2021 at 19:32)</a>:</h4>
<p>(I sometimes want to rewrite in expressions like <code>(fun x =&gt; a * x) y</code>, but I have to beta-reduce first)</p>



<a name="238920442"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Lemmas%20for%20functions/near/238920442" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Selsam <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lemmas.20for.20functions.html#238920442">(May 15 2021 at 19:35)</a>:</h4>
<p>beta reduction is builtin to the logic of Lean, and <code>simp</code> beta-reduces automatically without needing justification (since the result is def-eq to the original term).</p>



<a name="238920537"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Lemmas%20for%20functions/near/238920537" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Selsam <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lemmas.20for.20functions.html#238920537">(May 15 2021 at 19:36)</a>:</h4>
<p>you can disable this though, if you don't want <code>simp</code> to beta-reduce</p>



<a name="238920616"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Lemmas%20for%20functions/near/238920616" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Selsam <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lemmas.20for.20functions.html#238920616">(May 15 2021 at 19:38)</a>:</h4>
<p>These are the <code>simp</code> flags: <a href="https://github.com/leanprover/lean4/blob/master/src/Init/Meta.lean#L870-L880">https://github.com/leanprover/lean4/blob/master/src/Init/Meta.lean#L870-L880</a></p>



<a name="238921959"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Lemmas%20for%20functions/near/238921959" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julien Marquet <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lemmas.20for.20functions.html#238921959">(May 15 2021 at 20:04)</a>:</h4>
<p>By looking further where you pointed I also found more useful features of <code>simp</code> so thanks ! :)</p>



<a name="238957247"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Lemmas%20for%20functions/near/238957247" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lemmas.20for.20functions.html#238957247">(May 16 2021 at 07:29)</a>:</h4>
<p>There is also a brief, non-exhaustive list of <code>simp</code> features at <a href="https://raw.githubusercontent.com/IPDSnelting/tba-2021/master/slides/lecture4.pdf?page=12">https://raw.githubusercontent.com/IPDSnelting/tba-2021/master/slides/lecture4.pdf?page=12</a>, pages 12 ff</p>



<a name="238966741"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Lemmas%20for%20functions/near/238966741" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lemmas.20for.20functions.html#238966741">(May 16 2021 at 10:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="230999">Daniel Selsam</span> <a href="#narrow/stream/270676-lean4/topic/Lemmas.20for.20functions/near/238918564">said</a>:</p>
<blockquote>
<p>I presume it is a staging issue -- defining the notations (e.g. in <code>Init/Notation.Lean</code>) depends on many things from <code>Init/Prelude.lean</code>. AFAICT only <code>Prelude.lean</code> cannot use the notations defined in <code>Notation.lean</code>.</p>
</blockquote>
<p>I thought it was a remnant of earlier versions of lean 4 without the stage0 stuff. With it, I don't see why notations can't be introduced immediately after the definition itself, similar to how it is done in lean 3</p>



<a name="238966892"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Lemmas%20for%20functions/near/238966892" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lemmas.20for.20functions.html#238966892">(May 16 2021 at 10:29)</a>:</h4>
<p>These notations are <em>not</em> built-in, so they are taken from the current stage, so they can be defined only after <code>ParserDescr/Macro</code>.</p>



<a name="238967962"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Lemmas%20for%20functions/near/238967962" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lemmas.20for.20functions.html#238967962">(May 16 2021 at 10:47)</a>:</h4>
<p>Does writing <code>infixl "foo" =&gt; bar</code> require <code>ParserDescr</code> to exist in the current stage? It doesn't directly reference this constant and doesn't require <code>import Lean</code> so I'm not sure how that happens</p>



<a name="238975886"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Lemmas%20for%20functions/near/238975886" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lemmas.20for.20functions.html#238975886">(May 16 2021 at 13:04)</a>:</h4>
<p>It does elaborate to a <code>ParserDescr</code> (which is defined in <code>Prelude</code>)</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>