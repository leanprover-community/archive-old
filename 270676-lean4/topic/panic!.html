---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/panic!.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/panic!.html">panic!</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="318633756"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/panic%21/near/318633756" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/panic!.html#318633756">(Dec 30 2022 at 18:08)</a>:</h4>
<p>Is it possible to get <code>#eval</code> of a <code>panic!</code> to produce an error or something?</p>



<a name="318634005"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/panic%21/near/318634005" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/panic!.html#318634005">(Dec 30 2022 at 18:10)</a>:</h4>
<p>it does produce an error</p>



<a name="318634031"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/panic%21/near/318634031" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/panic!.html#318634031">(Dec 30 2022 at 18:11)</a>:</h4>
<p>it goes in the output view / you get a popup</p>



<a name="318634177"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/panic%21/near/318634177" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/panic!.html#318634177">(Dec 30 2022 at 18:12)</a>:</h4>
<p>I don't get a popup with this:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">AAA</span> <span class="o">:</span> <span class="n">Nat</span> <span class="o">:=</span> <span class="n">panic</span><span class="bp">!</span> <span class="s2">"AAA!"</span>
<span class="k">#eval</span> <span class="n">AAA</span> <span class="c1">-- 0</span>
</code></pre></div>



<a name="318634343"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/panic%21/near/318634343" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/panic!.html#318634343">(Dec 30 2022 at 18:13)</a>:</h4>
<p>I'm not exactly sure where I should look for it in emacs, but I don't see an error anywhere obvious</p>



<a name="318634578"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/panic%21/near/318634578" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/panic!.html#318634578">(Dec 30 2022 at 18:15)</a>:</h4>
<p>in vscode when I paste that in a new file I get a popup "Lean server printed an error: PANIC at AAA Test:1:17: AAA! backtrace:" with a button "show stderr output" that opens the output panel containing a backtrace</p>



<a name="318634706"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/panic%21/near/318634706" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/panic!.html#318634706">(Dec 30 2022 at 18:16)</a>:</h4>
<p>I recall seeing this popup once in VS Code <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span> No idea about emacs though. But this is looking like a <a href="https://en.wikipedia.org/wiki/XY_problem">#xy</a> question</p>



<a name="318634795"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/panic%21/near/318634795" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/panic!.html#318634795">(Dec 30 2022 at 18:16)</a>:</h4>
<p>That said, <code>#eval</code> already intercepts stdout writes to turn them into diagnostics, it would make sense to also intercept panics and turn them into error diagnostics</p>



<a name="318634965"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/panic%21/near/318634965" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/panic!.html#318634965">(Dec 30 2022 at 18:18)</a>:</h4>
<p>that would require some runtime support though, currently panics are logged to stderr and then forgotten, so the server has no way to know that it even happened - it may as well be a panic in the server itself</p>



<a name="318635462"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/panic%21/near/318635462" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/panic!.html#318635462">(Dec 30 2022 at 18:22)</a>:</h4>
<p>I'm not sure what would be the xy; I have code that uses <code>assert!</code> to assert invariants and I would like to test it with <code>#eval</code></p>



<a name="318635783"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/panic%21/near/318635783" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/panic!.html#318635783">(Dec 30 2022 at 18:24)</a>:</h4>
<p>lack of effective panic reporting on emacs is definitely an issue</p>



<a name="318635869"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/panic%21/near/318635869" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/panic!.html#318635869">(Dec 30 2022 at 18:25)</a>:</h4>
<p>but I don't know anything about emacs mode so I can't speak to that</p>



<a name="318636049"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/panic%21/near/318636049" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/panic!.html#318636049">(Dec 30 2022 at 18:27)</a>:</h4>
<p>I recall they used to be reported in more normal places and it was toned down because it was too disruptive</p>



<a name="318636308"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/panic%21/near/318636308" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/panic!.html#318636308">(Dec 30 2022 at 18:29)</a>:</h4>
<p>I still find it extremely weird that the program keeps running after a failing <code>assert!</code></p>



<a name="318636385"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/panic%21/near/318636385" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/panic!.html#318636385">(Dec 30 2022 at 18:29)</a>:</h4>
<p>maybe I should be using some other kind of <code>assert!!</code>?</p>



<a name="318636529"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/panic%21/near/318636529" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/panic!.html#318636529">(Dec 30 2022 at 18:30)</a>:</h4>
<p>do you want it to take down the server?</p>



<a name="318636810"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/panic%21/near/318636810" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/panic!.html#318636810">(Dec 30 2022 at 18:33)</a>:</h4>
<p>What happens if you call <code>False.rec</code>? The program surely can't continue after that</p>



<a name="318637311"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/panic%21/near/318637311" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/panic!.html#318637311">(Dec 30 2022 at 18:37)</a>:</h4>
<p>oh yeah, that's what I'm talking about...</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">unsafe</span> <span class="kd">def</span> <span class="n">myPanic</span><span class="bp">!!</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">String</span><span class="o">)</span> <span class="o">:</span> <span class="n">α</span> <span class="o">:=</span>
  <span class="n">Empty.rec</span> <span class="o">(</span><span class="k">let</span> <span class="n">_</span> <span class="o">:</span> <span class="n">Inhabited</span> <span class="n">Empty</span> <span class="o">:=</span> <span class="o">⟨</span><span class="n">False.elim</span> <span class="n">lcProof</span><span class="o">⟩</span><span class="bp">;</span> <span class="n">panic</span><span class="bp">!</span> <span class="n">s</span><span class="o">)</span>
<span class="n">unsafe</span> <span class="kd">def</span> <span class="n">AAA</span> <span class="o">:</span> <span class="n">Nat</span> <span class="o">:=</span> <span class="n">myPanic</span><span class="bp">!!</span> <span class="s2">"AAA!"</span>
<span class="k">#eval</span> <span class="n">AAA</span> <span class="c1">-- server crash</span>
</code></pre></div>
<p>(don't try this at home)</p>



<a name="318637374"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/panic%21/near/318637374" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/panic!.html#318637374">(Dec 30 2022 at 18:37)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">axiom</span> <span class="n">f</span> <span class="o">:</span> <span class="n">False</span>

<span class="kd">def</span> <span class="n">myAssert</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">Bool</span><span class="o">)</span> <span class="o">:</span> <span class="n">Int</span> <span class="o">:=</span>
  <span class="k">if</span> <span class="n">b</span> <span class="k">then</span> <span class="mi">7</span> <span class="k">else</span> <span class="n">f.elim</span>

<span class="k">#eval</span> <span class="n">myAssert</span> <span class="n">false</span>            <span class="c1">-- 7 !</span>
</code></pre></div>



<a name="318637531"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/panic%21/near/318637531" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/panic!.html#318637531">(Dec 30 2022 at 18:38)</a>:</h4>
<p>yeah, this is obviously not reliable since it's using UB and lean will optimize away branches leading to <code>False.rec</code></p>



<a name="318637699"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/panic%21/near/318637699" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/panic!.html#318637699">(Dec 30 2022 at 18:40)</a>:</h4>
<p>In Haskell <code>error</code> just raises an (imprecise) exception, and ghci will catch and report it</p>



<a name="318637783"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/panic%21/near/318637783" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/panic!.html#318637783">(Dec 30 2022 at 18:40)</a>:</h4>
<p>yeah we've talked about catching panics in other threads, it adds a lot of complexity to the runtime</p>



<a name="318637900"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/panic%21/near/318637900" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/panic!.html#318637900">(Dec 30 2022 at 18:41)</a>:</h4>
<p>in lean BaseIO can't throw exceptions at all, that's all layered on in <code>IO</code> which is using the except monad</p>



<a name="318637975"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/panic%21/near/318637975" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/panic!.html#318637975">(Dec 30 2022 at 18:42)</a>:</h4>
<p>which kind of precludes throwing IO exceptions from pure code</p>



<a name="318638405"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/panic%21/near/318638405" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/panic!.html#318638405">(Dec 30 2022 at 18:45)</a>:</h4>
<p>I think you could have a primitive like <code>catchPanic : BaseIO A -&gt; BaseIO (Except String A)</code> though which catches any panics caused by the input (pure) code (so it's not really an IO exception but essentially plays the same role as one)</p>



<a name="318638931"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/panic%21/near/318638931" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/panic!.html#318638931">(Dec 30 2022 at 18:49)</a>:</h4>
<p>I would think at the least you could kill the thread in a controlled way, and collect the exception from the parent thread</p>



<a name="318639015"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/panic%21/near/318639015" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/panic!.html#318639015">(Dec 30 2022 at 18:50)</a>:</h4>
<p>it's not a thread, it's running on the main thread IIRC</p>



<a name="318639079"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/panic%21/near/318639079" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/panic!.html#318639079">(Dec 30 2022 at 18:50)</a>:</h4>
<p>Well, that can be changed presumably?</p>



<a name="318639121"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/panic%21/near/318639121" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/panic!.html#318639121">(Dec 30 2022 at 18:50)</a>:</h4>
<p>we probably don't want to do that for every use of evalConst</p>



<a name="318639175"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/panic%21/near/318639175" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/panic!.html#318639175">(Dec 30 2022 at 18:51)</a>:</h4>
<p>I don't know what evalConst is but I'm sure it can be done for every <code>#eval</code> in the source code at least</p>



<a name="318639578"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/panic%21/near/318639578" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/panic!.html#318639578">(Dec 30 2022 at 18:54)</a>:</h4>
<p>Are threads that expensive? In GHC it's pretty reasonable to create a million threads say</p>



<a name="318639611"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/panic%21/near/318639611" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/panic!.html#318639611">(Dec 30 2022 at 18:54)</a>:</h4>
<p>there are some other cases where code is run at compile time for an input expression, for example what should <code>by simp (config := panic! "")</code> do?</p>



<a name="318639841"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/panic%21/near/318639841" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/panic!.html#318639841">(Dec 30 2022 at 18:56)</a>:</h4>
<p>lean's threading mechanism is built around tasks which are on a threadpool. They are relatively cheap, but I don't know how complicated it would be to abort them</p>



<a name="318639923"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/panic%21/near/318639923" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/panic!.html#318639923">(Dec 30 2022 at 18:57)</a>:</h4>
<div class="codehilite" data-code-language="Text only"><pre><span></span><code>rwbarton@operad:/tmp$ ghci -XTemplateHaskell
GHCi, version 8.6.5: http://www.haskell.org/ghc/  :? for help
Prelude&gt; $( error "hi" )

&lt;interactive&gt;:1:1: error:
    • Exception when trying to run compile-time code:
        hi
CallStack (from HasCallStack):
  error, called at &lt;interactive&gt;:1:4 in interactive:Ghci1
      Code: error "hi"
    • In the untyped splice: $(error "hi")
Prelude&gt;
</code></pre></div>



<a name="318640096"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/panic%21/near/318640096" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/panic!.html#318640096">(Dec 30 2022 at 18:58)</a>:</h4>
<p>For sure these kinds of issues are not high priority though.</p>



<a name="318640709"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/panic%21/near/318640709" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/panic!.html#318640709">(Dec 30 2022 at 19:02)</a>:</h4>
<p>As an annoying workaround, the <code>assert!'</code> idea isn't too bad. You can make it print the message with <code>dbg_trace</code> and then manually <code>panic!</code> with the same message</p>



<a name="318640917"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/panic%21/near/318640917" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/panic!.html#318640917">(Dec 30 2022 at 19:04)</a>:</h4>
<p>that doesn't solve the issue that the code continues despite the assertion failure though</p>



<a name="318641032"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/panic%21/near/318641032" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/panic!.html#318641032">(Dec 30 2022 at 19:05)</a>:</h4>
<p>hm, what happens if you print to stderr inside <code>#eval</code>?</p>



<a name="318641200"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/panic%21/near/318641200" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/panic!.html#318641200">(Dec 30 2022 at 19:06)</a>:</h4>
<p>it appears to be indistinguishable from regular print</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="k">#eval</span> <span class="n">IO.eprintln</span> <span class="s2">"hi"</span> <span class="c1">-- hi</span>
</code></pre></div>



<a name="318655746"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/panic%21/near/318655746" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/panic!.html#318655746">(Dec 30 2022 at 21:15)</a>:</h4>
<p>There's an old TODO for capturing panics during <code>#eval</code> like we do for stderr/out: <a href="https://github.com/leanprover/lean4/blob/10d2403e8330d4a5d9539daed77dc30783589870/src/runtime/object.cpp#L100">https://github.com/leanprover/lean4/blob/10d2403e8330d4a5d9539daed77dc30783589870/src/runtime/object.cpp#L100</a></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>