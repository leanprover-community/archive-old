---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/.E2.9C.94.20partial.20recursive.20def.3A.20failed.20to.20show.20inhabited.20non.20empty.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20partial.20recursive.20def.3A.20failed.20to.20show.20inhabited.20non.20empty.html">✔ partial recursive def: failed to show inhabited non empty</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="291436797"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20partial%20recursive%20def%3A%20failed%20to%20show%20inhabited%20non%20empty/near/291436797" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20partial.20recursive.20def.3A.20failed.20to.20show.20inhabited.20non.20empty.html#291436797">(Jul 30 2022 at 16:05)</a>:</h4>
<p><span class="user-mention silent" data-user-id="315434">Andrés Goens</span> has marked this topic as resolved.</p>



<a name="291769086"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20partial%20recursive%20def%3A%20failed%20to%20show%20inhabited%20non%20empty/near/291769086" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> cognivore <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20partial.20recursive.20def.3A.20failed.20to.20show.20inhabited.20non.20empty.html#291769086">(Aug 02 2022 at 21:09)</a>:</h4>
<p>Am I reading it correctly that there's no real way to do the same trick with an ad-hoc polymorphic function that returns a monad?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">private</span> <span class="n">partial</span> <span class="kd">def</span> <span class="n">takeWhileDo</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span> <span class="bp">→</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">{</span><span class="n">℘</span> <span class="n">⅌</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span>
                                <span class="o">(</span><span class="n">φ</span> <span class="o">:</span> <span class="n">⅌</span> <span class="bp">→</span> <span class="n">Bool</span><span class="o">)</span> <span class="o">(</span><span class="n">mx</span> <span class="o">:</span> <span class="n">m</span> <span class="n">s</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">Nat</span><span class="o">)</span> <span class="o">(</span><span class="n">acc</span> <span class="o">:</span> <span class="n">f</span> <span class="n">℘</span><span class="o">)</span>
                                <span class="o">[</span><span class="n">Coco</span> <span class="n">℘</span> <span class="n">s</span><span class="o">]</span> <span class="o">[</span><span class="n">Iterable</span> <span class="n">℘</span> <span class="n">⅌</span><span class="o">]</span> <span class="o">[</span><span class="n">Terminable</span> <span class="n">f</span> <span class="n">℘</span> <span class="n">ε</span><span class="o">]</span> <span class="o">[</span><span class="n">Terminable</span> <span class="n">f</span> <span class="n">⅌</span> <span class="n">ε</span><span class="o">]</span> <span class="o">[</span><span class="n">Aka</span> <span class="n">m</span> <span class="n">s</span> <span class="n">f</span> <span class="n">⅌</span><span class="o">]</span> <span class="o">[</span><span class="n">Monad</span> <span class="n">m</span><span class="o">]</span>
                                <span class="o">:</span> <span class="n">m</span> <span class="o">(</span><span class="n">f</span> <span class="n">℘</span> <span class="bp">×</span> <span class="n">s</span><span class="o">)</span> <span class="o">:=</span> <span class="k">do</span>
</code></pre></div>



<a name="291769398"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20partial%20recursive%20def%3A%20failed%20to%20show%20inhabited%20non%20empty/near/291769398" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> cognivore <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20partial.20recursive.20def.3A.20failed.20to.20show.20inhabited.20non.20empty.html#291769398">(Aug 02 2022 at 21:12)</a>:</h4>
<p>Although, now that I'm thinking about it, perhaps I can write an instance that shows that if <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo separator="true">,</mo><mtext> </mtext><mi mathvariant="normal">℘</mi><mo separator="true">,</mo><mtext> </mtext><mi>s</mi></mrow><annotation encoding="application/x-tex"> f,\ \wp,\ s </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mpunct">,</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">℘</span><span class="mpunct">,</span><span class="mspace"> </span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">s</span></span></span></span> are <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>Inhabited</mtext></mrow><annotation encoding="application/x-tex"> \text{Inhabited} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord text"><span class="mord">Inhabited</span></span></span></span></span>, then <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mo>⋯</mo></mrow><annotation encoding="application/x-tex"> m \cdots </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">⋯</span></span></span></span> is also inhabited.</p>



<a name="291769759"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20partial%20recursive%20def%3A%20failed%20to%20show%20inhabited%20non%20empty/near/291769759" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> cognivore <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20partial.20recursive.20def.3A.20failed.20to.20show.20inhabited.20non.20empty.html#291769759">(Aug 02 2022 at 21:16)</a>:</h4>
<p>Oh, some kind soul did it for me... So adding <code>[Inhabited (f ℘)] [Inhabited s]</code> sufficed. Thank you very much for an explanation, <span class="user-mention" data-user-id="395550">@Henrik Böving</span>! You're the MVP :)</p>



<a name="291770026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20partial%20recursive%20def%3A%20failed%20to%20show%20inhabited%20non%20empty/near/291770026" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20partial.20recursive.20def.3A.20failed.20to.20show.20inhabited.20non.20empty.html#291770026">(Aug 02 2022 at 21:18)</a>:</h4>
<p>Note that a monad might be inhabited despite of its wrapped type not being inhabited, for example <code>Option False</code> is Inhabited by <code>none</code> so you might instead want to request an instance <code>Inhabited (m (f ℘ × s))</code> which can be synthesized by both the instance you mentioned or also alternative instances for the specific monad</p>



<a name="291770366"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20partial%20recursive%20def%3A%20failed%20to%20show%20inhabited%20non%20empty/near/291770366" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> cognivore <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20partial.20recursive.20def.3A.20failed.20to.20show.20inhabited.20non.20empty.html#291770366">(Aug 02 2022 at 21:21)</a>:</h4>
<p>That's a cool observation. I'm right now facing a problem that my sources <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex"> s </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">s</span></span></span></span> actually aren't inhabited.</p>



<a name="291770741"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20partial%20recursive%20def%3A%20failed%20to%20show%20inhabited%20non%20empty/near/291770741" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> cognivore <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20partial.20recursive.20def.3A.20failed.20to.20show.20inhabited.20non.20empty.html#291770741">(Aug 02 2022 at 21:24)</a>:</h4>
<p>Wow, this observation has just saved me hours. Thank you so much, Henrik!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>