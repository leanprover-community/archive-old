---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/.E2.9C.94.20Using.20let.20rec.20in.20expansion.20produces.20error.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20Using.20let.20rec.20in.20expansion.20produces.20error.html">âœ” Using let rec in expansion produces error</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="283094612"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20Using%20let%20rec%20in%20expansion%20produces%20error/near/283094612" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Raghuram <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20Using.20let.20rec.20in.20expansion.20produces.20error.html#283094612">(May 20 2022 at 16:29)</a>:</h4>
<p>Replacing <code>$name</code> with <code>$name:ident</code> fixes the error.</p>
<p>Also, writing <code>(let rec $name; $t)</code> or <code>(let rec $name:letDecl; $t)</code> successfully defines the macro (although it almost certainly doesn't do anything anyone wants).<br>
So maybe without the <code>:ident</code>, <code>$name</code> is interpreted as standing for an entire <code>let</code> declaration of the form <code>name := v</code>, so Lean is complaining that it was expecting a term after the declaration (was expecting the <code>t</code>).</p>
<p>I don't know why it's getting interpreted that way though.  I suspect it's related to the reason the <code>:ident</code> etc. notation exists.</p>



<a name="283096729"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20Using%20let%20rec%20in%20expansion%20produces%20error/near/283096729" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph O <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20Using.20let.20rec.20in.20expansion.20produces.20error.html#283096729">(May 20 2022 at 16:47)</a>:</h4>
<p>That makes sesne</p>



<a name="283096733"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20Using%20let%20rec%20in%20expansion%20produces%20error/near/283096733" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20Using.20let.20rec.20in.20expansion.20produces.20error.html#283096733">(May 20 2022 at 16:47)</a>:</h4>
<p><span class="user-mention silent" data-user-id="467926">Joseph O</span> has marked this topic as resolved.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>