---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/Set.20up.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Set.20up.html">Set up</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="284629137"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Set%20up/near/284629137" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dan Velleman <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Set.20up.html#284629137">(Jun 01 2022 at 15:39)</a>:</h4>
<p>I have been using Lean 3.  I am trying to set up Lean 4 on a Mac, following the instructions here:<br>
<a href="https://leanprover.github.io/lean4/doc/setup.html">https://leanprover.github.io/lean4/doc/setup.html</a><br>
It doesn't seem to be working.  My guess is that my version of elan is too old.  (I think I have version 1.1.0.)  When I try <code>elan self update</code> I get the message <code>self update is disabled for this build of elan.</code>  So then I tried to install a new version of elan by following the instructions here:<br>
<a href="https://github.com/leanprover/elan">https://github.com/leanprover/elan</a><br>
The <code>curl</code> command doesn't work--I get the message</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">info</span><span class="o">:</span> <span class="n">downloading</span> <span class="n">installer</span>
<span class="n">error</span><span class="o">:</span> <span class="n">it</span> <span class="n">looks</span> <span class="n">like</span> <span class="n">you</span> <span class="k">have</span> <span class="n">an</span> <span class="n">existing</span> <span class="n">installation</span> <span class="n">of</span> <span class="n">Lean</span> <span class="n">at</span><span class="o">:</span>
<span class="n">error</span><span class="o">:</span> <span class="bp">/</span><span class="n">usr</span><span class="bp">/</span><span class="kn">local</span><span class="bp">/</span><span class="n">bin</span>
<span class="n">error</span><span class="o">:</span> <span class="n">elan</span> <span class="n">cannot</span> <span class="n">be</span> <span class="n">installed</span> <span class="n">alongside</span> <span class="n">Lean.</span> <span class="n">Please</span> <span class="n">uninstall</span> <span class="n">first</span>
<span class="n">error</span><span class="o">:</span> <span class="k">if</span> <span class="n">this</span> <span class="n">is</span> <span class="n">what</span> <span class="n">you</span> <span class="n">want</span><span class="o">,</span> <span class="n">restart</span> <span class="n">the</span> <span class="n">installation</span> <span class="k">with</span> <span class="bp">`-</span><span class="n">y'</span>
<span class="n">error</span><span class="o">:</span> <span class="n">cannot</span> <span class="n">install</span> <span class="n">while</span> <span class="n">Lean</span> <span class="n">is</span> <span class="n">installed</span>
</code></pre></div>
<p>So now I need to uninstall, but I don't know how to do that.  Any suggestions?</p>



<a name="284629748"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Set%20up/near/284629748" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dan Velleman <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Set.20up.html#284629748">(Jun 01 2022 at 15:43)</a>:</h4>
<p>I would be glad to add <code>-y</code> to the installation command, if I knew where to add it.  Does it go after <code>sh</code> at the end?</p>



<a name="284630098"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Set%20up/near/284630098" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Set.20up.html#284630098">(Jun 01 2022 at 15:46)</a>:</h4>
<p>Ddi you install lean/elan using your system package manager perhaps? Can you try and uninstall with your system packager manager and see what happens</p>



<a name="284630291"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Set%20up/near/284630291" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Set.20up.html#284630291">(Jun 01 2022 at 15:47)</a>:</h4>
<p>If you installed elan via Homebrew (likely given the update error), you just have to update it. Homebrew has the latest version.</p>



<a name="284630589"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Set%20up/near/284630589" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dan Velleman <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Set.20up.html#284630589">(Jun 01 2022 at 15:49)</a>:</h4>
<p>I don't remember how I installed it.  Perhaps homebrew?<br>
Part of the problems with <em>all</em> of the installation instructions is that they assume you know unix.  I know a little about unix, but not much.  In particular, I don't know how to use a package manager.  I don't know how to use homebrew.</p>



<a name="284630847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Set%20up/near/284630847" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Set.20up.html#284630847">(Jun 01 2022 at 15:51)</a>:</h4>
<p>I'm not a regular macOS user, but I think re-running <code>brew install elan-init</code> should do it.</p>



<a name="284630925"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Set%20up/near/284630925" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dan Velleman <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Set.20up.html#284630925">(Jun 01 2022 at 15:52)</a>:</h4>
<p>OK, I'll try that.  Thanks.</p>



<a name="284631365"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Set%20up/near/284631365" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dan Velleman <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Set.20up.html#284631365">(Jun 01 2022 at 15:55)</a>:</h4>
<p>Nope, that didn't work.  I got the message "Error: homebrew-core is a shallow clone.  To <code>brew update</code>, first run" and that's followed by a long git command.  I could do that, but I wonder if I'd be better off uninstalling everything and starting from scratch.</p>



<a name="284632094"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Set%20up/near/284632094" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Set.20up.html#284632094">(Jun 01 2022 at 16:00)</a>:</h4>
<p>Yikes. If you're planning to use Homebrew in the future, you should probably follow the instructions or uninstall &amp; reinstall Homebrew. Otherwise, I'd hope that at least <code>brew remove elan-init</code> would work. If it does, you should be able to follow our official instructions again.</p>



<a name="284632328"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Set%20up/near/284632328" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Set.20up.html#284632328">(Jun 01 2022 at 16:01)</a>:</h4>
<p>New users really shouldn't need to know Unix to follow the quickstart. Your case is just a bit more special since you had a conflicting prior setup.</p>



<a name="284632634"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Set%20up/near/284632634" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dan Velleman <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Set.20up.html#284632634">(Jun 01 2022 at 16:04)</a>:</h4>
<p>So I wonder if I'm best off <em>completely</em> removing my prior setup, so that I can follow the quickstart.  Will <code>brew remove elan-init</code> remove everything, or just elan?  If the elan installer is complaining that elan can't be installed alongside an existing Lean installation, do I need to uninstall more than just elan?</p>



<a name="284633133"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Set%20up/near/284633133" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Set.20up.html#284633133">(Jun 01 2022 at 16:07)</a>:</h4>
<p>That command should remove only elan and elan's <code>lean</code> binary the installer was complaining about. After that, you should be able to follow the quickstart.</p>



<a name="284634284"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Set%20up/near/284634284" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dan Velleman <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Set.20up.html#284634284">(Jun 01 2022 at 16:16)</a>:</h4>
<p>OK, I think that worked!<br>
One more question:  The instructions say that I can use the command <code>elan override set leanprover/lean4:stable</code> to activate Lean 4 in the current directory only.  I'm not sure I know exactly what that means.  If I create a folder called "Lean 4" on my mac, navigate to that folder, and give the <code>elan override</code> command, does that mean that any Lean project I create inside that folder will use Lean 4?  Or do I create a folder for a particular project and run the command in that folder to have that project use Lean 4?  What's the best way to be able to use Lean 3 for some projects and Lean 4 for others?</p>



<a name="284634617"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Set%20up/near/284634617" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Set.20up.html#284634617">(Jun 01 2022 at 16:20)</a>:</h4>
<p>You don't have to worry about that. For Lean 3 projects created with <code>leanpkg</code> and Lean 4 projects created with <code>lake</code>, your editor will automatically choose the correct version.</p>



<a name="284635204"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Set%20up/near/284635204" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dan Velleman <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Set.20up.html#284635204">(Jun 01 2022 at 16:24)</a>:</h4>
<p>Still not working.  Here are my latest error messages:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">djvelleman</span><span class="bp">@</span><span class="n">Dans</span><span class="bp">-</span><span class="n">MBP</span> <span class="n">Lean_4</span> <span class="bp">%</span> <span class="n">elan</span> <span class="n">default</span> <span class="n">leanprover</span><span class="bp">/</span><span class="n">lean4</span><span class="o">:</span><span class="n">stable</span>
<span class="n">info</span><span class="o">:</span> <span class="n">using</span> <span class="n">existing</span> <span class="n">install</span> <span class="n">for</span> <span class="bp">'</span><span class="n">leanprover</span><span class="bp">/</span><span class="n">lean4</span><span class="o">:</span><span class="n">stable'</span>
<span class="n">info</span><span class="o">:</span> <span class="n">default</span> <span class="n">toolchain</span> <span class="n">set</span> <span class="n">to</span> <span class="bp">'</span><span class="n">leanprover</span><span class="bp">/</span><span class="n">lean4</span><span class="o">:</span><span class="n">stable'</span>

  <span class="n">leanprover</span><span class="bp">/</span><span class="n">lean4</span><span class="o">:</span><span class="n">stable</span> <span class="n">unchanged</span> <span class="bp">-</span> <span class="o">(</span><span class="n">lean</span> <span class="n">does</span> <span class="n">not</span> <span class="n">exist</span><span class="o">)</span>

<span class="n">djvelleman</span><span class="bp">@</span><span class="n">Dans</span><span class="bp">-</span><span class="n">MBP</span> <span class="n">Lean_4</span> <span class="bp">%</span> <span class="n">lake</span> <span class="n">help</span>
<span class="n">error</span><span class="o">:</span> <span class="n">toolchain</span> <span class="bp">'</span><span class="n">leanprover</span><span class="bp">/</span><span class="n">lean4</span><span class="o">:</span><span class="n">stable'</span> <span class="n">does</span> <span class="n">not</span> <span class="k">have</span> <span class="n">the</span> <span class="n">binary</span> <span class="bp">`/</span><span class="n">Users</span><span class="bp">/</span><span class="n">djvelleman</span><span class="bp">/.</span><span class="n">elan</span><span class="bp">/</span><span class="n">toolchains</span><span class="bp">/</span><span class="n">leanprover</span><span class="c1">--lean4---stable/bin/lake`</span>
</code></pre></div>
<p>The "lean does not exist" message doesn't sound encouraging.  And it looks like "lake" has not been installed.</p>



<a name="284635986"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Set%20up/near/284635986" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dan Velleman <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Set.20up.html#284635986">(Jun 01 2022 at 16:29)</a>:</h4>
<p>Perhaps I need to uninstall the leanprover/lean4:stable toolchain?  I think I saw a command somewhere for doing that but now I can't find it.</p>



<a name="284638976"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Set%20up/near/284638976" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Set.20up.html#284638976">(Jun 01 2022 at 16:52)</a>:</h4>
<p>It's <code>elan toolchain uninstall leanprover/lean4:stable</code></p>



<a name="284640723"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Set%20up/near/284640723" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Dan Velleman <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Set.20up.html#284640723">(Jun 01 2022 at 17:05)</a>:</h4>
<p>I think that did it.  After the uninstall, I did <code>elan show</code>, expecting just to see that the leanprover/lean4:stable toolchain had been removed, and instead I got messages saying that lean was being downloaded.  Now I seem to have lake.<br>
Thanks very much for all your help.</p>



<a name="284787694"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Set%20up/near/284787694" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Lovett <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Set.20up.html#284787694">(Jun 02 2022 at 18:48)</a>:</h4>
<p>See also the VS Code based <a href="https://leanprover.github.io/lean4/doc/quickstart.html">https://leanprover.github.io/lean4/doc/quickstart.html</a> which might be easier to recommend in the future.</p>



<a name="294372858"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Set%20up/near/294372858" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alexandre Rademaker <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Set.20up.html#294372858">(Aug 19 2022 at 22:43)</a>:</h4>
<p>I am getting </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">error</span><span class="o">:</span> <span class="n">toolchain</span> <span class="bp">'</span><span class="n">leanprover</span><span class="bp">/</span><span class="n">lean4</span><span class="o">:</span><span class="n">nightly'</span> <span class="n">does</span> <span class="n">not</span> <span class="k">have</span> <span class="n">the</span> <span class="n">binary</span> <span class="bp">`/</span><span class="n">Users</span><span class="bp">/</span><span class="n">ar</span><span class="bp">/.</span><span class="n">elan</span><span class="bp">/</span><span class="n">toolchains</span><span class="bp">/</span><span class="n">leanprover</span><span class="c1">--lean4---nightly/bin/lean`</span>
</code></pre></div>
<p>In the VS Code. I followed the steps of the Video, removed the elan first, reinstalled it with brew.</p>



<a name="294417063"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Set%20up/near/294417063" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Set.20up.html#294417063">(Aug 20 2022 at 09:54)</a>:</h4>
<p>If something went wrong during the toolchain download, you can try uninstalling it as above</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>