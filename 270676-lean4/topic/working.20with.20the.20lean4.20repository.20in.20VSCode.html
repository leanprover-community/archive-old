---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/working.20with.20the.20lean4.20repository.20in.20VSCode.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/working.20with.20the.20lean4.20repository.20in.20VSCode.html">working with the lean4 repository in VSCode</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="261098228"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/working%20with%20the%20lean4%20repository%20in%20VSCode/near/261098228" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/working.20with.20the.20lean4.20repository.20in.20VSCode.html#261098228">(Nov 11 2021 at 06:29)</a>:</h4>
<p>It seems that at the moment if you just open the <code>lean4</code> repository in VSCode (with the lean4 extension) and open one of the <code>.lean</code> files, it doesn't interactively compile. To get it to work I have to use <code>elan override set</code> (either to a local toolchain where I've compiled from source, or a nightly toolchain).</p>
<p>This is just because without an override, <code>elan</code> may be providing the stable version of lean3 as the default server!</p>
<p>Presumably this is only a temporary situation until there is a <code>lakefile.lean</code> for <code>lean4</code> itself?</p>
<p>Whether or not it is temporary, should we add a line in the manual about needing to use <code>elan override</code>? (If this is the correct thing to do, I can do it.)</p>



<a name="261103519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/working%20with%20the%20lean4%20repository%20in%20VSCode/near/261103519" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/working.20with.20the.20lean4.20repository.20in.20VSCode.html#261103519">(Nov 11 2021 at 08:00)</a>:</h4>
<p>This has always been the case, also in Lean 3.  I believe the elan setup is even explicitly documented here: <a href="https://leanprover.github.io/lean4/doc/dev/index.html?highlight=elan#dev-setup-using-elan">https://leanprover.github.io/lean4/doc/dev/index.html?highlight=elan#dev-setup-using-elan</a></p>



<a name="261103670"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/working%20with%20the%20lean4%20repository%20in%20VSCode/near/261103670" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/working.20with.20the.20lean4.20repository.20in.20VSCode.html#261103670">(Nov 11 2021 at 08:01)</a>:</h4>
<p>I don't think we can automate the <code>elan override set</code> part, because it's not always clear which build you want (i.e., <code>build/release/stage0</code> or <code>build/release/stage1</code>).  But setting LEAN_SRC_PATH automatically should be feasible though.</p>



<a name="261103888"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/working%20with%20the%20lean4%20repository%20in%20VSCode/near/261103888" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/working.20with.20the.20lean4.20repository.20in.20VSCode.html#261103888">(Nov 11 2021 at 08:04)</a>:</h4>
<p>What Gabriel said. <code>LEAN_SRC_PATH</code> is set automatically when using <code>nix-shell</code> <a href="https://github.com/leanprover/lean4/blob/3546104959f6048adfcbde5e72a1ca98abf03e6f/shell.nix#L20">https://github.com/leanprover/lean4/blob/3546104959f6048adfcbde5e72a1ca98abf03e6f/shell.nix#L20</a></p>



<a name="261109472"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/working%20with%20the%20lean4%20repository%20in%20VSCode/near/261109472" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/working.20with.20the.20lean4.20repository.20in.20VSCode.html#261109472">(Nov 11 2021 at 09:20)</a>:</h4>
<p>Sorry, you're absolutely right. Perhaps it would be helpful to rearrange a little so this advice comes before the actual build-from-source instructions, as it is potentially relevant if you don't want to touch any of the C code, but just edit one <code>.lean</code> file. But low priority.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>