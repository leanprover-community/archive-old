---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/general-purpose.20programming.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/general-purpose.20programming.html">general-purpose programming</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="262182583"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/general-purpose%20programming/near/262182583" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/general-purpose.20programming.html#262182583">(Nov 20 2021 at 12:59)</a>:</h4>
<p>I've seen/heard from multiple sources that there's a plan for Lean 4 to be a general-purpose programming language. Is there something like a plan of action or roadmap?</p>



<a name="262182766"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/general-purpose%20programming/near/262182766" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/general-purpose.20programming.html#262182766">(Nov 20 2021 at 13:03)</a>:</h4>
<p>I'm curious because there are strong languages out there like clojure/javascript/python/go</p>



<a name="262183211"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/general-purpose%20programming/near/262183211" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/general-purpose.20programming.html#262183211">(Nov 20 2021 at 13:14)</a>:</h4>
<p>Leo said in a past topic, I can't remember right now, that at the moment the top priority for the Lean 4 project is to get mathlib4 (the mathlib port from Lean 3 to Lean 4) fully up and running. After this is done they'll clean up the compiler etc. but he expects this to only fully finish somewhere towards the end of 2022.</p>
<p>That being said Lean4 can be used for regular real world programming right now, I've for example written a university assignment with <a href="https://github.com/xubaiw/lean4-socket">https://github.com/xubaiw/lean4-socket</a> by <span class="user-mention" data-user-id="414345">@Xubai Wang</span> who has also done some other general purpose lean things on his github (csv, termios). I have also written a tiny bit of Lean 4 that interacts with C code here <a href="https://github.com/hargoniX/lean4-statvfs">https://github.com/hargoniX/lean4-statvfs</a>, the Lean 4 compiler itself is largely written in Lean 4, the Lake build system (<a href="https://github.com/leanprover/lake">https://github.com/leanprover/lake</a>) is etc.  So it is definitely possible right now to link Lean 4 code against real world C APIs and start building whatever you want with it, it's just that no one has built all the things you would usually expect from general purpose programming languages regarding interaction with the rest of the world yet.</p>
<p>And performance wise there are actually reasons to use Lean 4 as a real world language over other functional ones, the modified reference counting (you can check up on that in the "counting immutable beans" and the "perceus" papers) allow Lean to outperform other well established functional languages such as OCaml or Haskell and for example the "sealing pointer-based optimizations behind pure functions" paper shows that dependent type theory actually allows us to build things in pure functional languages that weren't possible without it.</p>
<p>So TLDR, it's already very much possible from a language point of view, it is "just" that someone has to actually implement all the things other languages use when interacting with the real world to build real world stuff.</p>



<a name="262183815"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/general-purpose%20programming/near/262183815" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> František Silváši <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/general-purpose.20programming.html#262183815">(Nov 20 2021 at 13:28)</a>:</h4>
<p>I happen to be writing a <a href="https://en.wikipedia.org/wiki/WebSocket">WebSocket</a> server in Lean4 also using the aforementioned <code>lean4-socket</code> library. While it is not available just yet, the protocol necessitates existence of sha1 which <a href="https://github.com/Ferinko/LeanSha/">I already made public</a>. The ecosystem for "programming" is currently in its infancy but Lean4 is by a great margin a programming language I find most enjoyable using. Thanks <span class="user-mention" data-user-id="414345">@Xubai Wang</span> for the socket implementation!</p>



<a name="262183977"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/general-purpose%20programming/near/262183977" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/general-purpose.20programming.html#262183977">(Nov 20 2021 at 13:33)</a>:</h4>
<p>Cryptography code is also a topic I imagine could be very interesting in Lean? Maybe it could be possible to somehow proof that certain functions are constant time operations, providing additional guarantees...then again regular lean code will most likely not be able to outperform handwritten C stuff like openssl or libsodium so at some point someone will have to write an FFI interface to those.</p>



<a name="262184089"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/general-purpose%20programming/near/262184089" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/general-purpose.20programming.html#262184089">(Nov 20 2021 at 13:36)</a>:</h4>
<p>And communication with popular databases like MySQL and PostgreSQL.<br>
A Spark API would be big I think.</p>



<a name="262184714"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/general-purpose%20programming/near/262184714" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> František Silváši <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/general-purpose.20programming.html#262184714">(Nov 20 2021 at 13:51)</a>:</h4>
<p>I'd rather cryptographic code was safe than fast! :) It's not outside of the realm of possibility to have a formalized representation of (a subset of?) C which you use to state equivalence between a function in Lean and its <code>implementedBy</code> C counterpart. Then you use <a href="https://en.wikipedia.org/wiki/CompCert">CompCert</a> to have confidence in the compilation process of C and then you hope that hardware it's running on works as advertised. Of course, this is far from a trivial undertaking.</p>



<a name="262191410"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/general-purpose%20programming/near/262191410" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/general-purpose.20programming.html#262191410">(Nov 20 2021 at 16:23)</a>:</h4>
<p><span class="user-mention" data-user-id="306601">@Kyle Miller</span> wrote a raytracer in Lean, the guys at Galois wrote a program which kept a wheeled robot standing up, and someone wrote a Mandelbrot set program. Do these count? I've tweeted links to all these things in the past but I'm not 100% convinced that this is what the question is about and searching Twitter is hard :-/ (or I don't know the tricks...)</p>



<a name="262191664"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/general-purpose%20programming/near/262191664" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/general-purpose.20programming.html#262191664">(Nov 20 2021 at 16:28)</a>:</h4>
<p>Hm, I was talking more about common software engineering challenges in the industry, like backend/frontend development or data analysis</p>



<a name="262191762"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/general-purpose%20programming/near/262191762" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/general-purpose.20programming.html#262191762">(Nov 20 2021 at 16:31)</a>:</h4>
<p>Right now I'm going through the challenge of learning Lean 4 and trying to make a Lean package that can talk to MySQL. This is, however, a rather slow process. But I'm enjoying it</p>



<a name="262191882"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/general-purpose%20programming/near/262191882" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/general-purpose.20programming.html#262191882">(Nov 20 2021 at 16:33)</a>:</h4>
<p>Certainly a raytracer and a robotics application must be legit instances of "general-purpose programming".</p>



<a name="262192065"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/general-purpose%20programming/near/262192065" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/general-purpose.20programming.html#262192065">(Nov 20 2021 at 16:37)</a>:</h4>
<p>Definitely. I'm 100% convinced that it can be done. And there's so much stuff to be built.</p>



<a name="262192146"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/general-purpose%20programming/near/262192146" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Tomas Skrivan <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/general-purpose.20programming.html#262192146">(Nov 20 2021 at 16:38)</a>:</h4>
<p>I also want to use Lean 4 as a general purpose language. I'm attempting to write a library to allow you to do computations like in Mathematica/Julia/NumPy/SciPy. It is still in a very early stage but I already have a reasonable automatic/symbolic differentiation code. Hopefully, I will get it into a reasonable state in a month or two so I can share it with others.</p>



<a name="262192272"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/general-purpose%20programming/near/262192272" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/general-purpose.20programming.html#262192272">(Nov 20 2021 at 16:41)</a>:</h4>
<p>That'd be dope!</p>



<a name="262197352"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/general-purpose%20programming/near/262197352" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> James King <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/general-purpose.20programming.html#262197352">(Nov 20 2021 at 18:24)</a>:</h4>
<p>I'm working on examples for the Lean 4 hacker guide that implement common Unix-like tools -- suggestions welcome. :)</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>