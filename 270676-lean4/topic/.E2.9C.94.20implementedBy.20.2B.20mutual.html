---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/.E2.9C.94.20implementedBy.20.2B.20mutual.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20implementedBy.20.2B.20mutual.html">âœ” implementedBy + mutual</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="255612607"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20implementedBy%20%2B%20mutual/near/255612607" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Leonardo de Moura <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20implementedBy.20.2B.20mutual.html#255612607">(Sep 30 2021 at 17:20)</a>:</h4>
<p>Your example is misusing <code>implementedBy</code>. The <code>implementedBy</code> attribute is instructing Lean to apply a replacement when generating code. Recall that <code>constant odd : Int -&gt; Foo</code> is an opaque definition, and its implementation is just the default element for <code>Int -&gt; Foo</code>. The idea is to prevent users from creating constants for uninhabited types. <br>
Then, when code is generated for <code>even_impl</code> and <code>odd_impl</code>, there is no replacement registered for <code>even</code> and <code>odd</code>. Thus, the default value for <code>Int -&gt; Foo</code> is used.<br>
Then, later you tell Lean that it should replace <code>odd</code> and  <code>even</code> with <code>odd_impl</code> and <code>even_impl</code>, but the code for <code>odd</code> and <code>even</code> has already been generated. <br>
The idiom used also does not reflect how <code>partial</code> is compiled.</p>



<a name="255613045"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20implementedBy%20%2B%20mutual/near/255613045" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20implementedBy.20.2B.20mutual.html#255613045">(Sep 30 2021 at 17:23)</a>:</h4>
<p><span class="user-mention silent" data-user-id="130575">Siddharth Bhat</span> has marked this topic as resolved.</p>



<a name="255632154"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20implementedBy%20%2B%20mutual/near/255632154" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20implementedBy.20.2B.20mutual.html#255632154">(Sep 30 2021 at 19:20)</a>:</h4>
<p><span class="user-mention" data-user-id="112857">@Leonardo de Moura</span> sorry, that is my fault. That is how I understood mutual <code>partial def</code>s to work and thus misinformed <span class="user-mention" data-user-id="130575">@Siddharth Bhat</span>.</p>



<a name="255633022"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20implementedBy%20%2B%20mutual/near/255633022" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Leonardo de Moura <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20implementedBy.20.2B.20mutual.html#255633022">(Sep 30 2021 at 19:26)</a>:</h4>
<p><span class="user-mention" data-user-id="315577">@Mac</span> No problem. Thanks for helping with the questions.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>