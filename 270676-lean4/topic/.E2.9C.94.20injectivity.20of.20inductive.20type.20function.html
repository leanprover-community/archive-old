---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/.E2.9C.94.20injectivity.20of.20inductive.20type.20function.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20injectivity.20of.20inductive.20type.20function.html">✔ injectivity of inductive type function</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="316961852"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20injectivity%20of%20inductive%20type%20function/near/316961852" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20injectivity.20of.20inductive.20type.20function.html#316961852">(Dec 20 2022 at 14:22)</a>:</h4>
<p>Equality of types is a dangerous thing in dependent type theory. <del>The theorem might not even be true! In the "cardinality" model of type theory, every countably infinite type (e.g. <code>Vector 1</code>, <code>Vector 2</code>, <code>Vector 37</code> etc) is under the hood just defined to be (a type synonym for) <code>Nat</code> with the right structure on top, and in this model <code>Vector 1 = Vector 2</code> by abuse of definitional equality.</del>(the cardinality of <code>Vector n</code> is <code>k^n</code> where <code>k</code> is the cardinality of <code>Char</code> so this is fine)</p>



<a name="316961897"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20injectivity%20of%20inductive%20type%20function/near/316961897" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Adjedj <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20injectivity.20of.20inductive.20type.20function.html#316961897">(Dec 20 2022 at 14:22)</a>:</h4>
<p>Injectivity of type formers is generally false in lean, which means it probably won't be as easy to prove as <code>this_one_works</code>. In this case, your best bet would probably be to use some form of cardinality argument.</p>



<a name="316961980"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20injectivity%20of%20inductive%20type%20function/near/316961980" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20injectivity.20of.20inductive.20type.20function.html#316961980">(Dec 20 2022 at 14:23)</a>:</h4>
<p><del>The cardinality argument doesn't work because all <code>Vector n</code> have the same cardinality for n &gt; 0.</del></p>



<a name="316962031"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20injectivity%20of%20inductive%20type%20function/near/316962031" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20injectivity.20of.20inductive.20type.20function.html#316962031">(Dec 20 2022 at 14:23)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> I think <code>Char</code> is finite</p>



<a name="316962162"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20injectivity%20of%20inductive%20type%20function/near/316962162" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Adjedj <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20injectivity.20of.20inductive.20type.20function.html#316962162">(Dec 20 2022 at 14:24)</a>:</h4>
<p>It is finite</p>



<a name="316962211"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20injectivity%20of%20inductive%20type%20function/near/316962211" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20injectivity.20of.20inductive.20type.20function.html#316962211">(Dec 20 2022 at 14:24)</a>:</h4>
<p>Oh apologies! In which case Arthur is correct, and that will teach me to read the question properly. Probably Johan is also correct though in that the theorem is probably annoying to prove and also not useful.</p>



<a name="316962419"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20injectivity%20of%20inductive%20type%20function/near/316962419" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Adjedj <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20injectivity.20of.20inductive.20type.20function.html#316962419">(Dec 20 2022 at 14:25)</a>:</h4>
<p>That's alright, but I do agree that it's most probably unprovable for vectors containing terms of a non-finite type</p>



<a name="316962789"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20injectivity%20of%20inductive%20type%20function/near/316962789" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20injectivity.20of.20inductive.20type.20function.html#316962789">(Dec 20 2022 at 14:27)</a>:</h4>
<p>Right -- if <code>Char</code> were replaced with <code>Nat</code> then I think the theorem will be unprovable (that was my original incorrect reading of the question)</p>



<a name="316963442"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20injectivity%20of%20inductive%20type%20function/near/316963442" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Adjedj <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20injectivity.20of.20inductive.20type.20function.html#316963442">(Dec 20 2022 at 14:30)</a>:</h4>
<p>In this case here, <code>Char</code> is encoded with <code>UInt32</code>s, which are themselves encoded with a <code>Fin</code> type, which means some form of basic formalization of the cardinality of finite types would make the proof pretty straightforward. Perhaps cardinals may have already been ported to Mathlib4, in which case it would be best to make use of it for this proof IMO</p>



<a name="316964196"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20injectivity%20of%20inductive%20type%20function/near/316964196" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Hamelin <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20injectivity.20of.20inductive.20type.20function.html#316964196">(Dec 20 2022 at 14:34)</a>:</h4>
<p>Unfortunately my real Vector type is :</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">inductive</span> <span class="n">Vector</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">:</span> <span class="n">Nat</span> <span class="bp">→</span> <span class="kt">Type</span> <span class="n">u</span> <span class="n">where</span>
<span class="bp">|</span> <span class="n">vnil</span> <span class="o">:</span> <span class="n">Vector</span> <span class="n">α</span> <span class="mi">0</span>
<span class="bp">|</span> <span class="n">vcons</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">Nat</span><span class="o">}</span> <span class="bp">→</span> <span class="n">Vector</span> <span class="n">α</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">Vector</span> <span class="n">α</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span>
</code></pre></div>
<p>And <code>α</code> is definitely not finite. I'll try something else, thank you for your help!</p>



<a name="316967670"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20injectivity%20of%20inductive%20type%20function/near/316967670" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20injectivity.20of.20inductive.20type.20function.html#316967670">(Dec 20 2022 at 14:49)</a>:</h4>
<p>You could prove the theorem under the hypothesis <code>[finite α]</code></p>



<a name="316967686"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20injectivity%20of%20inductive%20type%20function/near/316967686" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20injectivity.20of.20inductive.20type.20function.html#316967686">(Dec 20 2022 at 14:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="566134">David Hamelin</span> has marked this topic as resolved.</p>



<a name="316968137"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20injectivity%20of%20inductive%20type%20function/near/316968137" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Hamelin <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20injectivity.20of.20inductive.20type.20function.html#316968137">(Dec 20 2022 at 14:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/270676-lean4/topic/.E2.9C.94.20injectivity.20of.20inductive.20type.20function/near/316967670">said</a>:</p>
<blockquote>
<p>You could prove the theorem under the hypothesis <code>[finite α]</code></p>
</blockquote>
<p>I will try this as a last resort, but I think what I'm trying to prove should be true even if <code>α</code> is not finite</p>



<a name="316970827"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20injectivity%20of%20inductive%20type%20function/near/316970827" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20injectivity.20of.20inductive.20type.20function.html#316970827">(Dec 20 2022 at 15:03)</a>:</h4>
<p>As I already tried to explain (and crossed out earlier), there is a model of type theory where your theorem is false (if alpha is infinite), and hence your theorem cannot be provable in Lean even if it happens to be true in Lean's model of type theory (because Lean proofs will apply in all models of Lean's type theory).</p>



<a name="316973672"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20injectivity%20of%20inductive%20type%20function/near/316973672" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Hamelin <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20injectivity.20of.20inductive.20type.20function.html#316973672">(Dec 20 2022 at 15:16)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/270676-lean4/topic/.E2.9C.94.20injectivity.20of.20inductive.20type.20function/near/316970827">said</a>:</p>
<blockquote>
<p>As I already tried to explain (and crossed out earlier), there is a model of type theory where your theorem is false (if alpha is infinite), and hence your theorem cannot be provable in Lean even if it happens to be true in Lean's model of Lean's type theory (because Lean proofs will apply to all models of Lean's type theory).</p>
</blockquote>
<p>Yes, I do understand that the theorem <code>no_idea</code> cannot be proved in general. </p>
<p>When I said "what I'm trying to prove" I referred to another bigger theorem that would have been solved by this lemma. Sorry for the confusion</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>