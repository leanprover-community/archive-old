---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/mathlib.3Aprelude.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.3Aprelude.html">mathlib:prelude</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="234610702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib%3Aprelude/near/234610702" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Selsam <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.3Aprelude.html#234610702">(Apr 15 2021 at 03:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/270676-lean4/topic/mathlib.3Adelab/near/234610603">said</a>:</p>
<blockquote>
<p>yes, it's only for tactic stuff and supporting lemmas, like lean 3 core (which is a bit bigger than lean 4 core is right now) + mathlib <code>tactic/</code></p>
</blockquote>
<p>How will this lean3 core compare to the mathport lean3 core? Is the goal to keep them def-eq and then auto-align?</p>



<a name="234610782"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib%3Aprelude/near/234610782" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.3Aprelude.html#234610782">(Apr 15 2021 at 03:22)</a>:</h4>
<p>there's no way the tactics will align with anything</p>



<a name="234610793"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib%3Aprelude/near/234610793" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Selsam <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.3Aprelude.html#234610793">(Apr 15 2021 at 03:22)</a>:</h4>
<p>I mean for the supporting lemmas.</p>



<a name="234610865"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib%3Aprelude/near/234610865" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.3Aprelude.html#234610865">(Apr 15 2021 at 03:23)</a>:</h4>
<p>From the point of view of mathlib, the prelude is just another dependency along with lean 4 core. So it can align to definitions the same way as core lean definitions like <code>Nat</code></p>



<a name="234611032"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib%3Aprelude/near/234611032" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Selsam <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.3Aprelude.html#234611032">(Apr 15 2021 at 03:25)</a>:</h4>
<p>I understand, I was just wondering if there was a risk of non-def-eq duplication and clashes. This would not be an issue as long as the prelude repo used <code>Mathlib.Prelude</code> namespace or something like that to distinguish.</p>



<a name="234611157"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib%3Aprelude/near/234611157" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.3Aprelude.html#234611157">(Apr 15 2021 at 03:27)</a>:</h4>
<p>It's not a ported library, so it doesn't need to dump everything in a namespace, right? I assume that eventually mathlib will just put things in the root, like currently</p>



<a name="234611281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib%3Aprelude/near/234611281" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Selsam <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.3Aprelude.html#234611281">(Apr 15 2021 at 03:29)</a>:</h4>
<p>I think mathlib should put everything in <code>Mathlib</code>.</p>



<a name="234611307"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib%3Aprelude/near/234611307" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.3Aprelude.html#234611307">(Apr 15 2021 at 03:29)</a>:</h4>
<p>I don't want to add an extra 8 characters on a substantial number of fully qualified names in usual mathlib proofs</p>



<a name="234611401"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib%3Aprelude/near/234611401" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.3Aprelude.html#234611401">(Apr 15 2021 at 03:30)</a>:</h4>
<p>I'm not sure what the point is</p>



<a name="234611413"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib%3Aprelude/near/234611413" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.3Aprelude.html#234611413">(Apr 15 2021 at 03:30)</a>:</h4>
<p>it's not like it's hard to avoid collision with mathlib</p>



<a name="234627659"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib%3Aprelude/near/234627659" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.3Aprelude.html#234627659">(Apr 15 2021 at 07:08)</a>:</h4>
<p>Isn't this pretty normal in stuff like python? The only difference would be that mathlib users would just write <code>open mathlib</code> at the start of their code and mathlib developers would write <code>namespace mathlib</code> at the start of theirs. Or am I being naive?</p>



<a name="234703069"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib%3Aprelude/near/234703069" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Selsam <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.3Aprelude.html#234703069">(Apr 15 2021 at 15:54)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> Yes it is normal for programming, and I use qualified imports all the time (e.g. <code>import tensorflow as tf</code> in python  and <code>import qualified Data.Set as Set</code> in haskell). C++ doesn't support qualified imports and so the convention is for every project to use its own namespace, which is what I was suggesting. But I agree with <span class="user-mention" data-user-id="110049">@Mario Carneiro</span> that the extra namespace is effectively zero-cost in C++ but does carry a cost in lean since some metaprogramming contexts require providing full names.</p>
<p>FYI all the <code>mathlib:*</code> threads from last night were from one sprawling conversation, and I was changing the topic names as the conversation progressed. This particular thread continued at <a href="#narrow/stream/270676-lean4/topic/mathlib.3Anamespace">https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib.3Anamespace</a></p>



<a name="234704430"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib%3Aprelude/near/234704430" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.3Aprelude.html#234704430">(Apr 15 2021 at 16:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="230999">Daniel Selsam</span> <a href="#narrow/stream/270676-lean4/topic/mathlib.3Aprelude/near/234703069">said</a>:</p>
<blockquote>
<p>but does carry a cost in lean since some metaprogramming contexts require providing full names.</p>
</blockquote>
<p>This is an interesting point actually. We have name resolution with <code> `` </code> and in quotations, what parts are we still missing?</p>



<a name="234704603"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib%3Aprelude/near/234704603" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Selsam <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.3Aprelude.html#234704603">(Apr 15 2021 at 16:03)</a>:</h4>
<p>I was basing that comment on <a href="#narrow/stream/270676-lean4/topic/mathlib.3Aprelude/near/234611307">https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib.3Aprelude/near/234611307</a> :)</p>



<a name="234704885"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib%3Aprelude/near/234704885" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.3Aprelude.html#234704885">(Apr 15 2021 at 16:05)</a>:</h4>
<p>(deleted)</p>



<a name="234705065"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib%3Aprelude/near/234705065" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.3Aprelude.html#234705065">(Apr 15 2021 at 16:06)</a>:</h4>
<p>There's another reason to use the global namespace though.  And that's dot-notation.  For that you need to put declarations in the same namespace as the original definition.</p>



<a name="234705297"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib%3Aprelude/near/234705297" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.3Aprelude.html#234705297">(Apr 15 2021 at 16:07)</a>:</h4>
<p>I believe Mario's comment was about disambiguating names like <code>_root_.foo</code> where you have a <code>def foo</code> in the current namespace.</p>



<a name="234706173"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib%3Aprelude/near/234706173" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Selsam <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.3Aprelude.html#234706173">(Apr 15 2021 at 16:12)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110043">Gabriel Ebner</span> <a href="#narrow/stream/270676-lean4/topic/mathlib.3Aprelude/near/234705065">said</a>:</p>
<blockquote>
<p>There's another reason to use the global namespace though.  And that's dot-notation.  For that you need to put declarations in the same namespace as the original definition.</p>
</blockquote>
<p>But that is just a few files that wouldn't need to be in the mathlib namespace.</p>



<a name="234706606"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib%3Aprelude/near/234706606" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.3Aprelude.html#234706606">(Apr 15 2021 at 16:14)</a>:</h4>
<p>There's already 31 files that contain <code>namespace list</code> and I didn't even count other types from core.  If half of mathlib is in the root namespace, then adding <code>Mathlib.</code> to the seems to be more of a hassle than it's worth.</p>



<a name="234710693"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib%3Aprelude/near/234710693" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Selsam <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.3Aprelude.html#234710693">(Apr 15 2021 at 16:38)</a>:</h4>
<p>What about </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">register_dot</span> <span class="bp">`</span><span class="n">Mathlib.list</span> <span class="bp">`</span><span class="n">list</span>
</code></pre></div>



<a name="234710838"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib%3Aprelude/near/234710838" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Selsam <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.3Aprelude.html#234710838">(Apr 15 2021 at 16:39)</a>:</h4>
<p>The main concern is people who depend on mathlib. Python would be a mess if you had to <code>from tensorflow import *; from numpy import *</code>.</p>



<a name="234746335"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib%3Aprelude/near/234746335" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.3Aprelude.html#234746335">(Apr 15 2021 at 20:23)</a>:</h4>
<p>For most projects that depend on mathlib, the scope will be more restricted and so it makes more sense to put everything in a namespace</p>



<a name="234746461"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib%3Aprelude/near/234746461" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.3Aprelude.html#234746461">(Apr 15 2021 at 20:24)</a>:</h4>
<p>but mathlib is a monorepo, it has a huge variety of things and aims to be both the standard library for lean 3 and the convergence of almost all public work on lean 3</p>



<a name="234747632"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib%3Aprelude/near/234747632" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.3Aprelude.html#234747632">(Apr 15 2021 at 20:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/270676-lean4/topic/mathlib.3Aprelude/near/234627659">said</a>:</p>
<blockquote>
<p>Isn't this pretty normal in stuff like python? The only difference would be that mathlib users would just write <code>open mathlib</code> at the start of their code and mathlib developers would write <code>namespace mathlib</code> at the start of theirs. Or am I being naive?</p>
</blockquote>
<p>Most of mathlib's category theory library is built on this premise. If you search for uses of <code>category_theory.</code> you will see that it leaks quite a bit</p>



<a name="234753154"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib%3Aprelude/near/234753154" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Selsam <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.3Aprelude.html#234753154">(Apr 15 2021 at 21:04)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/270676-lean4/topic/mathlib.3Aprelude/near/234747632">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/270676-lean4/topic/mathlib.3Aprelude/near/234627659">said</a>:</p>
<blockquote>
<p>Isn't this pretty normal in stuff like python? The only difference would be that mathlib users would just write <code>open mathlib</code> at the start of their code and mathlib developers would write <code>namespace mathlib</code> at the start of theirs. Or am I being naive?</p>
</blockquote>
<p>Most of mathlib's category theory library is built on this premise. If you search for uses of <code>category_theory.</code> you will see that it leaks quite a bit</p>
</blockquote>
<p>This suggests a spectrum/middle-ground, where mathlib doesn't use <code>Mathlib</code> namespace but perhaps as necessary other modules within mathlib could use namespaces (like <code>category_theory</code> does now).</p>



<a name="234771908"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib%3Aprelude/near/234771908" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.3Aprelude.html#234771908">(Apr 15 2021 at 23:39)</a>:</h4>
<p>sure, that's what we already do</p>



<a name="234774878"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/mathlib%3Aprelude/near/234774878" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/mathlib.3Aprelude.html#234774878">(Apr 16 2021 at 00:13)</a>:</h4>
<p>One reason the category theory development is mostly in the <code>category_theory</code> namespace is because there is this strange version of <code>functor</code> that someone left lying around in the root namespace. :-) It doesn't satisfy any laws, and for some reason only works in the category <code>Type</code>. Must be the influence of these Haskell people. :-)</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>