---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/Lean.204.20installation.20issues.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lean.204.20installation.20issues.html">Lean 4 installation issues</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="238062104"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Lean%204%20installation%20issues/near/238062104" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lean.204.20installation.20issues.html#238062104">(May 09 2021 at 21:11)</a>:</h4>
<p>what did you do?</p>



<a name="238062292"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Lean%204%20installation%20issues/near/238062292" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Isaia Nisoli <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lean.204.20installation.20issues.html#238062292">(May 09 2021 at 21:14)</a>:</h4>
<p>I followed the instructions on the Lean4 Manual: tried once with the Basic setup, did not work, ran "elan self uninstall" and ran the Quickstart setup from the same manual but I have the same problems, both with stable and nightly.<br>
When I call leanpkg from the command line I get an uncaught exception message and vscode gives an error message, he cannot start lean in server mode</p>



<a name="238062356"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Lean%204%20installation%20issues/near/238062356" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lean.204.20installation.20issues.html#238062356">(May 09 2021 at 21:15)</a>:</h4>
<p>Please post the error messages and the commands you ran</p>



<a name="238062433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Lean%204%20installation%20issues/near/238062433" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Isaia Nisoli <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lean.204.20installation.20issues.html#238062433">(May 09 2021 at 21:16)</a>:</h4>
<p>isaia@aiace-laptop:~/Isabelle/Isabelle2021$ leanpkg<br>
uncaught exception: Lean package manager, version 4.0.0</p>
<p>Usage: leanpkg &lt;command&gt;</p>
<p>init &lt;name&gt;      create a Lean package in the current directory<br>
configure        download and build dependencies<br>
build [&lt;args&gt;]   configure and build *.olean files</p>
<p>See <code>leanpkg help &lt;command&gt;</code> for more information on a specific command.</p>



<a name="238062459"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Lean%204%20installation%20issues/near/238062459" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Isaia Nisoli <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lean.204.20installation.20issues.html#238062459">(May 09 2021 at 21:17)</a>:</h4>
<p>In VSCode I get a Server has stopped with error code</p>



<a name="238062463"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Lean%204%20installation%20issues/near/238062463" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Isaia Nisoli <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lean.204.20installation.20issues.html#238062463">(May 09 2021 at 21:17)</a>:</h4>
<p>And leanpkg.path does not exist</p>



<a name="238062566"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Lean%204%20installation%20issues/near/238062566" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Isaia Nisoli <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lean.204.20installation.20issues.html#238062566">(May 09 2021 at 21:19)</a>:</h4>
<p>the OS is Ubuntu 20.10</p>



<a name="238062883"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Lean%204%20installation%20issues/near/238062883" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lean.204.20installation.20issues.html#238062883">(May 09 2021 at 21:24)</a>:</h4>
<p>As the error message says, <code>leanpkg</code> requires a subcommand like <code>leanpkg init MyProject</code> or <code>leanpkg build</code></p>



<a name="238062932"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Lean%204%20installation%20issues/near/238062932" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lean.204.20installation.20issues.html#238062932">(May 09 2021 at 21:25)</a>:</h4>
<p>I think lean 4 doesn't use <code>leanpkg.path</code> anymore, that's a lean 3 thing</p>



<a name="238063010"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Lean%204%20installation%20issues/near/238063010" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Isaia Nisoli <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lean.204.20installation.20issues.html#238063010">(May 09 2021 at 21:26)</a>:</h4>
<p>I will check now if there is amismatch in the VSCode extension</p>



<a name="238063051"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Lean%204%20installation%20issues/near/238063051" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Isaia Nisoli <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lean.204.20installation.20issues.html#238063051">(May 09 2021 at 21:27)</a>:</h4>
<p>ok, it seems like I installed the old lean extension instead of the lean4 extension</p>



<a name="238063128"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Lean%204%20installation%20issues/near/238063128" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lean.204.20installation.20issues.html#238063128">(May 09 2021 at 21:28)</a>:</h4>
<p>Are you using elan?</p>



<a name="238063139"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Lean%204%20installation%20issues/near/238063139" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lean.204.20installation.20issues.html#238063139">(May 09 2021 at 21:28)</a>:</h4>
<p><a href="https://github.com/leanprover/elan">https://github.com/leanprover/elan</a></p>



<a name="238063154"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Lean%204%20installation%20issues/near/238063154" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Isaia Nisoli <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lean.204.20installation.20issues.html#238063154">(May 09 2021 at 21:28)</a>:</h4>
<p>yes, I installed everything through elan</p>



<a name="238063205"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Lean%204%20installation%20issues/near/238063205" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Isaia Nisoli <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lean.204.20installation.20issues.html#238063205">(May 09 2021 at 21:29)</a>:</h4>
<p>I will try to restart vscode, it gave me an error, "The Lean 4 server crashed 5 times in the last 3 minutes. The server will not be restarted."</p>



<a name="238063280"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Lean%204%20installation%20issues/near/238063280" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lean.204.20installation.20issues.html#238063280">(May 09 2021 at 21:30)</a>:</h4>
<p>what does <code>lean --version</code> at the console give?</p>



<a name="238063312"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Lean%204%20installation%20issues/near/238063312" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lean.204.20installation.20issues.html#238063312">(May 09 2021 at 21:30)</a>:</h4>
<p>If it says lean 3, try <code>elan override set leanprover/lean4:nightly</code></p>



<a name="238063351"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Lean%204%20installation%20issues/near/238063351" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Isaia Nisoli <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lean.204.20installation.20issues.html#238063351">(May 09 2021 at 21:31)</a>:</h4>
<p>Lean (version 4.0.0-m2, commit 26dda3f63d88, Release)</p>



<a name="238063426"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Lean%204%20installation%20issues/near/238063426" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lean.204.20installation.20issues.html#238063426">(May 09 2021 at 21:32)</a>:</h4>
<p>you might still want to use nightly in case there is some bug that's been fixed</p>



<a name="238063522"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Lean%204%20installation%20issues/near/238063522" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Isaia Nisoli <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lean.204.20installation.20issues.html#238063522">(May 09 2021 at 21:34)</a>:</h4>
<p>VSCode is giving this output and then crashes<br>
Watchdog error: Got unknown document URI (file:///home/isaia/lean/my_playground/gatto.lean)<br>
[Info  - 6:32:39 PM] Connection to server got closed. Server will restart.<br>
[Error - 6:32:39 PM] Request textDocument/documentSymbol failed.<br>
Error: Connection got disposed.<br>
    at Object.dispose (/home/isaia/.vscode/extensions/leanprover.lean4-0.0.25/out/extension.js:2:145943)<br>
    at Object.dispose (/home/isaia/.vscode/extensions/leanprover.lean4-0.0.25/out/extension.js:2:226115)<br>
    at C.handleConnectionClosed (/home/isaia/.vscode/extensions/leanprover.lean4-0.0.25/out/extension.js:2:226328)<br>
    at C.handleConnectionClosed (/home/isaia/.vscode/extensions/leanprover.lean4-0.0.25/out/extension.js:2:286716)<br>
    at t (/home/isaia/.vscode/extensions/leanprover.lean4-0.0.25/out/extension.js:2:224417)<br>
    at invoke (/home/isaia/.vscode/extensions/leanprover.lean4-0.0.25/out/extension.js:2:147556)<br>
    at <a href="http://o.fire">o.fire</a> (/home/isaia/.vscode/extensions/leanprover.lean4-0.0.25/out/extension.js:2:148317)<br>
    at Y (/home/isaia/.vscode/extensions/leanprover.lean4-0.0.25/out/extension.js:2:135201)<br>
    at invoke (/home/isaia/.vscode/extensions/leanprover.lean4-0.0.25/out/extension.js:2:147556)<br>
    at <a href="http://o.fire">o.fire</a> (/home/isaia/.vscode/extensions/leanprover.lean4-0.0.25/out/extension.js:2:148317)<br>
    at g.fireClose (/home/isaia/.vscode/extensions/leanprover.lean4-0.0.25/out/extension.js:2:156198)<br>
    at Socket.&lt;anonymous&gt; (/home/isaia/.vscode/extensions/leanprover.lean4-0.0.25/out/extension.js:2:157783)<br>
    at Socket.emit (events.js:327:22)<br>
    at Pipe.&lt;anonymous&gt; (net.js:673:12)</p>



<a name="238063587"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Lean%204%20installation%20issues/near/238063587" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Isaia Nisoli <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lean.204.20installation.20issues.html#238063587">(May 09 2021 at 21:35)</a>:</h4>
<p>I will try the nightly</p>



<a name="238063593"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Lean%204%20installation%20issues/near/238063593" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris B <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lean.204.20installation.20issues.html#238063593">(May 09 2021 at 21:35)</a>:</h4>
<p>Yeah, you need to use nightly: <a href="#narrow/stream/270676-lean4/topic/vscode-lean4.20Doesn't.20Work.20When.20I.20Switch.20Files/near/232024638">https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/vscode-lean4.20Doesn't.20Work.20When.20I.20Switch.20Files/near/232024638</a></p>



<a name="238063604"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Lean%204%20installation%20issues/near/238063604" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris B <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lean.204.20installation.20issues.html#238063604">(May 09 2021 at 21:35)</a>:</h4>
<p>For now at least.</p>



<a name="238063722"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Lean%204%20installation%20issues/near/238063722" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Isaia Nisoli <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Lean.204.20installation.20issues.html#238063722">(May 09 2021 at 21:37)</a>:</h4>
<p>ah, perfect! Now it seems to work! Thank you so much!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>