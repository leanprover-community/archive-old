---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/.22binary.20package.20was.20not.20provided.20for.20'linux'.22.20on.20Ubuntu.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.22binary.20package.20was.20not.20provided.20for.20'linux'.22.20on.20Ubuntu.html">"binary package was not provided for 'linux'" on Ubuntu</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="300833670"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%22binary%20package%20was%20not%20provided%20for%20%27linux%27%22%20on%20Ubuntu/near/300833670" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabor Nyeki <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.22binary.20package.20was.20not.20provided.20for.20'linux'.22.20on.20Ubuntu.html#300833670">(Sep 26 2022 at 15:01)</a>:</h4>
<p>Hello everyone,</p>
<p>I am following <a href="https://leanprover.github.io/lean4/doc/setup.html">the Basic Setup instructions</a> of the Lean Manual. I am trying to use elan 1.3.1-3, installed on Ubuntu 22.04. Running <code>elan default leanprover/lean4:stable</code> gives me</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">info</span><span class="o">:</span> <span class="n">syncing</span> <span class="n">channel</span> <span class="n">updates</span> <span class="n">for</span> <span class="bp">'</span><span class="n">stable'</span>
<span class="n">info</span><span class="o">:</span> <span class="n">latest</span> <span class="n">update</span> <span class="n">on</span> <span class="n">stable</span><span class="o">,</span> <span class="n">lean</span> <span class="n">version</span> <span class="n">v4.0.0</span><span class="bp">-</span><span class="n">m5</span>
<span class="n">info</span><span class="o">:</span> <span class="n">downloading</span> <span class="n">component</span> <span class="bp">'</span><span class="n">lean'</span>
<span class="n">error</span><span class="o">:</span> <span class="n">binary</span> <span class="n">package</span> <span class="n">was</span> <span class="n">not</span> <span class="n">provided</span> <span class="n">for</span> <span class="bp">'</span><span class="n">linux'</span>
</code></pre></div>
<p>This is confusing to me because a 'linux' binary package for v4.0.0-m5 <a href="https://github.com/leanprover/lean4/releases/download/v4.0.0-m5/lean-4.0.0-linux.zip">seems to be available on GitHub</a>.</p>
<p>What is the recommended way to fix this error?</p>
<p>Thank you!</p>



<a name="300834782"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%22binary%20package%20was%20not%20provided%20for%20%27linux%27%22%20on%20Ubuntu/near/300834782" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mauricio Collares <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.22binary.20package.20was.20not.20provided.20for.20'linux'.22.20on.20Ubuntu.html#300834782">(Sep 26 2022 at 15:06)</a>:</h4>
<p>You need to update elan to version 1.4.2. Unfortunately this is not available in the Ubuntu repositories, so you probably want to<code>apt remove elan</code> and perform a user installation using the instructions in <a href="https://github.com/leanprover/elan">https://github.com/leanprover/elan</a></p>



<a name="300836032"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%22binary%20package%20was%20not%20provided%20for%20%27linux%27%22%20on%20Ubuntu/near/300836032" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mauricio Collares <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.22binary.20package.20was.20not.20provided.20for.20'linux'.22.20on.20Ubuntu.html#300836032">(Sep 26 2022 at 15:12)</a>:</h4>
<p>cc <span class="user-mention" data-user-id="373192">@Christopher Hoskin</span></p>



<a name="300841005"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%22binary%20package%20was%20not%20provided%20for%20%27linux%27%22%20on%20Ubuntu/near/300841005" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabor Nyeki <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.22binary.20package.20was.20not.20provided.20for.20'linux'.22.20on.20Ubuntu.html#300841005">(Sep 26 2022 at 15:34)</a>:</h4>
<p>Thank you, <span class="user-mention" data-user-id="325367">@Mauricio Collares</span>! It works with elan 1.4.2.</p>



<a name="300894031"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%22binary%20package%20was%20not%20provided%20for%20%27linux%27%22%20on%20Ubuntu/near/300894031" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Christopher Hoskin <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.22binary.20package.20was.20not.20provided.20for.20'linux'.22.20on.20Ubuntu.html#300894031">(Sep 26 2022 at 20:26)</a>:</h4>
<p>I've uploaded elan 1.4.2 to Debian unstable. It can be backported from there.</p>
<p><a href="https://tracker.debian.org/news/1365779/accepted-elan-142-1-source-into-unstable/">https://tracker.debian.org/news/1365779/accepted-elan-142-1-source-into-unstable/</a></p>



<a name="302945442"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%22binary%20package%20was%20not%20provided%20for%20%27linux%27%22%20on%20Ubuntu/near/302945442" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.22binary.20package.20was.20not.20provided.20for.20'linux'.22.20on.20Ubuntu.html#302945442">(Oct 07 2022 at 22:51)</a>:</h4>
<p><span class="user-mention" data-user-id="373192">@Christopher Hoskin</span> You also need to add a <code>lake</code> symlink.  See here for the full list: <a href="https://github.com/leanprover/elan/blob/b94a4b2d0c2e7cb4353270026a4a1d7859c327ed/src/elan-cli/self_update.rs#L174-L181">https://github.com/leanprover/elan/blob/b94a4b2d0c2e7cb4353270026a4a1d7859c327ed/src/elan-cli/self_update.rs#L174-L181</a></p>



<a name="302945817"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%22binary%20package%20was%20not%20provided%20for%20%27linux%27%22%20on%20Ubuntu/near/302945817" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.22binary.20package.20was.20not.20provided.20for.20'linux'.22.20on.20Ubuntu.html#302945817">(Oct 07 2022 at 22:55)</a>:</h4>
<p>I'm also still seeing the "binary package not provided" error with the current 1.4.2-1 package.</p>



<a name="303000517"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%22binary%20package%20was%20not%20provided%20for%20%27linux%27%22%20on%20Ubuntu/near/303000517" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Christopher Hoskin <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.22binary.20package.20was.20not.20provided.20for.20'linux'.22.20on.20Ubuntu.html#303000517">(Oct 08 2022 at 11:09)</a>:</h4>
<p><span class="user-mention" data-user-id="110043">@Gabriel Ebner</span> Thanks. I've tried symlinking <code>lake </code>to <code>elan</code> and I get:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">lake</span>
<span class="n">error</span><span class="o">:</span> <span class="n">toolchain</span> <span class="bp">'</span><span class="n">stable'</span> <span class="n">does</span> <span class="n">not</span> <span class="k">have</span> <span class="n">the</span> <span class="n">binary</span> <span class="bp">`/</span><span class="n">home</span><span class="bp">/</span><span class="n">mans0954</span><span class="bp">/.</span><span class="n">elan</span><span class="bp">/</span><span class="n">toolchains</span><span class="bp">/</span><span class="n">stable</span><span class="bp">/</span><span class="n">bin</span><span class="bp">/</span><span class="n">lake</span><span class="bp">`</span>
</code></pre></div>
<p>Is there something else I need to do?</p>



<a name="303030482"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%22binary%20package%20was%20not%20provided%20for%20%27linux%27%22%20on%20Ubuntu/near/303030482" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mauricio Collares <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.22binary.20package.20was.20not.20provided.20for.20'linux'.22.20on.20Ubuntu.html#303030482">(Oct 08 2022 at 15:02)</a>:</h4>
<p>That should only work if your current project (or default toolchain) uses Lean 4</p>



<a name="303030674"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%22binary%20package%20was%20not%20provided%20for%20%27linux%27%22%20on%20Ubuntu/near/303030674" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mauricio Collares <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.22binary.20package.20was.20not.20provided.20for.20'linux'.22.20on.20Ubuntu.html#303030674">(Oct 08 2022 at 15:04)</a>:</h4>
<p>The "binary package not provided" error should have been fixed, though</p>



<a name="303035468"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%22binary%20package%20was%20not%20provided%20for%20%27linux%27%22%20on%20Ubuntu/near/303035468" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mauricio Collares <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.22binary.20package.20was.20not.20provided.20for.20'linux'.22.20on.20Ubuntu.html#303035468">(Oct 08 2022 at 15:46)</a>:</h4>
<p>Is that because the Debian package <a href="https://salsa.debian.org/debian/elan/-/commit/44e8f35097e1e24d02a6c2bbabe5e0d06dcffd6c">does not support zstd-compressed tarballs</a>?</p>



<a name="303035686"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%22binary%20package%20was%20not%20provided%20for%20%27linux%27%22%20on%20Ubuntu/near/303035686" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.22binary.20package.20was.20not.20provided.20for.20'linux'.22.20on.20Ubuntu.html#303035686">(Oct 08 2022 at 15:49)</a>:</h4>
<p>Note that the last error message is <em>not</em> "binary package not provided". That should be fixed with the update to 1.4.2.</p>



<a name="303035751"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%22binary%20package%20was%20not%20provided%20for%20%27linux%27%22%20on%20Ubuntu/near/303035751" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mauricio Collares <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.22binary.20package.20was.20not.20provided.20for.20'linux'.22.20on.20Ubuntu.html#303035751">(Oct 08 2022 at 15:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110043">Gabriel Ebner</span> <a href="#narrow/stream/270676-lean4/topic/.22binary.20package.20was.20not.20provided.20for.20'linux'.22.20on.20Ubuntu/near/302945817">said</a>:</p>
<blockquote>
<p>I'm also still seeing the "binary package not provided" error with the current 1.4.2-1 package.</p>
</blockquote>
<p>AFAICT there are two separate issues with Debian 1.4.2, one reported by Gabriel and another one reported by Christopher (the latter is probably not an issue and just a Lean 3/Lean 4 difference, but you know more about this than I do).</p>



<a name="303035988"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%22binary%20package%20was%20not%20provided%20for%20%27linux%27%22%20on%20Ubuntu/near/303035988" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.22binary.20package.20was.20not.20provided.20for.20'linux'.22.20on.20Ubuntu.html#303035988">(Oct 08 2022 at 15:52)</a>:</h4>
<p>Thanks, I parsed that wrong... it might be because Lean 4 Linux releases use .zst+.zip, while Lean 3 uses .zst+.gz</p>



<a name="303036042"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%22binary%20package%20was%20not%20provided%20for%20%27linux%27%22%20on%20Ubuntu/near/303036042" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.22binary.20package.20was.20not.20provided.20for.20'linux'.22.20on.20Ubuntu.html#303036042">(Oct 08 2022 at 15:52)</a>:</h4>
<p>Ooh, patching out zstd support is a really bad idea.</p>



<a name="303036372"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%22binary%20package%20was%20not%20provided%20for%20%27linux%27%22%20on%20Ubuntu/near/303036372" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mauricio Collares <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.22binary.20package.20was.20not.20provided.20for.20'linux'.22.20on.20Ubuntu.html#303036372">(Oct 08 2022 at 15:55)</a>:</h4>
<p>I guess it was just a temporary solution to avoid elan from being deleted from unstable for failing to build? <a href="https://packages.debian.org/sid/librust-zstd-dev">https://packages.debian.org/sid/librust-zstd-dev</a> is still at version 0.5.1 while elan requires version 0.9.</p>



<a name="303036586"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%22binary%20package%20was%20not%20provided%20for%20%27linux%27%22%20on%20Ubuntu/near/303036586" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.22binary.20package.20was.20not.20provided.20for.20'linux'.22.20on.20Ubuntu.html#303036586">(Oct 08 2022 at 15:57)</a>:</h4>
<p>I just picked the latest version. <span aria-label="shrug" class="emoji emoji-1f937" role="img" title="shrug">:shrug:</span> It might even build with 0.5.1.</p>



<a name="304071414"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%22binary%20package%20was%20not%20provided%20for%20%27linux%27%22%20on%20Ubuntu/near/304071414" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Christopher Hoskin <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.22binary.20package.20was.20not.20provided.20for.20'linux'.22.20on.20Ubuntu.html#304071414">(Oct 14 2022 at 16:27)</a>:</h4>
<p>Unfortunately no version of <code>rust-zstd</code> is available in Debian in a usable state at the moment, which is why I patched it out. The 0.5.1 binary which was uploaded to unstable was built using a <code>rust-zstd-safe</code> package which isn't in Debian. I don't know much about rust or rust packaging, so I haven't looked into packaging this, but I suspect that it is not straight-forward or someone would already have uploaded it.</p>



<a name="304076399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%22binary%20package%20was%20not%20provided%20for%20%27linux%27%22%20on%20Ubuntu/near/304076399" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.22binary.20package.20was.20not.20provided.20for.20'linux'.22.20on.20Ubuntu.html#304076399">(Oct 14 2022 at 16:52)</a>:</h4>
<p>Maybe my point wasn't entirely clear: patching out zstd makes elan non-functional.  It can't download current Lean releases in that state.</p>
<p>Sadly, I think it would be better to remove this elan package, than to have a broken one distributed by Debian.</p>



<a name="304079450"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%22binary%20package%20was%20not%20provided%20for%20%27linux%27%22%20on%20Ubuntu/near/304079450" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.22binary.20package.20was.20not.20provided.20for.20'linux'.22.20on.20Ubuntu.html#304079450">(Oct 14 2022 at 17:09)</a>:</h4>
<p>This is some great drama: <a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=969609">https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=969609</a></p>
<blockquote>
<p>You filing these bug reports accomplishes nothing, except delay &amp; annoy other Rust packagers who forget to close these pointless bugs</p>
</blockquote>



<a name="305272818"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%22binary%20package%20was%20not%20provided%20for%20%27linux%27%22%20on%20Ubuntu/near/305272818" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mauricio Collares <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.22binary.20package.20was.20not.20provided.20for.20'linux'.22.20on.20Ubuntu.html#305272818">(Oct 21 2022 at 02:39)</a>:</h4>
<p>The last message in the above report is interesting. Apparently <a href="https://alioth-lists.debian.net/pipermail/pkg-rust-maintainers/2020-May/012388.html">the <code>rust-zstd-safe</code> upload made in May 2020 was rejected only because "The text of the BSD-3-clause license needs copying into d/copyright"</a>.</p>



<a name="312076524"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%22binary%20package%20was%20not%20provided%20for%20%27linux%27%22%20on%20Ubuntu/near/312076524" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Christopher Hoskin <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.22binary.20package.20was.20not.20provided.20for.20'linux'.22.20on.20Ubuntu.html#312076524">(Nov 24 2022 at 19:50)</a>:</h4>
<p><code>librust-zstd-safe-dev</code> now appears to be in Debian Testing, as of a few days ago. According to the <a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=969609#41">latest message</a> on the bug report, <code>rust-zstd</code> should follow. Hopefully I should then be able to rebuild the <code>elan</code> package and fix this.</p>



<a name="313434078"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%22binary%20package%20was%20not%20provided%20for%20%27linux%27%22%20on%20Ubuntu/near/313434078" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Christopher Hoskin <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.22binary.20package.20was.20not.20provided.20for.20'linux'.22.20on.20Ubuntu.html#313434078">(Dec 02 2022 at 06:27)</a>:</h4>
<p><code>librust-zstd-dev</code> is now in Debian unstable, so I have uploaded a new version <code>1.4.2-2</code> of the <code>elan</code> package to unstable which uses <code>librust-zstd-dev</code>. I also added the missing <code>lake</code> symlink. It should get pulled into the next Ubuntu (Lunar) in due course.</p>
<p>I don't think there's an easy way for me to fix the Ubuntu 22.04 <code>elan</code> package, so I've also added the updated version to my PPA for installing <code>elan</code> on Jammy:</p>
<p><a href="https://launchpad.net/~christopher-hoskin/+archive/ubuntu/lean">https://launchpad.net/~christopher-hoskin/+archive/ubuntu/lean</a></p>
<p>Christopher</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>