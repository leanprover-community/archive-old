---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/Cross-version.20olean.20imports.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Cross-version.20olean.20imports.html">Cross-version olean imports</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="247511702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Cross-version%20olean%20imports/near/247511702" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Cross-version.20olean.20imports.html#247511702">(Jul 28 2021 at 20:17)</a>:</h4>
<p><span class="user-mention" data-user-id="414345">@Xubai Wang</span> discovered that Lake (revision <a href="https://github.com/tydeu/lean4-lake/commit/71defa066dd845a31d19547f1a3e01f79c5fc8d9"><code>71defa0</code></a>) built with <code>leanprover/lean4:nightly-2021-07-09</code> segfaults when the <code>elan</code> Lean version in the current working directory is set to <code>leanprover/lean4:nightly-2021-07-23</code>. He reported this issue to me on the Lake GitHub (see <a href="https://github.com/tydeu/lean4-lake/issues/3">#3</a>). I reproduced this (it hangs for me) and discovered it also occurs with later versions (such as the <code>07-28</code> nightly).</p>
<p>I suspect this is because the Lean version Lake is built with is different from the  Lean version of the <code>.oleans</code> Lake finds in its search path while interpreting the config file. If I am correct about this, would it be feasible for Lean to save some kind of version information in an <code>.olean</code> about the Lean version it was built with and verify that it matches the running Lean version when imported?  Though, honestly, anything would be better than the current behavior of a hang/segfault. <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>