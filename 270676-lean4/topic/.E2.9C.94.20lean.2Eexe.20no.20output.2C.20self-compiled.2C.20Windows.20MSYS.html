---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/.E2.9C.94.20lean.2Eexe.20no.20output.2C.20self-compiled.2C.20Windows.20MSYS.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20lean.2Eexe.20no.20output.2C.20self-compiled.2C.20Windows.20MSYS.html">âœ” lean.exe no output, self-compiled, Windows MSYS</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="284011635"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20lean.exe%20no%20output%2C%20self-compiled%2C%20Windows%20MSYS/near/284011635" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Max Nowak <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20lean.2Eexe.20no.20output.2C.20self-compiled.2C.20Windows.20MSYS.html#284011635">(May 26 2022 at 14:18)</a>:</h4>
<p>Decided to play around with the lean4 compiler a little, and followed the Windows MSYS instructions. I ran <code>make</code> and compilation succeeded.<br>
Running <code>build/releases/bin/lean.exe</code> in the mingw64 shell seems to work just fine.</p>
<p>But from a non-mingw64 shell like powershell, running my freshly compiled <code>lean.exe</code> simply produces no output whatsoever, just gives me an exit code -1073741515. Same story for stage0 and stage2 lean.exe, and probably also for all other executables. This means that the development setup via <code>elan link mystuff build/releases/stage1</code> recommended in <a href="https://leanprover.github.io/lean4/doc/dev/index.html">https://leanprover.github.io/lean4/doc/dev/index.html</a> doesn't work either.</p>



<a name="284012227"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20lean.exe%20no%20output%2C%20self-compiled%2C%20Windows%20MSYS/near/284012227" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Leonardo de Moura <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20lean.2Eexe.20no.20output.2C.20self-compiled.2C.20Windows.20MSYS.html#284012227">(May 26 2022 at 14:23)</a>:</h4>
<p>Have you tried the quickstart instructions? <a href="https://leanprover.github.io/lean4/doc/quickstart.html">https://leanprover.github.io/lean4/doc/quickstart.html</a><br>
They rely on pre-compiled binaries.</p>



<a name="284013535"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20lean.exe%20no%20output%2C%20self-compiled%2C%20Windows%20MSYS/near/284013535" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Max Nowak <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20lean.2Eexe.20no.20output.2C.20self-compiled.2C.20Windows.20MSYS.html#284013535">(May 26 2022 at 14:34)</a>:</h4>
<p>It has been a really long time since I've done the quickstart, but I think I have done it at least once.<br>
I have no issue with using lean with elan. Everything works just fine. But I wanted to hack the compiler a little, that is why I decided to compile lean on my own.</p>



<a name="284013773"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20lean.exe%20no%20output%2C%20self-compiled%2C%20Windows%20MSYS/near/284013773" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Max Nowak <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20lean.2Eexe.20no.20output.2C.20self-compiled.2C.20Windows.20MSYS.html#284013773">(May 26 2022 at 14:36)</a>:</h4>
<p>What do you mean with "They rely on pre-compiled binaries"?</p>



<a name="284013843"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20lean.exe%20no%20output%2C%20self-compiled%2C%20Windows%20MSYS/near/284013843" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Leonardo de Moura <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20lean.2Eexe.20no.20output.2C.20self-compiled.2C.20Windows.20MSYS.html#284013843">(May 26 2022 at 14:37)</a>:</h4>
<p>Cool.<br>
<span class="user-mention" data-user-id="315577">@Mac</span> Are you still using Windows for development? Have you hit a similar problem?</p>



<a name="284013957"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20lean.exe%20no%20output%2C%20self-compiled%2C%20Windows%20MSYS/near/284013957" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Max Nowak <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20lean.2Eexe.20no.20output.2C.20self-compiled.2C.20Windows.20MSYS.html#284013957">(May 26 2022 at 14:38)</a>:</h4>
<p>Sigh, I really need to move away from Windows some day haha.</p>



<a name="284015474"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20lean.exe%20no%20output%2C%20self-compiled%2C%20Windows%20MSYS/near/284015474" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mauricio Collares <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20lean.2Eexe.20no.20output.2C.20self-compiled.2C.20Windows.20MSYS.html#284015474">(May 26 2022 at 14:50)</a>:</h4>
<p>Someone had a similar problem with Python and Git Bash a while ago. Does prefixing your command with <code>winpty</code> (e.g., <code>winpty lean</code>) help?</p>



<a name="284015635"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20lean.exe%20no%20output%2C%20self-compiled%2C%20Windows%20MSYS/near/284015635" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mauricio Collares <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20lean.2Eexe.20no.20output.2C.20self-compiled.2C.20Windows.20MSYS.html#284015635">(May 26 2022 at 14:52)</a>:</h4>
<p>(<a href="https://github.com/rprichard/winpty">https://github.com/rprichard/winpty</a> if you don't have it installed)</p>



<a name="284016088"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20lean.exe%20no%20output%2C%20self-compiled%2C%20Windows%20MSYS/near/284016088" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Max Nowak <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20lean.2Eexe.20no.20output.2C.20self-compiled.2C.20Windows.20MSYS.html#284016088">(May 26 2022 at 14:55)</a>:</h4>
<p>I... think I will just dedust my dualbooted ubuntu at this point. I appreciate the suggestion, but even if winpty would work, then I would have to figure out how to tell elan / VSCode to use that. So I'll just switch to linux.<br>
But thank you!</p>



<a name="284016434"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20lean.exe%20no%20output%2C%20self-compiled%2C%20Windows%20MSYS/near/284016434" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20lean.2Eexe.20no.20output.2C.20self-compiled.2C.20Windows.20MSYS.html#284016434">(May 26 2022 at 14:58)</a>:</h4>
<p>I think a few people also build Lean in WSL, which VS Code can connect to</p>



<a name="284016696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20lean.exe%20no%20output%2C%20self-compiled%2C%20Windows%20MSYS/near/284016696" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20lean.2Eexe.20no.20output.2C.20self-compiled.2C.20Windows.20MSYS.html#284016696">(May 26 2022 at 15:00)</a>:</h4>
<p>One notable difference to the release binaries is that they are builtin a clang64 shell, not mingw64. But that's just a guess given the not very helpful error message... :)</p>



<a name="284017276"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20lean.exe%20no%20output%2C%20self-compiled%2C%20Windows%20MSYS/near/284017276" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Max Nowak <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20lean.2Eexe.20no.20output.2C.20self-compiled.2C.20Windows.20MSYS.html#284017276">(May 26 2022 at 15:04)</a>:</h4>
<p>Ah yeah, haven't even considered the WSL option <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="284017328"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20lean.exe%20no%20output%2C%20self-compiled%2C%20Windows%20MSYS/near/284017328" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20lean.2Eexe.20no.20output.2C.20self-compiled.2C.20Windows.20MSYS.html#284017328">(May 26 2022 at 15:05)</a>:</h4>
<p><span class="user-mention silent" data-user-id="416280">Max Nowak</span> has marked this topic as resolved.</p>



<a name="284044360"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20lean.exe%20no%20output%2C%20self-compiled%2C%20Windows%20MSYS/near/284044360" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20lean.2Eexe.20no.20output.2C.20self-compiled.2C.20Windows.20MSYS.html#284044360">(May 26 2022 at 18:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112857">Leonardo de Moura</span> <a href="#narrow/stream/270676-lean4/topic/.E2.9C.94.20lean.2Eexe.20no.20output.2C.20self-compiled.2C.20Windows.20MSYS/near/284013843">said</a>:</p>
<blockquote>
<p>Cool.<br>
<span class="user-mention silent" data-user-id="315577">Mac</span> Are you still using Windows for development? Have you hit a similar problem?</p>
</blockquote>
<p>Yes I am. However, I have not compiled Lean from the source recently. Furthermore, when I did previously, I tend to use it from the MSYS2 shell. So it is quite possible I have managed to dodge this error through pure luck...</p>
<p>I went and tested my old build of Lean from the source (commit <code>5e462f704ab8</code>) and hit the same <code>-1073741515</code> error. However, I also got a nice little GUI telling me the problem is that it cannot find <code>libgmp-10.dll</code>. Are we still using GMP? If not, it appears that the lean executable is still trying to link to it on Windows. If we are still using it, I guess such an error is expected?</p>



<a name="284062045"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20lean.exe%20no%20output%2C%20self-compiled%2C%20Windows%20MSYS/near/284062045" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Leonardo de Moura <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20lean.2Eexe.20no.20output.2C.20self-compiled.2C.20Windows.20MSYS.html#284062045">(May 26 2022 at 21:12)</a>:</h4>
<blockquote>
<p>Are we still using GMP?</p>
</blockquote>
<p>Yes. We can compile without GMP, but our own big-number implementation has not been extensively tested yet. <br>
You can use <code>-D USE_GMP=OFF</code> with <code>cmake</code> to build Lean without GMP.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>