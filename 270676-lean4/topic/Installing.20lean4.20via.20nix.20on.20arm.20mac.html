---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/Installing.20lean4.20via.20nix.20on.20arm.20mac.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Installing.20lean4.20via.20nix.20on.20arm.20mac.html">Installing lean4 via nix on arm mac</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="299548733"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Installing%20lean4%20via%20nix%20on%20arm%20mac/near/299548733" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andre Knispel <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Installing.20lean4.20via.20nix.20on.20arm.20mac.html#299548733">(Sep 19 2022 at 11:49)</a>:</h4>
<p>I've been following the steps of the nix setup guide, but I keep getting the following error message once I try to run any nix command in the setup package:<br>
<code>error: getting status of '/nix/store/0ccnxa25whszw7mgbgyzdm4nqc0zwnm8-source/lean': No such file or directory</code></p>
<p>I'm relatively proficient with nix itself, but I don't know all that much about flakes, only that I've been having issues with other flakes that used <code>eachDefaultSystem</code> before, since it doesn't include <code>aarch64-darwin</code>. I've tried many different things, including trying to inspect the derivation with <code>nix show-derivation</code> and setting my system to <code>x86_64-darwin</code> in some ways locally for the lean shell, but I always just get this error message, without any extra information of where it's coming from.</p>
<p>Any ideas on what I could be doing to fix this, that don't involve setting my system to <code>x86_64</code> globally?</p>



<a name="299549406"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Installing%20lean4%20via%20nix%20on%20arm%20mac/near/299549406" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Installing.20lean4.20via.20nix.20on.20arm.20mac.html#299549406">(Sep 19 2022 at 11:54)</a>:</h4>
<p>Mmh, I haven't seen this error before. But you should usually get more context using <code>--show-trace</code></p>



<a name="299550847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Installing%20lean4%20via%20nix%20on%20arm%20mac/near/299550847" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andre Knispel <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Installing.20lean4.20via.20nix.20on.20arm.20mac.html#299550847">(Sep 19 2022 at 12:03)</a>:</h4>
<p>Good point, usually nix reminds me of that but it didn't this time. But it actually also doesn't print anything else</p>



<a name="299551079"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Installing%20lean4%20via%20nix%20on%20arm%20mac/near/299551079" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andre Knispel <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Installing.20lean4.20via.20nix.20on.20arm.20mac.html#299551079">(Sep 19 2022 at 12:05)</a>:</h4>
<p>I get the feeling that this is a very early failure, since I poked it in many ways and I couldn't get any other information out of it</p>



<a name="299552046"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Installing%20lean4%20via%20nix%20on%20arm%20mac/near/299552046" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andre Knispel <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Installing.20lean4.20via.20nix.20on.20arm.20mac.html#299552046">(Sep 19 2022 at 12:11)</a>:</h4>
<p>In fact, even derivations that don't exist just give that error message. For example if I run <code>nix build .#abc</code></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>