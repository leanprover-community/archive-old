---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/.E2.9C.94.20Elaboration.20performance.20large.20inductive.20types.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20Elaboration.20performance.20large.20inductive.20types.html">âœ” Elaboration performance large inductive types</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="252170899"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20Elaboration%20performance%20large%20inductive%20types/near/252170899" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20Elaboration.20performance.20large.20inductive.20types.html#252170899">(Sep 06 2021 at 12:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="130511">Christian Pehle</span> has marked this topic as resolved.</p>



<a name="252212928"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20Elaboration%20performance%20large%20inductive%20types/near/252212928" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Leonardo de Moura <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20Elaboration.20performance.20large.20inductive.20types.html#252212928">(Sep 06 2021 at 19:08)</a>:</h4>
<p><span class="user-mention" data-user-id="130511">@Christian Pehle</span>  I optimized the <code>inductive</code> command for the enumeration type case.  The problem was that the <code>noConfusion</code> auxiliary construction is quadratic on the number of constructors. I added a custom version for enumeration types that is linear.<br>
Now, <code>inductive CXCursorKind where ...</code> is very efficient.<br>
I removed the <code>enum</code> command macro from the main repo since it is not needed anymore.</p>



<a name="252527770"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20Elaboration%20performance%20large%20inductive%20types/near/252527770" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Christian Pehle <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20Elaboration.20performance.20large.20inductive.20types.html#252527770">(Sep 08 2021 at 20:30)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="112857">@Leonardo de Moura</span>, this works nicely now. I took the liberty to implement a special case for <code>deriving BEq</code> as well. Of course it is easy to define it by hand, but I thought it might be convenient still.</p>



<a name="252528581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/%E2%9C%94%20Elaboration%20performance%20large%20inductive%20types/near/252528581" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Leonardo de Moura <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/.E2.9C.94.20Elaboration.20performance.20large.20inductive.20types.html#252528581">(Sep 08 2021 at 20:36)</a>:</h4>
<p>This is useful. We should also have special support for <code>DecidableEq</code>.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>