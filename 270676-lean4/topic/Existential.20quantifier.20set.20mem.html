---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/Existential.20quantifier.20set.20mem.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Existential.20quantifier.20set.20mem.html">Existential quantifier set mem</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="239271267"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Existential%20quantifier%20set%20mem/near/239271267" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Brandon Brown <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Existential.20quantifier.20set.20mem.html#239271267">(May 18 2021 at 15:15)</a>:</h4>
<p>In Lean3 there is the shorthand <code>∃ x ∈ s, p</code> for some set S and Prop P, which gets translated to <del><code>∃ x, x ∈ s ∧ p</code></del> under-the-hood. Has anyone implemented this in Lean4 yet?</p>



<a name="239272506"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Existential%20quantifier%20set%20mem/near/239272506" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Existential.20quantifier.20set.20mem.html#239272506">(May 18 2021 at 15:22)</a>:</h4>
<p>Note this is not what it gets translated to in Lean 3.</p>



<a name="239272660"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Existential%20quantifier%20set%20mem/near/239272660" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Existential.20quantifier.20set.20mem.html#239272660">(May 18 2021 at 15:23)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">}</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">:</span> <span class="o">(</span><span class="bp">∃</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">s</span><span class="o">,</span> <span class="n">p</span><span class="o">)</span> <span class="bp">↔</span> <span class="bp">∃</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">s</span> <span class="bp">∧</span> <span class="n">p</span> <span class="o">:=</span>
<span class="n">iff.rfl</span> <span class="c1">-- fails</span>

<span class="kd">example</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">}</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">:</span> <span class="o">(</span><span class="bp">∃</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">s</span><span class="o">,</span> <span class="n">p</span><span class="o">)</span> <span class="bp">↔</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">s</span><span class="o">),</span> <span class="n">p</span> <span class="o">:=</span>
<span class="n">iff.rfl</span> <span class="c1">-- works</span>
</code></pre></div>



<a name="239272866"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Existential%20quantifier%20set%20mem/near/239272866" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Brandon Brown <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Existential.20quantifier.20set.20mem.html#239272866">(May 18 2021 at 15:24)</a>:</h4>
<p>Ah thanks</p>



<a name="239272951"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Existential%20quantifier%20set%20mem/near/239272951" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Existential.20quantifier.20set.20mem.html#239272951">(May 18 2021 at 15:25)</a>:</h4>
<p>I'm sorry this isn't answering your question at all, but I thought it was good to know.</p>



<a name="239273011"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Existential%20quantifier%20set%20mem/near/239273011" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Brandon Brown <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Existential.20quantifier.20set.20mem.html#239273011">(May 18 2021 at 15:25)</a>:</h4>
<p>Definitely good to know!</p>



<a name="239282073"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Existential%20quantifier%20set%20mem/near/239282073" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Existential.20quantifier.20set.20mem.html#239282073">(May 18 2021 at 16:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="243102">Brandon Brown</span> <a href="#narrow/stream/270676-lean4/topic/Existential.20quantifier.20set.20mem/near/239271267">said</a>:</p>
<blockquote>
<p>Has anyone implemented this in Lean4 yet?</p>
</blockquote>
<p>Kevin implemented something similar to this in his <code>Data.Set.Basic</code></p>



<a name="239285657"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Existential%20quantifier%20set%20mem/near/239285657" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Existential.20quantifier.20set.20mem.html#239285657">(May 18 2021 at 16:39)</a>:</h4>
<p>I stole all of this stuff from other people. Maybe it was <span class="user-mention" data-user-id="243312">@Jason KY.</span> who actually wrote this?</p>



<a name="239285943"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Existential%20quantifier%20set%20mem/near/239285943" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Existential.20quantifier.20set.20mem.html#239285943">(May 18 2021 at 16:41)</a>:</h4>
<p><a href="https://github.com/kbuzzard/lean4-filters/blob/master/Lean4_filters/Set/Basic.lean">Here's a link</a>. Note that <code>hasLessEq</code> changed to <code>LE</code> recently. I will probably port this code to the official mathlib4 repo on Thursday.</p>



<a name="239286418"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Existential%20quantifier%20set%20mem/near/239286418" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason KY. <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Existential.20quantifier.20set.20mem.html#239286418">(May 18 2021 at 16:44)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">|</span> <span class="bp">`</span><span class="o">(</span><span class="bp">∃</span> <span class="bp">$</span><span class="n">x</span><span class="o">:</span><span class="n">ident</span> <span class="bp">∈</span> <span class="bp">$</span><span class="n">s</span><span class="o">,</span> <span class="bp">$</span><span class="n">p</span><span class="o">)</span> <span class="bp">=&gt;</span> <span class="bp">`</span><span class="o">(</span><span class="bp">∃</span> <span class="bp">$</span><span class="n">x</span><span class="o">:</span><span class="n">ident</span><span class="o">,</span> <span class="bp">$</span><span class="n">x</span> <span class="bp">∈</span> <span class="bp">$</span><span class="n">s</span> <span class="bp">∧</span> <span class="bp">$</span><span class="n">p</span><span class="o">)</span><span class="bp">`</span>
</code></pre></div>
<p>It seems that I wrote shorthand Brandon is thinking about instead of the lean3 version</p>



<a name="239286550"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Existential%20quantifier%20set%20mem/near/239286550" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Existential.20quantifier.20set.20mem.html#239286550">(May 18 2021 at 16:45)</a>:</h4>
<p>Thanks for pointing this out! I will almost certainly change it to the Lean 3 version on Thursday (if I can figure out how to) (hopefully you'll be at Xena Jason  :D)</p>



<a name="239294961"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Existential%20quantifier%20set%20mem/near/239294961" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Existential.20quantifier.20set.20mem.html#239294961">(May 18 2021 at 17:38)</a>:</h4>
<p>The exists-and version is better than exists-exists, but this was a limitation of the way the lean 3 desugaring works</p>



<a name="239295014"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Existential%20quantifier%20set%20mem/near/239295014" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Existential.20quantifier.20set.20mem.html#239295014">(May 18 2021 at 17:39)</a>:</h4>
<p>the limitation of the lean 4 desugaring is that it has to be defined individually for all binops and binders</p>



<a name="239295974"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Existential%20quantifier%20set%20mem/near/239295974" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Existential.20quantifier.20set.20mem.html#239295974">(May 18 2021 at 17:45)</a>:</h4>
<p>By the way this macro in <code>Data.Set.Basic</code> is wrong:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">|</span> <span class="bp">`</span><span class="o">({</span> <span class="bp">$</span><span class="n">x</span><span class="o">:</span><span class="n">ident</span> <span class="bp">∈</span> <span class="bp">$</span><span class="n">s</span> <span class="bp">|</span> <span class="bp">$</span><span class="n">p</span> <span class="o">})</span> <span class="bp">=&gt;</span> <span class="bp">`</span><span class="o">(</span><span class="n">setOf</span> <span class="o">(</span><span class="bp">λ</span> <span class="bp">$</span><span class="n">x</span> <span class="bp">=&gt;</span> <span class="bp">$</span><span class="n">x</span> <span class="bp">∈</span> <span class="bp">$</span><span class="n">s</span> <span class="bp">→</span> <span class="bp">$</span><span class="n">p</span><span class="o">))</span>
</code></pre></div>
<p>it should use <code>∧</code> on the rhs</p>



<a name="239300209"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Existential%20quantifier%20set%20mem/near/239300209" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Existential.20quantifier.20set.20mem.html#239300209">(May 18 2021 at 18:13)</a>:</h4>
<p>So that means every new binder has to introduce new notation for its interaction with <code>le</code> and <code>mem</code>?</p>



<a name="239300334"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Existential%20quantifier%20set%20mem/near/239300334" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Existential.20quantifier.20set.20mem.html#239300334">(May 18 2021 at 18:14)</a>:</h4>
<p>Even if that interaction is always "just nest the binders"</p>



<a name="239302874"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Existential%20quantifier%20set%20mem/near/239302874" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Existential.20quantifier.20set.20mem.html#239302874">(May 18 2021 at 18:29)</a>:</h4>
<p>I think it is possible to separate the two, using something like the <code>index</code> syntax class introduced in <code>Data.Set.Basic</code>, but right now the binder group syntax class is rather underdeveloped, I don't think we are ready to handle the desugaring of <code>\exists (x \in A) (y \in B), p</code> yet</p>



<a name="239303886"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Existential%20quantifier%20set%20mem/near/239303886" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Existential.20quantifier.20set.20mem.html#239303886">(May 18 2021 at 18:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/270676-lean4/topic/Existential.20quantifier.20set.20mem/near/239294961">said</a>:</p>
<blockquote>
<p>The exists-and version is better than exists-exists, but this was a limitation of the way the lean 3 desugaring works</p>
</blockquote>
<p>Oh yes, the Lean 3 version is very painful for teaching. Things got better only thanks to <a href="https://github.com/leanprover-community/mathlib/issues/5440">#5440</a></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>