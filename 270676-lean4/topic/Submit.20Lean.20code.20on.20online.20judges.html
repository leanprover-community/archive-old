---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html">Submit Lean code on online judges</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="291210518"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291210518" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291210518">(Jul 28 2022 at 15:37)</a>:</h4>
<p>I do competitive programming. I need to submit Lean 4 code to online judges. Online judges don't support Lean 4 so I have to find a way to wrap Lean 4 in a more common language. For example, if there is an easy way to compile Lean 4 code to WebAssembly, I could just do it and wrap the WebAssembly code in Node.js. Alas, there isn't. The most popular online judge is Codeforces. To view the list of languages Codeforces supports, head over to <a href="https://codeforces.com/contest/1281/status">https://codeforces.com/contest/1281/status</a> and click the "Any language" drop-down box. Could you give me some hacky ideas that I can attempt so I can submit Lean code there?</p>
<p>Codeforces runs on Windows. Other online judges mostly run on Linux.</p>



<a name="291225112"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291225112" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291225112">(Jul 28 2022 at 17:23)</a>:</h4>
<p>If you're feeling motivated, I believe it's possible to generate Haskell code from Lean 4 code via metaprogramming. That is, you create a Lean 4 program that runs <code>Lean.Elab.runFrontend</code> on a Lean 4 source and then you work your way through the environment that's generated</p>



<a name="291225293"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291225293" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291225293">(Jul 28 2022 at 17:24)</a>:</h4>
<p>An <code>Environment</code> is mainly a set of "constants": axioms, theorems, definitions, inductives etc</p>



<a name="291228750"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291228750" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291228750">(Jul 28 2022 at 17:53)</a>:</h4>
<p>This is not too simple though. You want to make sure that your Lean 4 source doesn't make use of things that are implemented externally via FFI so everything you're transpiling is implemented in Lean 4 itself.</p>
<p>Also, the environment contains a lot of things that you won't need. So you better start your transpilation routine from some <code>main</code> function and dig the environment on demand</p>



<a name="291233598"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291233598" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291233598">(Jul 28 2022 at 18:33)</a>:</h4>
<p><span class="user-mention" data-user-id="511228">@Huỳnh Trần Khanh</span> I guess you could conceivable submit the compiled C code Lean produces?</p>



<a name="291286946"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291286946" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291286946">(Jul 29 2022 at 06:12)</a>:</h4>
<p>Doesn't the generated code depend on a runtime library? I guess we also need to copy and paste the runtime library too as well right?</p>



<a name="291286953"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291286953" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291286953">(Jul 29 2022 at 06:12)</a>:</h4>
<p>Also, I can't submit too much code.</p>



<a name="291287207"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291287207" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291287207">(Jul 29 2022 at 06:18)</a>:</h4>
<p>Here's a concrete challenge. Solve <a href="https://codeforces.com/problemset/problem/4/A">this problem</a> with Lean. Then tell me how you do it.</p>



<a name="291287621"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291287621" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291287621">(Jul 29 2022 at 06:26)</a>:</h4>
<p>If this is not possible, I still have another hack. I'll make my own programming language! And then I'll make a transpiler into Lean and a transpiler into C++. It's not ideal but I have too much free time and I'm willing to do anything to make this stuff work. This is a new frontier after all.</p>
<p>I just want to kiss deep embedding goodbye.</p>



<a name="291303421"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291303421" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291303421">(Jul 29 2022 at 10:05)</a>:</h4>
<p><span class="user-mention silent" data-user-id="451983">Arthur Paulino</span> <a href="#narrow/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges/near/291225112">said</a>:</p>
<blockquote>
<p>If you're feeling motivated, I believe it's possible to generate Haskell code from Lean 4 code via metaprogramming. That is, you create a Lean 4 program that runs <code>Lean.Elab.runFrontend</code> on a Lean 4 source and then you work your way through the environment that's generated</p>
</blockquote>
<p>Doesn't that assume that the semantics of (non-tactic) lean code embed faithfully in haskell? A cursory google suggests haskell doesn't really support dependent types</p>



<a name="291305298"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291305298" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291305298">(Jul 29 2022 at 10:29)</a>:</h4>
<p>Honestly, if I'm good enough to follow Arthur's approach then I might as well join the Lean development team. It's probably as complex as making a new compilation target. And we know all too well how arduous this work is...</p>



<a name="291305471"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291305471" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291305471">(Jul 29 2022 at 10:32)</a>:</h4>
<p>I mean translating to Haskell is a new compilation target :P </p>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges/near/291303421">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="451983">Arthur Paulino</span> <a href="#narrow/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges/near/291225112">said</a>:</p>
<blockquote>
<p>If you're feeling motivated, I believe it's possible to generate Haskell code from Lean 4 code via metaprogramming. That is, you create a Lean 4 program that runs <code>Lean.Elab.runFrontend</code> on a Lean 4 source and then you work your way through the environment that's generated</p>
</blockquote>
<p>Doesn't that assume that the semantics of (non-tactic) lean code embed faithfully in haskell? A cursory google suggests haskell doesn't really support dependent types</p>
</blockquote>
<p>We can already translate Lean code to semantically equivalent C code so I dont see why we shouldn't be able to build Haskell code, just because the original source was Lean doesnt mean the dependent types have to be preserved as the C backend shows</p>



<a name="291305516"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291305516" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291305516">(Jul 29 2022 at 10:33)</a>:</h4>
<p>I was reading the suggestion as "it's a straightforward 1:1 mapping", which I'm sure is not really true at all for the C compilation</p>



<a name="291305537"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291305537" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291305537">(Jul 29 2022 at 10:34)</a>:</h4>
<p><span class="user-mention" data-user-id="511228">@Huỳnh Trần Khanh</span>, have you taken a look at the C code output to see how viable using it would be?</p>



<a name="291305737"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291305737" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291305737">(Jul 29 2022 at 10:36)</a>:</h4>
<p>The C output is really not nice to the reader, all variable names are replaced with <code>xN</code> where <code>N</code> is some number, constructors are referred to by numbers etc. And it is also quite long so the "too much code" criteria will hit sooner or later I assume.</p>



<a name="291306174"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291306174" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291306174">(Jul 29 2022 at 10:42)</a>:</h4>
<p>To demonstrate this is the first few lines of C in the main function:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">LEAN_EXPORT</span> <span class="n">lean_object</span><span class="bp">*</span> <span class="n">_lean_main</span><span class="o">(</span><span class="n">lean_object</span><span class="bp">*</span> <span class="n">x_1</span><span class="o">)</span> <span class="o">{</span>
<span class="n">_start</span><span class="o">:</span>
<span class="o">{</span>
<span class="n">lean_object</span><span class="bp">*</span> <span class="n">x_2</span><span class="bp">;</span> <span class="n">lean_object</span><span class="bp">*</span> <span class="n">x_3</span><span class="bp">;</span> <span class="n">lean_object</span><span class="bp">*</span> <span class="n">x_4</span><span class="bp">;</span> <span class="n">lean_object</span><span class="bp">*</span> <span class="n">x_5</span><span class="bp">;</span> <span class="n">lean_object</span><span class="bp">*</span> <span class="n">x_6</span><span class="bp">;</span>
<span class="n">x_2</span> <span class="bp">=</span> <span class="n">lean_get_stdin</span><span class="o">(</span><span class="n">x_1</span><span class="o">)</span><span class="bp">;</span>
<span class="n">x_3</span> <span class="bp">=</span> <span class="n">lean_ctor_get</span><span class="o">(</span><span class="n">x_2</span><span class="o">,</span> <span class="mi">0</span><span class="o">)</span><span class="bp">;</span>
<span class="n">lean_inc</span><span class="o">(</span><span class="n">x_3</span><span class="o">)</span><span class="bp">;</span>
<span class="n">x_4</span> <span class="bp">=</span> <span class="n">lean_ctor_get</span><span class="o">(</span><span class="n">x_2</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span><span class="bp">;</span>
<span class="n">lean_inc</span><span class="o">(</span><span class="n">x_4</span><span class="o">)</span><span class="bp">;</span>
<span class="n">lean_dec</span><span class="o">(</span><span class="n">x_2</span><span class="o">)</span><span class="bp">;</span>
<span class="n">x_5</span> <span class="bp">=</span> <span class="n">lean_ctor_get</span><span class="o">(</span><span class="n">x_3</span><span class="o">,</span> <span class="mi">4</span><span class="o">)</span><span class="bp">;</span>
<span class="n">lean_inc</span><span class="o">(</span><span class="n">x_5</span><span class="o">)</span><span class="bp">;</span>
<span class="n">lean_dec</span><span class="o">(</span><span class="n">x_3</span><span class="o">)</span><span class="bp">;</span>
<span class="n">x_6</span> <span class="bp">=</span> <span class="n">lean_apply_1</span><span class="o">(</span><span class="n">x_5</span><span class="o">,</span> <span class="n">x_4</span><span class="o">)</span><span class="bp">;</span>
</code></pre></div>
<p>for</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">main</span> <span class="o">:</span> <span class="n">IO</span> <span class="n">Unit</span> <span class="o">:=</span> <span class="k">do</span>
  <span class="k">let</span> <span class="n">stdin</span> <span class="bp">←</span> <span class="n">IO.getStdin</span>
  <span class="k">let</span> <span class="n">inputLine</span> <span class="bp">←</span> <span class="n">stdin.getLine</span>
  <span class="k">let</span> <span class="n">kilos</span> <span class="o">:=</span> <span class="n">inputLine.toNat</span><span class="bp">!</span>
  <span class="k">if</span> <span class="n">kilos</span> <span class="bp">%</span> <span class="mi">2</span> <span class="bp">==</span> <span class="mi">0</span> <span class="k">then</span>
    <span class="n">IO.println</span> <span class="s2">"Yes"</span>
  <span class="k">else</span>
    <span class="n">IO.println</span> <span class="s2">"No"</span>
</code></pre></div>
<p>If you are wondering, the x_1 it is pulling through to getStdin etc. is indeed <code>RealWorld</code>.</p>



<a name="291306785"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291306785" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291306785">(Jul 29 2022 at 10:49)</a>:</h4>
<p>Ugh. All the refcount calls, and also there is the runtime library that I need to copy and paste too. </p>
<blockquote>
<p>The size of the file with the source code shouldn't exceed 64 kilobytes. <a href="https://codeforces.com/blog/entry/4088">https://codeforces.com/blog/entry/4088</a></p>
</blockquote>



<a name="291306944"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291306944" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291306944">(Jul 29 2022 at 10:51)</a>:</h4>
<p>Is there a condition that <code>kilos</code> should be at least 4, in the question?  In the solution?  <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span></p>



<a name="291306958"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291306958" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291306958">(Jul 29 2022 at 10:51)</a>:</h4>
<p>Will the massive amount of code prevent us from solving <a href="https://codeforces.com/problemset/problem/4/A">Watermelon</a>? Too bad I still don't have Lean 4 installed on my machine, maybe this evening (read: in a few hours) I can get this sorted out.</p>



<a name="291307101"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291307101" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291307101">(Jul 29 2022 at 10:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="321459">Damiano Testa</span> <a href="#narrow/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges/near/291306944">said</a>:</p>
<blockquote>
<p>Is there a condition that <code>kilos</code> should be at least 4, in the question?  In the solution?  <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span></p>
</blockquote>
<p>You have to check for that.</p>



<a name="291307139"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291307139" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291307139">(Jul 29 2022 at 10:53)</a>:</h4>
<p>if the weight is less than 4 or the weight is odd then no, otherwise yes</p>



<a name="291307142"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291307142" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291307142">(Jul 29 2022 at 10:53)</a>:</h4>
<p>That's the solution</p>



<a name="291307285"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291307285" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291307285">(Jul 29 2022 at 10:54)</a>:</h4>
<p>The problem statement says you need to handle any integer from 1 to 100</p>



<a name="291307321"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291307321" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291307321">(Jul 29 2022 at 10:54)</a>:</h4>
<p>Right, but the proposed solution seems to give the wrong answer for input 2.</p>



<a name="291307475"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291307475" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291307475">(Jul 29 2022 at 10:56)</a>:</h4>
<p>What do you mean? The answer is no for 2.</p>



<a name="291307532"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291307532" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291307532">(Jul 29 2022 at 10:57)</a>:</h4>
<p>Indeed, but I <em>think</em> that the code that Henrik sent will answer yes.</p>



<a name="291307536"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291307536" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291307536">(Jul 29 2022 at 10:57)</a>:</h4>
<p>(deleted)</p>



<a name="291307668"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291307668" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291307668">(Jul 29 2022 at 10:59)</a>:</h4>
<p><span class="user-mention" data-user-id="395550">@Henrik Böving</span> could you fix the bug in your solution and then submit it to Codeforces?</p>



<a name="291307702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291307702" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291307702">(Jul 29 2022 at 10:59)</a>:</h4>
<p>That won't work it requires an <code>#include &lt;lean/lean.h&gt;</code> at the top</p>



<a name="291307703"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291307703" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291307703">(Jul 29 2022 at 10:59)</a>:</h4>
<p>You can post the C code and I'll submit it for you.</p>



<a name="291307786"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291307786" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291307786">(Jul 29 2022 at 11:00)</a>:</h4>
<p><span class="user-mention silent" data-user-id="395550">Henrik Böving</span> <a href="#narrow/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges/near/291307702">said</a>:</p>
<blockquote>
<p>That won't work it requires an <code>#include &lt;lean/lean.h&gt;</code> at the top</p>
</blockquote>
<p>Yeah so you need to copy and paste the entire runtime library too...</p>



<a name="291307828"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291307828" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291307828">(Jul 29 2022 at 11:00)</a>:</h4>
<p>Not just the header, I guess even the whole implementation...</p>



<a name="291307835"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291307835" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291307835">(Jul 29 2022 at 11:01)</a>:</h4>
<p>Exactly^^</p>



<a name="291307955"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291307955" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291307955">(Jul 29 2022 at 11:02)</a>:</h4>
<p>can yo use <a href="http://repl.it">repl.it</a> as an evaluator? I hear they are using nix-shell for their stuff and Lean does have nix support so maybe one can hack something together there.</p>



<a name="291307991"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291307991" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291307991">(Jul 29 2022 at 11:02)</a>:</h4>
<p>I assume the runtime library in question is <a href="https://github.com/leanprover/lean4/tree/f6b6b36f47909fe8a089c16efdb87372154e7efa/src/runtime">https://github.com/leanprover/lean4/tree/f6b6b36f47909fe8a089c16efdb87372154e7efa/src/runtime</a></p>



<a name="291308360"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291308360" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291308360">(Jul 29 2022 at 11:08)</a>:</h4>
<p>Transpiling a Lean <code>Environment</code> to Haskell shouldn't be <em>too hard</em> either.</p>
<p>We're doing a translation to a much simpler language called Lurk, but we have an involved step in the middle, which is content-addressing the declarations to an IR of our own: <a href="https://github.com/yatima-inc/yatima-lang">https://github.com/yatima-inc/yatima-lang</a></p>
<p>If you want you can use that as a reference and go straight to Haskell instead of taking the indirect path we are</p>



<a name="291308414"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291308414" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291308414">(Jul 29 2022 at 11:09)</a>:</h4>
<p>I think where translating lean code to haskell gets tricky is when you do type computations, for example consider my (currrently compiler bugged but technically valid) code from the IR check thread:</p>



<a name="291308478"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291308478" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291308478">(Jul 29 2022 at 11:10)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">abbrev</span> <span class="n">TupleNTyp</span> <span class="o">:</span> <span class="n">Nat</span> <span class="bp">→</span> <span class="kt">Type</span> <span class="mi">1</span>
  <span class="bp">|</span> <span class="mi">0</span> <span class="bp">=&gt;</span> <span class="kt">Type</span>
  <span class="bp">|</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=&gt;</span> <span class="kt">Type</span> <span class="bp">→</span> <span class="o">(</span><span class="n">TupleNTyp</span> <span class="n">n</span><span class="o">)</span>

<span class="n">abbrev</span> <span class="n">TupleN</span> <span class="o">:</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">Fin</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="n">TupleNTyp</span> <span class="n">n.val</span><span class="o">)</span>
  <span class="bp">|</span> <span class="mi">0</span> <span class="bp">=&gt;</span> <span class="n">Unit</span>
<span class="c1">--  | 1 =&gt; Solo</span>
<span class="c1">--  | 2 =&gt; Prod</span>
<span class="c1">--  | 3 =&gt; fun a b c =&gt; Prod a (Prod b c)</span>
</code></pre></div>
<p>there is a translation for this to haskell that involves type families etc. (I got this idea from haskell code, I would have never had that idea myself my haskell foo is limited) but that is of course highly non trivial to do automatically</p>



<a name="291308604"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291308604" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291308604">(Jul 29 2022 at 11:12)</a>:</h4>
<p>I don't know if Haskell supports mutually recursive functions either</p>



<a name="291308618"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291308618" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291308618">(Jul 29 2022 at 11:12)</a>:</h4>
<p>Oh of course haskell is mutually recursive by default, you can write declarations in whatever order you want</p>



<a name="291308648"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291308648" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291308648">(Jul 29 2022 at 11:13)</a>:</h4>
<p>(Note: techincally not 100% true there are cases where you can trick the haskell type checker into doing certain things that <em>do</em> make order matter but that is besides the point)</p>



<a name="291308659"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291308659" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291308659">(Jul 29 2022 at 11:13)</a>:</h4>
<p>Well, you can always restrict your transpilation to a subset of the source language</p>



<a name="291308765"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291308765" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291308765">(Jul 29 2022 at 11:14)</a>:</h4>
<p>I would also be interested to see how highly typed things like this: <a href="https://github.com/hargoniX/cpdt-lean/blob/main/Cpdt/Chapter2/Typed.lean">https://github.com/hargoniX/cpdt-lean/blob/main/Cpdt/Chapter2/Typed.lean</a> translate, specifically the <code>inductive</code> definitions and again type computations.</p>



<a name="291308907"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291308907" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291308907">(Jul 29 2022 at 11:16)</a>:</h4>
<p>Yes. Remember that in the end of the day we will be dealing with expressions. So the problem kind of boils down to being able to translate those</p>



<a name="291308941"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291308941" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291308941">(Jul 29 2022 at 11:17)</a>:</h4>
<p>No, an <code>inductive</code> is not an expression it is an entire thing on its own</p>



<a name="291309035"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291309035" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291309035">(Jul 29 2022 at 11:18)</a>:</h4>
<p>Yes, gotta encode indictives in a particular way. But doesn't Haskell have a good support for those already? That's why I mentioned Haskell</p>



<a name="291309077"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291309077" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291309077">(Jul 29 2022 at 11:19)</a>:</h4>
<p>Inductives and recursors will be tricky</p>



<a name="291309373"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291309373" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291309373">(Jul 29 2022 at 11:24)</a>:</h4>
<p>AFAIK Haskell has several concepts like their normal <code>data</code>, their GADT <code>data</code>, their <code>type family</code> and probably more that together have at least a great feature overlap with <code>inductive</code> from Lean. Though I'm guessing it is possible since Coq can do code extraction to Ocaml and Haskell already, that's probably where to look at if you want to know how to do this type of stuff</p>



<a name="291309731"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291309731" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291309731">(Jul 29 2022 at 11:28)</a>:</h4>
<p>Quick question: The Lean runtime library doesn't depend on anything else except the standard C library right?</p>



<a name="291309739"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291309739" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291309739">(Jul 29 2022 at 11:28)</a>:</h4>
<p>I could hack something up.</p>



<a name="291309784"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291309784" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291309784">(Jul 29 2022 at 11:29)</a>:</h4>
<p>I swear if this is true then there's a reasonable way to submit code to Codeforces.</p>



<a name="291309875"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291309875" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291309875">(Jul 29 2022 at 11:30)</a>:</h4>
<p>I believe it does still use GMP for Nat though there are plans to replace that (and they might have already gone through I'm not 100% up to date regarding this)</p>



<a name="291310437"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291310437" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291310437">(Jul 29 2022 at 11:37)</a>:</h4>
<p>It depends on the C++ standard library too; indeed, the runtime is written in C++ and exposes a C interface</p>



<a name="291311039"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291311039" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291311039">(Jul 29 2022 at 11:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="395550">Henrik Böving</span> <a href="#narrow/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges/near/291309875">said</a>:</p>
<blockquote>
<p>I believe it does still use GMP for Nat though there are plans to replace that (and they might have already gone through I'm not 100% up to date regarding this)</p>
</blockquote>
<p>100% gone, just checked.</p>



<a name="291311193"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291311193" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Henrik Böving <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291311193">(Jul 29 2022 at 11:47)</a>:</h4>
<p>Also getting back to my previous idea, I think with this <a href="https://docs.replit.com/programming-ide/nix-on-replit">https://docs.replit.com/programming-ide/nix-on-replit</a> it should be possible to just use Sebastian's nix environment for doing Lean on <a href="http://repl.it">repl.it</a> so if there is some competetive programming that allows <a href="http://repl.it">repl.it</a> as a runtime why not use that?</p>



<a name="291311288"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291311288" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291311288">(Jul 29 2022 at 11:48)</a>:</h4>
<blockquote>
<p>some competitive programming</p>
</blockquote>
<p>Sorry, there isn't.</p>



<a name="291311299"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291311299" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291311299">(Jul 29 2022 at 11:48)</a>:</h4>
<p>We mostly use Codeforces.</p>



<a name="291311467"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291311467" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291311467">(Jul 29 2022 at 11:51)</a>:</h4>
<p>I believe I can figure stuff out. Gotta get stuff installed first, brb</p>



<a name="291311748"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291311748" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291311748">(Jul 29 2022 at 11:54)</a>:</h4>
<p>High level plan: pack everything into one single file, then put the file through some sort of transformation to make it smaller. I'll post more details when I get everything done.</p>



<a name="291327623"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291327623" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291327623">(Jul 29 2022 at 13:38)</a>:</h4>
<p>Is this type of thing common? Do people often submit in languages not supported by codeforces via transpilation?</p>



<a name="291327658"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291327658" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291327658">(Jul 29 2022 at 13:38)</a>:</h4>
<p>Alternatively; is this a social problem that can be solved by asking CodeForces to add support for Lean4 directly?</p>



<a name="291327868"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291327868" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291327868">(Jul 29 2022 at 13:40)</a>:</h4>
<blockquote>
<p>Is this type of thing common</p>
</blockquote>
<p>Yes, very common.</p>



<a name="291327922"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291327922" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291327922">(Jul 29 2022 at 13:41)</a>:</h4>
<p>It's possible to ask Codeforces to add support for Lean 4. I just need to make enough noise on the blogs section.</p>



<a name="291327952"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291327952" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291327952">(Jul 29 2022 at 13:41)</a>:</h4>
<p>Getting them to update regularly, however, is harder.</p>



<a name="291328123"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291328123" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Rute <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291328123">(Jul 29 2022 at 13:42)</a>:</h4>
<p>In codingames, folks would get around this by:</p>
<ul>
<li>compiling their program to binary (for the target system I guess)</li>
<li>encode the binary as base85 text</li>
<li>put the base85 text inside a C++ file with a bit of code to decode and run it.</li>
</ul>
<p>The primary use cases were:</p>
<ul>
<li>using compiler flags not supported by codingames</li>
<li>using languages not supported by codingames</li>
<li>being able to work with multiple files and have them put into a single file at the end</li>
<li>compressing your code to get it to fit in the file size limits</li>
</ul>
<p>It was banded from the live competitions however, since it could be used to break rules, like stealing other peoples code and obfuscate it.</p>
<p>Here is an example from <a href="https://www.codingame.com/forum/t/new-contests-rule/2895">https://www.codingame.com/forum/t/new-contests-rule/2895</a></p>
<div class="codehilite" data-code-language="C++"><pre><span></span><code><span class="cp">#include</span><span class="cpf">&lt;algorithm&gt;</span><span class="cp"></span>
<span class="cp">#include</span><span class="cpf">&lt;fstream&gt;</span><span class="cp"></span>
<span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">std</span><span class="p">;</span><span class="w"></span>
<span class="k">constexpr</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="n">en85</span><span class="p">[]{</span><span class="s">"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz!#$%&amp;()*+-;&lt;=&gt;?@^_`{|}~"</span><span class="p">};</span><span class="w"></span>
<span class="kt">char</span><span class="w"> </span><span class="n">de85</span><span class="p">[</span><span class="mi">256</span><span class="p">];</span><span class="w"></span>
<span class="k">const</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="n">Base85_Binary</span><span class="p">{</span><span class="s">"e??420s#R700000000000suY$0RR91C|p1Q00000KmY&amp;$00000000000000000000Kma%Z0sue&amp;000000RR911poj50000000000002M$00000002M$00000S#1CS00000S#1CS00000001BW000000RR911^@s6Fa`kt00000Fa}`&amp;00000Fa}`&amp;0000000000000000000000000001BW000008dcGSRZv(VKoJcV0000000{vA00{vA00IC2j{pDw4gdfE7y|%5k&lt;e?8OBwrZ#ah&lt;mg*02^c8;+YLrAR8lgjz+e_jGd&lt;!bi&amp;p*Z|gP)vrEP9f-Tqu}Hp&lt;)I?&lt;#{BaOLT&amp;I^&lt;Wp?5c7n5G$E*(xHVj?H9-}Znql!5$?bC{#O(2W2&gt;8Ef+FPx{&gt;SzBe&amp;gG7Y^z87M)&gt;shwaA&gt;?vI&gt;qBUm&lt;Wd)^08_&gt;#FsuM&lt;@c;nQSpWbINd*8H0{{SS)*zFtp_g_lo^`+%Mlb@yS%498#6ABaeO91qYmjU%QP&amp;Phm&gt;-pEym?|u$ZmK8x1hiStq#=uzpO_9AfF|0_xZN7mg)V7aE&lt;!|GZX?NgHXwdw9oq`DDnm%cvs`ng`f2eM48E&gt;w42w1_IJH)e4DKKLw37Mv#*2w#a2Q(V|yA`Xm3A&amp;%)l%Dx2;ZAXp}myw~a!JBCW6`*=b@mZ#-s&lt;lG}@0=xT4;aQheLF`zSXuO1Pjd{hE=3w_Z^deO3lmYWYRwVSzjcP`uL2Bzjvs&amp;3w})EDe-w8g_ZR~%|tR3uP@v%G3@^Vp^GN*#*DO6;uFv4IUl9;B2q$F!cmU3&gt;Dvxx!M;jf)aZz!vC4Gw&amp;_#8{`Ev$oEtt=k7fU)dgaf^7K&lt;&lt;-UUkl=l&amp;h%*F8yJmZnhdS{QRDg&lt;dn*@c88+BOmOY+Kp8Y3Map42~o(hWIkG+m#p`9ka9s*U9rs#GTcPTy58RW$QSQepl$9sT(&amp;R|hj%MnqW{(8K_;L-RlgGv&lt;V4!`Yd8#Ql6BBQBHa|bV#cE-NBBJmmA==+S1U?wF0Tq-W&amp;}l2Ih&lt;v^k$82s00Fk1I7D!+_DlLmZ3pyfl?Hm&lt;JROzj0F%`=Js24Y8&lt;b-C7u8Ey`v?t&gt;^X!aOZ&amp;!GE$n0gXpXDLiE&amp;IF(p}=2$O7riG=he&gt;HsSd6nb2ZpH9V5e+4#NUu*#dL`j&gt;g(=6U$JSqkAe;m*8W?seFqAQtt2nub9QN{G}zVQa!h1{ubBWde6-tKEEX3f};Ds_%%m(olC~X+l9fBb_qvB7d%qxFYGvhB)ySl-6mc(7piVk$L1C!6?LsM-bGx4Kq?Vi_N7++Lr^j7Z_T!9&amp;^TX&gt;Z$b`iEN&amp;!BV-&lt;L@n8GLUb!cz~W!|L_8-Oq@pzqOi$e1(&gt;YDtB+GC~#8K0iz=&gt;(65ZrqrH$=W}MUQ$4`Q|7);{HDvlt$Z@j8tqRxF&lt;8I1Il2&gt;Re3&gt;i&gt;Qq-%&lt;LE8t2h-nQrru+euZ4nU49CP&lt;?4caPIK7bZiVj?5N%wlX6u%?{-g{*6CZj&lt;*!3@8Z;5%bifG+G1RRp*A%_5goJw*!j=g30Kl=4$d=;r8v}&lt;3F$o+ZcV~?yT5Xw87D)hWr2H`0#iBz0fslH3?7a|zM)PyFb}5=&lt;jqqb91)CWNol;3p}CEx_b4Wp&gt;g1Y4DQY=g=091dzGxgHww)&gt;iz{pz+&lt;(Y7?aR`K~NB7eB&lt;-~EHPz&gt;^f?VX3~LtUZTp)fAs;0x0G&amp;Bnh$8R^5Tnq4&amp;JqUhtnY5YFz72BvQIIyX;tD-6P9OCr3BhC{9%enoXD3^yq(4X%%&amp;&amp;LtK$3_;YUv?qx^N}P0dBy&gt;`o-5=FVaYVxATn)qyGSArjM&gt;;C!Ju9WFXdhLL1O3$F!e+!0GmehmaMNjXceH$D$&amp;r{3%#fPy_N~Sw3vyu&lt;ms04ImT(P8xhhp+A!%##E&gt;LBA%Drj%Ls?QKN)ZJTET{UZ5p=&lt;_?&gt;gUDcqRbZfq7xY1wcqeq}Z{D1xyb`#f;xu0%X^x49;b&amp;4J+&amp;u~$Ma_*&gt;MFeRn$iLp&gt;AAfKC||;C6Gz?vNx^@JTxYRFR%q&gt;aUmW3Du3=;T!NlY7P$LmGeci$bSDO#_4gfS7-~I`5pXOd&gt;fZ!0r{YyO~x3#_6Vgl5n2S$z5J2?2r|}_k&gt;tp)!s@)MtaFPKvl{Ks2iC{XH6lLnBNKb$a_03sv;96Sq;z%LW&lt;~SzuvVw?zPYQTB%4Fyb{;|R;)fA=F5aCBJ}kbFsDtX#veW5zk}S_y`gj9)#yc^P-!deJ7ADXbSs~pT*()B?n@Va$(W|Q~V&amp;x@uT=#4v5Da7IUW}Y!#5Q!DJjuSG5{yC-D!NfZ41F1sL^Eo4P3bt=O5q9iXi#QL=RNJ}s7tLFPq!BX`*Dcv8X2hk$DaS8$b`WdT3Vt61mq$M3eVK-+BEU(521X5NOMdaYbc5R1v5{iS8&amp;_Hj&lt;&gt;^QtAUfTI^Zp7*D$qnwc&lt;-^fXTlCa(^}=Jc%(jsow9j45ePA#y9rrBwB1;-A3p4+5Cj3@}HkjX_{t&lt;Bb+*0N9$DWnMldVa$yCSQcVU&amp;VOP=VM$7i(KR)?bqiL&amp;r8C5|eU!xC9ib$&amp;V%j&gt;i|YGG{s^eCzW0&gt;JX&gt;@Y&amp;`CRr5}&amp;GC$2oHF{lE_^&gt;9&lt;L(6V5h6fdHog0^04i6IXu2sgxl70Fb@|(nqo(SiaywnF^l`mQ-#XATtYq9LGEg)!w;v?z}ia14AfJg4@$(T!&gt;_UzJxUE7?vF^=Hx==#S)q%&amp;|%R}ax+6x0okzr`g(*K)m$A}!IVy&lt;w_HunpyRsB@`HueE;cKy%PkNsC?&gt;b;i`6k_8*G&gt;yp49xEnZ3N_l)7%gTPktQ|Fp4taFB7HH38aT#?FlI${WXgI&lt;C1EJVRRAHJ(OO0&amp;GoonC{kem$5YEVeVL3_|Zg0$L!I#CfaNeodE%4*)A#d+b+N|`huyr?H)=MQ9X3{gb&lt;ErdJloLbJ`^x5Bl5N{?X94?3E2Pe}&gt;hUIczO}srDmoamd&amp;rjjh&amp;Y?EB)7dsK0to&amp;2r3^z?&amp;$!1H3RAtCEs+ueRzQ5UKx$B5Pt&lt;yn(eiKqM&lt;=vzEplv~F_VHm0gOLSm;EU&gt;n)UcDOG^`_R+2~enGc`SV&gt;OH*fiL)GypF3V2!DNM6Lm|i?LEGq%X2K2Mud{%K(sQYzp7Njy0BmL&amp;XDa4W?{Y+CosfZEIkCoeP_--$GXE1Wdb|htW9ViZ%$*_@+NDfCXqB8vEtgKS0;=cQC&gt;`cfNv(NZH~e36ND_?Yh__*{d9@8uPL`P2h1dEBAu&amp;atOAhhR94^XvDz&amp;FZ;Xj9r0UQkS?e0Ew)ZNt%R12=HP?50OivG&amp;&lt;Y|&lt;73#6Qr)lFt5%s$x1NE}syXtY#=T+CEq#f@{x7h-rPPo?6W1yEtba^gzmnN{PWYGYhd6Ej2u#i)V#Cn)ZUd5qx&lt;_&amp;)2C`ub6X#}+4@&gt;i8xqK1Kw5E8)zCUpnIL5pZ$Su7BgLA&amp;%D8{!8HyoaS*=u%ZniK%zn&lt;QIW_dIIbq&lt;uEs^KAdB+Nab-RPdM{%6)(T*+YOqlIX3dSyqYxRBfM(9D&amp;MF7$odyVH2T7jb`r-)7cD}G^REUY|LJMB5wo(q#{l{w$bBbOxM?Fg!nNu*43})TMwEB;}U9SB#*&gt;_~#hL&gt;(&gt;mhVu6@=C=&lt;KpJ-et81uZb}qQ%m=2B4PS{{AW^E5y2D7V-_xCAk`!1ej-;SyT*MN8~9&lt;&amp;(43;2pvtnp3-bjHb&amp;AiA}&gt;mK&amp;mYV`dB{eKGC*0^vM8dPCi})&gt;e9)AKa}&gt;=p|@oNSa-Bp=DVvK(|;G-Z(1S;S;Lp&lt;Ym!+_6#)l$d1p8z_N~$&gt;arb3F~$zi1lx{10=SX0Srr+Hb+ksi{*S;r#fNpT&amp;k_uh=KRY|ut5MgK9-GZErU#R6)4Y0NBr!R?UAnu-bctUdr;$D#|)s5m~EGGvEYA;WM_y_v&gt;v^m^#TP;4WRDavJ5kNCXt7T8{G;m%b63PoD|DoO&gt;boB*$eVQ?NrDnapPnY0W&lt;+&lt;_%*9m%a{+Bx9Sn$m$_Am`~ShSeBOI#)1h0V`pwxck&lt;Q;9{S#{fD@$!R?kRE2{=deeBB0_-6P&gt;Efsqs7b0x={zf-_U`SMSeLuI;AoZi8F=0Ez{0i%=pp^ECA)vlf|IUZFT=cx7|O$(K2ib$qh}+;I|&amp;@mJ*I&gt;TA~!I1Yf`g2enn&lt;rjVhKP`c+t7;Cy88Z6ooxFA3bO|+#6W|_i@BqAgLU@X~+b+6?EWD;HLMQc(9Fj?sngkA@vChDuaS^Z&lt;-Us1C@byQ#+zbEedp5erV~OStc&lt;`F&lt;w&amp;@KMR2SxMzK2wunXnZ&gt;OJmtfAbpkeLhc$a6%q13(J()t2MIEQtFzHW&lt;26&gt;!Vmbk&lt;x|tDJ1h(KPG4hmj5&gt;KsCdd#itArx9H8n+TSHeT0WA1ixk&gt;XmR8!ve6nHI&gt;XDg_Jje!$r^JWRLRkzuG7sn#yv}w[...]iLi)1!WqeCjVC=8CyN#Vr#JU1S2hN6F|ig88$dQ${2&gt;RsU$q$-{Ob#i2h$gaKJ2F5i6Fc-)tYJ&lt;4gUUYy{q&amp;Tip+O~F$NfTT0rE$r6*=1t;qI~lYB4xPlaVz)iar9wPVB~`39)XVZEMvjFojsPIS$*&amp;mvXqpU&amp;I|M;Bb~H&amp;5MMG3yUYfj95tIj8}aVmNt^vTt4xpvCEYH`ijw&gt;Uk#&lt;@m=2^sYNS1mw=3TaySI{l?&amp;9-D@Xc02X)7~|%F!4J`Ii#u^Xmk`FF9cQ&gt;9KXIdZQ84~5Qi8-oGNL+@@QJMMM54VU|J-&gt;WHBIT{3hml=Y%;w=iZL@Hg@DFPHE`mjW0^Mq7j6)Y$+3|J?djiKcsQKkR%3&gt;H|e&lt;2N$=Q!Twnm0wSUHAb+sp`&gt;gwShBr&amp;-1m{qw%HmAR={vK+(*i*mvseI)kI8?1=(%K0?+BcX+6CAq$`kMvCB;lX7y-YmGQ!lQpmS%6#r+vXaW5F1!tPgek#;97aaQUqtkcPm6d~cu1q#U+gtuA?wR0&gt;!`XcB&gt;Hq7FcnUPThogQCH&amp;&amp;b)H6B)a&amp;l3{0Zl&lt;Yz#1=3A-Fo@NanO5QT_%o;8NZPME^qL=t|&lt;Z*s2*^tc05WE;WGllM}PL-o~owzMBK?r6w@Pfl&amp;CFP#sysIDnHWqPOeDK`ByS$q?Zq&lt;x?Ds4&lt;^ZYfXbpJ*#~LJ@D8I3OD)23mRnW=B#k-tXP(4fxLDR9*xB{GzF|%0&lt;$u)3g9$ijveqjwlCZV_&amp;@h%ci=P3pYX}&gt;=oDkf^$ivXsvy_SkDb$MM|&gt;Rsi)%fnf@DyfR$Ka|91*XMclg(TRA8CPKc;1O3&lt;#05u@`zt77ovo{pl)LKaPaYcs#c{fv*7uE$8&amp;H;)Z?jhtsI2iHZRr8#0KOg`Xp=3xVYI;ri3&lt;tq_CW|NbXUHySZye8M=vX)o&amp;)Bx8QF@po*2!gMX?v&gt;IzG8%PhrzL{r&gt;ooS0SXa6c+FXFN`7BE`M^(T6tgv&amp;SdM|*PbYhd-E)k8u&lt;sc&amp;uiQh~Go#-J5YdKJE+2cb^`Z09aLXmIj6HKWz`w+$JSS&gt;DK`7y-}^_0MWK**c5gB&amp;A`YcN(nhdQp1Ad&lt;I2YX|H9IK+X{B&gt;5#6A{Ms9g25Q;4rlR9t=xG&amp;A1FXTOst{~80uh(`&gt;)S{l#~rQGZ&lt;D5+b~+gINCsKuhs+$uYmQ(v&gt;aWu4@wVmW`CNt&lt;`C$4$Zf&amp;V@BThXUR6ki_5-K3&amp;Cb)MeXVz}6xhoFQ&amp;C^PQli3^E&gt;&lt;yHtqd2t7$1Or7{)56gwBqoM)Z$?jB-yCA6?uYBo%~JRCP&amp;l6=u4w?3WKIt(&lt;GdfHq&gt;ewZts%8Y9+t;GT*sZ9z_{noz17yMNs&amp;S4^{&amp;WT^mZN~7oKT^=&gt;o$xGbqdGa2+pDhHlw4lkTHEbbvhX4QobP50f7XSbN4gdfE7y|$RaDDy%u8^TX6TMS5owNdC${YZw2LJ%g0RR9F0000O0{{RF)HPN3(ySE8#o?IA)wc%1&gt;?tG*2{B(?NvHVKVAzcM-;cM5YWS!GP?En(sJTAQ6wsXJMD}8qP`4P}z1KP?1^YlaF4kSTGWN)*nwGRS3}_dkH2(SpZtXPr;&lt;^VH8Q1#C0dlPHT_1&amp;gg014cxFe2bqi8n_Gn4Iiw~vkA$^2Fj40m2{a;44G4NecD-nDyM9$@r7{ZWsDu$PDLT&gt;E8FtHj`o-nW~_qehB~Z73velzeNtwRDpJ#DO2rxEn5O4qHJ*K~kc+LV!1&gt;dAFeVkpf(krq?sV?=ya`i&gt;}ZeZt6NkaJE)15eu$h-zIWZ!|rM=36$#t&lt;^)w7PMAxmjN0f#tI=wkGCsM_oLhbVor4XO8^m?sel_a#O=~FCX6TjZ7I)MN+oMI0+(&lt;FnGS~iaL4|0Fa0_4xm0w+U4HOEs&amp;a@&amp;WY_pp%Ushf{Rs2d-IzA5CBL3PQYqki1gDK&gt;+h9$EhC&lt;svxCfgEc554;~8@Cmckj@*CDUPKaz&gt;X)CUOg#l7EFMcl74&amp;{k@cM~Wc%7DRpYmtr3TpMAhHnR5T7SZ8Xju3qe|R8%6d#+!q%T7;=I9G!5Nb{HKT-q00000RZv(V00000RZv(V4Hgaxj3w4*B2_z+s0RQ5%&gt;e)a00{vANd*90yZ`_I"</span><span class="p">};</span><span class="w"></span>
<span class="n">string</span><span class="w"> </span><span class="nf">decode_85</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="o">&amp;</span><span class="n">base85_string</span><span class="p">){</span><span class="n">string</span><span class="w"> </span><span class="n">out</span><span class="p">;</span><span class="kt">size_t</span><span class="w"> </span><span class="n">str_ptr</span><span class="p">{</span><span class="mi">0</span><span class="p">};</span><span class="k">while</span><span class="p">(</span><span class="n">str_ptr</span><span class="o">&lt;</span><span class="n">base85_string</span><span class="p">.</span><span class="n">size</span><span class="p">()){</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">acc</span><span class="p">{</span><span class="mi">0</span><span class="p">};</span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="mi">5</span><span class="p">;</span><span class="o">++</span><span class="n">i</span><span class="p">){</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="n">ch</span><span class="o">=</span><span class="n">base85_string</span><span class="p">[</span><span class="n">str_ptr</span><span class="o">++</span><span class="p">];</span><span class="kt">int</span><span class="w"> </span><span class="n">de</span><span class="p">{</span><span class="n">de85</span><span class="p">[</span><span class="n">ch</span><span class="p">]};</span><span class="n">acc</span><span class="o">=</span><span class="n">acc</span><span class="o">*</span><span class="mi">85</span><span class="o">+</span><span class="n">de</span><span class="p">;}</span><span class="n">string</span><span class="w"> </span><span class="n">sub</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="mi">4</span><span class="p">;</span><span class="o">++</span><span class="n">i</span><span class="p">){</span><span class="kt">int</span><span class="w"> </span><span class="n">val</span><span class="o">=</span><span class="n">acc</span><span class="o">%</span><span class="mi">256</span><span class="p">;</span><span class="n">acc</span><span class="o">/=</span><span class="mi">256</span><span class="p">;</span><span class="n">sub</span><span class="o">+=</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span><span class="p">(</span><span class="n">val</span><span class="p">);}</span><span class="n">reverse</span><span class="p">(</span><span class="n">sub</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span><span class="n">sub</span><span class="p">.</span><span class="n">end</span><span class="p">());</span><span class="n">out</span><span class="o">+=</span><span class="n">sub</span><span class="p">;}</span><span class="k">return</span><span class="w"> </span><span class="n">out</span><span class="p">;}</span><span class="w"></span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(){</span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="mi">85</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">){</span><span class="kt">int</span><span class="w"> </span><span class="n">ch</span><span class="p">{</span><span class="n">en85</span><span class="p">[</span><span class="n">i</span><span class="p">]};</span><span class="n">de85</span><span class="p">[</span><span class="n">ch</span><span class="p">]</span><span class="o">=</span><span class="n">i</span><span class="p">;}</span><span class="k">const</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="n">Program_Binary</span><span class="p">{</span><span class="n">decode_85</span><span class="p">(</span><span class="n">Base85_Binary</span><span class="p">)};</span><span class="n">ofstream</span><span class="w"> </span><span class="n">Program_File</span><span class="p">(</span><span class="s">"Binary"</span><span class="p">,</span><span class="n">ios</span><span class="o">::</span><span class="n">binary</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">ios</span><span class="o">::</span><span class="n">trunc</span><span class="p">);</span><span class="w"></span>
<span class="n">Program_File</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">Program_Binary</span><span class="p">.</span><span class="n">c_str</span><span class="p">(),</span><span class="n">Program_Binary</span><span class="p">.</span><span class="n">size</span><span class="p">());</span><span class="w"></span>
<span class="n">Program_File</span><span class="p">.</span><span class="n">close</span><span class="p">();</span><span class="w"></span>
<span class="n">system</span><span class="p">(</span><span class="s">"chmod a+x Binary"</span><span class="p">);</span><span class="n">system</span><span class="p">(</span><span class="s">"./Binary"</span><span class="p">);};</span><span class="w"></span>
</code></pre></div>



<a name="291328227"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291328227" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291328227">(Jul 29 2022 at 13:43)</a>:</h4>
<p>Good thing it's not banned on Codeforces provided that the original source code is included in a comment.</p>



<a name="291329492"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291329492" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Rute <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291329492">(Jul 29 2022 at 13:54)</a>:</h4>
<p>Oh, I see, you already considered this above.</p>



<a name="291330634"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291330634" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291330634">(Jul 29 2022 at 14:03)</a>:</h4>
<p>I don't see where that was mentioned above; mind linking the message?</p>



<a name="291331225"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291331225" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291331225">(Jul 29 2022 at 14:08)</a>:</h4>
<p>Is there a standard way to cross compile Lean code for another platform, say, Windows? If not, I'll keep monkey patching stuff.</p>



<a name="291331513"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291331513" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291331513">(Jul 29 2022 at 14:11)</a>:</h4>
<p>My plan is I'll manually compile the runtime, then I'll replace the leanc binary with a dumb script that calls the cross compilation toolchain.</p>



<a name="291331516"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291331516" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Locria Cyber <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291331516">(Jul 29 2022 at 14:11)</a>:</h4>
<p>Have you heard of a C compiler that simply merge all files?</p>



<a name="291331609"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291331609" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Locria Cyber <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291331609">(Jul 29 2022 at 14:12)</a>:</h4>
<p>somebody used it to sumbit Nim script as C</p>



<a name="291331660"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291331660" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Locria Cyber <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291331660">(Jul 29 2022 at 14:12)</a>:</h4>
<p>Can't remember the name. There is one for C++ as well.</p>



<a name="291331763"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291331763" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291331763">(Jul 29 2022 at 14:13)</a>:</h4>
<p>I've seen people use Python scripts that topologically sort #includes...</p>



<a name="291331913"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291331913" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291331913">(Jul 29 2022 at 14:14)</a>:</h4>
<p>There is one in the AtCoder Library as well.</p>



<a name="291332236"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291332236" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291332236">(Jul 29 2022 at 14:17)</a>:</h4>
<p>This stuff is crazy I think my brain is melting</p>



<a name="291332262"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291332262" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Rute <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291332262">(Jul 29 2022 at 14:17)</a>:</h4>
<p>When I did programming contests in python, I had a cool tool of mine which turned a big project into a single file.  <a href="https://github.com/jasonrute/modulize">https://github.com/jasonrute/modulize</a></p>



<a name="291332444"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291332444" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291332444">(Jul 29 2022 at 14:19)</a>:</h4>
<p>Rust has cargo-equip</p>



<a name="291332843"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291332843" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jason Rute <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291332843">(Jul 29 2022 at 14:22)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges/near/291330634">said</a>:</p>
<blockquote>
<p>I don't see where that was mentioned above; mind linking the message?</p>
</blockquote>
<p>I was just referring to Mac mentioning that you could use the compiled c code and <del>Huynh</del> Khanh responding that it requires also including the runtime libraries which may not be easy.  (The base85 stuff wasn’t explicitly mentioned, but it also seems <del>Huynh</del> Khanh is familiar with the standard tricks in this area.)</p>



<a name="291332903"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291332903" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291332903">(Jul 29 2022 at 14:23)</a>:</h4>
<p>My first name is Khanh btw.</p>



<a name="291332991"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291332991" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291332991">(Jul 29 2022 at 14:23)</a>:</h4>
<p>Most people who don't know me well get this wrong <span aria-label="joy" class="emoji emoji-1f602" role="img" title="joy">:joy:</span></p>



<a name="291343765"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291343765" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291343765">(Jul 29 2022 at 15:50)</a>:</h4>
<p>(deleted)</p>



<a name="291343790"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291343790" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291343790">(Jul 29 2022 at 15:50)</a>:</h4>
<p>(deleted)</p>



<a name="291343809"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291343809" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291343809">(Jul 29 2022 at 15:51)</a>:</h4>
<p>(deleted)</p>



<a name="291344111"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291344111" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291344111">(Jul 29 2022 at 15:53)</a>:</h4>
<p>(deleted)</p>



<a name="291348051"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291348051" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291348051">(Jul 29 2022 at 16:23)</a>:</h4>
<p>Sorry, compiled the wrong file. My plan didn't work.</p>



<a name="291357420"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291357420" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291357420">(Jul 29 2022 at 17:43)</a>:</h4>
<p>I'll go to bed and tomorrow I'll change course.</p>



<a name="291357545"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291357545" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291357545">(Jul 29 2022 at 17:44)</a>:</h4>
<p>My next plan is to have leanc emit inline assembly so I can embed in C++</p>



<a name="291408846"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291408846" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291408846">(Jul 30 2022 at 05:34)</a>:</h4>
<p>I tried embedding the executable in a base64 string.</p>



<a name="291408849"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291408849" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291408849">(Jul 30 2022 at 05:34)</a>:</h4>
<p>The unfortunate truth is the executable is way too big.</p>



<a name="291408861"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291408861" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291408861">(Jul 30 2022 at 05:35)</a>:</h4>
<p>I guess it's not feasible to submit Lean after all.</p>



<a name="291408949"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Submit%20Lean%20code%20on%20online%20judges/near/291408949" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Huỳnh Trần Khanh <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Submit.20Lean.20code.20on.20online.20judges.html#291408949">(Jul 30 2022 at 05:36)</a>:</h4>
<p>Experiment failed. At the end of the day, the size limit is the biggest obstacle.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>