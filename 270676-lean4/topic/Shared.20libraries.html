---
layout: archive
title: Zulip Chat Archive
permalink: /stream/270676-lean4/topic/Shared.20libraries.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/index.html">lean4</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Shared.20libraries.html">Shared libraries</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="253884986"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Shared%20libraries/near/253884986" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Tomas Skrivan <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Shared.20libraries.html#253884986">(Sep 18 2021 at 18:19)</a>:</h4>
<p>How can I generate Lean's shared libraries? Lean's installation contains only static ones <code>libInit.a libLean.a libleancpp.a libStd.a</code>. Peeking into CMakeLists they are not generated because of some cross-compiling issues. I'm on linux and want to develop only for linux right now, so that should not be an issue for me. I have tried to un-comment that block, but I'm getting bunch of errors about recompiling with -fPIC.</p>
<p>Alternatively, how can I recompile those static libraries with fPIC such that I can use them when creating a plugin for some application.</p>



<a name="253927774"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Shared%20libraries/near/253927774" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Shared.20libraries.html#253927774">(Sep 19 2021 at 08:11)</a>:</h4>
<p>The nightlies come with <code>libleanshared.so</code></p>



<a name="253927834"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Shared%20libraries/near/253927834" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Shared.20libraries.html#253927834">(Sep 19 2021 at 08:12)</a>:</h4>
<p>and all code compiled with fPIC</p>



<a name="253933595"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Shared%20libraries/near/253933595" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Tomas Skrivan <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Shared.20libraries.html#253933595">(Sep 19 2021 at 10:00)</a>:</h4>
<p>Thanks! I have missed that, I was using only stable.</p>



<a name="254070645"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Shared%20libraries/near/254070645" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Tomas Skrivan <a href="https://leanprover-community.github.io/archive/stream/270676-lean4/topic/Shared.20libraries.html#254070645">(Sep 20 2021 at 15:42)</a>:</h4>
<p>Ok, managed to get it working! Successfully created a shared library with lean, loaded it and executed from external application. Took me a while. One thing I was confused about, why is <code>void lean_initialize_runtime_module()</code> not declared in <code>lean.h</code>? It seems to be defined in lean library and it has to be called before anything.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>