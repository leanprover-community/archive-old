---
layout: archive
title: Zulip Chat Archive
permalink: /stream/267928-condensed-mathematics/topic/thm.2069.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/index.html">condensed mathematics</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html">thm 69</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="253256880"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/253256880" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#253256880">(Sep 14 2021 at 14:06)</a>:</h4>
<p><span class="user-mention" data-user-id="300245">@Filippo A. E. Nuccio</span> I saw that you are working on <code>thm69.lean</code>. I think you can gain a lot from using coercions from <code>nnreal</code> to <code>real</code>, instead of writing <code>r'.1</code>. I imagine that <code>simp</code> and <code>norm_cast</code> will work better if you use coercions.</p>



<a name="253256932"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/253256932" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#253256932">(Sep 14 2021 at 14:06)</a>:</h4>
<p>Also, can't some of those results be proved by staying in <code>nnreal</code>?</p>



<a name="253256970"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/253256970" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#253256970">(Sep 14 2021 at 14:07)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> Thanks! You're certainly right, and indeed I am refactoring almost everything by staying in <code>nnreal</code>.</p>



<a name="253256979"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/253256979" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#253256979">(Sep 14 2021 at 14:07)</a>:</h4>
<p>I guess <code>nat_floor</code> forces you to use a ring. I wonder if it could be generalised to semirings, so that it works for <code>nnreal</code> too</p>



<a name="253257248"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/253257248" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#253257248">(Sep 14 2021 at 14:08)</a>:</h4>
<p>I think too, you're right. The problem with staying in <code>nnreal</code> is that, sometimes things become <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span> (when they're negative), so any expression of the form <code>x-y</code> can be a bit painful. But I hope I can work this out.</p>



<a name="253257301"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/253257301" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#253257301">(Sep 14 2021 at 14:09)</a>:</h4>
<p>wink wink <a href="https://github.com/leanprover-community/mathlib/tree/floorsemiring">https://github.com/leanprover-community/mathlib/tree/floorsemiring</a> wink wink</p>



<a name="253257308"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/253257308" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#253257308">(Sep 14 2021 at 14:09)</a>:</h4>
<p>At any rate I agree that staying in <code>nnreal</code> is the best option.</p>



<a name="253257416"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/253257416" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#253257416">(Sep 14 2021 at 14:09)</a>:</h4>
<p><span class="user-mention" data-user-id="387244">@Yaël Dillies</span> Ah good, you're generalising <code>nat_floor</code> to semirings?</p>



<a name="253257564"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/253257564" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#253257564">(Sep 14 2021 at 14:10)</a>:</h4>
<p>Yes. This was waiting for <code>has_ordered_sub</code> to come into existence, and it did. So I could come back to it, but I'm already very busy with locally finite orders and successor orders.</p>



<a name="253257623"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/253257623" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#253257623">(Sep 14 2021 at 14:11)</a>:</h4>
<p>It would help me, indeed (I was able to make it do in a couple of cases, but if you're building a general API it will be better): that being said, I can survive for the time being, so take it easy! <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span></p>



<a name="253257838"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/253257838" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#253257838">(Sep 14 2021 at 14:12)</a>:</h4>
<p>(btw if anyone wants to merge <a href="https://github.com/leanprover-community/mathlib/issues/9119">#9119</a> or another one of my PRs, that'll make my life easier <span aria-label="innocent" class="emoji emoji-1f607" role="img" title="innocent">:innocent:</span> )</p>



<a name="253258334"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/253258334" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#253258334">(Sep 14 2021 at 14:14)</a>:</h4>
<p>As a second thought, I think I can unify <code>nat_floor</code> and <code>floor</code> once we have <code>succ_order</code>. <code>floor</code>and <code>nat_floor</code> are basically thin wrappers around <code>galois_connection</code> (but specialized ones) and their main uses come from the fact that <code>n + 1</code> is the smallest thing bigger than <code>n</code>, which is the gist of <code>succ_order</code>.</p>



<a name="253258449"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/253258449" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#253258449">(Sep 14 2021 at 14:15)</a>:</h4>
<p>Your love for Galois connections at its best...</p>



<a name="253258875"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/253258875" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#253258875">(Sep 14 2021 at 14:18)</a>:</h4>
<p>Or maybe <code>nat_floor</code>/<code>floor</code> should stay as they are because one of the adjoints is <code>nat.cast</code>/<code>int.cast</code>.</p>



<a name="253259139"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/253259139" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#253259139">(Sep 14 2021 at 14:19)</a>:</h4>
<p>As a mathematician, I would say that not having <code>floor</code> because <code>succ_order</code> takes care of it would sound strange, even if it makes perfect sense in Lean. But I might be too old-minded...</p>



<a name="253259513"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/253259513" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#253259513">(Sep 14 2021 at 14:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/267928-condensed-mathematics/topic/thm.2069/near/253258875">said</a>:</p>
<blockquote>
<p>Or maybe <code>nat_floor</code>/<code>floor</code> should stay as they are because one of the adjoints is <code>nat.cast</code>/<code>int.cast</code>.</p>
</blockquote>
<p>I think they should stay. But it would be good if <code>nat_floor</code> works for semirings.</p>



<a name="253259531"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/253259531" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#253259531">(Sep 14 2021 at 14:21)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> I will try to push something a bit later to show how things look like staying in <code>nnreal</code> as much as possible.</p>



<a name="253259690"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/253259690" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#253259690">(Sep 14 2021 at 14:22)</a>:</h4>
<p>That's not quite what I meant. I meant that what makes <code>floor</code> interesting is that:</p>
<ol>
<li>It is the lower adjoint of the coercion <code>ℤ → α</code>.</li>
<li><code>ℤ</code> is a <code>succ_order</code>.</li>
</ol>
<p>and what makes <code>nat_floor</code> interesting is that:</p>
<ol>
<li>It is the lower adjoint of the coercion <code>ℕ → α</code>.</li>
<li><code>ℕ</code> is a <code>succ_order</code>.</li>
</ol>
<p>Those are very much the same thing, except that their common generalization would need to take the coercion as an explicit argument, which I think is not worth it.</p>



<a name="253644695"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/253644695" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#253644695">(Sep 16 2021 at 20:20)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> I am now at the point where specializing <code>r'=1/2</code> (or actually, <code>r'=a/b : rat</code> (positive and smaller than 1) would make my life easier. I confess that it was not completely clear to me to what extent this won't be a problem .</p>



<a name="253645493"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/253645493" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#253645493">(Sep 16 2021 at 20:26)</a>:</h4>
<p>I would believe that the fact that <code>r'=a/b : rat</code> is OK makes the whole argument work, since we can use arbitrary small <code>r'</code>. At any rate, is this version enough, on your opinion?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">θ_surj</span> <span class="o">(</span><span class="n">r'</span> <span class="o">:</span> <span class="n">ℚ</span><span class="o">)</span> <span class="o">[</span><span class="n">fact</span> <span class="o">(</span><span class="n">r'</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">)]</span> <span class="o">[</span><span class="n">fact</span> <span class="o">(</span><span class="n">r'</span> <span class="bp">&lt;</span> <span class="mi">1</span><span class="o">)]</span>  <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span><span class="o">)</span> <span class="o">[</span><span class="n">fact</span> <span class="o">(</span><span class="n">r</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)]</span> <span class="o">[</span><span class="n">fact</span> <span class="o">(</span><span class="n">r</span> <span class="bp">&lt;</span> <span class="mi">1</span><span class="o">)]</span>  <span class="o">(</span><span class="n">h_rr'</span> <span class="o">:</span> <span class="n">r'</span> <span class="bp">&lt;</span> <span class="n">r</span><span class="o">):</span>
<span class="bp">∀</span> <span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="n">laurent_measures</span> <span class="n">r</span> <span class="o">(</span><span class="n">Fintype.of</span> <span class="n">punit</span><span class="o">)),</span> <span class="o">(</span><span class="n">θ</span> <span class="n">r'</span> <span class="n">r</span> <span class="n">F</span><span class="o">)</span> <span class="bp">=</span> <span class="n">x</span> <span class="o">:=</span>
</code></pre></div>
<p>Here <code>θ</code> takes an <code>F</code> which is <code>r</code>-convergent and evaluates <code>T</code> to <code>r'</code>.</p>



<a name="253683912"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/253683912" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#253683912">(Sep 17 2021 at 03:24)</a>:</h4>
<p><span class="user-mention" data-user-id="300245">@Filippo A. E. Nuccio</span> Yes, feel free to specialize to a rational number, or even <code>1/2</code> when you really start needing it.</p>



<a name="253684062"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/253684062" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#253684062">(Sep 17 2021 at 03:27)</a>:</h4>
<p>It's not clear to me whether <code>laurent_measures r (Fintype.of punit)</code> is the best way to talk about <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">Z</mi><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mi>T</mi><mo stretchy="false">)</mo><msub><mo stretchy="false">)</mo><mi>r</mi></msub></mrow><annotation encoding="application/x-tex">\Z((T))_r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathbb">Z</span><span class="mopen">((</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mclose">)</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>. It's quite a mouthful, and it means that you will always have to evaluate at <code>punit.star</code>.</p>



<a name="253684121"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/253684121" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#253684121">(Sep 17 2021 at 03:28)</a>:</h4>
<p>It might be worth it to build the ring <code>convergernt_laurent_series r</code></p>



<a name="253706359"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/253706359" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#253706359">(Sep 17 2021 at 08:13)</a>:</h4>
<p>Thanks for the answer about <code>r'</code>!</p>



<a name="253706474"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/253706474" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#253706474">(Sep 17 2021 at 08:14)</a>:</h4>
<p>Concerning <code>laurent_measures r (Fintype.of punit)</code>It is a indeed mouthful, you're right, but it felt to me more in the spirit of condensed Math. I'm happy at any rate to build <code>convergent_laurent_series r</code>: this is basically what the construction  <code>def laurent_measures.to_Rfct</code> tries to do, so I just need to build the type out of it. But just to be clear, do you simply want to create the type of <code>laurent_measures</code> evaluated at <code>r</code> (together with a <code>comm_ring</code> instance) or do you think we'll need to show an iso with a subring of the Laurent series as now in <code>mathlib</code>?</p>



<a name="253709075"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/253709075" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#253709075">(Sep 17 2021 at 08:39)</a>:</h4>
<p>I haven't yet thought about that too much</p>



<a name="253709094"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/253709094" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#253709094">(Sep 17 2021 at 08:39)</a>:</h4>
<p>Maybe just continue working with the <code>punit</code> thingy for now.</p>



<a name="253709223"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/253709223" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#253709223">(Sep 17 2021 at 08:40)</a>:</h4>
<p>OK, it will be easy to modify later - thanks.</p>



<a name="255596766"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/255596766" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#255596766">(Sep 30 2021 at 15:46)</a>:</h4>
<p>Finally this</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">has_sum_x</span> <span class="o">:</span> <span class="n">has_sum</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">i</span><span class="o">,</span> <span class="o">(</span><span class="bp">⌊</span><span class="o">(((</span><span class="n">y</span> <span class="n">ξ</span> <span class="n">x</span> <span class="n">i</span><span class="o">)</span> <span class="bp">/</span> <span class="n">ξ</span> <span class="bp">^</span> <span class="n">i</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span><span class="bp">⌋</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">ξ</span> <span class="bp">^</span> <span class="n">i</span><span class="o">))</span> <span class="n">x</span>
</code></pre></div>
<p>is sorry-free in thm71</p>



<a name="255598501"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/255598501" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#255598501">(Sep 30 2021 at 15:56)</a>:</h4>
<p>Wonderful! That was quite an adventure (-;</p>



<a name="255598571"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/255598571" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#255598571">(Sep 30 2021 at 15:56)</a>:</h4>
<p>Yeah, sorry it took that long. I am now properly stating that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span></span></span></span> is surjective.</p>



<a name="255598588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/255598588" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#255598588">(Sep 30 2021 at 15:56)</a>:</h4>
<p>You should push your TeX write up to the blueprint repo!</p>



<a name="255598619"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/255598619" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#255598619">(Sep 30 2021 at 15:57)</a>:</h4>
<p>Do you have write access already?</p>



<a name="255598706"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/255598706" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#255598706">(Sep 30 2021 at 15:57)</a>:</h4>
<p>Ok, I will (I think I have access, I kind of remember I have once modified a comma or a misprint - I will check later).</p>



<a name="255601811"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/255601811" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#255601811">(Sep 30 2021 at 16:16)</a>:</h4>
<p>BTW: How do I create a <code>def</code> with dot notation in a <code>namespace</code>? The def<code>laurent_measures.to_Rfct</code> used to work (so that <code>F.to_Rfct</code> was accepted) as long as everything was (wrongly) in <code>_root_</code> by now that everything is in the namespace <code>thm71</code> it is not recognized. It must be a stupid tweak but I can't figure out how to make it work.</p>



<a name="255606371"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/255606371" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#255606371">(Sep 30 2021 at 16:43)</a>:</h4>
<p><span class="user-mention" data-user-id="300245">@Filippo A. E. Nuccio</span> Well, not everything was wrongly in <code>_root_</code> apparently.</p>



<a name="255606545"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/255606545" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#255606545">(Sep 30 2021 at 16:44)</a>:</h4>
<p><a href="#narrow/stream/267928-condensed-mathematics/topic/import.20clash.3F/near/255430475">https://leanprover.zulipchat.com/#narrow/stream/267928-condensed-mathematics/topic/import.20clash.3F/near/255430475</a> showed that certain pretty generic names were ending up in <code>_root_</code>. Those needed to be put in a namespace.</p>



<a name="255616446"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/255616446" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#255616446">(Sep 30 2021 at 17:43)</a>:</h4>
<p>Ah, I see: you mean that only generic ones need to be "protected"  by something particular, like laurent_measures.blabla does not and it is safer to put it in <code>_root_</code>?</p>



<a name="255617438"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/255617438" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#255617438">(Sep 30 2021 at 17:49)</a>:</h4>
<p>It's not safer to put them in <code>_root_</code> but it's safe enough. And the big upshot is that it will make dot-notation work again.</p>



<a name="255625363"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/255625363" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#255625363">(Sep 30 2021 at 18:35)</a>:</h4>
<p>Can't you simply append <code>thm71</code>? Or is the problem that you need the same def accross different theorem namespaces?</p>



<a name="255625476"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/255625476" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#255625476">(Sep 30 2021 at 18:35)</a>:</h4>
<p>I tried but somewhat could not make it work. I certainly don't need the same def across different namespaces.</p>



<a name="255658811"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/255658811" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#255658811">(Sep 30 2021 at 22:27)</a>:</h4>
<p>The</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">θ_surjective</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span><span class="o">)</span> <span class="o">[</span><span class="n">fact</span> <span class="o">(</span><span class="n">r</span> <span class="bp">&lt;</span> <span class="mi">1</span><span class="o">)]</span> <span class="o">[</span><span class="n">fact</span> <span class="o">(</span><span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">ξ</span><span class="o">)]</span> <span class="o">[</span><span class="n">fact</span> <span class="o">(</span><span class="n">ξ</span> <span class="bp">&lt;</span> <span class="mi">1</span><span class="o">)]</span>  <span class="o">:</span>
<span class="bp">∃</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="n">laurent_measures</span> <span class="n">r</span> <span class="o">(</span><span class="n">Fintype.of</span> <span class="n">punit</span><span class="o">)),</span> <span class="o">(</span><span class="n">θ</span> <span class="n">ξ</span> <span class="n">r</span> <span class="n">F</span><span class="o">)</span> <span class="bp">=</span> <span class="n">x</span> <span class="o">:=</span>
</code></pre></div>
<p>is also sorry-free. <span class="user-mention" data-user-id="112680">@Johan Commelin</span> : would you agree in deleting the first lines (15 to 55) with the "old" approach?</p>



<a name="255663747"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/255663747" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#255663747">(Sep 30 2021 at 23:11)</a>:</h4>
<p>This is great! But I'm a little confused -- where can I find the assumption that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ξ</mi><mo>&lt;</mo><mi>r</mi></mrow><annotation encoding="application/x-tex">\xi &lt; r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.04601em;">ξ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span></span></span></span>?</p>



<a name="255663784"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/255663784" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#255663784">(Sep 30 2021 at 23:11)</a>:</h4>
<p>(I assume <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ξ</mi></mrow><annotation encoding="application/x-tex">\xi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.04601em;">ξ</span></span></span></span> corresponds to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>r</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></mrow><annotation encoding="application/x-tex">r&#x27;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.751892em;vertical-align:0em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span> from Analytic.pdf?)</p>



<a name="255682666"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/255682666" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#255682666">(Oct 01 2021 at 03:02)</a>:</h4>
<p>Oh, I guess that assumption is not needed for the surjectivity. Nice! (I suppose we will need this when we go to prove that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span></span></span></span> is a morphism.</p>



<a name="255687845"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/255687845" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#255687845">(Oct 01 2021 at 04:19)</a>:</h4>
<p><span class="user-mention" data-user-id="300245">@Filippo A. E. Nuccio</span> Great work!</p>
<p>And yes, those lines 15-55 can now be removed. How about <code>src/laurent_measures/thm69_bad.lean</code>? Do you want to keep that around?</p>



<a name="255704867"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/255704867" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#255704867">(Oct 01 2021 at 07:56)</a>:</h4>
<p>If that is not a problem, I'd like to keep it around until we/I finish the  construction of the SES, because there were some ideas there which might be relevant. I will delete it at that point.</p>



<a name="255704888"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/255704888" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#255704888">(Oct 01 2021 at 07:56)</a>:</h4>
<p>I am also removing the lines in question.</p>



<a name="255705016"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/255705016" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#255705016">(Oct 01 2021 at 07:57)</a>:</h4>
<p><span class="user-mention" data-user-id="243562">@Adam Topaz</span>  Yes, indeed: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ξ</mi></mrow><annotation encoding="application/x-tex">\xi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.04601em;">ξ</span></span></span></span> is the <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>r</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></mrow><annotation encoding="application/x-tex">r&#x27;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.751892em;vertical-align:0em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span> (when discussing with <span class="user-mention" data-user-id="112680">@Johan Commelin</span>  it was a bit of an headache to distinguish the two, so I picked up a different name); and the assumption <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mi>i</mi><mo>&lt;</mo><mi>r</mi></mrow><annotation encoding="application/x-tex">xi &lt; r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69862em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">x</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span></span></span></span> is not needed for surjectivity, since the series surjecting to any given <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span> can be chosen to converge on the whole open unit disk.</p>



<a name="255710579"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/255710579" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#255710579">(Oct 01 2021 at 08:47)</a>:</h4>
<p>OK, I am now trying to set up the route to produce the SES. I think that we still need the</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="o">:</span> <span class="n">comphaus_filtered_pseudo_normed_group</span> <span class="n">ℝ</span> <span class="o">:=</span>
</code></pre></div>
<p>bcause the <code>apply_instance</code> doesn't find anything for <code>ℝ</code>. And then the second point will be to prove the </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">foo</span> <span class="o">:</span> <span class="n">comphaus_filtered_pseudo_normed_group_hom</span> <span class="n">θ</span>
</code></pre></div>
<p><span class="user-mention" data-user-id="243562">@Adam Topaz</span> <span class="user-mention" data-user-id="112680">@Johan Commelin</span> can you confirm these are the next steps?What troubles me is that at a certain point we will need to move away from <code>laurent_measures</code> supported on the singleton to general profinite <code>S</code> but I can't see when.</p>



<a name="255711104"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/255711104" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#255711104">(Oct 01 2021 at 08:51)</a>:</h4>
<p>We need a map from <code>laurent_measures r S</code> to <code>real_measure p S</code>, right? So why would you need</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="o">:</span> <span class="n">comphaus_filtered_pseudo_normed_group</span> <span class="n">ℝ</span> <span class="o">:=</span>
</code></pre></div>



<a name="255711223"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/255711223" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#255711223">(Oct 01 2021 at 08:52)</a>:</h4>
<p>I don't think we <em>actually</em> need the map <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Z</mi><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mi>T</mi><mo stretchy="false">)</mo><msub><mo stretchy="false">)</mo><mi>r</mi></msub><mo>→</mo><mi mathvariant="normal">R</mi></mrow><annotation encoding="application/x-tex">ℤ((T))_r → ℝ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord amsrm">Z</span><span class="mopen">((</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mclose">)</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord amsrm">R</span></span></span></span>. I'm suggesting we move on to the modules right away.</p>



<a name="255711255"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/255711255" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#255711255">(Oct 01 2021 at 08:52)</a>:</h4>
<p>Ah, I see - I guess this is the point.</p>



<a name="255711516"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/255711516" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#255711516">(Oct 01 2021 at 08:54)</a>:</h4>
<p>Are you suggesting that we construct the right arrow in </p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mn>0</mn><mo>→</mo><mi mathvariant="script">M</mi><mo stretchy="false">(</mo><mi>S</mi><mo separator="true">,</mo><mi mathvariant="double-struck">Z</mi><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mi>T</mi><mo stretchy="false">)</mo><msub><mo stretchy="false">)</mo><msup><mi>r</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></msub><mo stretchy="false">)</mo><mover><mo stretchy="true" minsize="3.0em">→</mo><mpadded width="+0.6em" lspace="0.3em"><mrow><mo>⋅</mo><msub><mi>f</mi><mi>x</mi></msub></mrow></mpadded></mover><mi mathvariant="script">M</mi><mo stretchy="false">(</mo><mi>S</mi><mo separator="true">,</mo><mi mathvariant="double-struck">Z</mi><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mi>T</mi><mo stretchy="false">)</mo><msub><mo stretchy="false">)</mo><msup><mi>r</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></msub><mo stretchy="false">)</mo><mo>→</mo><msub><mi mathvariant="script">M</mi><msup><mi>p</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></msub><mo stretchy="false">(</mo><mi>S</mi><mo stretchy="false">)</mo><mo>→</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">0 \to \mathcal M(S, \Z((T))_{r&#x27;}) \xrightarrow{\cdot f_x} \mathcal M(S, \Z((T))_{r&#x27;}) \to \mathcal M_{p&#x27;}(S) \to 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.3581079999999999em;vertical-align:-0.25em;"></span><span class="mord mathcal">M</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathbb">Z</span><span class="mopen">((</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mclose">)</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32797999999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828285714285715em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel x-arrow"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1081079999999999em;"><span style="top:-3.322em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight x-arrow-pad"><span class="mord mtight"><span class="mord mtight">⋅</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.16454285714285719em;"><span style="top:-2.357em;margin-left:-0.10764em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span><span class="svg-align" style="top:-2.689em;"><span class="pstrut" style="height:2.7em;"></span><span class="hide-tail" style="height:0.522em;min-width:1.469em;"><svg xmlns="http://www.w3.org/2000/svg" width='400em' height='0.522em' viewBox='0 0 400000 522' preserveAspectRatio='xMaxYMin slice'><path d='M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.010999999999999899em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathcal">M</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathbb">Z</span><span class="mopen">((</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mclose">)</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32797999999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828285714285715em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathcal">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32798em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828285714285715em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span></span></p>
<p>and prove its surjectivity as first step? And this for every profinite <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span></span>?</p>



<a name="255711947"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/255711947" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#255711947">(Oct 01 2021 at 08:58)</a>:</h4>
<p>I guess we first do it for finite <code>S</code>, and hopefully magic will extend it to profinite <code>S</code>.</p>



<a name="255712018"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/255712018" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#255712018">(Oct 01 2021 at 08:58)</a>:</h4>
<p>OK, good; also because I was looking at the file <code>real_measures</code> and there <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span></span> always seems to be a <code>Fintype</code>.</p>



<a name="255748383"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/255748383" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#255748383">(Oct 01 2021 at 14:00)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/267928-condensed-mathematics/topic/thm.2069/near/255711947">said</a>:</p>
<blockquote>
<p>I guess we first do it for finite <code>S</code>, and hopefully magic will extend it to profinite <code>S</code>.</p>
</blockquote>
<p>FWIW: "Magic" = <code>Profinite.extend_nat_trans</code> in <code>for_mathlib/Profinite/extend.lean</code></p>



<a name="255748550"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/255748550" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#255748550">(Oct 01 2021 at 14:00)</a>:</h4>
<p><span class="user-mention" data-user-id="243562">@Adam Topaz</span> But will that also extend the fact that it is an epi?</p>



<a name="255748576"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/255748576" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#255748576">(Oct 01 2021 at 14:00)</a>:</h4>
<p>So to use it we would need to show <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span></span></span></span> is natural in <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span></span></p>



<a name="255748590"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/255748590" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#255748590">(Oct 01 2021 at 14:00)</a>:</h4>
<p>No, proving it's an epi will require more work</p>



<a name="255748660"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/255748660" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#255748660">(Oct 01 2021 at 14:01)</a>:</h4>
<p>We need a version that extends SES's, I think.</p>



<a name="255748747"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/255748747" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#255748747">(Oct 01 2021 at 14:01)</a>:</h4>
<p>Well, in general there would be a <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mrow><mi>lim</mi><mo>⁡</mo></mrow><mn>1</mn></msup></mrow><annotation encoding="application/x-tex">\lim^1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8984479999999999em;vertical-align:0em;"></span><span class="mop"><span class="mop">lim</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8984479999999999em;"><span style="top:-3.1473400000000002em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span> term?</p>



<a name="255749031"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/255749031" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#255749031">(Oct 01 2021 at 14:03)</a>:</h4>
<p>Hmmz, you mean we need to do some actual maths again? <span aria-label="rofl" class="emoji emoji-1f923" role="img" title="rofl">:rofl:</span></p>



<a name="256481365"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/256481365" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#256481365">(Oct 06 2021 at 20:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="300245">Filippo A. E. Nuccio</span> <a href="#narrow/stream/267928-condensed-mathematics/topic/thm.2069/near/253257416">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> Ah good, you're generalising <code>nat_floor</code> to semirings?</p>
</blockquote>
<p>I am now working on this.</p>



<a name="257190556"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/257190556" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#257190556">(Oct 12 2021 at 12:00)</a>:</h4>
<p>I am trying to have a look at Prop 7.2, as I believe that it will be crucial for uploading <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span></span></span></span> to a <code>comp_haus_blabla</code> morphism.  I have a small doubt about point (3), is <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>g</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">g(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span> the evaluation of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>g</mi></mrow><annotation encoding="application/x-tex">g</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span></span></span></span> at <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span> (so, what it is called <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>θ</mi><mi>x</mi></msub><mo stretchy="false">(</mo><mi>g</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\theta_x(g)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mclose">)</span></span></span></span> in Thm 6.9?)</p>



<a name="257191069"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/257191069" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#257191069">(Oct 12 2021 at 12:05)</a>:</h4>
<p>Yup, that seems to make sense.</p>



<a name="257191292"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/257191292" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#257191292">(Oct 12 2021 at 12:06)</a>:</h4>
<p>Note that what we really want is a nonexisting Prop 7.2' which does everything for spaces of measures (instead of the base rings)</p>



<a name="257191348"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/257191348" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#257191348">(Oct 12 2021 at 12:07)</a>:</h4>
<p>But this should hopefully be a straightforward adaptation of Prop 7.2</p>



<a name="257192079"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/257192079" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#257192079">(Oct 12 2021 at 12:14)</a>:</h4>
<p>Do you mean Thm 6.9 (2) or something more?</p>



<a name="257192189"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/257192189" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#257192189">(Oct 12 2021 at 12:15)</a>:</h4>
<p>No, that's what I mean.</p>



<a name="257192604"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/257192604" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#257192604">(Oct 12 2021 at 12:18)</a>:</h4>
<p>Ok, thanks.</p>



<a name="259147157"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/259147157" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#259147157">(Oct 26 2021 at 19:16)</a>:</h4>
<p>I have just pushed a possible approach to the SES of Theorem 6.9. I don't know if it is the best one, and comments are welcome!</p>



<a name="259147161"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/259147161" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#259147161">(Oct 26 2021 at 19:16)</a>:</h4>
<p>Two major points that I see are:<br>
1) Although I am happy to work purely with abelian groups, the definition of the first map in the SES is "multiplication by a generator of  <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi mathvariant="normal">k</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">r</mi></mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">\mathrm{ker}\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord"><span class="mord mathrm">ker</span></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span></span></span></span>". I think it would be reasonable to add an</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="o">:</span> <span class="n">has_scalar</span> <span class="o">(</span><span class="n">laurent_measures</span> <span class="n">r</span> <span class="o">(</span><span class="n">Fintype.of</span> <span class="n">punit</span><span class="o">))</span> <span class="o">(</span><span class="n">laurent_measures</span> <span class="n">r</span> <span class="n">S</span><span class="o">)</span>  <span class="o">:=</span>
</code></pre></div>
<p>and this is currently done on line 364. It is quite straightforward, the only nasty thing is that we need to prove that this is actually a <code>CompHausFiltPseuNormGroup</code> action (so, additive, sending <code>0</code> to <code>0</code> and respecting filtration+topology). The other option would be to "explicitely describe" this multiplication, by noting that the above generator is something like <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo>−</mo><mi>ξ</mi></mrow><annotation encoding="application/x-tex">T-\xi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.04601em;">ξ</span></span></span></span> (or perhaps <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo>−</mo><msup><mi>ξ</mi><mrow><mo>−</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">T-\xi^{-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.008548em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.04601em;">ξ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span>), but I believe that this would not be much cheaper, the above four conditions would still need to be checked.<br>
2) I was unable to find an <code>instance</code> that the category <code>CompHausFiltPseuNormGrp</code> has kernels, zeroes and images. Am I right or did I look at the wrong places?</p>



<a name="259147191"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/259147191" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#259147191">(Oct 26 2021 at 19:16)</a>:</h4>
<p>I think I am done for tonight, but will resume working on this tomorrow.</p>



<a name="259265022"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/259265022" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#259265022">(Oct 27 2021 at 16:20)</a>:</h4>
<p>I have just pushed some more material towards the SES of Thm6.9. <span class="user-mention" data-user-id="112680">@Johan Commelin</span>  can you confirm that its current formulation (l.  67 of <code>thm69.lean</code>) is what you had in mind?</p>



<a name="259268848"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/259268848" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#259268848">(Oct 27 2021 at 16:44)</a>:</h4>
<p><span class="user-mention" data-user-id="300245">@Filippo A. E. Nuccio</span> Yes, that's looking good! Even though I had in mind just an unbundled version.</p>



<a name="259268884"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/259268884" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#259268884">(Oct 27 2021 at 16:45)</a>:</h4>
<p>I would do the bundling afterwards, I think.</p>



<a name="259268969"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/259268969" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#259268969">(Oct 27 2021 at 16:45)</a>:</h4>
<p>Note that <code>add_monoid_hom.mk'</code> allows you to skip the <code>map_zero'</code> field. That might be a useful intermediate step when constructing a comphausly_hom</p>



<a name="259272775"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/259272775" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#259272775">(Oct 27 2021 at 17:10)</a>:</h4>
<p>Thanks! But what do you mean by "unbundled version"?</p>



<a name="259272886"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/259272886" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#259272886">(Oct 27 2021 at 17:10)</a>:</h4>
<p>Also, do you agree that the <code>has_scalar</code> instance is needed to define multiplication by a generator of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ker</mi><mo>⁡</mo><mi>θ</mi></mrow><annotation encoding="application/x-tex">\ker\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mop">ker</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span></span></span></span>? Or do you have another approach in mind?</p>



<a name="259273006"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/259273006" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#259273006">(Oct 27 2021 at 17:11)</a>:</h4>
<p>unbundled = without categories.</p>



<a name="259273134"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/259273134" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#259273134">(Oct 27 2021 at 17:12)</a>:</h4>
<p>So just define the maps ad comphausly_homs. And then show that they compose to <code>0</code>. For <code>im = ker</code> we will maybe need to define what <code>im</code> and <code>ker</code> mean in this context.</p>



<a name="259273141"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/259273141" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#259273141">(Oct 27 2021 at 17:12)</a>:</h4>
<p>Ah, really in that sense? But there is no def of a SES without categories, no?</p>



<a name="259273198"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/259273198" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#259273198">(Oct 27 2021 at 17:12)</a>:</h4>
<p>Sure, so getting an actual SES will happen in the bundling step.</p>



<a name="259273205"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/259273205" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#259273205">(Oct 27 2021 at 17:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/267928-condensed-mathematics/topic/thm.2069/near/259273134">said</a>:</p>
<blockquote>
<p>So just define the maps ad comphausly_homs. And then show that they compose to <code>0</code>. For <code>im = ker</code> we will maybe need to define what <code>im</code> and <code>ker</code> mean in this context.</p>
</blockquote>
<p>Ah ok, I see. OK, I'll go for that.</p>



<a name="259273247"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/259273247" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#259273247">(Oct 27 2021 at 17:13)</a>:</h4>
<p>But that step should just call to 5 earlier results, instead of inlining the proofs.</p>



<a name="259273304"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/259273304" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#259273304">(Oct 27 2021 at 17:13)</a>:</h4>
<p>OKOK, got it.</p>



<a name="259273420"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/259273420" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#259273420">(Oct 27 2021 at 17:14)</a>:</h4>
<p>Thanks.</p>



<a name="259301450"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/259301450" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#259301450">(Oct 27 2021 at 20:26)</a>:</h4>
<p>I was trying to use the <code>add_monoid_hom.mk'</code> def,  but I am unable to: in tactic mode, I get five fields to be filled in. Did you mean that I should first prove that my map is a <code>add_monoid_hom</code> with  <code>add_monoid_hom.mk'</code> and then fill the <code>map_zero'</code> by simply using a field of the <code>add_monoid_hom</code> structure? I guess not, but cannot come up with anything smarter.</p>



<a name="259301828"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/259301828" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#259301828">(Oct 27 2021 at 20:29)</a>:</h4>
<p>something like</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">my_map_as_add_monoid_hom</span> <span class="o">:</span> <span class="n">blabla</span> <span class="o">:=</span>
<span class="n">add_monoid_hom.mk'</span> <span class="n">_</span> <span class="n">_</span>

<span class="kd">def</span> <span class="n">my_map_as_comphausly_thing</span> <span class="o">:</span> <span class="n">blabla</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">new_field1</span> <span class="o">:=</span> <span class="n">_</span><span class="o">,</span>
  <span class="bp">..</span> <span class="n">my_map_as_add_monoid_hom</span> <span class="o">}</span>
</code></pre></div>



<a name="259302107"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/259302107" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#259302107">(Oct 27 2021 at 20:31)</a>:</h4>
<p>Ah ok: so the two dots inside the bracket make lean understand that it should look for all the missing fields in <code>my_map_as_add_monoid_hom</code>?</p>



<a name="261793657"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/261793657" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#261793657">(Nov 17 2021 at 14:46)</a>:</h4>
<p>I have the feeling that specializing <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi><mo>=</mo><mn>1</mn><mi mathvariant="normal">/</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">\theta=1/2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1/2</span></span></span></span> slows down the computation: I have defined  <code>θ₂ r = θ (1 / 2) r</code>,  and things are really slow now. Is it possible or must the slowness come from something else?</p>



<a name="261796149"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/261796149" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#261796149">(Nov 17 2021 at 15:03)</a>:</h4>
<p>What is strange is that the orange bars on the right disappear almost immediately, and what now takes very long to be discharged are the ones on the left.</p>



<a name="261796347"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/261796347" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#261796347">(Nov 17 2021 at 15:04)</a>:</h4>
<p><span class="user-mention" data-user-id="300245">@Filippo A. E. Nuccio</span> Does the problem persist after compiling the full project?</p>



<a name="261796397"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/261796397" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#261796397">(Nov 17 2021 at 15:04)</a>:</h4>
<p>Yes, and it seems to be very localized to this file (all the other files  work perfectly)</p>



<a name="261796416"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/261796416" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#261796416">(Nov 17 2021 at 15:05)</a>:</h4>
<p>Hmm, frustrating</p>



<a name="261796443"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/261796443" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#261796443">(Nov 17 2021 at 15:05)</a>:</h4>
<p>I am now trying with another version of the lemma where I keep <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ξ</mi></mrow><annotation encoding="application/x-tex">\xi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.04601em;">ξ</span></span></span></span> as a variable</p>



<a name="261796508"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/261796508" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#261796508">(Nov 17 2021 at 15:05)</a>:</h4>
<p>Random weird idea. Would it help to use <code>def half := 1/ 2</code> and then only mention <code>half</code>? If that works, it would in some sense be quite sad.</p>



<a name="261796566"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/261796566" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#261796566">(Nov 17 2021 at 15:06)</a>:</h4>
<p>Let me try.</p>



<a name="261796733"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/261796733" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#261796733">(Nov 17 2021 at 15:07)</a>:</h4>
<p><code>def half := 1/ 2</code> is in <code>ℕ</code>, right?</p>



<a name="261796753"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/261796753" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#261796753">(Nov 17 2021 at 15:07)</a>:</h4>
<p>And it is probably <code>1</code></p>



<a name="261796787"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/261796787" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#261796787">(Nov 17 2021 at 15:07)</a>:</h4>
<p>Well, I did <code>def half := (1 / 2 : ℝ)</code></p>



<a name="261796893"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/261796893" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#261796893">(Nov 17 2021 at 15:08)</a>:</h4>
<p>(fixing a couple of errors, as soon as I have an answer I will report it)</p>



<a name="261796896"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/261796896" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#261796896">(Nov 17 2021 at 15:08)</a>:</h4>
<p>Another option along these lines is to keep a variable but also pass a hypothesis that it's equal to 1/2</p>



<a name="261797006"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/261797006" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#261797006">(Nov 17 2021 at 15:09)</a>:</h4>
<p>Like <code>variables (ξ : ℝ) [fact (ξ = 1/2 : ℝ)]</code>?</p>



<a name="261797091"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/261797091" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#261797091">(Nov 17 2021 at 15:09)</a>:</h4>
<p>Or just <code>(h : ξ = 1/2)</code></p>



<a name="261797187"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/261797187" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#261797187">(Nov 17 2021 at 15:10)</a>:</h4>
<p>OK, let me try.</p>



<a name="261798733"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/261798733" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#261798733">(Nov 17 2021 at 15:20)</a>:</h4>
<p>Well, as far as I can tell the problem does not come from the <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ξ</mi><mo>=</mo><mn>1</mn><mi mathvariant="normal">/</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">\xi= 1/2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.04601em;">ξ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1/2</span></span></span></span>: even leaving it as a variable and not specifying its value, my left bars still take very long to disappear. I will try to understand if the problem comes from somewhere else. Thanks for the suggestions, at any rate: it is somewhat a relief that the problem does not (seem to come from) specialising to a specific value.</p>



<a name="261890969"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/261890969" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#261890969">(Nov 18 2021 at 06:32)</a>:</h4>
<p>I can reproduce the slowness. Take the following snippet:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">θ_is_linear</span> <span class="o">(</span><span class="n">ξ</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_linear_map</span> <span class="n">ℤ</span> <span class="o">(</span><span class="n">θ</span> <span class="n">ξ</span> <span class="n">r</span><span class="o">)</span> <span class="o">:=</span> <span class="gr">sorry</span>

<span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">θ₂.to_linear</span> <span class="o">:</span> <span class="o">(</span><span class="n">laurent_measures</span> <span class="n">r</span> <span class="o">(</span><span class="n">Fintype.of</span> <span class="n">punit</span><span class="o">))</span> <span class="bp">→ₗ</span><span class="o">[</span><span class="n">ℤ</span><span class="o">]</span> <span class="n">ℝ</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">to_fun</span> <span class="o">:=</span> <span class="n">θ</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">/</span> <span class="mi">2</span><span class="o">)</span> <span class="n">r</span><span class="o">,</span>
  <span class="n">map_add'</span> <span class="o">:=</span> <span class="o">(</span><span class="n">θ_is_linear</span> <span class="n">r</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">/</span> <span class="mi">2</span><span class="o">))</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span>
  <span class="n">map_smul'</span> <span class="o">:=</span> <span class="o">(</span><span class="n">θ_is_linear</span> <span class="n">r</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">/</span> <span class="mi">2</span><span class="o">)</span> <span class="o">)</span><span class="bp">.</span><span class="mi">2</span> <span class="o">}</span>

<span class="kd">lemma</span> <span class="n">ker_θ₂_principal</span> <span class="o">:</span> <span class="n">submodule.is_principal</span> <span class="o">((</span><span class="n">θ₂.to_linear</span> <span class="n">r</span><span class="o">)</span><span class="bp">.</span><span class="n">ker</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="c1">-- constructor,</span>
  <span class="k">let</span> <span class="n">pos</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→</span> <span class="n">ℤ</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="o">(</span><span class="k">if</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">0</span> <span class="k">then</span> <span class="bp">-</span><span class="mi">1</span> <span class="k">else</span> <span class="k">if</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">1</span> <span class="k">then</span> <span class="mi">2</span> <span class="k">else</span> <span class="mi">0</span><span class="o">),</span>
  <span class="k">let</span> <span class="n">f₀</span> <span class="o">:</span> <span class="n">ℤ</span> <span class="bp">→</span> <span class="n">ℤ</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">d</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">,</span> <span class="n">int.rec_on</span> <span class="n">d</span> <span class="o">(</span><span class="n">pos</span><span class="o">)</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="mi">0</span><span class="o">),</span>
  <span class="n">use</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">s</span><span class="o">,</span> <span class="n">f₀</span><span class="o">),</span>
  <span class="gr">sorry</span><span class="o">,</span>
  <span class="n">ext</span><span class="o">,</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="n">swap</span><span class="o">,</span>
  <span class="gr">sorry</span><span class="o">,</span>
  <span class="gr">sorry</span><span class="o">,</span>
<span class="c1">--   intro h_x,</span>
<span class="c1">--   obtain ⟨a, h_ax⟩ := mem_span_singleton.mp h_x,</span>
<span class="c1">--   apply mem_ker.mpr,</span>
<span class="c1">--   rw ← h_ax,</span>
<span class="c1">--   -- squeeze_simp,</span>
<span class="c1">--   simp,</span>
<span class="c1">--   apply or.intro_right,</span>
<span class="c1">--   rw θ₂.to_linear,</span>
<span class="c1">--   -- rw θ.to_linear,</span>
<span class="c1">--   simp,</span>
<span class="c1">--   rw θ,</span>
<span class="c1">--   simp,</span>
<span class="c1">--   simp_rw [laurent_measures.to_Rfct],</span>
<span class="c1">--   let S : finset ℤ := {0, 1},</span>
<span class="c1">--   have hf : function.support f₀ ⊆ S, sorry,</span>
<span class="c1">--   have hf₀ : ∀ s ∉ S, ((f₀ s) : ℝ) * ((2 ^ s) : ℝ)⁻¹ = (0 : ℝ), sorry,</span>
<span class="c1">--   rw [tsum_eq_sum hf₀],</span>
<span class="c1">--   -- rw ← [has_sum_subtype_iff_of_support_subset hf],</span>
<span class="c1">--   sorry, sorry,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="261891005"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/261891005" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#261891005">(Nov 18 2021 at 06:33)</a>:</h4>
<p>That noncomputable def  <code>θ₂.to_linear</code> takes ~ 9s and the lemma <code>ker_θ₂_principal</code> ~7s.</p>



<a name="261898988"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/261898988" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#261898988">(Nov 18 2021 at 08:34)</a>:</h4>
<p>Any idea on why this happens?</p>



<a name="261899049"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/261899049" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#261899049">(Nov 18 2021 at 08:35)</a>:</h4>
<p>I have no clue. The profiler says that it's spending ages on elaboration. I have no idea how to debug this further.</p>



<a name="261899068"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/261899068" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#261899068">(Nov 18 2021 at 08:35)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> If you have some time to look into this, that would be great.</p>



<a name="261899188"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/261899188" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#261899188">(Nov 18 2021 at 08:36)</a>:</h4>
<p>Of course I can (=will!) improve the lemma, and its proof. But the definition looked quite innocent to me, and also somewhat necessary. Another option would be to immediately define <code>θ</code> as a <code>linear_map</code>, but would that be faster, on your opinion?</p>



<a name="261899254"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/261899254" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#261899254">(Nov 18 2021 at 08:37)</a>:</h4>
<p>Do you think it might be related to the fact that the <code>lemma θ_is_linear</code> is <code>sorry</code>ed?</p>



<a name="261904168"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/261904168" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#261904168">(Nov 18 2021 at 09:32)</a>:</h4>
<p>That shouldn't matter</p>



<a name="261904198"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/261904198" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#261904198">(Nov 18 2021 at 09:32)</a>:</h4>
<p>At this point, I really don't know where to look for the source of this problem</p>



<a name="261904537"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/261904537" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#261904537">(Nov 18 2021 at 09:36)</a>:</h4>
<p>Is it related to <a href="#narrow/stream/113488-general/topic/Slow.20elaboration.20-.20algebra/near/257774565">https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Slow.20elaboration.20-.20algebra/near/257774565</a> which we also never got to the bottom of?</p>



<a name="261905922"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/261905922" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#261905922">(Nov 18 2021 at 09:52)</a>:</h4>
<p>Hmm, could very well be.</p>



<a name="261906282"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/261906282" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#261906282">(Nov 18 2021 at 09:56)</a>:</h4>
<p>I am teaching now, but I will try to modify the original definition of <code>θ</code> to immediately define it as a <code>linear_map</code> this afternoon, to see if that changes something.</p>



<a name="261907175"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/261907175" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#261907175">(Nov 18 2021 at 10:05)</a>:</h4>
<p>(my logic is only that they're both "random algebra being slow")</p>



<a name="261961434"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/261961434" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#261961434">(Nov 18 2021 at 17:32)</a>:</h4>
<p>A small update: as <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span>  was rightly suggesting, there has basically been no improvement when changing the definition of <code>θ</code> as a <code>linear_map</code> instead of simply a <code>map</code>.  I have the feeling  that what is really slow is the  <code>submodule.is_principal ((θₗ r).ker)</code> whereas the rest is somewhat OK. I will try to remove the lemma and just keep the relevant computation, since at any rate we know an explicit generator.</p>



<a name="262125185"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/262125185" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#262125185">(Nov 19 2021 at 20:26)</a>:</h4>
<p>I might not have more time this afternoon to debug, gotta move on to a couple other things for now, but a couple preliminary notes:</p>
<ul>
<li>You have some slow searches for <code>module ℤ (laurent_measures r (Fintype.of punit))</code> toward the beginning. Adding this as a high priority instance helps a bit but not everywhere.</li>
<li>With <code>set_option trace.type_context.is_def_eq true</code> there are weird failures in various places (including the proof of <code>θ₂.to_linear</code>) of the form</li>
</ul>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="o">[</span><span class="n">type_context.is_def_eq</span><span class="o">]</span> <span class="n">summable</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">),</span> <span class="bp">↑|</span><span class="mi">0</span> <span class="bp">•</span> <span class="bp">⇑</span><span class="n">F</span> <span class="n">s</span> <span class="n">n</span><span class="bp">|</span> <span class="bp">*</span> <span class="bp">↑</span><span class="n">r</span> <span class="bp">^</span> <span class="n">n</span><span class="o">)</span> <span class="bp">=</span> <span class="n">summable</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">),</span> <span class="bp">|↑</span><span class="o">(</span><span class="mi">0</span> <span class="bp">•</span> <span class="bp">⇑</span><span class="n">F</span> <span class="n">s</span> <span class="n">n</span><span class="o">)</span><span class="bp">|</span> <span class="bp">*</span> <span class="bp">↑</span><span class="n">r</span> <span class="bp">^</span> <span class="n">n</span><span class="o">)</span> <span class="bp">=?=</span> <span class="n">summable</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">),</span> <span class="bp">↑|</span><span class="mi">0</span> <span class="bp">•</span> <span class="bp">⇑</span><span class="n">F</span> <span class="n">s</span> <span class="n">n</span><span class="bp">|</span> <span class="bp">*</span> <span class="bp">↑</span><span class="n">r</span> <span class="bp">^</span> <span class="n">n</span><span class="o">)</span> <span class="bp">=</span> <span class="n">summable</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">),</span> <span class="bp">↑|</span><span class="mi">0</span> <span class="bp">•</span> <span class="bp">⇑</span><span class="n">F</span> <span class="n">s</span> <span class="n">n</span><span class="bp">|</span> <span class="bp">*</span> <span class="bp">↑</span><span class="n">r</span> <span class="bp">^</span> <span class="n">n</span><span class="o">)</span> <span class="bp">...</span> <span class="n">failed</span>  <span class="o">(</span><span class="n">approximate</span> <span class="n">mode</span><span class="o">)</span>
</code></pre></div>
<p>I can't figure out where this is coming from but it seems like it could be slow.</p>
<ul>
<li>In <code>ker_θ₂_principal</code>, adding <code>fconstructor, fconstructor</code> before <code>use</code> cuts the compilation time in half. <code>use</code> uses <code>fconstructor</code> under the hood, but only after it fails to unify the input with the original goal. At least one of these failures must be very slow for some reason.</li>
</ul>



<a name="265897975"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/265897975" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#265897975">(Dec 23 2021 at 09:23)</a>:</h4>
<p>I will be away from my PC and my VSCode for 10 days or so, until 2022; the current status of theorem 6.9 is that I have finally managed to have all details written down on paper, and most of the lemmas are stated in the file, some sorryed out. The code is a bit of a mess, but I hope to be able to finish the full proof of Theorem 6.9 quite soon as soon as I will be back, and to polish the code afterwards.</p>



<a name="265898126"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/thm%2069/near/265898126" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/thm.2069.html#265898126">(Dec 23 2021 at 09:25)</a>:</h4>
<p>What will need to be done next is to state the exactness of the SES of Thm 6.9 in categorical terms; if nobody sees any obstruction, I would like to claim that part of the file as well, so as to get acquainted with the new categorical materials with which I have not worked much so far.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>