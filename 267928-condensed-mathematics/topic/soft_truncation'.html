---
layout: archive
title: Zulip Chat Archive
permalink: /stream/267928-condensed-mathematics/topic/soft_truncation'.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/index.html">condensed mathematics</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html">soft_truncation'</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="228652353"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228652353" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228652353">(Mar 03 2021 at 19:29)</a>:</h4>
<p>I've stubbed out <code>soft_truncation'</code> in <code>src/system_of_complexes/soft_truncation.lean</code>.</p>



<a name="228652499"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228652499" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228652499">(Mar 03 2021 at 19:30)</a>:</h4>
<p><span class="user-mention" data-user-id="130384">@Riccardo Brasca</span> once you have the universal property for the quotient, we should also bundle the quotient into a <code>NormedGroup</code> and then most of the sorrys in that file should be "easy" to fill in.</p>



<a name="228654634"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228654634" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228654634">(Mar 03 2021 at 19:42)</a>:</h4>
<p>Good! I hope this will not take too much</p>



<a name="228655448"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228655448" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228655448">(Mar 03 2021 at 19:47)</a>:</h4>
<p>Is this <code>(S : add_subgroup M) [is_closed (↑S : set M)]</code> the correct way of stating that <code>S</code> is closed in <code>M</code>?</p>



<a name="228655574"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228655574" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228655574">(Mar 03 2021 at 19:48)</a>:</h4>
<p>I don't think that <code>is_closed</code> is a class, so it should be <code>(hS : ...)</code> instead of <code>[]</code></p>



<a name="228659892"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228659892" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228659892">(Mar 03 2021 at 20:13)</a>:</h4>
<p>Do we know that the closure of a subgroup of a normed group is again a <del>subgroup</del> sub<code>NormedGroup</code>?</p>



<a name="228660226"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228660226" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228660226">(Mar 03 2021 at 20:15)</a>:</h4>
<p>This must be in mathlib right?</p>



<a name="228661508"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228661508" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228661508">(Mar 03 2021 at 20:23)</a>:</h4>
<p>For the submodule version, <a href="https://leanprover-community.github.io/mathlib_docs/find/submodule.topological_closure">docs#submodule.topological_closure</a></p>



<a name="228661605"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228661605" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228661605">(Mar 03 2021 at 20:24)</a>:</h4>
<p>There is less API for subgroups than submodules, but it shouldn't be hard to adapt the proof.</p>



<a name="228661829"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228661829" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228661829">(Mar 03 2021 at 20:25)</a>:</h4>
<p>Note that you just need that it's a subgroup -- the normed structure follows <a href="https://leanprover-community.github.io/mathlib_docs/find/add_subgroup.normed_group">docs#add_subgroup.normed_group</a></p>



<a name="228662572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228662572" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228662572">(Mar 03 2021 at 20:30)</a>:</h4>
<p>But for the "universal property" you need the kernel to be closed, right?</p>



<a name="228662714"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228662714" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228662714">(Mar 03 2021 at 20:31)</a>:</h4>
<p>Sorry, what I mean is that the quotient is a normed group only when the subgroup is closed.</p>



<a name="228662824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228662824" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228662824">(Mar 03 2021 at 20:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="243562">Adam Topaz</span> <a href="#narrow/stream/267928-condensed-mathematics/topic/soft_truncation'/near/228659892">said</a>:</p>
<blockquote>
<p>Do we know that the closure of a subgroup of a normed group is again a <del>subgroup</del> sub<code>NormedGroup</code>?</p>
</blockquote>
<p>I was responding to this part -- subgroup implies sub<code>NormedGroup</code>.</p>



<a name="228662854"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228662854" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228662854">(Mar 03 2021 at 20:31)</a>:</h4>
<p>Oh right, okay.</p>



<a name="228665519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228665519" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228665519">(Mar 03 2021 at 20:49)</a>:</h4>
<p>I modified the proof, and now we have a norm on the quotient by any closed subspace (in particular by the kernel), it the first lemma below.  If <code>is_closed</code> is not an instance, what I am supposed to write in <code>normed_group.mk</code> to let Lean know that  <code>(quotient S)</code> is a normed group?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="sd">/-- If `(m : M)` has norm equal to `0` in `quotient S` for a closed subgroup `S` of `M`, then</span>
<span class="sd">`m ∈ S`. -/</span>
<span class="kd">lemma</span> <span class="n">norm_zero_eq_zero</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">add_subgroup</span> <span class="n">M</span><span class="o">)</span> <span class="o">(</span><span class="n">hS</span> <span class="o">:</span> <span class="n">is_closed</span> <span class="o">(</span><span class="bp">↑</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">M</span><span class="o">))</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="n">M</span><span class="o">)</span>
  <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">∥</span><span class="o">(</span><span class="n">quotient_add_group.mk'</span> <span class="n">S</span><span class="o">)</span> <span class="n">m</span><span class="bp">∥</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">∈</span> <span class="n">S</span> <span class="o">:=</span> <span class="gr">sorry</span>

<span class="sd">/-- The norm on `quotient S` is actually a norm if `S` is a complete subgroup of `M`. -/</span>
<span class="kd">lemma</span> <span class="n">quotient.is_normed_group.core</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">add_subgroup</span> <span class="n">M</span><span class="o">)</span> <span class="o">(</span><span class="n">hS</span> <span class="o">:</span> <span class="n">is_closed</span> <span class="o">(</span><span class="bp">↑</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">M</span><span class="o">))</span> <span class="o">:</span>
  <span class="n">normed_group.core</span> <span class="o">(</span><span class="n">quotient</span> <span class="n">S</span><span class="o">)</span> <span class="o">:=</span> <span class="gr">sorry</span>

<span class="sd">/-- An instance of `normed_group` on the quotient by a subgroup. -/</span>
<span class="kd">noncomputable</span>
<span class="kd">instance</span> <span class="n">quotient_normed_group</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">add_subgroup</span> <span class="n">M</span><span class="o">)</span> <span class="o">(</span><span class="n">hS</span> <span class="o">:</span> <span class="n">is_closed</span> <span class="o">(</span><span class="bp">↑</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">M</span><span class="o">))</span> <span class="o">:</span>
  <span class="n">normed_group</span> <span class="o">(</span><span class="n">quotient</span> <span class="n">S</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">normed_group.of_core</span> <span class="o">(</span><span class="n">quotient</span> <span class="n">S</span><span class="o">)</span> <span class="o">(</span><span class="n">quotient.is_normed_group.core</span> <span class="n">S</span> <span class="n">hS</span><span class="o">)</span>

<span class="sd">/-- The canonical morphism `M → (quotient S)` as morphism of normed groups. -/</span>
<span class="kd">noncomputable</span>
<span class="kd">def</span> <span class="n">normed_group.mk</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">add_subgroup</span> <span class="n">M</span><span class="o">)</span> <span class="o">(</span><span class="n">hS</span> <span class="o">:</span> <span class="n">is_closed</span> <span class="o">(</span><span class="bp">↑</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">M</span><span class="o">))</span> <span class="o">:</span>
  <span class="n">normed_group_hom</span> <span class="n">M</span> <span class="o">(</span><span class="n">quotient</span> <span class="n">S</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">bound'</span> <span class="o">:=</span> <span class="o">⟨</span><span class="mi">1</span><span class="o">,</span> <span class="bp">λ</span> <span class="n">m</span><span class="o">,</span> <span class="kd">by</span> <span class="n">simpa</span> <span class="o">[</span><span class="n">one_mul</span><span class="o">]</span> <span class="n">using</span> <span class="n">norm_mk_le</span> <span class="n">_</span> <span class="n">m</span><span class="o">⟩,</span>
  <span class="bp">..</span><span class="n">quotient_add_group.mk'</span> <span class="n">S</span> <span class="o">}</span>
</code></pre></div>



<a name="228669312"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228669312" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228669312">(Mar 03 2021 at 21:12)</a>:</h4>
<p>I added the <code>has_shift</code> instance that was mentioned as a <code>TODO</code> in this file..</p>



<a name="228669921"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228669921" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228669921">(Mar 03 2021 at 21:16)</a>:</h4>
<p><span class="user-mention" data-user-id="130384">@Riccardo Brasca</span> what I envisioned in my ccomments above was to define <code>add_subgroup.closure</code>as a subgroup again, and take the quotient by that.</p>



<a name="228670922"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228670922" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228670922">(Mar 03 2021 at 21:23)</a>:</h4>
<p>Maybe we should introduce <code>closed_add_subgroup</code> extending <code>add_subgroup</code>?</p>



<a name="228671235"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228671235" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228671235">(Mar 03 2021 at 21:25)</a>:</h4>
<p>Ah you're right, it's probably the best thing to do!</p>



<a name="228671440"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228671440" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228671440">(Mar 03 2021 at 21:26)</a>:</h4>
<p>I have the impression that, categorically, the quotient exist by any subgroup, and it is the quotient by the closure</p>



<a name="228671462"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228671462" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228671462">(Mar 03 2021 at 21:26)</a>:</h4>
<p>Yes that's right</p>



<a name="228671515"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228671515" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228671515">(Mar 03 2021 at 21:27)</a>:</h4>
<p>The quotient by the closure is the largest quotient which is a normed group</p>



<a name="228671700"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228671700" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228671700">(Mar 03 2021 at 21:28)</a>:</h4>
<p>In any case, making <code>closed_add_subgroup</code> should be straightforward enough, even with a small API. We can then define the <code>closure</code> function as a function from <code>add_subgroup</code> to <code>closed_add_subgroup</code>, etc.</p>



<a name="228671716"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228671716" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228671716">(Mar 03 2021 at 21:28)</a>:</h4>
<p>There is even a Galois insertion between the two!</p>



<a name="228672493"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228672493" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228672493">(Mar 03 2021 at 21:33)</a>:</h4>
<p>I think I will stop for today, but if you want to continue feel free to use my proof</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="sd">/-- If `(m : M)` has norm equal to `0` in `quotient S` for a closed subgroup `S` of `M`, then</span>
<span class="sd">`m ∈ S`. -/</span>
<span class="kd">lemma</span> <span class="n">norm_zero_eq_zero</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">add_subgroup</span> <span class="n">M</span><span class="o">)</span> <span class="o">(</span><span class="n">hS</span> <span class="o">:</span> <span class="n">is_closed</span> <span class="o">(</span><span class="bp">↑</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">M</span><span class="o">))</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="n">M</span><span class="o">)</span>
  <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">∥</span><span class="o">(</span><span class="n">quotient_add_group.mk'</span> <span class="n">S</span><span class="o">)</span> <span class="n">m</span><span class="bp">∥</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">∈</span> <span class="n">S</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">choose</span> <span class="n">g</span> <span class="n">hg</span> <span class="n">using</span> <span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="o">(</span><span class="n">norm_mk_lt'</span> <span class="n">S</span> <span class="n">m</span> <span class="o">(</span><span class="bp">@</span><span class="n">nat.one_div_pos_of_nat</span> <span class="n">ℝ</span> <span class="n">_</span> <span class="n">n</span><span class="o">)),</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">h</span><span class="o">,</span> <span class="n">one_div</span><span class="o">,</span> <span class="n">zero_add</span><span class="o">]</span> <span class="n">at</span> <span class="n">hg</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">hconv</span> <span class="o">:</span> <span class="n">filter.tendsto</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="n">m</span> <span class="bp">+</span> <span class="n">g</span> <span class="n">n</span><span class="o">)</span> <span class="n">filter.at_top</span> <span class="o">(</span><span class="n">nhds</span> <span class="mi">0</span><span class="o">),</span>
  <span class="o">{</span> <span class="n">refine</span> <span class="n">metric.tendsto_at_top.2</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">ε</span> <span class="n">hε</span><span class="o">,</span> <span class="n">_</span><span class="o">),</span>
    <span class="n">obtain</span> <span class="o">⟨</span><span class="n">N</span><span class="o">,</span> <span class="n">hN</span><span class="o">⟩</span> <span class="o">:=</span> <span class="n">exists_nat_ge</span> <span class="n">ε</span><span class="bp">⁻¹</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">Npos</span> <span class="o">:=</span> <span class="n">lt_of_lt_of_le</span> <span class="o">(</span><span class="n">inv_pos.mpr</span> <span class="n">hε</span><span class="o">)</span> <span class="n">hN</span><span class="o">,</span>
    <span class="n">replace</span> <span class="n">hN</span> <span class="o">:=</span> <span class="o">(</span><span class="n">inv_le_inv</span> <span class="n">Npos</span> <span class="o">(</span><span class="n">inv_pos.mpr</span> <span class="n">hε</span><span class="o">))</span><span class="bp">.</span><span class="mi">2</span> <span class="n">hN</span><span class="o">,</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">inv_inv'</span><span class="o">]</span> <span class="n">at</span> <span class="n">hN</span><span class="o">,</span>
    <span class="n">refine</span> <span class="o">⟨</span><span class="n">N</span><span class="o">,</span> <span class="bp">λ</span> <span class="n">n</span> <span class="n">hn</span><span class="o">,</span> <span class="n">_</span><span class="o">⟩,</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">dist_eq_norm</span> <span class="n">_</span> <span class="n">_</span><span class="o">,</span> <span class="n">sub_zero</span><span class="o">],</span>
    <span class="k">have</span> <span class="n">npos</span> <span class="o">:=</span> <span class="n">lt_trans</span> <span class="o">(</span><span class="n">lt_of_lt_of_le</span> <span class="n">Npos</span> <span class="o">(</span><span class="n">nat.cast_le.2</span> <span class="o">(</span><span class="n">ge.le</span> <span class="n">hn</span><span class="o">)))</span> <span class="o">(</span><span class="n">lt_add_one</span> <span class="n">n</span><span class="o">),</span>
    <span class="n">replace</span> <span class="n">hn</span> <span class="o">:=</span> <span class="n">lt_of_le_of_lt</span> <span class="o">(</span><span class="n">ge.le</span> <span class="n">hn</span><span class="o">)</span> <span class="o">(</span><span class="n">lt_add_one</span> <span class="n">n</span><span class="o">),</span>
    <span class="k">have</span> <span class="n">hnε</span> <span class="o">:=</span> <span class="n">lt_of_lt_of_le</span> <span class="o">((</span><span class="n">inv_lt_inv</span> <span class="n">npos</span> <span class="n">Npos</span><span class="o">)</span><span class="bp">.</span><span class="mi">2</span> <span class="o">(</span><span class="n">nat.cast_lt.2</span> <span class="n">hn</span><span class="o">))</span> <span class="n">hN</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">lt_trans</span> <span class="o">(</span><span class="n">hg</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="mi">2</span> <span class="n">hnε</span> <span class="o">},</span>
  <span class="n">replace</span> <span class="n">hconv</span> <span class="o">:=</span> <span class="n">tendsto.add_const</span> <span class="o">(</span><span class="bp">-</span><span class="n">m</span><span class="o">)</span> <span class="n">hconv</span><span class="o">,</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">zero_add</span><span class="o">,</span> <span class="n">add_neg_cancel_comm</span><span class="o">]</span> <span class="n">at</span> <span class="n">hconv</span><span class="o">,</span>
  <span class="n">replace</span> <span class="n">hS</span> <span class="o">:=</span> <span class="n">mem_of_is_seq_closed</span> <span class="o">(</span><span class="n">is_seq_closed_iff_is_closed.2</span> <span class="n">hS</span><span class="o">)</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="o">(</span><span class="n">hg</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span><span class="o">)</span> <span class="n">hconv</span><span class="o">,</span>
  <span class="n">simpa</span> <span class="n">using</span> <span class="n">hS</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="228672607"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228672607" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228672607">(Mar 03 2021 at 21:34)</a>:</h4>
<p>Which branch is this in?</p>



<a name="228672658"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228672658" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228672658">(Mar 03 2021 at 21:34)</a>:</h4>
<p>I didn't pushed it, since it breaks the rest of the (small) API for quotients</p>



<a name="228672702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228672702" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228672702">(Mar 03 2021 at 21:35)</a>:</h4>
<p>Oh, why don't you push it into a new branch, and I'll try to play around with it</p>



<a name="228672718"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228672718" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228672718">(Mar 03 2021 at 21:35)</a>:</h4>
<p>That is now written with <code>[complete_space S]</code></p>



<a name="228672841"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228672841" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228672841">(Mar 03 2021 at 21:36)</a>:</h4>
<p>OK, I pushed to quotient_closed</p>



<a name="228673238"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228673238" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228673238">(Mar 03 2021 at 21:38)</a>:</h4>
<p><span class="user-mention" data-user-id="130384">@Riccardo Brasca</span> did you commit before pushing? the last commit in this branch was made by Johan.</p>



<a name="228673373"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228673373" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228673373">(Mar 03 2021 at 21:40)</a>:</h4>
<p>Done</p>



<a name="228673506"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228673506" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228673506">(Mar 03 2021 at 21:40)</a>:</h4>
<p>Got it! Thanks :)</p>



<a name="228674319"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228674319" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228674319">(Mar 03 2021 at 21:46)</a>:</h4>
<p><span class="user-mention silent" data-user-id="243562">Adam Topaz</span> <a href="#narrow/stream/267928-condensed-mathematics/topic/soft_truncation'/near/228670922">said</a>:</p>
<blockquote>
<p>Maybe we should introduce <code>closed_add_subgroup</code> extending <code>add_subgroup</code>?</p>
</blockquote>
<p>I wonder if you should instead make <code>is_closed</code> a class, it might be useful more generally, and then it could be used as a mixin rather than defining <code>closed_add_subgroup</code> directly, which might avoid diamonds at some later point.</p>



<a name="228674965"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228674965" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228674965">(Mar 03 2021 at 21:50)</a>:</h4>
<p>We can always use <code>fact (is_closed _)</code></p>



<a name="228675588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228675588" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228675588">(Mar 03 2021 at 21:55)</a>:</h4>
<p>Okay, <code>fact (is_closed ...)</code> seems to work well enough.</p>



<a name="228678393"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228678393" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228678393">(Mar 03 2021 at 22:15)</a>:</h4>
<p>Alright! I added the definition of the closure of a subgroup, and added some <code>fact</code>s in the branch <code>topaz_quotient_closed</code></p>



<a name="228680067"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228680067" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228680067">(Mar 03 2021 at 22:26)</a>:</h4>
<p><span class="user-mention" data-user-id="130384">@Riccardo Brasca</span> <span class="user-mention" data-user-id="112680">@Johan Commelin</span> feel free to merge this to whereever you want, if you're happy with the code.</p>



<a name="228683510"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228683510" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228683510">(Mar 03 2021 at 22:54)</a>:</h4>
<p>It seems now really easy to do everything in the correct (?) generality: given a normed group <code>M</code> and any subgroup <code>A</code>, define <code>A.normed_group_quotient</code>, that is the quotient of <code>M</code> by the closure of <code>A</code> with the various <code>mk</code> lemmas. Given another normed group <code>N</code> and <code>f : normed_group_hom M N</code> such that <code>f a = 0</code> for all <code>a ∈ A</code>, then we have <code>f a = 0</code> <code>a ∈ topological_closure A</code> and so we have <code>lift f : A.normed_group_quotient N</code> (the proof of boundedness is immediate).</p>



<a name="228683553"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228683553" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228683553">(Mar 03 2021 at 22:54)</a>:</h4>
<p>Yes, this all sounds very reasonable.</p>



<a name="228684284"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228684284" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228684284">(Mar 03 2021 at 23:00)</a>:</h4>
<p>I guess we're also missing the fact that <code>NormedGroup</code> has images of morphisms?</p>



<a name="228684746"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228684746" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228684746">(Mar 03 2021 at 23:03)</a>:</h4>
<p>There is <code>range</code>, in <code>normed_group_hom.lean</code>. But it is only a subgroup</p>



<a name="228685111"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228685111" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228685111">(Mar 03 2021 at 23:06)</a>:</h4>
<p>Okay, I'll sketch some code for the image too...</p>



<a name="228686014"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228686014" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228686014">(Mar 03 2021 at 23:12)</a>:</h4>
<p>Are you asking that the range of a bounded homomorphism be closed?  I believe this is not true in general, consider the map from <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>c</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">c_0</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> to itself sending <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x_i)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msup><mi>i</mi><mrow><mo>−</mo><mn>1</mn></mrow></msup><msub><mi>x</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(i^{-1}x_i)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">i</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>.</p>



<a name="228686180"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228686180" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228686180">(Mar 03 2021 at 23:14)</a>:</h4>
<p>No that's not what I'm asking for.</p>



<a name="228686197"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228686197" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228686197">(Mar 03 2021 at 23:14)</a>:</h4>
<p>I just want the image as a normed group</p>



<a name="228686220"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228686220" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228686220">(Mar 03 2021 at 23:14)</a>:</h4>
<p>no closedness assumptions for now.</p>



<a name="228686255"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228686255" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228686255">(Mar 03 2021 at 23:14)</a>:</h4>
<p>Oh, I see.  But a subgroup is a normed group, <a href="https://leanprover-community.github.io/mathlib_docs/find/add_subgroup.normed_group">docs#add_subgroup.normed_group</a></p>



<a name="228686466"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228686466" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228686466">(Mar 03 2021 at 23:16)</a>:</h4>
<p>I know, I'm just bundling so that it becomes a <code>NormedGroup</code> where we can do categorical stuff :)</p>



<a name="228686496"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228686496" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228686496">(Mar 03 2021 at 23:16)</a>:</h4>
<p>Oh, <code>normed_group</code> vs <code>NormedGroup</code> :)</p>



<a name="228686526"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228686526" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228686526">(Mar 03 2021 at 23:16)</a>:</h4>
<p>And I want an actual <code>has_images</code> instance for NormedGroup as well</p>



<a name="228687609"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228687609" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228687609">(Mar 03 2021 at 23:26)</a>:</h4>
<p>Note that the correct notion of image seems to be the closure of the group theoretic image (I mean, the kernel of the cokernel), but this is probably not very important</p>



<a name="228687831"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228687831" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228687831">(Mar 03 2021 at 23:28)</a>:</h4>
<p>Well, NormedGroup is not an abelian category is it? So we don't necessarily have that the image of a morphism is the kernel of the map to its cokernel.</p>



<a name="228688007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228688007" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228688007">(Mar 03 2021 at 23:30)</a>:</h4>
<p>Right, but I should think that it's the category-theoretic image nonetheless.</p>



<a name="228688100"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228688100" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228688100">(Mar 03 2021 at 23:31)</a>:</h4>
<p>What  is? The closure of the set-theoretic image?</p>



<a name="228688281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228688281" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228688281">(Mar 03 2021 at 23:32)</a>:</h4>
<p>I think the category-theoretic image is the usual group-theoretic image with the induced structure of a normed_group.</p>



<a name="228688430"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228688430" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228688430">(Mar 03 2021 at 23:33)</a>:</h4>
<p>Oh sorry, you're right, I was thinking of cokernels</p>



<a name="228688628"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228688628" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228688628">(Mar 03 2021 at 23:34)</a>:</h4>
<p>You have to think carefully about whether the norm is the one coming from the source or the target I guess</p>



<a name="228688676"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228688676" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228688676">(Mar 03 2021 at 23:35)</a>:</h4>
<p>According to the stack project, in any preadditive category, we call image of a morphism the kernel of the cokernel (is these exist)</p>



<a name="228688766"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228688766" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228688766">(Mar 03 2021 at 23:36)</a>:</h4>
<p>I have the impression that the kernel and cokernel always exist</p>



<a name="228688793"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228688793" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228688793">(Mar 03 2021 at 23:36)</a>:</h4>
<p>Well, in any case, here's a preliminary defn:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="c1">-- Note: the next sorry needs a `NormedGroup`, so we need to bundle.</span>
<span class="kd">def</span> <span class="n">X</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">cochain_complex</span> <span class="n">NormedGroup</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℤ</span> <span class="bp">→</span> <span class="n">NormedGroup</span>
<span class="bp">|</span> <span class="bp">-</span><span class="o">[</span><span class="mi">1</span><span class="bp">+</span><span class="n">n</span><span class="o">]</span>  <span class="o">:=</span> <span class="mi">0</span>
<span class="bp">|</span> <span class="mi">0</span>       <span class="o">:=</span> <span class="n">NormedGroup.of</span> <span class="bp">$</span> <span class="n">quotient</span> <span class="o">(</span><span class="n">C.d</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span><span class="o">))</span><span class="bp">.</span><span class="n">range.topological_closure</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">:</span><span class="n">ℕ</span><span class="o">)</span> <span class="o">:=</span> <span class="n">C.X</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span>
</code></pre></div>



<a name="228688809"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228688809" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228688809">(Mar 03 2021 at 23:36)</a>:</h4>
<p>Which should be correct.</p>



<a name="228688887"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228688887" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228688887">(Mar 03 2021 at 23:37)</a>:</h4>
<p>This is the more general defn of images:<br>
<a href="https://ncatlab.org/nlab/show/image">https://ncatlab.org/nlab/show/image</a></p>



<a name="228688920"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228688920" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228688920">(Mar 03 2021 at 23:37)</a>:</h4>
<p>(which agrees with <a href="https://leanprover-community.github.io/mathlib_docs/find/category_theory.limits.has_images">docs#category_theory.limits.has_images</a> )</p>



<a name="228688945"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228688945" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228688945">(Mar 03 2021 at 23:38)</a>:</h4>
<p>normedgroup is probably {pre,semi}abelian, or something like that</p>



<a name="228689086"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228689086" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228689086">(Mar 03 2021 at 23:39)</a>:</h4>
<p>In any case, I don't have any more time to work on this today. I pushed the defn above to <code>topaz_quotient_closed</code> here<br>
<a href="https://github.com/leanprover-community/lean-liquid/blob/564878d91e8b0864294bd06be16de17ab982c38f/src/system_of_complexes/soft_truncation.lean#L31">https://github.com/leanprover-community/lean-liquid/blob/564878d91e8b0864294bd06be16de17ab982c38f/src/system_of_complexes/soft_truncation.lean#L31</a><br>
In case anyone wants to build on top of it</p>



<a name="228689633"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228689633" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228689633">(Mar 03 2021 at 23:44)</a>:</h4>
<p>What I mean is that the closure of the group theoretic image controls the epimorphisms, and similar the closure of the (already closed) kernel controls the monomorphisms, so for the image we should really take the closure. What is missing to be abelian is that mono + epi = iso (for example the inclusion of a dense subspace)</p>



<a name="228689720"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228689720" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228689720">(Mar 03 2021 at 23:45)</a>:</h4>
<p>Yes, I completely agree with that :)</p>



<a name="228718409"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228718409" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228718409">(Mar 04 2021 at 05:08)</a>:</h4>
<p>I'm thinking about the universal property of quotients of morphisms of <code>NormedGroup</code>s. Is it really true that the quotient by the closure of the image provides a "correct" cokernel?</p>
<p>I don't see how to prove the first sorry in the following:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">variables</span> <span class="o">{</span><span class="n">A</span> <span class="n">B</span> <span class="n">C</span> <span class="o">:</span> <span class="n">NormedGroup.</span><span class="o">{</span><span class="n">u</span><span class="o">}}</span>

<span class="kd">@[simp]</span>
<span class="kd">noncomputable</span>
<span class="kd">def</span> <span class="n">coker</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">⟶</span> <span class="n">B</span><span class="o">)</span> <span class="o">:</span> <span class="n">NormedGroup</span> <span class="o">:=</span> <span class="n">NormedGroup.of</span> <span class="bp">$</span>
  <span class="n">quotient_add_group.quotient</span> <span class="n">f.range.topological_closure</span>

<span class="kd">@[simp]</span>
<span class="kd">noncomputable</span>
<span class="kd">def</span> <span class="n">coker.π</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">⟶</span> <span class="n">B</span><span class="o">}</span> <span class="o">:</span> <span class="n">B</span> <span class="bp">⟶</span> <span class="n">coker</span> <span class="n">f</span> <span class="o">:=</span>
  <span class="n">normed_group_hom.normed_group.mk</span> <span class="n">_</span>

<span class="kd">lemma</span> <span class="n">coker.π_surjective</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">⟶</span> <span class="n">B</span><span class="o">}</span> <span class="o">:</span> <span class="n">function.surjective</span> <span class="o">(</span><span class="n">coker.π</span> <span class="o">:</span> <span class="n">B</span> <span class="bp">⟶</span> <span class="n">coker</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">to_add_monoid_hom</span> <span class="o">:=</span>
  <span class="n">surjective_quot_mk</span> <span class="n">_</span>

<span class="kn">open</span> <span class="n">normed_group_hom</span>

<span class="kd">noncomputable</span>
<span class="kd">def</span> <span class="n">lift</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">⟶</span> <span class="n">B</span><span class="o">}</span> <span class="o">{</span><span class="n">g</span> <span class="o">:</span> <span class="n">B</span> <span class="bp">⟶</span> <span class="n">C</span><span class="o">}</span> <span class="o">(</span><span class="n">cond</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">≫</span> <span class="n">g</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">coker</span> <span class="n">f</span> <span class="bp">⟶</span> <span class="n">C</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">bound'</span> <span class="o">:=</span> <span class="kd">begin</span>
    <span class="c1">-- Is this actually true!?</span>
    <span class="gr">sorry</span>
  <span class="kd">end</span><span class="o">,</span>
  <span class="bp">..</span><span class="o">(</span><span class="n">quotient_add_group.lift</span> <span class="n">_</span> <span class="n">g.to_add_monoid_hom</span> <span class="kd">begin</span>
    <span class="n">intros</span> <span class="n">b</span> <span class="n">hb</span><span class="o">,</span>
    <span class="gr">sorry</span><span class="o">,</span>
  <span class="kd">end</span> <span class="o">)</span> <span class="o">}</span>
</code></pre></div>
<p>The code is found here, in case anyone wants to play with it:<br>
<a href="https://github.com/leanprover-community/lean-liquid/blob/9090c7846b8fe32f601a69fbef38960696063963/src/normed_group/NormedGroup.lean#L126">https://github.com/leanprover-community/lean-liquid/blob/9090c7846b8fe32f601a69fbef38960696063963/src/normed_group/NormedGroup.lean#L126</a></p>
<p>I'm a little suspicious as to whether this is actually true. It seems like some completeness is necessary.</p>



<a name="228719108"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228719108" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228719108">(Mar 04 2021 at 05:17)</a>:</h4>
<p>Thanks for all the work!</p>



<a name="228722954"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228722954" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228722954">(Mar 04 2021 at 06:10)</a>:</h4>
<p>Okay,  I think it's actually true.</p>
<p>I added a sketch of proof, but now I should go to sleep... <br>
<a href="https://github.com/leanprover-community/lean-liquid/blob/50b8c497108fae8752b87a9ff57f6a8e0ac8e877/src/normed_group/NormedGroup.lean#L126">https://github.com/leanprover-community/lean-liquid/blob/50b8c497108fae8752b87a9ff57f6a8e0ac8e877/src/normed_group/NormedGroup.lean#L126</a></p>
<p>A few sorry's there are just me being lazy and not wanting to look through api docs, and some of these sorry's should be very easy.</p>



<a name="228749817"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228749817" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228749817">(Mar 04 2021 at 10:40)</a>:</h4>
<p><span class="user-mention" data-user-id="130384">@Riccardo Brasca</span> <span class="user-mention" data-user-id="243562">@Adam Topaz</span> would you mind merging your progress into master as soon as you think it is a sensible approach?</p>



<a name="228749850"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228749850" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228749850">(Mar 04 2021 at 10:40)</a>:</h4>
<p>There are ~38 sorrys on master now, and it doesn't matter if that number grows a bit (-;</p>



<a name="228751894"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228751894" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228751894">(Mar 04 2021 at 11:00)</a>:</h4>
<p>I think we are pretty close to a reasonable situation for quotients, if you can wait a little bit we can then merge into master.</p>



<a name="228752111"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228752111" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228752111">(Mar 04 2021 at 11:01)</a>:</h4>
<p><span class="user-mention" data-user-id="243562">@Adam Topaz</span> I have the impression you are making things more complicated than they are</p>



<a name="228752257"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228752257" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228752257">(Mar 04 2021 at 11:02)</a>:</h4>
<p><span class="user-mention" data-user-id="130384">@Riccardo Brasca</span> sure! It just would be unfortunate if your two branches diverge</p>



<a name="228752393"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228752393" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228752393">(Mar 04 2021 at 11:03)</a>:</h4>
<p>Contrary to mathlib, I'm perfectly happy with pushing half-fleshed out ideas to master in LTE. The only "rule" is that everything should compile.</p>



<a name="228752532"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228752532" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228752532">(Mar 04 2021 at 11:04)</a>:</h4>
<p>In <a href="https://github.com/leanprover-community/lean-liquid/blob/quotient_closed/src/for_mathlib/normed_group_quotient.lean">https://github.com/leanprover-community/lean-liquid/blob/quotient_closed/src/for_mathlib/normed_group_quotient.lean</a> I put an instance of a normed group on <code>quotient S.topological_closure</code>, for any subgroup <code>S</code> (the structure of instances is bad, but the idea is the correct one I think). I have to teach soon, but using <code>norm_mk_le</code> proving that the lifting is bounded is immediate</p>



<a name="228752615"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228752615" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228752615">(Mar 04 2021 at 11:05)</a>:</h4>
<p>We only need to prove that if <code>f</code> is <code>0</code> on <code>S</code> then it is <code>0</code> on <code>S.topological_closure</code>and we got the lifting</p>



<a name="228762383"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228762383" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228762383">(Mar 04 2021 at 12:22)</a>:</h4>
<p>What is the correct way of doing the following (if it is a reasonable strategy at all...)? I want something like</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="sd">/-- The quotient in the category of normed groups. -/</span>
<span class="kd">noncomputable</span>
<span class="kd">def</span> <span class="n">normed_group_quotient</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">add_subgroup</span> <span class="n">M</span><span class="o">)</span> <span class="o">:</span> <span class="n">normed_group</span> <span class="o">(</span><span class="n">quotient</span> <span class="n">S.topological_closure</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">normed_group.of_core</span> <span class="o">(</span><span class="n">quotient</span> <span class="n">S.topological_closure</span><span class="o">)</span> <span class="o">(</span><span class="n">quotient.is_normed_group.core</span> <span class="n">S</span><span class="o">)</span>
</code></pre></div>
<p>But now <code>normed_group_quotient S</code> is of type <code>normed_group (quotient S.topological_closure)</code> and I guess that what I really want is to be of type <code>Type*</code> with an instance of normed group. Should I do this by hand? In particular I am worried to lose all the API for quotient groups...</p>



<a name="228763553"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228763553" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228763553">(Mar 04 2021 at 12:32)</a>:</h4>
<p><span class="user-mention" data-user-id="130384">@Riccardo Brasca</span> I think that <code>(quotient S.topological_closure)</code> is automatically coerced to <code>Type*</code></p>



<a name="228763703"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228763703" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228763703">(Mar 04 2021 at 12:33)</a>:</h4>
<p>So you could afterwards define something like</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">NormedGroup.quotient</span> <span class="o">(</span><span class="n">V</span> <span class="o">:</span> <span class="n">NormedGroup</span><span class="o">)</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">add_subgroup</span> <span class="n">V</span><span class="o">)</span> <span class="o">:</span> <span class="n">NormedGroup</span> <span class="o">:=</span>
<span class="n">NormedGroup.of</span> <span class="o">(</span><span class="n">quotient</span> <span class="n">S.topological_closure</span><span class="o">)</span>
</code></pre></div>



<a name="228763791"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228763791" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228763791">(Mar 04 2021 at 12:34)</a>:</h4>
<p>This will work if your <code>def</code> above is an instance, so that <code>NormedGroup.of</code> can pick up that instance and bundle it.</p>



<a name="228773472"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228773472" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228773472">(Mar 04 2021 at 13:42)</a>:</h4>
<p><span class="user-mention" data-user-id="130384">@Riccardo Brasca</span> The way this currently works in my branch is that you have a normed group instance on the quotient by a closed subgroup, where the <code>is_closed</code> assumption is under a <code>fact</code>. Then I have an instance of <code>fact (is_closed ...)</code> for the topological closure of a subgroup, hence the typeclass system automatically gives you the normed group instance for the quotient by the topological closure of a subgroup.</p>



<a name="228773504"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228773504" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228773504">(Mar 04 2021 at 13:42)</a>:</h4>
<p><span class="user-mention" data-user-id="243562">@Adam Topaz</span> sorry, <code>norm_mk_le</code> is the wrong inequality... I am writing the good one</p>



<a name="228773599"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228773599" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228773599">(Mar 04 2021 at 13:43)</a>:</h4>
<p><span class="user-mention silent" data-user-id="130384">Riccardo Brasca</span> <a href="#narrow/stream/267928-condensed-mathematics/topic/soft_truncation'/near/228752615">said</a>:</p>
<blockquote>
<p>We only need to prove that if <code>f</code> is <code>0</code> on <code>S</code> then it is <code>0</code> on <code>S.topological_closure</code>and we got the lifting</p>
</blockquote>
<p><span aria-label="up" class="emoji emoji-2b06" role="img" title="up">:up:</span> yes, this is exactly the key point in the proofs involved in <code>coker.lift</code>.</p>



<a name="228773849"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228773849" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228773849">(Mar 04 2021 at 13:45)</a>:</h4>
<p>I think it's a bit silly to do </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">quotient.is_normed_group.core</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">add_subgroup</span> <span class="n">M</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">normed_group.core</span> <span class="o">(</span><span class="n">quotient</span> <span class="n">S.topological_closure</span><span class="o">)</span> <span class="o">:=</span>
</code></pre></div>
<p>since then it will be a pain to get an instance of a normed group on a quotient when you happen to know that your subgroup is alreaedy closed.</p>



<a name="228773946"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228773946" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228773946">(Mar 04 2021 at 13:45)</a>:</h4>
<p>For example we may want to take the quotient by the kernel of a morphism, without having to manually prove that the kernel of a morphism equals its own topological closure</p>



<a name="228774149"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228774149" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228774149">(Mar 04 2021 at 13:46)</a>:</h4>
<p>Here's the skeleton of the argument for lift I had last night:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">lift</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">⟶</span> <span class="n">B</span><span class="o">}</span> <span class="o">{</span><span class="n">g</span> <span class="o">:</span> <span class="n">B</span> <span class="bp">⟶</span> <span class="n">C</span><span class="o">}</span> <span class="o">(</span><span class="n">cond</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">≫</span> <span class="n">g</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">coker</span> <span class="n">f</span> <span class="bp">⟶</span> <span class="n">C</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">bound'</span> <span class="o">:=</span> <span class="kd">begin</span>
    <span class="n">rcases</span> <span class="n">g.bound</span> <span class="k">with</span> <span class="o">⟨</span><span class="n">c</span><span class="o">,</span><span class="n">hcpos</span><span class="o">,</span><span class="n">hc</span><span class="o">⟩,</span>
    <span class="n">use</span> <span class="n">c</span><span class="o">,</span>
    <span class="n">intros</span> <span class="n">v</span><span class="o">,</span>
    <span class="n">rcases</span> <span class="n">coker.π_surjective</span> <span class="n">v</span> <span class="k">with</span> <span class="o">⟨</span><span class="n">v</span><span class="o">,</span><span class="n">rfl</span><span class="o">⟩,</span>
    <span class="n">change</span> <span class="bp">∥</span> <span class="n">g</span> <span class="n">v</span> <span class="bp">∥</span> <span class="bp">≤</span> <span class="n">c</span> <span class="bp">*</span> <span class="n">Inf</span> <span class="o">{</span><span class="n">r</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">|</span> <span class="bp">∃</span> <span class="n">y</span> <span class="o">:</span> <span class="n">B</span><span class="o">,</span> <span class="n">coker.π</span> <span class="n">_</span> <span class="bp">=</span> <span class="n">coker.π</span> <span class="n">_</span> <span class="bp">∧</span> <span class="n">_</span> <span class="o">},</span>
    <span class="c1">-- Should be in mathlib in some form?</span>
    <span class="k">have</span> <span class="o">:</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">*</span> <span class="n">Inf</span> <span class="o">{</span><span class="n">r</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">|</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">B</span><span class="o">),</span> <span class="o">(</span><span class="n">coker.π</span> <span class="n">y</span> <span class="o">:</span> <span class="n">coker</span> <span class="n">f</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">coker.π</span> <span class="n">v</span> <span class="o">:</span> <span class="n">coker</span> <span class="n">f</span><span class="o">)</span> <span class="bp">∧</span> <span class="n">r</span> <span class="bp">=</span> <span class="bp">∥</span><span class="n">y</span><span class="bp">∥</span><span class="o">}</span> <span class="bp">=</span>
      <span class="n">Inf</span> <span class="o">{</span><span class="n">r</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">|</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">B</span><span class="o">),</span> <span class="o">(</span><span class="n">coker.π</span> <span class="n">y</span> <span class="o">:</span> <span class="n">coker</span> <span class="n">f</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">coker.π</span> <span class="n">v</span> <span class="o">:</span> <span class="n">coker</span> <span class="n">f</span><span class="o">)</span> <span class="bp">∧</span> <span class="n">r</span> <span class="bp">=</span> <span class="n">c</span> <span class="bp">*</span> <span class="bp">∥</span> <span class="n">y</span> <span class="bp">∥</span> <span class="o">},</span> <span class="gr">sorry</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">this</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">real.le_Inf</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">rintros</span> <span class="n">x</span> <span class="o">⟨</span><span class="n">b</span><span class="o">,</span><span class="n">hx</span><span class="o">,</span><span class="n">rfl</span><span class="o">⟩,</span>
      <span class="k">have</span> <span class="o">:</span> <span class="n">g</span> <span class="n">v</span> <span class="bp">=</span> <span class="n">g</span> <span class="n">b</span><span class="o">,</span>
      <span class="o">{</span> <span class="k">have</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">-</span> <span class="n">v</span> <span class="bp">∈</span> <span class="n">f.range.topological_closure</span><span class="o">,</span> <span class="gr">sorry</span><span class="o">,</span> <span class="c1">-- from hx</span>
        <span class="k">have</span> <span class="o">:</span> <span class="o">(</span><span class="n">range</span> <span class="n">f</span><span class="o">)</span><span class="bp">.</span><span class="n">topological_closure</span> <span class="bp">≤</span> <span class="n">g.ker</span><span class="o">,</span>
        <span class="o">{</span> <span class="n">change</span> <span class="o">(</span><span class="n">closure</span> <span class="o">(</span><span class="n">f.range</span> <span class="o">:</span> <span class="n">set</span> <span class="n">B</span><span class="o">))</span> <span class="bp">⊆</span> <span class="o">(</span><span class="n">ker</span> <span class="n">g</span> <span class="o">:</span> <span class="n">set</span> <span class="n">B</span><span class="o">),</span>
          <span class="k">have</span> <span class="o">:</span> <span class="n">is_closed</span> <span class="o">(</span><span class="n">g.ker</span> <span class="o">:</span> <span class="n">set</span> <span class="n">B</span><span class="o">),</span> <span class="gr">sorry</span><span class="o">,</span> <span class="c1">-- should be separate lemma.</span>
          <span class="c1">-- there should now be a lemma saying that, given `is_closed Y`,</span>
          <span class="c1">-- closure X ⊆ Y ↔ X ⊆ Y</span>
          <span class="c1">-- Then conclude using `cond`.</span>
          <span class="gr">sorry</span> <span class="o">},</span>
        <span class="k">suffices</span> <span class="o">:</span> <span class="n">g</span> <span class="o">(</span><span class="n">b</span> <span class="bp">-</span> <span class="n">v</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span> <span class="gr">sorry</span><span class="o">,</span> <span class="c1">-- This must be in mathlib somewhere...</span>
        <span class="n">apply</span> <span class="n">this</span><span class="o">,</span>
        <span class="n">assumption</span><span class="o">,</span>
      <span class="o">},</span>
      <span class="n">rw</span> <span class="n">this</span><span class="o">,</span>
      <span class="n">apply</span> <span class="n">hc</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">refine</span> <span class="o">⟨</span><span class="n">c</span> <span class="bp">*</span> <span class="bp">∥</span> <span class="n">v</span> <span class="bp">∥</span><span class="o">,</span><span class="n">v</span><span class="o">,</span><span class="n">rfl</span><span class="o">,</span> <span class="n">rfl</span><span class="o">⟩</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">use</span> <span class="mi">0</span><span class="o">,</span>
      <span class="n">intros</span> <span class="n">y</span> <span class="n">hy</span><span class="o">,</span>
      <span class="n">rcases</span> <span class="n">hy</span> <span class="k">with</span> <span class="o">⟨</span><span class="n">y</span><span class="o">,</span><span class="n">hy</span><span class="o">,</span><span class="n">rfl</span><span class="o">⟩,</span>
      <span class="n">apply</span> <span class="n">mul_nonneg</span> <span class="o">(</span><span class="n">le_of_lt</span> <span class="n">_</span><span class="o">)</span> <span class="o">(</span><span class="n">norm_nonneg</span> <span class="n">_</span><span class="o">),</span>
      <span class="n">simpa</span> <span class="o">},</span>
  <span class="kd">end</span><span class="o">,</span>
  <span class="bp">..</span><span class="o">(</span><span class="n">quotient_add_group.lift</span> <span class="n">_</span> <span class="n">g.to_add_monoid_hom</span> <span class="kd">begin</span>
    <span class="n">intros</span> <span class="n">b</span> <span class="n">hb</span><span class="o">,</span>
    <span class="gr">sorry</span><span class="o">,</span>
  <span class="kd">end</span> <span class="o">)</span> <span class="o">}</span>
</code></pre></div>



<a name="228774471"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228774471" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228774471">(Mar 04 2021 at 13:48)</a>:</h4>
<p>I think I will have proof in one hour max (not literally of this statement, but something that is mathematically the same), and then I will think about the Lean design of things</p>



<a name="228779134"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228779134" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228779134">(Mar 04 2021 at 14:17)</a>:</h4>
<p>I've added <code>lift</code> here</p>



<a name="228779139"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228779139" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228779139">(Mar 04 2021 at 14:17)</a>:</h4>
<p><a href="https://github.com/leanprover-community/lean-liquid/blob/quotient_closed/src/for_mathlib/normed_group_quotient.lean">https://github.com/leanprover-community/lean-liquid/blob/quotient_closed/src/for_mathlib/normed_group_quotient.lean</a></p>



<a name="228779243"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228779243" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228779243">(Mar 04 2021 at 14:18)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">zero_of_closure</span> <span class="o">{</span><span class="n">M</span> <span class="n">N</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">normed_group</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">normed_group</span> <span class="n">N</span><span class="o">]</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">add_subgroup</span> <span class="n">M</span><span class="o">)</span>
  <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">normed_group_hom</span> <span class="n">M</span> <span class="n">N</span><span class="o">)</span> <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span> <span class="bp">∈</span> <span class="n">A</span><span class="o">,</span> <span class="n">f</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">m</span> <span class="bp">∈</span> <span class="n">A.topological_closure</span><span class="o">,</span> <span class="n">f</span> <span class="n">m</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
</code></pre></div>
<p>is still <code>sorry</code>, but it shouldn't be hard</p>



<a name="228779583"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228779583" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228779583">(Mar 04 2021 at 14:20)</a>:</h4>
<p>Oh I have a proof of that already. Ill fill in the sorry</p>



<a name="228779592"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228779592" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228779592">(Mar 04 2021 at 14:20)</a>:</h4>
<p>give me a few mins</p>



<a name="228782037"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228782037" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228782037">(Mar 04 2021 at 14:34)</a>:</h4>
<p>Bah, I filled in the sorry, but my git tree is f-ed up</p>



<a name="228783062"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228783062" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228783062">(Mar 04 2021 at 14:40)</a>:</h4>
<p>I'm inclined to say: <code>git</code> gud <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span></p>



<a name="228783175"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228783175" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228783175">(Mar 04 2021 at 14:40)</a>:</h4>
<p>4sho</p>



<a name="228783243"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228783243" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228783243">(Mar 04 2021 at 14:40)</a>:</h4>
<p>Oh, I pushed it.</p>



<a name="228783462"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228783462" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228783462">(Mar 04 2021 at 14:42)</a>:</h4>
<p>Again, I have to reiterate that I think ddefining </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="n">normed_group_quotient</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">add_subgroup</span> <span class="n">M</span><span class="o">)</span> <span class="o">:</span> <span class="n">normed_group</span> <span class="o">(</span><span class="n">quotient</span> <span class="n">S.topological_closure</span><span class="o">)</span> <span class="o">:=</span>
</code></pre></div>
<p>is not the right approach</p>



<a name="228783656"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228783656" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228783656">(Mar 04 2021 at 14:43)</a>:</h4>
<p>Because then the typeclass system wont get the normed_group instance on things like <code>quotient (f.ker)</code></p>



<a name="228783681"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228783681" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228783681">(Mar 04 2021 at 14:43)</a>:</h4>
<p>Thank you! Now the mathematics is there, the quotient by <code>S.topological_closure</code> has the required universal property. I don't have any strong opinion about the right approach to this kind of problems</p>



<a name="228784025"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228784025" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228784025">(Mar 04 2021 at 14:45)</a>:</h4>
<p>We're still missing the uniqueness of lift, but that's not too bad</p>



<a name="228784212"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228784212" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228784212">(Mar 04 2021 at 14:47)</a>:</h4>
<p>Ah, sure, <code>lift</code> is not a lift  of anything written like that :D</p>



<a name="228784323"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228784323" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228784323">(Mar 04 2021 at 14:47)</a>:</h4>
<p>Did you get rid of the instance that I wrote yesterday for quotients by closed subgroups?</p>



<a name="228784339"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228784339" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228784339">(Mar 04 2021 at 14:47)</a>:</h4>
<p>I can't find it in the branch</p>



<a name="228784516"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228784516" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228784516">(Mar 04 2021 at 14:48)</a>:</h4>
<p>Well, you wrote it, but I fudged around with <code>fact</code> in the hypotheses to make it work with the typeclass system</p>



<a name="228784861"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228784861" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228784861">(Mar 04 2021 at 14:51)</a>:</h4>
<p>I've added <code>lift_mk</code></p>



<a name="228784915"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228784915" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228784915">(Mar 04 2021 at 14:51)</a>:</h4>
<p>I didn't touch your branch, but I erased the <code>fact</code> in the branch quotient_closed</p>



<a name="228785016"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228785016" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228785016">(Mar 04 2021 at 14:52)</a>:</h4>
<p>Ok, I'll add <code>lift_unique</code></p>



<a name="228785192"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228785192" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228785192">(Mar 04 2021 at 14:53)</a>:</h4>
<p>I think I like the <code>fact</code> approach, at least until there is enough evidence that we need 400 lines of API around <code>closed_(add)_subgroup</code></p>



<a name="228785243"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228785243" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228785243">(Mar 04 2021 at 14:53)</a>:</h4>
<p>I'll add this last lemma, then I'll change back to <code>fact</code>'s</p>



<a name="228785255"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228785255" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228785255">(Mar 04 2021 at 14:53)</a>:</h4>
<p>BTW I agree that we should now think about how setting up all the instances and so on. Changing everything now should be quite easy, but the sooner we do it the better</p>



<a name="228785287"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228785287" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228785287">(Mar 04 2021 at 14:53)</a>:</h4>
<p>Note that we can't have global instances for <code>fact</code> in mathlib. (But in LTE it's fine, yolo, living on the edge)</p>



<a name="228785417"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228785417" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228785417">(Mar 04 2021 at 14:54)</a>:</h4>
<p>So</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="o">:</span> <span class="n">fact</span> <span class="o">(</span><span class="n">is_closed</span> <span class="n">f.ker</span><span class="o">)</span>
</code></pre></div>
<p>is mathlib-evil.<br>
But of course it can be made an instance locally in some files.</p>



<a name="228785802"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228785802" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228785802">(Mar 04 2021 at 14:56)</a>:</h4>
<p>The change back is going to be a bit annoying since now we have a bunch of <code>S.topological_closure</code>s which will need to be changed back to <code>S</code>.</p>



<a name="228785954"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228785954" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228785954">(Mar 04 2021 at 14:57)</a>:</h4>
<p>I have no problem in doing annoying stuff, I just prefer to not take any decision about what is a <code>def</code> what is an <code>instance</code>...</p>



<a name="228786336"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228786336" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228786336">(Mar 04 2021 at 14:59)</a>:</h4>
<p>Allright, I added lift_unque</p>



<a name="228786357"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228786357" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228786357">(Mar 04 2021 at 14:59)</a>:</h4>
<p>If you have doubts, just go with <code>def</code>. It's usually not too hard to change things to <code>instance</code> later on.</p>



<a name="228786520"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228786520" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228786520">(Mar 04 2021 at 15:00)</a>:</h4>
<p>So now we have cokernels</p>



<a name="228787194"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228787194" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228787194">(Mar 04 2021 at 15:04)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> <span class="user-mention" data-user-id="130384">@Riccardo Brasca</span> Are you both okay with me changing back to <code>fact (is_closed ...)</code>?</p>



<a name="228787331"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228787331" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228787331">(Mar 04 2021 at 15:04)</a>:</h4>
<p>No problem for me</p>



<a name="228787346"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228787346" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228787346">(Mar 04 2021 at 15:04)</a>:</h4>
<p>I'm inclined to just delete my branch with this stuff, it doesn't make sense to have two branches on the same topic</p>



<a name="228787491"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228787491" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228787491">(Mar 04 2021 at 15:05)</a>:</h4>
<p>If we don't want to use <code>fact</code>s then we can always go back to the idea of defining <code>closed_add_subgroup</code></p>



<a name="228787661"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228787661" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228787661">(Mar 04 2021 at 15:06)</a>:</h4>
<p>This may be a good option anyway since we will never work with non-closed subgroups.</p>



<a name="228788244"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228788244" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228788244">(Mar 04 2021 at 15:09)</a>:</h4>
<p>What is the policy in mathlib for the quotient by a (not necessarily normal) subgroup? I mean the quotient group (by the normal closure), not the quotient set by the relation, that is not a group. It seems a very similar situation, the quotient exist, but it does not commute with the forgetful functor</p>



<a name="228788447"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228788447" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228788447">(Mar 04 2021 at 15:10)</a>:</h4>
<p>I think you need the assumption that it's normal</p>



<a name="228788590"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228788590" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228788590">(Mar 04 2021 at 15:11)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/quotient_group.quotient.group">docs#quotient_group.quotient.group</a></p>



<a name="228788657"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228788657" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228788657">(Mar 04 2021 at 15:11)</a>:</h4>
<p>And <code>normal</code> is a class in this case, so you need the instance. That's what I was trying to simulate with <code>fact</code></p>



<a name="228788783"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228788783" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228788783">(Mar 04 2021 at 15:12)</a>:</h4>
<p><span class="user-mention" data-user-id="243562">@Adam Topaz</span> If you want to set up the API for <code>closed_add_subgroup</code> that's fine with me. But I think <code>fact</code> is also fine.</p>



<a name="228788797"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228788797" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228788797">(Mar 04 2021 at 15:12)</a>:</h4>
<p>And probably less work from now.</p>



<a name="228788867"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228788867" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228788867">(Mar 04 2021 at 15:12)</a>:</h4>
<p>My guess is that moving from <code>fact</code> to <code>closed_subgroup</code> later on shouldn't create a lot of trouble.</p>



<a name="228788872"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228788872" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228788872">(Mar 04 2021 at 15:12)</a>:</h4>
<p>Yeah, I'll go with fact for now. It will be easy to change to <code>closed_add_subgroup</code> later if we want</p>



<a name="228788987"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228788987" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228788987">(Mar 04 2021 at 15:13)</a>:</h4>
<p><span class="user-mention" data-user-id="130384">@Riccardo Brasca</span> are you okay with me pushing to your branch? with this fact stuff, I  mean?</p>



<a name="228789056"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228789056" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228789056">(Mar 04 2021 at 15:13)</a>:</h4>
<p>Sure!</p>



<a name="228791430"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228791430" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228791430">(Mar 04 2021 at 15:25)</a>:</h4>
<p>Okay, that's done. I'll now add a small wrapper to get cokernels in the category <code>NormedGroup</code></p>



<a name="228793651"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228793651" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228793651">(Mar 04 2021 at 15:36)</a>:</h4>
<p>Do we want to PR this quotient stuff to mathlib at some point? In that case I can improve the API a little bit (for example adding that the norm of the projection to the quotient is <code>1</code>)</p>



<a name="228793957"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228793957" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228793957">(Mar 04 2021 at 15:38)</a>:</h4>
<p>I think the appropriate thing for mathlib is the <code>closed_add_subgroup</code> approach (and it should be done in general for an arbitrary topological group presumably)</p>



<a name="228794090"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228794090" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228794090">(Mar 04 2021 at 15:38)</a>:</h4>
<p>E.g. we will want quotients by closed subgroups of profinite groups eventuially.</p>



<a name="228794112"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228794112" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228794112">(Mar 04 2021 at 15:39)</a>:</h4>
<p>I think this is natural stuff to move to mathlib at some point</p>



<a name="228794177"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228794177" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228794177">(Mar 04 2021 at 15:39)</a>:</h4>
<p>But I imagine that <span class="user-mention" data-user-id="260507">@Heather Macbeth</span> <span class="user-mention" data-user-id="110050">@Sebastien Gouezel</span> will have better ideas about how exactly it should be designed</p>



<a name="228794322"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228794322" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228794322">(Mar 04 2021 at 15:40)</a>:</h4>
<p>I do agree that <code>closed_subgroup</code> will be a good thing for mathlib. Think infinite Galois theory, and such.</p>



<a name="228794577"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228794577" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228794577">(Mar 04 2021 at 15:41)</a>:</h4>
<p>As I was saying yesterday, my first idea was that it would be better for <code>is_closed</code> to be a mixin -- are there reasons not to in this case?</p>



<a name="228795467"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228795467" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228795467">(Mar 04 2021 at 15:46)</a>:</h4>
<p>For infinite Galois theory, I imagine we want a Galois correspondence between <code>intermediate_subfield</code> and <code>closed_subgroup</code></p>



<a name="228795530"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228795530" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228795530">(Mar 04 2021 at 15:46)</a>:</h4>
<p>So then it's actually valuable to have a dedicated type, on which we consider an order structure, etc...</p>



<a name="228796083"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228796083" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228796083">(Mar 04 2021 at 15:49)</a>:</h4>
<p>Plus in general we will want a galois_insertion between <code>subgroup</code> and <code>closed_subgroup</code></p>



<a name="228797215"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228797215" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228797215">(Mar 04 2021 at 15:55)</a>:</h4>
<p>It would be nice if the solution simultaneously applies to normed spaces and subspaces.  For example in <code>normed_space.inner_product</code> we have</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">submodule.is_closed_orthogonal</span> <span class="o">[</span><span class="n">inner_product_space</span> <span class="bp">𝕜</span> <span class="n">E</span><span class="o">]</span> <span class="o">(</span><span class="n">K</span> <span class="o">:</span> <span class="n">submodule</span> <span class="bp">𝕜</span> <span class="n">E</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_closed</span> <span class="bp">↑</span><span class="n">K</span><span class="bp">ᗮ</span>
</code></pre></div>



<a name="228797902"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228797902" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228797902">(Mar 04 2021 at 15:59)</a>:</h4>
<p>I fear that we'll need both <code>closed_(add_)subgroup</code> and <code>closed_sub{module/space?}</code>.</p>



<a name="228799296"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228799296" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228799296">(Mar 04 2021 at 16:05)</a>:</h4>
<p>In any case I will improve a little the API for <code>normed_group_hom</code>. Putting a <code>normed_group</code> instance seems not that far</p>



<a name="228800179"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228800179" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228800179">(Mar 04 2021 at 16:10)</a>:</h4>
<p>Merci!</p>



<a name="228801063"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228801063" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228801063">(Mar 04 2021 at 16:14)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> I'm playing with the soft_truncation stuff, and we still seem to have DTT hell issues :(</p>



<a name="228801294"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228801294" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228801294">(Mar 04 2021 at 16:15)</a>:</h4>
<p>I'll have dinner first</p>



<a name="228801466"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228801466" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228801466">(Mar 04 2021 at 16:16)</a>:</h4>
<p>Want to meet on video later?</p>



<a name="228806550"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228806550" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228806550">(Mar 04 2021 at 16:41)</a>:</h4>
<p>If you see a situation where the set of closed subspaces is in canonically in bijection with something else, then we should go for the bundling. (Personnally, I don't have such a situation in mind for now). Otherwise, the mixin approach seems more lightweight and as efficient. I'd probably avoid <code>fact</code>, though, and turn <code>is_closed</code> into a class instead. Most uses of <code>is_closed</code> would remain as usual assumptions, but one would additionally register just a few instances to make sure that you get instances on the things you need (namely <code>f.ker</code> when <code>f</code> is continuous, and so on)</p>



<a name="228806837"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228806837" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228806837">(Mar 04 2021 at 16:43)</a>:</h4>
<p>The big advantage of the mixin is that you don't need to define two quotients, one by an <code>add_subgroup</code> and the other one by a <code>closed_add_subgroup</code> and repeat all the API. So I'd probably go for the mixin approach for now, and refactor later if/when needed.</p>



<a name="228808218"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228808218" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228808218">(Mar 04 2021 at 16:50)</a>:</h4>
<p><span class="user-mention silent" data-user-id="243562">Adam Topaz</span> <a href="#narrow/stream/267928-condensed-mathematics/topic/soft_truncation'/near/228801466">said</a>:</p>
<blockquote>
<p>Want to meet on video later?</p>
</blockquote>
<p>I can probably meet around <time datetime="2021-03-04T18:15:00Z">2021-03-04T19:15:00+01:00</time></p>



<a name="228808269"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228808269" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228808269">(Mar 04 2021 at 16:50)</a>:</h4>
<p>What time zone is that?</p>



<a name="228808317"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228808317" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228808317">(Mar 04 2021 at 16:51)</a>:</h4>
<p>I'm using <code>&lt;time</code></p>



<a name="228808349"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228808349" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228808349">(Mar 04 2021 at 16:51)</a>:</h4>
<p>So Zulip turns it into your timezone</p>



<a name="228808375"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228808375" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228808375">(Mar 04 2021 at 16:51)</a>:</h4>
<p>Fancy!</p>



<a name="228808384"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228808384" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228808384">(Mar 04 2021 at 16:51)</a>:</h4>
<p>That works :)</p>



<a name="228808407"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228808407" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228808407">(Mar 04 2021 at 16:51)</a>:</h4>
<p>I see <code>Thu, Mar 4 2021, 19:15</code> which is CET</p>



<a name="228812591"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228812591" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228812591">(Mar 04 2021 at 17:14)</a>:</h4>
<p><span class="user-mention" data-user-id="110050">@Sebastien Gouezel</span> just to clarify, we only have <code>fact (is_closed ...)</code> in LTE, and we don't expect anything like that to be put in mathlib.</p>



<a name="228814199"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228814199" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228814199">(Mar 04 2021 at 17:24)</a>:</h4>
<p>By the way, you can also mouse over the time to see the time in the poster's time zone (i.e. I see 1:15 PM but it says 19:15+0100 in the hover)</p>



<a name="228817653"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228817653" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228817653">(Mar 04 2021 at 17:43)</a>:</h4>
<p><span class="user-mention" data-user-id="243562">@Adam Topaz</span> I'm ready half an hour early</p>



<a name="228817793"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228817793" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228817793">(Mar 04 2021 at 17:44)</a>:</h4>
<p>You want to meet now? <a href="http://meet.jit.si/soft-trunction-dtt">meet.jit.si/soft-trunction-dtt</a></p>



<a name="228832486"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228832486" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228832486">(Mar 04 2021 at 19:13)</a>:</h4>
<p>Adam convinced me that we need to fix complexes and <code>d</code> before filling in the sorrys in the <code>soft_truncation.lean</code> file</p>



<a name="228862694"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228862694" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228862694">(Mar 04 2021 at 22:30)</a>:</h4>
<p>I still like the idea of <code>d {i} {j} (h : j = i + 1) : C i -&gt; C j</code>. Do we have any arguments against this? I'd like to think it solves a lot of problems</p>



<a name="228862816"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228862816" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228862816">(Mar 04 2021 at 22:31)</a>:</h4>
<p>Johan and I were discussing the idea of using functors <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">Z</mi><mo>→</mo><mrow><mi mathvariant="normal">N</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">r</mi><mi mathvariant="normal">m</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">d</mi><mi mathvariant="normal">G</mi><mi mathvariant="normal">r</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">u</mi><mi mathvariant="normal">p</mi></mrow></mrow><annotation encoding="application/x-tex">\mathbb{Z} \to \mathrm{NormedGroup}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord"><span class="mord mathbb">Z</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathrm">N</span><span class="mord mathrm">o</span><span class="mord mathrm">r</span><span class="mord mathrm">m</span><span class="mord mathrm">e</span><span class="mord mathrm">d</span><span class="mord mathrm">G</span><span class="mord mathrm">r</span><span class="mord mathrm">o</span><span class="mord mathrm">u</span><span class="mord mathrm">p</span></span></span></span></span> and so far it seems to work fairly well</p>



<a name="228862903"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228862903" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228862903">(Mar 04 2021 at 22:32)</a>:</h4>
<p>(here <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">Z</mi></mrow><annotation encoding="application/x-tex">\mathbb{Z}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord"><span class="mord mathbb">Z</span></span></span></span></span> is given the category obtained from the ordered structure)</p>



<a name="228867596"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228867596" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228867596">(Mar 04 2021 at 23:13)</a>:</h4>
<p>regarding the mixin / bundled question, can't one have both? start with the mixin, use that as much as possible, and if there are special cases where the bundled thing is helpful, you just use the mixin as a structure field.</p>



<a name="228867959"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228867959" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228867959">(Mar 04 2021 at 23:17)</a>:</h4>
<p>So this begs the obvious question: should <code>is_closed</code> (for a general subset of a topological space) be made a class in mathlib? What about <code>is_open</code>?</p>



<a name="228870744"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228870744" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228870744">(Mar 04 2021 at 23:42)</a>:</h4>
<p>BTW, can we merge quotient_closed into master now? If it compiles it is probably better to do it...</p>



<a name="228870787"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228870787" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228870787">(Mar 04 2021 at 23:42)</a>:</h4>
<p>Fine with me!</p>



<a name="228871237"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228871237" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228871237">(Mar 04 2021 at 23:46)</a>:</h4>
<p>Pushed to master</p>



<a name="228872234"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228872234" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228872234">(Mar 04 2021 at 23:56)</a>:</h4>
<p>Lean says</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">/</span><span class="n">github</span><span class="bp">/</span><span class="n">workspace</span><span class="bp">/</span><span class="n">src</span><span class="bp">/</span><span class="n">normed_group</span><span class="bp">/</span><span class="n">NormedGroup.lean</span><span class="o">:</span><span class="mi">147</span><span class="o">:</span><span class="mi">24</span><span class="o">:</span> <span class="n">error</span><span class="o">:</span> <span class="n">failed</span> <span class="n">to</span> <span class="n">synthesize</span> <span class="n">type</span> <span class="kd">class</span> <span class="kd">instance</span> <span class="n">for</span>
<span class="n">A</span> <span class="n">B</span> <span class="n">C</span> <span class="o">:</span> <span class="n">NormedGroup</span><span class="o">,</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">⟶</span> <span class="n">B</span><span class="o">,</span>
<span class="n">g</span> <span class="o">:</span> <span class="n">B</span> <span class="bp">⟶</span> <span class="n">C</span><span class="o">,</span>
<span class="n">cond</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">≫</span> <span class="n">g</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
<span class="n">h</span> <span class="o">:</span> <span class="n">coker</span> <span class="n">f</span> <span class="bp">⟶</span> <span class="n">C</span><span class="o">,</span>
<span class="n">ᾰ</span> <span class="o">:</span> <span class="n">coker.π</span> <span class="bp">≫</span> <span class="n">h</span> <span class="bp">=</span> <span class="n">g</span>
<span class="bp">⊢</span> <span class="n">has_lift</span> <span class="o">(</span><span class="n">f</span> <span class="bp">≫</span> <span class="n">g</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">coker</span> <span class="n">f</span> <span class="bp">⟶</span> <span class="n">C</span><span class="o">)</span>
</code></pre></div>
<p><span class="user-mention" data-user-id="243562">@Adam Topaz</span> Can you have a look at it? Time to sleep for me...</p>



<a name="228872326"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228872326" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228872326">(Mar 04 2021 at 23:56)</a>:</h4>
<p>I'll try, but I'm a bit busy now.</p>



<a name="228873412"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228873412" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228873412">(Mar 05 2021 at 00:05)</a>:</h4>
<p>Okay, I'm fixing it.</p>



<a name="228873437"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228873437" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228873437">(Mar 05 2021 at 00:05)</a>:</h4>
<p>And adding some docstrings to make the linter happy</p>



<a name="228873707"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228873707" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228873707">(Mar 05 2021 at 00:08)</a>:</h4>
<p>Shhould be okay now</p>



<a name="228917867"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228917867" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228917867">(Mar 05 2021 at 08:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="243562">Adam Topaz</span> <a href="#narrow/stream/267928-condensed-mathematics/topic/soft_truncation'/near/228867959">said</a>:</p>
<blockquote>
<p>So this begs the obvious question: should <code>is_closed</code> (for a general subset of a topological space) be made a class in mathlib? What about <code>is_open</code>?</p>
</blockquote>
<p>I'm working on this, in the branch <code>is_closed_class</code>.</p>



<a name="228918269"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228918269" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228918269">(Mar 05 2021 at 08:54)</a>:</h4>
<p>of mathlib, or LTE?</p>



<a name="228960727"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/228960727" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#228960727">(Mar 05 2021 at 14:19)</a>:</h4>
<p>I just pushed a couple more coker lemmas to master in <code>normed_group.NormedGroup</code>. They should be enough to show that (coker C-1 -&gt; C0) -&gt; C2 is zero.</p>



<a name="229431954"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/229431954" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#229431954">(Mar 09 2021 at 07:10)</a>:</h4>
<p>We now have the following sorry-free definition:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">shift_and_trunctate</span> <span class="o">:</span> <span class="n">system_of_complexes</span> <span class="bp">⥤</span> <span class="n">system_of_complexes</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">shift</span> <span class="n">_</span><span class="o">)</span><span class="bp">.</span><span class="n">functor</span> <span class="bp">⋙</span> <span class="n">soft_truncation'</span>
</code></pre></div>
<p>and we need to extend this to</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">shift_and_truncate</span> <span class="o">:</span> <span class="n">system_of_double_complexes</span> <span class="bp">⥤</span> <span class="n">system_of_double_complexes</span> <span class="o">:=</span>
<span class="gr">sorry</span>
</code></pre></div>
<p>by applying <code>system_of_complexes.shift_and_truncate</code> to all the rows.</p>



<a name="229431989"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/229431989" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#229431989">(Mar 09 2021 at 07:11)</a>:</h4>
<p><span class="user-mention" data-user-id="243562">@Adam Topaz</span> you did a similar thing for completions, using old-skool complexes. How hard do you think it would be to port this to the new complexes?</p>



<a name="229432125"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/229432125" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#229432125">(Mar 09 2021 at 07:12)</a>:</h4>
<p>Are we shifting left, up, or up-and-left? (using the orientation conventions in analytic.pdf)</p>



<a name="229432148"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/229432148" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#229432148">(Mar 09 2021 at 07:12)</a>:</h4>
<p>we are only shifting left</p>



<a name="229432177"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/229432177" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#229432177">(Mar 09 2021 at 07:13)</a>:</h4>
<p>and then truncating whatever got moved into negative degrees</p>



<a name="229440907"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/229440907" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#229440907">(Mar 09 2021 at 08:41)</a>:</h4>
<p>This shouldn't be too bad... Just make a functional version of truncation, and prove an additive functor instance for it. So then you can push forward a complex with respect to that functor, then apply the shift. As long as everything is functorial, you can just compose some functors and get the definition you want. I don't know if the order really matters, but you can alternatively do something similar by proving that shifting is additive.</p>



<a name="229441218"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/229441218" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#229441218">(Mar 09 2021 at 08:44)</a>:</h4>
<p>We need both to be additive, right?</p>



<a name="229441235"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/229441235" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#229441235">(Mar 09 2021 at 08:44)</a>:</h4>
<p>Oh I guess all this requires a preadditive instanc for the category of complexes itself</p>



<a name="229441290"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/229441290" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#229441290">(Mar 09 2021 at 08:45)</a>:</h4>
<p>Hmm, makes sense</p>



<a name="229441311"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/229441311" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#229441311">(Mar 09 2021 at 08:45)</a>:</h4>
<p>So there is still a little bit of work to do.</p>



<a name="229441331"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/229441331" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#229441331">(Mar 09 2021 at 08:45)</a>:</h4>
<p>Yeah.</p>



<a name="229441354"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/229441354" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#229441354">(Mar 09 2021 at 08:45)</a>:</h4>
<p>And I guess it's better to do that work than to brute force our way through the definition.</p>



<a name="229441494"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/229441494" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#229441494">(Mar 09 2021 at 08:46)</a>:</h4>
<p>I can take a look tomorrow (well, today, it's 1:45 am here, and I can't sleep )</p>



<a name="229441631"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/229441631" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#229441631">(Mar 09 2021 at 08:47)</a>:</h4>
<p>But I'm also attending a workshop "at MFO" this week, so I don't know if I'll have much time for coding</p>



<a name="229491304"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/229491304" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#229491304">(Mar 09 2021 at 15:08)</a>:</h4>
<p>I'm adding the preadditive instance now.</p>



<a name="229492647"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/229492647" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#229492647">(Mar 09 2021 at 15:16)</a>:</h4>
<p><span class="user-mention" data-user-id="243562">@Adam Topaz</span> one sec!</p>



<a name="229492653"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/229492653" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#229492653">(Mar 09 2021 at 15:16)</a>:</h4>
<p>I already did that</p>



<a name="229492657"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/229492657" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#229492657">(Mar 09 2021 at 15:17)</a>:</h4>
<p>Oh :)</p>



<a name="229492682"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/229492682" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#229492682">(Mar 09 2021 at 15:17)</a>:</h4>
<p>let me push what I have</p>



<a name="229492717"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/229492717" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#229492717">(Mar 09 2021 at 15:17)</a>:</h4>
<p>I'm getting stuck at <code>zero_add</code> for some reason anyway! <span aria-label="rofl" class="emoji emoji-1f923" role="img" title="rofl">:rofl:</span></p>



<a name="229492763"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/229492763" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#229492763">(Mar 09 2021 at 15:17)</a>:</h4>
<p>See <code>jmc-refactor-complex</code> branch</p>



<a name="229492771"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/229492771" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#229492771">(Mar 09 2021 at 15:17)</a>:</h4>
<p>I cant get the <code>ext</code> lemma to behave for some reason.</p>



<a name="229492798"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/229492798" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#229492798">(Mar 09 2021 at 15:18)</a>:</h4>
<p>Thinks work a lot smoother now. Even less <code>eq_to_hom</code>s</p>



<a name="229492892"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/229492892" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#229492892">(Mar 09 2021 at 15:18)</a>:</h4>
<p>But the branch doesn't build yet. I'm in the final stages of fixing the build</p>



<a name="229493211"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/229493211" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#229493211">(Mar 09 2021 at 15:20)</a>:</h4>
<p><span class="user-mention" data-user-id="243562">@Adam Topaz</span> ok, it builds locally</p>



<a name="229493398"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/229493398" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#229493398">(Mar 09 2021 at 15:21)</a>:</h4>
<p>I'm really quite happy with the shape that this is now getting in</p>



<a name="229493539"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/229493539" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#229493539">(Mar 09 2021 at 15:22)</a>:</h4>
<p>There are dedicated constructors for <code>(co)chain_complex</code> which will introduce some <code>eq_to_hom</code>s under the hood. But otherwise you don't see them anywhere.</p>



<a name="229493692"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/229493692" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#229493692">(Mar 09 2021 at 15:23)</a>:</h4>
<p>One thing I didn't do yet, is lifting <code>has_shift</code> from <code>differential_object</code> to <code>cochain_complex</code>.</p>



<a name="229493764"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/229493764" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#229493764">(Mar 09 2021 at 15:24)</a>:</h4>
<p>So the code about shifts of cochain complexes is currently commented out</p>



<a name="229493931"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/229493931" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#229493931">(Mar 09 2021 at 15:25)</a>:</h4>
<p>We might want to build a generic constructor for functors to <code>complex_like</code> by taking a functor to <code>differential_object</code>, + a proof that all objects in the image are <code>is_complex_like</code>.</p>



<a name="229878699"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/229878699" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#229878699">(Mar 11 2021 at 16:23)</a>:</h4>
<p>I think that the API for <code>soft_truncation'</code> is almost done</p>



<a name="229878794"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/229878794" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#229878794">(Mar 11 2021 at 16:24)</a>:</h4>
<p>To prove that it is well-behaved wrt weak bounded exactness, there is 1 sorry left.</p>



<a name="229878920"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/229878920" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#229878920">(Mar 11 2021 at 16:25)</a>:</h4>
<p>We need to do a computation with a cokernel, and it's a bit nasty because the range of <code>d</code> is maybe not closed, so we have to work with norm estimates.</p>



<a name="229878994"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/229878994" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#229878994">(Mar 11 2021 at 16:25)</a>:</h4>
<p>If someone wants to take a look, please feel free to fix that <code>sorry</code></p>



<a name="229888151"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/soft_truncation%27/near/229888151" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/soft_truncation'.html#229888151">(Mar 11 2021 at 17:15)</a>:</h4>
<p>I changed the <code>sorry</code> into something that I'm convinced is provable.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>