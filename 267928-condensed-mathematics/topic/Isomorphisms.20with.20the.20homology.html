---
layout: archive
title: Zulip Chat Archive
permalink: /stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/index.html">condensed mathematics</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html">Isomorphisms with the homology</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="287587962"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/287587962" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joël Riou <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#287587962">(Jun 27 2022 at 14:46)</a>:</h4>
<p>With the current API, I am unable to remove the last <code>sorry</code> in the proof of <code>homology_iso</code> in <code>exact_functor.lean</code>, which is <code>(F.obj (homology f g w) ≅ homology (F.map f) (F.map g) w'</code> for an exact functor <code>F</code>. What we have to prove is completely nonsensical, the difficulty is that we have to do computations with kernels and cokernels while we have several candidates for some limit (co)cones: the one that is chosen in the API of kernel/cokernel, and those that are obtained by applying the functor <code>F</code> to (co)limit (co)cones. The only mathematical content is that up to unique isomorphisms, <code>F</code> preserves kernels and cokernels.</p>
<p>In order to construct isomorphisms with an homology object, I suggest introducing what I have named <code>homology_iso_predatum</code> and <code>homology_iso_datum</code> attached to morphisms <code>f : X ⟶ Y</code> and <code>g : X ⟶ Z</code> such that <code>f ≫ g = 0</code>: such datum consists of a diagram including a map <code>ι : K ⟶ Y</code> which is a kernel for <code>g</code> and a map <code>π : K ⟶ H</code> which is a cokernel for the obvious map <code>f' : X ⟶ K</code>. From this datum, I construct an isomorphism <code>H ≅ homology f g w</code>. Then, the lemma <code>homology_iso</code> mentionned above becomes trivial, once we know that <code>homology_iso_datum</code> are preserved by exact functors. A first draft of this is <a href="https://github.com/leanprover-community/lean-liquid/commit/98ff40ccfd8fdfe29366bb1970a9a8301e2a3748">https://github.com/leanprover-community/lean-liquid/commit/98ff40ccfd8fdfe29366bb1970a9a8301e2a3748</a></p>
<p>I believe this gives some flexibility in order to construct very formal isomorphisms on homology and do computations. If this API is slightly developped, I presume that it should also help in the verification of the naturality of the isomorphisms we construct, like in <code>homology_functor_iso</code>, also in <code>exact_functor.lean</code>. Please let me know if I may proceed with this approach.</p>



<a name="287589856"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/287589856" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#287589856">(Jun 27 2022 at 14:59)</a>:</h4>
<p><span class="user-mention" data-user-id="459699">@Joël Riou</span> Do you know about <code>has_homology</code>?</p>



<a name="287589892"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/287589892" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#287589892">(Jun 27 2022 at 14:59)</a>:</h4>
<p>It's an LTE only thing, but it should move to mathlib at some point.</p>



<a name="287589903"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/287589903" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#287589903">(Jun 27 2022 at 14:59)</a>:</h4>
<p>It might help here.</p>



<a name="287589999"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/287589999" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#287589999">(Jun 27 2022 at 14:59)</a>:</h4>
<p>It might be very similar to your <code>homology_iso_datum</code>.</p>



<a name="287592229"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/287592229" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joël Riou <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#287592229">(Jun 27 2022 at 15:15)</a>:</h4>
<p>I did not know about <code>has_homology</code>! The structure I suggest is more flexible because in <code>has_homology</code> the homologue of the object <code>K</code> I mention above must <code>kernel g</code> (and not any object <code>K</code> which is <em>a</em> kernel). I will see if <code>has_homology</code> is flexible enough to get the commutation of homology and exact functor.</p>



<a name="287592422"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/287592422" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#287592422">(Jun 27 2022 at 15:16)</a>:</h4>
<p>Agreed. Adam also suggested this generalization to me a while ago.</p>



<a name="287696516"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/287696516" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#287696516">(Jun 28 2022 at 10:24)</a>:</h4>
<p><span class="user-mention" data-user-id="459699">@Joël Riou</span> Did you already settle on a solution for this isomorphism?</p>



<a name="287701682"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/287701682" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#287701682">(Jun 28 2022 at 11:21)</a>:</h4>
<p><code>has_homology_aux2.lean</code> also has some sorries that are harder than they should be.</p>



<a name="287702954"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/287702954" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joël Riou <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#287702954">(Jun 28 2022 at 11:35)</a>:</h4>
<p>I already have a no-sorry draft version of the <code>homology_iso</code>in <code>exact_functor.lean</code>. I am working on cleaning a little bit my API (and proving a few more lemmas), and then most of these sorries could be removed (even though, I may require changing some defs).</p>



<a name="287703009"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/287703009" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#287703009">(Jun 28 2022 at 11:35)</a>:</h4>
<p>Ok, cool! Looking forward to your push.<br>
Thanks a lot for your help!</p>



<a name="287764900"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/287764900" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joël Riou <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#287764900">(Jun 28 2022 at 19:31)</a>:</h4>
<p>I have developed significantly my API. <code>homology_iso</code> is now sorry free. I redefined <code>homology_functor_iso</code>, for which only the naturality remains to be proven (this broke the unfinished proof in <code>ab5.lean</code>, but this should not be a serious problem). At the end of <code>homology_iso_datum.lean</code>, I have defined the <code>homology_iso_datum</code> that computes the homology of a complex, which is basically what you need for the sorries in <code>has_homology_aux2.lean</code>: the last basic step is to complete the constructon of</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">homology_iso_datum.has_homology</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">homology_iso_datum</span> <span class="n">f</span> <span class="n">g</span> <span class="n">H</span><span class="o">)</span> <span class="o">:</span> <span class="n">has_homology</span> <span class="n">f</span> <span class="n">g</span> <span class="n">H</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div>
<p>(I believe I know at least an ugly way to do this: starting from the "canonical" <code>has_homology f g (homology f g)</code>given by <code>homology.has</code> and transport everything by the isomorphisms I have constructed...)</p>



<a name="287765338"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/287765338" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#287765338">(Jun 28 2022 at 19:35)</a>:</h4>
<p>Very nice!</p>



<a name="287765425"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/287765425" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#287765425">(Jun 28 2022 at 19:36)</a>:</h4>
<p>Feel free to turn <code>has_homology_aux2.lean</code> upside down (-;</p>



<a name="287765454"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/287765454" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#287765454">(Jun 28 2022 at 19:36)</a>:</h4>
<p>If you have an (easy) way to kill those 12 sorries, that would be awesome <span aria-label="lol" class="emoji emoji-1f606" role="img" title="lol">:lol:</span></p>



<a name="287788383"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/287788383" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joël Riou <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#287788383">(Jun 28 2022 at 23:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology/near/287765454">said</a>:</p>
<blockquote>
<p>If you have an (easy) way to kill those 12 sorries, that would be awesome <span aria-label="lol" class="emoji emoji-1f606" role="img" title="lol">:lol:</span></p>
</blockquote>
<p>Done! (It was not as ugly as I expected.)</p>



<a name="287804527"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/287804527" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#287804527">(Jun 29 2022 at 03:47)</a>:</h4>
<p>Awesome!</p>



<a name="287809528"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/287809528" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joël Riou <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#287809528">(Jun 29 2022 at 05:39)</a>:</h4>
<p>For <code>eval_functor_homology_iso</code> in <code>homological_complex2.lean</code>, I would have a very drastic simplification of the proof:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">)</span> <span class="o">:</span> <span class="n">preserves_finite_limits</span> <span class="o">((</span><span class="n">evaluation</span> <span class="n">X</span> <span class="bp">𝒜</span><span class="o">)</span><span class="bp">.</span><span class="n">obj</span> <span class="n">x</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">⟨</span><span class="kd">by</span> <span class="o">{</span> <span class="n">intro</span> <span class="n">J</span><span class="o">,</span> <span class="n">introI</span><span class="o">,</span> <span class="n">introI</span><span class="o">,</span> <span class="n">apply</span> <span class="n">limits.evaluation_preserves_limits_of_shape</span><span class="o">,</span> <span class="o">}⟩</span>

<span class="kd">instance</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">)</span> <span class="o">:</span> <span class="n">preserves_finite_colimits</span> <span class="o">((</span><span class="n">evaluation</span> <span class="n">X</span> <span class="bp">𝒜</span><span class="o">)</span><span class="bp">.</span><span class="n">obj</span> <span class="n">x</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">⟨</span><span class="kd">by</span> <span class="o">{</span> <span class="n">intro</span> <span class="n">J</span><span class="o">,</span> <span class="n">introI</span><span class="o">,</span> <span class="n">introI</span><span class="o">,</span> <span class="n">apply</span> <span class="n">limits.evaluation_preserves_colimits_of_shape</span><span class="o">,</span> <span class="o">}⟩</span>

<span class="kd">def</span> <span class="n">functor_eval_homology_iso</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="n">homological_complex</span> <span class="o">(</span><span class="n">X</span> <span class="bp">⥤</span> <span class="bp">𝒜</span><span class="o">)</span> <span class="n">c</span><span class="o">)</span> <span class="o">(</span><span class="n">i</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">G.homology</span> <span class="n">i</span> <span class="bp">≅</span> <span class="n">functor_eval.flip.obj</span> <span class="n">G</span> <span class="bp">⋙</span> <span class="n">homology_functor</span> <span class="n">_</span> <span class="n">c</span> <span class="n">i</span> <span class="o">:=</span>
<span class="n">nat_iso.of_components</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="o">(</span><span class="n">functor.homology_functor_iso</span> <span class="o">((</span><span class="n">evaluation</span> <span class="n">X</span> <span class="bp">𝒜</span><span class="o">)</span><span class="bp">.</span><span class="n">obj</span> <span class="n">x</span><span class="o">)</span> <span class="n">c</span> <span class="n">i</span><span class="o">)</span><span class="bp">.</span><span class="n">app</span> <span class="n">G</span><span class="o">)</span>
<span class="kd">begin</span>
  <span class="gr">sorry</span><span class="o">,</span>
<span class="kd">end</span>

<span class="kd">def</span> <span class="n">eval_functor_homology_iso</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">⥤</span> <span class="n">homological_complex</span> <span class="bp">𝒜</span> <span class="n">c</span><span class="o">)</span> <span class="o">(</span><span class="n">i</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">F</span> <span class="bp">⋙</span> <span class="n">homology_functor</span> <span class="n">_</span> <span class="n">c</span> <span class="n">i</span> <span class="bp">≅</span> <span class="o">(</span><span class="n">eval_functor.obj</span> <span class="n">F</span><span class="o">)</span><span class="bp">.</span><span class="n">homology</span> <span class="n">i</span> <span class="o">:=</span>
<span class="n">iso_whisker_right</span> <span class="o">(</span><span class="n">eval_functor_equiv.unit_iso.app</span> <span class="n">F</span><span class="o">)</span> <span class="o">(</span><span class="n">homology_functor</span> <span class="bp">𝒜</span> <span class="n">c</span> <span class="n">i</span><span class="o">)</span> <span class="bp">≪≫</span>
  <span class="o">(</span><span class="n">functor_eval_homology_iso</span> <span class="o">((</span><span class="bp">@</span><span class="n">eval_functor</span> <span class="n">_</span> <span class="n">X</span> <span class="bp">𝒜</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span> <span class="n">c</span><span class="o">)</span><span class="bp">.</span><span class="n">obj</span> <span class="n">F</span><span class="o">)</span> <span class="n">i</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span>
</code></pre></div>
<p>The only <code>sorry</code> here is the naturality of a map, which should easily follow from the general naturality of the constructions I made in <code>homology_iso_datum</code>. (More precisely it would be the naturality of <code>homology_functor_iso</code> with respect to a natural transformation between exact functors.)</p>



<a name="287809572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/287809572" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#287809572">(Jun 29 2022 at 05:40)</a>:</h4>
<p>Does the rest of the project compile if you use that definition?</p>



<a name="287809585"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/287809585" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#287809585">(Jun 29 2022 at 05:40)</a>:</h4>
<p>Or do changed defeqs mess up other parts of LTE?</p>



<a name="287809885"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/287809885" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joël Riou <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#287809885">(Jun 29 2022 at 05:47)</a>:</h4>
<p>I think it does compile: it is used only in <code>for_mathlib/ab5.lean</code> in an unfinished proof. Anyway, I have to check the naturality mentioned above in order to remove the last <code>sorry</code>  in the proof of <code>homology_functor_iso</code>in <code>exact_functor.lean</code>.</p>



<a name="287809905"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/287809905" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#287809905">(Jun 29 2022 at 05:47)</a>:</h4>
<p>Ok, cool. Feel free to push this already.</p>



<a name="287809990"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/287809990" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#287809990">(Jun 29 2022 at 05:49)</a>:</h4>
<p>I will stop working on that file until you release it <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span></p>



<a name="287810900"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/287810900" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#287810900">(Jun 29 2022 at 06:06)</a>:</h4>
<p>I'm testing your API in <code>breen_deligne/main.lean</code></p>



<a name="287829285"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/287829285" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#287829285">(Jun 29 2022 at 09:46)</a>:</h4>
<p><span class="user-mention" data-user-id="459699">@Joël Riou</span> I've been trying to finish off the sorries at the bottom of the file. But I guess I'm missing tricks on how to use your API, because it's not really going anywhere.</p>



<a name="287852165"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/287852165" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joël Riou <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#287852165">(Jun 29 2022 at 13:23)</a>:</h4>
<p>About the very last <code>sorry</code> in <code>breen_deligne/main.lean</code>, I do not know all the details, but it looks like a compatibility of <code>homology_functor_iso</code> with respect to natural transformations between exact functors (it is not stated nor proved yet in <code>exact_functor.lean</code>), and here the natural transformation would come from the tautological endomorphism on objects in <code>endomorphisms A</code>. Does that make sense?</p>



<a name="287856215"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/287856215" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#287856215">(Jun 29 2022 at 13:50)</a>:</h4>
<p>It makes sense mathematically, but Lean doesn't play ball</p>



<a name="287859218"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/287859218" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#287859218">(Jun 29 2022 at 14:09)</a>:</h4>
<p>Wait, do you mean the <code>sorry</code> in <code>hH0_endo</code>? I don't think all the functors involved are exact. But would you need that? I think they just need to play nice with <code>endomorphisms</code>.</p>



<a name="287872350"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/287872350" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joël Riou <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#287872350">(Jun 29 2022 at 15:29)</a>:</h4>
<p>I am not sure. Now, I am doing my best to stabilize my definitions. There is still some work to do on <code>functor_homology_iso</code>. For now, I suggest you do not rely on the datum in the definition of <code>functor_homology_iso</code>, but you may write some sorried equational lemmas for the basic general compatibilities you need; in principle, I should be able to prove these.</p>



<a name="287873199"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/287873199" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#287873199">(Jun 29 2022 at 15:35)</a>:</h4>
<p>Well, for the next 4 hours, I'm offline anyway (-; Will keep an eye on what you push.</p>



<a name="287876656"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/287876656" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joël Riou <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#287876656">(Jun 29 2022 at 15:56)</a>:</h4>
<p>For the next 4 hours, I teach dance!</p>



<a name="288012139"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/288012139" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joël Riou <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#288012139">(Jun 30 2022 at 11:26)</a>:</h4>
<p>Now, the natural isomorphism <code>homology_functor_iso</code> which expresses that homology of complexes commutes with exact functors is almost sorry free (it relies only on one basic sorry in <code>homology_map_datum.lean</code>. To do that, I introduced the category <code>short_complex C</code> of complexes <code>X ⟶ Y ⟶ Z</code>, and defined the functor which basically sends a <code>K : homological_complex C c</code> to the complex <code>K.X_prev i ⟶ K.X i ⟶ K.X_next i</code>. As the homology of such <code>short_complex</code>es are functorialy well behaved with respect to exact functors (because of <code>homology_nat_iso : (short_complex.homology_functor : short_complex A ⥤ A) ⋙ F ≅ F.map_short_complex ⋙ short_complex.homology_functor</code>), it sufficed to check that the short complex <code>K.X_prev i ⟶ K.X i ⟶ K.X_next i</code> is mapped by <code>F</code> to the corresponding complex for <code>F.map_homological_complex K</code>, which is annoying only because <code>F</code> may not send the chosen <code>0</code> to the chosen <code>0</code>. Eventually, <code>homology_functor_iso</code> is now a composition of 7 natural isomorphisms, 5 of which is basically <code>iso.refl</code> on objects.</p>
<p>I will work now on the last sorry in <code>homology_map_datum.lean</code>, and for that, I will have to prove some equational lemmas relating my constructions will <code>homology.desc'</code>, etc, which should also be helpful in order to proceed with the computations...</p>



<a name="288030817"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/288030817" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joël Riou <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#288030817">(Jun 30 2022 at 13:54)</a>:</h4>
<p>The file <code>for_mathlib/exact_functor.lean</code> is now completely sorry free, and I have established the appropriate equational lemmas <code>iso_hom</code> and <code>iso_inv</code> in <code>homology_map_iso</code>. I believe that what is still missing in order to do computations are basic equational lemmas like <code>homology_functor_iso_hom</code> that would compute <code>homology_functor_iso</code> (this would basically be showing consistency with the first tentative approach to the definition of <code>homology_functor</code>). I shall not do anything more today, but it should be easy to at least state these in the cases that are needed for the computations (depending whether the index <code>i</code> has a given <code>prev</code> and <code>next</code>, or only one of these, etc.).</p>



<a name="288032332"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/288032332" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#288032332">(Jun 30 2022 at 14:04)</a>:</h4>
<p>I'm about to leave on a road trip to NL. Will be back on Saturday.</p>



<a name="288032348"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/288032348" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#288032348">(Jun 30 2022 at 14:04)</a>:</h4>
<p>Thanks for what you've done.</p>



<a name="288032419"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/288032419" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#288032419">(Jun 30 2022 at 14:04)</a>:</h4>
<p>You posted a sketch for the stuff in <code>src/for_mathlib/homological_complex2.lean</code>. I guess you can push that to master now?</p>



<a name="288032483"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/288032483" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#288032483">(Jun 30 2022 at 14:05)</a>:</h4>
<p>Seemed like that would help a lot with those sorries.</p>



<a name="288033262"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/288033262" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joël Riou <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#288033262">(Jun 30 2022 at 14:10)</a>:</h4>
<p>Yes, the last sorry in <code>homological_complex2.lean</code>should be very easy now. I shall try to complete this tomorrow.</p>



<a name="288255505"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/288255505" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#288255505">(Jul 02 2022 at 07:45)</a>:</h4>
<p><span class="user-mention" data-user-id="459699">@Joël Riou</span> It's amazing to see all those sorries vanish. Great job!</p>
<p>Could you please also take a look at this one?<br>
<a href="https://github.com/leanprover-community/lean-liquid/blob/00154e0cab9a03c476ac40224c1b626ce5641682/src/breen_deligne/main.lean#L494">https://github.com/leanprover-community/lean-liquid/blob/00154e0cab9a03c476ac40224c1b626ce5641682/src/breen_deligne/main.lean#L494</a></p>



<a name="288256579"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/288256579" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#288256579">(Jul 02 2022 at 08:13)</a>:</h4>
<p>I just closed the other sorry above it.</p>



<a name="288258555"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/288258555" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joël Riou <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#288258555">(Jul 02 2022 at 09:02)</a>:</h4>
<p>I will try to see what I can do for this. (I may have to translate some defs from <code>has_homology</code> to <code>homology_map_datum</code>, but I will try not to break anything...)<br>
By the way, do we need <code>for_mathlib/derived/homology.lean</code> which does not seem to be imported by any other file? (I could certainly handle these sorries, but not sure if it is worth?).</p>



<a name="288258577"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/288258577" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#288258577">(Jul 02 2022 at 09:03)</a>:</h4>
<p>Yes, I was just looking into that question</p>



<a name="288258646"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/288258646" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#288258646">(Jul 02 2022 at 09:04)</a>:</h4>
<p>I think we might need it for something like <a href="https://github.com/leanprover-community/lean-liquid/blob/master/src/condensed/bd_lemma.lean#L210">https://github.com/leanprover-community/lean-liquid/blob/master/src/condensed/bd_lemma.lean#L210</a></p>



<a name="288258653"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/288258653" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#288258653">(Jul 02 2022 at 09:05)</a>:</h4>
<p>But maybe we can prove that in a different way as well.</p>



<a name="288259005"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/288259005" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joël Riou <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#288259005">(Jul 02 2022 at 09:13)</a>:</h4>
<p>With the commutation of filtered colimits and homology that I just finished, we have already this in <code>for_mathlib/ab5.lean</code>:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">noncomputable</span>
<span class="kd">instance</span> <span class="n">homology_functor_preserves_filtered_colimit</span>
  <span class="o">{</span><span class="n">M</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">complex_shape</span> <span class="n">M</span><span class="o">)</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">M</span><span class="o">)</span>
  <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="n">J</span> <span class="bp">⥤</span> <span class="n">homological_complex</span> <span class="n">A</span> <span class="n">c</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">preserves_colimit</span> <span class="n">F</span> <span class="o">(</span><span class="n">homology_functor</span> <span class="n">A</span> <span class="n">c</span> <span class="n">i</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">preserves_colimit_of_nat_iso</span> <span class="n">F</span> <span class="o">(</span><span class="n">short_complex.homology_functor_iso</span> <span class="n">A</span> <span class="n">c</span> <span class="n">i</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span>
</code></pre></div>
<p>Then, it seems it would sufficient to prove <code>(BD.eval' (forget AddCommGroup.{u+1} ⋙ AddCommGroup.free)</code> commutes with filtered colimits.</p>



<a name="288259082"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/288259082" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#288259082">(Jul 02 2022 at 09:14)</a>:</h4>
<p>Cool, can you make</p>
<blockquote>
<p>prove <code>(BD.eval' (forget AddCommGroup.{u+1} ⋙ AddCommGroup.free)</code> commutes with filtered colimits</p>
</blockquote>
<p>into a new sorry, and close the old one? Then I think we can remove <code>derived/homology.lean</code>.</p>



<a name="288259967"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/288259967" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joël Riou <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#288259967">(Jul 02 2022 at 09:36)</a>:</h4>
<p>Ok, I will do that after I handle the sorry you mentioned about the naturality of <code>eval'_homology</code>.</p>



<a name="288260159"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/288260159" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#288260159">(Jul 02 2022 at 09:40)</a>:</h4>
<p>Merci!</p>



<a name="288272667"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/288272667" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joël Riou <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#288272667">(Jul 02 2022 at 14:19)</a>:</h4>
<p>It seems that I am not able to handle the explicit universe parameters to make this work, but I assume it would not be difficult for you.</p>



<a name="288272759"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/288272759" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#288272759">(Jul 02 2022 at 14:20)</a>:</h4>
<p>But the <code>sorry</code> is gone, right?</p>



<a name="288272764"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/288272764" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#288272764">(Jul 02 2022 at 14:20)</a>:</h4>
<p>Did it move to another place?</p>



<a name="288273780"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/288273780" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joël Riou <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#288273780">(Jul 02 2022 at 14:41)</a>:</h4>
<p>What I was trying to say is that I was not able to deduce <code>preserves_filtered_colimits
  (BD.eval' (forget AddCommGroup.{u+1} ⋙ AddCommGroup.free) ⋙
    homology_functor AddCommGroup.{u+1} (complex_shape.up ℤ) i)</code><br>
from a sorried <code>preserves_filtered_colimits
  (BD.eval' (forget AddCommGroup.{u+1} ⋙ AddCommGroup.free)</code> even though we have <code>preserves_filtered_colimits   homology_functor AddCommGroup.{u+1} (complex_shape.up ℤ) i)</code>, only because I was not able to handle universe parameters with <code>comp_preserves_filtered_colimits</code>.</p>



<a name="288273835"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/288273835" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#288273835">(Jul 02 2022 at 14:42)</a>:</h4>
<p>ooh, ok. Let me try</p>



<a name="288273863"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/288273863" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#288273863">(Jul 02 2022 at 14:43)</a>:</h4>
<p>The universe strikes back!</p>



<a name="288273909"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/288273909" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#288273909">(Jul 02 2022 at 14:44)</a>:</h4>
<p>It will be some subpermutation of <code>.{u+2 u u+1}</code></p>



<a name="288274048"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/288274048" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#288274048">(Jul 02 2022 at 14:48)</a>:</h4>
<p>I now get</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">preserves_finite_colimits.</span><span class="o">{</span><span class="n">u</span><span class="bp">+</span><span class="mi">1</span> <span class="n">u</span><span class="bp">+</span><span class="mi">2</span> <span class="n">u</span><span class="bp">+</span><span class="mi">2</span><span class="o">}</span>
    <span class="o">(</span><span class="n">homology_functor.</span><span class="o">{</span><span class="n">u</span><span class="bp">+</span><span class="mi">1</span> <span class="n">u</span><span class="bp">+</span><span class="mi">2</span> <span class="mi">0</span><span class="o">}</span> <span class="n">AddCommGroup.</span><span class="o">{</span><span class="n">u</span><span class="bp">+</span><span class="mi">1</span><span class="o">}</span> <span class="o">(</span><span class="n">complex_shape.up.</span><span class="o">{</span><span class="mi">0</span><span class="o">}</span> <span class="n">ℤ</span><span class="o">)</span> <span class="n">i</span><span class="o">)</span>
</code></pre></div>



<a name="288274055"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/288274055" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#288274055">(Jul 02 2022 at 14:48)</a>:</h4>
<p>That works?</p>



<a name="288274056"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/288274056" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#288274056">(Jul 02 2022 at 14:48)</a>:</h4>
<p>Wait, something very weird is happening</p>



<a name="288274067"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/288274067" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#288274067">(Jul 02 2022 at 14:49)</a>:</h4>
<p>where is the <code>0</code> coming from?</p>



<a name="288274069"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/288274069" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#288274069">(Jul 02 2022 at 14:49)</a>:</h4>
<p>oh the Z</p>



<a name="288274111"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/288274111" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#288274111">(Jul 02 2022 at 14:50)</a>:</h4>
<p>Oops, I meant</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">preserves_filtered_colimits.</span><span class="o">{</span><span class="n">u</span><span class="bp">+</span><span class="mi">1</span> <span class="n">u</span><span class="bp">+</span><span class="mi">2</span> <span class="n">u</span><span class="bp">+</span><span class="mi">2</span><span class="o">}</span>
    <span class="o">(</span><span class="n">BD.eval'</span> <span class="o">(</span><span class="n">forget.</span><span class="o">{</span><span class="n">u</span><span class="bp">+</span><span class="mi">2</span> <span class="n">u</span><span class="bp">+</span><span class="mi">1</span> <span class="n">u</span><span class="bp">+</span><span class="mi">1</span><span class="o">}</span> <span class="n">AddCommGroup.</span><span class="o">{</span><span class="n">u</span><span class="bp">+</span><span class="mi">1</span><span class="o">}</span> <span class="bp">⋙</span> <span class="n">AddCommGroup.free.</span><span class="o">{</span><span class="n">u</span><span class="bp">+</span><span class="mi">1</span><span class="o">}))</span>
</code></pre></div>
<p>but same problem</p>



<a name="288274117"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/288274117" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#288274117">(Jul 02 2022 at 14:50)</a>:</h4>
<p><span class="user-mention" data-user-id="459699">@Joël Riou</span> You added that somewhere, right?</p>



<a name="288274233"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/288274233" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joël Riou <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#288274233">(Jul 02 2022 at 14:53)</a>:</h4>
<p>I do not think I have added anything about <code>AddCommGroup</code>! I have only proved the <code>preserves_colimit F (homology_functor A c i)</code> from <code>for_mathlib/ab5.lean</code>.</p>



<a name="288274243"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/288274243" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#288274243">(Jul 02 2022 at 14:53)</a>:</h4>
<p>Ok, gotcha</p>



<a name="288274288"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/288274288" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#288274288">(Jul 02 2022 at 14:54)</a>:</h4>
<p>But that sorry should be easy with what we already have.</p>



<a name="288274301"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/288274301" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#288274301">(Jul 02 2022 at 14:54)</a>:</h4>
<p>There's the lemma that reduces it to showing that <code>forget.{u+2 u+1 u+1} AddCommGroup.{u+1} ⋙ AddCommGroup.free.{u+1})</code> preserves filtered colimits, and that's again true by because each of the two functors in the composition preserves such colimits.</p>



<a name="288274318"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/288274318" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#288274318">(Jul 02 2022 at 14:55)</a>:</h4>
<p>And</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">preserves_filtered_colimits.</span><span class="o">{</span><span class="n">u</span><span class="bp">+</span><span class="mi">1</span> <span class="n">u</span><span class="bp">+</span><span class="mi">2</span> <span class="n">u</span><span class="bp">+</span><span class="mi">2</span><span class="o">}</span>
    <span class="o">(</span><span class="n">homology_functor.</span><span class="o">{</span><span class="n">u</span><span class="bp">+</span><span class="mi">1</span> <span class="n">u</span><span class="bp">+</span><span class="mi">2</span> <span class="mi">0</span><span class="o">}</span> <span class="n">AddCommGroup.</span><span class="o">{</span><span class="n">u</span><span class="bp">+</span><span class="mi">1</span><span class="o">}</span> <span class="o">(</span><span class="n">complex_shape.up.</span><span class="o">{</span><span class="mi">0</span><span class="o">}</span> <span class="n">ℤ</span><span class="o">)</span> <span class="n">i</span><span class="o">)</span>
</code></pre></div>
<p>is that conclusion done somewhere?</p>



<a name="288274334"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/288274334" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#288274334">(Jul 02 2022 at 14:56)</a>:</h4>
<p>That should follow from the <code>AB5</code> file.</p>



<a name="288274407"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/288274407" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#288274407">(Jul 02 2022 at 14:57)</a>:</h4>
<p>I suppose TC should just pick it up?</p>



<a name="288274423"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/288274423" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#288274423">(Jul 02 2022 at 14:57)</a>:</h4>
<p>if not the isntance is called <code>category_theory.homology_functor_preserves_filtered_colimits</code></p>



<a name="288274564"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/288274564" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#288274564">(Jul 02 2022 at 15:00)</a>:</h4>
<p>I pushed something that breaks the sorry into pieces.</p>



<a name="288274598"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/288274598" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#288274598">(Jul 02 2022 at 15:01)</a>:</h4>
<p>ok, I'm now importing AB5. Let's see if that helps.</p>



<a name="288274890"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/288274890" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#288274890">(Jul 02 2022 at 15:07)</a>:</h4>
<p>hmm, it aint working, we are missing some instances</p>



<a name="288275007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/288275007" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#288275007">(Jul 02 2022 at 15:09)</a>:</h4>
<p>We also need</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">preserves_filtered_colimits.</span><span class="o">{</span><span class="n">u</span><span class="bp">+</span><span class="mi">1</span> <span class="n">u</span><span class="bp">+</span><span class="mi">2</span> <span class="n">u</span><span class="bp">+</span><span class="mi">2</span><span class="o">}</span> <span class="o">(</span><span class="n">homological_complex.embed.</span><span class="o">{</span><span class="mi">0</span> <span class="mi">0</span> <span class="n">u</span><span class="bp">+</span><span class="mi">2</span> <span class="n">u</span><span class="bp">+</span><span class="mi">1</span><span class="o">}</span> <span class="n">complex_shape.embedding.nat_down_int_up</span><span class="o">)</span>
</code></pre></div>



<a name="288275195"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/288275195" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#288275195">(Jul 02 2022 at 15:13)</a>:</h4>
<p>Oh that might actually be missing</p>



<a name="288276273"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Isomorphisms%20with%20the%20homology/near/288276273" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joël Riou <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Isomorphisms.20with.20the.20homology.html#288276273">(Jul 02 2022 at 15:38)</a>:</h4>
<p>If we have/had a kind of <code>eval_jointly_reflects_colimits</code> or something, it should be easy using <code>embed_comp_eval</code> in <code>complex_extend.lean</code> that I have added today.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>