---
layout: archive
title: Zulip Chat Archive
permalink: /stream/267928-condensed-mathematics/topic/snake.20lemma.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/index.html">condensed mathematics</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html">snake lemma</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="254179148"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254179148" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254179148">(Sep 21 2021 at 09:36)</a>:</h4>
<p><span class="user-mention" data-user-id="130384">@Riccardo Brasca</span> I just pushed a class <code>has_snake_lemma</code>.</p>



<a name="254179186"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254179186" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254179186">(Sep 21 2021 at 09:36)</a>:</h4>
<p>Here is an excerpt:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">class</span> <span class="n">has_snake_lemma</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">δ</span> <span class="o">:</span> <span class="n">snake_input.proj</span> <span class="bp">𝒜</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">2</span><span class="o">)</span> <span class="bp">⟶</span> <span class="n">snake_input.proj</span> <span class="bp">𝒜</span> <span class="o">(</span><span class="mi">3</span><span class="o">,</span><span class="mi">0</span><span class="o">))</span>
<span class="o">(</span><span class="n">exact_δ</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="n">snake_input</span> <span class="bp">𝒜</span><span class="o">),</span> <span class="n">exact</span> <span class="o">((</span><span class="mi">0</span><span class="o">,</span><span class="mi">1</span><span class="o">)</span> <span class="bp">⟶</span><span class="o">[</span><span class="n">D</span><span class="o">]</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">2</span><span class="o">))</span> <span class="o">(</span><span class="n">δ.app</span> <span class="n">D</span><span class="o">))</span>
<span class="o">(</span><span class="n">δ_exact</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="n">snake_input</span> <span class="bp">𝒜</span><span class="o">),</span> <span class="n">exact</span> <span class="o">(</span><span class="n">δ.app</span> <span class="n">D</span><span class="o">)</span> <span class="o">((</span><span class="mi">3</span><span class="o">,</span><span class="mi">0</span><span class="o">)</span> <span class="bp">⟶</span><span class="o">[</span><span class="n">D.1</span><span class="o">]</span> <span class="o">(</span><span class="mi">3</span><span class="o">,</span><span class="mi">1</span><span class="o">)))</span> <span class="c1">-- why can't I write `⟶[D]`</span>

<span class="kn">namespace</span> <span class="n">snake_lemma</span>

<span class="kd">variables</span> <span class="o">[</span><span class="n">has_snake_lemma</span> <span class="bp">𝒜</span><span class="o">]</span>

<span class="kd">variables</span> <span class="o">{</span><span class="bp">𝒜</span><span class="o">}</span>

<span class="kd">def</span> <span class="n">δ</span> <span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="n">snake_input</span> <span class="bp">𝒜</span><span class="o">)</span> <span class="o">:</span> <span class="n">D.obj</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">2</span><span class="o">)</span> <span class="bp">⟶</span> <span class="n">D.obj</span> <span class="o">(</span><span class="mi">3</span><span class="o">,</span><span class="mi">0</span><span class="o">)</span> <span class="o">:=</span> <span class="n">has_snake_lemma.δ.app</span> <span class="n">D</span>

<span class="kd">lemma</span> <span class="n">exact_δ</span> <span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="n">snake_input</span> <span class="bp">𝒜</span><span class="o">)</span> <span class="o">:</span> <span class="n">exact</span> <span class="o">((</span><span class="mi">0</span><span class="o">,</span><span class="mi">1</span><span class="o">)</span> <span class="bp">⟶</span><span class="o">[</span><span class="n">D</span><span class="o">]</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">2</span><span class="o">))</span> <span class="o">(</span><span class="n">δ</span> <span class="n">D</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">has_snake_lemma.exact_δ</span> <span class="n">D</span>

<span class="kd">lemma</span> <span class="n">δ_exact</span> <span class="o">(</span><span class="n">D</span> <span class="o">:</span> <span class="n">snake_input</span> <span class="bp">𝒜</span><span class="o">)</span> <span class="o">:</span> <span class="n">exact</span> <span class="o">(</span><span class="n">δ</span> <span class="n">D</span><span class="o">)</span> <span class="o">((</span><span class="mi">3</span><span class="o">,</span><span class="mi">0</span><span class="o">)</span> <span class="bp">⟶</span><span class="o">[</span><span class="n">D</span><span class="o">]</span> <span class="o">(</span><span class="mi">3</span><span class="o">,</span><span class="mi">1</span><span class="o">))</span> <span class="o">:=</span>
<span class="n">has_snake_lemma.δ_exact</span> <span class="n">D</span>

<span class="kd">end</span> <span class="n">snake_lemma</span>
</code></pre></div>



<a name="254179215"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254179215" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254179215">(Sep 21 2021 at 09:37)</a>:</h4>
<p>The trouble with the snake lemma is that nobody shows that it is functorial.</p>



<a name="254179230"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254179230" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254179230">(Sep 21 2021 at 09:37)</a>:</h4>
<p>But we will certainly need that.</p>



<a name="254179337"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254179337" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254179337">(Sep 21 2021 at 09:38)</a>:</h4>
<p>So I defined a category <code>snake_input</code> consisting of the diagrams to which the snake lemma applies. And <code>has_snake_lemma</code> asserts that there is a <code>δ</code> that snakes through the diagram.</p>



<a name="254179441"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254179441" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254179441">(Sep 21 2021 at 09:39)</a>:</h4>
<p>I also added some wacky definitions. For example, if <code>D</code> is such a diagram, then <code>(0,1) ⟶[D] (0,2)</code> is the arrow in the top right, between the two rightmost kernels.</p>



<a name="254179740"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254179740" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254179740">(Sep 21 2021 at 09:42)</a>:</h4>
<p>You are too fast!<br>
But it seems very good for me: we can already use in practice if we need it and I can work on the proof, right?</p>



<a name="254179742"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254179742" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254179742">(Sep 21 2021 at 09:42)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="sd">/-- The base diagram for the snake lemma. The object are indexed by `fin 4 × fin 3`:</span>

<span class="sd">(0,0) --&gt; (0,1) --&gt; (0,2)              | the kernels</span>
<span class="sd">  |         |         |</span>
<span class="sd">  v         v         v</span>
<span class="sd">(1,0) --&gt; (1,1) --&gt; (1,2)              | the first exact row</span>
<span class="sd">  |         |         |</span>
<span class="sd">  v         v         v</span>
<span class="sd">(2,0) --&gt; (2,1) --&gt; (2,2)              | the second exact row</span>
<span class="sd">  |         |         |</span>
<span class="sd">  v         v         v</span>
<span class="sd">(3,0) --&gt; (3,1) --&gt; (3,2)              | the cokernels</span>

<span class="sd">-/</span>
<span class="kd">@[derive [preorder, decidable_eq]</span><span class="o">]</span>
<span class="kd">def</span> <span class="n">snake_diagram</span> <span class="o">:=</span> <span class="n">fin</span> <span class="mi">4</span> <span class="bp">×</span> <span class="n">fin</span> <span class="mi">3</span>
</code></pre></div>



<a name="254179893"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254179893" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254179893">(Sep 21 2021 at 09:42)</a>:</h4>
<p>Yeah, I hope that with this notation, it is even somewhat usable when proving things.</p>



<a name="254179932"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254179932" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254179932">(Sep 21 2021 at 09:43)</a>:</h4>
<p>If you write down 12 objects and 17 maps, you completely go crazy.</p>



<a name="254180171"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254180171" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254180171">(Sep 21 2021 at 09:45)</a>:</h4>
<p>So now there are two subgoals:</p>
<ol>
<li>show that an abelian category with enough projectives has an instance of <code>has_snake_lemma</code></li>
<li>if you have <code>has_snake_lemma</code> then derived functors are delta functors.</li>
</ol>



<a name="254180564"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254180564" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254180564">(Sep 21 2021 at 09:49)</a>:</h4>
<p>OK, I can work on 1. Is this in some branch?</p>



<a name="254181277"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254181277" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254181277">(Sep 21 2021 at 09:55)</a>:</h4>
<p>It's in <code>master</code>, thank you!</p>



<a name="254186881"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254186881" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254186881">(Sep 21 2021 at 10:48)</a>:</h4>
<p><span class="user-mention" data-user-id="130384">@Riccardo Brasca</span> great. I'll work on (2)</p>



<a name="254229401"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254229401" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254229401">(Sep 21 2021 at 15:45)</a>:</h4>
<p>I see that in <code>is_snake_input</code> you wrote <code>row_exact : ∀ i, exact ((i,0) ⟶[D] (i,1)) ((i,1) ⟶[D] (i,2))</code>. For <code>i = 0</code> and <code>i = 3</code> this is automatic, right? It is part of what I call the snake lemma (easier than working with <code>δ</code> of course). Do we know that <code>ker</code> is left exact?</p>



<a name="254229781"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254229781" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254229781">(Sep 21 2021 at 15:47)</a>:</h4>
<p>Mh, maybe I am confused, but in <code>is_snake_input</code>, where is the condition that <code>F (0,0)</code> is the kernel of <code>F 0 0 ⟶ F 1 0</code>?</p>



<a name="254233152"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254233152" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254233152">(Sep 21 2021 at 16:06)</a>:</h4>
<p><span class="user-mention" data-user-id="130384">@Riccardo Brasca</span> You are right!</p>



<a name="254233199"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254233199" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254233199">(Sep 21 2021 at 16:07)</a>:</h4>
<p>So we should remove those conditions (and add them to <code>has_snake_lemma</code>)</p>



<a name="254233250"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254233250" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254233250">(Sep 21 2021 at 16:07)</a>:</h4>
<p>The kernel condition is the combination of <code>col_exact</code> and <code>mono</code>.</p>



<a name="254234263"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254234263" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254234263">(Sep 21 2021 at 16:13)</a>:</h4>
<p>Ah sure</p>



<a name="254267432"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254267432" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254267432">(Sep 21 2021 at 19:50)</a>:</h4>
<p><span class="user-mention" data-user-id="130384">@Riccardo Brasca</span> I pushed a fix for the <code>is_snake_input</code> stuff.</p>



<a name="254267471"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254267471" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254267471">(Sep 21 2021 at 19:50)</a>:</h4>
<p>So now <code>row_exact₀</code> and <code>row_exact₃</code> are sorried lemmas.</p>



<a name="254299878"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254299878" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254299878">(Sep 22 2021 at 00:50)</a>:</h4>
<p>Looks like <code>for_mathlib/fin_functor</code> is missing?</p>



<a name="254312853"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254312853" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254312853">(Sep 22 2021 at 04:15)</a>:</h4>
<p>Oops, sorry.</p>



<a name="254312862"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254312862" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254312862">(Sep 22 2021 at 04:15)</a>:</h4>
<p>I pushed it</p>



<a name="254331460"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254331460" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254331460">(Sep 22 2021 at 08:19)</a>:</h4>
<p>Is there a reason we have</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">variables</span> <span class="o">(</span><span class="bp">𝒜</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">[</span><span class="n">category.</span><span class="o">{</span><span class="n">v</span><span class="o">}</span> <span class="bp">𝒜</span><span class="o">]</span> <span class="o">[</span><span class="n">has_images</span> <span class="bp">𝒜</span><span class="o">]</span> <span class="o">[</span><span class="n">has_zero_morphisms</span> <span class="bp">𝒜</span><span class="o">]</span> <span class="o">[</span><span class="n">has_kernels</span> <span class="bp">𝒜</span><span class="o">]</span>
</code></pre></div>
<p>instead of</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">variables</span> <span class="o">(</span><span class="bp">𝒜</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">[</span><span class="n">category.</span><span class="o">{</span><span class="n">v</span><span class="o">}</span> <span class="bp">𝒜</span><span class="o">]</span> <span class="o">[</span><span class="n">abelian</span> <span class="bp">𝒜</span><span class="o">]</span>
</code></pre></div>
<p>? The full snake lemma surely need an abelian category, and I don't think it is a reasonable task to check which part need weaker assumptions, unless we really need it...</p>



<a name="254332861"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254332861" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254332861">(Sep 22 2021 at 08:32)</a>:</h4>
<p><span class="user-mention" data-user-id="130384">@Riccardo Brasca</span> certainly just provide the instance under abelian assumptions</p>



<a name="254332890"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254332890" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254332890">(Sep 22 2021 at 08:32)</a>:</h4>
<p>but the definition doesn't need more. And at some point people might want to do exact categories with snake lemmas, or something like that.</p>



<a name="254364604"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254364604" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254364604">(Sep 22 2021 at 13:14)</a>:</h4>
<p>I've started the proof of <code>row_exact₀</code>. It's not that fun, but with the notation you introduced is quite doable. I will try a <code>calc</code> block instead of rewriting everything for the second part, to check which one is better.</p>



<a name="254399108"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254399108" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254399108">(Sep 22 2021 at 16:47)</a>:</h4>
<p><span class="user-mention" data-user-id="130384">@Riccardo Brasca</span> I wanted to play around with pseudoelements to see how hard (or easy) it was and I filled in that sorry in <code>row_exact₀</code>. Do you want me to push, or do you already have a working proof? </p>
<p>I found it quite natural to do this proof along the same lines as a pen-and-paper diagram chase.</p>



<a name="254399190"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254399190" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254399190">(Sep 22 2021 at 16:47)</a>:</h4>
<p>Go ahead!</p>



<a name="254399268"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254399268" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254399268">(Sep 22 2021 at 16:48)</a>:</h4>
<p>Yes, the part with pseudoelements is really the same as with pen and paper, I just wanted to play with Johan's notation</p>



<a name="254399516"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254399516" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254399516">(Sep 22 2021 at 16:49)</a>:</h4>
<p>Okay, it's pushed. One key point I added was this:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">local</span> <span class="kn">attribute</span> <span class="o">[</span><span class="kd">instance</span><span class="o">]</span> <span class="n">abelian.pseudoelement.over_to_sort</span>
  <span class="n">abelian.pseudoelement.hom_to_fun</span>
  <span class="n">abelian.pseudoelement.has_zero</span>
</code></pre></div>
<p>which makes working with pseudoelements very natural</p>



<a name="254400146"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254400146" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254400146">(Sep 22 2021 at 16:53)</a>:</h4>
<p>The definition of <code>δ</code> must be done using universal properties of course,  but then we can again check exactness using pseudoelements.</p>



<a name="254400585"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254400585" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254400585">(Sep 22 2021 at 16:56)</a>:</h4>
<p>The proof I found on the internet uses the interesting ideas that, if the category has enough projectives, then exactness can be checked using "projective pseudoelements" (meaning that the source is projective). I have the impression that working with these is really easier than with general pseudoelements (we can take literally the difference)</p>



<a name="254400939"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254400939" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254400939">(Sep 22 2021 at 16:58)</a>:</h4>
<p>The universal properties should make it easy to construct a morphism from the kernel of the right-most map to the cokernel of the left-most map. We just need to build an isomorphhism between the corresponding objects in the diagram and these kernel/cokernels, whichh can be done using <a href="https://leanprover-community.github.io/mathlib_docs/find/category_theory.abelian.is_iso_of_mono_of_epi">docs#category_theory.abelian.is_iso_of_mono_of_epi</a> and the characterization of (in/bij)ectivity using pseudoelements.</p>



<a name="254404357"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254404357" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254404357">(Sep 22 2021 at 17:18)</a>:</h4>
<p>We have to try, but usually at some point one take the difference of certains elements. I am not sure this works very well with pseudo elements, but I would be happy to be proven wrong</p>



<a name="254404978"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254404978" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254404978">(Sep 22 2021 at 17:22)</a>:</h4>
<p>On the other hand, with enough projectives, a sequence is exact iff for all P projective hom(P, -) is exact. In particular, after having fixed P, we have a genuine sequence of abelian groups, and the usual proof works</p>



<a name="254405151"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254405151" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254405151">(Sep 22 2021 at 17:24)</a>:</h4>
<p>And one can lift along epi, so it's better than usual yoneda</p>



<a name="254405247"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254405247" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254405247">(Sep 22 2021 at 17:24)</a>:</h4>
<p>Aside. I'm quite happy with how this looks:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">variables</span> <span class="o">{</span><span class="bp">𝒜</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">category</span> <span class="bp">𝒜</span><span class="o">]</span> <span class="o">[</span><span class="n">abelian</span> <span class="bp">𝒜</span><span class="o">]</span>

<span class="kn">local</span> <span class="kd">notation</span> <span class="bp">`</span><span class="n">kernel_map</span><span class="bp">`</span>   <span class="o">:=</span> <span class="n">kernel.map</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span>
<span class="kn">local</span> <span class="kd">notation</span> <span class="bp">`</span><span class="n">cokernel_map</span><span class="bp">`</span> <span class="o">:=</span> <span class="n">cokernel.map</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span>

<span class="kd">def</span> <span class="n">mk_of_short_exact_sequence_hom</span> <span class="o">(</span><span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="n">short_exact_sequence</span> <span class="bp">𝒜</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">⟶</span> <span class="n">B</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">snake_diagram</span> <span class="bp">⥤</span> <span class="bp">𝒜</span> <span class="o">:=</span>
<span class="n">mk_functor</span>
<span class="c">/-</span><span class="cm"> == Passing in the matrix of objects first, to make Lean happy == -/</span>
<span class="bp">!</span><span class="o">[</span><span class="bp">!</span><span class="o">[</span><span class="n">kernel</span> <span class="n">f.1</span><span class="o">,</span> <span class="n">kernel</span> <span class="n">f.2</span><span class="o">,</span> <span class="n">kernel</span> <span class="n">f.3</span><span class="o">],</span>
  <span class="bp">!</span><span class="o">[</span><span class="n">A.1</span><span class="o">,</span> <span class="n">A.2</span><span class="o">,</span> <span class="n">A.3</span><span class="o">],</span>
  <span class="bp">!</span><span class="o">[</span><span class="n">B.1</span><span class="o">,</span> <span class="n">B.2</span><span class="o">,</span> <span class="n">B.3</span><span class="o">],</span>
  <span class="bp">!</span><span class="o">[</span><span class="n">cokernel</span> <span class="n">f.1</span><span class="o">,</span> <span class="n">cokernel</span> <span class="n">f.2</span><span class="o">,</span> <span class="n">cokernel</span> <span class="n">f.3</span><span class="o">]]</span>
<span class="c">/-</span><span class="cm"> == All the morphisms in the diagram == -/</span>
  <span class="c">/-</span><span class="cm"> ker f.1 -/</span>   <span class="o">(</span><span class="n">kernel_map</span> <span class="n">f.sq1</span><span class="o">)</span>   <span class="c">/-</span><span class="cm"> ker f.2 -/</span>   <span class="o">(</span><span class="n">kernel_map</span> <span class="n">f.sq2</span><span class="o">)</span>   <span class="c">/-</span><span class="cm"> ker f.3 -/</span>
  <span class="o">(</span><span class="n">kernel.ι</span> <span class="n">_</span><span class="o">)</span>                         <span class="o">(</span><span class="n">kernel.ι</span> <span class="n">_</span><span class="o">)</span>                         <span class="o">(</span><span class="n">kernel.ι</span> <span class="n">_</span><span class="o">)</span>
  <span class="c">/-</span><span class="cm">   A.1   -/</span>          <span class="n">A.f</span>           <span class="c">/-</span><span class="cm">   A.2   -/</span>          <span class="n">A.g</span>           <span class="c">/-</span><span class="cm">   A.3   -/</span>
       <span class="n">f.1</span>                                  <span class="n">f.2</span>                                  <span class="n">f.3</span>
  <span class="c">/-</span><span class="cm">   B.1   -/</span>          <span class="n">B.f</span>           <span class="c">/-</span><span class="cm">   B.2   -/</span>          <span class="n">B.g</span>           <span class="c">/-</span><span class="cm">   B.3   -/</span>
  <span class="o">(</span><span class="n">cokernel.π</span> <span class="n">_</span><span class="o">)</span>                       <span class="o">(</span><span class="n">cokernel.π</span> <span class="n">_</span><span class="o">)</span>                       <span class="o">(</span><span class="n">cokernel.π</span> <span class="n">_</span><span class="o">)</span>
  <span class="c">/-</span><span class="cm"> coker f.1 -/</span> <span class="o">(</span><span class="n">cokernel_map</span> <span class="n">f.sq1</span><span class="o">)</span> <span class="c">/-</span><span class="cm"> coker f.2 -/</span> <span class="o">(</span><span class="n">cokernel_map</span> <span class="n">f.sq2</span><span class="o">)</span> <span class="c">/-</span><span class="cm"> coker f.3 -/</span>
<span class="c">/-</span><span class="cm"> == Prove that the squares commute == -/</span>
<span class="o">(</span><span class="kd">by</span> <span class="o">{</span> <span class="n">delta</span> <span class="n">kernel.map</span><span class="o">,</span> <span class="n">rw</span> <span class="o">[</span><span class="n">kernel.lift_ι</span><span class="o">]</span> <span class="o">})</span> <span class="o">(</span><span class="kd">by</span> <span class="o">{</span> <span class="n">delta</span> <span class="n">kernel.map</span><span class="o">,</span> <span class="n">rw</span> <span class="o">[</span><span class="n">kernel.lift_ι</span><span class="o">]</span> <span class="o">})</span>
<span class="n">f.sq1</span> <span class="n">f.sq2</span>
<span class="o">(</span><span class="kd">by</span> <span class="o">{</span> <span class="n">delta</span> <span class="n">cokernel.map</span><span class="o">,</span> <span class="n">rw</span> <span class="o">[</span><span class="n">cokernel.π_desc</span><span class="o">]</span> <span class="o">})</span> <span class="o">(</span><span class="kd">by</span> <span class="o">{</span> <span class="n">delta</span> <span class="n">cokernel.map</span><span class="o">,</span> <span class="n">rw</span> <span class="o">[</span><span class="n">cokernel.π_desc</span><span class="o">]</span> <span class="o">})</span>
</code></pre></div>



<a name="254405625"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254405625" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254405625">(Sep 22 2021 at 17:27)</a>:</h4>
<p>Very nice!</p>



<a name="254416389"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254416389" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254416389">(Sep 22 2021 at 18:36)</a>:</h4>
<p>I'll work on constructing <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>δ</mi></mrow><annotation encoding="application/x-tex">\delta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span></span></span></span> this afternoon.</p>



<a name="254442995"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254442995" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254442995">(Sep 22 2021 at 21:34)</a>:</h4>
<p>I've added a general skeleton for the construction of delta here:<br>
<a href="https://github.com/leanprover-community/lean-liquid/blob/b87355041bf779b20e4177b4300d19a7aff0ddf6/src/for_mathlib/snake_lemma.lean#L668">https://github.com/leanprover-community/lean-liquid/blob/b87355041bf779b20e4177b4300d19a7aff0ddf6/src/for_mathlib/snake_lemma.lean#L668</a></p>
<p>I'm fairly sure this definition is correct, but a second pair of eyes would be helpful :)</p>



<a name="254478494"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254478494" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254478494">(Sep 23 2021 at 04:23)</a>:</h4>
<p>I'll take a look once I've had breakfast (-;</p>



<a name="254478579"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254478579" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254478579">(Sep 23 2021 at 04:24)</a>:</h4>
<p>I proved one of the main maps was an isomorphism, so I'm more confident now that it's correct ;)</p>



<a name="254536612"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254536612" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254536612">(Sep 23 2021 at 13:40)</a>:</h4>
<p>I am proving <code>row_exact₃</code>.</p>



<a name="254557867"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254557867" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254557867">(Sep 23 2021 at 15:48)</a>:</h4>
<p><code>row_exact₃</code> is <code>sorry</code> free.</p>
<p>Some random comments:</p>
<ul>
<li>this is the first place where <a href="https://leanprover-community.github.io/mathlib_docs/find/category_theory.abelian.pseudoelement.sub_of_eq_image">docs#category_theory.abelian.pseudoelement.sub_of_eq_image</a> is used in this file. Everything worked extremely well, exactly as with pen and paper. I think this is very promising, since <a href="https://leanprover-community.github.io/mathlib_docs/find/category_theory.abelian.pseudoelement.sub_of_eq_image">docs#category_theory.abelian.pseudoelement.sub_of_eq_image</a> replace the difference of pseudoelements, that can not be done in general. So it's possible that even for <code>δ</code> the proof will be as the classical one.</li>
<li>I did</li>
</ul>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">rw</span> <span class="o">[</span><span class="bp">←</span> <span class="n">abelian.pseudoelement.comp_apply</span><span class="o">,</span> <span class="bp">←</span> <span class="n">D.map_comp</span><span class="o">,</span> <span class="n">map_eq</span> <span class="n">hD</span> <span class="o">((</span><span class="n">hom</span> <span class="n">_</span> <span class="n">_</span><span class="o">)</span> <span class="bp">≫</span> <span class="o">(</span><span class="n">hom</span> <span class="n">_</span> <span class="n">_</span><span class="o">))</span> <span class="o">((</span><span class="n">hom</span> <span class="n">_</span> <span class="n">_</span><span class="o">)</span> <span class="bp">≫</span> <span class="o">(</span><span class="n">hom</span> <span class="n">_</span> <span class="n">_</span><span class="o">)),</span>
      <span class="n">D.map_comp</span><span class="o">,</span> <span class="n">abelian.pseudoelement.comp_apply</span><span class="o">]</span>
</code></pre></div>
<p>or something similar several time, and it seems that Adam had to do to the same. Maybe it's reasonable to write a tactic for that, but I have no idea if it's worth the effort.</p>



<a name="254558698"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254558698" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254558698">(Sep 23 2021 at 15:53)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">meta</span> <span class="kd">def</span> <span class="n">riccardos_tactic</span> <span class="o">:</span> <span class="n">tactic</span> <span class="n">unit</span> <span class="o">:=</span>
<span class="bp">`</span><span class="o">[</span><span class="n">rw</span> <span class="o">[</span><span class="bp">←</span> <span class="n">abelian.pseudoelement.comp_apply</span><span class="o">,</span> <span class="bp">←</span> <span class="n">D.map_comp</span><span class="o">,</span> <span class="n">map_eq</span> <span class="n">hD</span> <span class="o">((</span><span class="n">hom</span> <span class="n">_</span> <span class="n">_</span><span class="o">)</span> <span class="bp">≫</span> <span class="o">(</span><span class="n">hom</span> <span class="n">_</span> <span class="n">_</span><span class="o">))</span> <span class="o">((</span><span class="n">hom</span> <span class="n">_</span> <span class="n">_</span><span class="o">)</span> <span class="bp">≫</span> <span class="o">(</span><span class="n">hom</span> <span class="n">_</span> <span class="n">_</span><span class="o">)),</span>
      <span class="n">D.map_comp</span><span class="o">,</span> <span class="n">abelian.pseudoelement.comp_apply</span><span class="o">]]</span>
</code></pre></div>



<a name="254558777"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254558777" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254558777">(Sep 23 2021 at 15:54)</a>:</h4>
<p><span class="user-mention" data-user-id="130384">@Riccardo Brasca</span> Voila: <span aria-label="this" class="emoji emoji-1f446" role="img" title="this">:this:</span> is your tactic</p>



<a name="254558985"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254558985" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254558985">(Sep 23 2021 at 15:55)</a>:</h4>
<p>Oh, that was fast!</p>



<a name="254559344"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254559344" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254559344">(Sep 23 2021 at 15:57)</a>:</h4>
<p>Mmh, sometimes we need it for the composition of three morphisms rather than two, and we also need to specify some <code>_</code>... it doesn't matter, copy/paste is perfectly fine.</p>



<a name="254559425"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254559425" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254559425">(Sep 23 2021 at 15:58)</a>:</h4>
<p>BTW, since we are in a "snake lemma mood", do we need also the very first and very last element of the sequence?</p>



<a name="254559625"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254559625" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254559625">(Sep 23 2021 at 15:59)</a>:</h4>
<p>I mean, using the terminology in <a href="https://en.wikipedia.org/wiki/Snake_lemma">wikipedia</a>, the kernel of the first map of the snake is <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ker</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>f</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\ker(f)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop">ker</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mclose">)</span></span></span></span>, and the cokernel of the last one is <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi mathvariant="normal">c</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">k</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">r</mi></mrow><mo stretchy="false">(</mo><msup><mi>g</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathrm{coker}(g&#x27;)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.001892em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathrm">coker</span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>.</p>



<a name="254559689"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254559689" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254559689">(Sep 23 2021 at 15:59)</a>:</h4>
<p>So we get a 8 terms exact sequence (plus zeros at the beginning and at the end).</p>



<a name="254560135"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254560135" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254560135">(Sep 23 2021 at 16:01)</a>:</h4>
<p>Do we have 8 term exact sequences in mathlib or just short exact sequences and long exact sequences?</p>



<a name="254560391"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254560391" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254560391">(Sep 23 2021 at 16:03)</a>:</h4>
<p>I think we only have <a href="https://leanprover-community.github.io/mathlib_docs/find/category_theory.exact">docs#category_theory.exact</a>, that is about two composable morphisms</p>



<a name="254560518"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254560518" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254560518">(Sep 23 2021 at 16:04)</a>:</h4>
<p>Johan (or someone else) defined</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">structure</span> <span class="n">short_exact_sequence</span> <span class="o">[</span><span class="n">has_images</span> <span class="bp">𝒞</span><span class="o">]</span> <span class="o">[</span><span class="n">has_zero_morphisms</span> <span class="bp">𝒞</span><span class="o">]</span> <span class="o">[</span><span class="n">has_kernels</span> <span class="bp">𝒞</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">fst</span> <span class="n">snd</span> <span class="n">trd</span> <span class="o">:</span> <span class="bp">𝒞</span><span class="o">)</span>
<span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">fst</span> <span class="bp">⟶</span> <span class="n">snd</span><span class="o">)</span>
<span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">snd</span> <span class="bp">⟶</span> <span class="n">trd</span><span class="o">)</span>
<span class="o">[</span><span class="n">mono'</span>  <span class="o">:</span> <span class="n">mono</span> <span class="n">f</span><span class="o">]</span>
<span class="o">[</span><span class="n">epi'</span>   <span class="o">:</span> <span class="n">epi</span> <span class="n">g</span><span class="o">]</span>
<span class="o">[</span><span class="n">exact'</span> <span class="o">:</span> <span class="n">exact</span> <span class="n">f</span> <span class="n">g</span><span class="o">]</span>
</code></pre></div>
<p>in LTE</p>



<a name="254562773"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254562773" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254562773">(Sep 23 2021 at 16:19)</a>:</h4>
<p>I had imagined that the snake lemma was going to be 6 separate statements of the form "I'm exact here"</p>



<a name="254562989"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254562989" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254562989">(Sep 23 2021 at 16:20)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/267928-condensed-mathematics/topic/snake.20lemma/near/254562773">said</a>:</p>
<blockquote>
<p>I had imagined that the snake lemma was going to be 6 separate statements of the form "I'm exact here"</p>
</blockquote>
<p>it probably will be.</p>



<a name="254577484"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254577484" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254577484">(Sep 23 2021 at 17:58)</a>:</h4>
<p>I finished off the last few sorry's needed for the definition of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>δ</mi></mrow><annotation encoding="application/x-tex">\delta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span></span></span></span>. Now we can think about the actual proof of the snake lemma ;)</p>



<a name="254608745"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254608745" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254608745">(Sep 23 2021 at 21:30)</a>:</h4>
<p>One half of the snake lemma is now done in the following form:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">exact_to_δ</span> <span class="o">:</span> <span class="n">exact</span> <span class="o">((</span><span class="mi">0</span><span class="o">,</span><span class="mi">1</span><span class="o">)</span> <span class="bp">⟶</span><span class="o">[</span><span class="n">D</span><span class="o">]</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">2</span><span class="o">))</span> <span class="n">hD.δ</span> <span class="o">:=</span> <span class="bp">...</span>
</code></pre></div>



<a name="254632422"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254632422" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254632422">(Sep 24 2021 at 01:19)</a>:</h4>
<p>The other half is now done as well:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">exact_to_δ</span> <span class="o">:</span> <span class="n">exact</span> <span class="o">((</span><span class="mi">0</span><span class="o">,</span><span class="mi">1</span><span class="o">)</span> <span class="bp">⟶</span><span class="o">[</span><span class="n">D</span><span class="o">]</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">2</span><span class="o">))</span> <span class="n">hD.δ</span> <span class="o">:=</span> <span class="bp">...</span>

<span class="kd">theorem</span> <span class="n">exact_from_δ</span> <span class="o">:</span> <span class="n">exact</span> <span class="n">hD.δ</span> <span class="o">((</span><span class="mi">3</span><span class="o">,</span><span class="mi">0</span><span class="o">)</span> <span class="bp">⟶</span><span class="o">[</span><span class="n">D</span><span class="o">]</span> <span class="o">(</span><span class="mi">3</span><span class="o">,</span><span class="mi">1</span><span class="o">))</span> <span class="o">:=</span> <span class="bp">...</span>
</code></pre></div>



<a name="254643110"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254643110" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254643110">(Sep 24 2021 at 03:02)</a>:</h4>
<p><span class="user-mention" data-user-id="243562">@Adam Topaz</span> Wow, amazing work!</p>



<a name="254644336"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254644336" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254644336">(Sep 24 2021 at 03:20)</a>:</h4>
<p>Thanks! I was a bit careless with nonterminal simps, and many of the proofs can probably be golfed a bit (and hopefully sped up as well). I'll try to do a bit of cleanup soon.</p>



<a name="254645889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254645889" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254645889">(Sep 24 2021 at 03:44)</a>:</h4>
<p><span class="user-mention" data-user-id="243562">@Adam Topaz</span> maybe we should ignore that cleanup for now</p>



<a name="254645928"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254645928" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254645928">(Sep 24 2021 at 03:45)</a>:</h4>
<p>Yesterday I discovered the salamander lemma: <a href="https://ncatlab.org/nlab/show/salamander+lemma">https://ncatlab.org/nlab/show/salamander+lemma</a></p>



<a name="254646026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254646026" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254646026">(Sep 24 2021 at 03:46)</a>:</h4>
<p>Mulling over it yesterday and tonight, I'm now thinking we could have a side project that puts a big fat <strong>E</strong> back in LTE: develop a DSL for double complex diagram chases, together with an integration into the widget framework.</p>



<a name="254646061"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254646061" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254646061">(Sep 24 2021 at 03:47)</a>:</h4>
<p>It would use some sort of proof-by-reflection technique (if I understand correctly what that means)</p>



<a name="254646102"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254646102" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254646102">(Sep 24 2021 at 03:47)</a>:</h4>
<p>Together with integration in the widget framework, this could create pretty slick pointy-clicky proofs that also look good. And they might be quite fast as well.</p>



<a name="254646211"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254646211" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254646211">(Sep 24 2021 at 03:49)</a>:</h4>
<p>Salamander = more evolved snake?</p>



<a name="254646230"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254646230" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254646230">(Sep 24 2021 at 03:49)</a>:</h4>
<p>And it would be a really nice addition to mathlib, that could be used to create pretty proofs of other "double complex" lemmas as well, like the four lemmas, five lemma, 3x3 lemma, LES for a SES of chain complexes.</p>



<a name="254646287"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254646287" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254646287">(Sep 24 2021 at 03:50)</a>:</h4>
<p><span class="user-mention silent" data-user-id="243562">Adam Topaz</span> <a href="#narrow/stream/267928-condensed-mathematics/topic/snake.20lemma/near/254646211">said</a>:</p>
<blockquote>
<p>Salamander = more evolved snake?</p>
</blockquote>
<p>More like: small snake. It provides a toolkit of small building blocks that you assemble to prove things like the snake lemma.</p>



<a name="254646500"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254646500" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254646500">(Sep 24 2021 at 03:53)</a>:</h4>
<p>Ah I see. I'm about to go to sleep... I'll have to look tomorrow. Integrating these arguments with widgets would be amazing!</p>



<a name="254657238"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254657238" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254657238">(Sep 24 2021 at 06:25)</a>:</h4>
<p><span class="user-mention" data-user-id="284160">@Eric Rodriguez</span></p>



<a name="254669116"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254669116" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254669116">(Sep 24 2021 at 08:27)</a>:</h4>
<p><span class="user-mention" data-user-id="243562">@Adam Topaz</span> Amazing!!</p>



<a name="254679445"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254679445" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254679445">(Sep 24 2021 at 10:01)</a>:</h4>
<p>Can someone give me a brief explanation of how a diagram chase (especially a "double complex" one) works? I know very basic category theory (not even limits yet :[) but have been wanting to learn it for a while anyways, and from brief googling it seems to be mostly using properties of monos/epis</p>



<a name="254680820"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254680820" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254680820">(Sep 24 2021 at 10:12)</a>:</h4>
<p>Yeah, that's right. But in this DSL, that would all be hidden away.</p>



<a name="254681009"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254681009" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254681009">(Sep 24 2021 at 10:14)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> <span class="user-mention" data-user-id="243562">@Adam Topaz</span> <span class="user-mention" data-user-id="130384">@Riccardo Brasca</span> Wolfang Soergel just pointed out to me that the <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>δ</mi></mrow><annotation encoding="application/x-tex">\delta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span></span></span></span> in the snake lemma is the <em>unique</em> map from <code>ker c</code> to <code>coker a</code> that is compatible with the natural surjective maps <code>ker diag -&gt; ker c</code> and <code>ker diag -&gt; coker a</code>, where <code>diag</code> is the diagonal map <code>B -&gt; C'</code> in the second square of the snake diagram.</p>



<a name="254681024"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254681024" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254681024">(Sep 24 2021 at 10:14)</a>:</h4>
<p>So you cannot choose <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mi>δ</mi></mrow><annotation encoding="application/x-tex">-\delta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.77777em;vertical-align:-0.08333em;"></span><span class="mord">−</span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span></span></span></span>.</p>



<a name="254681055"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254681055" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254681055">(Sep 24 2021 at 10:15)</a>:</h4>
<p>This universal property will certainly be helpful if we want to prove naturality of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>δ</mi></mrow><annotation encoding="application/x-tex">\delta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span></span></span></span> at some point.</p>



<a name="254681137"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254681137" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254681137">(Sep 24 2021 at 10:15)</a>:</h4>
<p>A simple example with both a words and a picture is in the <a href="https://738.f21.matthewrobertballard.com/notes/2021_09_09/#adapted-objects">notes</a> from my current class. There it is just proving a retract of an exact complex is exact. </p>
<p>The punchline is “take an element and push it around”</p>



<a name="254682347"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254682347" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254682347">(Sep 24 2021 at 10:26)</a>:</h4>
<p>but note that this picture is happening in Mod(R) or implicitly using the Freyd-Mitchell embedding theorem and not really using properties of monic/epics in the categorical sense, otherwise you can't perform the step "there exists <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>b</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></mrow><annotation encoding="application/x-tex">b&#x27;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.751892em;vertical-align:0em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span> sent to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi></mrow><annotation encoding="application/x-tex">b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">b</span></span></span></span>"</p>



<a name="254682565"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254682565" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254682565">(Sep 24 2021 at 10:28)</a>:</h4>
<p>Yes of course</p>



<a name="254682757"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254682757" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254682757">(Sep 24 2021 at 10:30)</a>:</h4>
<p>If you want to be completely precise, you draw some diagrams of Hom spaces instead and really use universal properties.</p>



<a name="254682806"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254682806" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254682806">(Sep 24 2021 at 10:31)</a>:</h4>
<p>Perhaps the biggest caveat is typos <span aria-label="blushing" class="emoji emoji-1f633" role="img" title="blushing">:blushing:</span></p>



<a name="254696078"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254696078" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254696078">(Sep 24 2021 at 12:35)</a>:</h4>
<p>Ah yes, we should prove uniqueness. And it's probably not that hard!</p>



<a name="254696109"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254696109" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254696109">(Sep 24 2021 at 12:35)</a>:</h4>
<p>By the way I am now in love with the salamander lemma!</p>



<a name="254697526"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254697526" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254697526">(Sep 24 2021 at 12:47)</a>:</h4>
<p>I envy you. I've been trying to fall in love with this lemma for years and never managed. I'm always excited each time I start reading that webpage but this excitement doesn't survive until the end of the page.</p>



<a name="254697984"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254697984" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254697984">(Sep 24 2021 at 12:51)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> It took a while for me to click as well.</p>



<a name="254698021"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254698021" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254698021">(Sep 24 2021 at 12:51)</a>:</h4>
<p>Also, it's not clear how to do this in Lean. We need really good data structures to manage these diagrams.</p>



<a name="254698046"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254698046" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254698046">(Sep 24 2021 at 12:51)</a>:</h4>
<p>That's why I think a proof by reflection might help.</p>



<a name="254698973"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254698973" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254698973">(Sep 24 2021 at 12:59)</a>:</h4>
<p>Well, maybe "in love" is a little bit too much...<br>
It's true that we should see in practice if deducing the snake lemma (for example) is really easy from the salamander or not, but at least it gives a general technique.</p>



<a name="254702014"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254702014" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254702014">(Sep 24 2021 at 13:18)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/267928-condensed-mathematics/topic/snake.20lemma/near/254698021">said</a>:</p>
<blockquote>
<p>Also, it's not clear how to do this in Lean. We need really good data structures to manage these diagrams.</p>
</blockquote>
<p>We would also need a nice way to go between e.g. <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi><mi>o</mi><mi>k</mi><mi>e</mi><mi>r</mi><mi>n</mi><mi>e</mi><mi>l</mi><mo stretchy="false">(</mo><mn>0</mn><mo>→</mo><mi>M</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">cokernel(0 \to M)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">co</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mord mathnormal" style="margin-right:0.02778em;">er</span><span class="mord mathnormal">n</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mopen">(</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mclose">)</span></span></span></span>, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mi>e</mi><mi>r</mi><mi>n</mi><mi>e</mi><mi>l</mi><mo stretchy="false">(</mo><mi>M</mi><mo>→</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">kernel(M \to 0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mord mathnormal" style="margin-right:0.02778em;">er</span><span class="mord mathnormal">n</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">0</span><span class="mclose">)</span></span></span></span> and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span> and similarly silly things. I think this will be one of the main annoying points in deducing the snake lemma from the salamander lemma</p>



<a name="254702088"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254702088" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254702088">(Sep 24 2021 at 13:19)</a>:</h4>
<p>Right, but such a DSL could hopefully take care of that</p>



<a name="254703247"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254703247" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254703247">(Sep 24 2021 at 13:26)</a>:</h4>
<p><span class="user-mention" data-user-id="306577">@Matthew Ballard</span> this is the most accurate thing I have ever seen (from your webpage)</p>
<div class="codehilite" data-code-language="Text only"><pre><span></span><code>Learning Outcomes

After successful completion of this course, you will be able to:

    Localize abelian categories for fun and profit
    Draw confusing diagrams that claim to explain the octohedral axiom
    Day dream about stable ∞\infty∞-categories
</code></pre></div>



<a name="254703358"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254703358" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254703358">(Sep 24 2021 at 13:27)</a>:</h4>
<p>Even that has a typo: <del>abelian</del> triangulated</p>



<a name="254714516"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254714516" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254714516">(Sep 24 2021 at 14:37)</a>:</h4>
<p>Also, it's the octahedral axiom. <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span></p>



<a name="254714851"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254714851" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254714851">(Sep 24 2021 at 14:39)</a>:</h4>
<blockquote>
<p>Finally, we ignore TR4) until we actually need it (as is tradition).</p>
</blockquote>



<a name="254715080"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254715080" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254715080">(Sep 24 2021 at 14:40)</a>:</h4>
<p>Though, Neeman's presentation of it is great.</p>



<a name="254716112"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254716112" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254716112">(Sep 24 2021 at 14:47)</a>:</h4>
<p>Perhaps to get the topic back on the rails, I would like to say I am interested in embedding commutative diagrams in some efficient data structure that can be, perhaps, be automated over. Almost any check of this type in practice is a toucan-sam type follow your nose process.</p>



<a name="254716359"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254716359" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254716359">(Sep 24 2021 at 14:49)</a>:</h4>
<p>I also imagine that anything developed would not be limited to bi-complexes but would be applicable to higher dimensional versions.</p>



<a name="254717053"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254717053" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254717053">(Sep 24 2021 at 14:53)</a>:</h4>
<p>The good news is that we now have <a href="https://leanprover-community.github.io/mathlib_docs/find/prefunctor">docs#prefunctor</a> which we can use to model diagrams</p>



<a name="254717465"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254717465" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254717465">(Sep 24 2021 at 14:56)</a>:</h4>
<p>The most naive thing I can think of is picking a node and submodule of that component and pushing it around via images and inverse images.</p>



<a name="254717601"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254717601" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254717601">(Sep 24 2021 at 14:57)</a>:</h4>
<p>We would also need some structure that should let us label which pairs of composable morphisms in the diagram are exact.</p>



<a name="254719468"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254719468" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254719468">(Sep 24 2021 at 15:08)</a>:</h4>
<p>I wonder whether there is some decidable theory lurking around here...</p>



<a name="254932046"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/254932046" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#254932046">(Sep 26 2021 at 13:37)</a>:</h4>
<p><span class="user-mention silent" data-user-id="243562">Adam Topaz</span> <a href="#narrow/stream/267928-condensed-mathematics/topic/snake.20lemma/near/254717601">said</a>:</p>
<blockquote>
<p>We would also need some structure that should let us label which pairs of composable morphisms in the diagram are exact.</p>
</blockquote>
<p>Right. The question can kinda be rephrased as: pass to Grothendieck group and see if this push/pull correspondence is actually a function</p>



<a name="255034559"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/255034559" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#255034559">(Sep 27 2021 at 11:53)</a>:</h4>
<p>Turning the salamander lemma into a nice proof-method is going to be a serious side project. I very much think that it should be done. It would be a beautiful spin-off of LTE.</p>



<a name="255034578"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/255034578" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#255034578">(Sep 27 2021 at 11:53)</a>:</h4>
<p>But I'm not sure LTE should wait for that to finish.</p>



<a name="255034928"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/255034928" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#255034928">(Sep 27 2021 at 11:56)</a>:</h4>
<p>I suggest we continue further discussion of the salamander project in this thread: <a href="#narrow/stream/267928-condensed-mathematics/topic/salamander.20tactic">https://leanprover.zulipchat.com/#narrow/stream/267928-condensed-mathematics/topic/salamander.20tactic</a></p>



<a name="255038675"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/255038675" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#255038675">(Sep 27 2021 at 12:25)</a>:</h4>
<p><span class="user-mention" data-user-id="130384">@Riccardo Brasca</span> Did you prove that <code>(0,0) ⟶[D] (0,1)</code> is a mono if <code>(1,0) ⟶[D] (1,1)</code> is a mono?</p>



<a name="255039268"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/255039268" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#255039268">(Sep 27 2021 at 12:30)</a>:</h4>
<p>Not yet, I can do it today. (The most general statement is, I think, that there is a mono <code>ker((1,0) ⟶[D] (1,1)) ⟶[D] (0,0)</code>.)</p>



<a name="255043053"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/255043053" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#255043053">(Sep 27 2021 at 12:59)</a>:</h4>
<p>I pushed a bit more horseshoe stuff.</p>



<a name="255043354"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/255043354" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#255043354">(Sep 27 2021 at 13:01)</a>:</h4>
<p>One bit of the construction would be to get a short exact sequence of kernels, if the snake diagram has the right shape: i.e., the first "actual" row is short exact, and the first "actual" vertical map is an epi (so that the cokernel vanishes, and <code>δ</code> becomes the zero map. I sketched this construction, but it still has some sorries.</p>



<a name="255059387"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/255059387" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#255059387">(Sep 27 2021 at 14:41)</a>:</h4>
<p>I've proved</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">ker_row₁_to_row₂</span> <span class="o">(</span><span class="n">hD</span> <span class="o">:</span> <span class="n">is_snake_input</span> <span class="n">D</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">kernel.ι</span> <span class="o">((</span><span class="mi">1</span><span class="o">,</span><span class="mi">0</span><span class="o">)</span> <span class="bp">⟶</span><span class="o">[</span><span class="n">D</span><span class="o">]</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">1</span><span class="o">)))</span> <span class="bp">≫</span> <span class="o">((</span><span class="mi">1</span><span class="o">,</span><span class="mi">0</span><span class="o">)</span> <span class="bp">⟶</span><span class="o">[</span><span class="n">D</span><span class="o">]</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span><span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
</code></pre></div>
<p>From here it should be easy to define</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">long_row₀</span> <span class="o">(</span><span class="n">hD</span> <span class="o">:</span> <span class="n">is_snake_input</span> <span class="n">D</span><span class="o">)</span> <span class="o">:</span> <span class="n">kernel</span> <span class="o">((</span><span class="mi">1</span><span class="o">,</span><span class="mi">0</span><span class="o">)</span> <span class="bp">⟶</span><span class="o">[</span><span class="n">D</span><span class="o">]</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">1</span><span class="o">))</span> <span class="bp">⟶</span> <span class="n">D.obj</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div>
<p>but I am little bit lost in the library. If someone wants to contribute please go ahead. The proof of the exactness should be easy using pseudoelements.</p>



<a name="255059919"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/255059919" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#255059919">(Sep 27 2021 at 14:44)</a>:</h4>
<p>To construct this, you probably need to identify <code>D.obj (0,0)</code> with <code>ker ((1,0) \hom[D] (2,0))</code> and compose that with <code>ker.map</code> or <code>ker.\iota</code> and <code>ker.lift</code></p>



<a name="255059951"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/255059951" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#255059951">(Sep 27 2021 at 14:44)</a>:</h4>
<p>I can construct this later today</p>



<a name="255060224"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/255060224" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#255060224">(Sep 27 2021 at 14:45)</a>:</h4>
<p>Yes, the math is clear. I just don't know which is the best path in Lean. Using subobjects? There is <a href="https://leanprover-community.github.io/mathlib_docs/find/category_theory.abelian.is_limit_image'">docs#category_theory.abelian.is_limit_image'</a> that probably says that the image has the universal property of the kernel, but I don't know what a fork is :)</p>



<a name="255061034"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/255061034" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#255061034">(Sep 27 2021 at 14:50)</a>:</h4>
<p>Oh, what I mean is that I think the path I sketched above is the best path ;)</p>



<a name="255061106"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/255061106" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#255061106">(Sep 27 2021 at 14:50)</a>:</h4>
<p>I really don't like subobjects, but maybe I just haven't suffered enough in trying to use them</p>



<a name="255061504"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/255061504" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#255061504">(Sep 27 2021 at 14:52)</a>:</h4>
<p>The point is that the universal property of the kernel lets you define a map from <code>D.obj (0,0)</code> to the kernel of <code>(1,0) -&gt; (2,0)</code>, and pseudoelements can hhelp you prove that this map is an isomorphism.</p>



<a name="255061581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/255061581" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#255061581">(Sep 27 2021 at 14:53)</a>:</h4>
<p>I'm asking because I don't see in mathlib that <code>ker g</code> is isomorphic to <code>image f</code> if <code>exact f g</code> (at least, not explicitly), and usually when such a basic fact is missing is just because it is formulated in a more general way.</p>



<a name="255061694"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/255061694" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#255061694">(Sep 27 2021 at 14:53)</a>:</h4>
<p>Ah, I see what you mean, proving directly that this map is an iso!</p>



<a name="255061847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/255061847" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#255061847">(Sep 27 2021 at 14:54)</a>:</h4>
<p>Take a look for example at what I did in the other corner of the diagram :)<br>
<a href="https://github.com/leanprover-community/lean-liquid/blob/f7435bcd76bb16f1a2748830b59f7999860d35d0/src/for_mathlib/snake_lemma.lean#L859">https://github.com/leanprover-community/lean-liquid/blob/f7435bcd76bb16f1a2748830b59f7999860d35d0/src/for_mathlib/snake_lemma.lean#L859</a></p>



<a name="255061864"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/255061864" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#255061864">(Sep 27 2021 at 14:54)</a>:</h4>
<p>So exactness should follow immediately, nice!</p>



<a name="255061870"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/255061870" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#255061870">(Sep 27 2021 at 14:54)</a>:</h4>
<p>(I have to teach now, but I'll be back later)</p>



<a name="255079135"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/255079135" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#255079135">(Sep 27 2021 at 16:37)</a>:</h4>
<p>I have to stop for today <span aria-label="unamused" class="emoji emoji-1f612" role="img" title="unamused">:unamused:</span></p>



<a name="255079493"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/255079493" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#255079493">(Sep 27 2021 at 16:39)</a>:</h4>
<p>Something's broken in <code>for_mathlib/snake_lemma.lean</code>...</p>



<a name="255080389"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/255080389" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#255080389">(Sep 27 2021 at 16:44)</a>:</h4>
<p>Oh, nevemind. I just had to get the correct mathlib version</p>



<a name="255092066"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/255092066" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#255092066">(Sep 27 2021 at 18:00)</a>:</h4>
<p><span class="user-mention" data-user-id="130384">@Riccardo Brasca</span> I replaced <code>epi_iff_exact_zero_right'</code> with <a href="https://leanprover-community.github.io/mathlib_docs/find/category_theory.abelian.tfae_epi">docs#category_theory.abelian.tfae_epi</a> in the epi proof for <code>kernel_sequence</code>, which fixed the error in <code>for_mathlib/snake_lemma</code>.</p>



<a name="255093096"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/255093096" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#255093096">(Sep 27 2021 at 18:06)</a>:</h4>
<p>Merci. I didn't know about that <code>tfae_epi</code></p>



<a name="255094456"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/255094456" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#255094456">(Sep 27 2021 at 18:14)</a>:</h4>
<p>Me neither! I went to prove it for a mathlib PR and there it was!</p>



<a name="255094657"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/255094657" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#255094657">(Sep 27 2021 at 18:15)</a>:</h4>
<p>the same file also has the useful <a href="https://leanprover-community.github.io/mathlib_docs/find/category_theory.abelian.exact_cokernel">docs#category_theory.abelian.exact_cokernel</a> but it's missing the analogue for kernels.</p>



<a name="255191275"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/255191275" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#255191275">(Sep 28 2021 at 10:06)</a>:</h4>
<p>I've added</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">ker_row₁_to_top_left</span> <span class="o">(</span><span class="n">hD</span> <span class="o">:</span> <span class="n">is_snake_input</span> <span class="n">D</span><span class="o">)</span> <span class="o">:</span> <span class="n">kernel</span> <span class="o">((</span><span class="mi">1</span><span class="o">,</span><span class="mi">0</span><span class="o">)</span> <span class="bp">⟶</span><span class="o">[</span><span class="n">D</span><span class="o">]</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">1</span><span class="o">))</span> <span class="bp">⟶</span> <span class="n">D.obj</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="o">{</span> <span class="n">letI</span> <span class="o">:=</span> <span class="n">hD.col_mono</span> <span class="mi">0</span><span class="o">,</span> <span class="n">exact</span> <span class="o">(</span><span class="n">limits.kernel.lift</span> <span class="n">_</span> <span class="n">_</span> <span class="o">(</span><span class="n">ker_row₁_to_row₂</span> <span class="n">hD</span><span class="o">))</span> <span class="bp">≫</span>
    <span class="o">(</span><span class="n">limits.kernel.lift</span> <span class="n">_</span> <span class="n">_</span> <span class="o">(((</span><span class="n">abelian.exact_iff</span> <span class="n">_</span> <span class="n">_</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span> <span class="o">(</span><span class="n">hD.col_exact₁</span> <span class="mi">0</span><span class="o">))</span><span class="bp">.</span><span class="mi">2</span><span class="o">))</span> <span class="bp">≫</span>
    <span class="n">inv</span> <span class="o">(</span><span class="n">abelian.images.factor_thru_image</span> <span class="o">((</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">)</span> <span class="bp">⟶</span><span class="o">[</span><span class="n">D</span><span class="o">]</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">0</span><span class="o">)))</span> <span class="o">}</span>
</code></pre></div>
<p>The map from the first kernel of the second row to the top left element.  This become zero when composed with <code>(0,0) ⟶[D] (0,1)</code>, but to prove this I need</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">ker_row₁_to_top_left_comp_eq_ι</span> <span class="o">(</span><span class="n">hD</span> <span class="o">:</span> <span class="n">is_snake_input</span> <span class="n">D</span><span class="o">)</span> <span class="o">:</span> <span class="n">ker_row₁_to_top_left</span> <span class="n">hD</span> <span class="bp">≫</span>
  <span class="o">((</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">)</span> <span class="bp">⟶</span><span class="o">[</span><span class="n">D</span><span class="o">]</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">0</span><span class="o">))</span> <span class="bp">=</span> <span class="n">kernel.ι</span> <span class="o">((</span><span class="mi">1</span><span class="o">,</span><span class="mi">0</span><span class="o">)</span> <span class="bp">⟶</span><span class="o">[</span><span class="n">D</span><span class="o">]</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">1</span><span class="o">))</span>
</code></pre></div>
<p>I am not sure the definition of <code>ker_row₁_to_top_left</code> is the best one, it goes through <a href="https://leanprover-community.github.io/mathlib_docs/find/category_theory.abelian.images.is_iso_factor_thru_image">docs#category_theory.abelian.images.is_iso_factor_thru_image</a> that complicates life a little. If someone wants to prove <code>ker_row₁_to_top_left_comp_eq_ι</code> (even changing <code>ker_row₁_to_top_left </code>) please go ahead. I will resume working on this in one or two hours.</p>



<a name="255212503"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/255212503" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#255212503">(Sep 28 2021 at 13:05)</a>:</h4>
<p><span class="user-mention silent" data-user-id="243562">Adam Topaz</span> <a href="#narrow/stream/267928-condensed-mathematics/topic/snake.20lemma/near/255094657">said</a>:</p>
<blockquote>
<p>the same file also has the useful <a href="https://leanprover-community.github.io/mathlib_docs/find/category_theory.abelian.exact_cokernel">docs#category_theory.abelian.exact_cokernel</a> but it's missing the analogue for kernels.</p>
</blockquote>
<p>The dual is <a href="https://leanprover-community.github.io/mathlib_docs/find/category_theory.exact_kernel_ι">docs#category_theory.exact_kernel_ι</a>, isn't it?</p>



<a name="255212906"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/255212906" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#255212906">(Sep 28 2021 at 13:08)</a>:</h4>
<p>Yes!</p>



<a name="255215208"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/255215208" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#255215208">(Sep 28 2021 at 13:23)</a>:</h4>
<p>I've extended the snake to the left: <code>ker_row₁_to_top_left: kernel ((1,0) ⟶[D] (1,1))  ⟶ D.obj (0,0)</code> is a mono, and <code>exact (ker_row₁_to_top_left hD) ((0,0) ⟶[D] (0,1))</code>, in particular if <code>(1,0) ⟶[D] (1,1)</code> is a mono then <code>(0,0) ⟶[D] (0,1)</code> is a mono.</p>



<a name="255215371"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/255215371" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#255215371">(Sep 28 2021 at 13:24)</a>:</h4>
<p>The dual statement should have the same proof.</p>



<a name="255416611"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/255416611" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#255416611">(Sep 29 2021 at 15:13)</a>:</h4>
<p>It's not as readable as I would like, but it works:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">six_term_exact_seq</span> <span class="o">(</span><span class="n">hD</span> <span class="o">:</span> <span class="n">is_snake_input</span> <span class="n">D</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">exact_seq</span> <span class="bp">𝒜</span> <span class="o">[(</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">)</span> <span class="bp">⟶</span><span class="o">[</span><span class="n">D</span><span class="o">]</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">1</span><span class="o">),</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">1</span><span class="o">)</span> <span class="bp">⟶</span><span class="o">[</span><span class="n">D</span><span class="o">]</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">2</span><span class="o">),</span> <span class="n">hD.δ</span><span class="o">,</span> <span class="o">(</span><span class="mi">3</span><span class="o">,</span><span class="mi">0</span><span class="o">)</span> <span class="bp">⟶</span><span class="o">[</span><span class="n">D</span><span class="o">]</span> <span class="o">(</span><span class="mi">3</span><span class="o">,</span><span class="mi">1</span><span class="o">),</span> <span class="o">(</span><span class="mi">3</span><span class="o">,</span><span class="mi">1</span><span class="o">)</span> <span class="bp">⟶</span><span class="o">[</span><span class="n">D</span><span class="o">]</span> <span class="o">(</span><span class="mi">3</span><span class="o">,</span><span class="mi">2</span><span class="o">)]</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">refine</span> <span class="n">exact_seq.cons</span> <span class="n">_</span> <span class="n">_</span> <span class="n">hD.row_exact₀</span> <span class="n">_</span> <span class="n">_</span><span class="o">,</span>
  <span class="n">refine</span> <span class="n">exact_seq.cons</span> <span class="n">_</span> <span class="n">_</span> <span class="n">hD.exact_to_δ</span> <span class="n">_</span> <span class="n">_</span><span class="o">,</span>
  <span class="n">refine</span> <span class="n">exact_seq.cons</span> <span class="n">_</span> <span class="n">_</span> <span class="n">hD.exact_from_δ</span> <span class="n">_</span> <span class="n">_</span><span class="o">,</span>
  <span class="n">refine</span> <span class="n">exact_seq.cons</span> <span class="n">_</span> <span class="n">_</span> <span class="n">hD.row_exact₃</span> <span class="n">_</span> <span class="n">_</span><span class="o">,</span>
  <span class="n">refine</span> <span class="n">exact_seq.single</span> <span class="n">_</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="255425564"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/255425564" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#255425564">(Sep 29 2021 at 16:04)</a>:</h4>
<p>I think it looks quite good actually!</p>



<a name="255425651"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/255425651" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#255425651">(Sep 29 2021 at 16:05)</a>:</h4>
<p>We could develop some API for <code>exact_seq</code>similar to all the stuff we have for <code>tfae</code>.</p>



<a name="255430093"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/255430093" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#255430093">(Sep 29 2021 at 16:32)</a>:</h4>
<p>I just wrote a <code>congr</code> lemma for it.</p>



<a name="255431138"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/255431138" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#255431138">(Sep 29 2021 at 16:38)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">six_term_exact_seq</span> <span class="o">{</span><span class="n">C</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">category</span> <span class="n">C</span><span class="o">]</span> <span class="o">[</span><span class="n">abelian</span> <span class="n">C</span><span class="o">]</span>
  <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">chain_complex</span> <span class="o">(</span><span class="n">short_exact_sequence</span> <span class="n">C</span><span class="o">)</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">exact_seq</span> <span class="n">C</span> <span class="o">[</span>
    <span class="o">(</span><span class="n">homology_functor</span> <span class="n">_</span> <span class="n">_</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span><span class="bp">.</span><span class="n">map</span> <span class="o">((</span><span class="n">Fst_Snd</span> <span class="n">C</span><span class="o">)</span><span class="bp">.</span><span class="n">app</span> <span class="n">A</span><span class="o">),</span> <span class="c1">-- Hⁿ⁺¹(A₁) ⟶ Hⁿ⁺¹(A₂)</span>
    <span class="o">(</span><span class="n">homology_functor</span> <span class="n">_</span> <span class="n">_</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span><span class="bp">.</span><span class="n">map</span> <span class="o">((</span><span class="n">Snd_Trd</span> <span class="n">C</span><span class="o">)</span><span class="bp">.</span><span class="n">app</span> <span class="n">A</span><span class="o">),</span> <span class="c1">-- Hⁿ⁺¹(A₂) ⟶ Hⁿ⁺¹(A₃)</span>
    <span class="n">δ</span> <span class="n">n</span> <span class="n">A</span><span class="o">,</span>                                                <span class="c1">-- Hⁿ⁺¹(A₃) ⟶ Hⁿ(A₁)</span>
    <span class="o">(</span><span class="n">homology_functor</span> <span class="n">_</span> <span class="n">_</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">map</span> <span class="o">((</span><span class="n">Fst_Snd</span> <span class="n">C</span><span class="o">)</span><span class="bp">.</span><span class="n">app</span> <span class="n">A</span><span class="o">),</span>     <span class="c1">-- Hⁿ(A₁)   ⟶ Hⁿ(A₂)</span>
    <span class="o">(</span><span class="n">homology_functor</span> <span class="n">_</span> <span class="n">_</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">map</span> <span class="o">((</span><span class="n">Snd_Trd</span> <span class="n">C</span><span class="o">)</span><span class="bp">.</span><span class="n">app</span> <span class="n">A</span><span class="o">)</span>      <span class="c1">-- Hⁿ(A₁)   ⟶ Hⁿ(A₃)</span>
  <span class="o">]</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">have</span> <span class="n">key</span> <span class="o">:=</span> <span class="o">(</span><span class="n">snake_input</span> <span class="n">n</span> <span class="n">A</span><span class="o">)</span><span class="bp">.</span><span class="mi">2</span><span class="bp">.</span><span class="n">six_term_exact_seq</span><span class="o">,</span>
  <span class="n">dsimp</span> <span class="n">only</span> <span class="o">[</span><span class="n">snake_input</span><span class="o">,</span> <span class="n">snake_diagram</span><span class="o">,</span>
    <span class="n">snake_diagram.mk_functor''</span><span class="o">,</span> <span class="n">snake_diagram.mk_functor'</span><span class="o">]</span> <span class="n">at</span> <span class="n">key</span><span class="o">,</span>
  <span class="n">refine</span> <span class="n">exact_seq.congr</span> <span class="n">key</span> <span class="n">_</span><span class="o">,</span> <span class="n">clear</span> <span class="n">key</span><span class="o">,</span>
  <span class="n">iterate</span> <span class="mi">5</span> <span class="o">{</span> <span class="n">refine</span> <span class="n">exact_seq.arrow_congr.cons</span> <span class="n">_</span> <span class="n">_</span><span class="o">,</span> <span class="n">rotate</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">apply</span> <span class="n">exact_seq.arrow_congr.nil</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">apply</span> <span class="n">snake_diagram.mk_functor_map_f0</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">apply</span> <span class="n">snake_diagram.mk_functor_map_g0</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">refl</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">apply</span> <span class="n">snake_diagram.mk_functor_map_f3</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">apply</span> <span class="n">snake_diagram.mk_functor_map_g3</span> <span class="o">},</span>
<span class="kd">end</span>
</code></pre></div>



<a name="255431220"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/255431220" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#255431220">(Sep 29 2021 at 16:39)</a>:</h4>
<p>The six term exact sequence for a "chain complex of short exact sequences" = "short exact sequence of chain complexes".</p>



<a name="255444359"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/255444359" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#255444359">(Sep 29 2021 at 17:59)</a>:</h4>
<p>I've added <code>bottom_right_to_coker_row₂ : D.obj (3, 2) ⟶ cokernel ((2,1) ⟶[D] (2,2))</code>, the last map in the "long snake". I don't think I will have time to work on it tomorrow, so if someone wants to prove that it is an epi and exactness in the last step please go ahead, The proofs should be similar to those of <code>ker_row₁_to_top_left_mono</code> and <code>long_row₀_exact</code>.</p>



<a name="255444934"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/255444934" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#255444934">(Sep 29 2021 at 18:02)</a>:</h4>
<p>Thanks!</p>



<a name="255584055"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/255584055" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#255584055">(Sep 30 2021 at 14:30)</a>:</h4>
<p>I've proved <code>long_row₃_exact</code>. So the snake is an exact sequence of 10 terms (the first and the last are <code>0</code>).</p>



<a name="255595934"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/255595934" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#255595934">(Sep 30 2021 at 15:41)</a>:</h4>
<p>So this</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">eight_term_exact_seq</span> <span class="o">(</span><span class="n">hD</span> <span class="o">:</span> <span class="n">is_snake_input</span> <span class="n">D</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">exact_seq</span> <span class="bp">𝒜</span> <span class="o">[</span><span class="n">hD.ker_row₁_to_top_left</span><span class="o">,</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">)</span> <span class="bp">⟶</span><span class="o">[</span><span class="n">D</span><span class="o">]</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">1</span><span class="o">),</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">1</span><span class="o">)</span> <span class="bp">⟶</span><span class="o">[</span><span class="n">D</span><span class="o">]</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">2</span><span class="o">),</span>
  <span class="n">hD.δ</span><span class="o">,</span>
  <span class="o">(</span><span class="mi">3</span><span class="o">,</span><span class="mi">0</span><span class="o">)</span> <span class="bp">⟶</span><span class="o">[</span><span class="n">D</span><span class="o">]</span> <span class="o">(</span><span class="mi">3</span><span class="o">,</span><span class="mi">1</span><span class="o">),</span> <span class="o">(</span><span class="mi">3</span><span class="o">,</span><span class="mi">1</span><span class="o">)</span> <span class="bp">⟶</span><span class="o">[</span><span class="n">D</span><span class="o">]</span> <span class="o">(</span><span class="mi">3</span><span class="o">,</span><span class="mi">2</span><span class="o">),</span> <span class="n">hD.bottom_right_to_coker_row₂</span><span class="o">]</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">refine</span> <span class="n">exact_seq.cons</span> <span class="n">_</span> <span class="n">_</span> <span class="n">hD.long_row₀_exact</span> <span class="n">_</span> <span class="n">_</span><span class="o">,</span>
  <span class="n">refine</span> <span class="n">exact_seq.cons</span> <span class="n">_</span> <span class="n">_</span> <span class="n">hD.row_exact₀</span> <span class="n">_</span> <span class="n">_</span><span class="o">,</span>
  <span class="n">refine</span> <span class="n">exact_seq.cons</span> <span class="n">_</span> <span class="n">_</span> <span class="n">hD.exact_to_δ</span> <span class="n">_</span> <span class="n">_</span><span class="o">,</span>
  <span class="n">refine</span> <span class="n">exact_seq.cons</span> <span class="n">_</span> <span class="n">_</span> <span class="n">hD.exact_from_δ</span> <span class="n">_</span> <span class="n">_</span><span class="o">,</span>
  <span class="n">refine</span> <span class="n">exact_seq.cons</span> <span class="n">_</span> <span class="n">_</span> <span class="n">hD.row_exact₃</span> <span class="n">_</span> <span class="n">_</span><span class="o">,</span>
  <span class="n">refine</span> <span class="n">exact_seq.cons</span> <span class="n">_</span> <span class="n">_</span> <span class="n">hD.long_row₃_exact</span> <span class="n">_</span> <span class="n">_</span><span class="o">,</span>
  <span class="n">refine</span> <span class="n">exact_seq.single</span> <span class="n">_</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>
<p>works well.  I tried to add the zero at the beginning, but Lean is not happy and wants <code>has_zero (arrow 𝒜)</code>.</p>



<a name="255596613"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/255596613" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#255596613">(Sep 30 2021 at 15:45)</a>:</h4>
<p>I think if you pass in <code>(0 : 0 \hom ??)</code> for the correct <code>??</code>, it will work (there is a coercion from morphisms to arrows)</p>



<a name="255597998"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/255597998" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#255597998">(Sep 30 2021 at 15:53)</a>:</h4>
<p>E.g.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">local</span> <span class="kn">attribute</span> <span class="o">[</span><span class="kd">instance</span><span class="o">]</span> <span class="n">limits.has_zero_object.has_zero</span>

<span class="kd">lemma</span> <span class="n">eight_term_exact_seq</span> <span class="o">(</span><span class="n">hD</span> <span class="o">:</span> <span class="n">is_snake_input</span> <span class="n">D</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">exact_seq</span> <span class="bp">𝒜</span> <span class="o">[</span>
    <span class="o">(</span><span class="mi">0</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">⟶</span> <span class="n">kernel</span> <span class="o">((</span><span class="mi">1</span><span class="o">,</span><span class="mi">0</span><span class="o">)</span> <span class="bp">⟶</span><span class="o">[</span><span class="n">D</span><span class="o">]</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">1</span><span class="o">))),</span>
    <span class="n">hD.ker_row₁_to_top_left</span><span class="o">,</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">)</span> <span class="bp">⟶</span><span class="o">[</span><span class="n">D</span><span class="o">]</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">1</span><span class="o">),</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">1</span><span class="o">)</span> <span class="bp">⟶</span><span class="o">[</span><span class="n">D</span><span class="o">]</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">2</span><span class="o">),</span>
    <span class="n">hD.δ</span><span class="o">,</span>
    <span class="o">(</span><span class="mi">3</span><span class="o">,</span><span class="mi">0</span><span class="o">)</span> <span class="bp">⟶</span><span class="o">[</span><span class="n">D</span><span class="o">]</span> <span class="o">(</span><span class="mi">3</span><span class="o">,</span><span class="mi">1</span><span class="o">),</span> <span class="o">(</span><span class="mi">3</span><span class="o">,</span><span class="mi">1</span><span class="o">)</span> <span class="bp">⟶</span><span class="o">[</span><span class="n">D</span><span class="o">]</span> <span class="o">(</span><span class="mi">3</span><span class="o">,</span><span class="mi">2</span><span class="o">),</span> <span class="n">hD.bottom_right_to_coker_row₂</span><span class="o">,</span>
    <span class="o">(</span><span class="mi">0</span> <span class="o">:</span> <span class="n">cokernel</span> <span class="o">((</span><span class="mi">2</span><span class="o">,</span><span class="mi">1</span><span class="o">)</span> <span class="bp">⟶</span><span class="o">[</span><span class="n">D</span><span class="o">]</span> <span class="o">(</span><span class="mi">2</span><span class="o">,</span><span class="mi">2</span><span class="o">))</span> <span class="bp">⟶</span> <span class="mi">0</span><span class="o">)]</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="gr">sorry</span><span class="o">,</span>
  <span class="c">/-</span><span class="cm"></span>
<span class="cm">  refine exact_seq.cons _ _ hD.long_row₀_exact _ _,</span>
<span class="cm">  refine exact_seq.cons _ _ hD.row_exact₀ _ _,</span>
<span class="cm">  refine exact_seq.cons _ _ hD.exact_to_δ _ _,</span>
<span class="cm">  refine exact_seq.cons _ _ hD.exact_from_δ _ _,</span>
<span class="cm">  refine exact_seq.cons _ _ hD.row_exact₃ _ _,</span>
<span class="cm">  refine exact_seq.cons _ _ hD.long_row₃_exact _ _,</span>
<span class="cm">  refine exact_seq.single _,</span>
<span class="cm">  -/</span>
<span class="kd">end</span>
</code></pre></div>



<a name="255599071"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/255599071" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#255599071">(Sep 30 2021 at 15:59)</a>:</h4>
<p>I added the zeros :) (and pushed)</p>



<a name="255600023"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/255600023" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#255600023">(Sep 30 2021 at 16:05)</a>:</h4>
<p>Nice!</p>



<a name="255663592"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/255663592" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#255663592">(Sep 30 2021 at 23:09)</a>:</h4>
<p>I don't see the difference with what I wrote, but your code works :)<br>
We now have <code>ten_term_exact_seq</code>, <code>eight_term_exact_seq</code>, and <code>six_term_exact_seq</code>.</p>



<a name="255663710"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/255663710" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#255663710">(Sep 30 2021 at 23:10)</a>:</h4>
<p>I added the <code>local [instance]</code> too :) That may have been missing?</p>



<a name="255663894"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/255663894" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#255663894">(Sep 30 2021 at 23:12)</a>:</h4>
<p>Maybe... it's time to go to bed for me</p>



<a name="256381883"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/256381883" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#256381883">(Oct 06 2021 at 09:23)</a>:</h4>
<p>Do we need naturality of the snake somewhere?</p>



<a name="256381970"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/256381970" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#256381970">(Oct 06 2021 at 09:24)</a>:</h4>
<p>I don't think so</p>



<a name="267312552"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/267312552" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#267312552">(Jan 08 2022 at 20:03)</a>:</h4>
<p>You know these 1-picture-proofs of Pythagoras? Like <a href="https://betterexplained.com/wp-content/uploads/2016/10/pythagorean-proof.png">https://betterexplained.com/wp-content/uploads/2016/10/pythagorean-proof.png</a></p>
<div class="message_inline_image"><a href="https://betterexplained.com/wp-content/uploads/2016/10/pythagorean-proof.png"><img src="https://uploads.zulipusercontent.net/cfb4a9811f5fb41e329f4e5b08676e91d44f8296/68747470733a2f2f6265747465726578706c61696e65642e636f6d2f77702d636f6e74656e742f75706c6f6164732f323031362f31302f7079746861676f7265616e2d70726f6f662e706e67"></a></div><p><a href="https://www.3blue1brown.com/content/blog/exact-sequence-picturebook/PuzzlingThroughExactSequences.pdf">https://www.3blue1brown.com/content/blog/exact-sequence-picturebook/PuzzlingThroughExactSequences.pdf</a> by Ravi Vakil contains a proof of the snake lemma (page 23) in one picture.</p>



<a name="267312855"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/snake%20lemma/near/267312855" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/snake.20lemma.html#267312855">(Jan 08 2022 at 20:09)</a>:</h4>
<p><span aria-label="lizard" class="emoji emoji-1f98e" role="img" title="lizard">:lizard:</span></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>