---
layout: archive
title: Zulip Chat Archive
permalink: /stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/index.html">condensed mathematics</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html">spaces of measures / R</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="253575946"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253575946" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253575946">(Sep 16 2021 at 12:52)</a>:</h4>
<p>Do I understand correctly that we do not yet have a definition of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi mathvariant="script">M</mi><mi>p</mi></msub><mo stretchy="false">(</mo><mi>S</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathcal M_{p}(S)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathcal">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mclose">)</span></span></span></span> as comphausly filtered pseudo-normed group in Lean?</p>



<a name="253576153"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253576153" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253576153">(Sep 16 2021 at 12:53)</a>:</h4>
<p><span class="user-mention" data-user-id="300245">@Filippo A. E. Nuccio</span> is working hard on Thm 6.9. Once we have that, we want to show that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi mathvariant="script">M</mi><mi>p</mi></msub><mo stretchy="false">(</mo><mi>S</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathcal M_p(S)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathcal">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mclose">)</span></span></span></span> is a quotient of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="script">M</mi><mo stretchy="false">(</mo><mi>S</mi><mo separator="true">,</mo><mi mathvariant="double-struck">Z</mi><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mi>T</mi><mo stretchy="false">)</mo><msub><mo stretchy="false">)</mo><msup><mi>r</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathcal M(S, \Z((T))_{r&#x27;})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathcal">M</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathbb">Z</span><span class="mopen">((</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mclose">)</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32797999999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828285714285715em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> (for suitable <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>r</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></mrow><annotation encoding="application/x-tex">r&#x27;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.751892em;vertical-align:0em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span>). I think this space of "integral Laurent measures" is more or less completely formalized.</p>



<a name="253576499"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253576499" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253576499">(Sep 16 2021 at 12:56)</a>:</h4>
<p>I confess I have a bit lost track of what was going on outside of Thm 6.9, so I can't be of much help. I honestly don't even know if we already have that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">R</mi></mrow><annotation encoding="application/x-tex">\mathbb{R}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord mathbb">R</span></span></span></span> is a <code>comphaus_bla</code> (which I will need soon, at any rate). I remember <span class="user-mention" data-user-id="243562">@Adam Topaz</span>  pushed something last week, though.</p>



<a name="253576903"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253576903" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253576903">(Sep 16 2021 at 12:59)</a>:</h4>
<p>Last week I proved that <code>CompHaus..._1</code> has all limits.</p>



<a name="253576964"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253576964" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253576964">(Sep 16 2021 at 12:59)</a>:</h4>
<p>Still nothing about comhaus_filt... For M_p(S) with S finite</p>



<a name="253577204"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253577204" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253577204">(Sep 16 2021 at 13:01)</a>:</h4>
<p><span class="user-mention" data-user-id="243562">@Adam Topaz</span> At some point you formalized <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mover accent="true"><mi mathvariant="script">M</mi><mo stretchy="true">‾</mo></mover><msup><mi>r</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></msub><mo stretchy="false">(</mo><mi>S</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\overline{\mathcal M}_{r&#x27;}(S)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.13333em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833300000000001em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathcal">M</span></span></span><span style="top:-3.80333em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32797999999999994em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828285714285715em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mclose">)</span></span></span></span> as presheaf, I think.<br>
Thats everything coming after: <a href="https://github.com/leanprover-community/lean-liquid/blob/master/src/Mbar/Mbar_le.lean#L501">https://github.com/leanprover-community/lean-liquid/blob/master/src/Mbar/Mbar_le.lean#L501</a></p>
<p>Should this be refactored to make use of the new <code>CompHaus..._1</code> stuff?</p>



<a name="253577299"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253577299" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253577299">(Sep 16 2021 at 13:01)</a>:</h4>
<p>I think if we have a functor <code>Fintype =&gt; CompHaus...</code> then it can be extended to <code>Profinte =&gt; CompHaus_1</code> quite formally, right?</p>



<a name="253577340"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253577340" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253577340">(Sep 16 2021 at 13:01)</a>:</h4>
<p>Yeah, that's the idea.</p>



<a name="253577422"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253577422" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253577422">(Sep 16 2021 at 13:02)</a>:</h4>
<p>We have the stuff in for_mathlib/Profinite/extend.lean</p>



<a name="253577523"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253577523" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253577523">(Sep 16 2021 at 13:03)</a>:</h4>
<p>Marvellous!</p>



<a name="253577595"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253577595" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253577595">(Sep 16 2021 at 13:03)</a>:</h4>
<p>So, do I understand correctly that we should now copypasta the Laurent measures directory, and build a version over the reals?</p>



<a name="253577661"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253577661" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253577661">(Sep 16 2021 at 13:04)</a>:</h4>
<p>There is one missing thing in that extend.lean file: that the extension of a functor from Fintype preserves filtered colimits.</p>



<a name="253577680"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253577680" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253577680">(Sep 16 2021 at 13:04)</a>:</h4>
<p>Also, can we state 9.4 for profinite <code>S</code> already?</p>



<a name="253577713"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253577713" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253577713">(Sep 16 2021 at 13:04)</a>:</h4>
<p>I don't know if we will actually need that, but it's what's left to have a more or less complete api</p>



<a name="253577893"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253577893" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253577893">(Sep 16 2021 at 13:05)</a>:</h4>
<p>I'll try to define <code>Mbar.functor : Profinite =&gt; ProFiltPseuNormGrp_1</code> using your machinery.</p>



<a name="253577998"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253577998" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253577998">(Sep 16 2021 at 13:06)</a>:</h4>
<p>We don't have ProFilt..._1, but we probably should <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span></p>



<a name="253585847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253585847" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253585847">(Sep 16 2021 at 13:57)</a>:</h4>
<p>We actually need to target <code>ProFiltPseuNormGrpWithTinv r'</code></p>



<a name="253585901"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253585901" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253585901">(Sep 16 2021 at 13:57)</a>:</h4>
<p>I hope that it has all the right limits <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="253586064"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253586064" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253586064">(Sep 16 2021 at 13:58)</a>:</h4>
<p>It should, as long as the basic structure mimics the definition of <code>CompHaus...\_1</code> (including the exhaustive condition, and the strictness of morphisms)</p>



<a name="253586128"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253586128" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253586128">(Sep 16 2021 at 13:58)</a>:</h4>
<p>maps are strict, but the filtration isn't exhaustive, as of now.</p>



<a name="253586144"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253586144" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253586144">(Sep 16 2021 at 13:58)</a>:</h4>
<p>The <code>Tinv</code> automorphism will not be an automorphism in the category itself, but we can still encode it in some other way</p>



<a name="253586268"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253586268" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253586268">(Sep 16 2021 at 13:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R/near/253586128">said</a>:</p>
<blockquote>
<p>maps are strict, but the filtration isn't exhaustive, as of now.</p>
</blockquote>
<p>the exhaustive condition is required to define the <code>lift</code> for a limit.</p>



<a name="253588099"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253588099" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253588099">(Sep 16 2021 at 14:10)</a>:</h4>
<p>For 9.4, we really need the <code>Tinv</code>, also in the case of profinite <code>S</code>.</p>



<a name="253588195"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253588195" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253588195">(Sep 16 2021 at 14:11)</a>:</h4>
<p>So we cannot make do with some "easier" category of comphaus filtered stuff or so.</p>



<a name="253588255"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253588255" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253588255">(Sep 16 2021 at 14:11)</a>:</h4>
<p>I don't think the <code>Tinv</code> will cause much trouble though. We just need to add the exhaustion to the conditions.</p>



<a name="253588655"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253588655" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253588655">(Sep 16 2021 at 14:14)</a>:</h4>
<p>No, it shouldn't. It should be possible to mimic what I've done in the comphaus case for the profinite_with_Tinv case.</p>



<a name="253588684"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253588684" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253588684">(Sep 16 2021 at 14:14)</a>:</h4>
<p>I'm looking at the definition of the hom's now.</p>



<a name="253588959"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253588959" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253588959">(Sep 16 2021 at 14:16)</a>:</h4>
<p>In fact, we can redefine these as</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">structure</span> <span class="n">profinitely_filtered_pseudo_normed_group_with_Tinv_hom</span> <span class="o">(</span><span class="n">r'</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">M₁</span> <span class="n">M₂</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span>
  <span class="o">[</span><span class="n">profinitely_filtered_pseudo_normed_group_with_Tinv</span> <span class="n">r'</span> <span class="n">M₁</span><span class="o">]</span>
  <span class="o">[</span><span class="n">profinitely_filtered_pseudo_normed_group_with_Tinv</span> <span class="n">r'</span> <span class="n">M₂</span><span class="o">]</span>
  <span class="kd">extends</span> <span class="n">strict_comphaus_filtered_pseudo_normed_group_hom</span> <span class="n">M₁</span> <span class="n">M₂</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">map_Tinv'</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span><span class="o">,</span> <span class="n">to_fun</span> <span class="o">(</span><span class="n">Tinv</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="n">Tinv</span> <span class="o">(</span><span class="n">to_fun</span> <span class="n">x</span><span class="o">))</span>
</code></pre></div>
<p>which is defeq-ish to the previous definition</p>



<a name="253589413"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253589413" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253589413">(Sep 16 2021 at 14:19)</a>:</h4>
<p>Sure, makes sense.</p>



<a name="253590010"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253590010" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253590010">(Sep 16 2021 at 14:23)</a>:</h4>
<p><span class="user-mention" data-user-id="243562">@Adam Topaz</span> I just pushed a new file <code>Mbar/functor.lean</code> containing</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="sd">/-- `Mbar r' S` extends to a functor in `S`, for profinite `S`. -/</span>
<span class="kd">def</span> <span class="n">functor</span> <span class="o">:</span> <span class="n">Profinite</span> <span class="bp">⥤</span> <span class="n">ProFiltPseuNormGrpWithTinv</span> <span class="n">r'</span> <span class="o">:=</span>
<span class="n">Profinite.extend</span> <span class="o">(</span><span class="n">fintype_functor</span> <span class="n">r'</span><span class="o">)</span>
</code></pre></div>
<p>and 1 sorry.</p>



<a name="253590036"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253590036" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253590036">(Sep 16 2021 at 14:23)</a>:</h4>
<p>The sorry is about those limits existing.</p>



<a name="253590514"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253590514" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253590514">(Sep 16 2021 at 14:26)</a>:</h4>
<p>Are you exhaustifying those objects atm? I guess this might imply a whole bunch of fixes throughout the library...</p>



<a name="253590552"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253590552" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253590552">(Sep 16 2021 at 14:26)</a>:</h4>
<p>Yeah, that sorry won't be true without exhaustifyingg.</p>



<a name="253590591"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253590591" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253590591">(Sep 16 2021 at 14:27)</a>:</h4>
<p>I have a meeting soon, but I can try to exhaustify after that :)</p>



<a name="253591041"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253591041" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253591041">(Sep 16 2021 at 14:29)</a>:</h4>
<p>We'll have to figure out how to handle products at some point... the current ad-hoc construction doesn't give a categorical product unless the index set is finite.</p>



<a name="253591181"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253591181" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253591181">(Sep 16 2021 at 14:30)</a>:</h4>
<p>But we only need finite products, right?</p>



<a name="253591234"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253591234" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253591234">(Sep 16 2021 at 14:30)</a>:</h4>
<p>Problem solved? <span aria-label="stuck out tongue wink" class="emoji emoji-1f61c" role="img" title="stuck out tongue wink">:stuck_out_tongue_wink:</span></p>



<a name="253627579"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253627579" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253627579">(Sep 16 2021 at 18:26)</a>:</h4>
<p>I've added: </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="o">:</span> <span class="n">limits.has_limits</span> <span class="n">ProFiltPseuNormGrp₁.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="o">:=</span>
<span class="n">has_limits_of_has_limits_creates_limits</span> <span class="n">to_CHFPNG₁</span>
</code></pre></div>



<a name="253627688"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253627688" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253627688">(Sep 16 2021 at 18:26)</a>:</h4>
<p>For the <code>Tinv</code> stuff, I think the best thing to now do is to prove that the functor from <code>ProFilt...WithTinv</code> to <code>ProFiltPseuNormGrp₁</code> creates limits.</p>



<a name="253632173"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253632173" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253632173">(Sep 16 2021 at 18:56)</a>:</h4>
<p>Hmm... it looks like exhaustifying <code>ProFiltPseuNormGrpWithTinv</code> is going to be a nontrivial refactor, and I don't think I have enough time for this today. If anyone wants to take it on, please do so!</p>



<a name="253683829"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253683829" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253683829">(Sep 17 2021 at 03:23)</a>:</h4>
<p>It might be easier to just create a new category. Then the proof of 9.4 can use non-exhaustive objects.</p>



<a name="253683837"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253683837" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253683837">(Sep 17 2021 at 03:23)</a>:</h4>
<p>We can always clean up later.</p>



<a name="253687495"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253687495" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253687495">(Sep 17 2021 at 04:21)</a>:</h4>
<p><span class="user-mention" data-user-id="243562">@Adam Topaz</span> I've pushed <code>src/real_measures.lean</code>. I haven't done the topology yet.</p>



<a name="253693697"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253693697" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253693697">(Sep 17 2021 at 05:48)</a>:</h4>
<p>Whoops! Never push code before breakfast <span aria-label="see no evil" class="emoji emoji-1f648" role="img" title="see no evil">:see_no_evil:</span> <span aria-label="face palm" class="emoji emoji-1f926" role="img" title="face palm">:face_palm:</span> <br>
The definition is all wrong.</p>



<a name="253735123"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253735123" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253735123">(Sep 17 2021 at 12:38)</a>:</h4>
<p>Looks good! How hard is proving the <code>comphaus_filtered_pseudo_normed_group</code> instance? Does mathlib know that the l^p ball is compact?</p>



<a name="253735706"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253735706" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253735706">(Sep 17 2021 at 12:43)</a>:</h4>
<p>Oh, one more think (looking at the commented out code): We want the functor to take place in <code>CompHausFiltPseuNormGrp_1</code> which is the category with limits, so <code>map_hom</code> should be in <code>strict_comphaus_filtered_pseudo_normed_group_hom</code></p>



<a name="253735965"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253735965" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253735965">(Sep 17 2021 at 12:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R/near/253683829">said</a>:</p>
<blockquote>
<p>It might be easier to just create a new category. Then the proof of 9.4 can use non-exhaustive objects.</p>
</blockquote>
<p>Sure, that's probably the easiest approach. I'll try to do this later today.</p>



<a name="253736317"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253736317" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253736317">(Sep 17 2021 at 12:48)</a>:</h4>
<p>So the diagram of all of these categories will look like this:</p>
<div class="codehilite" data-code-language="Text only"><pre><span></span><code> CompHausFilt_1 --------&gt; CompHausFilt ---------&gt; Cond (Ab)
    ^                          ^
    |                          |
ProFinFilt_1   --------&gt; ProFinFilt
    ^                         ^
    |                         |
ProFinFiltWithTinv_1 --&gt; ProFinFiltWithTinv
</code></pre></div>
<p>The left hand side have an exhaustive filtration with strict morphisms, and will all have limits, and the middle column need not be exhaustive.</p>



<a name="253736579"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253736579" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253736579">(Sep 17 2021 at 12:50)</a>:</h4>
<p>Looks good!</p>



<a name="253737070"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253737070" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253737070">(Sep 17 2021 at 12:54)</a>:</h4>
<p><span class="user-mention silent" data-user-id="243562">Adam Topaz</span> <a href="#narrow/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R/near/253735123">said</a>:</p>
<blockquote>
<p>Looks good! How hard is proving the <code>comphaus_filtered_pseudo_normed_group</code> instance? Does mathlib know that the l^p ball is compact?</p>
</blockquote>
<p>I have no idea. I'll find out in the next few hours (-;</p>



<a name="253744562"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253744562" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253744562">(Sep 17 2021 at 13:48)</a>:</h4>
<p>I killed some sorries. Time to start thinking about the topology.</p>



<a name="253748544"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253748544" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253748544">(Sep 17 2021 at 14:14)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="n">pfpng_real_measures</span> <span class="o">:</span> <span class="n">comphaus_filtered_pseudo_normed_group</span> <span class="o">(</span><span class="n">ℳ</span> <span class="n">p</span> <span class="n">S</span><span class="o">)</span> <span class="o">:=</span>
</code></pre></div>
<p>is sorry free, except for compactness.</p>



<a name="253759309"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253759309" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253759309">(Sep 17 2021 at 15:24)</a>:</h4>
<p>compactness is converging. but first I'll have dinner</p>



<a name="253780864"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253780864" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253780864">(Sep 17 2021 at 17:49)</a>:</h4>
<p>done</p>



<a name="253785459"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253785459" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253785459">(Sep 17 2021 at 18:20)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">functor</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span><span class="o">)</span> <span class="o">[</span><span class="n">fact</span> <span class="o">(</span><span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">p</span><span class="o">)]</span> <span class="o">[</span><span class="n">fact</span> <span class="o">(</span><span class="n">p</span> <span class="bp">≤</span> <span class="mi">1</span><span class="o">)]</span> <span class="o">:</span> <span class="n">Fintype.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="bp">⥤</span> <span class="n">CompHausFiltPseuNormGrp.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">obj</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">S</span><span class="o">,</span> <span class="n">CompHausFiltPseuNormGrp.of</span> <span class="bp">$</span> <span class="n">ℳ</span> <span class="n">p</span> <span class="n">S</span><span class="o">,</span>
<span class="bp">...</span>
</code></pre></div>
<p>is now sorry free</p>



<a name="253785870"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253785870" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253785870">(Sep 17 2021 at 18:23)</a>:</h4>
<p>We need it in <code>CompHausFiltPseuNormGrp_1</code> ;) (so we can take limits)</p>



<a name="253786392"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253786392" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253786392">(Sep 17 2021 at 18:27)</a>:</h4>
<p>yeah, but I imagine that will be an easy tweak (-;</p>



<a name="253786399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253786399" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253786399">(Sep 17 2021 at 18:27)</a>:</h4>
<p>I just pushed</p>



<a name="253786621"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253786621" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253786621">(Sep 17 2021 at 18:28)</a>:</h4>
<p>Sure, it should be easy enough to tweak. Do you want me to do it?</p>



<a name="253787105"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253787105" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253787105">(Sep 17 2021 at 18:31)</a>:</h4>
<p><span class="user-mention" data-user-id="243562">@Adam Topaz</span> I'm almost done</p>



<a name="253787829"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253787829" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253787829">(Sep 17 2021 at 18:36)</a>:</h4>
<p><span class="user-mention" data-user-id="243562">@Adam Topaz</span> I pushed the strictification</p>



<a name="253790634"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253790634" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253790634">(Sep 17 2021 at 18:56)</a>:</h4>
<p>Btw, I'm making <code>ℳ p S</code> local notation, so that we can use the same notation for the actual condensed abelian group.</p>



<a name="253790691"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/253790691" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#253790691">(Sep 17 2021 at 18:57)</a>:</h4>
<p>With a bit of luck, the statement of the challenge will look very similar to what is written in the blogpost.</p>



<a name="254258236"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/254258236" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#254258236">(Sep 21 2021 at 18:49)</a>:</h4>
<p>The following is now sorry-free:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="o">:</span> <span class="n">limits.has_limits</span> <span class="o">(</span><span class="n">ProFiltPseuNormGrpWithTinv₁.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="n">r</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">has_limits_of_has_limits_creates_limits</span> <span class="o">(</span><span class="n">to_PFPNG₁</span> <span class="n">r</span><span class="o">)</span>
</code></pre></div>



<a name="279394686"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279394686" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279394686">(Apr 19 2022 at 11:15)</a>:</h4>
<p>I was trying to define the following coercion</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="o">:</span> <span class="n">has_coe</span> <span class="n">ℝ</span> <span class="o">(</span><span class="n">ℳ</span> <span class="n">S</span><span class="o">)</span> <span class="o">:=</span> <span class="o">{</span> <span class="n">coe</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">a</span> <span class="n">s</span><span class="o">,</span> <span class="n">a</span> <span class="o">}</span>
</code></pre></div>
<p>to view a real number as the constant function on <code>S</code>. Although Lean does not complain on the nose, I get an error while doing</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">variable</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span>
<span class="k">#check</span> <span class="o">((</span><span class="bp">λ</span> <span class="n">s</span> <span class="o">:</span> <span class="n">S</span><span class="o">,</span> <span class="n">a</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">ℳ</span> <span class="n">S</span><span class="o">))</span> <span class="c1">-- this works</span>
<span class="k">#check</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="o">(</span><span class="n">ℳ</span> <span class="n">S</span><span class="o">))</span> <span class="c1">-- this does not work: it runs for a minute or so and then says "maximum class-instance</span>
<span class="c1">--resolution depth has been reached  (the limit can be increased by setting option</span>
<span class="c1">-- 'class.instance_max_depth') (the class-instance resolution trace can be visualized by</span>
<span class="c1">-- setting option 'trace.class_instances')"</span>
</code></pre></div>
<p>Any idea?</p>



<a name="279395184"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279395184" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279395184">(Apr 19 2022 at 11:21)</a>:</h4>
<p>Maybe there is a loop. Where can I test this?</p>



<a name="279395191"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279395191" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279395191">(Apr 19 2022 at 11:21)</a>:</h4>
<p>I mean, in which file of LTE</p>



<a name="279399357"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279399357" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279399357">(Apr 19 2022 at 12:07)</a>:</h4>
<p>I have just tried to introduce it in <code>laurent_measures/add_stable.lean</code>, the above code is commented on lines 32-34 of the version on <code>master</code></p>



<a name="279401669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279401669" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279401669">(Apr 19 2022 at 12:30)</a>:</h4>
<p><code>#check (↑a : (ℳ S))</code> works, so it should be something related to automatically insert <code>↑</code></p>



<a name="279401711"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279401711" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279401711">(Apr 19 2022 at 12:31)</a>:</h4>
<p>Oh, thanks! That's weird, no?</p>



<a name="279401776"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279401776" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279401776">(Apr 19 2022 at 12:31)</a>:</h4>
<p>Mmh, maybe you should use <a href="https://leanprover-community.github.io/mathlib_docs/find/has_coe_to_fun">docs#has_coe_to_fun</a></p>



<a name="279401957"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279401957" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279401957">(Apr 19 2022 at 12:33)</a>:</h4>
<p>Ok, let me try. I confess I never understood the difference.</p>



<a name="279402287"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279402287" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279402287">(Apr 19 2022 at 12:36)</a>:</h4>
<p><code>coe_fn</code> can be inserted where a function is expected. <code>coe</code> can't. Namely, <code>coe_fn f x</code> will elaborate while <code>coe f x</code> won't. But here that doesn't seem to be the problem because Lean isn't expecting a function as you aren't doing <code>a x</code> but just <code>a</code> (it just so happens that the expected type is a type of functions, but you aren't using it as such).</p>



<a name="279402324"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279402324" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279402324">(Apr 19 2022 at 12:37)</a>:</h4>
<p>It's just a random try, I don't understand what's going on either</p>



<a name="279402389"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279402389" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279402389">(Apr 19 2022 at 12:38)</a>:</h4>
<p>I see, but I ran into an even earlier problem: if I try</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="o">:</span> <span class="n">has_coe_to_fun</span> <span class="n">ℝ</span> <span class="o">(</span><span class="n">ℳ</span> <span class="n">S</span><span class="o">)</span> <span class="o">:=</span> <span class="o">{</span><span class="n">coe</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">a</span> <span class="n">s</span><span class="o">,</span> <span class="n">a</span> <span class="o">}</span>
</code></pre></div>
<p>it requires me to add an <code>out_parameter</code></p>



<a name="279402485"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279402485" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279402485">(Apr 19 2022 at 12:38)</a>:</h4>
<p>That's not how you use <code>has_coe_to_fun</code>.</p>



<a name="279402528"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279402528" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279402528">(Apr 19 2022 at 12:39)</a>:</h4>
<p>It's probably something like <code>instance : has_coe_to_fun ℝ (λ _, ℳ S) := ⟨λ a s, a⟩</code>, but it doesn't work</p>



<a name="279402534"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279402534" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279402534">(Apr 19 2022 at 12:39)</a>:</h4>
<p>I'm not sure what <code>ℳ</code> is, but <code>has_coe_to_fun ℝ (λ _, ℳ S)</code> will get you closer.</p>



<a name="279402557"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279402557" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279402557">(Apr 19 2022 at 12:39)</a>:</h4>
<p>I see, I guess I see the difference (and agree that I don't need it here). Yet, I don't understand why <code>has_coe</code> requires the upper-arrow, whereas it can normally detect it automagically.</p>



<a name="279402676"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279402676" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279402676">(Apr 19 2022 at 12:40)</a>:</h4>
<p>It is not a huge deal, just a bit odd.</p>



<a name="279402692"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279402692" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279402692">(Apr 19 2022 at 12:40)</a>:</h4>
<p>Just to clarify, <code>ℳ</code> is defined by</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">real_measures</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">Fintype</span><span class="o">)</span> <span class="o">:=</span> <span class="n">S</span> <span class="bp">→</span> <span class="n">ℝ</span>
<span class="kd">parameter</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span><span class="o">}</span>
<span class="kn">local</span> <span class="kd">notation</span> <span class="bp">`</span><span class="n">ℳ</span><span class="bp">`</span> <span class="o">:=</span> <span class="n">real_measures</span> <span class="n">p</span>
</code></pre></div>



<a name="279402755"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279402755" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279402755">(Apr 19 2022 at 12:41)</a>:</h4>
<p>Ah so <code>ℳ</code> is the one that should get a <code>fun_like</code> instance!</p>



<a name="279402911"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279402911" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279402911">(Apr 19 2022 at 12:42)</a>:</h4>
<p><code>has_coe_to_fun</code> seems like a red herring here</p>



<a name="279402979"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279402979" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279402979">(Apr 19 2022 at 12:43)</a>:</h4>
<p>Well, I am very happy with <code>has_coe</code> indeed.</p>



<a name="279403248"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279403248" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279403248">(Apr 19 2022 at 12:45)</a>:</h4>
<p>What happens with <code>#check (a : (ℳ S))</code> if you <em>don't</em> define any new instance?</p>



<a name="279403292"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279403292" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279403292">(Apr 19 2022 at 12:46)</a>:</h4>
<p>Let me try</p>



<a name="279403346"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279403346" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279403346">(Apr 19 2022 at 12:46)</a>:</h4>
<p>invalid type ascription, term has type<br>
  ℝ : Type<br>
but is expected to have type<br>
  real_measures p S : Type u</p>



<a name="279403456"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279403456" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279403456">(Apr 19 2022 at 12:47)</a>:</h4>
<p>Well, but the <code>has_coe</code> works, as Riccardo pointed out. The funny behaviour is with the arrow, I find.</p>



<a name="279403544"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279403544" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279403544">(Apr 19 2022 at 12:48)</a>:</h4>
<p>I am trying with <code>set_option trace.class_instances true</code> (I've named the instance <code>foo</code>). There is a</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="o">[</span><span class="n">class_instances</span><span class="o">]</span> <span class="o">(</span><span class="mi">2</span><span class="o">)</span> <span class="bp">?</span><span class="n">x_13</span> <span class="o">:</span> <span class="n">has_coe</span> <span class="n">ℝ</span> <span class="bp">?</span><span class="n">x_12</span> <span class="o">:=</span> <span class="bp">@</span><span class="n">foo</span> <span class="bp">?</span><span class="n">x_14</span> <span class="bp">?</span><span class="n">x_15</span> <span class="bp">?</span><span class="n">x_16</span> <span class="bp">?</span><span class="n">x_17</span> <span class="bp">?</span><span class="n">x_18</span> <span class="bp">?</span><span class="n">x_19</span>
<span class="o">[</span><span class="n">class_instances</span><span class="o">]</span> <span class="o">(</span><span class="mi">3</span><span class="o">)</span> <span class="bp">?</span><span class="n">x_18</span> <span class="o">:</span> <span class="n">fact</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">/</span> <span class="mi">2</span> <span class="bp">&lt;</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:=</span> <span class="n">_inst_4</span>
<span class="o">[</span><span class="n">class_instances</span><span class="o">]</span> <span class="n">caching</span> <span class="kd">instance</span> <span class="n">for</span> <span class="n">fact</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">/</span> <span class="mi">2</span> <span class="bp">&lt;</span> <span class="mi">1</span><span class="o">)</span>
<span class="n">_inst_4</span>
<span class="o">[</span><span class="n">class_instances</span><span class="o">]</span> <span class="o">(</span><span class="mi">3</span><span class="o">)</span> <span class="bp">?</span><span class="n">x_17</span> <span class="o">:</span> <span class="n">fact</span> <span class="o">(</span><span class="mi">0</span> <span class="bp">&lt;</span> <span class="mi">1</span> <span class="bp">/</span> <span class="mi">2</span><span class="o">)</span> <span class="o">:=</span> <span class="n">_inst_4</span>
<span class="n">failed</span> <span class="n">is_def_eq</span>
<span class="o">[</span><span class="n">class_instances</span><span class="o">]</span> <span class="o">(</span><span class="mi">3</span><span class="o">)</span> <span class="bp">?</span><span class="n">x_17</span> <span class="o">:</span> <span class="n">fact</span> <span class="o">(</span><span class="mi">0</span> <span class="bp">&lt;</span> <span class="mi">1</span> <span class="bp">/</span> <span class="mi">2</span><span class="o">)</span> <span class="o">:=</span> <span class="n">_inst_3</span>
<span class="o">[</span><span class="n">class_instances</span><span class="o">]</span> <span class="n">caching</span> <span class="kd">instance</span> <span class="n">for</span> <span class="n">fact</span> <span class="o">(</span><span class="mi">0</span> <span class="bp">&lt;</span> <span class="mi">1</span> <span class="bp">/</span> <span class="mi">2</span><span class="o">)</span>
<span class="n">_inst_3</span>
<span class="o">[</span><span class="n">class_instances</span><span class="o">]</span> <span class="o">(</span><span class="mi">3</span><span class="o">)</span> <span class="bp">?</span><span class="n">x_16</span> <span class="o">:</span> <span class="n">fact</span> <span class="o">(</span><span class="bp">?</span><span class="n">x_14</span> <span class="bp">&lt;</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:=</span> <span class="n">_inst_4</span>
<span class="n">failed</span> <span class="n">is_def_eq</span>
<span class="o">[</span><span class="n">class_instances</span><span class="o">]</span> <span class="o">(</span><span class="mi">3</span><span class="o">)</span> <span class="bp">?</span><span class="n">x_16</span> <span class="o">:</span> <span class="n">fact</span> <span class="o">(</span><span class="bp">?</span><span class="n">x_14</span> <span class="bp">&lt;</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:=</span> <span class="n">_inst_3</span>
<span class="n">failed</span> <span class="n">is_def_eq</span>
<span class="o">[</span><span class="n">class_instances</span><span class="o">]</span> <span class="o">(</span><span class="mi">3</span><span class="o">)</span> <span class="bp">?</span><span class="n">x_16</span> <span class="o">:</span> <span class="n">fact</span> <span class="o">(</span><span class="bp">?</span><span class="n">x_14</span> <span class="bp">&lt;</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:=</span> <span class="n">_inst_2</span>
<span class="o">[</span><span class="n">class_instances</span><span class="o">]</span> <span class="n">caching</span> <span class="kd">instance</span> <span class="n">for</span> <span class="n">fact</span> <span class="o">(</span><span class="n">p</span> <span class="bp">&lt;</span> <span class="mi">1</span><span class="o">)</span>
<span class="n">_inst_2</span>
<span class="o">[</span><span class="n">class_instances</span><span class="o">]</span> <span class="o">(</span><span class="mi">3</span><span class="o">)</span> <span class="bp">?</span><span class="n">x_15</span> <span class="o">:</span> <span class="n">fact</span> <span class="o">(</span><span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">p</span><span class="o">)</span> <span class="o">:=</span> <span class="n">_inst_4</span>
<span class="n">failed</span> <span class="n">is_def_eq</span>
<span class="o">[</span><span class="n">class_instances</span><span class="o">]</span> <span class="o">(</span><span class="mi">3</span><span class="o">)</span> <span class="bp">?</span><span class="n">x_15</span> <span class="o">:</span> <span class="n">fact</span> <span class="o">(</span><span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">p</span><span class="o">)</span> <span class="o">:=</span> <span class="n">_inst_3</span>
<span class="n">failed</span> <span class="n">is_def_eq</span>
<span class="o">[</span><span class="n">class_instances</span><span class="o">]</span> <span class="o">(</span><span class="mi">3</span><span class="o">)</span> <span class="bp">?</span><span class="n">x_15</span> <span class="o">:</span> <span class="n">fact</span> <span class="o">(</span><span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">p</span><span class="o">)</span> <span class="o">:=</span> <span class="n">_inst_2</span>
<span class="n">failed</span> <span class="n">is_def_eq</span>
<span class="o">[</span><span class="n">class_instances</span><span class="o">]</span> <span class="o">(</span><span class="mi">3</span><span class="o">)</span> <span class="bp">?</span><span class="n">x_15</span> <span class="o">:</span> <span class="n">fact</span> <span class="o">(</span><span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">p</span><span class="o">)</span> <span class="o">:=</span> <span class="n">_inst_1</span>
<span class="o">[</span><span class="n">class_instances</span><span class="o">]</span> <span class="n">caching</span> <span class="kd">instance</span> <span class="n">for</span> <span class="n">fact</span> <span class="o">(</span><span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">p</span><span class="o">)</span>
<span class="n">_inst_1</span>
</code></pre></div>



<a name="279403552"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279403552" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279403552">(Apr 19 2022 at 12:48)</a>:</h4>
<p>That looks promising</p>



<a name="279403594"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279403594" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279403594">(Apr 19 2022 at 12:49)</a>:</h4>
<p>Promising <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span> ?</p>



<a name="279403759"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279403759" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279403759">(Apr 19 2022 at 12:50)</a>:</h4>
<p>Maybe using <code>has_coe_t</code> would work</p>



<a name="279403853"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279403853" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279403853">(Apr 19 2022 at 12:51)</a>:</h4>
<p>Mmh, maybe the problem is coming from all the <code>fact</code>.  At the beginning there is </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">parmeter</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span><span class="o">}</span>
<span class="kn">local</span> <span class="kd">notation</span> <span class="bp">`</span><span class="n">r</span><span class="bp">`</span> <span class="o">:=</span> <span class="bp">@</span><span class="n">r</span> <span class="n">p</span>
<span class="kn">local</span> <span class="kd">notation</span> <span class="bp">`</span><span class="n">ℳ</span><span class="bp">`</span> <span class="o">:=</span> <span class="n">real_measures</span> <span class="n">p</span>
<span class="kn">local</span> <span class="kd">notation</span> <span class="bp">`</span><span class="n">ℒ</span><span class="bp">`</span> <span class="o">:=</span> <span class="n">laurent_measures</span> <span class="n">r</span>
<span class="kd">variable</span> <span class="o">[</span><span class="n">fact</span> <span class="o">(</span><span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">p</span><span class="o">)]</span>
<span class="kd">variable</span> <span class="o">[</span><span class="n">fact</span> <span class="o">(</span><span class="n">p</span> <span class="bp">&lt;</span> <span class="mi">1</span><span class="o">)]</span>
<span class="kd">variable</span> <span class="o">[</span><span class="n">fact</span> <span class="o">(</span><span class="mi">0</span> <span class="bp">&lt;</span> <span class="o">(</span><span class="mi">1</span><span class="bp">/</span><span class="mi">2</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">))]</span>
<span class="kd">variable</span> <span class="o">[</span><span class="n">fact</span> <span class="o">((</span><span class="mi">1</span><span class="bp">/</span><span class="mi">2</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">&lt;</span> <span class="mi">1</span><span class="o">)]</span>

<span class="kd">variable</span> <span class="o">{</span><span class="n">S</span> <span class="o">:</span> <span class="n">Fintype.</span><span class="o">{</span><span class="n">u</span><span class="o">}}</span>

<span class="kn">local</span> <span class="kd">notation</span> <span class="bp">`</span><span class="n">ϖ</span><span class="bp">`</span> <span class="o">:=</span> <span class="n">Fintype.of</span> <span class="o">(</span><span class="n">punit</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span>

<span class="kd">def</span> <span class="n">θ_section</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">ℳ</span> <span class="n">S</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">ℒ</span> <span class="n">S</span><span class="o">)</span> <span class="o">:=</span> <span class="o">⟨</span><span class="n">ϑ_section</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">/</span> <span class="mi">2</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="n">r</span> <span class="n">p</span> <span class="n">S</span> <span class="n">g</span><span class="o">,</span>
  <span class="n">summable_ϑ_section</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">/</span> <span class="mi">2</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="n">r</span> <span class="n">p</span> <span class="n">S</span> <span class="n">g</span><span class="o">⟩</span>

<span class="kd">instance</span> <span class="n">foo</span> <span class="o">:</span> <span class="n">has_coe</span> <span class="n">ℝ</span> <span class="o">(</span><span class="n">ℳ</span> <span class="n">S</span><span class="o">)</span> <span class="o">:=</span> <span class="o">{</span> <span class="n">coe</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">a</span> <span class="n">s</span><span class="o">,</span> <span class="n">a</span> <span class="o">}</span>
</code></pre></div>



<a name="279404007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279404007" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279404007">(Apr 19 2022 at 12:52)</a>:</h4>
<p>And there are lines like</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="o">[</span><span class="n">class_instances</span><span class="o">]</span> <span class="o">(</span><span class="mi">3</span><span class="o">)</span> <span class="bp">?</span><span class="n">x_399</span> <span class="o">:</span> <span class="n">has_coe</span> <span class="o">(</span><span class="n">real_measures</span> <span class="o">(</span><span class="bp">@«</span><span class="n">r</span><span class="bp">»</span> <span class="o">(</span><span class="bp">↑</span><span class="mi">2</span> <span class="bp">*</span> <span class="n">p</span> <span class="bp">*</span> <span class="n">p</span> <span class="bp">*</span> <span class="n">p</span><span class="o">))</span> <span class="bp">?</span><span class="n">x_19</span><span class="o">)</span> <span class="bp">?</span><span class="n">x_396</span> <span class="o">:=</span> <span class="bp">@</span><span class="n">ray_vector.has_coe</span> <span class="bp">?</span><span class="n">x_431</span> <span class="bp">?</span><span class="n">x_432</span> <span class="bp">?</span><span class="n">x_433</span>
</code></pre></div>
<p>Even forgetting about <code>ray_vector.has_coe</code>, the fact that it is trying with <code>p * p * p</code> doesn't look good.</p>



<a name="279404010"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279404010" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279404010">(Apr 19 2022 at 12:52)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">variable</span> <span class="o">[</span><span class="n">fact</span> <span class="o">(</span><span class="mi">0</span> <span class="bp">&lt;</span> <span class="o">(</span><span class="mi">1</span><span class="bp">/</span><span class="mi">2</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">))]</span>
</code></pre></div>
<p>I'm not even sure what this does considering it mentions no variables</p>



<a name="279404062"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279404062" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279404062">(Apr 19 2022 at 12:52)</a>:</h4>
<p>Does that mean it is included in all definitions?</p>



<a name="279404157"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279404157" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279404157">(Apr 19 2022 at 12:54)</a>:</h4>
<p>It is, or in most of them. I was not very happy with this line, but the problem is that some <em>construction</em> relies on a parameter <code>r</code> together with two facts that <code>0 &lt; r</code> and <code>r &lt; 1</code>. And here I am specializing to <code>r=1/2</code> so Lean asks for the corresponding facts.</p>



<a name="279404207"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279404207" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279404207">(Apr 19 2022 at 12:54)</a>:</h4>
<p>I think so, in the infoview of</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">:</span> <span class="n">true</span> <span class="o">:=</span>
<span class="kd">begin</span>

<span class="kd">end</span>
</code></pre></div>
<p>I see</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">_inst_3</span><span class="o">:</span> <span class="n">fact</span> <span class="o">(</span><span class="mi">0</span> <span class="bp">&lt;</span> <span class="mi">1</span> <span class="bp">/</span> <span class="mi">2</span><span class="o">)</span>
<span class="n">_inst_4</span><span class="o">:</span> <span class="n">fact</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">/</span> <span class="mi">2</span> <span class="bp">&lt;</span> <span class="mi">1</span><span class="o">)</span>
<span class="bp">⊢</span> <span class="n">true</span>
</code></pre></div>



<a name="279404306"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279404306" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279404306">(Apr 19 2022 at 12:55)</a>:</h4>
<p>What if you move the has_coe declaration before the variables lines that set up the facts?</p>



<a name="279404333"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279404333" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279404333">(Apr 19 2022 at 12:55)</a>:</h4>
<p>Let me try</p>



<a name="279404457"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279404457" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279404457">(Apr 19 2022 at 12:56)</a>:</h4>
<p>Oh, this works!</p>



<a name="279404459"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279404459" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279404459">(Apr 19 2022 at 12:56)</a>:</h4>
<p>YES!</p>



<a name="279404462"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279404462" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279404462">(Apr 19 2022 at 12:56)</a>:</h4>
<p>It works</p>



<a name="279404469"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279404469" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279404469">(Apr 19 2022 at 12:56)</a>:</h4>
<p>Great.</p>



<a name="279404527"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279404527" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279404527">(Apr 19 2022 at 12:56)</a>:</h4>
<p>The issue is that since you mention p (implicitly because it is a parameter), any instance constraint becomes part of the constraints of the has_coe.</p>



<a name="279404547"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279404547" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279404547">(Apr 19 2022 at 12:57)</a>:</h4>
<p>Ah, I see.</p>



<a name="279404571"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279404571" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279404571">(Apr 19 2022 at 12:57)</a>:</h4>
<p>Thanks</p>



<a name="279404594"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279404594" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279404594">(Apr 19 2022 at 12:57)</a>:</h4>
<p>So we do the regular mathlib thing, where the definition works on all values</p>



<a name="279404666"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279404666" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279404666">(Apr 19 2022 at 12:58)</a>:</h4>
<p>Thanks to Reid for suggesting the TC trace</p>



<a name="279404706"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279404706" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279404706">(Apr 19 2022 at 12:58)</a>:</h4>
<p>I don't think I suggested that but I was about to when it appeared!</p>



<a name="279404767"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279404767" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279404767">(Apr 19 2022 at 12:59)</a>:</h4>
<p>And Riccardo for being proactive on it too :-)</p>



<a name="279405079"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279405079" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279405079">(Apr 19 2022 at 13:01)</a>:</h4>
<p>Shouldn't</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">variable</span> <span class="o">[</span><span class="n">fact</span> <span class="o">(</span><span class="mi">0</span> <span class="bp">&lt;</span> <span class="o">(</span><span class="mi">1</span><span class="bp">/</span><span class="mi">2</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">))]</span>
</code></pre></div>
<p>rather be</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="o">:</span> <span class="n">fact</span> <span class="o">(</span><span class="mi">0</span> <span class="bp">&lt;</span> <span class="o">(</span><span class="mi">1</span><span class="bp">/</span><span class="mi">2</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">))</span> <span class="o">:=</span> <span class="o">⟨</span><span class="n">one_half_pos</span><span class="o">⟩</span>
</code></pre></div>



<a name="279405114"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279405114" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279405114">(Apr 19 2022 at 13:01)</a>:</h4>
<p>Yes, it should. You are right</p>



<a name="279410255"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279410255" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279410255">(Apr 19 2022 at 13:41)</a>:</h4>
<p>The whole <code>fact</code> thing is completely out of control in LTE and I seem to spend half my life writing <code>fact.elim infer_instance</code> to extract a proof that 0&lt;r when I could just be writing <code>hr</code>.</p>



<a name="279410359"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279410359" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279410359">(Apr 19 2022 at 13:42)</a>:</h4>
<p>The variables are particularly problematic as we've just seen.</p>



<a name="279410365"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279410365" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279410365">(Apr 19 2022 at 13:42)</a>:</h4>
<p><code>fact.out _</code> is shorter.</p>



<a name="279410393"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279410393" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279410393">(Apr 19 2022 at 13:42)</a>:</h4>
<p>If you have <code>[hr : fact blah]</code> you can also write <code>hr.1</code>.</p>



<a name="279410420"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279410420" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279410420">(Apr 19 2022 at 13:42)</a>:</h4>
<p>yeah but we don't because they're unnamed variables!</p>



<a name="279410452"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279410452" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279410452">(Apr 19 2022 at 13:42)</a>:</h4>
<p>I am not at all convinced by this <code>fact</code> approach</p>



<a name="279410726"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279410726" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279410726">(Apr 19 2022 at 13:45)</a>:</h4>
<p>I am not clear about what problem it is supposed to be solving. If we have (r : R) [fact (r &lt; 1)] then r is explicit. If we have (hr : r &lt; 1) then we can make r implicit and just use hr instead of r (one character longer). Why get your hands dirty with <code>fact</code>s? We saw above an unpleasant consequence.</p>



<a name="279411095"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279411095" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279411095">(Apr 19 2022 at 13:48)</a>:</h4>
<p>Maybe I missed the part where they were actually useful, but the fact remains that I spent the last week working around them because random lemmas ask for the proofs explicitly.</p>



<a name="279411099"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279411099" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279411099">(Apr 19 2022 at 13:48)</a>:</h4>
<p>We have a bunch of files</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">src</span><span class="bp">/</span><span class="n">facts</span><span class="bp">/</span><span class="n">int.lean</span>  <span class="n">src</span><span class="bp">/</span><span class="n">facts</span><span class="bp">/</span><span class="n">nnreal.lean</span>  <span class="n">src</span><span class="bp">/</span><span class="n">facts</span><span class="bp">/</span><span class="n">normed_group.lean</span>
</code></pre></div>
<p>that contain lots of trivialities. The idea is that those trivialities are applied transparently.</p>



<a name="279411139"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279411139" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279411139">(Apr 19 2022 at 13:48)</a>:</h4>
<p>I think that in the first part, this really worked well, and was used a lot.</p>



<a name="279411153"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279411153" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279411153">(Apr 19 2022 at 13:48)</a>:</h4>
<p>Aha</p>



<a name="279519851"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279519851" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279519851">(Apr 20 2022 at 09:39)</a>:</h4>
<p>OK so indeed I can report that <code>fact.out _</code> is far more powerful than what I was doing with <code>fact.elim _</code>. The point is that, rightly or wrongly, there is a ton of basic inequality stuff which the type class inference system has been taught; <code>fact.elim</code> demands you input the fact, but <code>fact.out</code> gets type class inference to find it for you. This is a very devious trick and one I had not properly understood until now. Did you guys get the green light from the CS people to do this??</p>



<a name="279530420"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279530420" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279530420">(Apr 20 2022 at 11:38)</a>:</h4>
<p>It's not mathlib policy compatible, and wouldn't scale to a library the size of mathlib in its current form</p>



<a name="279530464"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/spaces%20of%20measures%20/%20R/near/279530464" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/spaces.20of.20measures.20.2F.20R.html#279530464">(Apr 20 2022 at 11:38)</a>:</h4>
<p>You can get basically the same effect with a tactic that uses <code>apply_rules</code></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>