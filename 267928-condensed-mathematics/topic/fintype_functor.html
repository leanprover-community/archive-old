---
layout: archive
title: Zulip Chat Archive
permalink: /stream/267928-condensed-mathematics/topic/fintype_functor.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/index.html">condensed mathematics</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/fintype_functor.html">fintype_functor</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="280740204"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/fintype_functor/near/280740204" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/fintype_functor.html#280740204">(Apr 30 2022 at 14:55)</a>:</h4>
<p>I see things like <code>(fintype_functor «r» ⋙ to_CHFPNG₁ «r») ⋙ enlarging_functor</code> which look quite intimidating to me at first. Here is a renaming proposal. </p>
<p>Should </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">@[simps]</span> <span class="kd">def</span> <span class="n">laurent_measures.fintype_functor</span> <span class="o">(</span><span class="n">r'</span> <span class="o">:</span> <span class="n">nnreal</span><span class="o">)</span> <span class="o">:</span> <span class="n">Fintype.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="bp">⥤</span> <span class="n">ProFiltPseuNormGrpWithTinv₁.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="n">r'</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">obj</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">S</span><span class="o">,</span> <span class="o">⟨</span><span class="n">laurent_measures</span> <span class="n">r'</span> <span class="n">S</span><span class="o">,</span> <span class="bp">λ</span> <span class="n">F</span><span class="o">,</span> <span class="o">⟨</span><span class="bp">∥</span><span class="n">F</span><span class="bp">∥₊</span><span class="o">,</span> <span class="n">le_rfl</span><span class="o">⟩⟩,</span> <span class="bp">...</span>
</code></pre></div>
<p>be called something like <code>Fintype.LaurentMeasure</code>? This functor actually <em>does something</em>. The other functors are forgetful functors; they could live in a <code>forgetful</code> namespace which we don't open if we want to be guided about where the meat is. Would something like that be a welcome refactor? Doing stuff like this helps me learn the code base.</p>



<a name="280740773"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/fintype_functor/near/280740773" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/fintype_functor.html#280740773">(Apr 30 2022 at 15:09)</a>:</h4>
<p>Oh the namespace is not quite the right idea. How about an annotation on the functor names? I'll try an experiment on a branch.</p>



<a name="280740888"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/fintype_functor/near/280740888" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/fintype_functor.html#280740888">(Apr 30 2022 at 15:12)</a>:</h4>
<p>What about <code>Fintype_to_PFPNGT₁</code>?</p>



<a name="280740905"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/fintype_functor/near/280740905" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/fintype_functor.html#280740905">(Apr 30 2022 at 15:13)</a>:</h4>
<p>And the forgetful functors could be called <code>PFPNGT₁_to_CHFPNG₁</code> resp. <code>CHFPNG₁_to_CHFPNG</code></p>



<a name="280740978"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/fintype_functor/near/280740978" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/fintype_functor.html#280740978">(Apr 30 2022 at 15:14)</a>:</h4>
<p>I also think we don't use dot notation enough... In this case, we could define <code>Fintype.to_PFPNGT₁</code> to get the <em>object</em> associated to a <code>T : Fintype</code>, so that </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">Fintype_to_PFPNGT₁</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">obj</span> <span class="o">:=</span> <span class="n">Fintype.to_PFPNGT₁</span><span class="o">,</span>
  <span class="n">map</span> <span class="o">:=</span> <span class="bp">...</span> <span class="o">}</span>
</code></pre></div>



<a name="280741186"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/fintype_functor/near/280741186" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/fintype_functor.html#280741186">(Apr 30 2022 at 15:20)</a>:</h4>
<p><span class="user-mention silent" data-user-id="243562">Adam Topaz</span> <a href="#narrow/stream/267928-condensed-mathematics/topic/fintype_functor/near/280740888">said</a>:</p>
<blockquote>
<p>What about <code>Fintype_to_PFPNGT₁</code>?</p>
</blockquote>
<p>But the name should mention "laurent" somewhere. Because there's also one for "real measures", and one for "free_pfpng". Etc... And they are genuinely different functors.</p>



<a name="280741189"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/fintype_functor/near/280741189" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/fintype_functor.html#280741189">(Apr 30 2022 at 15:20)</a>:</h4>
<p>Oh yeah good point</p>



<a name="280741207"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/fintype_functor/near/280741207" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/fintype_functor.html#280741207">(Apr 30 2022 at 15:21)</a>:</h4>
<p>So change <code>Fintype.to_PFPNGT₁</code> to <code>Fintype.LaurentMeasure</code> and <code>Fintype_to_PFPNGT₁</code> to <code>Fintype_LaurentMeasures</code></p>



<a name="280741210"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/fintype_functor/near/280741210" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/fintype_functor.html#280741210">(Apr 30 2022 at 15:21)</a>:</h4>
<p>(Note the <code>s</code>)</p>



<a name="280741276"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/fintype_functor/near/280741276" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/fintype_functor.html#280741276">(Apr 30 2022 at 15:22)</a>:</h4>
<p>And of course <code>_root_.LaurentMeasures := Profinite.extend Fintype_LaurentMeasures</code></p>



<a name="280741293"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/fintype_functor/near/280741293" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/fintype_functor.html#280741293">(Apr 30 2022 at 15:23)</a>:</h4>
<p>I don't know if any of these name changes make sense. The names are a complete mess, I agree, but I'm kind of used to them at this point...</p>



<a name="280757434"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/fintype_functor/near/280757434" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/fintype_functor.html#280757434">(Apr 30 2022 at 21:35)</a>:</h4>
<p><span class="user-mention" data-user-id="243562">@Adam Topaz</span> <span class="user-mention" data-user-id="112680">@Johan Commelin</span> I've just got the <code>functor-refactor</code> branch compiling. What do you think? The little <code>el</code> means that this is a forgetful functor. I wanted a little <code>ge</code> for "greater or equal", because forgetful functors lose information, but there didn't seem to be a unicode g subscript. Probably it will rot quickly but I think I know what I'm doing now. There is more to come -- I'm about to start on the <code>enlarging_functor</code>s but that's the last thing.</p>



<a name="280757493"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/fintype_functor/near/280757493" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/fintype_functor.html#280757493">(Apr 30 2022 at 21:36)</a>:</h4>
<p><span class="user-mention" data-user-id="300245">@Filippo A. E. Nuccio</span> this affects you too if you have diverged too much from master</p>



<a name="280757518"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/fintype_functor/near/280757518" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/fintype_functor.html#280757518">(Apr 30 2022 at 21:37)</a>:</h4>
<p><a href="https://github.com/leanprover-community/lean-liquid/compare/functor-refactor">Here</a>'s the diff.</p>



<a name="280757524"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/fintype_functor/near/280757524" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/fintype_functor.html#280757524">(Apr 30 2022 at 21:37)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> Thanks, I have now <code>pull</code>ed and everything is back on track again. I was shocked that something clearly looking <code>defeq</code> to me was not, but now I am confident again that I am understanding <em>at least something</em> of Type theory... <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="280757582"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/fintype_functor/near/280757582" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/fintype_functor.html#280757582">(Apr 30 2022 at 21:38)</a>:</h4>
<p>I am proposing changing a bunch of the functor names so they're easier for humans to understand.</p>



<a name="280757599"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/fintype_functor/near/280757599" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/fintype_functor.html#280757599">(Apr 30 2022 at 21:39)</a>:</h4>
<p>It certainly seems a very good idea.</p>



<a name="280757686"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/fintype_functor/near/280757686" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/fintype_functor.html#280757686">(Apr 30 2022 at 21:41)</a>:</h4>
<p>Bleurgh it might not compile and I have to go and do real life for a bit. Will be back later, hoping for an all nighter</p>



<a name="280757737"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/fintype_functor/near/280757737" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/fintype_functor.html#280757737">(Apr 30 2022 at 21:42)</a>:</h4>
<p>Oh, wow, brave you! I am getting old, I can't go for an all nighter tonight, I am almost collapsing after 10 hours of Lean (minus a dinner)...</p>



<a name="280765458"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/fintype_functor/near/280765458" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/fintype_functor.html#280765458">(May 01 2022 at 01:07)</a>:</h4>
<p>OK so the <code>functor-refactor</code> branch is compiling and will rot fast. Should I merge it?</p>



<a name="280775808"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/fintype_functor/near/280775808" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/fintype_functor.html#280775808">(May 01 2022 at 05:30)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> LGTM!</p>



<a name="280799691"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/fintype_functor/near/280799691" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/fintype_functor.html#280799691">(May 01 2022 at 15:23)</a>:</h4>
<p>OK so I pushed a bunch of changes to master including the functor name refactor. Enough stuff compiles for me to be cautiously optimistic that I didn't break the build; I'll check now and fix anything up which is broken, quickly.</p>



<a name="280804844"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/fintype_functor/near/280804844" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/fintype_functor.html#280804844">(May 01 2022 at 17:19)</a>:</h4>
<p>Thanks Kevin! The names are indeed much more sensible now. <br>
One question: How useful do you think the subscripts <code>el</code> actually are? It seems to me that it's only used in situations where the fact that the functor in question is forgetting something can be deduced from the name of the functor itself. E.g. I think <code>CHFPNG₁_to_CHFPNG</code> is clear enough that it's just the forgetful functor.</p>



<a name="280804911"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/fintype_functor/near/280804911" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/fintype_functor.html#280804911">(May 01 2022 at 17:20)</a>:</h4>
<p>My main objection is that it takes a total of 6 key presses to write a subscript <code>el</code>.</p>



<a name="280805325"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/fintype_functor/near/280805325" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/fintype_functor.html#280805325">(May 01 2022 at 17:29)</a>:</h4>
<p>Well, maybe I should just finally figure out how to make custom snippets in vscode. Is there some package for vscode that's similar to emacs yasnippet?</p>



<a name="280805702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/fintype_functor/near/280805702" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/fintype_functor.html#280805702">(May 01 2022 at 17:37)</a>:</h4>
<p>I wanted to make a random annotation to indicate "this is a forgetful functor" because it helped me understand the code base. I'm quite happy for it to be removed.</p>



<a name="280805811"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/fintype_functor/near/280805811" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/fintype_functor.html#280805811">(May 01 2022 at 17:40)</a>:</h4>
<p>No, I agree that such an annotation is good in principle, but i find typing those two subscripts to be cumbersome.</p>



<a name="280806196"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/fintype_functor/near/280806196" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/fintype_functor.html#280806196">(May 01 2022 at 17:50)</a>:</h4>
<p>You can also add <code>\el</code> as an abbreviation to the extensions. See <a href="https://github.com/leanprover-community/vscode-lean/pull/298">vscode-lean#298</a></p>



<a name="280806218"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/fintype_functor/near/280806218" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/fintype_functor.html#280806218">(May 01 2022 at 17:51)</a>:</h4>
<p><span class="user-mention" data-user-id="123965">@Bryan Gin-ge Chen</span>, can you make the linkifier point to the correct repo when it's on <code>leanprover</code> rather than <code>leanprover-community</code>?</p>



<a name="280806807"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/fintype_functor/near/280806807" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/fintype_functor.html#280806807">(May 01 2022 at 18:04)</a>:</h4>
<p>It'd be tough I think. You can do <a href="https://github.com/leanprover/vscode-lean/pull/298">leanprover/vscode-lean#298</a> though.</p>



<a name="280806891"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/fintype_functor/near/280806891" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/fintype_functor.html#280806891">(May 01 2022 at 18:06)</a>:</h4>
<p>There must be a way to do this locally as opposed to changing the vscode-lean package for everyone. Besides, a good snippet package would be useful for other reasons as well.</p>



<a name="280807016"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/fintype_functor/near/280807016" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/fintype_functor.html#280807016">(May 01 2022 at 18:09)</a>:</h4>
<p>Looks like vscode has snippets built in</p>
<p><a href="https://code.visualstudio.com/docs/editor/userdefinedsnippets">https://code.visualstudio.com/docs/editor/userdefinedsnippets</a></p>



<a name="280885212"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/fintype_functor/near/280885212" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/fintype_functor.html#280885212">(May 02 2022 at 15:02)</a>:</h4>
<p><del>@<strong>Filippo A. E. Nuccio</strong> I think one needs to assume that <code>0 &lt; r</code> for <code>is_open_U</code> (in which case, I have a proof)</del> Oops! I had the inequality backwards. Ignore me.</p>



<a name="280896193"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/fintype_functor/near/280896193" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/fintype_functor.html#280896193">(May 02 2022 at 16:17)</a>:</h4>
<p>No problem! At any rate, I am advancing well with the proof (and having quite some fun opposing and unopposing categories <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span> ), so I hope to push it soon.</p>



<a name="280896995"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/fintype_functor/near/280896995" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/fintype_functor.html#280896995">(May 02 2022 at 16:24)</a>:</h4>
<p><span class="user-mention" data-user-id="300245">@Filippo A. E. Nuccio</span> I think <code>0 &lt; r</code> may actually be needed?</p>



<a name="280896999"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/fintype_functor/near/280896999" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/fintype_functor.html#280896999">(May 02 2022 at 16:24)</a>:</h4>
<p>Maybe I'm missing something.</p>



<a name="280897141"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/fintype_functor/near/280897141" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/fintype_functor.html#280897141">(May 02 2022 at 16:25)</a>:</h4>
<p>Well, at any rate we have it in the setting where I am working (because the parameter <code>p</code> defines <code>r</code> and we have <code>lemma r_pos</code>. Or are you speaking of something else?</p>



<a name="280897547"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/fintype_functor/near/280897547" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/fintype_functor.html#280897547">(May 02 2022 at 16:28)</a>:</h4>
<p>Oh ok, I thought <code>r</code> was just some random element of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi mathvariant="double-struck">R</mi><mrow><mo>≥</mo><mn>0</mn></mrow></msub></mrow><annotation encoding="application/x-tex">\mathbb{R}_{\ge 0}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9341em;vertical-align:-0.2452em;"></span><span class="mord"><span class="mord mathbb">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mrel mtight">≥</span><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2452em;"><span></span></span></span></span></span></span></span></span></span>.</p>



<a name="280897657"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/fintype_functor/near/280897657" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/fintype_functor.html#280897657">(May 02 2022 at 16:29)</a>:</h4>
<p>No, we have </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">local</span> <span class="kd">notation</span> <span class="bp">`</span><span class="n">r</span><span class="bp">`</span> <span class="o">:=</span> <span class="bp">@</span><span class="n">r</span> <span class="n">p</span>
</code></pre></div>
<p>where   <code>def r : ℝ≥0 := 2⁻¹ ^ (p : ℝ)</code>.</p>



<a name="280897690"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/fintype_functor/near/280897690" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/fintype_functor.html#280897690">(May 02 2022 at 16:29)</a>:</h4>
<p>Yeah I see it now.</p>



<a name="280901819"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/fintype_functor/near/280901819" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/fintype_functor.html#280901819">(May 02 2022 at 17:00)</a>:</h4>
<p>Here's the proof I came up with (modulo one small sorry, which uses that <code>0 &lt; r &lt; 1</code>):</p>
<div class="spoiler-block"><div class="spoiler-header">
</div><div class="spoiler-content" aria-hidden="true">
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">is_open_U</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="n">filtration</span> <span class="o">(</span><span class="n">ℒ</span> <span class="n">ϖ</span><span class="o">)</span> <span class="n">c</span><span class="o">)</span> <span class="o">(</span><span class="n">B</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_open</span> <span class="o">(</span><span class="n">U</span> <span class="n">c</span> <span class="n">F</span> <span class="n">B</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">let</span> <span class="n">ι</span> <span class="o">:</span> <span class="n">filtration</span> <span class="o">(</span><span class="n">ℒ</span> <span class="n">ϖ</span><span class="o">)</span> <span class="n">c</span> <span class="bp">→</span> <span class="bp">Π</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">),</span> <span class="n">ℤ</span> <span class="o">:=</span>
    <span class="bp">λ</span> <span class="n">t</span> <span class="n">i</span><span class="o">,</span> <span class="n">truncate</span> <span class="o">{</span><span class="n">i</span><span class="o">}</span> <span class="n">t</span> <span class="n">punit.star</span> <span class="o">⟨</span><span class="n">i</span><span class="o">,</span><span class="kd">by</span> <span class="n">simp</span><span class="o">⟩,</span>
  <span class="k">have</span> <span class="n">hι</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">ι</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="n">continuous_pi_iff</span><span class="o">,</span> <span class="n">intros</span> <span class="n">i</span><span class="o">,</span>
    <span class="n">dsimp</span> <span class="o">[</span><span class="n">ι</span><span class="o">],</span>
    <span class="n">change</span> <span class="n">continuous</span> <span class="o">((</span><span class="bp">λ</span> <span class="o">(</span><span class="n">t</span> <span class="o">:</span> <span class="n">laurent_measures_bdd</span> <span class="n">r</span> <span class="n">ϖ</span> <span class="o">{</span><span class="n">i</span><span class="o">}</span> <span class="n">c</span><span class="o">),</span>
      <span class="n">t</span> <span class="n">punit.star</span> <span class="o">⟨</span><span class="n">i</span><span class="o">,</span><span class="kd">by</span> <span class="n">simp</span><span class="o">⟩)</span> <span class="bp">∘</span> <span class="n">truncate</span> <span class="o">{</span><span class="n">i</span><span class="o">}),</span>
    <span class="n">refine</span> <span class="n">continuous.comp</span> <span class="n">continuous_bot</span> <span class="o">(</span><span class="n">truncate_continuous</span> <span class="bp">«</span><span class="n">r</span><span class="bp">»</span> <span class="o">(</span><span class="n">Fintype.of</span> <span class="n">punit</span><span class="o">)</span> <span class="n">c</span> <span class="o">{</span><span class="n">i</span><span class="o">})</span> <span class="o">},</span>
  <span class="n">obtain</span> <span class="o">⟨</span><span class="n">n₀</span><span class="o">,</span><span class="n">h₀</span><span class="o">⟩</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">n₀</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">,</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="n">ℒ</span> <span class="n">ϖ</span><span class="o">)</span> <span class="o">(</span><span class="n">hH</span> <span class="o">:</span> <span class="n">H</span> <span class="bp">∈</span> <span class="n">filtration</span> <span class="o">(</span><span class="n">ℒ</span> <span class="n">ϖ</span><span class="o">)</span> <span class="n">c</span><span class="o">),</span>
    <span class="n">m</span> <span class="bp">&lt;</span> <span class="n">n₀</span> <span class="bp">→</span> <span class="n">H</span> <span class="n">punit.star</span> <span class="n">m</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">obtain</span> <span class="o">⟨</span><span class="n">n₀</span><span class="o">,</span><span class="n">h₀</span><span class="o">⟩</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">n₀</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">,</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">),</span> <span class="n">m</span> <span class="bp">&lt;</span> <span class="n">n₀</span> <span class="bp">→</span> <span class="n">c</span> <span class="bp">&lt;</span> <span class="n">r</span><span class="bp">^</span><span class="n">m</span> <span class="o">:=</span> <span class="gr">sorry</span><span class="o">,</span>
    <span class="n">use</span> <span class="n">n₀</span><span class="o">,</span> <span class="n">intros</span> <span class="n">m</span> <span class="n">H</span> <span class="n">hH</span> <span class="n">hm</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">eq_zero_of_filtration</span> <span class="n">H</span> <span class="n">_</span> <span class="n">hH</span> <span class="n">punit.star</span> <span class="n">m</span> <span class="o">(</span><span class="n">h₀</span> <span class="n">m</span> <span class="n">hm</span><span class="o">)</span> <span class="o">},</span>
  <span class="n">classical</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">UU</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="bp">Π</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">),</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">:=</span>
    <span class="n">set.pi</span> <span class="o">(</span><span class="n">set.Ico</span> <span class="n">n₀</span> <span class="n">B</span><span class="o">)</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">i</span><span class="o">,</span> <span class="k">if</span> <span class="n">i</span> <span class="bp">∈</span> <span class="n">set.Ico</span> <span class="n">n₀</span> <span class="n">B</span> <span class="k">then</span> <span class="o">{</span> <span class="n">F</span> <span class="n">punit.star</span> <span class="n">i</span> <span class="o">}</span> <span class="k">else</span> <span class="bp">⊤</span><span class="o">),</span>
  <span class="k">have</span> <span class="n">hUU</span> <span class="o">:</span> <span class="n">is_open</span> <span class="n">UU</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">apply</span> <span class="n">is_open_set_pi</span><span class="o">,</span> <span class="n">exact</span> <span class="n">finite_Ico</span> <span class="n">n₀</span> <span class="n">B</span><span class="o">,</span>
    <span class="n">intros</span> <span class="n">a</span> <span class="n">ha</span><span class="o">,</span> <span class="n">trivial</span> <span class="o">},</span>
  <span class="n">convert</span> <span class="n">hUU.preimage</span> <span class="n">hι</span><span class="o">,</span>
  <span class="n">ext</span> <span class="n">G</span><span class="o">,</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">intros</span> <span class="n">hG</span><span class="o">,</span> <span class="n">dsimp</span> <span class="o">[</span><span class="n">U</span><span class="o">,</span> <span class="n">UU</span><span class="o">,</span> <span class="n">ι</span><span class="o">]</span> <span class="n">at</span> <span class="bp">⊢</span> <span class="n">hG</span><span class="o">,</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">set.mem_preimage</span><span class="o">,</span> <span class="n">set.mem_pi</span><span class="o">],</span>
    <span class="n">intros</span> <span class="n">i</span> <span class="n">hi</span><span class="o">,</span> <span class="n">rw</span> <span class="n">if_pos</span> <span class="n">hi</span><span class="o">,</span>
    <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">mem_singleton_iff</span><span class="o">],</span>
    <span class="n">symmetry</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">hG</span><span class="o">,</span> <span class="n">exact</span> <span class="n">hi.2</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">intros</span> <span class="n">hG</span><span class="o">,</span> <span class="n">dsimp</span> <span class="o">[</span><span class="n">U</span><span class="o">,</span> <span class="n">UU</span><span class="o">,</span> <span class="n">ι</span><span class="o">]</span> <span class="n">at</span> <span class="bp">⊢</span> <span class="n">hG</span><span class="o">,</span>
    <span class="n">rintros</span> <span class="o">⟨⟩</span> <span class="n">n</span> <span class="n">hn</span><span class="o">,</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">set.mem_preimage</span><span class="o">,</span> <span class="n">set.mem_pi</span><span class="o">]</span> <span class="n">at</span> <span class="n">hG</span><span class="o">,</span>
    <span class="n">symmetry</span><span class="o">,</span>
    <span class="n">by_cases</span> <span class="n">hn'</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">&lt;</span> <span class="n">n₀</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">erw</span> <span class="o">[</span><span class="n">h₀</span> <span class="n">n</span> <span class="n">G.1</span> <span class="n">G.2</span> <span class="n">hn'</span><span class="o">,</span> <span class="n">h₀</span> <span class="n">n</span> <span class="n">F.1</span> <span class="n">F.2</span> <span class="n">hn'</span><span class="o">]</span> <span class="o">},</span>
    <span class="k">have</span> <span class="n">hn''</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">∈</span> <span class="n">set.Ico</span> <span class="n">n₀</span> <span class="n">B</span> <span class="o">:=</span> <span class="o">⟨</span><span class="kd">by</span> <span class="n">simpa</span> <span class="n">using</span> <span class="n">hn'</span><span class="o">,</span> <span class="n">hn</span><span class="o">⟩,</span>
    <span class="n">specialize</span> <span class="n">hG</span> <span class="n">n</span> <span class="n">hn''</span><span class="o">,</span> <span class="n">rw</span> <span class="n">if_pos</span> <span class="n">hn''</span> <span class="n">at</span> <span class="n">hG</span><span class="o">,</span> <span class="n">simpa</span> <span class="n">using</span> <span class="n">hG</span> <span class="o">},</span>
<span class="kd">end</span>
</code></pre></div>
</div></div>



<a name="280901905"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/fintype_functor/near/280901905" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/fintype_functor.html#280901905">(May 02 2022 at 17:00)</a>:</h4>
<p>Oh thanks!</p>



<a name="280901922"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/fintype_functor/near/280901922" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/fintype_functor.html#280901922">(May 02 2022 at 17:01)</a>:</h4>
<p>I think I will finish mine and then compare it with yours!</p>



<a name="280901926"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/fintype_functor/near/280901926" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/fintype_functor.html#280901926">(May 02 2022 at 17:01)</a>:</h4>
<p>I can push it if you want.</p>



<a name="280902271"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/fintype_functor/near/280902271" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/fintype_functor.html#280902271">(May 02 2022 at 17:03)</a>:</h4>
<p>OK, go ahead.</p>



<a name="280904520"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/fintype_functor/near/280904520" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/fintype_functor.html#280904520">(May 02 2022 at 17:19)</a>:</h4>
<p><span class="user-mention" data-user-id="243562">@Adam Topaz</span> Are you taking care of the remaining <code>sorry</code> or should I?</p>



<a name="280904586"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/fintype_functor/near/280904586" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/fintype_functor.html#280904586">(May 02 2022 at 17:19)</a>:</h4>
<p>Please go ahead!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>