---
layout: archive
title: Zulip Chat Archive
permalink: /stream/267928-condensed-mathematics/topic/Ext.20commutes.20with.20coproducts.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/index.html">condensed mathematics</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Ext.20commutes.20with.20coproducts.html">Ext commutes with coproducts</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="281877921"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Ext%20commutes%20with%20coproducts/near/281877921" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Ext.20commutes.20with.20coproducts.html#281877921">(May 10 2022 at 19:58)</a>:</h4>
<p>Hi all,</p>
<p>I've been working on the fact that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi><mi>x</mi><mi>t</mi><mo stretchy="false">(</mo><mo>−</mo><mo separator="true">,</mo><mi>Y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Ext(-,Y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">E</span><span class="mord mathnormal">x</span><span class="mord mathnormal">t</span><span class="mopen">(</span><span class="mord">−</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mclose">)</span></span></span></span> sends coproducts to products.<br>
The statement is here:<br>
<a href="https://github.com/leanprover-community/lean-liquid/blob/734501a160b2c70d7783ef0eab9d2efda97ca696/src/for_mathlib/derived/ext_coproducts.lean#L379">https://github.com/leanprover-community/lean-liquid/blob/734501a160b2c70d7783ef0eab9d2efda97ca696/src/for_mathlib/derived/ext_coproducts.lean#L379</a></p>
<p>There are a few sorries left for this:</p>
<ol>
<li>
<p>A coproduct of quasi isos is a quasi iso:<br>
<a href="https://github.com/leanprover-community/lean-liquid/blob/734501a160b2c70d7783ef0eab9d2efda97ca696/src/for_mathlib/derived/ext_coproducts.lean#L238">https://github.com/leanprover-community/lean-liquid/blob/734501a160b2c70d7783ef0eab9d2efda97ca696/src/for_mathlib/derived/ext_coproducts.lean#L238</a></p>
</li>
<li>
<p>Existence of projective replacements with a uniform bound in a family of complexes, given that the members of the family have a uniform upper bound (this should be more-or-less just repackaging what's already been done about projective replacements):<br>
<a href="https://github.com/leanprover-community/lean-liquid/blob/734501a160b2c70d7783ef0eab9d2efda97ca696/src/for_mathlib/derived/lemmas.lean#L509">https://github.com/leanprover-community/lean-liquid/blob/734501a160b2c70d7783ef0eab9d2efda97ca696/src/for_mathlib/derived/lemmas.lean#L509</a></p>
</li>
</ol>



<a name="281877978"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Ext%20commutes%20with%20coproducts/near/281877978" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Ext.20commutes.20with.20coproducts.html#281877978">(May 10 2022 at 19:58)</a>:</h4>
<p>We will also need some naturality properties of this isomorphism, but those shouldn't be too difficult.</p>



<a name="281879909"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Ext%20commutes%20with%20coproducts/near/281879909" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Ext.20commutes.20with.20coproducts.html#281879909">(May 10 2022 at 20:14)</a>:</h4>
<p>(the result about quasi-isos might need some additional assumptions on the abelian category)</p>



<a name="282510574"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Ext%20commutes%20with%20coproducts/near/282510574" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Ext.20commutes.20with.20coproducts.html#282510574">(May 16 2022 at 15:17)</a>:</h4>
<p>The only two sorries left for this (ext commutes with coproducts) are here:<br>
<a href="https://github.com/leanprover-community/lean-liquid/blob/9cef18ca127f1c740f7da2fcfc9b120f0b07cf3e/src/for_mathlib/ab4.lean#L102">https://github.com/leanprover-community/lean-liquid/blob/9cef18ca127f1c740f7da2fcfc9b120f0b07cf3e/src/for_mathlib/ab4.lean#L102</a></p>



<a name="282518182"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Ext%20commutes%20with%20coproducts/near/282518182" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Ext.20commutes.20with.20coproducts.html#282518182">(May 16 2022 at 16:10)</a>:</h4>
<p>Okay, it's down to one sorry:<br>
<a href="https://github.com/leanprover-community/lean-liquid/blob/c94305820be33c01342fa53b41406f7a61648eb8/src/for_mathlib/ab4.lean#L107">https://github.com/leanprover-community/lean-liquid/blob/c94305820be33c01342fa53b41406f7a61648eb8/src/for_mathlib/ab4.lean#L107</a></p>
<p>This is just some statement about regular homology (I already added the necessary glue to pass to the homotopy category).<br>
It should be doable in case anyone is bored (Kevin?)</p>



<a name="282518925"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Ext%20commutes%20with%20coproducts/near/282518925" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Ext.20commutes.20with.20coproducts.html#282518925">(May 16 2022 at 16:15)</a>:</h4>
<p>I've got my hands full with showing that if |(X-2)g(X)|&lt;=c then |g(X)|&lt;=c' right now, so am no longer bored.</p>



<a name="282706707"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Ext%20commutes%20with%20coproducts/near/282706707" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Ext.20commutes.20with.20coproducts.html#282706707">(May 17 2022 at 21:03)</a>:</h4>
<p>Quick update:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">noncomputable</span>
<span class="kd">def</span> <span class="n">Ext_coproduct_iso</span>
  <span class="o">[</span><span class="n">AB4</span> <span class="n">A</span><span class="o">]</span>
  <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">}</span>
  <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">bounded_homotopy_category</span> <span class="n">A</span><span class="o">)</span>
  <span class="o">[</span><span class="n">uniformly_bounded</span> <span class="n">X</span><span class="o">]</span>
  <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">Y</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">((</span><span class="n">Ext</span> <span class="n">i</span><span class="o">)</span><span class="bp">.</span><span class="n">obj</span> <span class="o">(</span><span class="n">op</span> <span class="o">(</span><span class="n">sigma_obj</span> <span class="n">X</span><span class="o">)))</span><span class="bp">.</span><span class="n">obj</span> <span class="n">Y</span> <span class="bp">≅</span>
  <span class="n">pi_obj</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">,</span> <span class="o">((</span><span class="n">Ext</span> <span class="n">i</span><span class="o">)</span><span class="bp">.</span><span class="n">obj</span> <span class="o">(</span><span class="n">op</span> <span class="o">(</span><span class="n">X</span> <span class="n">a</span><span class="o">)))</span><span class="bp">.</span><span class="n">obj</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">...</span>
</code></pre></div>
<p>is sorry-free.</p>
<p>Unfortunately, the <code>[uniformly_bounded X]</code> assumption makes it hard to state a correct version in terms of <code>Ext</code> commuting with certain (co)limits, so we may have to prove the naturality conditions separately, although they should not be difficult.</p>



<a name="282712100"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Ext%20commutes%20with%20coproducts/near/282712100" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Ext.20commutes.20with.20coproducts.html#282712100">(May 17 2022 at 21:51)</a>:</h4>
<p>Alright, I added the following naturality sttatements as well:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">Ext_coproduct_iso_naturality</span>
  <span class="o">[</span><span class="n">AB4</span> <span class="n">A</span><span class="o">]</span>
  <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">}</span>
  <span class="o">(</span><span class="n">X₁</span> <span class="n">X₂</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">bounded_homotopy_category</span> <span class="n">A</span><span class="o">)</span>
  <span class="o">[</span><span class="n">uniformly_bounded</span> <span class="n">X₁</span><span class="o">]</span>
  <span class="o">[</span><span class="n">uniformly_bounded</span> <span class="n">X₂</span><span class="o">]</span>
  <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">X₁</span> <span class="bp">⟶</span> <span class="n">X₂</span><span class="o">)</span>
  <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">Y</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">((</span><span class="n">Ext</span> <span class="n">i</span><span class="o">)</span><span class="bp">.</span><span class="n">map</span> <span class="o">(</span><span class="n">sigma.desc</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">b</span><span class="o">,</span> <span class="n">g</span> <span class="n">b</span> <span class="bp">≫</span> <span class="n">sigma.ι</span> <span class="n">X₂</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∐</span> <span class="n">X₁</span> <span class="bp">⟶</span> <span class="bp">∐</span> <span class="n">X₂</span><span class="o">)</span><span class="bp">.</span><span class="n">op</span><span class="o">)</span><span class="bp">.</span><span class="n">app</span> <span class="n">Y</span> <span class="bp">≫</span>
  <span class="o">(</span><span class="n">Ext_coproduct_iso</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span><span class="o">)</span><span class="bp">.</span><span class="n">hom</span> <span class="bp">=</span>
  <span class="o">(</span><span class="n">Ext_coproduct_iso</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span><span class="o">)</span><span class="bp">.</span><span class="n">hom</span> <span class="bp">≫</span>
  <span class="n">pi.lift</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">b</span><span class="o">,</span> <span class="n">pi.π</span> <span class="n">_</span> <span class="n">b</span> <span class="bp">≫</span> <span class="o">((</span><span class="n">Ext</span> <span class="n">i</span><span class="o">)</span><span class="bp">.</span><span class="n">map</span> <span class="o">(</span><span class="n">g</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">op</span><span class="o">)</span><span class="bp">.</span><span class="n">app</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">...</span>

<span class="kd">lemma</span> <span class="n">Ext_coproduct_iso_naturality'</span>
  <span class="o">[</span><span class="n">AB4</span> <span class="n">A</span><span class="o">]</span>
  <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">}</span>
  <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">bounded_homotopy_category</span> <span class="n">A</span><span class="o">)</span>
  <span class="o">[</span><span class="n">uniformly_bounded</span> <span class="n">X</span><span class="o">]</span>
  <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">Y₁</span> <span class="n">Y₂</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">Y₁</span> <span class="bp">⟶</span> <span class="n">Y₂</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">((</span><span class="n">Ext</span> <span class="n">i</span><span class="o">)</span><span class="bp">.</span><span class="n">obj</span> <span class="o">(</span><span class="n">op</span> <span class="o">(</span><span class="n">sigma_obj</span> <span class="n">X</span><span class="o">)))</span><span class="bp">.</span><span class="n">map</span> <span class="n">f</span> <span class="bp">≫</span>
  <span class="o">(</span><span class="n">Ext_coproduct_iso</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span><span class="o">)</span><span class="bp">.</span><span class="n">hom</span> <span class="bp">=</span>
  <span class="o">(</span><span class="n">Ext_coproduct_iso</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span><span class="o">)</span><span class="bp">.</span><span class="n">hom</span> <span class="bp">≫</span>
  <span class="n">pi.lift</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">a</span><span class="o">,</span> <span class="n">pi.π</span> <span class="n">_</span> <span class="n">a</span> <span class="bp">≫</span> <span class="o">((</span><span class="n">Ext</span> <span class="n">i</span><span class="o">)</span><span class="bp">.</span><span class="n">obj</span> <span class="n">_</span><span class="o">)</span><span class="bp">.</span><span class="n">map</span> <span class="n">f</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">...</span>
</code></pre></div>



<a name="282736552"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Ext%20commutes%20with%20coproducts/near/282736552" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Ext.20commutes.20with.20coproducts.html#282736552">(May 18 2022 at 04:19)</a>:</h4>
<p>That's really great! We're getting close to ticking off two more ovals.</p>



<a name="282884054"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Ext%20commutes%20with%20coproducts/near/282884054" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Ext.20commutes.20with.20coproducts.html#282884054">(May 19 2022 at 05:46)</a>:</h4>
<p>Hmm... we might also need the fact that <code>chain_complex.to_bounded_homotopy_category</code> preserves coproducts.</p>



<a name="282884173"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Ext%20commutes%20with%20coproducts/near/282884173" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Ext.20commutes.20with.20coproducts.html#282884173">(May 19 2022 at 05:49)</a>:</h4>
<p>We can prove that we have a termwise short exact sequence <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>⨁</mo><mo>→</mo><mo>⨁</mo><mo>→</mo><mtext>foo</mtext></mrow><annotation encoding="application/x-tex">\bigoplus \to \bigoplus \to \text{foo}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop op-symbol small-op" style="position:relative;top:0em;">⨁</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop op-symbol small-op" style="position:relative;top:0em;">⨁</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord text"><span class="mord">foo</span></span></span></span></span> at the level of complexes, and then we want to apply <code>Ext(_, V)</code> to that, and get a LES, and pull the coproducts out of the Ext.</p>



<a name="282918465"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Ext%20commutes%20with%20coproducts/near/282918465" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Ext.20commutes.20with.20coproducts.html#282918465">(May 19 2022 at 12:05)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> that should be trivial to prove</p>



<a name="282918577"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Ext%20commutes%20with%20coproducts/near/282918577" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Ext.20commutes.20with.20coproducts.html#282918577">(May 19 2022 at 12:06)</a>:</h4>
<p>Write it as a composition of going via the homotopy cat, and I think i proved both functors preserve coproducts</p>



<a name="282918639"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Ext%20commutes%20with%20coproducts/near/282918639" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Ext.20commutes.20with.20coproducts.html#282918639">(May 19 2022 at 12:07)</a>:</h4>
<p>I can add it in a few mins</p>



<a name="282918848"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Ext%20commutes%20with%20coproducts/near/282918848" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Ext.20commutes.20with.20coproducts.html#282918848">(May 19 2022 at 12:09)</a>:</h4>
<p>Aha, so you have this uniformly-bounded type class also for the homotopy cat?</p>



<a name="282919426"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Ext%20commutes%20with%20coproducts/near/282919426" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Ext.20commutes.20with.20coproducts.html#282919426">(May 19 2022 at 12:15)</a>:</h4>
<p>I just pushed some stuff. There are plenty sorries <span aria-label="see no evil" class="emoji emoji-1f648" role="img" title="see no evil">:see_no_evil:</span> The glue to get to <code>first_target</code> is at least as painful as I was expecting it to be. Really everything has to be functorial... which makes it annoying to even write down statements.</p>



<a name="282924216"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Ext%20commutes%20with%20coproducts/near/282924216" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Ext.20commutes.20with.20coproducts.html#282924216">(May 19 2022 at 12:55)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> where can I find <code>chain_complex.to_bounded_homotopy_category</code> again?</p>



<a name="282924340"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Ext%20commutes%20with%20coproducts/near/282924340" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Ext.20commutes.20with.20coproducts.html#282924340">(May 19 2022 at 12:56)</a>:</h4>
<p><code>derived/example.lean</code></p>



<a name="282924342"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Ext%20commutes%20with%20coproducts/near/282924342" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Ext.20commutes.20with.20coproducts.html#282924342">(May 19 2022 at 12:56)</a>:</h4>
<p>I was wrong in my comment above, but it should still be easy to prove</p>



<a name="282924353"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Ext%20commutes%20with%20coproducts/near/282924353" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Ext.20commutes.20with.20coproducts.html#282924353">(May 19 2022 at 12:56)</a>:</h4>
<p>We should really clean up that file</p>



<a name="282924412"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Ext%20commutes%20with%20coproducts/near/282924412" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Ext.20commutes.20with.20coproducts.html#282924412">(May 19 2022 at 12:56)</a>:</h4>
<p>Agreed.</p>



<a name="282947126"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Ext%20commutes%20with%20coproducts/near/282947126" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Ext.20commutes.20with.20coproducts.html#282947126">(May 19 2022 at 15:37)</a>:</h4>
<p>If anyone wants to get annoyed with completely trivial things that are hard in lean, here are a few sorries for you:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">noncomputable</span>
<span class="kd">instance</span> <span class="n">homological_complex_embed_preserves_coproducts</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">}</span>
  <span class="o">{</span><span class="n">M</span> <span class="n">N</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">(</span><span class="n">c₁</span> <span class="o">:</span> <span class="n">complex_shape</span> <span class="n">M</span><span class="o">)</span> <span class="o">(</span><span class="n">c₂</span> <span class="o">:</span> <span class="n">complex_shape</span> <span class="n">N</span><span class="o">)</span> <span class="o">(</span><span class="n">e</span> <span class="o">:</span> <span class="n">c₁.embedding</span> <span class="n">c₂</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">preserves_colimits_of_shape</span> <span class="o">(</span><span class="n">discrete</span> <span class="n">α</span><span class="o">)</span>
  <span class="o">(</span><span class="n">homological_complex.embed</span> <span class="n">e</span> <span class="o">:</span> <span class="n">homological_complex</span> <span class="n">A</span> <span class="n">_</span> <span class="bp">⥤</span> <span class="n">_</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">preserves_coproducts_aux</span>
<span class="o">(</span><span class="n">homological_complex.embed</span> <span class="n">e</span> <span class="o">:</span> <span class="n">homological_complex</span> <span class="n">A</span> <span class="n">_</span> <span class="bp">⥤</span> <span class="n">_</span><span class="o">)</span>
<span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">homological_complex</span> <span class="n">A</span> <span class="n">c₁</span><span class="o">),</span> <span class="n">homological_complex.hom.iso_of_components</span>
<span class="gr">sorry</span> <span class="gr">sorry</span><span class="o">)</span> <span class="c1">-- Ugh... this is so annoying!</span>
<span class="gr">sorry</span>
</code></pre></div>
<p>They can be found here:<br>
<a href="https://github.com/leanprover-community/lean-liquid/blob/c60d928c4fab0c3e9f87a8da50415515dca3b0bc/src/for_mathlib/derived/ext_coproducts.lean#L282">https://github.com/leanprover-community/lean-liquid/blob/c60d928c4fab0c3e9f87a8da50415515dca3b0bc/src/for_mathlib/derived/ext_coproducts.lean#L282</a></p>



<a name="282986509"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Ext%20commutes%20with%20coproducts/near/282986509" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Ext.20commutes.20with.20coproducts.html#282986509">(May 19 2022 at 20:19)</a>:</h4>
<p>I've just removed the <code>sorry</code> from <code>invpoly/ses.lean</code> so on the tube home I'll get annoyed with this.</p>



<a name="282986607"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Ext%20commutes%20with%20coproducts/near/282986607" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Ext.20commutes.20with.20coproducts.html#282986607">(May 19 2022 at 20:20)</a>:</h4>
<p>ooh, is the first goal full of <code>option.rec</code>s and doesn't fit on one screen? Maybe I won't even have time to get annoyed with it, I might spend the journey trying to figure out what the question is.</p>



<a name="282990789"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Ext%20commutes%20with%20coproducts/near/282990789" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Ext.20commutes.20with.20coproducts.html#282990789">(May 19 2022 at 20:53)</a>:</h4>
<p>The <code>option.rec</code> stuff probably needs to be modified slightly.</p>



<a name="282992164"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Ext%20commutes%20with%20coproducts/near/282992164" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Ext.20commutes.20with.20coproducts.html#282992164">(May 19 2022 at 21:04)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code>  <span class="o">{</span> <span class="n">simp_rw</span> <span class="o">[</span><span class="n">h₁</span><span class="o">,</span> <span class="n">h₂</span><span class="o">],</span>
    <span class="n">dsimp</span><span class="o">,</span>
    <span class="n">simp</span><span class="o">,</span>
    <span class="gr">sorry</span> <span class="c1">-- still annoying</span>
</code></pre></div>
<p>seems to change the first sorry into a statement of the form "d commutes with a map comprised of the composition of about 4 canonical isomorphisms"</p>



<a name="282993744"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Ext%20commutes%20with%20coproducts/near/282993744" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Ext.20commutes.20with.20coproducts.html#282993744">(May 19 2022 at 21:21)</a>:</h4>
<p>Oh nice! It should be doable now!</p>



<a name="282993922"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Ext%20commutes%20with%20coproducts/near/282993922" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Ext.20commutes.20with.20coproducts.html#282993922">(May 19 2022 at 21:23)</a>:</h4>
<p>take a look at the lemma called embed.d_eq_of_some_of_some` (or some variant)</p>



<a name="282995048"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Ext%20commutes%20with%20coproducts/near/282995048" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Ext.20commutes.20with.20coproducts.html#282995048">(May 19 2022 at 21:35)</a>:</h4>
<p>I'm working on that sorry now</p>



<a name="282995812"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Ext%20commutes%20with%20coproducts/near/282995812" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Ext.20commutes.20with.20coproducts.html#282995812">(May 19 2022 at 21:41)</a>:</h4>
<p>Okay, that sorry is killed.... but </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="c1">-- still annoying</span>
</code></pre></div>
<p>remains</p>



<a name="282996377"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Ext%20commutes%20with%20coproducts/near/282996377" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Ext.20commutes.20with.20coproducts.html#282996377">(May 19 2022 at 21:46)</a>:</h4>
<p>Oh lol I thought the hard part was pushing the d through the isomorphisms :-)</p>



<a name="282997233"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Ext%20commutes%20with%20coproducts/near/282997233" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Ext.20commutes.20with.20coproducts.html#282997233">(May 19 2022 at 21:56)</a>:</h4>
<p>Alright, the remaining sorry is done as well!</p>



<a name="282997256"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Ext%20commutes%20with%20coproducts/near/282997256" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Ext.20commutes.20with.20coproducts.html#282997256">(May 19 2022 at 21:56)</a>:</h4>
<p>It's (very) far from the cleanest proof...</p>



<a name="282997470"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Ext%20commutes%20with%20coproducts/near/282997470" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Ext.20commutes.20with.20coproducts.html#282997470">(May 19 2022 at 21:59)</a>:</h4>
<p>I would send a <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span>  but I'm getting an exciting new error "failed to add reaction" on Android</p>



<a name="282999531"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Ext%20commutes%20with%20coproducts/near/282999531" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Ext.20commutes.20with.20coproducts.html#282999531">(May 19 2022 at 22:21)</a>:</h4>
<p>I think in android <code>congratulations</code> is broken but <code>tada</code> works? <span aria-label="shrug" class="emoji emoji-1f937" role="img" title="shrug">:shrug:</span></p>



<a name="282999574"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Ext%20commutes%20with%20coproducts/near/282999574" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Ext.20commutes.20with.20coproducts.html#282999574">(May 19 2022 at 22:21)</a>:</h4>
<p><span aria-label="congratulations" class="emoji emoji-3297" role="img" title="congratulations">:congratulations:</span></p>



<a name="283026959"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Ext%20commutes%20with%20coproducts/near/283026959" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Ext.20commutes.20with.20coproducts.html#283026959">(May 20 2022 at 05:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/267928-condensed-mathematics/topic/Ext.20commutes.20with.20coproducts/near/282986509">said</a>:</p>
<blockquote>
<p>I've just removed the <code>sorry</code> from <code>invpoly/ses.lean</code> so on the tube home I'll get annoyed with this.</p>
</blockquote>
<p>Unfortunately there is no oval for this in the graph. But I'm certainly glad that this is done!</p>



<a name="283027165"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Ext%20commutes%20with%20coproducts/near/283027165" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Ext.20commutes.20with.20coproducts.html#283027165">(May 20 2022 at 05:53)</a>:</h4>
<p>Changing the subject a bit then: do you now have a clear overview of all the remaining <code>sorry</code>s, eg are you convinced that they're all fillable without any refactors, is there any <code>sorry</code>ed data, are there people working on every <code>sorry</code>, are there things which can be farmed out (you've done a very good job of farming out sorries to me, you directed me to problems that were within my skillset to solve etc).</p>



<a name="283027479"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Ext%20commutes%20with%20coproducts/near/283027479" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Ext.20commutes.20with.20coproducts.html#283027479">(May 20 2022 at 06:00)</a>:</h4>
<p>Yesterday I added a bunch of <code>sorry</code>s that are data. <span aria-label="see no evil" class="emoji emoji-1f648" role="img" title="see no evil">:see_no_evil:</span> They are "canonical" isomorphisms between certain functors.<br>
I can not promise that we don't need any further refactors. The glue between the first and the second part of the project is not very pleasant.</p>



<a name="283027974"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Ext%20commutes%20with%20coproducts/near/283027974" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Ext.20commutes.20with.20coproducts.html#283027974">(May 20 2022 at 06:07)</a>:</h4>
<p>Of course, hindsight is 20-20. But if I could start again, there are two things that I would do differently in the first part:</p>
<ul>
<li>Given <code>M : ProFiltPNGWithTinv</code> and <code>BD : breen_deligne.data</code> + suitable constants, define <code>FPSystem : chain_complex (Free int Profinite) nat</code>. That's a fundamental kind of object, where a lot of the computations happen. After that, apply the <code>V-hat</code> functor and take <code>T^{-1}</code>-invariants.<ul>
<li>Currently, all the computations happen after apply <code>V-hat(_)^{T-1}</code> functor, making many proofs complicated and messy.</li>
<li>It would be one contribution to make the glue easier (although I have now defined <code>FPSystem</code> and glued it to the first part, so from the pov of the second part, we can now basically assume that <code>FPSystem</code> was used in the first part.</li>
</ul>
</li>
<li>Minor technical issue: Use <code>Free int</code> in the definition of Breen-Deligne data, instead of <code>free_abelian_group</code>. It would mesh better with the point above. Also <code>free_abelian_group</code> lacks API, even though it occasionally has a nice defeq. But in the end, <code>finsupp</code> is just better.<ul>
<li>Eg. given a term <code>x : free_abelian_group X</code>, it is very annoying to talk about the support of <code>x</code>. But with finitely supported functions to <code>int</code> this is trivial.</li>
</ul>
</li>
</ul>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>