---
layout: archive
title: Zulip Chat Archive
permalink: /stream/267928-condensed-mathematics/topic/finite.20exact.20sequences.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/index.html">condensed mathematics</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/finite.20exact.20sequences.html">finite exact sequences</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="255346876"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/finite%20exact%20sequences/near/255346876" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/finite.20exact.20sequences.html#255346876">(Sep 29 2021 at 06:05)</a>:</h4>
<p>The following code compiles, but it seems like we can maybe improve the UX a bit:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.homology.exact</span>

<span class="kd">noncomputable theory</span>

<span class="kn">open</span> <span class="n">category_theory</span>
<span class="kn">open</span> <span class="n">category_theory.limits</span>

<span class="kd">universes</span> <span class="n">v</span> <span class="n">u</span>

<span class="kn">namespace</span> <span class="n">category_theory</span>
<span class="kd">variables</span> <span class="o">(</span><span class="bp">𝒞</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">[</span><span class="n">category.</span><span class="o">{</span><span class="n">v</span><span class="o">}</span> <span class="bp">𝒞</span><span class="o">]</span> <span class="o">[</span><span class="n">has_zero_morphisms</span> <span class="bp">𝒞</span><span class="o">]</span> <span class="o">[</span><span class="n">has_images</span> <span class="bp">𝒞</span><span class="o">]</span> <span class="o">[</span><span class="n">has_kernels</span> <span class="bp">𝒞</span><span class="o">]</span>

<span class="kd">inductive</span> <span class="n">exact_seq</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="bp">Σ</span> <span class="o">{</span><span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="bp">𝒞</span><span class="o">},</span> <span class="n">A</span> <span class="bp">⟶</span> <span class="n">B</span><span class="o">)</span> <span class="bp">→</span> <span class="kt">Prop</span>
<span class="bp">|</span> <span class="n">empty</span>  <span class="o">:</span> <span class="n">exact_seq</span> <span class="o">[]</span>
<span class="bp">|</span> <span class="n">single</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">f</span><span class="o">,</span> <span class="n">exact_seq</span> <span class="o">[</span><span class="n">f</span><span class="o">]</span>
<span class="bp">|</span> <span class="n">cons</span>   <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">A</span> <span class="n">B</span> <span class="n">C</span> <span class="o">:</span> <span class="bp">𝒞</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">⟶</span> <span class="n">B</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">B</span> <span class="bp">⟶</span> <span class="n">C</span><span class="o">)</span> <span class="o">(</span><span class="n">L</span><span class="o">)</span>
              <span class="o">(</span><span class="n">hfg</span> <span class="o">:</span> <span class="n">exact</span> <span class="n">f</span> <span class="n">g</span><span class="o">)</span> <span class="o">(</span><span class="n">hgL</span> <span class="o">:</span> <span class="n">exact_seq</span> <span class="o">(⟨</span><span class="n">_</span><span class="o">,</span><span class="n">_</span><span class="o">,</span><span class="n">g</span><span class="o">⟩</span> <span class="o">::</span> <span class="n">L</span><span class="o">)),</span>
              <span class="n">exact_seq</span> <span class="o">(⟨</span><span class="n">_</span><span class="o">,</span><span class="n">_</span><span class="o">,</span><span class="n">f</span><span class="o">⟩</span> <span class="o">::</span> <span class="o">⟨</span><span class="n">_</span><span class="o">,</span><span class="n">_</span><span class="o">,</span><span class="n">g</span><span class="o">⟩</span> <span class="o">::</span> <span class="n">L</span><span class="o">)</span>

<span class="kd">end</span> <span class="n">category_theory</span>
</code></pre></div>



<a name="255346886"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/finite%20exact%20sequences/near/255346886" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/finite.20exact.20sequences.html#255346886">(Sep 29 2021 at 06:06)</a>:</h4>
<p>I really don't like the underscores in <code>(⟨_,_,f⟩ :: ⟨_,_,g⟩ :: L)</code></p>



<a name="255346968"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/finite%20exact%20sequences/near/255346968" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/finite.20exact.20sequences.html#255346968">(Sep 29 2021 at 06:06)</a>:</h4>
<p>Ideally, we would have a way to write <code>exact_seq [f, g, h, f', g', h']</code> with minimal extra decoration to make it typecheck.</p>



<a name="255347005"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/finite%20exact%20sequences/near/255347005" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/finite.20exact.20sequences.html#255347005">(Sep 29 2021 at 06:07)</a>:</h4>
<p>The definition <code>exact_seq</code> doesn't have to make sure that the sources and targets of the morphisms line up.</p>



<a name="255347027"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/finite%20exact%20sequences/near/255347027" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/finite.20exact.20sequences.html#255347027">(Sep 29 2021 at 06:07)</a>:</h4>
<p>We could use arrow categories, maybe? But I fear that this mean we need to write <code>arrow.mk</code> all over the place. Which is also bad UX.</p>



<a name="255347762"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/finite%20exact%20sequences/near/255347762" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/finite.20exact.20sequences.html#255347762">(Sep 29 2021 at 06:16)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Do you have a suggestion how to magically improve our lives here?</p>



<a name="255348481"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/finite%20exact%20sequences/near/255348481" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/finite.20exact.20sequences.html#255348481">(Sep 29 2021 at 06:25)</a>:</h4>
<p>Ooh, wow! <code>arrow.mk</code> is available as a <code>coe</code>! Let me try that.</p>



<a name="255348991"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/finite%20exact%20sequences/near/255348991" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/finite.20exact.20sequences.html#255348991">(Sep 29 2021 at 06:32)</a>:</h4>
<p>Sweet! This looks pretty nice, I think:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">inductive</span> <span class="n">exact_seq</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">arrow</span> <span class="bp">𝒞</span><span class="o">)</span> <span class="bp">→</span> <span class="kt">Prop</span>
<span class="bp">|</span> <span class="n">empty</span>  <span class="o">:</span> <span class="n">exact_seq</span> <span class="o">[]</span>
<span class="bp">|</span> <span class="n">single</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">f</span><span class="o">,</span> <span class="n">exact_seq</span> <span class="o">[</span><span class="n">f</span><span class="o">]</span>
<span class="bp">|</span> <span class="n">cons</span>   <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">A</span> <span class="n">B</span> <span class="n">C</span> <span class="o">:</span> <span class="bp">𝒞</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">⟶</span> <span class="n">B</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">B</span> <span class="bp">⟶</span> <span class="n">C</span><span class="o">)</span> <span class="o">(</span><span class="n">hfg</span> <span class="o">:</span> <span class="n">exact</span> <span class="n">f</span> <span class="n">g</span><span class="o">)</span> <span class="o">(</span><span class="n">L</span><span class="o">)</span> <span class="o">(</span><span class="n">hgL</span> <span class="o">:</span> <span class="n">exact_seq</span> <span class="o">(</span><span class="n">g</span> <span class="o">::</span> <span class="n">L</span><span class="o">)),</span>
              <span class="n">exact_seq</span> <span class="o">(</span><span class="n">f</span> <span class="o">::</span> <span class="n">g</span> <span class="o">::</span> <span class="n">L</span><span class="o">)</span>

<span class="kd">variable</span> <span class="o">{</span><span class="bp">𝒞</span><span class="o">}</span>

<span class="kd">lemma</span> <span class="n">exact_iff_exact_seq</span> <span class="o">{</span><span class="n">A</span> <span class="n">B</span> <span class="n">C</span> <span class="o">:</span> <span class="bp">𝒞</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">⟶</span> <span class="n">B</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">B</span> <span class="bp">⟶</span> <span class="n">C</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">exact</span> <span class="n">f</span> <span class="n">g</span> <span class="bp">↔</span> <span class="n">exact_seq</span> <span class="bp">𝒞</span> <span class="o">[</span><span class="n">f</span><span class="o">,</span> <span class="n">g</span><span class="o">]</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">intro</span> <span class="n">h</span><span class="o">,</span> <span class="n">exact</span> <span class="n">exact_seq.cons</span> <span class="n">f</span> <span class="n">g</span> <span class="n">h</span> <span class="n">_</span> <span class="o">(</span><span class="n">exact_seq.single</span> <span class="n">_</span><span class="o">),</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">rintro</span> <span class="o">(</span><span class="n">_</span> <span class="bp">|</span> <span class="n">_</span> <span class="bp">|</span> <span class="o">⟨</span><span class="n">A</span><span class="o">,</span> <span class="n">B</span><span class="o">,</span> <span class="n">C</span><span class="o">,</span> <span class="n">f</span><span class="o">,</span> <span class="n">g</span><span class="o">,</span> <span class="n">hfg</span><span class="o">,</span> <span class="n">_</span><span class="o">,</span> <span class="n">_</span> <span class="bp">|</span> <span class="n">_</span> <span class="bp">|</span> <span class="n">_</span><span class="o">⟩),</span> <span class="n">exact</span> <span class="n">hfg</span><span class="o">,</span> <span class="o">}</span>
<span class="kd">end</span>
</code></pre></div>



<a name="255356412"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/finite%20exact%20sequences/near/255356412" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/finite.20exact.20sequences.html#255356412">(Sep 29 2021 at 07:47)</a>:</h4>
<p>I now have</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.homology.exact</span>

<span class="kd">noncomputable theory</span>

<span class="kn">open</span> <span class="n">category_theory</span>
<span class="kn">open</span> <span class="n">category_theory.limits</span>

<span class="kd">universes</span> <span class="n">v</span> <span class="n">u</span>

<span class="kn">namespace</span> <span class="n">list</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">L</span> <span class="o">:</span> <span class="n">list</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span>

<span class="sd">/-- Returns the sublist of `L` starting at index `m` of length `n`</span>
<span class="sd">(or shorter, if `L` is too short). -/</span>
<span class="kd">def</span> <span class="n">extract</span> <span class="o">:=</span> <span class="o">(</span><span class="n">L.drop</span> <span class="n">m</span><span class="o">)</span><span class="bp">.</span><span class="n">take</span> <span class="n">n</span>

<span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">extract_nil</span> <span class="o">:</span> <span class="o">[]</span><span class="bp">.</span><span class="n">extract</span> <span class="n">m</span> <span class="n">n</span> <span class="bp">=</span> <span class="o">([]</span> <span class="o">:</span> <span class="n">list</span> <span class="n">α</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="o">{</span> <span class="n">cases</span> <span class="n">n</span><span class="o">,</span> <span class="n">refl</span><span class="o">,</span> <span class="n">cases</span> <span class="n">m</span><span class="o">,</span> <span class="n">refl</span><span class="o">,</span> <span class="n">refl</span> <span class="o">}</span>

<span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">extract_zero_right</span> <span class="o">:</span> <span class="n">L.extract</span> <span class="n">m</span> <span class="mi">0</span> <span class="bp">=</span> <span class="o">[]</span> <span class="o">:=</span> <span class="n">rfl</span>

<span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">extract_cons_succ_left</span> <span class="o">:</span> <span class="o">(</span><span class="n">a</span> <span class="o">::</span> <span class="n">L</span><span class="o">)</span><span class="bp">.</span><span class="n">extract</span> <span class="n">m.succ</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">L.extract</span> <span class="n">m</span> <span class="n">n</span> <span class="o">:=</span> <span class="n">rfl</span>

<span class="kd">end</span> <span class="n">list</span>

<span class="kd">example</span> <span class="o">:</span> <span class="o">[</span><span class="mi">0</span><span class="o">,</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">4</span><span class="o">,</span><span class="mi">5</span><span class="o">,</span><span class="mi">6</span><span class="o">,</span><span class="mi">7</span><span class="o">,</span><span class="mi">8</span><span class="o">,</span><span class="mi">9</span><span class="o">]</span><span class="bp">.</span><span class="n">extract</span> <span class="mi">4</span> <span class="mi">3</span> <span class="bp">=</span> <span class="o">[</span><span class="mi">4</span><span class="o">,</span><span class="mi">5</span><span class="o">,</span><span class="mi">6</span><span class="o">]</span> <span class="o">:=</span> <span class="n">rfl</span>

<span class="kn">namespace</span> <span class="n">category_theory</span>
<span class="kd">variables</span> <span class="o">(</span><span class="bp">𝒞</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">[</span><span class="n">category.</span><span class="o">{</span><span class="n">v</span><span class="o">}</span> <span class="bp">𝒞</span><span class="o">]</span>
<span class="kd">variables</span> <span class="o">[</span><span class="n">has_zero_morphisms</span> <span class="bp">𝒞</span><span class="o">]</span> <span class="o">[</span><span class="n">has_images</span> <span class="bp">𝒞</span><span class="o">]</span> <span class="o">[</span><span class="n">has_kernels</span> <span class="bp">𝒞</span><span class="o">]</span>

<span class="sd">/-- A sequence `[f, g, ...]` of morphisms is exact if the pair `(f,g)` is exact,</span>
<span class="sd">and the sequence `[g, ...]` is exact.</span>

<span class="sd">Recall that the pair `(f,g)` is exact if `f ≫ g = 0`</span>
<span class="sd">and the natural map from the image of `f` to the kernel of `g` is an epimorphism</span>
<span class="sd">(equivalently, in abelian categories: isomorphism). -/</span>
<span class="kd">inductive</span> <span class="n">exact_seq</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">arrow</span> <span class="bp">𝒞</span><span class="o">)</span> <span class="bp">→</span> <span class="kt">Prop</span>
<span class="bp">|</span> <span class="n">nil</span>    <span class="o">:</span> <span class="n">exact_seq</span> <span class="o">[]</span>
<span class="bp">|</span> <span class="n">single</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">f</span><span class="o">,</span> <span class="n">exact_seq</span> <span class="o">[</span><span class="n">f</span><span class="o">]</span>
<span class="bp">|</span> <span class="n">cons</span>   <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">A</span> <span class="n">B</span> <span class="n">C</span> <span class="o">:</span> <span class="bp">𝒞</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">⟶</span> <span class="n">B</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">B</span> <span class="bp">⟶</span> <span class="n">C</span><span class="o">)</span> <span class="o">(</span><span class="n">hfg</span> <span class="o">:</span> <span class="n">exact</span> <span class="n">f</span> <span class="n">g</span><span class="o">)</span> <span class="o">(</span><span class="n">L</span><span class="o">)</span> <span class="o">(</span><span class="n">hgL</span> <span class="o">:</span> <span class="n">exact_seq</span> <span class="o">(</span><span class="n">g</span> <span class="o">::</span> <span class="n">L</span><span class="o">)),</span>
              <span class="n">exact_seq</span> <span class="o">(</span><span class="n">f</span> <span class="o">::</span> <span class="n">g</span> <span class="o">::</span> <span class="n">L</span><span class="o">)</span>

<span class="kd">variable</span> <span class="o">{</span><span class="bp">𝒞</span><span class="o">}</span>

<span class="kd">lemma</span> <span class="n">exact_iff_exact_seq</span> <span class="o">{</span><span class="n">A</span> <span class="n">B</span> <span class="n">C</span> <span class="o">:</span> <span class="bp">𝒞</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">⟶</span> <span class="n">B</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">B</span> <span class="bp">⟶</span> <span class="n">C</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">exact</span> <span class="n">f</span> <span class="n">g</span> <span class="bp">↔</span> <span class="n">exact_seq</span> <span class="bp">𝒞</span> <span class="o">[</span><span class="n">f</span><span class="o">,</span> <span class="n">g</span><span class="o">]</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">intro</span> <span class="n">h</span><span class="o">,</span> <span class="n">exact</span> <span class="n">exact_seq.cons</span> <span class="n">f</span> <span class="n">g</span> <span class="n">h</span> <span class="n">_</span> <span class="o">(</span><span class="n">exact_seq.single</span> <span class="n">_</span><span class="o">),</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">rintro</span> <span class="o">(</span><span class="n">_</span> <span class="bp">|</span> <span class="n">_</span> <span class="bp">|</span> <span class="o">⟨</span><span class="n">A</span><span class="o">,</span> <span class="n">B</span><span class="o">,</span> <span class="n">C</span><span class="o">,</span> <span class="n">f</span><span class="o">,</span> <span class="n">g</span><span class="o">,</span> <span class="n">hfg</span><span class="o">,</span> <span class="n">_</span><span class="o">,</span> <span class="n">_</span> <span class="bp">|</span> <span class="n">_</span> <span class="bp">|</span> <span class="n">_</span><span class="o">⟩),</span> <span class="n">exact</span> <span class="n">hfg</span><span class="o">,</span> <span class="o">}</span>
<span class="kd">end</span>

<span class="kn">namespace</span> <span class="n">exact_seq</span>

<span class="kd">lemma</span> <span class="n">extract</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">L</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">arrow</span> <span class="bp">𝒞</span><span class="o">)}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">exact_seq</span> <span class="bp">𝒞</span> <span class="n">L</span><span class="o">)</span> <span class="o">(</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span>
  <span class="n">exact_seq</span> <span class="bp">𝒞</span> <span class="o">(</span><span class="n">L.extract</span> <span class="n">m</span> <span class="n">n</span><span class="o">)</span>
<span class="bp">|</span> <span class="n">L</span> <span class="o">(</span><span class="n">nil</span><span class="o">)</span>               <span class="n">m</span>     <span class="n">n</span>     <span class="o">:=</span> <span class="kd">by</span> <span class="o">{</span> <span class="n">rw</span> <span class="n">list.extract_nil</span><span class="o">,</span> <span class="n">exact</span> <span class="n">nil</span> <span class="o">}</span>
<span class="bp">|</span> <span class="n">L</span> <span class="o">(</span><span class="n">single</span> <span class="n">f</span><span class="o">)</span>          <span class="n">m</span>     <span class="mi">0</span>     <span class="o">:=</span> <span class="n">nil</span>
<span class="bp">|</span> <span class="n">L</span> <span class="o">(</span><span class="n">single</span> <span class="n">f</span><span class="o">)</span>          <span class="mi">0</span>     <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="o">{</span> <span class="n">cases</span> <span class="n">n</span><span class="bp">;</span> <span class="n">exact</span> <span class="n">single</span> <span class="n">f</span> <span class="o">}</span>
<span class="bp">|</span> <span class="n">L</span> <span class="o">(</span><span class="n">single</span> <span class="n">f</span><span class="o">)</span>          <span class="o">(</span><span class="n">m</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="o">{</span> <span class="n">cases</span> <span class="n">m</span><span class="bp">;</span> <span class="n">exact</span> <span class="n">nil</span> <span class="o">}</span>
<span class="bp">|</span> <span class="n">_</span> <span class="o">(</span><span class="n">cons</span> <span class="n">f</span> <span class="n">g</span> <span class="n">hfg</span> <span class="n">L</span> <span class="n">hL</span><span class="o">)</span> <span class="o">(</span><span class="n">m</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="n">n</span>     <span class="o">:=</span> <span class="n">extract</span> <span class="n">hL</span> <span class="n">m</span> <span class="n">n</span>
<span class="bp">|</span> <span class="n">_</span> <span class="o">(</span><span class="n">cons</span> <span class="n">f</span> <span class="n">g</span> <span class="n">hfg</span> <span class="n">L</span> <span class="n">hL</span><span class="o">)</span> <span class="mi">0</span>     <span class="mi">0</span>     <span class="o">:=</span> <span class="n">nil</span>
<span class="bp">|</span> <span class="n">_</span> <span class="o">(</span><span class="n">cons</span> <span class="n">f</span> <span class="n">g</span> <span class="n">hfg</span> <span class="n">L</span> <span class="n">hL</span><span class="o">)</span> <span class="mi">0</span>     <span class="mi">1</span>     <span class="o">:=</span> <span class="n">single</span> <span class="n">f</span>
<span class="bp">|</span> <span class="n">_</span> <span class="o">(</span><span class="n">cons</span> <span class="n">f</span> <span class="n">g</span> <span class="n">hfg</span> <span class="n">L</span> <span class="n">hL</span><span class="o">)</span> <span class="mi">0</span>     <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">2</span><span class="o">)</span> <span class="o">:=</span> <span class="n">cons</span> <span class="n">f</span> <span class="n">g</span> <span class="n">hfg</span> <span class="o">(</span><span class="n">L.take</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="n">extract</span> <span class="n">hL</span> <span class="mi">0</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span>

<span class="kd">end</span> <span class="n">exact_seq</span>

<span class="kd">end</span> <span class="n">category_theory</span>
</code></pre></div>



<a name="255356523"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/finite%20exact%20sequences/near/255356523" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/finite.20exact.20sequences.html#255356523">(Sep 29 2021 at 07:48)</a>:</h4>
<p>I hope that we can use this to make talking about pretty explicit finite exact sequences a bit smoother.</p>



<a name="255377932"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/finite%20exact%20sequences/near/255377932" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/finite.20exact.20sequences.html#255377932">(Sep 29 2021 at 10:53)</a>:</h4>
<p>Beautiful!</p>



<a name="255459678"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/finite%20exact%20sequences/near/255459678" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/finite.20exact.20sequences.html#255459678">(Sep 29 2021 at 19:29)</a>:</h4>
<p>Uh oh... I now need <code>exact_seq.unop</code> which takes an exact sequence in <code>Cᵒᵖ</code> and returns the corresponding exact sequence in <code>C</code>.</p>



<a name="255459872"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/finite%20exact%20sequences/near/255459872" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/finite.20exact.20sequences.html#255459872">(Sep 29 2021 at 19:30)</a>:</h4>
<p>I don't think we have anything like <code>exact f g ↔ exact g.op f.op</code> so far <span aria-label="sad" class="emoji emoji-2639" role="img" title="sad">:sad:</span></p>



<a name="255461457"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/finite%20exact%20sequences/near/255461457" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/finite.20exact.20sequences.html#255461457">(Sep 29 2021 at 19:41)</a>:</h4>
<p>Uggh, we don't even know that the opposite of an abelian category is abelian <span aria-label="crying cat" class="emoji emoji-1f63f" role="img" title="crying cat">:crying_cat:</span></p>



<a name="255461928"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/finite%20exact%20sequences/near/255461928" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/finite.20exact.20sequences.html#255461928">(Sep 29 2021 at 19:44)</a>:</h4>
<p>Oh gosh!</p>



<a name="255462277"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/finite%20exact%20sequences/near/255462277" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/finite.20exact.20sequences.html#255462277">(Sep 29 2021 at 19:46)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/category_theory/abelian/opposite.html#category_theory.opposite.abelian">https://leanprover-community.github.io/mathlib_docs/category_theory/abelian/opposite.html#category_theory.opposite.abelian</a></p>



<a name="255462439"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/finite%20exact%20sequences/near/255462439" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/finite.20exact.20sequences.html#255462439">(Sep 29 2021 at 19:48)</a>:</h4>
<p>Isn't it what you want?</p>



<a name="255462490"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/finite%20exact%20sequences/near/255462490" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/finite.20exact.20sequences.html#255462490">(Sep 29 2021 at 19:48)</a>:</h4>
<p>Nothing an extra import can't fix <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span></p>



<a name="255462566"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/finite%20exact%20sequences/near/255462566" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/finite.20exact.20sequences.html#255462566">(Sep 29 2021 at 19:48)</a>:</h4>
<p>Next question: can we go from <code>arrow Cᵒᵖ</code> to <code>arrow C</code> already?</p>



<a name="255462902"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/finite%20exact%20sequences/near/255462902" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/finite.20exact.20sequences.html#255462902">(Sep 29 2021 at 19:50)</a>:</h4>
<p>Do you mean the arrow category or simply <a href="https://leanprover-community.github.io/mathlib_docs/find/quiver.hom.op">docs#quiver.hom.op</a>?</p>



<a name="255463136"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/finite%20exact%20sequences/near/255463136" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/finite.20exact.20sequences.html#255463136">(Sep 29 2021 at 19:52)</a>:</h4>
<p>And actually, with <a href="https://leanprover-community.github.io/mathlib_docs/find/category_theory.kernel_op_op">docs#category_theory.kernel_op_op</a> and <a href="https://leanprover-community.github.io/mathlib_docs/find/category_theory.cokernel_op_op">docs#category_theory.cokernel_op_op</a> is it really hard to show that the opposite of a SES is a SES?</p>



<a name="255464008"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/finite%20exact%20sequences/near/255464008" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/finite.20exact.20sequences.html#255464008">(Sep 29 2021 at 19:57)</a>:</h4>
<p>I meant the actual <code>arrow</code> category.</p>



<a name="255464297"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/finite%20exact%20sequences/near/255464297" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/finite.20exact.20sequences.html#255464297">(Sep 29 2021 at 19:59)</a>:</h4>
<p>We'll need something like this:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">of_op</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">L</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">arrow</span> <span class="bp">𝒜</span><span class="o">)},</span> <span class="n">exact_seq</span> <span class="bp">𝒜ᵒᵖ</span> <span class="o">(</span><span class="n">L.reverse.map</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">f</span><span class="o">,</span> <span class="gr">sorry</span><span class="o">))</span> <span class="bp">→</span>
  <span class="n">exact_seq</span> <span class="bp">𝒜</span> <span class="n">L</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div>



<a name="255464542"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/finite%20exact%20sequences/near/255464542" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/finite.20exact.20sequences.html#255464542">(Sep 29 2021 at 20:00)</a>:</h4>
<p>I see... I am now finishing to work on the surjectivity of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span></span></span></span> and coming up with the SES we discussed the other day. But I might try to have a look when I am fed up with real numbers...</p>



<a name="255464625"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/finite%20exact%20sequences/near/255464625" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/finite.20exact.20sequences.html#255464625">(Sep 29 2021 at 20:01)</a>:</h4>
<p>Although I guess that someone else (you?) will be done before I even start ... <span aria-label="racecar" class="emoji emoji-1f3ce" role="img" title="racecar">:racecar:</span></p>



<a name="255464639"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/finite%20exact%20sequences/near/255464639" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/finite.20exact.20sequences.html#255464639">(Sep 29 2021 at 20:01)</a>:</h4>
<p>I just pushed that <code>sorry</code>. It's in <code>for_mathlib/exact_seq</code></p>



<a name="255464665"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/finite%20exact%20sequences/near/255464665" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/finite.20exact.20sequences.html#255464665">(Sep 29 2021 at 20:01)</a>:</h4>
<p>No, I'm done for the day</p>



<a name="255464710"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/finite%20exact%20sequences/near/255464710" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/finite.20exact.20sequences.html#255464710">(Sep 29 2021 at 20:01)</a>:</h4>
<p>You mean you are finally having breakfast, now? <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span></p>



<a name="255467189"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/finite%20exact%20sequences/near/255467189" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/finite.20exact.20sequences.html#255467189">(Sep 29 2021 at 20:18)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/267928-condensed-mathematics/topic/finite.20exact.20sequences/near/255462566">said</a>:</p>
<blockquote>
<p>Next question: can we go from <code>arrow Cᵒᵖ</code> to <code>arrow C</code> already?</p>
</blockquote>
<p>I think we might have a general thing about comma categories?</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>