---
layout: archive
title: Zulip Chat Archive
permalink: /stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/index.html">condensed mathematics</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html">how much mathlib in LTE?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="298067002"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298067002" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298067002">(Sep 09 2022 at 23:14)</a>:</h4>
<p>What percentage of mathlib ends up imported in a proof of the main theorem of LTE? Is there an easy way to answer this? One measure of "how big is LTE" is "about 90K lines of code" and another measure is "about 90K lines of code and a one million line maths library on top". Knowing how much mathlib is imported will give a third answer which in some sense is more representative.</p>



<a name="298073214"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298073214" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298073214">(Sep 10 2022 at 00:41)</a>:</h4>
<p>That's a good question. I think with the Radon stuff in the examples file we end up importing a big chunk of mathlib's functional analysis,, although it doesn't get imported for the actual challenge</p>



<a name="298073332"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298073332" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298073332">(Sep 10 2022 at 00:43)</a>:</h4>
<p>My guess would be 75% of mathlib</p>



<a name="298145714"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298145714" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298145714">(Sep 10 2022 at 14:47)</a>:</h4>
<p>I don't know in terms of lines, but using leancrawler we can count the number of theorems/definitions in mathlib</p>



<a name="298148674"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298148674" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298148674">(Sep 10 2022 at 15:11)</a>:</h4>
<p>I assume we could proxy the number of lines by the number of files</p>



<a name="298151989"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298151989" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298151989">(Sep 10 2022 at 15:45)</a>:</h4>
<p>I don't have time during the weekend, but I can easily enough provide a list of things used in the LTE</p>



<a name="298343221"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298343221" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298343221">(Sep 12 2022 at 09:25)</a>:</h4>
<p><span class="user-mention" data-user-id="130384">@Riccardo Brasca</span> If you want to create some precise stats, that would be nice.</p>



<a name="298362836"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298362836" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298362836">(Sep 12 2022 at 11:33)</a>:</h4>
<p>I am running leancrawler, then gephi can probably produce all the stats we want</p>



<a name="298381313"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298381313" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298381313">(Sep 12 2022 at 13:28)</a>:</h4>
<p>The full graph leading to <code>liquid_tensor_experiment</code> has 20172 nodes and 466568 edges. There are 15201 declarations from mathlib and 1010 from core, giving a total of 16211 declarations already in Lean, so 3961 are only in LTE. <a href="https://webusers.imj-prg.fr/~riccardo.brasca/files/LTE.csv">Here</a> is a csv file with the full list, including other data.</p>



<a name="298381896"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298381896" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298381896">(Sep 12 2022 at 13:32)</a>:</h4>
<p>Unsurprisingly, the most important node is <a href="https://leanprover-community.github.io/mathlib_docs/find/eq">docs#eq</a></p>



<a name="298404628"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298404628" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298404628">(Sep 12 2022 at 15:29)</a>:</h4>
<p>Here is something that really surprises me, and it makes me thinking I've done something wrong. </p>
<p>Doing the same as above without selecting only the connected component of <code>liquid_tensor_experiment</code> gives 99729 nodes and 23991227 edges. 4366 are from core and 86996 are from mathlib, so 8367 are only in the LTE (note that I did <code>leancrawler challenge</code>, so files that are completely useless to that should be ignored). This means that we wrote 4406 declarations that are never used to prove <code>liquid_tensor_experiment</code>?! <span aria-label="dizzy" class="emoji emoji-1f635" role="img" title="dizzy">:dizzy:</span></p>



<a name="298405251"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298405251" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298405251">(Sep 12 2022 at 15:32)</a>:</h4>
<p>If you counted autogenerated declarations, that wouldn't surprise me. Many of them are never used, LTE or not.</p>



<a name="298405403"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298405403" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298405403">(Sep 12 2022 at 15:32)</a>:</h4>
<p><a href="https://webusers.imj-prg.fr/~riccardo.brasca/files/data.yaml">data.yaml</a> and <a href="https://webusers.imj-prg.fr/~riccardo.brasca/files/LTE_data">LTE_data</a> if someone wants to play with them (the first one is the output of <code>lean --run crawl.lean</code> after <code>leancrawler challenge</code> the second one is by <code>lib.dump</code>).</p>



<a name="298405677"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298405677" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298405677">(Sep 12 2022 at 15:34)</a>:</h4>
<p>Ah, autogenerated declarations, of course, this makes sense.</p>



<a name="298406989"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298406989" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298406989">(Sep 12 2022 at 15:39)</a>:</h4>
<p>I don't see any way of filtering out these declarations unfortunately :(</p>



<a name="298407376"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298407376" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298407376">(Sep 12 2022 at 15:40)</a>:</h4>
<p>Right, I guess <code>@[simps]</code> might generate for example 4 lemmas of which only 2 are used.</p>



<a name="298408723"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298408723" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298408723">(Sep 12 2022 at 15:46)</a>:</h4>
<p>I can produce the list of the useless declarations. Then a stupid workaround to find those we really wrote would be to grep the names in the LTE folder. Do you think it is an interesting information to have?</p>



<a name="298410220"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298410220" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298410220">(Sep 12 2022 at 15:54)</a>:</h4>
<p>Personally I would be interested to know if there is a huge bug in <code>leancrawler</code> that explains those numbers.</p>



<a name="298410563"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298410563" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298410563">(Sep 12 2022 at 15:55)</a>:</h4>
<p>It's very possible I did something wrong, this is why I posted the data. In any case I am trying to find an unused lemma and check if I can really remove it.</p>



<a name="298419686"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298419686" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298419686">(Sep 12 2022 at 16:43)</a>:</h4>
<p>I'm quite certain you can find ~ 30 lemmas with a <code>-- move me</code> comment that haven't been used.</p>



<a name="298419762"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298419762" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298419762">(Sep 12 2022 at 16:43)</a>:</h4>
<p>I kept those, because they are generally good mathlib lemmas. Even if they weren't used in LTE after a refactor.</p>



<a name="298421128"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298421128" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298421128">(Sep 12 2022 at 16:50)</a>:</h4>
<p>Here is a sample of apparently useless declarations</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">Ab.is_limit_ext</span>
<span class="n">Ab.limit_cone'_cone</span>
<span class="n">Ab.limit_cone'_is_limit</span>
<span class="n">Ab.ulift_map_apply</span>
<span class="n">Ab.ulift_obj</span>
<span class="n">AddCommGroup.AB5</span>
<span class="n">AddCommGroup.Ab.category_theory.limits.has_colimits_of_size</span>
<span class="n">AddCommGroup.Ab.category_theory.limits.has_limits_of_size</span>
<span class="n">AddCommGroup.add_equiv_of_iso</span>
<span class="n">AddCommGroup.add_subgroup.equiv_top</span>
<span class="n">AddCommGroup.add_subgroup.equiv_top_apply_coe</span>
<span class="n">AddCommGroup.add_subgroup.equiv_top_symm_apply</span>
<span class="n">AddCommGroup.cocone</span>
<span class="n">AddCommGroup.coe_of'</span>
<span class="n">AddCommGroup.colimit_comparison</span>
<span class="n">AddCommGroup.comp_helper</span>
<span class="n">AddCommGroup.coproduct_cocone_of_basis</span>
<span class="n">AddCommGroup.coproduct_cocone_of_basis_is_colimit</span>
<span class="n">AddCommGroup.diagram</span>
</code></pre></div>
<p><a href="https://gist.github.com/riccardobrasca/df3a90f2326b2020633ad0fd6c1c7ae8">Here</a> the full list.</p>



<a name="298421582"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298421582" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298421582">(Sep 12 2022 at 16:52)</a>:</h4>
<p>Oh, some of those were things that made it to mathlib but never deleted from LTE.</p>



<a name="298421663"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298421663" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298421663">(Sep 12 2022 at 16:52)</a>:</h4>
<p>E.g. <code>Ab.is_limit_ext</code> is a special case of <a href="https://leanprover-community.github.io/mathlib_docs/find/category_theory.limits.concrete.is_limit_ext">docs#category_theory.limits.concrete.is_limit_ext</a></p>



<a name="298422357"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298422357" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298422357">(Sep 12 2022 at 16:56)</a>:</h4>
<p>It's not quite correct to say that <code>AddCommGroup.diagram</code> isn't used, because I'm quite sure <code>AddCommGorup.is_colimit_cocone</code> is used, and this is a statement about a cocone over <code>AddcommGroup.diagram</code>,.</p>



<a name="298422983"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298422983" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298422983">(Sep 12 2022 at 16:59)</a>:</h4>
<p>let me see if it is possible to compile the project without <code>AddCommGroup.diagram</code></p>



<a name="298423041"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298423041" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298423041">(Sep 12 2022 at 16:59)</a>:</h4>
<p>But it claims that <code>AddCommGroup.is_colimit_cocone</code> is also not used.</p>



<a name="298423184"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298423184" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298423184">(Sep 12 2022 at 17:00)</a>:</h4>
<p>I think they're used in one of the proofs in the same file</p>



<a name="298423285"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298423285" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298423285">(Sep 12 2022 at 17:01)</a>:</h4>
<p>It is only used in <code>AddCommGroup.tensor_obj_map_preserves_mono</code>, which is also in the "unused" list.</p>



<a name="298423299"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298423299" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298423299">(Sep 12 2022 at 17:01)</a>:</h4>
<p>I am not claiming these are <em>never</em> used.</p>



<a name="298423364"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298423364" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298423364">(Sep 12 2022 at 17:01)</a>:</h4>
<p><a href="https://github.com/leanprover-community/lean-liquid/blob/17f13b74d4bc045e82465f86f5705a3f6e1994e3/src/for_mathlib/AddCommGroup.lean#L329">https://github.com/leanprover-community/lean-liquid/blob/17f13b74d4bc045e82465f86f5705a3f6e1994e3/src/for_mathlib/AddCommGroup.lean#L329</a></p>



<a name="298423366"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298423366" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298423366">(Sep 12 2022 at 17:01)</a>:</h4>
<p>Exactly, I am saying these are not in the connected component of <code>liquid_tensor_experiment</code></p>



<a name="298423504"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298423504" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298423504">(Sep 12 2022 at 17:02)</a>:</h4>
<p>But that lemma is definitely used in the proof of the challenge</p>



<a name="298423515"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298423515" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298423515">(Sep 12 2022 at 17:02)</a>:</h4>
<p>I'm confused.</p>



<a name="298423641"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298423641" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298423641">(Sep 12 2022 at 17:03)</a>:</h4>
<p>It's maybe my fault, so you claim that <code>tensor_obj_map_preserves_mono</code> is used to prove <code>liquid_tensor_experiment</code>?</p>



<a name="298423682"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298423682" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298423682">(Sep 12 2022 at 17:03)</a>:</h4>
<p>Yes. At least the math version of that statement.</p>



<a name="298423736"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298423736" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298423736">(Sep 12 2022 at 17:03)</a>:</h4>
<p>And I don't know of other lean-similar statements that might have been used instead.</p>



<a name="298423773"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298423773" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298423773">(Sep 12 2022 at 17:03)</a>:</h4>
<p>OK, let's see.</p>



<a name="298423976"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298423976" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298423976">(Sep 12 2022 at 17:04)</a>:</h4>
<p>I'm claiming that <code>is_iso_of_preserves_of_is_tensor_unit</code> is used in <code>liquid_tensor_experiment</code>, which uses <code>is_iso_of_preserves</code> which uses <code>AddCommGroup.is_colimit_cocone</code> which needs <code>AddCommGroup.diagram</code>, etc.</p>



<a name="298425095"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298425095" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298425095">(Sep 12 2022 at 17:10)</a>:</h4>
<p>Something is off. There are a lot of names on the list that I'm pretty sure are used.</p>



<a name="298425180"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298425180" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298425180">(Sep 12 2022 at 17:11)</a>:</h4>
<p>A whole bunch of <code>thm95</code> stuff, starting at: <a href="https://gist.github.com/riccardobrasca/df3a90f2326b2020633ad0fd6c1c7ae8#file-useless-txt-L4165">https://gist.github.com/riccardobrasca/df3a90f2326b2020633ad0fd6c1c7ae8#file-useless-txt-L4165</a></p>



<a name="298425225"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298425225" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298425225">(Sep 12 2022 at 17:11)</a>:</h4>
<p>Certainly <code>thm95.col_exact</code> is used.</p>



<a name="298425773"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298425773" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298425773">(Sep 12 2022 at 17:14)</a>:</h4>
<p>Does this count check whether a declaration is used in the proof of a prop?</p>



<a name="298425860"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298425860" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298425860">(Sep 12 2022 at 17:15)</a>:</h4>
<p>I guess this is the whole point of leancrawler</p>



<a name="298425882"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298425882" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298425882">(Sep 12 2022 at 17:15)</a>:</h4>
<p>But <code>thm95.col_exact</code> is very close to the end, let me experiment with that</p>



<a name="298425919"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298425919" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Yang <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298425919">(Sep 12 2022 at 17:15)</a>:</h4>
<p>Can it see instance arguments?</p>



<a name="298426010"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298426010" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298426010">(Sep 12 2022 at 17:16)</a>:</h4>
<p>Very close to the end of the proof of <code>thm95</code>. But the whole 2nd part of the project is still built on top of that.</p>



<a name="298426060"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298426060" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298426060">(Sep 12 2022 at 17:16)</a>:</h4>
<p>I guess it is still "relatively" close to the end though.</p>



<a name="298426094"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298426094" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298426094">(Sep 12 2022 at 17:16)</a>:</h4>
<p>But I would expect that you still need to recompile 10 files or so.</p>



<a name="298426584"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298426584" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Yang <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298426584">(Sep 12 2022 at 17:19)</a>:</h4>
<p>Note that <code>homology_bd_eval</code> is definitely used, and not on the list, but its construction is <code>(as_iso (tensor_to_homology BD M i)).symm</code>, and the instance <code>is_iso (tensor_to_homology BD M i)</code> is on the list.</p>



<a name="298433007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298433007" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298433007">(Sep 12 2022 at 17:55)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> is it possible that leancrawler makes a mistake if a lemma is used in a definition? In particular, I see that <a href="https://github.com/leanprover-community/lean-liquid/blob/a1f009de0f88731492e998e4fd8f27de3f6952af/src/thm95/default.lean#L76">NSC</a> appears in the connected component leading to <code>liquid_tensor_experiment</code>, but <code>thm95.col_exact</code>, that it is used to give the definition, does not.</p>



<a name="298443646"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298443646" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298443646">(Sep 12 2022 at 18:51)</a>:</h4>
<p>Indeed, if I do <code>lib['NSC']</code>, I see <code>col_exact := _</code>, instead of</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">col_exact</span> <span class="o">:=</span>
  <span class="kd">begin</span>
 <span class="bp">...</span>
    <span class="n">refine</span> <span class="n">thm95.col_exact</span> <span class="n">BD.data</span> <span class="n">κ</span> <span class="n">r</span> <span class="n">r'</span> <span class="n">V</span> <span class="bp">Λ</span> <span class="n">M</span> <span class="n">N</span> <span class="n">j</span> <span class="o">(</span><span class="n">lem98.d</span> <span class="bp">Λ</span> <span class="n">N</span><span class="o">)</span> <span class="o">(</span><span class="n">k₁_sqrt</span> <span class="n">κ'</span> <span class="n">m</span><span class="o">)</span> <span class="n">m</span> <span class="n">_</span> <span class="n">_</span>
      <span class="o">(</span><span class="n">k₁</span> <span class="n">κ'</span> <span class="n">m</span><span class="o">)</span> <span class="o">(</span><span class="n">K₁</span> <span class="n">r</span> <span class="n">r'</span> <span class="n">BD</span> <span class="n">κ'</span> <span class="n">m</span><span class="o">)</span> <span class="o">(</span><span class="n">le_of_eq</span> <span class="n">_</span><span class="o">)</span> <span class="n">_</span> <span class="n">_</span> <span class="o">(</span><span class="n">c₀</span> <span class="n">r</span> <span class="n">r'</span> <span class="n">BD</span> <span class="n">κ</span> <span class="n">κ'</span> <span class="n">m</span> <span class="bp">Λ</span><span class="o">)</span> <span class="o">⟨</span><span class="n">le_rfl</span><span class="o">⟩</span> <span class="n">infer_instance</span> <span class="o">⟨</span><span class="n">le_rfl</span><span class="o">⟩,</span>
<span class="bp">...</span>
  <span class="kd">end</span>
</code></pre></div>
<p>so the need for <code>thm95.col_exact</code> seems to be forgotten.</p>



<a name="298549002"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298549002" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298549002">(Sep 13 2022 at 09:57)</a>:</h4>
<p>Could it have to do something with this flag: <a href="https://github.com/leanprover-community/leancrawler/blob/master/leancrawler/crawler.py#L275">https://github.com/leanprover-community/leancrawler/blob/master/leancrawler/crawler.py#L275</a> ?</p>



<a name="298549925"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298549925" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298549925">(Sep 13 2022 at 10:04)</a>:</h4>
<p>I am having lunch, then I will try to produce a MWE</p>



<a name="298556355"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298556355" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298556355">(Sep 13 2022 at 10:46)</a>:</h4>
<p>I've tried with something as simple as</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">init.data.nat.lemmas</span>

<span class="kn">namespace</span> <span class="n">crawler</span>

<span class="kd">structure</span> <span class="n">add</span> <span class="o">(</span><span class="n">n</span> <span class="n">m</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span> <span class="n">add</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">m</span> <span class="bp">=</span> <span class="n">m</span> <span class="bp">+</span> <span class="n">n</span><span class="o">)</span>

<span class="kd">def</span> <span class="n">test</span> <span class="o">(</span><span class="n">n</span> <span class="n">m</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">crawler.add</span> <span class="n">n</span> <span class="n">m</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">add</span> <span class="o">:=</span>
  <span class="kd">begin</span>
    <span class="n">exact</span> <span class="n">nat.add_comm</span> <span class="n">n</span> <span class="n">m</span>
  <span class="kd">end</span> <span class="o">}</span>

<span class="kd">end</span> <span class="n">crawler</span>
</code></pre></div>
<p>but then <code>lib['crawler.test']</code> shows</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">LeanDecl</span><span class="o">(</span><span class="n">name</span><span class="bp">='</span><span class="n">crawler.test'</span><span class="o">,</span> <span class="n">filename</span><span class="bp">='/</span><span class="n">home</span><span class="bp">/</span><span class="n">brasca</span><span class="bp">/</span><span class="n">lean</span><span class="bp">/</span><span class="n">test_crawl</span><span class="bp">/</span><span class="n">src</span><span class="bp">/</span><span class="n">test_crawl.lean'</span><span class="o">,</span>
<span class="n">line_nb</span><span class="bp">=</span><span class="mi">7</span><span class="o">,</span> <span class="n">kind</span><span class="bp">='</span><span class="kd">definition</span><span class="bp">'</span><span class="o">,</span> <span class="n">is_inductive</span><span class="bp">=</span><span class="n">False</span><span class="o">,</span> <span class="n">is_structure</span><span class="bp">=</span><span class="n">False</span><span class="o">,</span> <span class="n">is_structure_field</span><span class="bp">=</span><span class="n">False</span><span class="o">,</span>
<span class="n">is_class</span><span class="bp">=</span><span class="n">False</span><span class="o">,</span> <span class="n">is_instance</span><span class="bp">=</span><span class="n">False</span><span class="o">,</span> <span class="n">is_recursor</span><span class="bp">=</span><span class="n">False</span><span class="o">,</span> <span class="n">is_constructor</span><span class="bp">=</span><span class="n">False</span><span class="o">,</span> <span class="kt">Type</span><span class="bp">='Π</span> <span class="o">(</span><span class="n">n</span> <span class="n">m</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span>
<span class="n">crawler.add</span> <span class="n">n</span> <span class="n">m'</span><span class="o">,</span> <span class="n">type_uses_proofs</span><span class="bp">=</span><span class="n">set</span><span class="o">(),</span> <span class="n">type_uses_others</span><span class="bp">=</span><span class="o">{</span><span class="bp">'</span><span class="n">crawler.add'</span><span class="o">,</span> <span class="bp">'</span><span class="n">nat'</span><span class="o">},</span> <span class="n">type_size</span><span class="bp">=</span><span class="mi">0</span><span class="o">,</span>
<span class="n">type_dedup_size</span><span class="bp">=</span><span class="mi">0</span><span class="o">,</span> <span class="n">type_pp_size</span><span class="bp">=</span><span class="mi">0</span><span class="o">,</span> <span class="n">Value</span><span class="bp">='λ</span> <span class="o">(</span><span class="n">n</span> <span class="n">m</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">),</span> <span class="o">{</span><span class="n">add</span> <span class="o">:=</span> <span class="n">_</span><span class="o">}</span><span class="bp">'</span><span class="o">,</span> <span class="n">value_uses_proofs</span><span class="bp">=</span><span class="o">{</span><span class="bp">'</span><span class="n">nat.add_comm'</span><span class="o">},</span>
<span class="n">value_uses_others</span><span class="bp">=</span><span class="o">{</span><span class="bp">'</span><span class="n">crawler.add.mk'</span><span class="o">,</span> <span class="bp">'</span><span class="n">nat'</span><span class="o">},</span> <span class="n">value_size</span><span class="bp">=</span><span class="mi">0</span><span class="o">,</span> <span class="n">value_dedup_size</span><span class="bp">=</span><span class="mi">0</span><span class="o">,</span> <span class="n">value_pp_size</span><span class="bp">=</span><span class="mi">0</span><span class="o">,</span>
<span class="n">target_class</span><span class="bp">=</span><span class="n">None</span><span class="o">,</span> <span class="n">parent</span><span class="bp">=</span><span class="n">None</span><span class="o">,</span> <span class="n">fields</span><span class="bp">=</span><span class="o">[])</span>
</code></pre></div>
<p>and <code>nat.add</code> appears as expected in the field <code> value_uses_proofs</code>. On the other way, the full output of <code>lib['NSC']</code> is</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">...</span>
<span class="n">value_uses_proofs</span><span class="bp">=</span><span class="o">{</span><span class="bp">'</span><span class="n">NSC._proof_15'</span><span class="o">,</span> <span class="bp">'</span><span class="n">NSC._proof_18'</span><span class="o">,</span> <span class="bp">'</span><span class="n">NSC._proof_10'</span><span class="o">,</span> <span class="bp">'</span><span class="n">NSC._proof_16'</span><span class="o">,</span> <span class="bp">'</span><span class="n">NSC._proof_12'</span><span class="o">,</span>
<span class="bp">'</span><span class="n">NSC._proof_11'</span><span class="o">,</span> <span class="bp">'</span><span class="n">NSC._proof_13'</span><span class="o">,</span> <span class="bp">'</span><span class="n">NSC._proof_14'</span><span class="o">,</span> <span class="bp">'</span><span class="n">NSC._proof_19'</span><span class="o">,</span> <span class="bp">'</span><span class="n">NSC._proof_20'</span><span class="o">,</span>
<span class="s2">"thm95.universal_constants.one_le_k'"</span><span class="o">,</span> <span class="bp">'</span><span class="n">NSC_row_exact'</span><span class="o">,</span> <span class="bp">'</span><span class="n">NSC._proof_17'</span><span class="o">}</span>
<span class="bp">...</span>
</code></pre></div>



<a name="298556491"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298556491" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298556491">(Sep 13 2022 at 10:46)</a>:</h4>
<p>(deleted)</p>



<a name="298558221"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298558221" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298558221">(Sep 13 2022 at 10:56)</a>:</h4>
<p>I think <code>col_exact</code> is hidden in one of these <code>NSC._proof_</code></p>



<a name="298560477"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298560477" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298560477">(Sep 13 2022 at 11:11)</a>:</h4>
<p>OK, I've a simple example. </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">init.data.nat.lemmas</span>

<span class="kn">namespace</span> <span class="n">crawler</span>

<span class="kd">structure</span> <span class="n">comm</span> <span class="o">:=</span>
<span class="o">(</span> <span class="n">x</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="o">)</span>
<span class="o">(</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="o">)</span>
<span class="o">(</span> <span class="n">comm</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span> <span class="bp">+</span> <span class="n">x</span><span class="o">)</span>

<span class="kd">def</span> <span class="n">test</span> <span class="o">:</span> <span class="n">crawler.comm</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">x</span> <span class="o">:=</span> <span class="mi">2</span><span class="o">,</span>
  <span class="n">y</span> <span class="o">:=</span> <span class="mi">5</span><span class="o">,</span>
  <span class="n">comm</span> <span class="o">:=</span> <span class="n">nat.add_comm</span> <span class="n">_</span> <span class="n">_</span> <span class="o">}</span>

<span class="kd">lemma</span> <span class="n">stupid</span> <span class="o">:</span> <span class="n">test.1</span> <span class="bp">+</span> <span class="n">test.2</span> <span class="bp">=</span> <span class="n">test.2</span> <span class="bp">+</span> <span class="n">test.1</span> <span class="o">:=</span> <span class="n">test.comm</span>

<span class="kd">end</span> <span class="n">crawler</span>
</code></pre></div>



<a name="298560644"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298560644" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298560644">(Sep 13 2022 at 11:12)</a>:</h4>
<p><code>lib['crawler.stupid']</code> gives</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">LeanDecl</span><span class="o">(</span><span class="n">name</span><span class="bp">='</span><span class="n">crawler.stupid'</span><span class="o">,</span> <span class="n">filename</span><span class="bp">='/</span><span class="n">home</span><span class="bp">/</span><span class="n">brasca</span><span class="bp">/</span><span class="n">lean</span><span class="bp">/</span><span class="n">test_crawl</span><span class="bp">/</span><span class="n">src</span><span class="bp">/</span><span class="n">test_crawl.lean'</span><span class="o">,</span> <span class="n">line_nb</span><span class="bp">=</span><span class="mi">15</span><span class="o">,</span> <span class="n">kind</span><span class="bp">='</span><span class="kd">lemma</span><span class="bp">'</span><span class="o">,</span> <span class="n">is_inductive</span><span class="bp">=</span><span class="n">False</span><span class="o">,</span>
<span class="n">is_structure</span><span class="bp">=</span><span class="n">False</span><span class="o">,</span> <span class="n">is_structure_field</span><span class="bp">=</span><span class="n">False</span><span class="o">,</span> <span class="n">is_class</span><span class="bp">=</span><span class="n">False</span><span class="o">,</span> <span class="n">is_instance</span><span class="bp">=</span><span class="n">False</span><span class="o">,</span> <span class="n">is_recursor</span><span class="bp">=</span><span class="n">False</span><span class="o">,</span> <span class="n">is_constructor</span><span class="bp">=</span><span class="n">False</span><span class="o">,</span>
<span class="kt">Type</span><span class="bp">='</span><span class="n">crawler.test.x</span> <span class="bp">+</span> <span class="n">crawler.test.y</span> <span class="bp">=</span> <span class="n">crawler.test.y</span> <span class="bp">+</span> <span class="n">crawler.test.x'</span><span class="o">,</span> <span class="n">type_uses_proofs</span><span class="bp">=</span><span class="n">set</span><span class="o">(),</span>
<span class="n">type_uses_others</span><span class="bp">=</span><span class="o">{</span><span class="bp">'</span><span class="n">crawler.comm.x'</span><span class="o">,</span> <span class="bp">'</span><span class="n">eq'</span><span class="o">,</span> <span class="bp">'</span><span class="n">crawler.comm.y'</span><span class="o">,</span> <span class="bp">'</span><span class="n">has_add.add'</span><span class="o">,</span> <span class="bp">'</span><span class="n">crawler.test'</span><span class="o">,</span> <span class="bp">'</span><span class="n">nat.has_add'</span><span class="o">,</span> <span class="bp">'</span><span class="n">nat'</span><span class="o">},</span> <span class="n">type_size</span><span class="bp">=</span><span class="mi">0</span><span class="o">,</span>
<span class="n">type_dedup_size</span><span class="bp">=</span><span class="mi">0</span><span class="o">,</span> <span class="n">type_pp_size</span><span class="bp">=</span><span class="mi">0</span><span class="o">,</span> <span class="n">Value</span><span class="bp">='</span><span class="n">crawler.test.comm'</span><span class="o">,</span> <span class="n">value_uses_proofs</span><span class="bp">=</span><span class="o">{</span><span class="bp">'</span><span class="n">crawler.comm.comm'</span><span class="o">},</span>
<span class="n">value_uses_others</span><span class="bp">=</span><span class="o">{</span><span class="bp">'</span><span class="n">crawler.test'</span><span class="o">},</span> <span class="n">value_size</span><span class="bp">=</span><span class="mi">0</span><span class="o">,</span> <span class="n">value_dedup_size</span><span class="bp">=</span><span class="mi">0</span><span class="o">,</span> <span class="n">value_pp_size</span><span class="bp">=</span><span class="mi">0</span><span class="o">,</span>
<span class="n">target_class</span><span class="bp">=</span><span class="n">None</span><span class="o">,</span> <span class="n">parent</span><span class="bp">=</span><span class="n">None</span><span class="o">,</span> <span class="n">fields</span><span class="bp">=</span><span class="o">[])</span>
</code></pre></div>



<a name="298560668"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298560668" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298560668">(Sep 13 2022 at 11:12)</a>:</h4>
<p><code>nat.add_comm</code> is never mentioned.</p>



<a name="298733960"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298733960" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298733960">(Sep 14 2022 at 09:36)</a>:</h4>
<p>I've the result from the new version of leancrawler. As expected, the full graph has the same number of nodes (well, four more, but I added the statement of the challenge, so maybe it is because of this), 99733.</p>
<p>On the other hand, the connected component of <code>liquid_tensor_experiment</code> has now 24780 nodes instead of 20172.</p>



<a name="298734363"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298734363" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298734363">(Sep 14 2022 at 09:38)</a>:</h4>
<p>The statement has 13873 nodes.</p>



<a name="298734556"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298734556" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298734556">(Sep 14 2022 at 09:40)</a>:</h4>
<p>Wow, that's still a lot!</p>



<a name="298734625"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298734625" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298734625">(Sep 14 2022 at 09:40)</a>:</h4>
<p>Can you split that into defs vs lemmas</p>



<a name="298734742"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298734742" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298734742">(Sep 14 2022 at 09:40)</a>:</h4>
<p>Yes, I have all of that. Give me a moment to list all the stats I have.</p>



<a name="298736351"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298736351" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298736351">(Sep 14 2022 at 09:51)</a>:</h4>
<p>Here they are:</p>
<ul>
<li>full graph (everything imported by <code>challenge.lean</code>): 99733 nodes. 16010 definitions, 71286 lemmas and 10454 instances. 86996 in mathlib and 4366 in core.</li>
<li>challenge: 24780 nodes. 5012 definitions, 15390 lemmas and 3571 instances. 18173 in mathlib and 1082 in core.</li>
<li>statement:  13873 nodes. 2512 definitions, 8502 lemmas and 2180 instances. 11765 in mathlib and 988 in core.</li>
</ul>



<a name="298738720"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298738720" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298738720">(Sep 14 2022 at 10:06)</a>:</h4>
<ul>
<li>first_target : 15223 nodes. 2274 definitions, 10125 lemmas and 2217 instances. 12693 in mathlib and 10128 in core.</li>
</ul>



<a name="298742352"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298742352" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298742352">(Sep 14 2022 at 10:30)</a>:</h4>
<p>Thanks! 2512 definitions going into the statement!! That's a lot.</p>
<p>I'm still confused about the 99733 vs 24780. That delta seems very large to me.</p>



<a name="298744059"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298744059" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298744059">(Sep 14 2022 at 10:41)</a>:</h4>
<p>I am going to post the list of unused stuff</p>



<a name="298746350"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298746350" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298746350">(Sep 14 2022 at 10:57)</a>:</h4>
<p>There are 2846 declarations in the full graph that are not in mathlib or core, and are not used in the challenge graph (before we had more than 4000 of them). <a href="https://gist.github.com/riccardobrasca/fed271dd71cbf9bd2f15052f5cecb44e">Here</a> is the list.</p>



<a name="298747067"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298747067" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298747067">(Sep 14 2022 at 11:02)</a>:</h4>
<p>All the examples above are now used, as expected. Note that <code>first_target</code> is in the useless list, but if we want to also have this literal statement it is enough to include</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">first_target</span>
<span class="n">thm95'</span>
<span class="n">thm95''</span>
</code></pre></div>
<p>so the difference is negligible.</p>



<a name="298747276"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298747276" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298747276">(Sep 14 2022 at 11:03)</a>:</h4>
<p>Right, it's actually expected that <code>first_target</code> is not a dependency of <code>liquid_tensor_experiment</code>. I ended up using a "homotopic" variant called <code>thm94_explicit</code> or something like that.</p>



<a name="298747592"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298747592" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298747592">(Sep 14 2022 at 11:05)</a>:</h4>
<p>Ok, I see a lot of <code>bounded_derived_category</code> on that list. Makes sense, because we ended up only working with the homotopy category.</p>



<a name="298750270"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298750270" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298750270">(Sep 14 2022 at 11:23)</a>:</h4>
<p>I've removed <a href="https://gist.github.com/riccardobrasca/9e56afb9c20f44012263cc3d57fafd5b">here</a> all the namespaces. It would be nice to remove the lines that <em>never</em> appear in <code>src/</code>, because these declarations are autogenerated.  I am quite bad in writing scripts, does someone want to do it?</p>



<a name="298753531"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298753531" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298753531">(Sep 14 2022 at 11:44)</a>:</h4>
<p>I've done it. The list is now down to 1722. Of those 490 appear exactly once. Unless these are instances, I think it can be removed and the project should compile without problems.</p>



<a name="298756534"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298756534" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298756534">(Sep 14 2022 at 11:58)</a>:</h4>
<p>Ok, 1722 sounds like a more reasonable number to me.</p>



<a name="298757300"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298757300" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298757300">(Sep 14 2022 at 12:03)</a>:</h4>
<p>Grepping the whole word it's down to 1666</p>



<a name="298758209"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298758209" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298758209">(Sep 14 2022 at 12:08)</a>:</h4>
<p><a href="https://gist.github.com/riccardobrasca/9c421bbd9292cd82eb854abc3035f6e3">Here</a> is the list. It is the list of declarations that appear in the LTE but are not needed to get to <code>liquid_tensor_experiment</code>, with the number of times the name appears in <code>src/*</code>. Note that I searched for the name, so for example <code>cochain_complex.hom.cons.f</code> appears more than 10000 times because <code>f</code> does so, in particular it is possible that some of these declarations are still autogenerated. Also it's possible that some useless instance can be missing, since the autogenerated name never appears, not even once.</p>



<a name="298758645"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298758645" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298758645">(Sep 14 2022 at 12:11)</a>:</h4>
<p>If I am not wrong all <a href="https://gist.github.com/riccardobrasca/bf4c312e67c0ec07753da31138c75982">these</a> can be removed safely, meaning that the project should compile, without requiring any further modification.</p>



<a name="298759974"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298759974" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298759974">(Sep 14 2022 at 12:20)</a>:</h4>
<p>We could try it out on a branch.</p>



<a name="298760050"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298760050" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298760050">(Sep 14 2022 at 12:20)</a>:</h4>
<p>A cheaper optimization is checking which files are not in the import graph closure of <code>challenge.lean</code> and <code>examples/*.lean</code>.</p>



<a name="298760077"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298760077" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298760077">(Sep 14 2022 at 12:20)</a>:</h4>
<p>There might be several files that can be removed entirely.</p>



<a name="298760729"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298760729" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298760729">(Sep 14 2022 at 12:24)</a>:</h4>
<p>Let me try removing some of these declarations.</p>



<a name="298761016"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298761016" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298761016">(Sep 14 2022 at 12:26)</a>:</h4>
<p>ouf, it considered <code>(add_subgroup.equiv_top _)</code> not the same as <code>add_subgroup.equiv_top</code> because of the <code>(</code>, so it is already wrong.</p>



<a name="298761075"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298761075" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298761075">(Sep 14 2022 at 12:27)</a>:</h4>
<p>Let's ignore the whole word, there will be just a bunch of false positive.</p>



<a name="298761931"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298761931" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298761931">(Sep 14 2022 at 12:33)</a>:</h4>
<p>In any case I am considering all the examples useless :(</p>



<a name="298764035"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/298764035" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#298764035">(Sep 14 2022 at 12:47)</a>:</h4>
<p>I just realized that what I am doing is stupid, all the information we want are in the graph, it doesn't make sense to use <code>grep</code> or whatever. A never used lemma is just a node with out-degree (maybe in-degree) equal to <code>0</code>.</p>



<a name="299186750"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/299186750" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#299186750">(Sep 16 2022 at 15:37)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F/near/298742352">said</a>:</p>
<blockquote>
<p>I'm still confused about the 99733 vs 24780. That delta seems very large to me.</p>
</blockquote>
<p>This is something I don't understand. The number of useless declaration in the project seems reasonable, but I doubt very much they need more than 70000 mathlib declarations. <a href="https://gist.github.com/riccardobrasca/5e6c5229639d4437a2cc95c561d9f0c2">Here</a> is the list.</p>



<a name="299187324"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/299187324" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Yang <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#299187324">(Sep 16 2022 at 15:39)</a>:</h4>
<p>Does the 99733 count the definitions declared in some file included by <code>challenge.lean</code> but never used in any (unused or not) definition in LTE?</p>



<a name="299187778"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/299187778" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#299187778">(Sep 16 2022 at 15:41)</a>:</h4>
<p>Ah this can be the explanation! I think <code>leancrawler</code> list all declarations in all files (recursively) imported. So if we only use one declaration from a large file we  get all of them.</p>



<a name="299188160"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/299188160" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#299188160">(Sep 16 2022 at 15:43)</a>:</h4>
<p>So 99733 is a totally meaningless number, it depends on the files structure of mathlib.</p>



<a name="299560924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/299560924" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#299560924">(Sep 19 2022 at 13:05)</a>:</h4>
<p><a href="/user_uploads/3121/im-1OPpRQWDor351klyXtDd-/final.png">final.png</a> I've redone the graph using the fixed leancrawler. It's more dense, and <code>liquid_tensor_experiment</code> is now a theorem in analysis, even if it's more in the pseudonormed group region.</p>
<div class="message_inline_image"><a href="/user_uploads/3121/im-1OPpRQWDor351klyXtDd-/final.png" title="final.png"><img src="/user_uploads/3121/im-1OPpRQWDor351klyXtDd-/final.png"></a></div>



<a name="299605226"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/299605226" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#299605226">(Sep 19 2022 at 16:54)</a>:</h4>
<p>The discrete stuff makes this look like a <span aria-label="unicorn" class="emoji emoji-1f984" role="img" title="unicorn">:unicorn:</span></p>



<a name="299605244"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/299605244" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#299605244">(Sep 19 2022 at 16:54)</a>:</h4>
<p>Sounds about right!</p>



<a name="299605383"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/299605383" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#299605383">(Sep 19 2022 at 16:55)</a>:</h4>
<p>Especially since category theory and homological algebra is the mouth which will eat all of mathematics</p>



<a name="299606454"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/299606454" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#299606454">(Sep 19 2022 at 17:00)</a>:</h4>
<p>One thing which really excited me about this graph is that it is finally something we can show <span class="user-mention" data-user-id="110049">@Mario Carneiro</span> and say "there, it's taken years but you can finally see category theory interacting with other mathematics". For many years category theory was essentially completely isolated from the rest of mathlib, and Mario raised the issue about whether it was actually ever useful; I assured him that it was just a matter of time. I don't think there was any category theory at all in the perfectoid project and I strongly doubt it's used in sphere eversion either, but sometimes it plays a crucial role.</p>



<a name="299606802"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/299606802" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#299606802">(Sep 19 2022 at 17:02)</a>:</h4>
<p>If you squint, it looks a bit like <a href="https://en.wikipedia.org/wiki/Antarctica#/media/File:Antarctica_6400px_from_Blue_Marble.jpg">https://en.wikipedia.org/wiki/Antarctica#/media/File:Antarctica_6400px_from_Blue_Marble.jpg</a></p>



<a name="299608201"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/299608201" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#299608201">(Sep 19 2022 at 17:10)</a>:</h4>
<p>Should we make a page similar to <a href="https://leanprover-community.github.io/lean-perfectoid-spaces/">https://leanprover-community.github.io/lean-perfectoid-spaces/</a> and include this graph?</p>



<a name="299608350"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/299608350" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#299608350">(Sep 19 2022 at 17:11)</a>:</h4>
<p>We could of course add it to <code>README.md</code> as well</p>



<a name="299609370"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/299609370" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#299609370">(Sep 19 2022 at 17:17)</a>:</h4>
<p>Let me post a version with the y of category theory in the image. I am with the phone, I will do it later</p>



<a name="299609696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/299609696" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#299609696">(Sep 19 2022 at 17:19)</a>:</h4>
<p>Maybe I should mention that the perfectoid page linked above was one of the first things that got me personally interested in lean. It's a bit friendlier than a github readme to an outsider.</p>



<a name="299610624"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/299610624" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#299610624">(Sep 19 2022 at 17:24)</a>:</h4>
<p>I'm completely fine with having a dedicated landing page that links to blueprint/github/press (and papers, once we have those). Sounds like a good idea to me.</p>



<a name="299610722"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/299610722" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#299610722">(Sep 19 2022 at 17:25)</a>:</h4>
<p>It says something about a person if a picture of a graph with tens of thousands of nodes/edges is "a bit friendler" than a text file ;-)</p>



<a name="299610756"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/299610756" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#299610756">(Sep 19 2022 at 17:25)</a>:</h4>
<p>Oh sorry I misunderstood! You mean the page in general -- yes I agree!</p>



<a name="299611079"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/299611079" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#299611079">(Sep 19 2022 at 17:27)</a>:</h4>
<p><span class="user-mention" data-user-id="130384">@Riccardo Brasca</span> if you want to tweet the image (once you're happy with it) I'll retweet.</p>



<a name="299617730"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/299617730" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#299617730">(Sep 19 2022 at 18:04)</a>:</h4>
<p>Yeah I was talking about the webpage vs. the readme file</p>



<a name="299697975"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/299697975" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#299697975">(Sep 20 2022 at 07:37)</a>:</h4>
<p><a href="/user_uploads/3121/60R7y-f2JZHw7W37pXcNDtRp/final.png">final.png</a>  Here is the fixed image. <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> feel free to tweet it!</p>
<div class="message_inline_image"><a href="/user_uploads/3121/60R7y-f2JZHw7W37pXcNDtRp/final.png" title="final.png"><img src="/user_uploads/3121/60R7y-f2JZHw7W37pXcNDtRp/final.png"></a></div>



<a name="299698554"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/299698554" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#299698554">(Sep 20 2022 at 07:42)</a>:</h4>
<p>Can you make a bigger version?</p>



<a name="299699743"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/how%20much%20mathlib%20in%20LTE%3F/near/299699743" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/how.20much.20mathlib.20in.20LTE.3F.html#299699743">(Sep 20 2022 at 07:51)</a>:</h4>
<p>I am not sure how to do it, but if someone knows how to tell gephi to produce an higher quality image <a href="https://webusers.imj-prg.fr/~riccardo.brasca/files/final.gephi">here</a> is the file</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>