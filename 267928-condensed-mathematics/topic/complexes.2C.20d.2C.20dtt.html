---
layout: archive
title: Zulip Chat Archive
permalink: /stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/index.html">condensed mathematics</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html">complexes, d, dtt</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="228905575"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228905575" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228905575">(Mar 05 2021 at 06:48)</a>:</h4>
<p>Here's a pretty heretical proposal, that takes ideas from Floris, Scott, and Sebastien:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">category_theory.limits.shapes.zero</span>

<span class="kn">open</span> <span class="n">category_theory</span> <span class="n">category_theory.limits</span>

<span class="kd">class</span> <span class="n">has_succ</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="n">succ</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span><span class="o">)</span>

<span class="c1">-- fix this to something better?</span>
<span class="kd">notation</span> <span class="bp">`Ş`</span> <span class="o">:=</span> <span class="n">has_succ.succ</span>

<span class="c1">-- do we want this for every semiring??</span>
<span class="kd">instance</span> <span class="o">:</span> <span class="n">has_succ</span> <span class="n">ℕ</span> <span class="o">:=</span> <span class="o">⟨</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">⟩</span>
<span class="kd">instance</span> <span class="o">:</span> <span class="n">has_succ</span> <span class="n">ℤ</span> <span class="o">:=</span> <span class="o">⟨</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">⟩</span>

<span class="kd">structure</span> <span class="n">differential_object_aux</span> <span class="o">(</span><span class="n">ι</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">S₀</span> <span class="n">S₁</span> <span class="o">:</span> <span class="n">ι</span> <span class="bp">→</span> <span class="n">ι</span><span class="o">)</span> <span class="o">(</span><span class="n">V</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span>
  <span class="o">[</span><span class="n">category</span> <span class="n">V</span><span class="o">]</span> <span class="o">[</span><span class="n">has_zero_morphisms</span> <span class="n">V</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">ι</span> <span class="bp">→</span> <span class="n">V</span><span class="o">)</span>
<span class="o">(</span><span class="n">differential</span> <span class="o">:</span> <span class="bp">Π</span> <span class="n">i</span><span class="o">,</span> <span class="n">X</span> <span class="o">(</span><span class="n">S₀</span> <span class="n">i</span><span class="o">)</span> <span class="bp">⟶</span> <span class="n">X</span> <span class="o">(</span><span class="n">S₁</span> <span class="n">i</span><span class="o">))</span>
<span class="o">(</span><span class="n">differential2</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">i</span> <span class="n">j</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">S₁</span> <span class="n">i</span> <span class="bp">=</span> <span class="n">S₀</span> <span class="n">j</span><span class="o">),</span>
  <span class="n">differential</span> <span class="n">i</span> <span class="bp">≫</span> <span class="n">eq_to_hom</span> <span class="o">(</span><span class="k">show</span> <span class="n">X</span> <span class="o">(</span><span class="n">S₁</span> <span class="n">i</span><span class="o">)</span> <span class="bp">=</span> <span class="n">X</span> <span class="o">(</span><span class="n">S₀</span> <span class="n">j</span><span class="o">),</span> <span class="kd">by</span> <span class="n">rw</span> <span class="n">h</span><span class="o">)</span> <span class="bp">≫</span> <span class="n">differential</span> <span class="n">j</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span>

<span class="kd">variables</span> <span class="o">(</span><span class="n">ι</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">V</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">{</span><span class="n">cov</span> <span class="o">:</span> <span class="n">bool</span><span class="o">}</span>
<span class="kd">variables</span> <span class="o">[</span><span class="n">has_succ</span> <span class="n">ι</span><span class="o">]</span> <span class="o">[</span><span class="n">category</span> <span class="n">V</span><span class="o">]</span> <span class="o">[</span><span class="n">has_zero_morphisms</span> <span class="n">V</span><span class="o">]</span>

<span class="kd">def</span> <span class="n">differential_object</span> <span class="o">:</span> <span class="n">bool</span> <span class="bp">→</span> <span class="kt">Type</span><span class="bp">*</span>
<span class="bp">|</span> <span class="n">tt</span> <span class="o">:=</span> <span class="n">differential_object_aux</span> <span class="n">ι</span> <span class="n">id</span> <span class="bp">Ş</span> <span class="n">V</span>
<span class="bp">|</span> <span class="n">ff</span> <span class="o">:=</span> <span class="n">differential_object_aux</span> <span class="n">ι</span> <span class="bp">Ş</span> <span class="n">id</span> <span class="n">V</span>

<span class="kd">abbreviation</span> <span class="n">chain_complex</span> <span class="o">:=</span> <span class="n">differential_object</span> <span class="n">ι</span> <span class="n">V</span> <span class="n">ff</span>

<span class="kd">abbreviation</span> <span class="n">cochain_complex</span> <span class="o">:=</span> <span class="n">differential_object</span> <span class="n">ι</span> <span class="n">V</span> <span class="n">tt</span>

<span class="kn">namespace</span> <span class="n">differential_object</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">ι</span> <span class="n">V</span><span class="o">}</span>

<span class="kd">def</span> <span class="n">X</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">cov</span> <span class="o">:</span> <span class="n">bool</span><span class="o">}</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">differential_object</span> <span class="n">ι</span> <span class="n">V</span> <span class="n">cov</span><span class="o">),</span> <span class="n">ι</span> <span class="bp">→</span> <span class="n">V</span>
<span class="bp">|</span> <span class="n">tt</span> <span class="o">:=</span> <span class="n">differential_object_aux.X</span>
<span class="bp">|</span> <span class="n">ff</span> <span class="o">:=</span> <span class="n">differential_object_aux.X</span>

<span class="kd">variable</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">ι</span><span class="o">]</span>

<span class="kd">def</span> <span class="n">d</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">cov</span> <span class="o">:</span> <span class="n">bool</span><span class="o">}</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">differential_object</span> <span class="n">ι</span> <span class="n">V</span> <span class="n">cov</span><span class="o">)</span> <span class="o">(</span><span class="n">i</span> <span class="n">j</span> <span class="o">:</span> <span class="n">ι</span><span class="o">),</span> <span class="n">C.X</span> <span class="n">i</span> <span class="bp">⟶</span> <span class="n">C.X</span> <span class="n">j</span>
<span class="bp">|</span> <span class="n">tt</span> <span class="n">C</span> <span class="n">i</span> <span class="n">j</span> <span class="o">:=</span>
<span class="k">if</span> <span class="n">h</span> <span class="o">:</span> <span class="bp">Ş</span> <span class="n">i</span> <span class="bp">=</span> <span class="n">j</span>
<span class="k">then</span> <span class="n">differential_object_aux.differential</span> <span class="n">C</span> <span class="n">i</span> <span class="bp">≫</span> <span class="n">eq_to_hom</span> <span class="o">(</span><span class="k">show</span> <span class="n">C.X</span> <span class="o">(</span><span class="bp">Ş</span> <span class="n">i</span><span class="o">)</span> <span class="bp">=</span> <span class="n">C.X</span> <span class="n">j</span><span class="o">,</span> <span class="kd">by</span> <span class="n">rw</span> <span class="n">h</span><span class="o">)</span>
<span class="k">else</span> <span class="mi">0</span>
<span class="bp">|</span> <span class="n">ff</span> <span class="n">C</span> <span class="n">i</span> <span class="n">j</span> <span class="o">:=</span>
<span class="k">if</span> <span class="n">h</span> <span class="o">:</span> <span class="n">i</span> <span class="bp">=</span> <span class="bp">Ş</span> <span class="n">j</span>
<span class="k">then</span> <span class="n">eq_to_hom</span> <span class="o">(</span><span class="k">show</span> <span class="n">C.X</span> <span class="n">i</span> <span class="bp">=</span> <span class="n">C.X</span> <span class="o">(</span><span class="bp">Ş</span> <span class="n">j</span><span class="o">),</span> <span class="kd">by</span> <span class="n">rw</span> <span class="n">h</span><span class="o">)</span> <span class="bp">≫</span> <span class="n">differential_object_aux.differential</span> <span class="n">C</span> <span class="n">j</span>
<span class="k">else</span> <span class="mi">0</span>

<span class="kd">lemma</span> <span class="n">d_comp_d</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">differential_object</span> <span class="n">ι</span> <span class="n">V</span> <span class="n">cov</span><span class="o">)</span> <span class="o">(</span><span class="n">i</span> <span class="n">j</span> <span class="n">k</span> <span class="o">:</span> <span class="n">ι</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">C.d</span> <span class="n">i</span> <span class="n">j</span> <span class="bp">≫</span> <span class="n">C.d</span> <span class="n">j</span> <span class="n">k</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">cases</span> <span class="n">cov</span><span class="o">,</span>
  <span class="n">all_goals</span>
  <span class="o">{</span> <span class="n">dsimp</span> <span class="o">[</span><span class="n">d</span><span class="o">],</span> <span class="n">split_ifs</span> <span class="k">with</span> <span class="n">h1</span> <span class="n">h2</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">subst</span> <span class="n">h1</span><span class="o">,</span> <span class="n">subst</span> <span class="n">h2</span><span class="o">,</span>
      <span class="n">simpa</span> <span class="n">using</span> <span class="n">differential_object_aux.differential2</span> <span class="n">C</span> <span class="n">_</span> <span class="n">_</span> <span class="n">rfl</span> <span class="o">},</span>
    <span class="n">all_goals</span> <span class="o">{</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">zero_comp</span><span class="o">,</span> <span class="n">comp_zero</span><span class="o">]</span> <span class="o">}</span> <span class="o">}</span>
<span class="kd">end</span>

<span class="kd">end</span> <span class="n">differential_object</span>
</code></pre></div>



<a name="228905661"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228905661" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228905661">(Mar 05 2021 at 06:49)</a>:</h4>
<p>This allows us to work with chain/cochain complexes indexed by <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">Z</mi></mrow><annotation encoding="application/x-tex">\Z</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord"><span class="mord mathbb">Z</span></span></span></span></span>, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">N</mi></mrow><annotation encoding="application/x-tex">\N</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord"><span class="mord mathbb">N</span></span></span></span></span>, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">N</mi><mo>×</mo><mo stretchy="false">{</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mn>2</mn><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\N \times \{0,1,2\}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.77222em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathbb">N</span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">2</span><span class="mclose">}</span></span></span></span> etc...</p>



<a name="228905684"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228905684" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228905684">(Mar 05 2021 at 06:49)</a>:</h4>
<p><code>d_comp_d</code> is true without any proof obligations</p>



<a name="228905696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228905696" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228905696">(Mar 05 2021 at 06:49)</a>:</h4>
<p><code>d i j</code> is a map from <code>C.X i</code> to <code>C.X j</code>, for all <code>i</code> and <code>j</code></p>



<a name="228905914"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228905914" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228905914">(Mar 05 2021 at 06:52)</a>:</h4>
<p>It solves (read: sidesteps) the issue of whether <code>d i : C.X i -&gt; C.X (i-1)</code> or <code>d i : C.X (i+1) -&gt; C.X i</code>.<br>
As <span class="user-mention" data-user-id="110087">@Scott Morrison</span> points out in <a href="https://github.com/leanprover-community/mathlib/issues/6260">#6260</a>, both conventions are used in maths literature.</p>
<p>With this proposal <code>d i j : C.X i -&gt; C.X j</code>, you just need to provide both <code>i</code> and <code>j</code>, so that issue doesn't occure <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span> <span aria-label="relieved" class="emoji emoji-1f60c" role="img" title="relieved">:relieved:</span> <span aria-label="see no evil" class="emoji emoji-1f648" role="img" title="see no evil">:see_no_evil:</span></p>



<a name="228905975"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228905975" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228905975">(Mar 05 2021 at 06:53)</a>:</h4>
<p>So far for the immediate advantages that I see.<br>
Downsides:</p>
<ul>
<li>We get no type checker guarantees that <code>d</code> makes sense.</li>
<li>We get no type inference for <code>d _ _ x</code>, we have to always remind Lean about the target of <code>d</code></li>
<li>Readability might be hampered by having all those <code>i</code> and <code>j</code>s explicit.</li>
</ul>



<a name="228914269"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228914269" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228914269">(Mar 05 2021 at 08:32)</a>:</h4>
<p>What is wrong with just asking for <code>d {i} {j} (h : j = i + 1)</code>? Didn't this work fine?</p>
<p>I personally think that to make some sense of what is happening here, we need an explicit "challenge problem" which can be a test case for any method? e.g. "implement chain complexes and then prove lemma X"? Do you have a good test case in mind Johan? We can try all methods against it, and of course we can make a list of challenge problems if necessary.</p>



<a name="228914345"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228914345" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228914345">(Mar 05 2021 at 08:33)</a>:</h4>
<p><code>soft_truncation.lean</code> is a nice test case</p>



<a name="228914382"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228914382" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228914382">(Mar 05 2021 at 08:33)</a>:</h4>
<p>Can you be more explicit? Where do I look? I've been very busy for the past few days.</p>



<a name="228914468"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228914468" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228914468">(Mar 05 2021 at 08:34)</a>:</h4>
<p>(but I feel very free right now :-) although I have a large document to read for an 11am meeting...but it's not 9am yet :P )</p>



<a name="228914513"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228914513" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228914513">(Mar 05 2021 at 08:34)</a>:</h4>
<p>It's in <code>src/</code></p>



<a name="228914518"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228914518" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228914518">(Mar 05 2021 at 08:34)</a>:</h4>
<p>and full of <code>sorry</code>s</p>



<a name="228914559"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228914559" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228914559">(Mar 05 2021 at 08:35)</a>:</h4>
<p>The downside with your proposal is that we'll have to prove <code>h : j = i + 1</code> a lot, really a lot.</p>



<a name="228914577"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228914577" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228914577">(Mar 05 2021 at 08:35)</a>:</h4>
<p>And those proofs are all boring and distracting</p>



<a name="228914594"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228914594" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228914594">(Mar 05 2021 at 08:35)</a>:</h4>
<p>But on the other hand, it does give some coherence for the type checker to hang on to.</p>



<a name="228914611"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228914611" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228914611">(Mar 05 2021 at 08:35)</a>:</h4>
<p>So I feel like we have to choose between two evils (-;</p>



<a name="228914725"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228914725" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228914725">(Mar 05 2021 at 08:36)</a>:</h4>
<p>I am not saying the <code>h</code> way is better. I think we just need to experiment with both because we are not working on lean-liquid here, we are making some big decision about how to implement chain complexes in Lean so it's definitely worth some thought. I just think that rather than a bunch of people posting random code we need an explicit "test suite" somehow.</p>



<a name="228915012"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228915012" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228915012">(Mar 05 2021 at 08:39)</a>:</h4>
<p>I am still very unclear about what I am supposed to be doing with my "rival" proposal. You are using <code>cochain_complex</code> which apparently is already in mathlib. Is one of the rules that we must stick to mathlib's <code>cochain_complex</code>? And the challenge is an explicit question about <code>NormedGroup</code>?</p>



<a name="228915034"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228915034" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228915034">(Mar 05 2021 at 08:39)</a>:</h4>
<p>No! I'm not using mathlibs version</p>



<a name="228915045"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228915045" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228915045">(Mar 05 2021 at 08:39)</a>:</h4>
<p>Sorry for the confusion</p>



<a name="228915119"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228915119" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228915119">(Mar 05 2021 at 08:40)</a>:</h4>
<p>In the top post I propose a rival to mathlib's version</p>



<a name="228915131"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228915131" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228915131">(Mar 05 2021 at 08:40)</a>:</h4>
<p>Am I looking at the right file? <code>src/system_of_complexes/soft_truncation.lean</code>?</p>



<a name="228915157"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228915157" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228915157">(Mar 05 2021 at 08:40)</a>:</h4>
<p>Yes</p>



<a name="228915173"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228915173" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228915173">(Mar 05 2021 at 08:40)</a>:</h4>
<p>but it doesn't use my top post yet</p>



<a name="228915228"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228915228" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228915228">(Mar 05 2021 at 08:41)</a>:</h4>
<p>I'm currently viewing LTE as the test suite. Working on converting to my proposal, to see how it works</p>



<a name="228915753"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228915753" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228915753">(Mar 05 2021 at 08:45)</a>:</h4>
<p>So is the situation the following: </p>
<p>CHALLENGE: create a definition of cochain complex of NormedGroups, define the soft truncation of a cochain complex of normed groups, and give a complete proof of the assertion that the soft truncation is (k,K)-exact in degrees &lt;= m for c&gt;= c0 iff the original complex is (k,K)-exact in degrees &lt;= m for c&gt;= c0.</p>
<p>And right now we have <br>
Incomplete entry 1: <code>src/system_of_complexes/soft_truncation.lean</code><br>
Incomplete entry 2: Johan's post above<br>
Non-existent entry 3: my <code>d</code> idea.</p>
<p>Is this an accurate description of what is going on? I might well have some time today to hack on this and my understanding (correct me if I'm wrong) is that yesterday you and Adam decided that this is really becoming the key question. </p>
<p>Have I got the statement of the challenge right?</p>



<a name="228915899"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228915899" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228915899">(Mar 05 2021 at 08:46)</a>:</h4>
<p>And we are to use the definition of <code>NormedGroup</code> in the liquid repo but we can use any definition of cochain complex that we like, although we will have to come up with our own definition of <code>is_bounded_exact</code> for that definition?</p>



<a name="228916660"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228916660" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228916660">(Mar 05 2021 at 08:50)</a>:</h4>
<p>Wait, the challenge isn't even true, because you can have terms of negative degree which mess things up.</p>
<p>I would really appreciate guidance towards what the challenge is so I can work on this this afternoon.</p>



<a name="228916739"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228916739" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228916739">(Mar 05 2021 at 08:50)</a>:</h4>
<p>One advantage of not having to prove <code>j = i + 1</code> is for the <code>0</code> case in <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">N</mi></mrow><annotation encoding="application/x-tex">\N</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord"><span class="mord mathbb">N</span></span></span></span></span>-indexed complexes: the cohomology is always <code>(d i (i+1).ker) / (d (i-1) i).im</code>, regardless of whether <code>i = 0</code> or not (and <code>j = i + 1</code> in this case is just not true).</p>
<p>Also, regarding the fact that there would be too many <code>i</code> and <code>j</code> everywhere, one can register <code>d' {i} (x : C i) = d i (i+1) x</code> and use <code>d'</code> in most situations, and <code>d</code> when one has to do something nontrivial with the indices (or exchange the two notations maybe).</p>



<a name="228916806"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228916806" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228916806">(Mar 05 2021 at 08:50)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> yes, that challenge sounds about right</p>



<a name="228916923"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228916923" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228916923">(Mar 05 2021 at 08:50)</a>:</h4>
<p>but it could be extended to a full proof of <code>normed_snake</code> and <code>normed_spectral</code></p>



<a name="228917029"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228917029" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228917029">(Mar 05 2021 at 08:51)</a>:</h4>
<p>If those work smoothly, that is pretty good evidence that we found a workable definition</p>



<a name="228917227"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228917227" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228917227">(Mar 05 2021 at 08:51)</a>:</h4>
<p><span class="user-mention" data-user-id="110050">@Sebastien Gouezel</span> I agree that we could use some notation to get rid of some of the <code>i</code>s or <code>j</code>s</p>



<a name="228917478"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228917478" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228917478">(Mar 05 2021 at 08:52)</a>:</h4>
<p>(But <code>d'</code> is taken because we have differentials in the horizontal and vertical direction (-;</p>



<a name="228917900"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228917900" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228917900">(Mar 05 2021 at 08:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt/near/228916660">said</a>:</p>
<blockquote>
<p>Wait, the challenge isn't even true, because you can have terms of negative degree which mess things up.</p>
<p>I would really appreciate guidance towards what the challenge is so I can work on this this afternoon.</p>
</blockquote>
<p>I think for me the challenge includes to have something that gracefully handles <code>nat</code>-indexed and <code>int</code>-indexed complexes.</p>



<a name="228917937"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228917937" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228917937">(Mar 05 2021 at 08:53)</a>:</h4>
<p>What is <code>normed_snake</code>? I see <code>weak_normed_snake</code> in <code>src/normed_snake</code> but this looks like it is proved. I am still unclear about what the challenge is. So far I said something which is definitely unprovable (i.e. false) and you said "that challenge sounds about right", and you are saying things which I don't understand in the sense that I am not sure which formal statement you are talking about.</p>



<a name="228917959"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228917959" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228917959">(Mar 05 2021 at 08:53)</a>:</h4>
<p>But designing a good test suite is hard</p>



<a name="228918033"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228918033" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228918033">(Mar 05 2021 at 08:53)</a>:</h4>
<p>I just want an explicit <code>sorry</code>, that's all.</p>



<a name="228918070"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228918070" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228918070">(Mar 05 2021 at 08:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt/near/228917937">said</a>:</p>
<blockquote>
<p>What is <code>normed_snake</code>? I see <code>weak_normed_snake</code> in <code>src/normed_snake</code> but this looks like it is proved. I am still unclear about what the challenge is. So far I said something which is definitely unprovable (i.e. false) and you said "that challenge sounds about right", and you are saying things which I don't understand in the sense that I am not sure which formal statement you are talking about.</p>
</blockquote>
<p>It's proved using mathlibs definition of <code>chain_complex</code>.</p>



<a name="228918279"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228918279" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228918279">(Mar 05 2021 at 08:54)</a>:</h4>
<p>And it worked? So what is the problem?</p>



<a name="228918422"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228918422" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228918422">(Mar 05 2021 at 08:54)</a>:</h4>
<p>Well, it "worked". We've had quite some discussions to get past that hurdle</p>



<a name="228918498"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228918498" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228918498">(Mar 05 2021 at 08:54)</a>:</h4>
<p>I don't understand what you mean.</p>



<a name="228918520"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228918520" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228918520">(Mar 05 2021 at 08:54)</a>:</h4>
<p>I am trying to work out what the ACTUAL QUESTION is.</p>



<a name="228918569"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228918569" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228918569">(Mar 05 2021 at 08:55)</a>:</h4>
<p>Well, we needed Mario to get us past several DTT hurdles, right?</p>



<a name="228918652"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228918652" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228918652">(Mar 05 2021 at 08:55)</a>:</h4>
<p>I don't know.</p>



<a name="228918880"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228918880" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228918880">(Mar 05 2021 at 08:55)</a>:</h4>
<p>All I know is that I have three hours this afternoon to try and be helpful and I am trying to figure out right now what I can do before admin kicks in in 5 minutes.</p>



<a name="228918977"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228918977" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228918977">(Mar 05 2021 at 08:56)</a>:</h4>
<p>I understand</p>



<a name="228919079"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228919079" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228919079">(Mar 05 2021 at 08:56)</a>:</h4>
<p>But maybe I don't have a clear problem description...</p>



<a name="228919296"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228919296" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228919296">(Mar 05 2021 at 08:56)</a>:</h4>
<p>OK then maybe I am asking for too much.</p>



<a name="228919307"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228919307" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228919307">(Mar 05 2021 at 08:56)</a>:</h4>
<p>When we tried to unsorry <code>soft_truncation</code> we quickly ran into DTT issues.</p>



<a name="228919422"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228919422" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228919422">(Mar 05 2021 at 08:57)</a>:</h4>
<p>We could solve them with <em>a lot</em> of <code>eq_to_hom</code>, but that's just ugly.</p>



<a name="228919426"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228919426" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228919426">(Mar 05 2021 at 08:57)</a>:</h4>
<p>OK so let's go back to that file.</p>



<a name="228919514"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228919514" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228919514">(Mar 05 2021 at 08:57)</a>:</h4>
<p>So I want something better.</p>



<a name="228919614"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228919614" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228919614">(Mar 05 2021 at 08:57)</a>:</h4>
<p>But Floris reminded us that we also want to support long exact sequences. Which are indexed by <code>nat x (fin 3)</code> or something like that</p>



<a name="228919628"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228919628" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228919628">(Mar 05 2021 at 08:57)</a>:</h4>
<p>So I'm trying to be so general that it also captures that</p>



<a name="228919735"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228919735" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228919735">(Mar 05 2021 at 08:58)</a>:</h4>
<p>I think that if you want them to start correctly you might want <code>int x (fin 3)</code></p>



<a name="228919812"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228919812" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228919812">(Mar 05 2021 at 08:59)</a>:</h4>
<p>otherwise you have to say "my first map is injective" explicitly.</p>



<a name="228919900"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228919900" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228919900">(Mar 05 2021 at 09:00)</a>:</h4>
<p>Tate's cohomology theory for finite groups has H^n for all integers n :-/</p>



<a name="228920024"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228920024" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228920024">(Mar 05 2021 at 09:00)</a>:</h4>
<p>Right, but the main point is that we maybe don't want to assume that <code>int x (fin 3)</code> has an <code>add_comm_group</code> instance that provided the <code>i</code> -&gt; <code>i + 1</code> structure</p>



<a name="228920060"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228920060" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228920060">(Mar 05 2021 at 09:01)</a>:</h4>
<p>Instead we should have a generic <code>succ : I -&gt; I</code> on the indexing type</p>



<a name="228920125"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228920125" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228920125">(Mar 05 2021 at 09:01)</a>:</h4>
<p>OK so I will simply have a look at soft_truncation from the <code>d {i} {j} (h)</code> viewpoint. I know that you and others have thought about it a lot more than me but I would like to try it myself so I can understand the issues other people have with this idea better.</p>



<a name="228920147"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228920147" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228920147">(Mar 05 2021 at 09:01)</a>:</h4>
<p>I agree that the <code>succ</code> idea is brilliant.</p>



<a name="228920410"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228920410" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228920410">(Mar 05 2021 at 09:03)</a>:</h4>
<p>Yes, please test it. I haven't tested that idea nearly enough.</p>



<a name="228920455"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228920455" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228920455">(Mar 05 2021 at 09:03)</a>:</h4>
<p>If the idea you're talking about is <code>succ</code> then I think Floris tested it a lot in his thesis :-)</p>



<a name="228920940"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228920940" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228920940">(Mar 05 2021 at 09:07)</a>:</h4>
<p>I am still confused about <code>soft_truncation'_is_bounded_exact_iff</code>. What if C is a complex with a poorly behaved term in degree -37 stopping <code>is_bounded_exact</code> from being true. Then it's not bounded_exact, but its soft truncation might be. In <code>system_of_complexes/soft_truncation</code> the lemma is stated as an iff.</p>



<a name="228921174"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228921174" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228921174">(Mar 05 2021 at 09:09)</a>:</h4>
<p>I think I'm in a similar position to Kevin. I'd like to try out these problems but I have no idea what the problem statement is, much less the informal proof</p>



<a name="228921276"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228921276" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228921276">(Mar 05 2021 at 09:10)</a>:</h4>
<p>I'm on board with the "theme" of dealing with chain complexes, but I guess there's a particular theorem in mind?</p>



<a name="228921450"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228921450" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228921450">(Mar 05 2021 at 09:11)</a>:</h4>
<p>Did I forget to add the assumption that <code>C</code> is bounded exact in negative degrees?</p>



<a name="228921527"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228921527" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228921527">(Mar 05 2021 at 09:12)</a>:</h4>
<p>I had it in a TODO at some point, but it may have been lost in some process</p>



<a name="228921570"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228921570" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228921570">(Mar 05 2021 at 09:12)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> What do you mean with "particular theorem"?</p>



<a name="228921593"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228921593" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228921593">(Mar 05 2021 at 09:12)</a>:</h4>
<p>API theorems? Or the big goal?</p>



<a name="228921623"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228921623" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228921623">(Mar 05 2021 at 09:13)</a>:</h4>
<p>Something that has DTT hell issues</p>



<a name="228921667"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228921667" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228921667">(Mar 05 2021 at 09:13)</a>:</h4>
<p>probably not the big goal</p>



<a name="228921799"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228921799" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228921799">(Mar 05 2021 at 09:14)</a>:</h4>
<p>Ok, <code>soft_truncation</code> has those</p>



<a name="228921877"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228921877" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228921877">(Mar 05 2021 at 09:15)</a>:</h4>
<p>Let me see if I can find the code for the first <code>sorry</code>, which is what Adam wrote (on some branch?)</p>



<a name="228922037"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228922037" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228922037">(Mar 05 2021 at 09:16)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Aah, on master the first <code>def</code> is already complete now</p>



<a name="228922077"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228922077" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228922077">(Mar 05 2021 at 09:17)</a>:</h4>
<p>And the second <code>def</code> has <code>sorry -- annoying )-;</code>, so there you go <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span></p>



<a name="228922096"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228922096" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228922096">(Mar 05 2021 at 09:17)</a>:</h4>
<p>Complete proofs are fine, especially if the result is unsatisfactory</p>



<a name="228922131"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228922131" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228922131">(Mar 05 2021 at 09:17)</a>:</h4>
<p>link?</p>



<a name="228922596"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228922596" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228922596">(Mar 05 2021 at 09:21)</a>:</h4>
<p>First sorry is on line 37 <span aria-label="rofl" class="emoji emoji-1f923" role="img" title="rofl">:rofl:</span></p>



<a name="228922601"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228922601" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228922601">(Mar 05 2021 at 09:21)</a>:</h4>
<p><a href="https://github.com/leanprover-community/lean-liquid/blob/master/src/system_of_complexes/soft_truncation.lean#L37">https://github.com/leanprover-community/lean-liquid/blob/master/src/system_of_complexes/soft_truncation.lean#L37</a></p>



<a name="228926709"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228926709" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228926709">(Mar 05 2021 at 09:55)</a>:</h4>
<p>Small success story:</p>
<p><em>before</em></p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">of_shift</span>  <span class="o">{</span><span class="n">k</span> <span class="n">K</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span><span class="o">}</span> <span class="o">{</span><span class="n">m</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">}</span> <span class="o">[</span><span class="n">hk</span> <span class="o">:</span> <span class="n">fact</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">≤</span> <span class="n">k</span><span class="o">)]</span> <span class="o">{</span><span class="n">c₀</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span><span class="o">}</span>
  <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">c</span> <span class="bp">≥</span> <span class="n">c₀</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">i</span> <span class="bp">&lt;</span> <span class="n">m</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">x</span> <span class="o">:</span> <span class="n">C</span> <span class="o">(</span><span class="n">k</span> <span class="bp">*</span> <span class="n">c</span><span class="o">)</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">),</span>
   <span class="bp">∃</span> <span class="n">y</span> <span class="o">:</span> <span class="n">C</span> <span class="n">c</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">),</span> <span class="bp">∥</span><span class="n">res</span> <span class="n">x</span> <span class="bp">-</span> <span class="n">d</span> <span class="n">y</span><span class="bp">∥</span> <span class="bp">≤</span> <span class="n">K</span> <span class="bp">*</span> <span class="bp">∥</span><span class="n">d</span> <span class="n">x</span><span class="bp">∥</span><span class="o">)</span> <span class="o">:</span>
   <span class="n">C.is_bounded_exact</span> <span class="n">k</span> <span class="n">K</span> <span class="n">m</span> <span class="n">c₀</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">intros</span> <span class="n">c</span> <span class="n">hc</span> <span class="n">i</span> <span class="n">hi</span> <span class="n">x</span><span class="o">,</span>
  <span class="n">specialize</span> <span class="n">H</span> <span class="n">c</span> <span class="n">hc</span> <span class="o">(</span><span class="n">i</span><span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="kd">by</span> <span class="n">linarith</span><span class="o">),</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">sub_add_cancel</span><span class="o">]</span> <span class="n">at</span> <span class="n">H</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">H</span> <span class="n">x</span><span class="o">,</span>
<span class="kd">end</span>

<span class="kd">lemma</span> <span class="n">to_exact</span> <span class="o">(</span><span class="n">hC</span> <span class="o">:</span> <span class="n">C.is_weak_bounded_exact</span> <span class="n">k</span> <span class="n">K</span> <span class="n">m</span> <span class="n">c₀</span><span class="o">)</span> <span class="o">{</span><span class="n">δ</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span><span class="o">}</span> <span class="o">(</span><span class="n">hδ</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">δ</span><span class="o">)</span>
  <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">c</span> <span class="bp">≥</span> <span class="n">c₀</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">i</span> <span class="bp">&lt;</span> <span class="n">m</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">x</span> <span class="o">:</span> <span class="n">C</span> <span class="o">(</span><span class="n">k</span> <span class="bp">*</span> <span class="n">c</span><span class="o">)</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">),</span>
    <span class="n">d</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">→</span> <span class="bp">∃</span> <span class="n">y</span> <span class="o">:</span> <span class="n">C</span> <span class="n">c</span> <span class="o">(</span><span class="n">i</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">),</span> <span class="n">res</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">d</span> <span class="n">y</span><span class="o">)</span> <span class="o">:</span> <span class="n">C.is_bounded_exact</span> <span class="n">k</span> <span class="o">(</span><span class="n">K</span> <span class="bp">+</span> <span class="n">δ</span><span class="o">)</span> <span class="n">m</span> <span class="n">c₀</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">apply</span> <span class="n">is_bounded_exact.of_shift</span><span class="o">,</span>
  <span class="n">intros</span> <span class="n">c</span> <span class="n">hc</span> <span class="n">i</span> <span class="n">hi</span> <span class="n">x</span><span class="o">,</span>
  <span class="n">by_cases</span> <span class="n">hdx</span> <span class="o">:</span> <span class="n">d</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rcases</span> <span class="n">H</span> <span class="n">c</span> <span class="n">hc</span> <span class="n">i</span> <span class="n">hi</span> <span class="n">x</span> <span class="n">hdx</span> <span class="k">with</span> <span class="o">⟨</span><span class="n">y</span><span class="o">,</span> <span class="n">hy</span><span class="o">⟩,</span>
    <span class="n">exact</span> <span class="o">⟨</span><span class="n">y</span><span class="o">,</span> <span class="kd">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">hy</span><span class="o">,</span> <span class="n">hdx</span><span class="o">]⟩</span> <span class="o">},</span>
  <span class="o">{</span> <span class="k">have</span> <span class="o">:</span> <span class="o">((</span><span class="n">K</span> <span class="bp">+</span> <span class="n">δ</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">*</span> <span class="bp">∥</span><span class="n">d</span> <span class="n">x</span><span class="bp">∥</span> <span class="bp">=</span> <span class="n">K</span> <span class="bp">*</span> <span class="bp">∥</span><span class="n">d</span> <span class="n">x</span><span class="bp">∥</span> <span class="bp">+</span> <span class="n">δ</span> <span class="bp">*</span> <span class="bp">∥</span><span class="n">d</span> <span class="n">x</span><span class="bp">∥</span><span class="o">,</span> <span class="n">apply_mod_cast</span> <span class="n">add_mul</span><span class="o">,</span>
    <span class="n">simp_rw</span> <span class="n">this</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">hC</span> <span class="n">c</span> <span class="n">hc</span> <span class="n">_</span> <span class="n">_</span> <span class="n">x</span> <span class="o">(</span><span class="n">δ</span><span class="bp">*∥</span><span class="n">d</span> <span class="n">x</span><span class="bp">∥</span><span class="o">)</span> <span class="o">(</span><span class="n">mul_pos</span> <span class="o">(</span><span class="kd">by</span> <span class="n">exact_mod_cast</span> <span class="n">hδ</span><span class="o">)</span> <span class="bp">$</span> <span class="n">norm_pos_iff.mpr</span> <span class="n">hdx</span><span class="o">),</span> <span class="n">linarith</span> <span class="o">},</span>
<span class="kd">end</span>
</code></pre></div>



<a name="228926737"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228926737" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228926737">(Mar 05 2021 at 09:55)</a>:</h4>
<p><em>after</em></p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">to_exact</span> <span class="o">(</span><span class="n">hC</span> <span class="o">:</span> <span class="n">C.is_weak_bounded_exact</span> <span class="n">k</span> <span class="n">K</span> <span class="n">m</span> <span class="n">c₀</span><span class="o">)</span> <span class="o">{</span><span class="n">δ</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span><span class="o">}</span> <span class="o">(</span><span class="n">hδ</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">δ</span><span class="o">)</span>
  <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">c</span> <span class="bp">≥</span> <span class="n">c₀</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">i</span> <span class="bp">≤</span> <span class="n">m</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">x</span> <span class="o">:</span> <span class="n">C</span> <span class="o">(</span><span class="n">k</span> <span class="bp">*</span> <span class="n">c</span><span class="o">)</span> <span class="n">i</span><span class="o">,</span>
    <span class="n">C.d</span> <span class="n">_</span> <span class="o">(</span><span class="n">i</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">→</span> <span class="bp">∃</span> <span class="n">y</span> <span class="o">:</span> <span class="n">C</span> <span class="n">c</span> <span class="o">(</span><span class="n">i</span><span class="bp">-</span><span class="mi">1</span><span class="o">),</span> <span class="n">res</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">C.d</span> <span class="n">_</span> <span class="n">_</span> <span class="n">y</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">C.is_bounded_exact</span> <span class="n">k</span> <span class="o">(</span><span class="n">K</span> <span class="bp">+</span> <span class="n">δ</span><span class="o">)</span> <span class="n">m</span> <span class="n">c₀</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">intros</span> <span class="n">c</span> <span class="n">hc</span> <span class="n">i</span> <span class="n">hi</span> <span class="n">x</span><span class="o">,</span>
  <span class="n">by_cases</span> <span class="n">hdx</span> <span class="o">:</span> <span class="n">C.d</span> <span class="n">_</span> <span class="o">(</span><span class="n">i</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rcases</span> <span class="n">H</span> <span class="n">c</span> <span class="n">hc</span> <span class="n">i</span> <span class="n">hi</span> <span class="n">x</span> <span class="n">hdx</span> <span class="k">with</span> <span class="o">⟨</span><span class="n">y</span><span class="o">,</span> <span class="n">hy</span><span class="o">⟩,</span>
    <span class="n">exact</span> <span class="o">⟨</span><span class="n">y</span><span class="o">,</span> <span class="kd">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">hy</span><span class="o">,</span> <span class="n">hdx</span><span class="o">]⟩</span> <span class="o">},</span>
  <span class="o">{</span> <span class="k">have</span> <span class="o">:</span> <span class="o">((</span><span class="n">K</span> <span class="bp">+</span> <span class="n">δ</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">*</span> <span class="bp">∥</span><span class="n">C.d</span> <span class="n">_</span> <span class="o">(</span><span class="n">i</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="n">x</span><span class="bp">∥</span>
      <span class="bp">=</span> <span class="n">K</span> <span class="bp">*</span> <span class="bp">∥</span><span class="n">C.d</span> <span class="n">_</span> <span class="o">(</span><span class="n">i</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="n">x</span><span class="bp">∥</span> <span class="bp">+</span> <span class="n">δ</span> <span class="bp">*</span> <span class="bp">∥</span><span class="n">C.d</span> <span class="n">_</span> <span class="o">(</span><span class="n">i</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="n">x</span><span class="bp">∥</span><span class="o">,</span> <span class="n">apply_mod_cast</span> <span class="n">add_mul</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">this</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">hC</span> <span class="n">c</span> <span class="n">hc</span> <span class="n">_</span> <span class="n">hi</span> <span class="n">x</span> <span class="o">(</span><span class="n">δ</span><span class="bp">*∥</span><span class="n">C.d</span> <span class="n">_</span> <span class="o">(</span><span class="n">i</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="n">x</span><span class="bp">∥</span><span class="o">)</span> <span class="o">(</span><span class="n">mul_pos</span> <span class="o">(</span><span class="kd">by</span> <span class="n">exact_mod_cast</span> <span class="n">hδ</span><span class="o">)</span> <span class="bp">$</span> <span class="n">norm_pos_iff.mpr</span> <span class="n">hdx</span><span class="o">)</span> <span class="o">},</span>
<span class="kd">end</span>
</code></pre></div>



<a name="228926807"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228926807" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228926807">(Mar 05 2021 at 09:56)</a>:</h4>
<p>In particular the entire <code>of_shift</code> lemma is no longer needed</p>



<a name="228926847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228926847" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228926847">(Mar 05 2021 at 09:56)</a>:</h4>
<p>Also, the statements aren't about <code>i + 1 + 1</code>, but just about <code>i</code> and <code>i-1</code>, as you would do on paper.</p>



<a name="228927689"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228927689" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228927689">(Mar 05 2021 at 10:02)</a>:</h4>
<hr>
<p><code>system_of_complexes/basic</code> works again, I pushed to <code>jmc-complex</code></p>



<a name="228932068"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228932068" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228932068">(Mar 05 2021 at 10:38)</a>:</h4>
<p>If you want to test a new approach to the problem I am not so sure that adapting the proof of the (weak) snake lemma is a good test. The proof is not very short, but there are no DTT issues, at least in the first version I wrote. The only thing I did was to let Lean take care of all the indexes, and I never wrote <code>i + 1 + 1 + 1</code>, only <code>_</code>, and it worked like a charm (there are no <code>i - 1</code> in the proof). The same for the the real numbers, I started with <code>k * (k * (k * c))</code> instead of <code>k ^ 3 * c</code> and I forgot about it.</p>



<a name="228932789"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228932789" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228932789">(Mar 05 2021 at 10:45)</a>:</h4>
<p>hmm, maybe the DTT issues were not in <code>normed_snake</code> but in the lemma that Patrick was trying to prove</p>



<a name="228932810"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228932810" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228932810">(Mar 05 2021 at 10:45)</a>:</h4>
<p>Namely going from weak exactness to strong exactness</p>



<a name="228936921"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228936921" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228936921">(Mar 05 2021 at 11:21)</a>:</h4>
<p>yes, in that lemma there are some <code>i-1</code></p>



<a name="228945151"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228945151" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228945151">(Mar 05 2021 at 12:33)</a>:</h4>
<p>I think that Sebastien's question about nat can be phrased in the following way: should <code>succ : \a \to \a</code> be beefed up to an equiv? I think he says no but I am thinking yes.</p>



<a name="228945923"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228945923" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228945923">(Mar 05 2021 at 12:39)</a>:</h4>
<p>No, I agree with Sebastien</p>



<a name="228945982"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228945982" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228945982">(Mar 05 2021 at 12:40)</a>:</h4>
<p>There are many reasons to keep <code>nat</code> available as long as possible.</p>



<a name="228946031"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228946031" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228946031">(Mar 05 2021 at 12:40)</a>:</h4>
<p>See also <a href="https://github.com/leanprover-community/mathlib/issues/6260">#6260</a> by Scott, where he basically duplicates the entire api to <code>nat</code>.</p>



<a name="228946240"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228946240" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228946240">(Mar 05 2021 at 12:42)</a>:</h4>
<p>There will be two definitions of "exact" if we keep <code>nat</code>, one saying <code>A 0 -&gt; A 1 -&gt; A 2 -&gt; ...</code> is exact if it's exact from A1, and a second one saying "and furthermore A0 -&gt; A1 is injective".</p>



<a name="228946314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228946314" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228946314">(Mar 05 2021 at 12:43)</a>:</h4>
<p>We need <code>with_neg_one_nat</code> ;-)</p>



<a name="228946517"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228946517" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228946517">(Mar 05 2021 at 12:44)</a>:</h4>
<p>By exact, you mean zero cohomology, i.e., <code>(d (i-1) i).im = (d i (i+1)).ker</code> for all <code>i</code>, right? This definition already contains the fact that the first arrow is injective, by taking <code>i = 0</code>  :-)</p>



<a name="228950421"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228950421" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228950421">(Mar 05 2021 at 13:14)</a>:</h4>
<p>My understanding is that the definition of "<code>A -&gt; B -&gt; C -&gt; D</code> is exact" means "exactness at B and C only". So no, I don't mean this -- I think "<code>A 0 -&gt; A 1 -&gt; A 2 -&gt; ...</code> exact" doesn't imply injectivity of <code>A 0 -&gt; A 1</code>. Or at least I thought that the standard definition didn't mean this. I thought that this was why for short exact sequences we write "0 -&gt; A -&gt; B -&gt; C -&gt; 0" and not just "A -&gt; B -&gt; C" -- exactness of the latter is just exactness at B. But honestly I cannot see this being a problem, as long as people are careful to spell out in docstrings what everything means. It might be a situation where a mathematician can misunderstand a claim being made in Lean but this can be fixed with docstrings.</p>



<a name="228950545"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228950545" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228950545">(Mar 05 2021 at 13:14)</a>:</h4>
<p>Here is my effort so far with the "feed in the proofs" variant. It is going well -- I have got further than Johan:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">system_of_complexes.basic</span>
<span class="kn">import</span> <span class="n">for_mathlib.normed_group_quotient</span>

<span class="c">/-</span><span class="cm">!</span>
<span class="cm"># Soft truncation</span>

<span class="cm">In this file we define soft truncation functors</span>
<span class="cm">for (systems of) complexes of normed groups.</span>

<span class="cm">We call these `soft_truncation'` to distinguish them from the usual soft truncation functors.</span>
<span class="cm">The difference is solely in the definition of the object in degree `0`.</span>
<span class="cm">Usually this object is defined as `C 0` modulo the kernel of `d : C 0 ⟶ C 1`.</span>
<span class="cm">Instead, we define it as `C 0` modulo the image of `d : C (-1) ⟶ C 0`.</span>
<span class="cm">Hence the two definitions agree iff `C` is exact in degree `0`.</span>

<span class="cm">-/</span>

<span class="kd">noncomputable theory</span>
<span class="n">open_locale</span> <span class="n">nnreal</span>

<span class="kn">open</span> <span class="n">category_theory</span> <span class="n">category_theory.limits</span>

<span class="kn">section</span> <span class="n">has_succ</span>

<span class="kd">class</span> <span class="n">has_succ</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="n">succ</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span><span class="o">)</span>

<span class="c1">-- I can't find that Turkish(?) symbol on my keyboard :-(</span>
<span class="kd">notation</span> <span class="bp">`</span><span class="n">Sc</span><span class="bp">`</span> <span class="o">:=</span> <span class="n">has_succ.succ</span>

<span class="kd">def</span> <span class="n">int.has_succ</span> <span class="o">:</span> <span class="n">has_succ</span> <span class="n">ℤ</span> <span class="o">:=</span> <span class="o">⟨</span><span class="bp">λ</span> <span class="n">z</span><span class="o">,</span> <span class="n">z</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">⟩</span>

<span class="kn">local</span> <span class="kn">attribute</span> <span class="o">[</span><span class="kd">instance</span><span class="o">]</span> <span class="n">int.has_succ</span>

<span class="kd">def</span> <span class="n">dsource</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="n">Sc</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:=</span> <span class="n">rfl</span>
<span class="kd">def</span> <span class="n">dtarget</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="n">Sc</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="n">n</span> <span class="o">:=</span> <span class="n">sub_add_cancel</span> <span class="n">n</span> <span class="mi">1</span>

<span class="kd">end</span> <span class="n">has_succ</span>

<span class="kn">section</span> <span class="n">cochain_complex'</span>

<span class="kd">universes</span> <span class="n">v</span> <span class="n">u</span>

<span class="kd">structure</span> <span class="n">cochain_complex'</span> <span class="o">(</span><span class="bp">𝒞</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">[</span><span class="n">category.</span><span class="o">{</span><span class="n">v</span><span class="o">}</span> <span class="bp">𝒞</span><span class="o">]</span> <span class="o">[</span><span class="n">has_zero_morphisms</span> <span class="bp">𝒞</span><span class="o">]</span>
  <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">has_succ</span> <span class="n">α</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="bp">𝒞</span><span class="o">)</span>
<span class="o">(</span><span class="n">d</span> <span class="o">{</span><span class="n">i</span> <span class="n">j</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">Sc</span> <span class="n">i</span> <span class="bp">=</span> <span class="n">j</span><span class="o">)</span> <span class="o">:</span> <span class="n">X</span> <span class="n">i</span> <span class="bp">⟶</span> <span class="n">X</span> <span class="n">j</span><span class="o">)</span>
<span class="o">(</span><span class="n">d_squared'</span> <span class="o">{</span><span class="n">i</span> <span class="n">j</span> <span class="n">k</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">hij</span> <span class="o">:</span> <span class="n">Sc</span> <span class="n">i</span> <span class="bp">=</span> <span class="n">j</span><span class="o">)</span> <span class="o">(</span><span class="n">hjk</span> <span class="o">:</span> <span class="n">Sc</span> <span class="n">j</span> <span class="bp">=</span> <span class="n">k</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">d</span> <span class="n">hij</span><span class="o">)</span> <span class="bp">≫</span> <span class="o">(</span><span class="n">d</span> <span class="n">hjk</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span>

<span class="kn">local</span> <span class="kn">attribute</span> <span class="o">[</span><span class="kd">instance</span><span class="o">]</span> <span class="n">int.has_succ</span>

<span class="kd">variables</span> <span class="o">{</span><span class="bp">𝒞</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">category.</span><span class="o">{</span><span class="n">v</span><span class="o">}</span> <span class="bp">𝒞</span><span class="o">]</span> <span class="o">[</span><span class="n">has_zero_morphisms</span> <span class="bp">𝒞</span><span class="o">]</span>
  <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">cochain_complex'</span> <span class="bp">𝒞</span> <span class="n">ℤ</span><span class="o">)</span>

<span class="kd">lemma</span> <span class="n">d_squared_left</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="n">C.d</span> <span class="o">(</span><span class="n">dsource</span> <span class="n">n</span><span class="o">)</span> <span class="bp">≫</span> <span class="n">C.d</span> <span class="o">(</span><span class="n">dsource</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="n">C.d_squared'</span> <span class="o">(</span><span class="n">dsource</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="n">dsource</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>

<span class="kd">lemma</span> <span class="n">d_squared_middle</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="n">C.d</span> <span class="o">(</span><span class="n">dtarget</span> <span class="n">n</span><span class="o">)</span> <span class="bp">≫</span> <span class="n">C.d</span> <span class="o">(</span><span class="n">dsource</span> <span class="n">n</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="n">C.d_squared'</span> <span class="o">(</span><span class="n">dtarget</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="n">dsource</span> <span class="n">n</span><span class="o">)</span>

<span class="kd">lemma</span> <span class="n">d_squared_right</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="n">C.d</span> <span class="o">(</span><span class="n">dtarget</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">≫</span> <span class="n">C.d</span> <span class="o">(</span><span class="n">dtarget</span> <span class="n">n</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="n">C.d_squared'</span> <span class="o">(</span><span class="n">dtarget</span> <span class="o">(</span><span class="n">n</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">))</span> <span class="o">(</span><span class="n">dtarget</span> <span class="n">n</span><span class="o">)</span>

<span class="kd">end</span> <span class="n">cochain_complex'</span>

<span class="kn">namespace</span> <span class="n">NormedGroup</span>
<span class="kn">open</span> <span class="n">quotient_add_group</span>

<span class="kn">namespace</span> <span class="n">soft_truncation'</span>

<span class="kn">local</span> <span class="kn">attribute</span> <span class="o">[</span><span class="kd">instance</span><span class="o">]</span> <span class="n">int.has_succ</span>

<span class="kd">def</span> <span class="n">X</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">cochain_complex'</span> <span class="n">NormedGroup</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℤ</span> <span class="bp">→</span> <span class="n">NormedGroup</span>
<span class="bp">|</span> <span class="bp">-</span><span class="o">[</span><span class="mi">1</span><span class="bp">+</span><span class="n">n</span><span class="o">]</span>  <span class="o">:=</span> <span class="mi">0</span>
<span class="bp">|</span> <span class="mi">0</span>       <span class="o">:=</span> <span class="n">coker</span> <span class="o">(</span><span class="n">C.d</span> <span class="o">(</span><span class="n">dtarget</span> <span class="mi">0</span><span class="o">))</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">:</span><span class="n">ℕ</span><span class="o">)</span> <span class="o">:=</span> <span class="n">C.X</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span>

<span class="kd">def</span> <span class="n">d</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">cochain_complex'</span> <span class="n">NormedGroup</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">i</span> <span class="n">j</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">Sc</span> <span class="n">i</span> <span class="bp">=</span> <span class="n">j</span><span class="o">),</span> <span class="n">X</span> <span class="n">C</span> <span class="n">i</span> <span class="bp">⟶</span> <span class="n">X</span> <span class="n">C</span> <span class="n">j</span>
<span class="bp">|</span> <span class="bp">-</span><span class="o">[</span><span class="mi">1</span><span class="bp">+</span><span class="n">n</span><span class="o">]</span> <span class="n">_</span> <span class="n">_</span> <span class="o">:=</span> <span class="mi">0</span>
<span class="bp">|</span> <span class="mi">0</span> <span class="mi">1</span> <span class="n">rfl</span> <span class="o">:=</span> <span class="n">coker.lift</span> <span class="o">(</span><span class="n">d_squared_right</span> <span class="n">C</span> <span class="mi">1</span><span class="o">)</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">m</span><span class="bp">+</span><span class="mi">1</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="n">h</span> <span class="o">:=</span> <span class="n">C.d</span> <span class="n">h</span>

<span class="kd">lemma</span> <span class="n">d_squared'</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">cochain_complex'</span> <span class="n">NormedGroup</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">∀</span> <span class="o">(</span><span class="n">i</span> <span class="n">j</span> <span class="n">k</span><span class="o">:</span><span class="n">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">hij</span> <span class="o">:</span> <span class="n">Sc</span> <span class="n">i</span> <span class="bp">=</span> <span class="n">j</span><span class="o">)</span> <span class="o">(</span><span class="n">hjk</span> <span class="o">:</span> <span class="n">Sc</span> <span class="n">j</span> <span class="bp">=</span> <span class="n">k</span><span class="o">),</span> <span class="n">d</span> <span class="n">C</span> <span class="n">hij</span> <span class="bp">≫</span> <span class="n">d</span> <span class="n">C</span> <span class="n">hjk</span> <span class="bp">=</span> <span class="mi">0</span>
<span class="bp">|</span> <span class="bp">-</span><span class="o">[</span><span class="mi">1</span><span class="bp">+</span><span class="n">n</span><span class="o">]</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span> <span class="o">:=</span> <span class="k">show</span> <span class="mi">0</span> <span class="bp">≫</span> <span class="n">_</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span> <span class="kd">by</span> <span class="n">rw</span> <span class="n">zero_comp</span>
<span class="bp">|</span> <span class="mi">0</span> <span class="mi">1</span> <span class="mi">2</span> <span class="n">rfl</span> <span class="n">rfl</span> <span class="o">:=</span> <span class="k">show</span> <span class="n">coker.lift</span> <span class="o">(</span><span class="n">d_squared_right</span> <span class="n">C</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">≫</span> <span class="n">C.d</span> <span class="o">(</span><span class="n">dsource</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span> <span class="k">from</span> <span class="gr">sorry</span> <span class="c1">-- provable</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">:</span><span class="n">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">p</span><span class="bp">+</span><span class="mi">1</span><span class="o">:</span><span class="n">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">q</span><span class="bp">+</span><span class="mi">1</span><span class="o">:</span><span class="n">ℕ</span><span class="o">)</span> <span class="n">hij</span> <span class="n">hjk</span> <span class="o">:=</span> <span class="n">C.d_squared'</span> <span class="n">hij</span> <span class="n">hjk</span>
</code></pre></div>
<p>The equation compiler is doing some extraordinary things.</p>



<a name="228951235"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228951235" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228951235">(Mar 05 2021 at 13:20)</a>:</h4>
<p>By "further than Johan" I just mean that I got the analogue of his line 37 sorry :-)</p>



<a name="228952130"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228952130" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228952130">(Mar 05 2021 at 13:26)</a>:</h4>
<p>hah! that looks quite nice!</p>



<a name="228952468"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228952468" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228952468">(Mar 05 2021 at 13:28)</a>:</h4>
<p>Should I press on or try to figure out how to prove this stuff like coker.lift &gt;&gt; f = 0?</p>



<a name="228952834"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228952834" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228952834">(Mar 05 2021 at 13:31)</a>:</h4>
<p>Mathematically my sorry is this: we have C-1 -&gt; C0 -&gt; C1 exact, so we get a map coker(C-1-&gt;C0)-&gt;C1, and we want to prove that if you compose with C1 -&gt; C2 you get zero. This follows because if you start with something in the coker you can compute its image in C1 by lifting to C0 and applying d, so the result follows from C0 -&gt; C1 -&gt; C2 being zero.</p>



<a name="228953058"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228953058" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228953058">(Mar 05 2021 at 13:32)</a>:</h4>
<p>In short, the composite map (coker C-1 -&gt; C0) -&gt; C2 is zero because it is the <code>lift</code> of C0 -&gt; C2 which is 0, so the result follows from uniqueness of lifts. Do we have this sort of thing?</p>



<a name="228953486"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228953486" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228953486">(Mar 05 2021 at 13:35)</a>:</h4>
<p>Oh, I see exactly what we have, it's all in our repo, I had assumed it was in mathlib. Thanks Adam and Riccardo!</p>



<a name="228974098"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/228974098" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#228974098">(Mar 05 2021 at 15:42)</a>:</h4>
<p><code>src/system_of_complexes/completion.lean</code> now also compiles again on my experiment.<br>
We might want to have a friendly wrapper for</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code> <span class="n">obtain</span> <span class="o">⟨</span><span class="n">i</span><span class="o">,</span> <span class="n">rfl</span><span class="o">⟩</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">i'</span><span class="o">,</span> <span class="n">i</span> <span class="bp">=</span> <span class="n">i'</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:=</span> <span class="o">⟨</span><span class="n">i</span><span class="bp">-</span><span class="mi">1</span><span class="o">,</span> <span class="kd">by</span> <span class="n">linarith</span><span class="o">⟩,</span> <span class="c1">-- lowers `i` by one</span>
</code></pre></div>



<a name="229023804"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229023804" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229023804">(Mar 05 2021 at 20:59)</a>:</h4>
<p>I'm off to bed. If anyone wants to play around with <code>jmc-complex</code>, please go ahead. Despite the initials, I don't claim that branch (-;</p>



<a name="229028307"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229028307" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229028307">(Mar 05 2021 at 21:32)</a>:</h4>
<p>I filled in one sorry, and I added the lemma that <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> mentioned earlier (I hope I didn't duplicate Kevin's work here).</p>



<a name="229028419"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229028419" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229028419">(Mar 05 2021 at 21:33)</a>:</h4>
<p>The lemma is here: <a href="https://github.com/leanprover-community/lean-liquid/blob/ed4cdd6bb95a9c491fb65f2b7bdf9cd24a68535c/src/normed_group/NormedGroup.lean#L183">https://github.com/leanprover-community/lean-liquid/blob/ed4cdd6bb95a9c491fb65f2b7bdf9cd24a68535c/src/normed_group/NormedGroup.lean#L183</a></p>
<p>and the filled sorry is here: <a href="https://github.com/leanprover-community/lean-liquid/blob/ed4cdd6bb95a9c491fb65f2b7bdf9cd24a68535c/src/system_of_complexes/soft_truncation.lean#L43">https://github.com/leanprover-community/lean-liquid/blob/ed4cdd6bb95a9c491fb65f2b7bdf9cd24a68535c/src/system_of_complexes/soft_truncation.lean#L43</a></p>



<a name="229031342"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229031342" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229031342">(Mar 05 2021 at 21:58)</a>:</h4>
<p>oh nice! I'm about to start on</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="c">/-</span><span class="cm"></span>
<span class="cm">If this commutes</span>
<span class="cm">    A ----&gt; B ---&gt; E</span>
<span class="cm">    |       |      |</span>
<span class="cm">    |       |      |</span>
<span class="cm">   \/      \/      \/</span>
<span class="cm">    C ----&gt; D ---&gt; F</span>

<span class="cm">then so does this</span>

<span class="cm">coker (A → B) ----&gt; E</span>
<span class="cm">   |                |</span>
<span class="cm">   | coker.map      |</span>
<span class="cm">   |                |</span>
<span class="cm">   \/               \/</span>
<span class="cm">coker (C → D) ----&gt; F</span>
<span class="cm">-/</span>
<span class="kd">theorem</span> <span class="n">domino</span> <span class="o">{</span><span class="n">E</span> <span class="n">F</span> <span class="o">:</span> <span class="n">NormedGroup.</span><span class="o">{</span><span class="n">u</span><span class="o">}}{</span><span class="n">fab</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">⟶</span> <span class="n">B</span><span class="o">}</span> <span class="o">{</span><span class="n">fbd</span> <span class="o">:</span> <span class="n">B</span> <span class="bp">⟶</span> <span class="n">D</span><span class="o">}</span> <span class="o">{</span><span class="n">fac</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">⟶</span> <span class="n">C</span><span class="o">}</span> <span class="o">{</span><span class="n">fcd</span> <span class="o">:</span> <span class="n">C</span> <span class="bp">⟶</span> <span class="n">D</span><span class="o">}</span>
  <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">fab</span> <span class="bp">≫</span> <span class="n">fbd</span> <span class="bp">=</span> <span class="n">fac</span> <span class="bp">≫</span> <span class="n">fcd</span><span class="o">)</span> <span class="o">{</span><span class="n">fbe</span> <span class="o">:</span> <span class="n">B</span> <span class="bp">⟶</span> <span class="n">E</span><span class="o">}</span> <span class="o">{</span><span class="n">fdf</span> <span class="o">:</span> <span class="n">D</span> <span class="bp">⟶</span> <span class="n">F</span><span class="o">}</span> <span class="o">{</span><span class="n">fef</span> <span class="o">:</span> <span class="n">E</span> <span class="bp">⟶</span> <span class="n">F</span><span class="o">}</span>
  <span class="o">(</span><span class="n">h2</span> <span class="o">:</span> <span class="n">fbe</span> <span class="bp">≫</span> <span class="n">fef</span> <span class="bp">=</span> <span class="n">fbd</span> <span class="bp">≫</span> <span class="n">fdf</span><span class="o">)</span> <span class="o">:</span> <span class="gr">sorry</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div>



<a name="229031451"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229031451" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229031451">(Mar 05 2021 at 21:59)</a>:</h4>
<p><span class="user-mention" data-user-id="243562">@Adam Topaz</span> this is for the sorry in <code>map_comm</code>. I'm writing my own <code>soft_truncation.lean</code> in branch <code>proof_that_succ_i_equals_j</code> using a different definition of <code>cochain_complex</code>. But if it's not hard to fill in the sorrys in master's <code>cochain_complex</code> then we still don't really know which is best.</p>



<a name="229031531"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229031531" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229031531">(Mar 05 2021 at 22:00)</a>:</h4>
<p>Oh, I jsut pushed that proof too :)</p>



<a name="229031571"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229031571" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229031571">(Mar 05 2021 at 22:00)</a>:</h4>
<p>oh great!</p>



<a name="229031620"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229031620" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229031620">(Mar 05 2021 at 22:00)</a>:</h4>
<p><a href="https://github.com/leanprover-community/lean-liquid/blob/4151ab41f819db023b285bbfe202d79ce89a9022/src/normed_group/NormedGroup.lean#L183">https://github.com/leanprover-community/lean-liquid/blob/4151ab41f819db023b285bbfe202d79ce89a9022/src/normed_group/NormedGroup.lean#L183</a></p>



<a name="229031635"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229031635" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229031635">(Mar 05 2021 at 22:00)</a>:</h4>
<p>Note the comment...</p>



<a name="229031719"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229031719" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229031719">(Mar 05 2021 at 22:01)</a>:</h4>
<p>And now there are no sorry's in the soft truncation definition in Johan's branch</p>



<a name="229031994"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229031994" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229031994">(Mar 05 2021 at 22:03)</a>:</h4>
<p>Oh nice! So it works!</p>



<a name="229032006"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229032006" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229032006">(Mar 05 2021 at 22:03)</a>:</h4>
<p>Yeah, it works :)</p>



<a name="229032030"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229032030" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229032030">(Mar 05 2021 at 22:03)</a>:</h4>
<p>Err, sorry I lied.</p>



<a name="229032090"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229032090" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229032090">(Mar 05 2021 at 22:04)</a>:</h4>
<p>I didn't finish <code>soft_truncation</code>, just the inductive definitions above it</p>



<a name="229032137"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229032137" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229032137">(Mar 05 2021 at 22:04)</a>:</h4>
<p>Well, all the "data" is there at least.</p>



<a name="229032367"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229032367" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229032367">(Mar 05 2021 at 22:06)</a>:</h4>
<p>The proofs I gave for these coker lemmas are not very categorical. I'm using the fact that there are actually elements around (by using this <code>coker.\pi_surjective</code> trick)</p>



<a name="229032633"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229032633" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229032633">(Mar 05 2021 at 22:08)</a>:</h4>
<p>Oh, and I just realized that this <code>soft_truncation</code>file now has some universe-related errors at the bottom :(</p>



<a name="229032638"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229032638" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229032638">(Mar 05 2021 at 22:08)</a>:</h4>
<p>I was going to ask that you took a look at the proofs I pushed, in case you could see any shortcuts or tidying.</p>



<a name="229032733"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229032733" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229032733">(Mar 05 2021 at 22:09)</a>:</h4>
<p>Oh sure.</p>



<a name="229032929"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229032929" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229032929">(Mar 05 2021 at 22:10)</a>:</h4>
<p>I've pushed the NormedGroup stuff to master, because we'll need it whatever design decisions are made about complexes, right? I'm assuming this <code>soft_truncation</code> thing is actually important?</p>



<a name="229034573"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229034573" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229034573">(Mar 05 2021 at 22:22)</a>:</h4>
<p>I might try to refactor these with the epimorphism instance for coker.\pi that I just added. I like your proofs much more than mine, by the way!</p>



<a name="229034610"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229034610" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229034610">(Mar 05 2021 at 22:22)</a>:</h4>
<p>But somehow this argument using surjectivity of \pi should be encapsulated in the epimorphism property.</p>



<a name="229039929"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229039929" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229039929">(Mar 05 2021 at 23:10)</a>:</h4>
<p>OK so <a href="https://github.com/leanprover-community/lean-liquid/blob/proof_that_succ_i_equals_j/src/system_of_complexes/soft_truncation_with_h_proofs.lean">here</a> is what the soft_truncation looks like with <code>d {i} {j} (h : Succ i = j)</code>. I was really surprised by the equation compiler -- I was expecting to have far more cases to deal with. It's sorry-free but to go any further would require changing more definitions -- I've already written my own cochain_complex to get this far.</p>



<a name="229042497"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229042497" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229042497">(Mar 05 2021 at 23:34)</a>:</h4>
<p><span class="user-mention" data-user-id="243562">@Adam Topaz</span> I filled in two sorries in the jmc-complex branch because the proofs were the same as the ones in my branch -- <code>tidy</code> found them for me and then I tidied them up. The last two sorrys in the file are I believe unprovable right now because as far as I can see there's nothing stopping a general complex misbehaving in negative degrees, which will stop it being &lt;=k-exact in degrees &lt;= m but won't stop the truncation being exact.</p>



<a name="229042673"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229042673" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229042673">(Mar 05 2021 at 23:36)</a>:</h4>
<p>Yeah I think you're right. I guess the backward implication should be true (and the one we care about?)</p>



<a name="229042716"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229042716" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229042716">(Mar 05 2021 at 23:36)</a>:</h4>
<p>Does <code>tidy</code> solve <code>soft_truncation'_d_neg</code>?</p>



<a name="229042724"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229042724" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229042724">(Mar 05 2021 at 23:36)</a>:</h4>
<p>Or even <code>rfl</code>?</p>



<a name="229043800"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229043800" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229043800">(Mar 05 2021 at 23:48)</a>:</h4>
<p>No, the definition of these things is by cases on the constructor for int so nothing unfolds until you have done cases on the int. Surely you need to start with something like this:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">soft_truncation'_d_neg</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="bp">≥</span><span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">i</span> <span class="n">j</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">hi</span> <span class="o">:</span> <span class="n">i</span> <span class="bp">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">((</span><span class="n">soft_truncation'.obj</span> <span class="n">C</span><span class="o">)</span><span class="bp">.</span><span class="n">d</span> <span class="n">i</span> <span class="n">j</span> <span class="o">:</span> <span class="o">(</span><span class="n">soft_truncation'.obj</span> <span class="n">C</span><span class="o">)</span> <span class="n">c</span> <span class="n">i</span> <span class="bp">⟶</span> <span class="n">_</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">cases</span> <span class="n">i</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">exfalso</span><span class="o">,</span> <span class="n">simp</span> <span class="n">at</span> <span class="n">hi</span><span class="o">,</span> <span class="n">linarith</span> <span class="o">},</span>
  <span class="gr">sorry</span>
<span class="kd">end</span>
</code></pre></div>



<a name="229044512"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229044512" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229044512">(Mar 05 2021 at 23:56)</a>:</h4>
<p>Oh, I see what's going on now. Yes it's more complicated since there's both an <code>i</code> and <code>j</code>involved and <code>j</code> can very well be positive.</p>



<a name="229044878"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229044878" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229044878">(Mar 06 2021 at 00:00)</a>:</h4>
<p>I don't know anything about these systems of complexes, I didn't use them today.</p>



<a name="229045141"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229045141" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229045141">(Mar 06 2021 at 00:02)</a>:</h4>
<p>If I recall correctly, d here is defined as the usual d if j is i+1 and 0 otherwise.</p>



<a name="229046054"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229046054" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229046054">(Mar 06 2021 at 00:12)</a>:</h4>
<p>I couldn't find the exact form of that definition so I gave up :-)</p>



<a name="229046104"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229046104" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229046104">(Mar 06 2021 at 00:13)</a>:</h4>
<p>I wanted to definitionally unwind everything but in the end I got lost trying to chase everything back</p>



<a name="229046608"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229046608" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229046608">(Mar 06 2021 at 00:18)</a>:</h4>
<p>This is the definition:<br>
<a href="https://github.com/leanprover-community/lean-liquid/blob/4e4f7d630e53a3f4ea08d6ef1359e5ecd2cbcece/src/system_of_complexes/complex.lean#L137">https://github.com/leanprover-community/lean-liquid/blob/4e4f7d630e53a3f4ea08d6ef1359e5ecd2cbcece/src/system_of_complexes/complex.lean#L137</a></p>



<a name="229046642"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229046642" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229046642">(Mar 06 2021 at 00:19)</a>:</h4>
<p>But it looks a bit complicated because Johan made one definition for both chain complexes and cochain complexes with this <code>coherent_indices</code> gadget</p>



<a name="229070156"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229070156" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229070156">(Mar 06 2021 at 06:01)</a>:</h4>
<p>Thanks a lot for your help.</p>



<a name="229070161"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229070161" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229070161">(Mar 06 2021 at 06:01)</a>:</h4>
<p>As far as I can see, everything works again, apart from <code>normed_snake.lean</code></p>



<a name="229070208"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229070208" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229070208">(Mar 06 2021 at 06:02)</a>:</h4>
<p>I'm getting some crazy timeouts there. We should probably split that proof into 3 or 4 pieces, if possible.</p>



<a name="229081621"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229081621" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229081621">(Mar 06 2021 at 09:07)</a>:</h4>
<p>Everything compiles again!</p>



<a name="229081624"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229081624" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229081624">(Mar 06 2021 at 09:07)</a>:</h4>
<p>I pushed to <code>jmc-complex</code></p>



<a name="229082313"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229082313" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229082313">(Mar 06 2021 at 09:18)</a>:</h4>
<p>I just want to remark that the coker stuff I pushed to master might result in a rather trivial conflict with that branch because I cut and pasted a lemma about maps between cokers commuting and gave it a docstring</p>



<a name="229082317"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229082317" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229082317">(Mar 06 2021 at 09:18)</a>:</h4>
<p>I already merged it</p>



<a name="229082355"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229082355" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229082355">(Mar 06 2021 at 09:19)</a>:</h4>
<p>I'm still very unclear about what the question is, or even if there is a question. It seems that both the jmc-conplex branch and the proof branch work fine</p>



<a name="229262250"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229262250" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229262250">(Mar 08 2021 at 08:15)</a>:</h4>
<p><span class="user-mention" data-user-id="111080">@Floris van Doorn</span> I would be very interested in your feedback on <a href="https://github.com/leanprover-community/lean-liquid/blob/jmc-complex/src/system_of_complexes/complex.lean">https://github.com/leanprover-community/lean-liquid/blob/jmc-complex/src/system_of_complexes/complex.lean</a></p>



<a name="229331124"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229331124" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229331124">(Mar 08 2021 at 16:35)</a>:</h4>
<p>I notice that in my complexes I had the following condition for d^2=0: I took as inputs i, j, k, a proof hij that j=succ(i) and a proof hjk that k=succ(j), and then I just asked that d hij o d hjk = 0, so I avoided eq_to_hom completely. Your differential objects need them. I am nervous about differential_object.differential because you don't have the flexibility to do this kind of thing.</p>



<a name="229331439"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229331439" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229331439">(Mar 08 2021 at 16:37)</a>:</h4>
<p>On a related matter, I would like to have the following statement: a short exact sequence of complexes gives us a long exact sequence of cohomology, for R-modules. This is needed for flatness, it's needed for Amelia's MSc, and some variant is presumably needed for this project. Is the issue that we are still trying to figure out how best to state this?</p>



<a name="229331580"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229331580" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229331580">(Mar 08 2021 at 16:38)</a>:</h4>
<p>Didn't Amelia (or another student of yours) define trinagulated categories? This might be the way to go.</p>



<a name="229331756"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229331756" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229331756">(Mar 08 2021 at 16:39)</a>:</h4>
<p>Aah! Reading further ahead I see that your <code>coherent_indices</code> trick avoids the problem by  asking for a proof that i = succ j, so I am much happier :-) Yes, someone else I think even made a PR for triangles in a category!</p>



<a name="229331941"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229331941" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229331941">(Mar 08 2021 at 16:40)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/6539">#6539</a> -- this is Luke's coursework for my course.</p>



<a name="229333289"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229333289" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229333289">(Mar 08 2021 at 16:48)</a>:</h4>
<p>It should be fairly straightforward to define the homotopy category of chain complexes, and that's trinagulated.</p>



<a name="229333340"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229333340" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229333340">(Mar 08 2021 at 16:48)</a>:</h4>
<p>(once we decide on the "correct" definition of chain complexes, of course!)</p>



<a name="229338958"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229338958" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229338958">(Mar 08 2021 at 17:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt/near/229331124">said</a>:</p>
<blockquote>
<p>I notice that in my complexes I had the following condition for d^2=0: I took as inputs i, j, k, a proof hij that j=succ(i) and a proof hjk that k=succ(j), and then I just asked that d hij o d hjk = 0, so I avoided eq_to_hom completely. Your differential objects need them. I am nervous about differential_object.differential because you don't have the flexibility to do this kind of thing.</p>
</blockquote>
<p>I agree that we might want to have some other constructors that give more flexibility, specially for <code>chain_complex</code> and <code>cochain_complex</code>.</p>



<a name="229339040"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229339040" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229339040">(Mar 08 2021 at 17:21)</a>:</h4>
<p>This definition is made in such a way that those two specializations have a common backend, which allows us to prove things just once.</p>



<a name="229339078"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229339078" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229339078">(Mar 08 2021 at 17:22)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt/near/229331941">said</a>:</p>
<blockquote>
<p><a href="https://github.com/leanprover-community/mathlib/issues/6539">#6539</a> -- this is Luke's coursework for my course.</p>
</blockquote>
<p>Wow, this is cool. Let's review this and build upon it!</p>



<a name="229377489"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229377489" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229377489">(Mar 08 2021 at 21:30)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> I'm worried about the explicit mention of <code>eq_to_hom</code> in the definition of <code>differential_object</code>. I see that you have to do quite some rewriting with properties about <code>eq_to_hom</code>, and I think that will get annoying quickly. Oh, but as you said, you could write constructors for <code>differential_object</code> specific to <code>chain_complex</code> or <code>cochain_complex</code>.</p>
<p>You will also have to deal with the fact that e.g. <code>differential_object ℤ (+1) 0</code> and <code>differential_object ℤ 0 (-1)</code> are isomorphic but not equal. But I think you will have to deal with that in any definition. Even if a definition doesn't really see the distinction, like in Kevin's definition in his example earlier this thread, or in my Lean 2 definition, you still have to deal with it. You might start with a family of maps that naturally go from <code>X n -&gt; X (n-1)</code> or another family of maps that is defined so that it has type <code>X (n+1) -&gt; X n</code>, and you have to put them both in the definition of <code>differential_object</code>. In Lean 2, I did this my defining different kind of constructors, depending on the type of the maps (<a href="https://github.com/cmu-phil/Spectral/blob/master/algebra/graded.hlean#L106-L122">https://github.com/cmu-phil/Spectral/blob/master/algebra/graded.hlean#L106-L122</a>).</p>
<p>I like the trick you do with <code>coherent_indices</code>, that might be a nice way to deal with the fact that you don't have to provide proofs of equality every time (at least, in the statement of theorems).</p>
<p>This looks like a fine way of doing it, and something we can build enough bells and whistles (constructors, computation rules) around that makes working with it possible. I also like Kevin's definition in this thread, but it might be nicer to work with the <code>coherent_indices</code> predicate, so that we don't have to apply each differential to an equality.</p>
<p>Question: is there a reason why you things in terms of <code>differential_object'</code> instead of the more general <code>differential_object</code> (without a prime)? That last one is more general, and would be useful because it also captures the notion of graded objects / graded morphism of degrees other than +1/-1, right?</p>



<a name="229379702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229379702" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229379702">(Mar 08 2021 at 21:46)</a>:</h4>
<p><span class="user-mention" data-user-id="111080">@Floris van Doorn</span> <br>
Right now mathematically a major thing we are missing is complexes of R-modules indexed by the integers. If we have a working theory for these, and also for the theory of complexes of R-modules indexed by the naturals, and also for the theory of complexes of R-modules indexed by <code>fin 3 x int</code> then we will be able to do a lot of new stuff, starting with the statement of the long exact sequence of cohomology associated to a short exact sequence of complexes. More generally we would like all these for abelian categories, but I am unclear about whether this is too much to ask right now because diagram chasing (i.e. the actual proof) in a non-concrete category is hard right now because we don't have this Freyd representation theorem saying that every abelian category is a full subcategory of an appropriate concrete category (usually R-modules or Ab) and apparently we lack the tactics/infrastructure to work directly with the axioms of an abelian category.</p>



<a name="229405864"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229405864" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229405864">(Mar 09 2021 at 01:17)</a>:</h4>
<p>Regarding working directly with an abelian category, it might be worth having at look at <a href="https://github.com/leanprover-community/mathlib/issues/6308">#6308</a> (constructing the normalized Moore complex from a simplicial object in an abelian category). It works with intersections of kernels of a bunch of maps, and I think is fairly ergonomic. Of course it is not an example of a diagram-chase argument.</p>



<a name="229424805"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229424805" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229424805">(Mar 09 2021 at 05:35)</a>:</h4>
<p><span class="user-mention" data-user-id="111080">@Floris van Doorn</span> Thanks a lot for all the feedback. Regarding the final question: I didn't see how to generalise to <code>differential_object</code>, so I worked with <code>differential_object'</code> instead.</p>



<a name="229424856"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229424856" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229424856">(Mar 09 2021 at 05:36)</a>:</h4>
<p>I'm thinking about the following renames:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">differential_object</span>  <span class="bp">-&gt;</span> <span class="n">predifferential_object</span>
<span class="n">differential_object'</span> <span class="bp">-&gt;</span> <span class="n">differential_object</span>
</code></pre></div>



<a name="229430544"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229430544" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229430544">(Mar 09 2021 at 06:52)</a>:</h4>
<p>How do people feel about merging this branch into master?</p>



<a name="229430580"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229430580" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229430580">(Mar 09 2021 at 06:53)</a>:</h4>
<p>I personally think that the experiment is 100% over, but on the other hand, further experimentation can be done on master</p>



<a name="229430592"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229430592" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229430592">(Mar 09 2021 at 06:53)</a>:</h4>
<p>And I don't really want to start making progress on 9.6 on this branch, because that's not the purpose of this branch</p>



<a name="229431043"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229431043" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229431043">(Mar 09 2021 at 06:59)</a>:</h4>
<p>If you're happy with it, let's merge. We can go on forever coming up with new tests or alternative ways of doing things. The big question with any definition is "is it possible to make enough basic API for mathematicians to be able to take over?" and once you've found a set-up for which the answer is "yes", this will do.</p>



<a name="229431493"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229431493" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229431493">(Mar 09 2021 at 07:04)</a>:</h4>
<p>Ok, I merged the branch</p>



<a name="229431500"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229431500" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229431500">(Mar 09 2021 at 07:05)</a>:</h4>
<p>So <code>jmc-complex</code> is now officially EOL</p>



<a name="229447956"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229447956" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229447956">(Mar 09 2021 at 09:36)</a>:</h4>
<p>As things go... after merging I realised what the <em>correct</em> <span aria-label="tm" class="emoji emoji-2122" role="img" title="tm">:tm:</span> definition is.</p>



<a name="229448225"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229448225" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229448225">(Mar 09 2021 at 09:39)</a>:</h4>
<p>I claim that this is the underlying structure that we want to prove a lot of things about:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">structure</span> <span class="n">differential_object</span> <span class="o">(</span><span class="n">ι</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">V</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">category</span> <span class="n">V</span><span class="o">]</span> <span class="o">[</span><span class="n">has_zero_morphisms</span> <span class="n">V</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">ι</span> <span class="bp">→</span> <span class="n">V</span><span class="o">)</span>
<span class="o">(</span><span class="n">d</span> <span class="o">:</span> <span class="bp">Π</span> <span class="n">i</span> <span class="n">j</span><span class="o">,</span> <span class="n">X</span> <span class="n">i</span> <span class="bp">⟶</span> <span class="n">X</span> <span class="n">j</span><span class="o">)</span>
<span class="o">(</span><span class="n">d_comp_d</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">i</span> <span class="n">j</span> <span class="n">k</span><span class="o">,</span> <span class="n">d</span> <span class="n">i</span> <span class="n">j</span> <span class="bp">≫</span> <span class="n">d</span> <span class="n">j</span> <span class="n">k</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span>
</code></pre></div>



<a name="229448323"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229448323" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229448323">(Mar 09 2021 at 09:40)</a>:</h4>
<p>Difference with the previous def:</p>
<ul>
<li>no mention of <code>S0</code> or <code>S1</code></li>
<li>no <code>eq_to_hom</code></li>
<li>this <code>d</code> can be used immediately, no sugar on top</li>
</ul>



<a name="229448438"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229448438" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229448438">(Mar 09 2021 at 09:40)</a>:</h4>
<p>This even allows us to use <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">Z</mi><mo>×</mo><mi mathvariant="double-struck">Z</mi></mrow><annotation encoding="application/x-tex">\Z \times \Z</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.77222em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathbb">Z</span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord"><span class="mord mathbb">Z</span></span></span></span></span> as indexing object, and get double complexes out of it.</p>



<a name="229448467"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229448467" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229448467">(Mar 09 2021 at 09:40)</a>:</h4>
<p>No mention of <code>succ</code> or <code>pred</code> or whatever</p>



<a name="229448504"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229448504" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229448504">(Mar 09 2021 at 09:41)</a>:</h4>
<p>Ooh, wait, I retract the comment about double complexes</p>



<a name="229448525"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229448525" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229448525">(Mar 09 2021 at 09:41)</a>:</h4>
<p>Because <code>d_comp_d</code> is false there</p>



<a name="229448533"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229448533" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229448533">(Mar 09 2021 at 09:41)</a>:</h4>
<p>So maybe I will remove that axiom!</p>



<a name="229448568"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229448568" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229448568">(Mar 09 2021 at 09:41)</a>:</h4>
<p>We can add it on top later, when we specialize to subcategories of (co)chain complexes etc</p>



<a name="229450714"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229450714" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229450714">(Mar 09 2021 at 09:58)</a>:</h4>
<p>If instead you use</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">structure</span> <span class="n">differential_object</span> <span class="o">{</span><span class="n">ι</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">(</span><span class="n">V</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">ι</span> <span class="bp">→</span> <span class="n">V</span><span class="o">)</span> <span class="o">[</span><span class="n">category</span> <span class="n">V</span><span class="o">]</span> <span class="o">[</span><span class="n">has_zero_morphisms</span> <span class="n">V</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">d</span> <span class="o">:</span> <span class="bp">Π</span> <span class="n">i</span> <span class="n">j</span><span class="o">,</span> <span class="n">X</span> <span class="n">i</span> <span class="bp">⟶</span> <span class="n">X</span> <span class="n">j</span><span class="o">)</span>
<span class="o">(</span><span class="n">d_comp_d</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">i</span> <span class="n">j</span> <span class="n">k</span><span class="o">,</span> <span class="n">d</span> <span class="n">i</span> <span class="n">j</span> <span class="bp">≫</span> <span class="n">d</span> <span class="n">j</span> <span class="n">k</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span>
</code></pre></div>
<p>then a double complex would share the same <code>V</code> and <code>X</code>, but it would have two <code>d</code>s, the horizontal one and the vertical one, and each of these would satisfy the <code>d_comp_d</code> axiom.</p>



<a name="229451062"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229451062" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229451062">(Mar 09 2021 at 10:01)</a>:</h4>
<p><span class="user-mention" data-user-id="110050">@Sebastien Gouezel</span> that is true, but then it is unbundled. Not sure what's best</p>



<a name="229459100"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229459100" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229459100">(Mar 09 2021 at 11:07)</a>:</h4>
<p>Right. I'd say it's probably best to do bundled, because things like spectral sequences will be much easier like that.</p>



<a name="229478689"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229478689" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229478689">(Mar 09 2021 at 13:47)</a>:</h4>
<p>I was just considering the Hochschild-Serre spectral sequence when preparing my workshop for this week, which is going to be on group cohomology. I honestly think that group cohomology is a wonderful test case for complexes (and right now I am even wondering if it all works for monoid cohomology). I know exactly how to set it up having supervised two projects in the area and learnt from my mistakes. I will be doing the "low degree" version on Thursday which does not need complexes, but the "general degree" version does and it seems to me like a very natural goal. When my talk is done I might spend some time making one of those GitHub projects in order to flesh out my ideas.</p>



<a name="229479581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229479581" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229479581">(Mar 09 2021 at 13:53)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> Will you be broadcasting the workshop? On Discord?</p>



<a name="229484193"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229484193" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229484193">(Mar 09 2021 at 14:23)</a>:</h4>
<p>Yes, it's 1600-1800 London time on the Discord</p>



<a name="229544889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229544889" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229544889">(Mar 09 2021 at 20:10)</a>:</h4>
<p>I just merged another refactor of complexes. Hopefully this doesn't establish a pattern...</p>



<a name="229544948"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/229544948" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#229544948">(Mar 09 2021 at 20:11)</a>:</h4>
<p>But this time, there are very few <code>eq_to_hom</code>s, even under the hood.</p>



<a name="230309420"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/230309420" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#230309420">(Mar 15 2021 at 08:28)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> <span class="user-mention" data-user-id="111080">@Floris van Doorn</span> If you could take another look, that would be great. If you like this design, I think we should move it to mathlib.</p>



<a name="230946636"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/230946636" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#230946636">(Mar 18 2021 at 22:21)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span>,</p>
<p>Let me see if I have this right. In this definition of <code>differential_object</code>, we have a <code>d i j</code> from <code>X i</code> to <code>X j</code>, for every <code>i j</code>. Moreover we ask immediately that <code>d i j \gg d j k = d i k</code>. </p>
<p>(First of all, it definitely needs a different name: <code>differential_object</code> is a standard name in real maths.)</p>
<p>This gadget is almost, but not quite, a functor from <code>indiscrete I</code> to the target category, where <code>indiscrete</code> is a not-yet-existing type synonym that puts a single morphism between every pair of objects. The reason it isn't a functor is that we don't want to insist that <code>d i i</code> is the identity. So it's only a <code>semifunctor</code> between <code>semicategory</code>s.</p>
<p>As a second step, when we want to define <code>chain_complex</code> or <code>cochain_complex</code> (either <code>nat</code> or <code>int</code> indexed), we pass to the full subcategory of <code>differential_object</code> where some specified collection of the <code>d i j</code> are zero (e.g. only if <code>j = i + 1</code> can it be nonzero).</p>
<p>I don't really understand what <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> has been doing on <code>ses_to_les</code>. Showing that <code>differential_object</code> has equalizers or images or something doesn't seem to serve much purpose: because you'll still need to do separate work to build these again in the subcategory; possibly the main bit of the work?</p>
<p>(That said, I suspect that a big chunk of the theory of limits works perfectly well for semicategories, and it even seems plausible that if <code>V</code> has limits, semifunctors <code>J \func V</code> does too...?)</p>
<p>It seemed like there was a proposal to define the <code>homology</code> functor right at the level of <code>differential_object</code>, but I don't see what the intention is here. You can talk about the intersections of all the kernels of <code>d i j</code> as <code>j</code> varies, and the union of all the images of <code>d k i</code> as <code>k</code> varies, but the image union won't sit in the kernel intersection.</p>
<p>Help?</p>



<a name="230949993"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/230949993" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#230949993">(Mar 18 2021 at 22:59)</a>:</h4>
<p>I don't think d i j &gt;&gt; d j k is defined to be anything initially. Very early on we define it to be 0. The idea is that all d i j if j isn't i + 1 are supposed to be 0 (including d i i).</p>



<a name="230950186"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/230950186" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#230950186">(Mar 18 2021 at 23:00)</a>:</h4>
<p>In an abelian category you could talk about the join of all the images. But I'm not sure this is the way to go. I think I've understood all this a bit better now -- I started a thread in #maths about it</p>



<a name="230950788"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/230950788" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#230950788">(Mar 18 2021 at 23:07)</a>:</h4>
<p>Oh, okay, I woke up confused. Yes, I agree the stuff about semifunctoriality is not what Johan had in mind, and is not in the definition.</p>



<a name="230951887"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/230951887" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#230951887">(Mar 18 2021 at 23:18)</a>:</h4>
<p>I don't know whether to continue here on in #maths. I agree that my stuff on the branch is problematic, I had not realised this issue about how we might have to do a whole bunch of stuff again but now I fear you're right.</p>



<a name="230982975"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/230982975" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#230982975">(Mar 19 2021 at 06:53)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> I'm open to changing things that don't work well. In particular, I'm very much in favour of changing the name.</p>



<a name="230982985"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/230982985" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#230982985">(Mar 19 2021 at 06:54)</a>:</h4>
<p>I think that it's important that <code>d i i</code> is not the identity.</p>



<a name="230983038"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/230983038" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#230983038">(Mar 19 2021 at 06:54)</a>:</h4>
<p>And it would be great if we can model both chain and cochain complexes together, somehow.</p>



<a name="230983065"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/230983065" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#230983065">(Mar 19 2021 at 06:55)</a>:</h4>
<p>Yes, sorry, me saying <code>d i i</code> should be the identity was me being very confused.</p>



<a name="230983160"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/230983160" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#230983160">(Mar 19 2021 at 06:57)</a>:</h4>
<p>Do you have a suggestion for a new name?</p>



<a name="230983498"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/230983498" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#230983498">(Mar 19 2021 at 07:02)</a>:</h4>
<p>I was tempted by something like <code>pre_dgo</code>. It's not yet a <code>dgo</code> = "differential graded object", because the differential and the grading don't see each other.</p>



<a name="230983538"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/230983538" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#230983538">(Mar 19 2021 at 07:03)</a>:</h4>
<p>Another thing I don't know is how to define the boundary map in a non concrete setting. You have four short exact sequences An-&gt; Bn -&gt; Cn (horizontal) in a complex (vertical, 0&lt;= n&lt;= 3) and you have something in the Ker/im subquotient of C2. Now lift to B2 by instantiating an exists, push to B3 and lift to A3 instantiating another one. For R-mod the epis are surjections and you can just do it with choice. I'm assuming there's a way to do it from the category axioms but I don't see it yet</p>



<a name="230983617"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/230983617" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#230983617">(Mar 19 2021 at 07:04)</a>:</h4>
<blockquote>
<p><code>pre_dgo</code></p>
</blockquote>
<p>sounds like just the right level of obfuscation for these obscure objects (-;</p>



<a name="230983645"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/230983645" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#230983645">(Mar 19 2021 at 07:05)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> <code>s/situations/surjections/</code> auto-complete-fail?</p>



<a name="230983653"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/230983653" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#230983653">(Mar 19 2021 at 07:05)</a>:</h4>
<p>Graded object -- in all sensible cases the d map respects the grading if you allow a twist of your index set</p>



<a name="230983894"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/230983894" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#230983894">(Mar 19 2021 at 07:09)</a>:</h4>
<p>If we go for this d^2=0 model with one d then we're ruling out double complexes anyway. There we need two d 's and the axiom that they commute...wait, that isn't even true :-( a sensible d1d2 from A i j to B i+1 j+1 isn'ta silly d2d1</p>



<a name="230983897"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/230983897" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#230983897">(Mar 19 2021 at 07:09)</a>:</h4>
<p>This sounds like exactly the sort of thing Markus gave us pseudoelements to do</p>



<a name="231024114"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/231024114" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#231024114">(Mar 19 2021 at 13:43)</a>:</h4>
<p>I thought that pseudoelements were just homs from a random object? The problem is that Z/4 -&gt; Z/2 is a surjection in the category of abelian groups but this unfortunately doesn't mean that Hom(X,Z/4) -&gt; Hom(X,Z/2) is a surjection, e.g. if X=Z/2 then this map is the zero map and doesn't hit the identity. I'm just asking how to state the snake lemma in an arbitrary abelian category basically. I don't see how to define the boundary map from ker(f3) to coker(f1) in a non-concrete setting.</p>



<a name="231024275"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/231024275" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#231024275">(Mar 19 2021 at 13:44)</a>:</h4>
<p>I think using monos and epis</p>



<a name="231024358"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/231024358" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#231024358">(Mar 19 2021 at 13:45)</a>:</h4>
<p>And for the boundary map, yeah, map into the diagram from some random object and use the mono/epi property of the morphisms involved</p>



<a name="231024528"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/231024528" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#231024528">(Mar 19 2021 at 13:46)</a>:</h4>
<p><span class="user-mention" data-user-id="246273">@Bhavik Mehta</span> maybe we should formalize the Freyd embedding theorem?</p>



<a name="231024652"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/231024652" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#231024652">(Mar 19 2021 at 13:46)</a>:</h4>
<p>but epi doesn't imply surjection on hom sets -- if A -&gt; B is epi then Hom(X,A) -&gt; hom(X,B) might not be a surjection. I don't see how to start with this boundary map right now.</p>



<a name="231024808"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/231024808" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#231024808">(Mar 19 2021 at 13:48)</a>:</h4>
<p>I'm just thinking of the usual snake lemma, no Hom(X,Y) involved there.</p>



<a name="231024905"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/231024905" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#231024905">(Mar 19 2021 at 13:48)</a>:</h4>
<p>I need to define a map from ker(f3) to coker(f1). How do I even start? This is what I'm missing</p>



<a name="231024957"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/231024957" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#231024957">(Mar 19 2021 at 13:48)</a>:</h4>
<p>Take <code>ker (f3)</code> to be the "test object" (the object you're mapping from)</p>



<a name="231025010"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/231025010" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#231025010">(Mar 19 2021 at 13:49)</a>:</h4>
<p>Kevin I think you're thinking of generalised elements rather than pseudoelements</p>



<a name="231025055"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/231025055" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#231025055">(Mar 19 2021 at 13:49)</a>:</h4>
<p>Then chase around what happens to the identity morphism on <code>ker f3</code>.</p>



<a name="231025071"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/231025071" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#231025071">(Mar 19 2021 at 13:49)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/category_theory.abelian.pseudoelements">docs#category_theory.abelian.pseudoelements</a></p>



<a name="231025113"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/231025113" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#231025113">(Mar 19 2021 at 13:49)</a>:</h4>
<p>Also if <span class="user-mention" data-user-id="260921">@Markus Himmel</span> is about, I think he could give much more helpful answers</p>



<a name="231025195"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/231025195" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#231025195">(Mar 19 2021 at 13:50)</a>:</h4>
<p><span class="user-mention silent" data-user-id="243562">Adam Topaz</span> <a href="#narrow/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt/near/231025055">said</a>:</p>
<blockquote>
<p>Then chase around what happens to the identity morphism on <code>ker f3</code>.</p>
</blockquote>
<p>I don't understand what this means. I don't know the "initial move" right now.</p>



<a name="231025277"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/231025277" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#231025277">(Mar 19 2021 at 13:50)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="sd">/-- An epimorphism is surjective on pseudoelements. -/</span>
<span class="kd">theorem</span> <span class="n">pseudo_surjective_of_epi</span> <span class="o">{</span><span class="n">P</span> <span class="n">Q</span> <span class="o">:</span> <span class="n">C</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">P</span> <span class="bp">⟶</span> <span class="n">Q</span><span class="o">)</span> <span class="o">[</span><span class="n">epi</span> <span class="n">f</span><span class="o">]</span> <span class="o">:</span> <span class="n">function.surjective</span> <span class="n">f</span> <span class="o">:=</span>
</code></pre></div>
<p>What is this black magic?</p>



<a name="231025322"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/231025322" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#231025322">(Mar 19 2021 at 13:51)</a>:</h4>
<p>That's the definition of epi :)</p>



<a name="231025476"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/231025476" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#231025476">(Mar 19 2021 at 13:52)</a>:</h4>
<p>There's a coe from morphisms to functions on pseudoelements, and that function is surj iff the morphism is epi</p>



<a name="231025588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/231025588" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Peter Scholze <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#231025588">(Mar 19 2021 at 13:53)</a>:</h4>
<p>I don't know what pseudoelements are, but one way to think about this is that you take <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">H</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">m</mi></mrow><annotation encoding="application/x-tex">\mathrm{Hom}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathrm">H</span><span class="mord mathrm">o</span><span class="mord mathrm">m</span></span></span></span></span>'s from some test object <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span></span>, but you allow yourself to replace <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span></span> by anything mapping surjectively onto it, at will</p>



<a name="231025621"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/231025621" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#231025621">(Mar 19 2021 at 13:53)</a>:</h4>
<p>Yes, this seems to be the pseudoelement trick</p>



<a name="231025744"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/231025744" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Peter Scholze <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#231025744">(Mar 19 2021 at 13:54)</a>:</h4>
<p>(Formally, there are enough projective objects in the pro-category, but this is surely overkill)</p>



<a name="231025764"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/231025764" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#231025764">(Mar 19 2021 at 13:54)</a>:</h4>
<p>so I just replace ker(f3) by ker(f2) for example, which maps to B2.</p>



<a name="231026385"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/231026385" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#231026385">(Mar 19 2021 at 13:58)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">A</span> <span class="n">classic</span> <span class="n">application</span> <span class="n">of</span> <span class="n">pseudoelements</span> <span class="n">are</span> <span class="n">diagram</span> <span class="n">lemmas</span> <span class="n">like</span> <span class="n">the</span> <span class="n">four</span> <span class="kd">lemma</span> <span class="n">or</span> <span class="n">the</span> <span class="n">snake</span> <span class="kd">lemma</span><span class="bp">.</span>
</code></pre></div>
<p><span class="user-mention" data-user-id="246273">@Bhavik Mehta</span> do you know if Markus did the snake lemma? I think I need it for some class of categories e.g. abelian categories, I mean, I need it for R-modules, but I think Johan already hacked out a proof of that a long time ago -- I would rather prove it in an abelian category (once I've figured out how to define the boundary map!)</p>



<a name="231026567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/231026567" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Markus Himmel <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#231026567">(Mar 19 2021 at 14:00)</a>:</h4>
<p>I did the snake lemma, but it didn't make it into mathlib</p>



<a name="231026599"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/231026599" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#231026599">(Mar 19 2021 at 14:00)</a>:</h4>
<p>Boundary map: I end up with some object A which surjects onto ker(f3) and also maps to coker(f1). I guess now I need to prove some results which says that something factors through something but I see how to do it now.</p>



<a name="231026637"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/231026637" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#231026637">(Mar 19 2021 at 14:00)</a>:</h4>
<p>Where is it? I might be able to mathlib it up.</p>



<a name="231026706"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/231026706" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#231026706">(Mar 19 2021 at 14:00)</a>:</h4>
<p>I've just this minute understood how to state it :-)</p>



<a name="231026750"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/231026750" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#231026750">(Mar 19 2021 at 14:01)</a>:</h4>
<p>Kevin, if <code>X</code> is the top-right element in the diagram for the snake lemma, and <code>f3</code>is the map down from it, you probably want the map <code>ker(f3) -&gt; X</code> as your "test object"</p>



<a name="231026805"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/231026805" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#231026805">(Mar 19 2021 at 14:01)</a>:</h4>
<p>Does zulip do tikz?</p>



<a name="231026815"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/231026815" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#231026815">(Mar 19 2021 at 14:01)</a>:</h4>
<p>yes I see how to do it all now</p>



<a name="231026821"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/231026821" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Markus Himmel <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#231026821">(Mar 19 2021 at 14:01)</a>:</h4>
<p>It's <a href="https://github.com/TwoFX/lean-homological-algebra/blob/lean-3.8.0/src/diagram_lemmas/snake_diagram.lean">here</a> but it's far from pretty</p>



<a name="231026876"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/231026876" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#231026876">(Mar 19 2021 at 14:01)</a>:</h4>
<p><span class="tex-error">\begin{tikzcd}
A \ar[r] &amp; B
\end{tikzcd}</span></p>



<a name="231026988"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/231026988" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#231026988">(Mar 19 2021 at 14:02)</a>:</h4>
<p>It's A1 -&gt; B1 -&gt; C1 above A2 -&gt; B2 -&gt; C2 with maps f1, f2, f3 :-)</p>



<a name="231029988"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/231029988" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#231029988">(Mar 19 2021 at 14:22)</a>:</h4>
<p><span class="user-mention silent" data-user-id="243562">Adam Topaz</span> <a href="#narrow/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt/near/231024528">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="246273">Bhavik Mehta</span> maybe we should formalize the Freyd embedding theorem?</p>
</blockquote>
<p>About this, I remember <span class="user-mention" data-user-id="260921">@Markus Himmel</span> saying this was too hard at the time, but now that there's renewed interest and need in this, do you think it's feasible if a bunch of us work on it? If so, do you have an idea of what approaches would be cleanest?</p>



<a name="231030143"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/231030143" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Peter Scholze <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#231030143">(Mar 19 2021 at 14:23)</a>:</h4>
<p>Actually, would this even help in the case of the snake lemma? You wouldn't want the <em>construction of the map</em> to depend on an embedding into a category of modules</p>



<a name="231030260"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/231030260" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Peter Scholze <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#231030260">(Mar 19 2021 at 14:24)</a>:</h4>
<p>And I think the construction of the map should be the most tedious part of this</p>



<a name="231044188"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/231044188" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#231044188">(Mar 19 2021 at 15:47)</a>:</h4>
<p>The pseudoelement construction of the map goes like this: if 0 -&gt; A1 -&gt; B1 -&gt; C1 -&gt; 0 and same for 2 and we have maps down fA, fB, fC, then the crucial definition is X := B1 x_{B2} A2, which maps to C1 and to coker(fA), and one checks that X -&gt; C1 is surjective and its kernel is mapped to zero in coker(fA), so X induces a map C1 -&gt; coker(fA).</p>



<a name="231045157"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/231045157" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Peter Scholze <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#231045157">(Mar 19 2021 at 15:53)</a>:</h4>
<p>I think you should also take a fibre product over C_1 with the kernel of fC?</p>



<a name="231045705"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/231045705" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#231045705">(Mar 19 2021 at 15:56)</a>:</h4>
<p>sorry you're right, I switched notation between pen and typing :-/ X maps to ker(C1) is surjective, but to get the map you should pull back again.</p>



<a name="238902838"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/238902838" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#238902838">(May 15 2021 at 14:45)</a>:</h4>
<p>New style complexes and homotopies are in mathlib!!!</p>



<a name="238909212"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/238909212" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#238909212">(May 15 2021 at 16:29)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> I think that maybe the <code>comm'</code> field in <code>hom</code> is stated in the wrong direction compared to <code>nat_trans.naturality</code>. Because now we need</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">mul_one_iso</span> <span class="o">:</span> <span class="o">(</span><span class="n">mul</span> <span class="mi">1</span><span class="o">)</span><span class="bp">.</span><span class="n">obj</span> <span class="n">BD</span> <span class="bp">≅</span> <span class="n">BD</span> <span class="o">:=</span>
<span class="n">homological_complex.iso_of_components</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">i</span><span class="o">,</span> <span class="n">FreeMat.one_mul_iso.app</span> <span class="n">_</span><span class="o">)</span> <span class="bp">$</span>
<span class="bp">λ</span> <span class="n">i</span> <span class="n">j</span><span class="o">,</span> <span class="o">(</span><span class="n">FreeMat.one_mul_iso.hom.naturality</span> <span class="o">(</span><span class="n">BD.d</span> <span class="n">i</span> <span class="n">j</span><span class="o">))</span><span class="bp">.</span><span class="n">symm</span>
<span class="c1">-- notice the `.symm` at the end of the previous line</span>
</code></pre></div>



<a name="238909405"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/238909405" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#238909405">(May 15 2021 at 16:32)</a>:</h4>
<p>Another bug:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">src</span><span class="bp">/</span><span class="n">category_theory</span><span class="bp">/</span><span class="n">limits</span><span class="bp">/</span><span class="n">shapes</span><span class="bp">/</span><span class="n">zero.lean</span>
<span class="mi">180</span><span class="o">:</span><span class="n">localized</span> <span class="s2">"attribute [instance] has_zero_object.has_zero"</span> <span class="k">in</span> <span class="n">zero_object</span>
<span class="mi">181</span><span class="o">:</span><span class="n">localized</span> <span class="s2">"attribute [instance] has_zero_object.unique_to"</span> <span class="k">in</span> <span class="n">zero_object</span>
<span class="mi">182</span><span class="o">:</span><span class="n">localized</span> <span class="s2">"attribute [instance] has_zero_object.unique_from"</span> <span class="k">in</span> <span class="n">zero_object</span>
</code></pre></div>
<p>these should use fully qualified names</p>



<a name="238909852"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/238909852" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#238909852">(May 15 2021 at 16:39)</a>:</h4>
<p>Ooh, and this is a more serious bug:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="c1">-- #check @homotopy</span>
<span class="n">homotopy</span> <span class="o">:</span>
  <span class="bp">Π</span> <span class="o">{</span><span class="n">ι</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_3</span><span class="o">}</span> <span class="o">{</span><span class="n">V</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_2</span><span class="o">}</span> <span class="o">[</span><span class="n">_inst_1</span> <span class="o">:</span> <span class="n">category</span> <span class="n">V</span><span class="o">]</span> <span class="o">[</span><span class="n">_inst_2</span> <span class="o">:</span> <span class="n">has_zero_object</span> <span class="n">V</span><span class="o">]</span>
  <span class="o">[</span><span class="n">_inst_3</span> <span class="o">:</span> <span class="n">category_theory.preadditive</span> <span class="n">V</span><span class="o">]</span> <span class="o">{</span><span class="n">c</span> <span class="o">:</span> <span class="n">complex_shape</span> <span class="n">ι</span><span class="o">}</span> <span class="o">{</span><span class="n">C</span> <span class="n">D</span> <span class="o">:</span> <span class="n">homological_complex</span> <span class="n">V</span> <span class="n">c</span><span class="o">},</span>
    <span class="o">(</span><span class="n">C</span> <span class="bp">⟶</span> <span class="n">D</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="n">C</span> <span class="bp">⟶</span> <span class="n">D</span><span class="o">)</span> <span class="bp">→</span> <span class="kt">Type</span> <span class="o">(</span><span class="n">max</span> <span class="n">u_3</span> <span class="n">u_1</span><span class="o">)</span>
</code></pre></div>
<p>The definition of <code>homotopy</code> requires <code>has_zero_object</code> whereas it should only ask for zero morphisms. The category <code>FreeMat</code> doesn't have a zero object.</p>



<a name="238910027"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/238910027" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#238910027">(May 15 2021 at 16:42)</a>:</h4>
<p>I've pushed what I've done so far (not so much) to <code>homological-refactor</code></p>



<a name="238910450"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/238910450" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#238910450">(May 15 2021 at 16:49)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/7619">#7619</a> fixes the locale issue</p>



<a name="238910754"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/238910754" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#238910754">(May 15 2021 at 16:54)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt/near/238909852">said</a>:</p>
<blockquote>
<p>Ooh, and this is a more serious bug:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="c1">-- #check @homotopy</span>
<span class="n">homotopy</span> <span class="o">:</span>
  <span class="bp">Π</span> <span class="o">{</span><span class="n">ι</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_3</span><span class="o">}</span> <span class="o">{</span><span class="n">V</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_2</span><span class="o">}</span> <span class="o">[</span><span class="n">_inst_1</span> <span class="o">:</span> <span class="n">category</span> <span class="n">V</span><span class="o">]</span> <span class="o">[</span><span class="n">_inst_2</span> <span class="o">:</span> <span class="n">has_zero_object</span> <span class="n">V</span><span class="o">]</span>
  <span class="o">[</span><span class="n">_inst_3</span> <span class="o">:</span> <span class="n">category_theory.preadditive</span> <span class="n">V</span><span class="o">]</span> <span class="o">{</span><span class="n">c</span> <span class="o">:</span> <span class="n">complex_shape</span> <span class="n">ι</span><span class="o">}</span> <span class="o">{</span><span class="n">C</span> <span class="n">D</span> <span class="o">:</span> <span class="n">homological_complex</span> <span class="n">V</span> <span class="n">c</span><span class="o">},</span>
    <span class="o">(</span><span class="n">C</span> <span class="bp">⟶</span> <span class="n">D</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="n">C</span> <span class="bp">⟶</span> <span class="n">D</span><span class="o">)</span> <span class="bp">→</span> <span class="kt">Type</span> <span class="o">(</span><span class="n">max</span> <span class="n">u_3</span> <span class="n">u_1</span><span class="o">)</span>
</code></pre></div>
<p>The definition of <code>homotopy</code> requires <code>has_zero_object</code> whereas it should only ask for zero morphisms. The category <code>FreeMat</code> doesn't have a zero object.</p>
</blockquote>
<p>I think you need <code>preadditive</code> for <code>homotopy</code>. But you're right, it shouldn't require zero objects</p>



<a name="238910774"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/238910774" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#238910774">(May 15 2021 at 16:55)</a>:</h4>
<p>The way it is currently set-up it fundamentally uses zero objects in some aux definitions.</p>



<a name="238910798"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/238910798" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#238910798">(May 15 2021 at 16:55)</a>:</h4>
<p>oof</p>



<a name="238910805"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/238910805" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#238910805">(May 15 2021 at 16:55)</a>:</h4>
<p>It's not just weakening the type class and we're good to go. We'll really need to tweak some code.</p>



<a name="238911018"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/238911018" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#238911018">(May 15 2021 at 16:58)</a>:</h4>
<p>Oh I see... you need zero objects for <code>X_next</code> and its friends</p>



<a name="238911068"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/238911068" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#238911068">(May 15 2021 at 16:59)</a>:</h4>
<p>So we can only talk about the next and previous objects when we have zero objects. That's an issue all in itself isn't it?</p>



<a name="238911095"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/238911095" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#238911095">(May 15 2021 at 17:00)</a>:</h4>
<p>Yes, I think so.</p>



<a name="238911134"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/238911134" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#238911134">(May 15 2021 at 17:00)</a>:</h4>
<p>Well, I guess we have <code>C.next</code> which gives <code>option ...</code></p>



<a name="238911182"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/238911182" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#238911182">(May 15 2021 at 17:00)</a>:</h4>
<p>For <code>nat</code>-indexed complexes with objects in a category without zero object we are basically stuck</p>



<a name="238911211"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/238911211" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#238911211">(May 15 2021 at 17:00)</a>:</h4>
<p>Aha, so we need to take <code>option</code> more serious</p>



<a name="238911341"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/238911341" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#238911341">(May 15 2021 at 17:02)</a>:</h4>
<p>Yeah, we can change the definition of <code>homotopy.comm</code> to match on some option type, but that will get tedious really quickly</p>



<a name="238911482"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/238911482" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#238911482">(May 15 2021 at 17:04)</a>:</h4>
<p>I think there are two options: state 4 (?) conditions, that deal with all the edge cases,<br>
or turn <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>h</mi><mi>i</mi></msub><mo>∘</mo><msub><mi>d</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">h_i \circ d_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∘</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> into a new definition, and make this <code>0</code> whenever <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>h</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">h_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> is not defined</p>



<a name="238911499"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/238911499" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#238911499">(May 15 2021 at 17:04)</a>:</h4>
<p>Oh that's a good idea!</p>



<a name="238911514"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/238911514" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#238911514">(May 15 2021 at 17:04)</a>:</h4>
<p>The one with <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>h</mi><mi>i</mi></msub><mo>∘</mo><msub><mi>d</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">h_i \circ d_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∘</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> I mean</p>



<a name="238912142"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/238912142" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#238912142">(May 15 2021 at 17:12)</a>:</h4>
<p>Quick sketch--</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">d_next</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="bp">Π</span> <span class="n">i</span> <span class="n">j</span><span class="o">,</span> <span class="n">C.X</span> <span class="n">i</span> <span class="bp">⟶</span> <span class="n">D.X</span> <span class="n">j</span><span class="o">)</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">ι</span><span class="o">)</span> <span class="o">:</span> <span class="n">C.X</span> <span class="n">i</span> <span class="bp">⟶</span> <span class="n">D.X</span> <span class="n">i</span> <span class="o">:=</span>
<span class="k">match</span> <span class="n">c.next</span> <span class="n">i</span> <span class="k">with</span>
<span class="bp">|</span> <span class="n">none</span> <span class="o">:=</span> <span class="mi">0</span>
<span class="bp">|</span> <span class="n">some</span> <span class="o">⟨</span><span class="n">i'</span><span class="o">,</span><span class="n">w</span><span class="o">⟩</span> <span class="o">:=</span> <span class="n">C.d</span> <span class="n">_</span> <span class="n">_</span> <span class="bp">≫</span> <span class="n">f</span> <span class="n">i'</span> <span class="n">i</span>
<span class="kd">end</span>

<span class="kd">def</span> <span class="n">prev_d</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="bp">Π</span> <span class="n">i</span> <span class="n">j</span><span class="o">,</span> <span class="n">C.X</span> <span class="n">i</span> <span class="bp">⟶</span> <span class="n">D.X</span> <span class="n">j</span><span class="o">)</span> <span class="o">(</span><span class="n">j</span> <span class="o">:</span> <span class="n">ι</span><span class="o">)</span> <span class="o">:</span> <span class="n">C.X</span> <span class="n">j</span> <span class="bp">⟶</span> <span class="n">D.X</span> <span class="n">j</span> <span class="o">:=</span>
<span class="k">match</span> <span class="n">c.prev</span> <span class="n">j</span> <span class="k">with</span>
<span class="bp">|</span> <span class="n">none</span> <span class="o">:=</span> <span class="mi">0</span>
<span class="bp">|</span> <span class="n">some</span> <span class="o">⟨</span><span class="n">j'</span><span class="o">,</span><span class="n">w</span><span class="o">⟩</span> <span class="o">:=</span> <span class="n">f</span> <span class="n">j</span> <span class="n">j'</span> <span class="bp">≫</span> <span class="n">D.d</span> <span class="n">_</span> <span class="n">_</span>
<span class="kd">end</span>

<span class="sd">/--</span>
<span class="sd">A homotopy `h` between chain maps `f` and `g` consists of components `h i j : C.X i ⟶ D.X j`</span>
<span class="sd">which are zero unless `c.rel j i`, satisfying the homotopy condition.</span>
<span class="sd">-/</span>
<span class="kd">@[ext, nolint has_inhabited_instance]</span>
<span class="kd">structure</span> <span class="n">homotopy</span> <span class="o">(</span><span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">C</span> <span class="bp">⟶</span> <span class="n">D</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">hom</span> <span class="o">:</span> <span class="bp">Π</span> <span class="n">i</span> <span class="n">j</span><span class="o">,</span> <span class="n">C.X</span> <span class="n">i</span> <span class="bp">⟶</span> <span class="n">D.X</span> <span class="n">j</span><span class="o">)</span>
<span class="o">(</span><span class="n">zero'</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">i</span> <span class="n">j</span><span class="o">,</span> <span class="bp">¬</span> <span class="n">c.rel</span> <span class="n">j</span> <span class="n">i</span> <span class="bp">→</span> <span class="n">hom</span> <span class="n">i</span> <span class="n">j</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">.</span> <span class="n">obviously</span><span class="o">)</span>
<span class="o">(</span><span class="n">comm'</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">i</span><span class="o">,</span> <span class="n">f.f</span> <span class="n">i</span> <span class="bp">=</span> <span class="n">d_next</span> <span class="n">hom</span> <span class="n">_</span> <span class="bp">+</span> <span class="n">prev_d</span> <span class="n">hom</span> <span class="n">_</span> <span class="bp">.</span> <span class="n">obviously'</span><span class="o">)</span>
</code></pre></div>



<a name="238912164"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/238912164" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#238912164">(May 15 2021 at 17:13)</a>:</h4>
<p>I have to go for now, but I'll try to play with this defn later</p>



<a name="238912165"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/238912165" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#238912165">(May 15 2021 at 17:13)</a>:</h4>
<p><span aria-label="rofl" class="emoji emoji-1f923" role="img" title="rofl">:rofl:</span> why a line break in <code>comm'</code>? The condition is now really short... <span aria-label="rofl" class="emoji emoji-1f923" role="img" title="rofl">:rofl:</span></p>



<a name="238912424"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/238912424" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#238912424">(May 15 2021 at 17:17)</a>:</h4>
<p>I think I like this idea. It's quite close to the informal justifications that we give when someone asks about the edge conditions.</p>



<a name="238913708"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/238913708" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#238913708">(May 15 2021 at 17:38)</a>:</h4>
<p>Sorry, the above is wrong -- we need this:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">@[ext, nolint has_inhabited_instance]</span>
<span class="kd">structure</span> <span class="n">homotopy</span> <span class="o">(</span><span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">C</span> <span class="bp">⟶</span> <span class="n">D</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">hom</span> <span class="o">:</span> <span class="bp">Π</span> <span class="n">i</span> <span class="n">j</span><span class="o">,</span> <span class="n">C.X</span> <span class="n">i</span> <span class="bp">⟶</span> <span class="n">D.X</span> <span class="n">j</span><span class="o">)</span>
<span class="o">(</span><span class="n">zero'</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">i</span> <span class="n">j</span><span class="o">,</span> <span class="bp">¬</span> <span class="n">c.rel</span> <span class="n">j</span> <span class="n">i</span> <span class="bp">→</span> <span class="n">hom</span> <span class="n">i</span> <span class="n">j</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">.</span> <span class="n">obviously</span><span class="o">)</span>
<span class="o">(</span><span class="n">comm'</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">i</span><span class="o">,</span> <span class="n">f.f</span> <span class="n">i</span> <span class="bp">-</span> <span class="n">g.f</span> <span class="n">i</span> <span class="bp">=</span> <span class="n">d_next</span> <span class="n">hom</span> <span class="n">_</span> <span class="bp">+</span> <span class="n">prev_d</span> <span class="n">hom</span> <span class="n">_</span> <span class="bp">.</span> <span class="n">obviously'</span><span class="o">)</span>
</code></pre></div>



<a name="238913797"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/238913797" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#238913797">(May 15 2021 at 17:40)</a>:</h4>
<p>( I deleted too much :) )</p>



<a name="238916967"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/238916967" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#238916967">(May 15 2021 at 18:33)</a>:</h4>
<p>Modulo a couple of sorry's and some linting that needs to be done, here's a branch with the fix to <code>homotopy</code>: <a href="https://github.com/leanprover-community/mathlib/tree/homotopy_fix">branch#homotopy_fix</a></p>



<a name="238917045"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/238917045" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#238917045">(May 15 2021 at 18:34)</a>:</h4>
<p>I don't know how this affects all the other PRs though...</p>



<a name="238917257"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/238917257" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#238917257">(May 15 2021 at 18:39)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> <span class="user-mention" data-user-id="112680">@Johan Commelin</span> please feel free to adopt and/or do whatever you want with this branch!</p>



<a name="238917271"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/238917271" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#238917271">(May 15 2021 at 18:39)</a>:</h4>
<p>I think <span class="user-mention" data-user-id="110087">@Scott Morrison</span> is the only one with a clear overview of how this will affect the other PRs</p>



<a name="238938987"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/238938987" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#238938987">(May 16 2021 at 01:24)</a>:</h4>
<p>Okay, I've fixed a few sorries. You changed the term order in <code>comm'</code>, so I'm updating some things in the inductive constructions to match that, but may end up flipping the term order back later.</p>



<a name="238939023"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/238939023" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#238939023">(May 16 2021 at 01:25)</a>:</h4>
<p>I'll try the last sorry now, then try it out in <a href="https://github.com/leanprover-community/mathlib/tree/homotopy_category">branch#homotopy_category</a>. If it works okay there (it should) everything else will probably be fine.</p>



<a name="238939031"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/238939031" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#238939031">(May 16 2021 at 01:25)</a>:</h4>
<p>This is a nice fix, <span class="user-mention" data-user-id="243562">@Adam Topaz</span>!</p>



<a name="238940281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/238940281" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#238940281">(May 16 2021 at 01:49)</a>:</h4>
<p>It seems there's more work required to restore the proof of <code>homology_map_eq_of_homotopy</code> in this branch.</p>



<a name="238940306"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/238940306" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#238940306">(May 16 2021 at 01:49)</a>:</h4>
<p>We need to be able to see easily that <code>d_next</code> factors through <code>d_from</code> (which is the case whether these are zero or not).</p>



<a name="238941541"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/238941541" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#238941541">(May 16 2021 at 02:12)</a>:</h4>
<p>Okay, I've dealt with this.</p>



<a name="238941551"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/238941551" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#238941551">(May 16 2021 at 02:13)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/tree/homotopy_category">branch#homotopy_category</a> works with no changes, so I've just merged this branch into that.</p>



<a name="238941554"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/238941554" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#238941554">(May 16 2021 at 02:13)</a>:</h4>
<p><span class="user-mention" data-user-id="243562">@Adam Topaz</span>, do you want to make <a href="https://github.com/leanprover-community/mathlib/tree/homotopy_fix">branch#homotopy_fix</a> a separate PR, and I'll add the dependency?</p>



<a name="238941749"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/238941749" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#238941749">(May 16 2021 at 02:17)</a>:</h4>
<p>Sure, that works! I won't be able to open the PR tonight, but I can probably do it at some point tomorrow, or you could open the PR now if you have time.</p>



<a name="238945102"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/238945102" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#238945102">(May 16 2021 at 03:19)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/7621">#7621</a></p>



<a name="238966438"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/238966438" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#238966438">(May 16 2021 at 10:20)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span>, a way above in this thread you said <code>FreeMat</code> doesn't have a zero object. Surely <code>Free k (Mat R)</code> (not that we actually have that yet, <code>sorry</code>) has a zero object. (Err... the zero-ary direct sum? not sure what to call it besides the zero object!) Am I being confused?</p>



<a name="239203503"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/239203503" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#239203503">(May 18 2021 at 06:21)</a>:</h4>
<p>Another minor bug: <code>homotopy</code> is not in the <code>category_theory</code> namespace. I guess that <code>_root_.homotopy</code> deserves to be reserved for homotopies in topology.</p>



<a name="239204721"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/239204721" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#239204721">(May 18 2021 at 06:34)</a>:</h4>
<p>Another small bug:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="c1">-- move to mathlib</span>
<span class="kn">attribute</span> <span class="o">[</span><span class="n">simps</span><span class="o">]</span> <span class="n">homotopy.refl</span> <span class="n">homotopy.symm</span> <span class="n">homotopy.trans</span> <span class="n">homotopy.comp_left</span> <span class="n">homotopy.comp_right</span>
</code></pre></div>



<a name="239213530"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/239213530" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#239213530">(May 18 2021 at 08:02)</a>:</h4>
<p>I don't think we should put anything about homological algebra in the <code>category_theory</code> namespace. If we need to disambiguate two versions of <code>homotopy</code> lets use <code>homological_algebra.homotopy</code> or <code>homology.homotopy</code> or <code>topology.homotopy</code> or <code>continuous_map.homotopy</code>.</p>



<a name="239213635"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/239213635" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#239213635">(May 18 2021 at 08:03)</a>:</h4>
<p><code>homological_complex.homotopy</code>?</p>



<a name="239223556"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/239223556" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#239223556">(May 18 2021 at 09:28)</a>:</h4>
<p>So, we merged the homotopy fix that uses <code>d_next</code> and <code>prev_d</code>. But now I'm wondering if the following hack would be too evil to pass up:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">complex_shape.next'</span> <span class="o">(</span><span class="n">i</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">match</span> <span class="n">c.next</span> <span class="n">i</span> <span class="k">with</span>
<span class="bp">|</span> <span class="n">none</span> <span class="o">:=</span> <span class="n">i</span>
<span class="bp">|</span> <span class="n">some</span> <span class="bp">\&lt;</span><span class="n">j</span><span class="o">,</span><span class="n">w</span><span class="bp">\&gt;</span> <span class="o">:=</span> <span class="n">j</span>
</code></pre></div>
<p>etc...<br>
Then we can still write "the usual homotopy condition", using <code>hom i (c.prev' i)</code> and <code>hom (c.next' i) i</code>. But for the edge cases these will become "vertical" homotopy maps composed with "stationary" differentials. Those compositions will be <code>0</code> for two reasons <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></p>



<a name="239224911"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/239224911" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#239224911">(May 18 2021 at 09:38)</a>:</h4>
<p>The branch <code>homological-refactor</code> compiles again, but I've sorried 4 proofs:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="mi">1</span>       <span class="n">src</span><span class="bp">/</span><span class="n">normed_spectral.lean</span>
<span class="mi">1</span>       <span class="n">src</span><span class="bp">/</span><span class="n">thm95</span><span class="bp">/</span><span class="n">homotopy.lean</span>
<span class="mi">1</span>       <span class="n">src</span><span class="bp">/</span><span class="n">thm95</span><span class="bp">/</span><span class="n">default.lean</span>
<span class="mi">10</span>      <span class="n">src</span><span class="bp">/</span><span class="n">thm95</span><span class="bp">/</span><span class="kd">constants</span><span class="bp">.</span><span class="n">lean</span>
<span class="mi">1</span>       <span class="n">src</span><span class="bp">/</span><span class="n">locally_constant</span><span class="bp">/</span><span class="n">SemiNormedGroup.lean</span>
<span class="mi">1</span>       <span class="n">src</span><span class="bp">/</span><span class="n">prop_92</span><span class="bp">/</span><span class="n">prop_92.lean</span>
<span class="mi">2</span>       <span class="n">src</span><span class="bp">/</span><span class="n">prop_92</span><span class="bp">/</span><span class="n">concrete.lean</span>
<span class="mi">1</span>       <span class="n">src</span><span class="bp">/</span><span class="n">breen_deligne</span><span class="bp">/</span><span class="n">eg.lean</span>
<span class="mi">1</span>       <span class="n">src</span><span class="bp">/</span><span class="n">pseudo_normed_group</span><span class="bp">/</span><span class="n">system_of_complexes.lean</span>
<span class="n">Total</span><span class="o">:</span>  <span class="mi">19</span>
</code></pre></div>



<a name="239224945"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/239224945" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#239224945">(May 18 2021 at 09:39)</a>:</h4>
<p>Once those are fixed, I'll merge into master</p>



<a name="239372662"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/239372662" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#239372662">(May 19 2021 at 06:26)</a>:</h4>
<p>I'm now porting the last file in the homological refactor, which had to wait for another mathlib PR.</p>



<a name="239372693"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/239372693" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#239372693">(May 19 2021 at 06:27)</a>:</h4>
<p>After that LTE old style chain complexes can be forcefully kicked out of the project. So long, and thanks for all the fish!</p>



<a name="239372734"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/239372734" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#239372734">(May 19 2021 at 06:27)</a>:</h4>
<p>It also means that the blueprint will compile again. Right now it is upset that there are two notions of chain complex in the project.</p>



<a name="239373087"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/239373087" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#239373087">(May 19 2021 at 06:31)</a>:</h4>
<p>ooh, that went really smooth. 800 lines less in the project</p>



<a name="239375145"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/239375145" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Peter Scholze <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#239375145">(May 19 2021 at 06:54)</a>:</h4>
<p>What's the current de Bruijn factor of LTE?</p>



<a name="239375910"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/239375910" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#239375910">(May 19 2021 at 07:02)</a>:</h4>
<p>What happens when you say "by a well known result this monoid is finitely generated" and we write 1000 lines justifying this? I've never really understood that bit of the de Bruijn story</p>



<a name="239376025"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/239376025" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Peter Scholze <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#239376025">(May 19 2021 at 07:03)</a>:</h4>
<p>Good question. Is Gordan's lemma part of mathlib? I think it should be. Everything that ends in mathlib shouldn't count towards the de Bruijn factor</p>



<a name="239383958"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/239383958" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#239383958">(May 19 2021 at 08:16)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">$</span> <span class="n">git</span> <span class="n">ls</span><span class="bp">-</span><span class="n">files</span> <span class="bp">|</span> <span class="n">rg</span> <span class="s2">"[.]tex"</span> <span class="bp">|</span> <span class="n">rg</span> <span class="bp">-</span><span class="n">v</span> <span class="n">web</span> <span class="bp">|</span> <span class="n">rg</span> <span class="bp">-</span><span class="n">v</span> <span class="n">macros</span> <span class="bp">|</span> <span class="n">xargs</span> <span class="n">wc</span>
  <span class="mi">294</span>  <span class="mi">1333</span> <span class="mi">10790</span> <span class="n">src</span><span class="bp">/</span><span class="n">CLC.tex</span>
   <span class="mi">84</span>   <span class="mi">329</span>  <span class="mi">2628</span> <span class="n">src</span><span class="bp">/</span><span class="n">Mbar.tex</span>
   <span class="mi">61</span>    <span class="mi">76</span>  <span class="mi">1559</span> <span class="n">src</span><span class="bp">/</span><span class="n">blueprint.tex</span>
  <span class="mi">375</span>  <span class="mi">1629</span> <span class="mi">12449</span> <span class="n">src</span><span class="bp">/</span><span class="n">breen_deligne.tex</span>
   <span class="mi">22</span>    <span class="mi">65</span>   <span class="mi">549</span> <span class="n">src</span><span class="bp">/</span><span class="n">content.tex</span>
  <span class="mi">117</span>   <span class="mi">777</span>  <span class="mi">5853</span> <span class="n">src</span><span class="bp">/</span><span class="n">homotopies.tex</span>
   <span class="mi">96</span>   <span class="mi">487</span>  <span class="mi">3779</span> <span class="n">src</span><span class="bp">/</span><span class="n">normed_groups.tex</span>
  <span class="mi">578</span>  <span class="mi">3280</span> <span class="mi">24037</span> <span class="n">src</span><span class="bp">/</span><span class="n">normed_homological.tex</span>
  <span class="mi">234</span>  <span class="mi">1033</span>  <span class="mi">8196</span> <span class="n">src</span><span class="bp">/</span><span class="n">polyhedral_lattice.tex</span>
  <span class="mi">331</span>  <span class="mi">1877</span> <span class="mi">14912</span> <span class="n">src</span><span class="bp">/</span><span class="n">proof.tex</span>
 <span class="mi">2192</span> <span class="mi">10886</span> <span class="mi">84752</span> <span class="n">total</span>
</code></pre></div>



<a name="239383985"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/239383985" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#239383985">(May 19 2021 at 08:16)</a>:</h4>
<p>The numbers are <code>lines</code>, <code>words</code>, <code>characters</code></p>



<a name="239384120"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/239384120" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#239384120">(May 19 2021 at 08:17)</a>:</h4>
<p>For the Lean repo we get (excluding <code>for_mathlib</code>)</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code> <span class="mi">15462</span>  <span class="mi">94994</span> <span class="mi">603189</span> <span class="n">total</span>
</code></pre></div>



<a name="239384140"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/239384140" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#239384140">(May 19 2021 at 08:17)</a>:</h4>
<p>Freek likes to compress the files (TeX and Lean) and compare lengths afterwards. And maybe ignoring <code>for_mathlib</code> is OK.</p>



<a name="239384226"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/239384226" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#239384226">(May 19 2021 at 08:18)</a>:</h4>
<p>I agree that a proper comparison should first compress everything</p>



<a name="239384229"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/239384229" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#239384229">(May 19 2021 at 08:18)</a>:</h4>
<p>Maybe comparing the blueprint with the repo is a more reasonable thing than comparing the relevant parts of the paper</p>



<a name="239389050"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/239389050" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#239389050">(May 19 2021 at 08:58)</a>:</h4>
<p><span class="user-mention" data-user-id="369530">@Peter Scholze</span> But we aren't done yet...</p>



<a name="239389091"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/239389091" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Peter Scholze <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#239389091">(May 19 2021 at 08:59)</a>:</h4>
<p>Yes, but I'd be surprised if this changes by another factor of 2 <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span></p>



<a name="239389099"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/239389099" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#239389099">(May 19 2021 at 08:59)</a>:</h4>
<p>True</p>



<a name="239390192"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/239390192" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#239390192">(May 19 2021 at 09:09)</a>:</h4>
<p>About this factor, I should point out that, in Lemma 9.2, the most Lean-consuming line is clearly "We first note that any locally constant function <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>φ</mi><mo>∈</mo><mi>V</mi><mo stretchy="false">(</mo><msubsup><mi>M</mi><mrow><mo>≤</mo><msup><mi>r</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mi>c</mi></mrow><mi>a</mi></msubsup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\varphi ∈ V(M_{\leq r&#x27;c}^a)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7335400000000001em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">φ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.1201590000000001em;vertical-align:-0.370159em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-2.42502em;margin-left:-0.10903em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mrel mtight">≤</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828285714285715em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mord mathnormal mtight">c</span></span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">a</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.370159em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>  can be extended to a locally constant function <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>φ</mi><mo>ˉ</mo></mover><mo>∈</mo><mi>V</mi><mo stretchy="false">(</mo><msubsup><mi>M</mi><mrow><mo>≤</mo><mi>c</mi></mrow><mi>a</mi></msubsup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\bar \varphi ∈ V(M_{\leq c}^a)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7622199999999999em;vertical-align:-0.19444em;"></span><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.56778em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal">φ</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.16666em;"><span class="mord">ˉ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.092179em;vertical-align:-0.342179em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-2.4530000000000003em;margin-left:-0.10903em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mrel mtight">≤</span><span class="mord mathnormal mtight">c</span></span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">a</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.342179em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>  with the same norm". This took much more work than juggling with sums and norm estimates.</p>



<a name="239421131"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/239421131" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#239421131">(May 19 2021 at 13:13)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/7651">#7651</a> and <a href="https://github.com/leanprover-community/mathlib/issues/7656">#7656</a> (both merged) can be used to get rid of <code>for_mathlib/simplicial/right_op.lean</code>. I can do it later today, but just thought I would mention it in case anyone is already doing some cleaning up</p>



<a name="239421711"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/239421711" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#239421711">(May 19 2021 at 13:16)</a>:</h4>
<p>I did half of it</p>



<a name="239422165"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/239422165" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#239422165">(May 19 2021 at 13:19)</a>:</h4>
<p>Which half is left?</p>



<a name="239422671"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/239422671" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#239422671">(May 19 2021 at 13:22)</a>:</h4>
<p>I only removed the first bit.</p>



<a name="239422702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/239422702" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#239422702">(May 19 2021 at 13:22)</a>:</h4>
<p>Because Lean told me it already existed, when I bumped mathlib</p>



<a name="239423045"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/239423045" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#239423045">(May 19 2021 at 13:24)</a>:</h4>
<p>Oh <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="239432889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/239432889" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#239432889">(May 19 2021 at 14:23)</a>:</h4>
<p>Okay, <code>for_mathlib/simplicial/right_op.lean</code> is no more.</p>



<a name="239434530"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/239434530" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#239434530">(May 19 2021 at 14:32)</a>:</h4>
<p>I think we should have some <code>(co)chain_complex.mk_hom_of</code> that says you only need to check commutativity of squares. That would play nice with <code>(co)chain_complex.of</code></p>



<a name="239434715"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/239434715" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#239434715">(May 19 2021 at 14:33)</a>:</h4>
<p>But it shouldn't assume that the complexes are constructed using <code>.of</code></p>



<a name="239434980"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/239434980" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#239434980">(May 19 2021 at 14:34)</a>:</h4>
<p>We have it... <a href="https://leanprover-community.github.io/mathlib_docs/find/cochain_complex.of_hom">docs#cochain_complex.of_hom</a></p>



<a name="239435085"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/239435085" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#239435085">(May 19 2021 at 14:35)</a>:</h4>
<p>Some of the code in <code>for_mathlib/simplicial/complex</code> can be simplified using this</p>



<a name="239435238"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/239435238" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#239435238">(May 19 2021 at 14:36)</a>:</h4>
<p>Ah sorry, that assumes they're constructed using of</p>



<a name="239435494"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/239435494" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#239435494">(May 19 2021 at 14:37)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/cochain_complex.augment">docs#cochain_complex.augment</a> can also be useful</p>



<a name="239437556"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/239437556" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#239437556">(May 19 2021 at 14:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="243562">Adam Topaz</span> <a href="#narrow/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt/near/239434980">said</a>:</p>
<blockquote>
<p>We have it... <a href="https://leanprover-community.github.io/mathlib_docs/find/cochain_complex.of_hom">docs#cochain_complex.of_hom</a></p>
</blockquote>
<p>But this one does assume that the complexes are constructed using <code>.of</code></p>



<a name="239437582"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/239437582" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#239437582">(May 19 2021 at 14:49)</a>:</h4>
<p>Ooh, you already said that <span aria-label="face palm" class="emoji emoji-1f926" role="img" title="face palm">:face_palm:</span></p>



<a name="239437762"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/239437762" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#239437762">(May 19 2021 at 14:50)</a>:</h4>
<p>Do we have any complexes not constructed using <code>.of</code> in LTE?</p>



<a name="239437974"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/239437974" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#239437974">(May 19 2021 at 14:51)</a>:</h4>
<p>Yeah, complexes constructed using <code>.of</code> but then pushed through 5 functors</p>



<a name="239438195"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/239438195" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#239438195">(May 19 2021 at 14:52)</a>:</h4>
<p>Right</p>



<a name="239439690"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/239439690" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#239439690">(May 19 2021 at 15:00)</a>:</h4>
<p>We probably also need a construction saying that any complex is isomorphic to <code>.of</code> of something</p>



<a name="239455566"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/239455566" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#239455566">(May 19 2021 at 16:29)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/7666">#7666</a> is fixes the problem of <code>hom_of</code> by adding <code>c.rel i j</code> as condition to <code>hom.comm'</code>.<br>
Instead of <code>restate_axiom hom.comm'</code> I then state <code>hom.comm</code> without <code>c.rel i j</code>.<br>
Upshot: when using <code>hom.comm</code> you don't need the assumption, but when you need to verify the axiom you get the extra assumption.</p>



<a name="239488447"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/complexes%2C%20d%2C%20dtt/near/239488447" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/complexes.2C.20d.2C.20dtt.html#239488447">(May 19 2021 at 20:09)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/7673">#7673</a> does the same for <code>d_comp_d'</code></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>