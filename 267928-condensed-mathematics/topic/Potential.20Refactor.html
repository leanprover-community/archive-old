---
layout: archive
title: Zulip Chat Archive
permalink: /stream/267928-condensed-mathematics/topic/Potential.20Refactor.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/index.html">condensed mathematics</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html">Potential Refactor</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="270502165"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270502165" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270502165">(Feb 03 2022 at 05:18)</a>:</h4>
<p>What do you think about changing our definition of <code>Condensed.{u} Ab.{u+1}</code> to <code>Condensed.{u} (Module.{u+1} \Z)</code>. </p>
<p>The benefit is that mathlib has the monoidal structure for <code>Module</code> but not for <code>Ab</code>, and I don't feel like copying a bunch of code and being annoyed due to going back and forth between <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">Z</mi></mrow><annotation encoding="application/x-tex">\mathbb{Z}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6889em;"></span><span class="mord mathbb">Z</span></span></span></span>-linear maps and <code>add_monoid_hom</code>s.</p>
<p>The drawback is that it will require generalizing some universe parameters in mathlib, since the monoidal structure right now is only defined for <code>Module.{u} R</code> where <code>R : Type u</code> is a ring, and similarly for colimits of modules.</p>
<p>I'll at least start by trying to generalize these universe parameters (it shouldn't be too difficult, I hope...).</p>



<a name="270502412"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270502412" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270502412">(Feb 03 2022 at 05:22)</a>:</h4>
<p>Ah, okay, the first snag is the monoidal unit would have to involve ulifts.</p>



<a name="270503156"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270503156" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270503156">(Feb 03 2022 at 05:35)</a>:</h4>
<p>Okay, I'm starting to think that it would be less painful to just stick with <code>Ab</code>, and copy some code from mathlib about the fact that <code>Module R</code> is monoidal.</p>



<a name="270503584"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270503584" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270503584">(Feb 03 2022 at 05:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="243562">Adam Topaz</span> <a href="#narrow/stream/267928-condensed-mathematics/topic/Potential.20Refactor/near/270502412">said</a>:</p>
<blockquote>
<p>Ah, okay, the first snag is the monoidal unit would have to involve ulifts.</p>
</blockquote>
<p>I'm now convinced that we should just stick with <code>Ab</code>. The required universe changes in mathlib would take up more work than it's worth right now IMO. </p>
<p>It's unfortunate that we can't just easily go back and forth between <code>Ab.{u}</code> and <code>Module.{u} \Z</code>. Is there something we can do about that?</p>



<a name="270504615"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270504615" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270504615">(Feb 03 2022 at 06:00)</a>:</h4>
<p>I guess we would need a universe polymorphic <code>ℤ</code> (ahhrgg <span aria-label="scream cat" class="emoji emoji-1f640" role="img" title="scream cat">:scream_cat:</span>)</p>



<a name="270505125"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270505125" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270505125">(Feb 03 2022 at 06:09)</a>:</h4>
<p>My intuition says the we should indeed stick with <code>Ab</code> for now.</p>



<a name="270505250"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270505250" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270505250">(Feb 03 2022 at 06:11)</a>:</h4>
<p>We will need "condensed ℤ[T⁻¹]-modules". But once again, I'm not sure if <code>Condensed (Module (polynomial ℤ))</code> is the best way to implement that. Another option would be <code>Condensed (endomorphism Ab)</code>, where <code>endomorphism C</code> is the category of pairs <code>(X, f)</code> with <code>X : C</code> and <code>f : X ⟶ X</code>.</p>



<a name="270505858"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270505858" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270505858">(Feb 03 2022 at 06:21)</a>:</h4>
<p>One question that comes to my mind is that if we should not keep track that on "most" objects of interest to us (although not all test-objects), <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>T</mi><mrow><mo>−</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">T^{-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span> is an isomorphism.</p>



<a name="270505956"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270505956" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270505956">(Feb 03 2022 at 06:22)</a>:</h4>
<p>If we work in <code>Condensed (endomorpmism Ab)</code> this means that some arrows actually land in a subcategory and many lemmas (for instance Prop 6.8 saying that the "basic" condensed sets are profinite, which is crucial) use that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span> is invertible.</p>



<a name="270505963"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270505963" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270505963">(Feb 03 2022 at 06:22)</a>:</h4>
<p>We have <code>normed_with_aut</code> which kept track of that in the first half of the project</p>



<a name="270506032"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270506032" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270506032">(Feb 03 2022 at 06:23)</a>:</h4>
<p>Sure, I was thinking on how to set-up this categorically.</p>



<a name="270506074"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270506074" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270506074">(Feb 03 2022 at 06:23)</a>:</h4>
<p>But for <code>Mbar</code>, it is not an isomorphism. Same with <code>ℤ[T⁻¹]</code> itself. And those two objects will also play an important role.</p>



<a name="270506158"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270506158" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270506158">(Feb 03 2022 at 06:24)</a>:</h4>
<p>Yes, I agree. Indeed, I don't suggest we work with <code>Condensed (isomorphism Ab)</code>, I simply wonder if there is a way to keep track on the category side of the subcategory where this is invertible, in a way that is not too painful.</p>



<a name="270506178"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270506178" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270506178">(Feb 03 2022 at 06:25)</a>:</h4>
<p>It could also not be necessary, of course.</p>



<a name="270506483"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270506483" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270506483">(Feb 03 2022 at 06:30)</a>:</h4>
<p>I will think about it, at any rate.</p>



<a name="270512949"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270512949" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270512949">(Feb 03 2022 at 08:14)</a>:</h4>
<p>Of course we could just drop universes ;-)</p>
<p>Amelia and Maria both wanted these in projects they've been doing (Amelia for group cohomology and Z[G]-modules, Maria for valuations into with_zero (multiplicative int)) so in my opinion this is an issue which we need to start thinking about. The issue is that int has some huge API and the moment you ulift it to pint you lose a chunk of it. Maybe automation can save us here? </p>
<p>But presumably independent of that we want the monoidal structure on Ab anyway. Can we get it from an equivalence to module Z or again is this something which is asking too much right now?</p>



<a name="270513370"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270513370" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270513370">(Feb 03 2022 at 08:20)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> No, we can't drop universes. See the top post, where Adam writes</p>
<blockquote>
<p>What do you think about changing our definition of <code>Condensed.{u} Ab.{u+1}</code> to <code>Condensed.{u} (Module.{u+1} \Z)</code>. </p>
</blockquote>
<p>That <code>.{u+1}</code> is causing the trouble. Because <code>ℤ</code> is not an object of <code>Module.{0+1} ℤ</code>. Only <code>ulift ℤ</code> is.</p>



<a name="270513866"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270513866" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270513866">(Feb 03 2022 at 08:25)</a>:</h4>
<p>You always said this day would happen</p>



<a name="270514044"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270514044" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270514044">(Feb 03 2022 at 08:27)</a>:</h4>
<p>I'm a bit surprised though. Surely the type of Z-modules is Type 1?</p>



<a name="270514509"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270514509" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270514509">(Feb 03 2022 at 08:32)</a>:</h4>
<p>Which <code>ℤ</code>-modules?</p>



<a name="270514530"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270514530" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270514530">(Feb 03 2022 at 08:33)</a>:</h4>
<p>You can have <code>ℤ</code>-modules with carriers in <code>Type</code>. But there's another category with carriers in <code>Type 1</code>, etc...</p>



<a name="270514566"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270514566" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270514566">(Feb 03 2022 at 08:33)</a>:</h4>
<p>In this "pyknotic" setup, you choose an inaccessible cardinal <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>κ</mi></mrow><annotation encoding="application/x-tex">\kappa</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">κ</span></span></span></span> as the "cutoff" for the size of the profinite spaces you want to allow. You want <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>κ</mi></mrow><annotation encoding="application/x-tex">\kappa</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">κ</span></span></span></span> to be an ordinary small cardinal relative to the values of the sheaves you consider so that you can do ordinary topos theory, so you need sheaves valued in a universe of sets that itself contains a smaller universe.<br>
In Lean, you take <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>κ</mi></mrow><annotation encoding="application/x-tex">\kappa</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">κ</span></span></span></span> to be given by the cardinal <code>Type</code> (so that the profinite spaces you allow are those whose underlying set is a <code>Type</code>) and then you consider sheaves valued in <code>Type 1</code>. But <code>ℤ</code> itself is not a <code>Type 1</code> and here is the problem.</p>



<a name="270514673"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270514673" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270514673">(Feb 03 2022 at 08:34)</a>:</h4>
<p>Or you take <code>Type u</code> for the profinite spaces and <code>Type (u+1)</code> for the values of the sheaves, but it doesn't help.</p>



<a name="270514788"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270514788" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270514788">(Feb 03 2022 at 08:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/267928-condensed-mathematics/topic/Potential.20Refactor/near/270514530">said</a>:</p>
<blockquote>
<p>You can have <code>ℤ</code>-modules with carriers in <code>Type</code>. But there's another category with carriers in <code>Type 1</code>, etc...</p>
</blockquote>
<p>Of course, if you are only interested in suitably finitely generated modules, then these categories are equivalent. But for arbitrary modules, they aren't.</p>



<a name="270555556"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270555556" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270555556">(Feb 03 2022 at 14:19)</a>:</h4>
<p>I pushed a stub on <code>endomorphism C</code> to <code>for_mathlib/endomorphisms.lean</code>. The big sorry is</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="o">[</span><span class="n">abelian</span> <span class="n">C</span><span class="o">]</span> <span class="o">:</span> <span class="n">abelian</span> <span class="o">(</span><span class="n">endomorphism</span> <span class="n">C</span><span class="o">)</span>
</code></pre></div>



<a name="270556791"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270556791" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270556791">(Feb 03 2022 at 14:27)</a>:</h4>
<p>Hmmm, one annoying thing about <code>endomorphism</code> is that we have to develop lots of stuff for it again. That it's <code>abelian</code> is only the beginning. We would need the monoidal structure, Hom-tensor adjunction, free objects, etc... And all of that also for the condensed version.</p>



<a name="270557038"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270557038" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270557038">(Feb 03 2022 at 14:29)</a>:</h4>
<p><span class="user-mention" data-user-id="243562">@Adam Topaz</span> Do I understand correctly that this is almost all done for <code>Condensed (Module R)</code> already?</p>
<ul>
<li>It is abelian</li>
<li>The free-forget adjunction is done (right?)</li>
<li>monoidal structure is there in the uncondensed case, but needs to be sheafified.</li>
<li>Hom-tensor adjunction is done in the uncondensed case, I think.</li>
</ul>



<a name="270557096"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270557096" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270557096">(Feb 03 2022 at 14:29)</a>:</h4>
<p>So maybe I should reconsider my intuition about <code>Ab</code> and <code>endomorphism Ab</code>.</p>



<a name="270557365"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270557365" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270557365">(Feb 03 2022 at 14:31)</a>:</h4>
<p>Writing a constructor for <code>Condensed (Module (polynomial ℤ))</code> given a <code>Condensed (Module ℤ)</code> + endomorphism shouldn't be hard.</p>



<a name="270557394"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270557394" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270557394">(Feb 03 2022 at 14:31)</a>:</h4>
<p>Same for a <code>Condensed Ab</code> + endomorphism</p>



<a name="270561047"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270561047" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270561047">(Feb 03 2022 at 14:53)</a>:</h4>
<p>The answers are yes, yes, yes, and almost <a href="https://leanprover-community.github.io/mathlib_docs/find/tensor_product.lift.equiv">docs#tensor_product.lift.equiv</a></p>



<a name="270561068"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270561068" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270561068">(Feb 03 2022 at 14:53)</a>:</h4>
<p>Hmmz, mathlib doesn't yet know that <code>Module R</code> has colimits.</p>



<a name="270561114"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270561114" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270561114">(Feb 03 2022 at 14:53)</a>:</h4>
<p>Or wait, maybe I just have the wrong imports</p>



<a name="270561362"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270561362" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270561362">(Feb 03 2022 at 14:55)</a>:</h4>
<p>It does, but there are universe issues there as well</p>



<a name="270561416"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270561416" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270561416">(Feb 03 2022 at 14:55)</a>:</h4>
<p>Those should be easier to fix</p>



<a name="270561606"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270561606" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270561606">(Feb 03 2022 at 14:56)</a>:</h4>
<p>If we decide to go for this change, we should fix mathlib first, I think.</p>



<a name="270561794"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270561794" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270561794">(Feb 03 2022 at 14:57)</a>:</h4>
<p>I hope the free forget adjunction for modules is sufficiently universe polymorphic.</p>



<a name="270561919"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270561919" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270561919">(Feb 03 2022 at 14:58)</a>:</h4>
<p>Yeah, I'm now thinking that it will make sense to attempt this refactor.</p>



<a name="270561969"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270561969" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270561969">(Feb 03 2022 at 14:58)</a>:</h4>
<p>It is the morally correct thing to do. And probably also the economically correct thing to do.</p>



<a name="270562120"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270562120" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270562120">(Feb 03 2022 at 14:59)</a>:</h4>
<p>I think I agree... I didn't consider the Z[X] issue yesterday, and that pushes it over the edge.</p>



<a name="270562636"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270562636" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270562636">(Feb 03 2022 at 15:02)</a>:</h4>
<p>PS... I added <code>for_mathlib/internal_hom.lean</code> yesterday. I was surprised we didn't have something like that in mathlib yet.</p>



<a name="270562734"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270562734" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270562734">(Feb 03 2022 at 15:03)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/11802">#11802</a> generalizes universes for colimits in <code>Module R</code> -- let's see if CI likes it.</p>



<a name="270563221"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270563221" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270563221">(Feb 03 2022 at 15:06)</a>:</h4>
<p>This might be dumb and/or already considered, but have you thought about instead of <code>polynomial ℤ</code>, using <code>mv_polynomial punit ℤ</code>?</p>



<a name="270563338"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270563338" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270563338">(Feb 03 2022 at 15:06)</a>:</h4>
<p>We could also use <code>mv_polynomial pempty Z</code></p>



<a name="270563503"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270563503" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270563503">(Feb 03 2022 at 15:07)</a>:</h4>
<p>Hah, that would be a nifty hack!</p>



<a name="270564344"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270564344" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270564344">(Feb 03 2022 at 15:13)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/blob/7f3590b4184c03b0ddccc7b5ff7d0a8c88d9f2ac/src/algebra/category/Module/adjunctions.lean#L47">https://github.com/leanprover-community/mathlib/blob/7f3590b4184c03b0ddccc7b5ff7d0a8c88d9f2ac/src/algebra/category/Module/adjunctions.lean#L47</a></p>
<p><span aria-label="sad" class="emoji emoji-2639" role="img" title="sad">:sad:</span></p>



<a name="270564422"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270564422" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270564422">(Feb 03 2022 at 15:14)</a>:</h4>
<p>The universes there need to be fixed as well.</p>



<a name="270565319"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270565319" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270565319">(Feb 03 2022 at 15:20)</a>:</h4>
<p><span class="user-mention silent" data-user-id="243562">Adam Topaz</span> <a href="#narrow/stream/267928-condensed-mathematics/topic/Potential.20Refactor/near/270564422">said</a>:</p>
<blockquote>
<p>The universes there need to be fixed as well.</p>
</blockquote>
<p>It looks like this file depends on the monoidal structure, so we should fix <code>algebra/Module/monoidal</code> first</p>



<a name="270570145"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270570145" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270570145">(Feb 03 2022 at 15:49)</a>:</h4>
<p>I pushed some WIP for the universe generalization of the monoidal structure in <a href="https://github.com/leanprover-community/mathlib/tree/universe_monoidal_module">branch#universe_monoidal_module</a><br>
Please feel free to push to this branch!</p>



<a name="270570252"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270570252" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270570252">(Feb 03 2022 at 15:50)</a>:</h4>
<p>(I have to teach soon, so I can't work on this more right now.)</p>



<a name="270573060"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270573060" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270573060">(Feb 03 2022 at 16:06)</a>:</h4>
<p>(oops! I wrote punit instead of pempty, let me fix)</p>



<a name="270573854"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270573854" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270573854">(Feb 03 2022 at 16:11)</a>:</h4>
<p>FWIW I think <code>mv_polynomial punit</code> is, to some extent, not even really a hack if you think about this <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>T</mi><mrow><mo>−</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">T^{-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span> as a specific thing which is nominally different from other generators of polynomial rings. You could define</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">inductive</span> <span class="n">cond_gen</span>
<span class="bp">|</span> <span class="n">Tinv</span>
</code></pre></div>
<p>And then at that point you could put <code>cond_gen</code> in universe <code>u+1</code> on the general principle that we only care about one universe at a time.</p>



<a name="270574281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270574281" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270574281">(Feb 03 2022 at 16:14)</a>:</h4>
<p><span class="user-mention silent" data-user-id="243562">Adam Topaz</span> <a href="#narrow/stream/267928-condensed-mathematics/topic/Potential.20Refactor/near/270570145">said</a>:</p>
<blockquote>
<p>I pushed some WIP for the universe generalization of the monoidal structure in <a href="https://github.com/leanprover-community/mathlib/tree/universe_monoidal_module">branch#universe_monoidal_module</a><br>
Please feel free to push to this branch!</p>
</blockquote>
<p>What's the statement you're going for? An adjunction between <code>Type (max u v)</code> and <code>Module.{max (u v)} R</code>?</p>



<a name="270574322"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270574322" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270574322">(Feb 03 2022 at 16:14)</a>:</h4>
<p>True. But <code>mv_polynomial pempty ℤ</code> is very much a hack to place <code>ℤ</code> in <code>Type u</code>.</p>



<a name="270575381"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270575381" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270575381">(Feb 03 2022 at 16:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110032">Reid Barton</span> <a href="#narrow/stream/267928-condensed-mathematics/topic/Potential.20Refactor/near/270574281">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="243562">Adam Topaz</span> <a href="#narrow/stream/267928-condensed-mathematics/topic/Potential.20Refactor/near/270570145">said</a>:</p>
<blockquote>
<p>I pushed some WIP for the universe generalization of the monoidal structure in <a href="https://github.com/leanprover-community/mathlib/tree/universe_monoidal_module">branch#universe_monoidal_module</a><br>
Please feel free to push to this branch!</p>
</blockquote>
<p>What's the statement you're going for? An adjunction between <code>Type (max u v)</code> and <code>Module.{max (u v)} R</code>?</p>
</blockquote>
<p>In that branch, just the monoidal structure on <code>Module.{max v u} R</code> where <code>R : Type u</code> is a <code>comm_ring R</code>..</p>



<a name="270575419"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270575419" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270575419">(Feb 03 2022 at 16:21)</a>:</h4>
<p>Once that's done, we can fix the universes similarly in <code>algebra/category/Module/adjunctions</code>.</p>



<a name="270575591"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270575591" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270575591">(Feb 03 2022 at 16:22)</a>:</h4>
<p>The current monoidal structure on <code>Module R</code> only works for <code>Module.{u} R</code> with <code>R : Type u</code> because the tensor unit is defined to be <code>Module.of R R</code>.</p>



<a name="270575699"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270575699" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270575699">(Feb 03 2022 at 16:23)</a>:</h4>
<p>Feel free to replace <code>tensor_unit</code> with <code>Module.of R (ulift R)</code>, if you think that would be better!</p>



<a name="270575713"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270575713" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270575713">(Feb 03 2022 at 16:23)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/267928-condensed-mathematics/topic/Potential.20Refactor/near/270562734">said</a>:</p>
<blockquote>
<p><a href="https://github.com/leanprover-community/mathlib/pull/11802">#11802</a> generalizes universes for colimits in <code>Module R</code> -- let's see if CI likes it.</p>
</blockquote>
<p>The build passed. Linter raised a universe issue, which I fixed. So this should be good now.</p>



<a name="270575936"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270575936" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270575936">(Feb 03 2022 at 16:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="243562">Adam Topaz</span> <a href="#narrow/stream/267928-condensed-mathematics/topic/Potential.20Refactor/near/270575699">said</a>:</p>
<blockquote>
<p>Feel free to replace <code>tensor_unit</code> with <code>Module.of R (ulift R)</code>, if you think that would be better!</p>
</blockquote>
<p>You would have to register a module instance for <code>ulift R</code> in this case.</p>



<a name="270576122"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270576122" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270576122">(Feb 03 2022 at 16:26)</a>:</h4>
<p>Alright, I really do have to go teach now (class starts in 3 mins)</p>



<a name="270576331"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270576331" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270576331">(Feb 03 2022 at 16:27)</a>:</h4>
<p>And they say they aren't addicted</p>



<a name="270595628"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270595628" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270595628">(Feb 03 2022 at 18:29)</a>:</h4>
<p>I can't seem to find the universal property of <code>mv_polynomial</code> (as the free commutative algebra on a type). Am I just blind?</p>



<a name="270596363"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270596363" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270596363">(Feb 03 2022 at 18:34)</a>:</h4>
<p>I suppose we are meant to use <a href="https://leanprover-community.github.io/mathlib_docs/find/mv_polynomial.aeval">docs#mv_polynomial.aeval</a> and <a href="https://leanprover-community.github.io/mathlib_docs/find/mv_polynomial.aeval_unique">docs#mv_polynomial.aeval_unique</a> ?</p>



<a name="270596429"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270596429" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270596429">(Feb 03 2022 at 18:35)</a>:</h4>
<p>Yes, I think so</p>



<a name="270604316"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270604316" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270604316">(Feb 03 2022 at 19:29)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/11807">#11807</a></p>



<a name="270604442"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270604442" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270604442">(Feb 03 2022 at 19:30)</a>:</h4>
<p>The only drawback I see is that now things have become noncomputable, due to the use of <code>mv_polynomial</code></p>



<a name="270605165"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270605165" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270605165">(Feb 03 2022 at 19:36)</a>:</h4>
<p>So I would also expect that these definitions would become hard to use because one of the universe parameters (I guess <code>v</code>) only appears in <code>Module.{max v u} R</code> in the arguments</p>



<a name="270605595"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270605595" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270605595">(Feb 03 2022 at 19:38)</a>:</h4>
<p>I hope that in practice we either have <code>u = v</code> or <code>u = 0</code>, so maybe it will be okay? But yeah, if we want something for the most general universe parameters it may require manually adding universes.</p>



<a name="270605909"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270605909" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270605909">(Feb 03 2022 at 19:41)</a>:</h4>
<p>does LTE use these? does it build against your PR?</p>



<a name="270605944"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270605944" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270605944">(Feb 03 2022 at 19:41)</a>:</h4>
<p>I haven't tried.</p>



<a name="270606017"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270606017" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270606017">(Feb 03 2022 at 19:41)</a>:</h4>
<p>But we don't really use <code>Module</code> at all yet, so I think it's fine (for LTE at least)</p>



<a name="270606377"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270606377" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270606377">(Feb 03 2022 at 19:44)</a>:</h4>
<p>I think there is some linter which tries to guess whether this will be an issue, so we can see what it says.</p>



<a name="270606442"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270606442" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270606442">(Feb 03 2022 at 19:44)</a>:</h4>
<p>Yeah, that's the same  linter that caught Johan's PR at first</p>



<a name="270606587"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270606587" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270606587">(Feb 03 2022 at 19:45)</a>:</h4>
<p>If there are no users yet, then a priori it's hard to know whether you're actually making things better than if you just had to use <code>Module (ulift R)</code> (and maybe you are making things worse in the happy case of rings and modules in the same universe).</p>



<a name="270607150"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270607150" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270607150">(Feb 03 2022 at 19:49)</a>:</h4>
<p>My gut feeling is that working with things like <code>Module.{v u} R</code> is not worth it in the long run</p>



<a name="270607422"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270607422" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270607422">(Feb 03 2022 at 19:51)</a>:</h4>
<p>The ideal situation would be if it were possible to write <code>R : Type u</code> <code>[comm_ring R]</code>, <code>u \leq v</code> and <code>Module.{v} R</code>.</p>



<a name="270607425"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270607425" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270607425">(Feb 03 2022 at 19:51)</a>:</h4>
<p>I mean once the tensor unit is not <code>R</code> anyways, seems like you might as well work with modules over it instead</p>



<a name="270607451"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270607451" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270607451">(Feb 03 2022 at 19:51)</a>:</h4>
<p>Yeah, it would be nice if we could have a coherent story about how we'd like universes to work.</p>



<a name="270607536"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270607536" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270607536">(Feb 03 2022 at 19:52)</a>:</h4>
<p>Though in this case, the tensor unit would still not be <code>R</code> if <code>u &lt; v</code> (it would fix some other things though).</p>



<a name="270607652"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270607652" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270607652">(Feb 03 2022 at 19:52)</a>:</h4>
<p>I guess cumulative universes would fix that.</p>



<a name="270607892"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270607892" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270607892">(Feb 03 2022 at 19:54)</a>:</h4>
<p>Does <code>ulift \Z</code> have a ring instance registered in mathlib?</p>



<a name="270608037"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270608037" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270608037">(Feb 03 2022 at 19:55)</a>:</h4>
<p>Ah, it does in <code>algebra.ring.ulift</code>. Maybe we should go with that approach? <span class="user-mention" data-user-id="112680">@Johan Commelin</span> what do you think?</p>



<a name="270608381"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270608381" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270608381">(Feb 03 2022 at 19:57)</a>:</h4>
<p>PS. <a href="https://github.com/leanprover-community/mathlib/pull/11807">#11807</a> already broke -- it looks like the monoidal structure of <code>Module.{u} R</code> with <code>R : Type u</code> was not found.</p>



<a name="270610297"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270610297" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270610297">(Feb 03 2022 at 20:10)</a>:</h4>
<p>Well... the colimits thing is also not ideal. With the new change:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.category.Module.colimits</span>

<span class="kn">open</span> <span class="n">category_theory.limits</span>
<span class="kd">universes</span> <span class="n">u</span> <span class="n">v</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">has_colimits</span> <span class="o">(</span><span class="n">Module.</span><span class="o">{</span><span class="mi">37</span><span class="o">}</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">:=</span> <span class="n">infer_instance</span>
<span class="kd">example</span> <span class="o">:</span> <span class="n">has_colimits</span> <span class="o">(</span><span class="n">Module.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">:=</span> <span class="n">infer_instance</span>
<span class="kd">example</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">:</span> <span class="n">has_colimits</span> <span class="o">(</span><span class="n">Module.</span><span class="o">{</span><span class="n">max</span> <span class="n">u</span> <span class="n">v</span><span class="o">}</span> <span class="n">R</span><span class="o">)</span> <span class="o">:=</span> <span class="n">infer_instance</span>
<span class="kd">example</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">:</span> <span class="n">has_colimits</span> <span class="o">(</span><span class="n">Module.</span><span class="o">{</span><span class="n">max</span> <span class="n">v</span> <span class="n">u</span><span class="o">}</span> <span class="n">R</span><span class="o">)</span> <span class="o">:=</span> <span class="n">infer_instance</span> <span class="c1">-- fails</span>
<span class="kd">example</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">:</span> <span class="n">has_colimits</span> <span class="o">(</span><span class="n">Module.</span><span class="o">{</span><span class="n">v</span><span class="o">}</span> <span class="n">R</span><span class="o">)</span> <span class="o">:=</span> <span class="n">infer_instance</span> <span class="c1">-- fails</span>
</code></pre></div>



<a name="270611682"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270611682" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270611682">(Feb 03 2022 at 20:21)</a>:</h4>
<p>What about</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">:</span> <span class="n">has_colimits</span> <span class="o">(</span><span class="n">Module.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="n">R</span><span class="o">)</span> <span class="o">:=</span> <span class="n">infer_instance</span>
</code></pre></div>



<a name="270611815"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270611815" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270611815">(Feb 03 2022 at 20:22)</a>:</h4>
<p>That would require changing the construction altogether.</p>



<a name="270611829"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270611829" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270611829">(Feb 03 2022 at 20:22)</a>:</h4>
<p>aha!</p>



<a name="270611835"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270611835" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270611835">(Feb 03 2022 at 20:22)</a>:</h4>
<p>The current construction is an inductive-quotient construction</p>



<a name="270611854"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270611854" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270611854">(Feb 03 2022 at 20:22)</a>:</h4>
<p>But it is actu... gotcha.</p>



<a name="270611885"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270611885" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270611885">(Feb 03 2022 at 20:23)</a>:</h4>
<p>It <em>is</em> actually true though right?</p>



<a name="270611897"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270611897" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270611897">(Feb 03 2022 at 20:23)</a>:</h4>
<p>I think so, yes.</p>



<a name="270611944"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270611944" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270611944">(Feb 03 2022 at 20:23)</a>:</h4>
<p>Well, with the correctly sized index category.</p>



<a name="270611966"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270611966" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270611966">(Feb 03 2022 at 20:23)</a>:</h4>
<p>I think a marginally better-known example of this phenomenon is the "topos" of G-sets for G a large group</p>



<a name="270612482"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270612482" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270612482">(Feb 03 2022 at 20:27)</a>:</h4>
<p>Any small collection of such sets could be viewed as having an action by some small quotient of G</p>



<a name="270612526"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270612526" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270612526">(Feb 03 2022 at 20:27)</a>:</h4>
<p>But the whole category is not generated by a set of objects (if G has a proper class of set-sized quotients). Quite similar to condensed sets really.</p>



<a name="270612554"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270612554" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270612554">(Feb 03 2022 at 20:27)</a>:</h4>
<p>So I think <code>Module.{v u} R</code> is cocomplete, but (generally) not locally presentable</p>



<a name="270613814"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270613814" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270613814">(Feb 03 2022 at 20:36)</a>:</h4>
<p>Anyways, assuming you don't want to do the other construction...</p>



<a name="270613874"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270613874" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270613874">(Feb 03 2022 at 20:36)</a>:</h4>
<p>Since <code>has_colimits</code> is a Prop, it might be okay to have both the old and new instances?</p>



<a name="270613996"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270613996" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270613996">(Feb 03 2022 at 20:37)</a>:</h4>
<p>But in general, this kind of thing is why I think <code>Module.{v u}</code> is a bad idea--more precisely, it would be better to invest the time into making it easier to deal with <code>ulift</code></p>



<a name="270619034"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270619034" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270619034">(Feb 03 2022 at 21:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110032">Reid Barton</span> <a href="#narrow/stream/267928-condensed-mathematics/topic/Potential.20Refactor/near/270613874">said</a>:</p>
<blockquote>
<p>Since <code>has_colimits</code> is a Prop, it might be okay to have both the old and new instances?</p>
</blockquote>
<p>I think we can just add these instances manually.</p>



<a name="270619210"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270619210" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270619210">(Feb 03 2022 at 21:18)</a>:</h4>
<p>This works</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.category.Module.colimits</span>

<span class="kn">open</span> <span class="n">category_theory.limits</span>
<span class="kd">universes</span> <span class="n">u</span> <span class="n">v</span>

<span class="kd">instance</span> <span class="n">foo1</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">:</span> <span class="n">has_colimits</span> <span class="o">(</span><span class="n">Module.</span><span class="o">{</span><span class="n">max</span> <span class="n">v</span> <span class="n">u</span><span class="o">}</span> <span class="n">R</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">Module.colimits.has_colimits_Module.</span><span class="o">{</span><span class="n">v</span> <span class="n">u</span><span class="o">}</span>

<span class="kd">instance</span> <span class="n">foo2</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">:</span> <span class="n">has_colimits</span> <span class="o">(</span><span class="n">Module.</span><span class="o">{</span><span class="n">v</span><span class="o">}</span> <span class="n">R</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">Module.colimits.has_colimits_Module.</span><span class="o">{</span><span class="n">v</span> <span class="n">v</span><span class="o">}</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">has_colimits</span> <span class="o">(</span><span class="n">Module.</span><span class="o">{</span><span class="mi">37</span><span class="o">}</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">:=</span> <span class="n">infer_instance</span>
<span class="kd">example</span> <span class="o">:</span> <span class="n">has_colimits</span> <span class="o">(</span><span class="n">Module.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">:=</span> <span class="n">infer_instance</span>
<span class="kd">example</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">:</span> <span class="n">has_colimits</span> <span class="o">(</span><span class="n">Module.</span><span class="o">{</span><span class="n">max</span> <span class="n">u</span> <span class="n">v</span><span class="o">}</span> <span class="n">R</span><span class="o">)</span> <span class="o">:=</span> <span class="n">infer_instance</span>
<span class="kd">example</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">:</span> <span class="n">has_colimits</span> <span class="o">(</span><span class="n">Module.</span><span class="o">{</span><span class="n">max</span> <span class="n">v</span> <span class="n">u</span><span class="o">}</span> <span class="n">R</span><span class="o">)</span> <span class="o">:=</span> <span class="n">infer_instance</span>
<span class="kd">example</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">:</span> <span class="n">has_colimits</span> <span class="o">(</span><span class="n">Module.</span><span class="o">{</span><span class="n">v</span><span class="o">}</span> <span class="n">R</span><span class="o">)</span> <span class="o">:=</span> <span class="n">infer_instance</span>
</code></pre></div>



<a name="270624344"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270624344" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270624344">(Feb 03 2022 at 21:58)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/11812">#11812</a></p>



<a name="270624428"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270624428" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270624428">(Feb 03 2022 at 21:59)</a>:</h4>
<p>I hope this will pass the strict background check by the typeclass police.</p>



<a name="270659738"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270659738" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270659738">(Feb 04 2022 at 02:27)</a>:</h4>
<p><span class="user-mention" data-user-id="243562">@Adam Topaz</span>  Which PRs should I be reviewing now?</p>



<a name="270659764"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270659764" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270659764">(Feb 04 2022 at 02:27)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/11807">#11807</a> is broken -- ignore it (I tagged as <code>maybe later</code>)</p>
<p><a href="https://github.com/leanprover-community/mathlib/pull/11812">#11812</a> should be good to go</p>



<a name="270659831"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270659831" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270659831">(Feb 04 2022 at 02:28)</a>:</h4>
<p>I think Reid convinced me to go with <code>Module (ulift \Z)</code>. What do you think?</p>



<a name="270659878"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270659878" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270659878">(Feb 04 2022 at 02:29)</a>:</h4>
<p><img alt=":merge:" class="emoji" src="https://zulip-avatars.s3.amazonaws.com/3121/emoji/images/18527.png" title="merge"> <a href="https://github.com/leanprover-community/mathlib/pull/11812">#11812</a></p>



<a name="270659997"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270659997" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270659997">(Feb 04 2022 at 02:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="243562">Adam Topaz</span> <a href="#narrow/stream/267928-condensed-mathematics/topic/Potential.20Refactor/near/270659831">said</a>:</p>
<blockquote>
<p>I think Reid convinced me to go with <code>Module (ulift \Z)</code>. What do you think?</p>
</blockquote>
<p>So that <code>u = v</code> everywhere in sight? I guess that makes sense. I don't have a preference between <code>ulift ℤ</code> and <code>mv_polynomial pempty ℤ</code>. Since we need to go back and forth between modules over <code>ℤ</code> and <code>ℤ[T⁻¹]</code>, maybe the <code>mv_polynomial</code> version is a bit smoother than <code>ulift</code>?</p>



<a name="270660092"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270660092" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270660092">(Feb 04 2022 at 02:32)</a>:</h4>
<p>I think over the next few days, I'll try to just change the stuff we have for <code>Condensed Ab</code> to <code>Condensed (Module A)</code></p>



<a name="270660111"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270660111" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270660111">(Feb 04 2022 at 02:33)</a>:</h4>
<p>We can decide on the <code>ulift</code> vs <code>polynomial</code> issue later.</p>



<a name="270660152"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270660152" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270660152">(Feb 04 2022 at 02:33)</a>:</h4>
<p>Yeah, that makes sense</p>



<a name="270660211"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270660211" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270660211">(Feb 04 2022 at 02:34)</a>:</h4>
<p>If we go with <code>ulift Z</code>, we could just use <code>polynomial (ulift Z)</code> and call it good</p>



<a name="270660212"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270660212" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270660212">(Feb 04 2022 at 02:34)</a>:</h4>
<p>But in that refactor, you can assume <code>A</code> to be in the correct universe, which is a relief.</p>



<a name="270660330"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270660330" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270660330">(Feb 04 2022 at 02:36)</a>:</h4>
<p>Fortunately, the stuff I did for the <code>ExtrSheaf</code> equivalence uses arbitrary categories which have finite biproducts, so that should be effortless to generalize.</p>



<a name="270660752"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270660752" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270660752">(Feb 04 2022 at 02:45)</a>:</h4>
<p>Big shoutout to abstraction and generalization!</p>



<a name="270747875"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270747875" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270747875">(Feb 04 2022 at 17:41)</a>:</h4>
<p>oops! <a href="https://github.com/leanprover-community/mathlib/pull/11837">#11837</a></p>
<p>Also the following is done (for any <code>R : Type (u+1)</code> with <code>[ring R]</code>, where <code>CondensedMod R := Condensed.{u} (Module.{u+1} R)</code>)</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="n">CondensedMod_has_enough_projective</span> <span class="o">:</span> <span class="n">enough_projectives</span> <span class="o">(</span><span class="n">CondensedMod</span> <span class="n">R</span><span class="o">)</span> <span class="o">:=</span>
</code></pre></div>



<a name="270748275"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/270748275" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#270748275">(Feb 04 2022 at 17:44)</a>:</h4>
<p>I also introduced the notation <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo stretchy="false">[</mo><mi>S</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">R[S]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mclose">]</span></span></span></span> for a ring <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span> and <code>S : Profinite</code>, see e.g. <a href="https://github.com/leanprover-community/lean-liquid/blob/3725961d6024d9bb5f7ee81e62197574b7d8ab47/src/condensed/projective_resolution_module.lean#L134">https://github.com/leanprover-community/lean-liquid/blob/3725961d6024d9bb5f7ee81e62197574b7d8ab47/src/condensed/projective_resolution_module.lean#L134</a></p>



<a name="271329126"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/Potential%20Refactor/near/271329126" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/Potential.20Refactor.html#271329126">(Feb 09 2022 at 18:53)</a>:</h4>
<p>Just for the record: with the new roadmap it's clear that we can continue using <code>Condensed Ab</code>. There's no more need to work with modules over <code>ulift</code>ed rings, etc...</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>