---
layout: archive
title: Zulip Chat Archive
permalink: /stream/267928-condensed-mathematics/topic/.5Bmodule.2Efree.200.5D.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/index.html">condensed mathematics</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/.5Bmodule.2Efree.200.5D.html">[module.free 0]</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="273428966"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/%5Bmodule.free%200%5D/near/273428966" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Fabian Glöckle <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/.5Bmodule.2Efree.200.5D.html#273428966">(Feb 27 2022 at 22:32)</a>:</h4>
<p>Have we already defined the <code>module.free</code> instance of the zero module over R? It does not seem to follow  directly from the <code>pi</code> instance <a href="https://leanprover-community.github.io/mathlib_docs/find/module.free.pi">docs#module.free.pi</a>. I will add</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">@[instance]</span>
<span class="kd">lemma</span> <span class="n">free_zero</span> <span class="o">:</span> <span class="n">module.free.</span><span class="o">{</span><span class="n">u</span> <span class="n">v</span><span class="o">}</span> <span class="n">R</span> <span class="n">punit</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">apply</span> <span class="bp">@</span><span class="n">module.free.of_basis</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span> <span class="n">empty</span> <span class="n">_</span><span class="o">,</span>
  <span class="n">refine</span> <span class="o">⟨⟨</span><span class="n">_</span><span class="o">,</span> <span class="n">_</span><span class="o">,</span> <span class="n">_</span><span class="o">,</span> <span class="n">_</span><span class="o">,</span> <span class="n">_</span> <span class="o">,</span> <span class="n">_</span><span class="o">⟩⟩,</span>
  <span class="n">all_goals</span> <span class="o">{</span><span class="n">obviously</span><span class="o">},</span>
  <span class="c1">-- Left to show: provide a `multiset empty` with a `nodup` proof.</span>
  <span class="n">exact</span> <span class="mi">0</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">finset.empty.nodup</span>
<span class="kd">end</span>
</code></pre></div>
<p>somewhere in the <code>for_mathlib</code> folder.</p>



<a name="273429099"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/%5Bmodule.free%200%5D/near/273429099" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/.5Bmodule.2Efree.200.5D.html#273429099">(Feb 27 2022 at 22:35)</a>:</h4>
<p>It is a dangerous instance, right? How can Lean guess <code>R</code>?</p>



<a name="273429171"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/%5Bmodule.free%200%5D/near/273429171" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/.5Bmodule.2Efree.200.5D.html#273429171">(Feb 27 2022 at 22:36)</a>:</h4>
<p><code>R</code> would be known from the instance we're looking for</p>



<a name="273429186"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/%5Bmodule.free%200%5D/near/273429186" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Fabian Glöckle <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/.5Bmodule.2Efree.200.5D.html#273429186">(Feb 27 2022 at 22:37)</a>:</h4>
<p>the only thing I can say is that without this instance, the type class search failed in my case and with it it succeeded</p>



<a name="273429226"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/%5Bmodule.free%200%5D/near/273429226" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Fabian Glöckle <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/.5Bmodule.2Efree.200.5D.html#273429226">(Feb 27 2022 at 22:38)</a>:</h4>
<p>i.e. R was known from the context</p>



<a name="273429229"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/%5Bmodule.free%200%5D/near/273429229" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Fabian Glöckle <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/.5Bmodule.2Efree.200.5D.html#273429229">(Feb 27 2022 at 22:38)</a>:</h4>
<p>I do not know if this breaks other things, though</p>



<a name="273429235"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/%5Bmodule.free%200%5D/near/273429235" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/.5Bmodule.2Efree.200.5D.html#273429235">(Feb 27 2022 at 22:38)</a>:</h4>
<p>I vaguely remember having thought about that, but it's very possible I was just wrong not adding it, so please go ahead</p>



<a name="273429242"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/%5Bmodule.free%200%5D/near/273429242" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/.5Bmodule.2Efree.200.5D.html#273429242">(Feb 27 2022 at 22:39)</a>:</h4>
<p>At worst the linter will complain</p>



<a name="273429249"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/%5Bmodule.free%200%5D/near/273429249" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Fabian Glöckle <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/.5Bmodule.2Efree.200.5D.html#273429249">(Feb 27 2022 at 22:39)</a>:</h4>
<p>that's true :D let's see</p>



<a name="273429455"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/%5Bmodule.free%200%5D/near/273429455" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/.5Bmodule.2Efree.200.5D.html#273429455">(Feb 27 2022 at 22:44)</a>:</h4>
<p>We have <a href="https://leanprover-community.github.io/mathlib_docs/find/module.free.of_subsingleton">docs#module.free.of_subsingleton</a>... <code>punit</code> doesn't have a <code>subsingleton</code> instance?</p>



<a name="273429544"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/%5Bmodule.free%200%5D/near/273429544" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Fabian Glöckle <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/.5Bmodule.2Efree.200.5D.html#273429544">(Feb 27 2022 at 22:47)</a>:</h4>
<p>it does</p>



<a name="273429548"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/%5Bmodule.free%200%5D/near/273429548" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Fabian Glöckle <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/.5Bmodule.2Efree.200.5D.html#273429548">(Feb 27 2022 at 22:47)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/punit.subsingleton">docs#punit.subsingleton</a></p>



<a name="273429668"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/%5Bmodule.free%200%5D/near/273429668" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Fabian Glöckle <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/.5Bmodule.2Efree.200.5D.html#273429668">(Feb 27 2022 at 22:50)</a>:</h4>
<p>so i get<br>
<code>invalid apply tactic, failed to synthesize type class instance for
  module.projective R punit</code><br>
the story should be <code>subsingleton -&gt; free -&gt; projective</code><br>
what can have gone wrong?<br>
(I have no model of how typeclass search actually works)</p>



<a name="273429669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/%5Bmodule.free%200%5D/near/273429669" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/.5Bmodule.2Efree.200.5D.html#273429669">(Feb 27 2022 at 22:50)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">free_zero</span> <span class="o">:</span> <span class="n">module.free.</span><span class="o">{</span><span class="n">u</span> <span class="n">v</span><span class="o">}</span> <span class="n">R</span> <span class="n">punit</span> <span class="o">:=</span>
<span class="n">module.free.of_subsingleton</span> <span class="n">_</span> <span class="n">_</span>
</code></pre></div>
<p>works, but <code>apply_instance</code> doesn't.</p>



<a name="273429673"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/%5Bmodule.free%200%5D/near/273429673" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/.5Bmodule.2Efree.200.5D.html#273429673">(Feb 27 2022 at 22:50)</a>:</h4>
<p>I don't know why <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="273429860"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/%5Bmodule.free%200%5D/near/273429860" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Fabian Glöckle <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/.5Bmodule.2Efree.200.5D.html#273429860">(Feb 27 2022 at 22:56)</a>:</h4>
<p>maybe because of universe polymorphism or something similar..</p>



<a name="273429879"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/%5Bmodule.free%200%5D/near/273429879" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Fabian Glöckle <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/.5Bmodule.2Efree.200.5D.html#273429879">(Feb 27 2022 at 22:57)</a>:</h4>
<p>but that one-liner certainly looks better</p>



<a name="273430186"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/%5Bmodule.free%200%5D/near/273430186" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/.5Bmodule.2Efree.200.5D.html#273430186">(Feb 27 2022 at 23:00)</a>:</h4>
<p>It's possible. We should fix it in mathlib</p>



<a name="273430303"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/%5Bmodule.free%200%5D/near/273430303" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/.5Bmodule.2Efree.200.5D.html#273430303">(Feb 27 2022 at 23:03)</a>:</h4>
<p>Maybe it's because of the low priority, but I don't understand these things well enough</p>



<a name="273430360"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/%5Bmodule.free%200%5D/near/273430360" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Fabian Glöckle <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/.5Bmodule.2Efree.200.5D.html#273430360">(Feb 27 2022 at 23:04)</a>:</h4>
<p>I'll ask on general</p>



<a name="273430605"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/%5Bmodule.free%200%5D/near/273430605" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Fabian Glöckle <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/.5Bmodule.2Efree.200.5D.html#273430605">(Feb 27 2022 at 23:10)</a>:</h4>
<p><a href="#narrow/stream/113488-general/topic/.5Bmodule.2Efree.20punit.5D">https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/.5Bmodule.2Efree.20punit.5D</a></p>



<a name="273430631"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/%5Bmodule.free%200%5D/near/273430631" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Fabian Glöckle <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/.5Bmodule.2Efree.200.5D.html#273430631">(Feb 27 2022 at 23:11)</a>:</h4>
<p><span class="user-mention silent" data-user-id="210057">Fabian Glöckle</span> <a href="#narrow/stream/267928-condensed-mathematics/topic/.5Bmodule.2Efree.200.5D/near/273429860">said</a>:</p>
<blockquote>
<p>maybe because of universe polymorphism or something similar..</p>
</blockquote>
<p>there's no universe metavariables, so this should probably not be the problem</p>



<a name="273430672"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/267928-condensed%20mathematics/topic/%5Bmodule.free%200%5D/near/273430672" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Fabian Glöckle <a href="https://leanprover-community.github.io/archive/stream/267928-condensed-mathematics/topic/.5Bmodule.2Efree.200.5D.html#273430672">(Feb 27 2022 at 23:12)</a>:</h4>
<p>anyway, thank you and good night!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>