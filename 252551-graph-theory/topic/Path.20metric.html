---
layout: archive
title: Zulip Chat Archive
permalink: /stream/252551-graph-theory/topic/Path.20metric.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/index.html">graph theory</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html">Path metric</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="269272623"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/269272623" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> bottine <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#269272623">(Jan 25 2022 at 15:27)</a>:</h4>
<p>Hey! I need to use the notion of path metric on a graph, and was wondering if:<br>
1) This would be fit for <code>combinatorics/graph_theory</code><br>
2) If so, anyone would coach me through mergeable code? I'm starting lean and feeling quite overwhelmed by it all, so some quidance would be welcome.<br>
3) Whether it would be better to have a code for a "path metric" associated to any type with a notion of paths that have well-behaved a length. This way, say the path metric of an arbitrary metric space could also be defined more easily.</p>



<a name="269272910"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/269272910" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#269272910">(Jan 25 2022 at 15:28)</a>:</h4>
<p>Have a look at <a href="https://github.com/leanprover-community/mathlib/pull/8737">#8737</a> to see what we're on about with paths <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="269273267"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/269273267" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> bottine <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#269273267">(Jan 25 2022 at 15:31)</a>:</h4>
<p>mmh, is that different from what's in the main branch? I think I can already use <code>G.walks x y</code> etc.</p>



<a name="269273295"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/269273295" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#269273295">(Jan 25 2022 at 15:31)</a>:</h4>
<p>I'm in the process of merging it</p>



<a name="269273374"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/269273374" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#269273374">(Jan 25 2022 at 15:31)</a>:</h4>
<p>I've only gotten through about 1/3-1/2 of it, I think</p>



<a name="269273431"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/269273431" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> bottine <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#269273431">(Jan 25 2022 at 15:32)</a>:</h4>
<p>ah, so <code>G.walks</code> is recent?</p>



<a name="269273510"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/269273510" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#269273510">(Jan 25 2022 at 15:32)</a>:</h4>
<p>Yeah, recent to mathlib</p>



<a name="269273605"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/269273605" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#269273605">(Jan 25 2022 at 15:33)</a>:</h4>
<p>For path metrics, I don't have a good sense of how it should be designed. What sort of theorems do you want to prove?</p>



<a name="269273810"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/269273810" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> bottine <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#269273810">(Jan 25 2022 at 15:34)</a>:</h4>
<p>Well, I mostly want to be able to get the metric space associated to a graph, so no particular theorem. But I feel like having an <code>emetric</code> space would be nice, and I guess something about the distance being realized by some path.</p>



<a name="269274145"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/269274145" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> bottine <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#269274145">(Jan 25 2022 at 15:37)</a>:</h4>
<p>I had the idea that (probably using quivers?) we could define a structure of "paths between two points" + concatenation, inversion, and empty path, and construct the path metric abstractly with this data only. Then the specific graph construction would follow easily, I guess, from what's already there. But I can't even write proofs now, so it's all hot air</p>



<a name="269274150"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/269274150" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#269274150">(Jan 25 2022 at 15:37)</a>:</h4>
<p>Is there something you're wanting to get to, though? Knowing what you (eventually) want to prove can help guide what will be good as a notion of a metric of a graph. (And guide what kind of graph.)</p>



<a name="269274248"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/269274248" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> bottine <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#269274248">(Jan 25 2022 at 15:37)</a>:</h4>
<p>I'm aiming at formalizing geometric group theory, or at least the basics.</p>



<a name="269274368"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/269274368" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#269274368">(Jan 25 2022 at 15:38)</a>:</h4>
<p>Also have a look at <a href="https://github.com/leanprover-community/mathlib/tree/hedetniemi">branch#hedetniemi</a>. A lot of cool stuff too.</p>



<a name="269274417"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/269274417" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#269274417">(Jan 25 2022 at 15:38)</a>:</h4>
<p>Is there something like if you choose a metric space structure for a group, then it's unique up to quasi-isometry?</p>



<a name="269274575"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/269274575" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> bottine <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#269274575">(Jan 25 2022 at 15:39)</a>:</h4>
<p><span class="user-mention" data-user-id="387244">@Yaël Dillies</span>  what's that about?</p>



<a name="269274670"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/269274670" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#269274670">(Jan 25 2022 at 15:40)</a>:</h4>
<p>Shitov's counterexample to Hedetniemi's conjecture.</p>



<a name="269274750"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/269274750" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> bottine <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#269274750">(Jan 25 2022 at 15:40)</a>:</h4>
<p><span class="user-mention" data-user-id="306601">@Kyle Miller</span> hum, it's a good question actually. the usual thing is "no matter the choice of finitely many generators", the result is quasi-isometric, but you know that already, I gues</p>



<a name="269275063"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/269275063" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> bottine <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#269275063">(Jan 25 2022 at 15:42)</a>:</h4>
<p>where is that question coming from?</p>



<a name="269275073"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/269275073" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#269275073">(Jan 25 2022 at 15:42)</a>:</h4>
<p>Because then you might consider using quivers for groups, and have a typeclass to associate some finite generating set for a group, and use all that to give a <code>metric_space</code> on the underyling type of the group, since any other choices lead to something that's quasi-isometric anyway.</p>



<a name="269276025"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/269276025" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#269276025">(Jan 25 2022 at 15:48)</a>:</h4>
<p>In another topic you brought up Stalling's theorem on ends, right? That seems like a nice sort of theorem to come up a plan for things to formalize. Or maybe even trying to prove subgroups of free groups are free by considering actions on trees?</p>



<a name="269286849"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/269286849" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> bottine <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#269286849">(Jan 25 2022 at 16:57)</a>:</h4>
<p>Indeed for Stalling (that's the long-term goal), but I  want to try and cover some general constructs of geometric group theory. So, on one hand, I'd like to have code for coarse Lipschitz maps and quasi-isometries, quasi-isometry groups, etc, eventually leading to a notion of ends for metric spaces. And on the other, I need Cayley graphs, and I'm not sure whether it's better to go directly from finitely generated groups to metric spaces, or first to define the Cayley graph, and the the metric associated to it.</p>



<a name="269287107"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/269287107" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> bottine <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#269287107">(Jan 25 2022 at 16:58)</a>:</h4>
<p>I'll also need to deal with HNN and amalgamated products,… for which I think defining Bass-Serre would perhaps be best, although complicated.</p>



<a name="269287745"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/269287745" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> bottine <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#269287745">(Jan 25 2022 at 17:01)</a>:</h4>
<p>I mean, it's all a bit fuzzy for now… my goals here are probably quite lofty, and for now it's very far away (still can't prove basic things) but we'll see how it fares.</p>



<a name="269288735"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/269288735" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> bottine <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#269288735">(Jan 25 2022 at 17:07)</a>:</h4>
<blockquote>
<p>Is there something like if you choose a metric space structure for a group, then it's unique up to quasi-isometry?</p>
</blockquote>
<p>I got confused by this question, which I interpreted as "is any metric on G preserved by G (acting on itself by multiplication) quasi-isometric to a metric given by a Cayley graph of a finite generating set", but taking, say, \delta_{x,y} as your metric clearly says this is false.  I wonder now under what conditions a transitive metric is QI to a word metric.</p>



<a name="269288802"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/269288802" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#269288802">(Jan 25 2022 at 17:07)</a>:</h4>
<p>Let's try to keep some of these lofty goals in mind since we'd want all that work leading up to it to actually be able to support the big theorems <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="269288947"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/269288947" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> bottine <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#269288947">(Jan 25 2022 at 17:08)</a>:</h4>
<p>fair enough :)</p>



<a name="269289385"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/269289385" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#269289385">(Jan 25 2022 at 17:11)</a>:</h4>
<p>Maybe you could start trying to formalize something in the realm of Bass-Serre theory? Maybe this is too challenging right now, but I think that'd give some ideas of what you'd need to be able to set things up correctly?</p>



<a name="269289625"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/269289625" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#269289625">(Jan 25 2022 at 17:12)</a>:</h4>
<p>(And full disclosure: I merely have colleagues who are geometric group theorists, and I went through part of Office Hours with a Geometric Group Theorist with one of my DRP students. I've seen some of Stallings's work because of its applications to 3-manifolds, which are more my interest.)</p>



<a name="269289812"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/269289812" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> bottine <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#269289812">(Jan 25 2022 at 17:13)</a>:</h4>
<p>The problem with Basse-Serre is that I'm really not familiar with it, and it's not "elementary", as say the Cayley graph is, so I fear I'd get lost trying to work both fronts (math + formalization), but maybe not. What makes you think Bass-Serre is a good place to start?</p>



<a name="269289940"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/269289940" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#269289940">(Jan 25 2022 at 17:14)</a>:</h4>
<p>I'm afraid that Cayley graphs might be <em>too</em> elementary to see what problems there might be in formalization</p>



<a name="269290208"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/269290208" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#269290208">(Jan 25 2022 at 17:16)</a>:</h4>
<p>Can you remind me how ends work with respect to groups and group actions in geometric group theory?</p>



<a name="269290255"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/269290255" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> bottine <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#269290255">(Jan 25 2022 at 17:16)</a>:</h4>
<p>mmh, I see. Say I start with B-S, then I stumble upon problems-in-factorization. What kind of problems should I expect, or more to the point, what kind of scenario "problem-reaction" can come up?</p>



<a name="269290450"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/269290450" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#269290450">(Jan 25 2022 at 17:17)</a>:</h4>
<p>Isn't there something where you study groups acting by quasiisometries on spaces? And then there's a map from ends of the group to ends of the space? (Is this where you need Cayley graphs, to be able to define the right kind of action here?</p>



<a name="269290562"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/269290562" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> bottine <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#269290562">(Jan 25 2022 at 17:18)</a>:</h4>
<p>huh, well, ends are "directions at infinity", and you can see that they are QI-invariant. Then by an argument that I tried to do in my head this night but didn't manage, you can see that in the case of finitely generated groups you have 0,1,2 or infinitely many ends.</p>



<a name="269290644"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/269290644" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> bottine <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#269290644">(Jan 25 2022 at 17:19)</a>:</h4>
<p>I don't know about that, but that sounds like a reasonable path to Stalling actually (I think you're not less knowledgeable about this than I am)</p>



<a name="269290718"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/269290718" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#269290718">(Jan 25 2022 at 17:19)</a>:</h4>
<p>What I was thinking with Bass-Serre is sort of simple: you've got this graph of groups, and you want to make a group out of it. There's a question of just how do you represent all this data. Ideally so that you can easily represent HNN extensions and amalgamated products.</p>



<a name="269290732"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/269290732" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> bottine <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#269290732">(Jan 25 2022 at 17:19)</a>:</h4>
<p>there is this Svarc-Milnor result about your group acting on a space and getting its geometry out of that.</p>



<a name="269290872"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/269290872" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> bottine <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#269290872">(Jan 25 2022 at 17:20)</a>:</h4>
<p>right: I recently saw a paper dealing only with groupoids, which removes some arbitrary choices</p>



<a name="269290931"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/269290931" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> bottine <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#269290931">(Jan 25 2022 at 17:20)</a>:</h4>
<p>then you have the "fundamental groupoid" instead of the fundamental group, and "action on a forest" instead of "action on a tree"</p>



<a name="269291018"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/269291018" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> bottine <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#269291018">(Jan 25 2022 at 17:21)</a>:</h4>
<p>The nice thing with B-S is that then you get Nielsen-Schreier and Kurosh and Grushko almost for free I believe.</p>



<a name="269291043"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/269291043" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#269291043">(Jan 25 2022 at 17:21)</a>:</h4>
<p>Another nice checkpoint that's come to mind is being able to show different basic groups are hyperbolic (esp. the free group of course)</p>



<a name="269291154"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/269291154" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> bottine <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#269291154">(Jan 25 2022 at 17:22)</a>:</h4>
<p>yeah, lots of things :) which is a bit overwhelming</p>



<a name="269291272"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/269291272" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> bottine <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#269291272">(Jan 25 2022 at 17:23)</a>:</h4>
<p>also amenability, but I figured having a robust base involving Cayley graphs, the metric, and all the basic quasi-isometry vocabulary is a good place to start (also allowing to learn the language)</p>



<a name="269291339"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/269291339" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#269291339">(Jan 25 2022 at 17:23)</a>:</h4>
<p>It's sounding like using <code>quiver</code> to model a Cayley graph on a group <code>G</code> will be a good plan (and if not, sorry ahead of time <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span>)</p>



<a name="269291639"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/269291639" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#269291639">(Jan 25 2022 at 17:25)</a>:</h4>
<p>I'm not sure how you'd go about giving a group a metric structure, but you can always start by doing it for <code>presented_group</code> and see how that goes</p>



<a name="269292379"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/269292379" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> bottine <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#269292379">(Jan 25 2022 at 17:30)</a>:</h4>
<p>alright, thanks for the insights !</p>



<a name="269292440"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/269292440" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#269292440">(Jan 25 2022 at 17:31)</a>:</h4>
<p>You can also ask <span class="user-mention" data-user-id="130377">@David Wärn</span> about path metrics in quivers, maybe when you get to that point, creating a post in <a class="stream" data-stream-id="217875" href="/#narrow/stream/217875-Is-there-code-for-X.3F">#Is there code for X?</a> and pinging him by invoking his name like I did. He's not subscribed to this stream so he won't see this one.</p>



<a name="269292494"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/269292494" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#269292494">(Jan 25 2022 at 17:31)</a>:</h4>
<p>I don't really know what he's doing with quivers, other than I noticed a PR or two in the past month.</p>



<a name="269318681"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/269318681" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#269318681">(Jan 25 2022 at 20:25)</a>:</h4>
<p><span class="user-mention" data-user-id="461830">@bottine</span> having big goals seems to work really well here. Even if you don't make it there, the process of trying to figure out how to get there makes mathlib grow in what are "clearly the right directions". And then later on if someone else enthusiastic comes along with similar goals they start where you stopped. The key is to aim for theorems which should be feasible, even if they're a long way away. Geometric group theory would be a brilliant thing to work towards in Lean and we certainly get passers-by who express an interest in this area. You'll certainly find people here who are happy to help if you make a start, and working on a project is by far the best way to learn Lean.</p>



<a name="269373276"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/269373276" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> bottine <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#269373276">(Jan 26 2022 at 07:49)</a>:</h4>
<p>That's a motivating thought :)</p>



<a name="274842606"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/274842606" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémi Bottinelli <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#274842606">(Mar 10 2022 at 14:34)</a>:</h4>
<p><span class="user-mention" data-user-id="306601">@Kyle Miller</span> I was wondering what the status was for a metric on a simple graph. I see <span class="user-mention" data-user-id="242586">@Vincent Beffara</span> has working code. What do you think would be needed to get something merged?</p>



<a name="274843688"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/274843688" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vincent Beffara <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#274843688">(Mar 10 2022 at 14:42)</a>:</h4>
<p>As far as I understand, there is a big design question about whether <code>connected_graph</code> should be a class or an assumption, and minor questions that I still have about using <code>well_founded.min</code> on the range of the distance function or <code>nat.find</code>, and I was waiting on that before sending a PR, but if it is something you are interested in right now I could clean up the code a little and submit, see what happens</p>



<a name="274843904"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/274843904" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#274843904">(Mar 10 2022 at 14:44)</a>:</h4>
<p>If it is a class, then it makes it possible for typeclass inference to find the metric space structure on the graph. Which looks like a good idea to me!</p>



<a name="274843960"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/274843960" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vincent Beffara <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#274843960">(Mar 10 2022 at 14:44)</a>:</h4>
<p>Right now it is</p>



<a name="274844000"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/274844000" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémi Bottinelli <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#274844000">(Mar 10 2022 at 14:44)</a>:</h4>
<p>Gladly, yeah. Is <code>nat.find</code> maybe preferred for computability reasons?</p>
<p>I'd like to give a try at formalizing ends of a graph, and it seems a good idea to have the metric at hand for this.</p>



<a name="274844299"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/274844299" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vincent Beffara <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#274844299">(Mar 10 2022 at 14:46)</a>:</h4>
<p><code>nat.find</code> has a nicer API, but I had trouble with it because "the smallest int such that there exists something" made it difficult for lean to infer implicit arguments. <code>well_founded.min</code> is closer to the metal</p>



<a name="274844396"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/274844396" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vincent Beffara <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#274844396">(Mar 10 2022 at 14:47)</a>:</h4>
<p>The graph structure itself OTOH is not a class at the moment</p>



<a name="274844988"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/274844988" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vincent Beffara <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#274844988">(Mar 10 2022 at 14:52)</a>:</h4>
<p>Also I had a question about whether connectivity in a graph should be defined as <code>refl_trans_gen G.adj x y</code> or as <code>nonempty (G.walk x y)</code>, but these are equivalent modulo computability issues on which I understand very little - though the definition would need to be in mathlib before that of the distance</p>



<a name="274845202"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/274845202" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vincent Beffara <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#274845202">(Mar 10 2022 at 14:53)</a>:</h4>
<p>(although now I would choose the <code>nonempty</code> version because it feels more general wrt other types of graph-like objects)</p>



<a name="274845730"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/274845730" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rémi Bottinelli <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#274845730">(Mar 10 2022 at 14:56)</a>:</h4>
<p>fwiw, I feel like <code>nonempty (…)</code> at least has the advantage of readability: it's immediately clear that it's says what it should</p>



<a name="274852001"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/274852001" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> James Gallicchio <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#274852001">(Mar 10 2022 at 15:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="242586">Vincent Beffara</span> <a href="#narrow/stream/252551-graph-theory/topic/Path.20metric/near/274844988">said</a>:</p>
<blockquote>
<p>these are equivalent modulo computability issues</p>
</blockquote>
<p>(what are the computability issues?)</p>



<a name="274876754"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/274876754" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#274876754">(Mar 10 2022 at 18:33)</a>:</h4>
<p><span class="user-mention" data-user-id="242586">@Vincent Beffara</span> Is <a href="https://github.com/vbeffara/lean/blob/main/src/graph_theory/metric.lean">your branch</a> up to date? I have a PR with basic definitions but not metrics, and I can merge in what you have here to check that it's compatible.</p>
<p>Regarding classes, I hesitate to make <code>connected_graph</code> a class, and I'm not sure it would help the problem of making graphs be metric spaces since they're not types so they can't be metric spaces anyway (it would make sense to me for <a href="https://leanprover-community.github.io/mathlib_docs/find/quiver">docs#quiver</a> to have a connected class if it doesn't already have one).  I tend to think of classes being used for values whose representations you think will remain fixed, and simple graphs can potentially change, similar to morphisms being rewritten.</p>



<a name="274877023"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/274877023" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#274877023">(Mar 10 2022 at 18:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="242586">Vincent Beffara</span> <a href="#narrow/stream/252551-graph-theory/topic/Path.20metric/near/274844396">said</a>:</p>
<blockquote>
<p>The graph structure itself OTOH is not a class at the moment</p>
</blockquote>
<p>Just to clarify, graphs will always be terms. Any classes we have will just be about having an interface to get things like the graph's <code>adj</code> relation, which will, generally speaking, ultimately have to be stored within the graph term.</p>



<a name="274877373"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/274877373" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#274877373">(Mar 10 2022 at 18:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="242586">Vincent Beffara</span> <a href="#narrow/stream/252551-graph-theory/topic/Path.20metric/near/274844988">said</a>:</p>
<blockquote>
<p><code>refl_trans_gen G.adj x y</code> or as <code>nonempty (G.walk x y)</code>, but these are equivalent modulo computability issues</p>
</blockquote>
<p>I believe you can strengthen your equivalence relation there and just say they're equivalent. Anything that's <code>Prop</code>-valued is going to be computationally irrelevant, and to use them in computation you need to use <code>decidable_rel</code> instances.</p>



<a name="274885036"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/274885036" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vincent Beffara <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#274885036">(Mar 10 2022 at 19:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="306601">Kyle Miller</span> <a href="#narrow/stream/252551-graph-theory/topic/Path.20metric/near/274876754">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="242586">Vincent Beffara</span> Is <a href="https://github.com/vbeffara/lean/blob/main/src/graph_theory/metric.lean">your branch</a> up to date? I have a PR with basic definitions but not metrics, and I can merge in what you have here to check that it's compatible.</p>
</blockquote>
<p>My branch is up to date, I merged mathlib on March 8 after your updates to simple_graph and it builds fine. In <code>path.lean</code> I put basic definitions about connectivity, hopefully they match yours :-)</p>



<a name="274887986"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/274887986" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#274887986">(Mar 10 2022 at 20:02)</a>:</h4>
<p><span class="user-mention" data-user-id="242586">@Vincent Beffara</span> I took another chunk of one of my branches and mixed in a chunk of your branch: <a href="https://github.com/leanprover-community/mathlib/pull/12574">#12574</a></p>
<p>I think it's best to just go with a noncomputable graph metric for now. We can add a computable algorithm later, but <code>Inf</code> is mathematically more convenient.</p>
<p>This is still a draft, but it shouldn't be too much more work. Please let me know what you think!</p>



<a name="274891216"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/274891216" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vincent Beffara <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#274891216">(Mar 10 2022 at 20:32)</a>:</h4>
<p>Nice, I just had a look.</p>
<p>I still have trouble with the whole junk value thing, especially since here we use <code>nat.Inf_eq_zero</code> where the garbage value is explicitly <code>0</code> and not something like <code>42</code>. I would feel better defining an <code>edist</code> with infinite value when the vertices are not connected. That's a minor issue anyway.</p>
<p>How about a <code>metric_space</code> instance then?</p>



<a name="274897826"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/274897826" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#274897826">(Mar 10 2022 at 21:33)</a>:</h4>
<p>Yeah, some <code>enat</code>-valued metric would be good for the case of disconnected graphs. I figured that we can define that once there's a need for it (probably most things will be about connected graphs).</p>
<p>We can't have that <code>metric_space</code> instance, unfortunately, because if both <code>G</code> and <code>G'</code> are connected simple graphs on vertex type <code>V</code>, they'd give conflicting <code>metric_space V</code> instances.</p>



<a name="274897956"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/274897956" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#274897956">(Mar 10 2022 at 21:34)</a>:</h4>
<p>You mean <code>enat</code>-valued, not <code>pnat</code>-valued, right?</p>



<a name="274898985"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/274898985" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#274898985">(Mar 10 2022 at 21:43)</a>:</h4>
<p>Potentially in the future we might have <code>G.V</code> being the vertex type, and it would be safe to do <code>metric_space G.V</code>, but that would probably cause difficulties with <code>simple_graph V</code> because <code>V</code> and <code>G.V</code> wouldn't syntactically be the same.</p>
<p>For <code>metric_space</code>, I still think you'd rather be dealing with <code>quiver</code>, since that's attaching a graph structure to a particular type. There could be</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">G.quiver</span> <span class="o">:=</span> <span class="n">V</span>

<span class="kd">instance</span> <span class="o">:</span> <span class="n">quiver</span> <span class="n">G.quiver</span> <span class="o">:=</span> <span class="bp">...</span>
</code></pre></div>
<p>or something like that if you do want to work with the graph type.</p>



<a name="274899479"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/274899479" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vincent Beffara <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#274899479">(Mar 10 2022 at 21:45)</a>:</h4>
<p>Wait, can't we just define the instance and use <code>letI</code>? It would be unfortunate to define a graph metric and then not be able to use the whole metric space API with it</p>



<a name="274899663"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/274899663" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#274899663">(Mar 10 2022 at 21:46)</a>:</h4>
<p>That's what we were going for <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span></p>



<a name="274899714"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/274899714" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#274899714">(Mar 10 2022 at 21:46)</a>:</h4>
<p>But it's not an "instance" anymore. That's the point.</p>



<a name="274899799"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/274899799" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vincent Beffara <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#274899799">(Mar 10 2022 at 21:47)</a>:</h4>
<p>I don't get your point. Isn't it an instance that is not discovered by typeclass inference?</p>



<a name="274899901"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/274899901" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#274899901">(Mar 10 2022 at 21:48)</a>:</h4>
<p>What we call instances are precisely the definitions which are discoverable by typeclass inference.</p>



<a name="274899918"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/274899918" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#274899918">(Mar 10 2022 at 21:48)</a>:</h4>
<p><code>instance = @[instance] def</code></p>



<a name="274899924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/274899924" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#274899924">(Mar 10 2022 at 21:48)</a>:</h4>
<p>A rule of thumb for typeclasses: <code>metric_space V</code> should be a function of <code>V</code>. Things can get very difficult when you violate this, even with <code>letI</code>.</p>



<a name="274899987"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/274899987" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#274899987">(Mar 10 2022 at 21:49)</a>:</h4>
<p>This is why I keep suggesting that you use <code>quiver</code>, since it's designed in such a way that this rule won't be violated.</p>



<a name="274900105"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/274900105" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#274900105">(Mar 10 2022 at 21:50)</a>:</h4>
<p><span class="user-mention silent" data-user-id="306601">Kyle Miller</span> <a href="#narrow/stream/252551-graph-theory/topic/Path.20metric/near/274899924">said</a>:</p>
<blockquote>
<p>Things can get very difficult when you violate this, even with <code>letI</code>.</p>
</blockquote>
<p>Really? I would like an example because I really can't see would go wrong if you endow <code>V</code> with the metric coming from <strong>one</strong> graph.</p>



<a name="274900369"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/274900369" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vincent Beffara <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#274900369">(Mar 10 2022 at 21:53)</a>:</h4>
<p>Ah but we want to endow <code>V</code> with the metrics coming from different graphs sometimes (e.g. two Cayley graphs on the same group are quasi-isometric)</p>



<a name="274900542"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/274900542" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#274900542">(Mar 10 2022 at 21:55)</a>:</h4>
<p>Yeah, I was going to answer Yael by mentioning Cayley graphs.</p>



<a name="274900670"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/274900670" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vincent Beffara <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#274900670">(Mar 10 2022 at 21:56)</a>:</h4>
<p>If I can ask, what exactly is solved by using <code>quiver</code>? Can't there be two different quivers on the same Type like for a <code>simple_graph</code>?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">class</span> <span class="n">quiver</span> <span class="o">(</span><span class="n">V</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="n">hom</span> <span class="o">:</span> <span class="n">V</span> <span class="bp">→</span> <span class="n">V</span> <span class="bp">→</span> <span class="kt">Sort</span> <span class="n">v</span><span class="o">)</span>
<span class="kd">class</span> <span class="n">graph_like</span> <span class="o">(</span><span class="n">V</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="n">adj</span> <span class="o">:</span> <span class="n">V</span> <span class="bp">→</span> <span class="n">V</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span>
</code></pre></div>
<p>these look identical to me ...</p>



<a name="274900792"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/274900792" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#274900792">(Mar 10 2022 at 21:57)</a>:</h4>
<p>If you want several metrics then yeah you're screwed.</p>



<a name="274901183"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/274901183" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#274901183">(Mar 10 2022 at 22:00)</a>:</h4>
<p>Just passing by, but the Cayley graph of a group <code>G</code> associated to a generating set <code>S</code> should probably be a type synonym <code>cayley G S</code>, which can be endowed with a canonical metric.</p>



<a name="274901632"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/274901632" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#274901632">(Mar 10 2022 at 22:02)</a>:</h4>
<p>Yes, but <code>quiver</code> is a class, meaning that we vow not to ever declare twice <code>quiver α</code> for any <code>α</code>.</p>



<a name="274901662"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/274901662" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#274901662">(Mar 10 2022 at 22:03)</a>:</h4>
<p>(or rather declare as an instance)</p>



<a name="274902056"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/274902056" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vincent Beffara <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#274902056">(Mar 10 2022 at 22:06)</a>:</h4>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/252551-graph-theory/topic/Path.20metric/near/274901632">said</a>:</p>
<blockquote>
<p>Yes, but <code>quiver</code> is a class, meaning that we vow not to ever declare twice <code>quiver α</code> for any <code>α</code>.</p>
</blockquote>
<p>I'm not ready to vow not to ever define different graphs on the same vertex set (especially given that I would rather define a probability measure on the set of all those graphs on the same vertex set).</p>



<a name="274902182"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/274902182" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#274902182">(Mar 10 2022 at 22:07)</a>:</h4>
<p><span class="user-mention" data-user-id="110050">@Sebastien Gouezel</span> That's exactly what I had in mind with my suggestion</p>



<a name="274902422"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/274902422" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#274902422">(Mar 10 2022 at 22:09)</a>:</h4>
<p><a href="#narrow/stream/113489-new-members/topic/bottine/near/269141053">Here's a link</a> to an example implementation, not to say it's how it should go.</p>



<a name="274902916"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/274902916" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vincent Beffara <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#274902916">(Mar 10 2022 at 22:13)</a>:</h4>
<p>I think I get it now, I had completely missed the implication about multiple definitions being prohibited and was scratching my head trying to figure out how replacing <code>Prop</code> with <code>Sort v</code> was helping in any way. Thanks for the clarification!</p>



<a name="274904950"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/252551-graph%20theory/topic/Path%20metric/near/274904950" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/252551-graph-theory/topic/Path.20metric.html#274904950">(Mar 10 2022 at 22:28)</a>:</h4>
<p><code>topological_space</code> is a class and yet we still manage to do things like define (and use) a lattice structure on the type of topological space structures on a type</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>