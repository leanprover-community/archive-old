---
layout: archive
title: Zulip Chat Archive
permalink: /stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/index.html">Program verification</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs.html">Arena allocation for ITPs</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="206617336"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/Arena%20allocation%20for%20ITPs/near/206617336" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris B <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs.html#206617336">(Aug 11 2020 at 19:05)</a>:</h4>
<p>Hi,<br>
I've been working on a rewrite of the Rust version of Lean's kernel for a while; it uses arenas to manage the type checker items (instead of reference counting). All of the ITPs I'm familiar with are either GC'd or are Lean, so I thought this would be an interesting data point for the CS people here who might find themselves writing software in the same vein. I rewrote it this way just to see whether some new insights about how the kernel is laid out could yield a performance benefit, and it ended up being ~3-4x faster than the other checkers while having a smaller memory footprint. The arena API is completely type safe and uses phantom lifetimes to achieve memory safety (arenas can't be dropped if there are outstanding pointers into their contents, so pointers can't deref to bad data). <br>
There's some more information/stats in the readme. <a href="https://github.com/ammkrn/nanoda_lib">https://github.com/ammkrn/nanoda_lib</a></p>



<a name="206617978"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/Arena%20allocation%20for%20ITPs/near/206617978" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs.html#206617978">(Aug 11 2020 at 19:11)</a>:</h4>
<p>Nice! When you say "better than other checkers", does that include the C++ implementation?</p>



<a name="206618608"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/Arena%20allocation%20for%20ITPs/near/206618608" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris B <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs.html#206618608">(Aug 11 2020 at 19:17)</a>:</h4>
<p>Hey I only said 'faster' lol. The one that was in the lean3 repo is the only C++ I know of, but yeah those numbers are the same (3-4x), maybe a little bit more depending on how big the export file is. leanchecker, trepplein, and the RC version of the Rust one were all really close in terms of speed. Leanchecker had some issues with memory consumption spikes IIRC. The last time I asked about it lean4 didn't have a free-standing checker and there isn't an export format.</p>



<a name="206619007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/Arena%20allocation%20for%20ITPs/near/206619007" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs.html#206619007">(Aug 11 2020 at 19:20)</a>:</h4>
<p>I'm surprised that the speed up would be so consistent across the different checkers. I thought the Haskell checker was much much slower than the  C++ one</p>



<a name="206619250"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/Arena%20allocation%20for%20ITPs/near/206619250" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris B <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs.html#206619250">(Aug 11 2020 at 19:22)</a>:</h4>
<p>Oh yeah the Haskell one is way, way slower than the other ones. Do you know why that is?</p>



<a name="206619362"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/Arena%20allocation%20for%20ITPs/near/206619362" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris B <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs.html#206619362">(Aug 11 2020 at 19:23)</a>:</h4>
<p>I assumed it was a Haskell thing about like unoptimized collections in the prelude or something.</p>



<a name="206620184"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/Arena%20allocation%20for%20ITPs/near/206620184" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs.html#206620184">(Aug 11 2020 at 19:30)</a>:</h4>
<p>I haven't looked closely at it, I can't say</p>



<a name="206620421"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/Arena%20allocation%20for%20ITPs/near/206620421" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs.html#206620421">(Aug 11 2020 at 19:32)</a>:</h4>
<p>Does the arena guarantee some sort uniqueness property for the term nodes it stores?</p>



<a name="206620923"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/Arena%20allocation%20for%20ITPs/near/206620923" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris B <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs.html#206620923">(Aug 11 2020 at 19:36)</a>:</h4>
<p>Yeah, when you go to insert an item it checks whether it already exists in the collection. The underlying structure is from a rust library called indexmap that's like a hashmap with indices that preserve insertion order.</p>



<a name="206621058"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/Arena%20allocation%20for%20ITPs/near/206621058" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris B <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs.html#206621058">(Aug 11 2020 at 19:37)</a>:</h4>
<p>The actual process is slightly more complicated since you have to check the persistent collection first then the temporary one.</p>



<a name="206621295"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/Arena%20allocation%20for%20ITPs/near/206621295" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs.html#206621295">(Aug 11 2020 at 19:39)</a>:</h4>
<p>Cool. i like the analysis you make about temporary garbage. I wonder how it will apply to Lean 4 since Lean 4 uses destructive updates whenever possible instead of allocating more memory</p>



<a name="206622069"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/Arena%20allocation%20for%20ITPs/near/206622069" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs.html#206622069">(Aug 11 2020 at 19:46)</a>:</h4>
<p>Ah, this will be useful for isabelle proof generation. I wasn't sure how well this strategy would perform so it's good to hear the numbers bear it out</p>



<a name="206622766"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/Arena%20allocation%20for%20ITPs/near/206622766" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris B <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs.html#206622766">(Aug 11 2020 at 19:52)</a>:</h4>
<p>Yeah neither was I lol. The one thing I'm worried about is someone managing to line up just the right tactic proof that produces like 100gb worth of garbage, but we'll see. The largest one a few months ago was 1.6 million nodes, now it's over 10 million.</p>



<a name="206623205"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/Arena%20allocation%20for%20ITPs/near/206623205" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris B <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs.html#206623205">(Aug 11 2020 at 19:56)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110026">Simon Hudon</span> <a href="#narrow/stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs/near/206621295">said</a>:</p>
<blockquote>
<p>I wonder how it will apply to Lean 4 since Lean 4 uses destructive updates whenever possible instead of allocating more memory</p>
</blockquote>
<p>Yeah I'm interested to see this as well. If you roll your own RC stuff like they did you can avoid a lot of the small to medium sized performance hang-ups I ran into in the last version, and I know they've done a lot of thinking about how to make the most of their system.</p>



<a name="206623269"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/Arena%20allocation%20for%20ITPs/near/206623269" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs.html#206623269">(Aug 11 2020 at 19:56)</a>:</h4>
<p>It might be good to collect statistics on what the largest proofs are from this point of view, because they could just be bad proofs</p>



<a name="206623357"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/Arena%20allocation%20for%20ITPs/near/206623357" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs.html#206623357">(Aug 11 2020 at 19:57)</a>:</h4>
<p>That growth in proof size sounds more like a regression than an improvement</p>



<a name="206623598"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/Arena%20allocation%20for%20ITPs/near/206623598" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs.html#206623598">(Aug 11 2020 at 19:59)</a>:</h4>
<p>Large proofs are clearly a problem but the other thing to consider is non-trivial kernel computations. The proof size could be moderate but you could be running ackerman's function for instance. That would produce a lot of trash that reference counting wouldn't keep around but arenas would</p>



<a name="206623663"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/Arena%20allocation%20for%20ITPs/near/206623663" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris B <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs.html#206623663">(Aug 11 2020 at 19:59)</a>:</h4>
<p>I made another thread earlier today in general to try and get some insight into that; the biggest one by far is <code>polynomial.monic.next_coeff_mul</code>, and the runner up is <code>finset.sum_range_sub_of_monotone</code></p>



<a name="206623854"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/Arena%20allocation%20for%20ITPs/near/206623854" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs.html#206623854">(Aug 11 2020 at 20:00)</a>:</h4>
<p>one man's trash is another man's treasure :P</p>



<a name="206624556"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/Arena%20allocation%20for%20ITPs/near/206624556" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris B <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs.html#206624556">(Aug 11 2020 at 20:06)</a>:</h4>
<p>Yeah, I would like to go back and address that more thoroughly in the future. I had an idea to do it where the arenas were telescoped out, so each arena had an Option&lt;&amp;mut Arena&gt; to a parent whose lifetime was longer, so when you finish one computation the thing's scope ends and you insert the result into the parent, effectively dropping all of the garbage. The problem is that searching for duplicates now forces you to check as many arenas as you have alive instead of just the two.</p>



<a name="206624762"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/Arena%20allocation%20for%20ITPs/near/206624762" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris B <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs.html#206624762">(Aug 11 2020 at 20:08)</a>:</h4>
<p>The RC solution is much more general, so props to Lean.</p>



<a name="206630746"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/Arena%20allocation%20for%20ITPs/near/206630746" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs.html#206630746">(Aug 11 2020 at 21:00)</a>:</h4>
<p>I'm pretty sure there would be people who would be interested in seeing a list of the 100 biggest proofs</p>



<a name="206630806"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/Arena%20allocation%20for%20ITPs/near/206630806" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs.html#206630806">(Aug 11 2020 at 21:01)</a>:</h4>
<p>it's another way to play the -T50000 game</p>



<a name="206632030"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/Arena%20allocation%20for%20ITPs/near/206632030" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs.html#206632030">(Aug 11 2020 at 21:12)</a>:</h4>
<p>It's a better way perhaps, because when I've played that game some lemma times out and then lots of other things break and you basically have to deal with the first problem.</p>



<a name="206635753"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/Arena%20allocation%20for%20ITPs/near/206635753" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris B <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs.html#206635753">(Aug 11 2020 at 21:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs/near/206630746">said</a>:</p>
<blockquote>
<p>I'm pretty sure there would be people who would be interested in seeing a list of the 100 biggest proofs</p>
</blockquote>
<p>Mathlib high scores :<br>
<a href="https://gist.github.com/ammkrn/dab311e0d2d27b3bcd15ec6c4a2b019d">https://gist.github.com/ammkrn/dab311e0d2d27b3bcd15ec6c4a2b019d</a></p>



<a name="206635884"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/Arena%20allocation%20for%20ITPs/near/206635884" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris B <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs.html#206635884">(Aug 11 2020 at 21:55)</a>:</h4>
<p>I'll add a command line flag for it or something.</p>



<a name="206635898"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/Arena%20allocation%20for%20ITPs/near/206635898" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs.html#206635898">(Aug 11 2020 at 21:55)</a>:</h4>
<p>oh wow that escalated quickly</p>



<a name="206635936"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/Arena%20allocation%20for%20ITPs/near/206635936" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs.html#206635936">(Aug 11 2020 at 21:56)</a>:</h4>
<p>where is <a href="https://leanprover-community.github.io/mathlib_docs/find/polynomial.monic.next_coeff_mul/src">src#polynomial.monic.next_coeff_mul</a></p>



<a name="206636008"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/Arena%20allocation%20for%20ITPs/near/206636008" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs.html#206636008">(Aug 11 2020 at 21:56)</a>:</h4>
<p>hm, perhaps it is the <code>omega</code> calls at the end?</p>



<a name="206636349"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/Arena%20allocation%20for%20ITPs/near/206636349" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris B <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs.html#206636349">(Aug 11 2020 at 22:00)</a>:</h4>
<p>omega does seem to be a common thread between no.1 and no.2</p>



<a name="206637584"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/Arena%20allocation%20for%20ITPs/near/206637584" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs.html#206637584">(Aug 11 2020 at 22:14)</a>:</h4>
<p>How does the length of this version of the proof stack up:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">next_coeff_mul_omega_1</span> <span class="o">(</span><span class="n">dp</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">hp0</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">dp</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="n">dp</span> <span class="bp">≠</span> <span class="n">dp</span> <span class="bp">-</span> <span class="mi">1</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">omega</span>

<span class="kn">lemma</span> <span class="n">next_coeff_mul_omega_2</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">×</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">dp</span> <span class="n">dq</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span>
  <span class="o">(</span><span class="n">hp0</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">dp</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">hq0</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">dq</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">hx</span> <span class="o">:</span> <span class="n">x</span><span class="bp">.</span><span class="n">fst</span> <span class="bp">+</span> <span class="n">x</span><span class="bp">.</span><span class="n">snd</span> <span class="bp">=</span> <span class="n">dp</span> <span class="bp">+</span> <span class="n">dq</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">)</span>
  <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">x</span><span class="bp">.</span><span class="n">fst</span> <span class="bp">≤</span> <span class="n">dp</span><span class="o">)</span> <span class="o">(</span><span class="n">hx1</span> <span class="o">:</span> <span class="n">x</span><span class="bp">.</span><span class="n">fst</span> <span class="bp">=</span> <span class="n">dp</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span><span class="bp">.</span><span class="n">snd</span> <span class="bp">=</span> <span class="n">dq</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">omega</span>

<span class="kn">lemma</span> <span class="n">next_coeff_mul_omega_3</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">×</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">dp</span> <span class="n">dq</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span>
  <span class="o">(</span><span class="n">hp0</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">dp</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">hq0</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">dq</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">hx</span> <span class="o">:</span> <span class="n">x</span><span class="bp">.</span><span class="n">fst</span> <span class="bp">+</span> <span class="n">x</span><span class="bp">.</span><span class="n">snd</span> <span class="bp">=</span> <span class="n">dp</span> <span class="bp">+</span> <span class="n">dq</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">)</span>
  <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">x</span><span class="bp">.</span><span class="n">fst</span> <span class="bp">≤</span> <span class="n">dp</span><span class="o">)</span> <span class="o">(</span><span class="n">this</span> <span class="o">:</span> <span class="n">x</span><span class="bp">.</span><span class="n">fst</span> <span class="bp">≠</span> <span class="n">dp</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">hx1</span> <span class="o">:</span> <span class="n">x</span><span class="bp">.</span><span class="n">fst</span> <span class="bp">=</span> <span class="n">dp</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span><span class="bp">.</span><span class="n">snd</span> <span class="bp">=</span> <span class="n">dq</span> <span class="bp">-</span> <span class="mi">1</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">omega</span>

<span class="kn">lemma</span> <span class="n">next_coeff_mul_omega_4</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">×</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">dp</span> <span class="n">dq</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span>
  <span class="o">(</span><span class="n">hp0</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">dp</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">hq0</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">dq</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">hx</span> <span class="o">:</span> <span class="n">x</span><span class="bp">.</span><span class="n">fst</span> <span class="bp">+</span> <span class="n">x</span><span class="bp">.</span><span class="n">snd</span> <span class="bp">=</span> <span class="n">dp</span> <span class="bp">+</span> <span class="n">dq</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">)</span>
  <span class="o">(</span><span class="n">hx1</span> <span class="o">:</span> <span class="bp">¬</span><span class="o">(</span><span class="n">x</span> <span class="bp">=</span> <span class="o">(</span><span class="n">dp</span><span class="o">,</span> <span class="n">dq</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">=</span> <span class="o">(</span><span class="n">dp</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">,</span> <span class="n">dq</span><span class="o">)))</span>
  <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">x</span><span class="bp">.</span><span class="n">fst</span> <span class="bp">≤</span> <span class="n">dp</span><span class="o">)</span> <span class="o">(</span><span class="n">this</span> <span class="o">:</span> <span class="n">x</span><span class="bp">.</span><span class="n">fst</span> <span class="bp">≠</span> <span class="n">dp</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">this_1</span> <span class="o">:</span> <span class="n">x</span><span class="bp">.</span><span class="n">fst</span> <span class="bp">≠</span> <span class="n">dp</span><span class="o">)</span> <span class="o">:</span> <span class="n">dq</span> <span class="bp">&lt;</span> <span class="n">x</span><span class="bp">.</span><span class="n">snd</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">omega</span>

<span class="kn">lemma</span> <span class="n">next_coeff_mul</span> <span class="o">{</span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="n">polynomial</span> <span class="n">R</span><span class="o">}</span> <span class="o">(</span><span class="n">hp</span> <span class="o">:</span> <span class="n">monic</span> <span class="n">p</span><span class="o">)</span> <span class="o">(</span><span class="n">hq</span> <span class="o">:</span> <span class="n">monic</span> <span class="n">q</span><span class="o">)</span> <span class="o">:</span>
<span class="n">next_coeff</span> <span class="o">(</span><span class="n">p</span> <span class="bp">*</span> <span class="n">q</span><span class="o">)</span> <span class="bp">=</span> <span class="n">next_coeff</span> <span class="n">p</span> <span class="bp">+</span> <span class="n">next_coeff</span> <span class="n">q</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">classical</span><span class="o">,</span>
  <span class="n">by_cases</span> <span class="n">h</span> <span class="o">:</span> <span class="n">nontrivial</span> <span class="n">R</span><span class="o">,</span> <span class="n">swap</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="n">nontrivial_iff</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span> <span class="n">push_neg</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span> <span class="n">apply</span> <span class="n">h</span><span class="o">,</span> <span class="o">},</span>
  <span class="n">haveI</span> <span class="o">:=</span> <span class="n">h</span><span class="o">,</span> <span class="n">clear</span> <span class="n">h</span><span class="o">,</span>
  <span class="k">have</span> <span class="o">:=</span> <span class="n">monic</span><span class="bp">.</span><span class="n">nat_degree_mul</span> <span class="n">hp</span> <span class="n">hq</span><span class="o">,</span>
  <span class="n">dsimp</span> <span class="n">only</span> <span class="o">[</span><span class="n">next_coeff</span><span class="o">],</span> <span class="n">rw</span> <span class="n">this</span><span class="o">,</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">hp</span><span class="o">,</span> <span class="n">hq</span><span class="o">,</span> <span class="n">degree_eq_zero_iff_eq_one</span><span class="o">,</span> <span class="n">add_eq_zero_iff</span><span class="o">],</span> <span class="n">clear</span> <span class="n">this</span><span class="o">,</span>
  <span class="n">split_ifs</span><span class="bp">;</span> <span class="n">try</span> <span class="o">{</span> <span class="n">tauto</span> <span class="bp">&lt;|&gt;</span> <span class="n">simp</span> <span class="o">[</span><span class="n">h_1</span><span class="o">,</span> <span class="n">h_2</span><span class="o">]</span> <span class="o">},</span>
  <span class="n">rename</span> <span class="n">h_1</span> <span class="n">hp0</span><span class="o">,</span> <span class="n">rename</span> <span class="n">h_2</span> <span class="n">hq0</span><span class="o">,</span> <span class="n">clear</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">rw</span> <span class="err">←</span> <span class="n">degree_eq_zero_iff_eq_one</span> <span class="n">at</span> <span class="n">hp0</span> <span class="n">hq0</span><span class="o">,</span> <span class="n">assumption&#39;</span><span class="o">,</span>
  <span class="c1">-- we&#39;ve reduced to the case where the degrees dp and dq are nonzero</span>
  <span class="n">set</span> <span class="n">dp</span> <span class="o">:=</span> <span class="n">p</span><span class="bp">.</span><span class="n">nat_degree</span><span class="o">,</span> <span class="n">set</span> <span class="n">dq</span> <span class="o">:=</span> <span class="n">q</span><span class="bp">.</span><span class="n">nat_degree</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">coeff_mul</span><span class="o">,</span>
  <span class="k">have</span> <span class="o">:</span> <span class="o">{(</span><span class="n">dp</span><span class="o">,</span> <span class="n">dq</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">),</span> <span class="o">(</span><span class="n">dp</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">,</span> <span class="n">dq</span><span class="o">)}</span> <span class="err">⊆</span> <span class="n">nat</span><span class="bp">.</span><span class="n">antidiagonal</span> <span class="o">(</span><span class="n">dp</span> <span class="bp">+</span> <span class="n">dq</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">),</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="n">insert_subset</span><span class="o">,</span> <span class="n">split</span><span class="o">,</span>
    <span class="n">work_on_goal</span> <span class="mi">0</span> <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="n">nat</span><span class="bp">.</span><span class="n">mem_antidiagonal</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">add_sub_assoc</span><span class="o">]</span> <span class="o">},</span>
    <span class="n">work_on_goal</span> <span class="mi">1</span> <span class="o">{</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">singleton_subset_iff</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">mem_antidiagonal</span><span class="o">],</span>
      <span class="n">apply</span> <span class="n">nat</span><span class="bp">.</span><span class="n">sub_add_eq_add_sub</span> <span class="o">},</span>
    <span class="n">all_goals</span> <span class="o">{</span> <span class="n">apply</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ_le_of_lt</span><span class="o">,</span> <span class="n">apply</span> <span class="n">nat</span><span class="bp">.</span><span class="n">pos_of_ne_zero</span><span class="o">,</span> <span class="n">assumption</span> <span class="o">}</span> <span class="o">},</span>
  <span class="n">rw</span> <span class="err">←</span> <span class="n">sum_subset</span> <span class="n">this</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="n">sum_insert</span><span class="o">,</span> <span class="n">sum_singleton</span><span class="o">],</span> <span class="n">iterate</span> <span class="mi">2</span> <span class="o">{</span> <span class="n">rw</span> <span class="n">coeff_nat_degree</span> <span class="o">},</span> <span class="n">ring</span><span class="o">,</span> <span class="n">assumption&#39;</span><span class="o">,</span>
    <span class="n">suffices</span> <span class="o">:</span> <span class="n">dp</span> <span class="bp">≠</span> <span class="n">dp</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">,</span> <span class="o">{</span> <span class="n">rw</span> <span class="n">mem_singleton</span><span class="o">,</span> <span class="n">simp</span> <span class="o">[</span><span class="n">this</span><span class="o">]</span> <span class="o">},</span> <span class="n">apply</span> <span class="n">next_coeff_mul_omega_1</span><span class="bp">;</span> <span class="n">assumption</span> <span class="o">},</span> <span class="n">clear</span> <span class="n">this</span><span class="o">,</span>
  <span class="n">intros</span> <span class="n">x</span> <span class="n">hx</span> <span class="n">hx1</span><span class="o">,</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">nat</span><span class="bp">.</span><span class="n">mem_antidiagonal</span><span class="o">]</span> <span class="n">at</span> <span class="n">hx</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">mem_insert</span><span class="o">,</span> <span class="n">mem_singleton</span><span class="o">]</span> <span class="n">at</span> <span class="n">hx1</span><span class="o">,</span>
  <span class="n">suffices</span> <span class="o">:</span> <span class="n">p</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">x</span><span class="bp">.</span><span class="n">fst</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">∨</span> <span class="n">q</span><span class="bp">.</span><span class="n">coeff</span> <span class="n">x</span><span class="bp">.</span><span class="n">snd</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span> <span class="n">cases</span> <span class="n">this</span><span class="bp">;</span> <span class="n">simp</span> <span class="o">[</span><span class="n">this</span><span class="o">],</span>
  <span class="n">suffices</span> <span class="o">:</span> <span class="n">dp</span> <span class="bp">&lt;</span> <span class="n">x</span><span class="bp">.</span><span class="n">fst</span> <span class="bp">∨</span> <span class="n">dq</span> <span class="bp">&lt;</span> <span class="n">x</span><span class="bp">.</span><span class="n">snd</span><span class="o">,</span> <span class="n">cases</span> <span class="n">this</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">left</span><span class="o">,</span>  <span class="n">apply</span> <span class="n">coeff_eq_zero_of_nat_degree_lt</span><span class="o">,</span> <span class="n">assumption</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">right</span><span class="o">,</span> <span class="n">apply</span> <span class="n">coeff_eq_zero_of_nat_degree_lt</span><span class="o">,</span> <span class="n">assumption</span> <span class="o">},</span>
  <span class="n">by_cases</span> <span class="n">h</span> <span class="o">:</span> <span class="n">dp</span> <span class="bp">&lt;</span> <span class="n">x</span><span class="bp">.</span><span class="n">fst</span><span class="o">,</span> <span class="o">{</span> <span class="n">left</span><span class="o">,</span> <span class="n">exact</span> <span class="n">h</span> <span class="o">},</span> <span class="n">push_neg</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span> <span class="n">right</span><span class="o">,</span>
  <span class="k">have</span> <span class="o">:</span> <span class="n">x</span><span class="bp">.</span><span class="n">fst</span> <span class="bp">≠</span> <span class="n">dp</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">,</span> <span class="o">{</span> <span class="n">contrapose</span><span class="bp">!</span> <span class="n">hx1</span><span class="o">,</span> <span class="n">right</span><span class="o">,</span> <span class="n">ext</span><span class="o">,</span> <span class="n">assumption</span><span class="o">,</span> <span class="n">dsimp</span> <span class="n">only</span><span class="o">,</span> <span class="n">apply</span> <span class="n">next_coeff_mul_omega_2</span><span class="bp">;</span> <span class="n">assumption</span> <span class="o">},</span>
  <span class="k">have</span> <span class="o">:</span> <span class="n">x</span><span class="bp">.</span><span class="n">fst</span> <span class="bp">≠</span> <span class="n">dp</span><span class="o">,</span>     <span class="o">{</span> <span class="n">contrapose</span><span class="bp">!</span> <span class="n">hx1</span><span class="o">,</span> <span class="n">left</span><span class="o">,</span>  <span class="n">ext</span><span class="o">,</span> <span class="n">assumption</span><span class="o">,</span> <span class="n">dsimp</span> <span class="n">only</span><span class="o">,</span> <span class="n">apply</span> <span class="n">next_coeff_mul_omega_3</span><span class="bp">;</span> <span class="n">assumption</span> <span class="o">},</span>
  <span class="n">apply</span> <span class="n">next_coeff_mul_omega_4</span><span class="bp">;</span> <span class="n">assumption</span>
<span class="kn">end</span>
</code></pre></div>



<a name="206637616"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/Arena%20allocation%20for%20ITPs/near/206637616" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs.html#206637616">(Aug 11 2020 at 22:15)</a>:</h4>
<p>(all I did was <code>extract_goal</code> on all of the <code>omega</code> calls)</p>



<a name="206639047"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/Arena%20allocation%20for%20ITPs/near/206639047" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris B <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs.html#206639047">(Aug 11 2020 at 22:32)</a>:</h4>
<p>The new leaders are (1, 2, and 3) are the factored out omegas.</p>
<div class="codehilite"><pre><span></span><code><span class="n">garbage</span> <span class="n">terms</span>
<span class="mi">6335962</span> <span class="o">:</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">monic</span><span class="bp">.</span><span class="n">next_coeff_mul_omega_3</span>
<span class="mi">2922613</span> <span class="o">:</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">monic</span><span class="bp">.</span><span class="n">next_coeff_mul_omega_4</span>
<span class="mi">1885162</span> <span class="o">:</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">monic</span><span class="bp">.</span><span class="n">next_coeff_mul_omega_2</span>
<span class="mi">1090313</span> <span class="o">:</span> <span class="n">composition_as_set_equiv</span><span class="bp">._</span><span class="n">proof_5</span>


<span class="n">time</span> <span class="o">(</span><span class="n">milliseconds</span><span class="o">)</span>
<span class="mi">3998</span> <span class="o">:</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">monic</span><span class="bp">.</span><span class="n">next_coeff_mul_omega_3</span>
<span class="mi">1783</span> <span class="o">:</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">monic</span><span class="bp">.</span><span class="n">next_coeff_mul_omega_4</span>
<span class="mi">1091</span> <span class="o">:</span> <span class="n">polynomial</span><span class="bp">.</span><span class="n">monic</span><span class="bp">.</span><span class="n">next_coeff_mul_omega_2</span>
<span class="mi">680</span> <span class="o">:</span> <span class="n">composition_as_set_equiv</span><span class="bp">._</span><span class="n">proof_5</span>
</code></pre></div>



<a name="206641149"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/Arena%20allocation%20for%20ITPs/near/206641149" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs.html#206641149">(Aug 11 2020 at 22:59)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>

<span class="kn">lemma</span> <span class="n">next_coeff_mul_omega_3</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">×</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">dp</span> <span class="n">dq</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span>
  <span class="o">(</span><span class="n">hp0</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">dp</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">hq0</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">dq</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">hx</span> <span class="o">:</span> <span class="n">x</span><span class="bp">.</span><span class="n">fst</span> <span class="bp">+</span> <span class="n">x</span><span class="bp">.</span><span class="n">snd</span> <span class="bp">=</span> <span class="n">dp</span> <span class="bp">+</span> <span class="n">dq</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">)</span>
  <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">x</span><span class="bp">.</span><span class="n">fst</span> <span class="bp">≤</span> <span class="n">dp</span><span class="o">)</span> <span class="o">(</span><span class="n">this</span> <span class="o">:</span> <span class="n">x</span><span class="bp">.</span><span class="n">fst</span> <span class="bp">≠</span> <span class="n">dp</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">hx1</span> <span class="o">:</span> <span class="n">x</span><span class="bp">.</span><span class="n">fst</span> <span class="bp">=</span> <span class="n">dp</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span><span class="bp">.</span><span class="n">snd</span> <span class="bp">=</span> <span class="n">dq</span> <span class="bp">-</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">cases</span> <span class="n">dq</span><span class="o">,</span> <span class="n">contradiction</span><span class="o">,</span>
  <span class="n">subst</span> <span class="n">hx1</span><span class="o">,</span>
  <span class="n">rwa</span> <span class="o">[</span><span class="n">nat</span><span class="bp">.</span><span class="n">succ_eq_add_one</span><span class="o">,</span> <span class="err">←</span><span class="n">add_assoc</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">add_sub_cancel</span><span class="o">,</span> <span class="n">add_right_inj</span><span class="o">]</span> <span class="n">at</span> <span class="n">hx</span><span class="o">,</span>
<span class="kn">end</span>
</code></pre></div>



<a name="206641775"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/Arena%20allocation%20for%20ITPs/near/206641775" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs.html#206641775">(Aug 11 2020 at 23:04)</a>:</h4>
<p>oh, are we playing this game?</p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">next_coeff_mul_omega_3</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">×</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">dp</span> <span class="n">dq</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span>
  <span class="o">(</span><span class="n">hp0</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">dp</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">hq0</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">dq</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">hx</span> <span class="o">:</span> <span class="n">x</span><span class="bp">.</span><span class="n">fst</span> <span class="bp">+</span> <span class="n">x</span><span class="bp">.</span><span class="n">snd</span> <span class="bp">=</span> <span class="n">dp</span> <span class="bp">+</span> <span class="n">dq</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">)</span>
  <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">x</span><span class="bp">.</span><span class="n">fst</span> <span class="bp">≤</span> <span class="n">dp</span><span class="o">)</span> <span class="o">(</span><span class="n">this</span> <span class="o">:</span> <span class="n">x</span><span class="bp">.</span><span class="n">fst</span> <span class="bp">≠</span> <span class="n">dp</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">hx1</span> <span class="o">:</span> <span class="n">x</span><span class="bp">.</span><span class="n">fst</span> <span class="bp">=</span> <span class="n">dp</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span><span class="bp">.</span><span class="n">snd</span> <span class="bp">=</span> <span class="n">dq</span> <span class="bp">-</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">rwa</span> <span class="o">[</span><span class="n">hx1</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">add_sub_assoc</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">pos_of_ne_zero</span> <span class="n">hq0</span><span class="o">),</span> <span class="n">add_right_inj</span><span class="o">]</span> <span class="n">at</span> <span class="n">hx</span>
</code></pre></div>



<a name="206641872"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/Arena%20allocation%20for%20ITPs/near/206641872" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs.html#206641872">(Aug 11 2020 at 23:05)</a>:</h4>
<p>I was just trying to make mathlib compile quicker!</p>



<a name="206641964"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/Arena%20allocation%20for%20ITPs/near/206641964" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs.html#206641964">(Aug 11 2020 at 23:06)</a>:</h4>
<p>How many times has CI compiled that four second proof?</p>



<a name="206642069"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/Arena%20allocation%20for%20ITPs/near/206642069" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs.html#206642069">(Aug 11 2020 at 23:07)</a>:</h4>
<p>More seriously, do we just have a rubbish omega, or is this the actual nature of omega -- I've heard that the algorithm is super-slow.</p>



<a name="206642120"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/Arena%20allocation%20for%20ITPs/near/206642120" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs.html#206642120">(Aug 11 2020 at 23:08)</a>:</h4>
<p>probably a bit of both</p>



<a name="206642129"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/Arena%20allocation%20for%20ITPs/near/206642129" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs.html#206642129">(Aug 11 2020 at 23:08)</a>:</h4>
<p>I looked at the proof terms and they are seriously bizarre</p>



<a name="206642198"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/Arena%20allocation%20for%20ITPs/near/206642198" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs.html#206642198">(Aug 11 2020 at 23:09)</a>:</h4>
<div class="codehilite"><pre><span></span><code>                                           <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">preform</span><span class="bp">.</span><span class="n">le</span> <span class="o">((</span><span class="n">nat</span><span class="bp">.</span><span class="n">preterm</span><span class="bp">.</span><span class="n">var</span> <span class="mi">1</span> <span class="mi">6</span><span class="o">)</span><span class="bp">.</span><span class="n">add</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">preterm</span><span class="bp">.</span><span class="n">cst</span> <span class="mi">1</span><span class="o">))</span>
                                              <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">preterm</span><span class="bp">.</span><span class="n">var</span> <span class="mi">1</span> <span class="mi">2</span><span class="o">)))))))))</span><span class="bp">.</span><span class="n">and</span>
                        <span class="o">((</span><span class="n">nat</span><span class="bp">.</span><span class="n">preform</span><span class="bp">.</span><span class="n">eq</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">preterm</span><span class="bp">.</span><span class="n">var</span> <span class="mi">1</span> <span class="mi">1</span><span class="o">)</span> <span class="o">((</span><span class="n">nat</span><span class="bp">.</span><span class="n">preterm</span><span class="bp">.</span><span class="n">cst</span> <span class="mi">1</span><span class="o">)</span><span class="bp">.</span><span class="n">add</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">preterm</span><span class="bp">.</span><span class="n">var</span> <span class="mi">1</span> <span class="mi">4</span><span class="o">)))</span><span class="bp">.</span><span class="n">or</span>
                           <span class="o">((</span><span class="n">nat</span><span class="bp">.</span><span class="n">preform</span><span class="bp">.</span><span class="n">le</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">preterm</span><span class="bp">.</span><span class="n">var</span> <span class="mi">1</span> <span class="mi">1</span><span class="o">)</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">preterm</span><span class="bp">.</span><span class="n">cst</span> <span class="mi">1</span><span class="o">))</span><span class="bp">.</span><span class="n">and</span>
                              <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">preform</span><span class="bp">.</span><span class="n">eq</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">preterm</span><span class="bp">.</span><span class="n">var</span> <span class="mi">1</span> <span class="mi">4</span><span class="o">)</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">preterm</span><span class="bp">.</span><span class="n">cst</span> <span class="mi">0</span><span class="o">)))))</span><span class="bp">.</span><span class="n">and</span>
                       <span class="o">((</span><span class="n">nat</span><span class="bp">.</span><span class="n">preform</span><span class="bp">.</span><span class="n">eq</span> <span class="o">((</span><span class="n">nat</span><span class="bp">.</span><span class="n">preterm</span><span class="bp">.</span><span class="n">var</span> <span class="mi">1</span> <span class="mi">1</span><span class="o">)</span><span class="bp">.</span><span class="n">add</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">preterm</span><span class="bp">.</span><span class="n">var</span> <span class="mi">1</span> <span class="mi">3</span><span class="o">))</span>
                           <span class="o">((</span><span class="n">nat</span><span class="bp">.</span><span class="n">preterm</span><span class="bp">.</span><span class="n">cst</span> <span class="mi">1</span><span class="o">)</span><span class="bp">.</span><span class="n">add</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">preterm</span><span class="bp">.</span><span class="n">var</span> <span class="mi">1</span> <span class="mi">5</span><span class="o">)))</span><span class="bp">.</span><span class="n">or</span>
                          <span class="o">((</span><span class="n">nat</span><span class="bp">.</span><span class="n">preform</span><span class="bp">.</span><span class="n">le</span> <span class="o">((</span><span class="n">nat</span><span class="bp">.</span><span class="n">preterm</span><span class="bp">.</span><span class="n">var</span> <span class="mi">1</span> <span class="mi">1</span><span class="o">)</span><span class="bp">.</span><span class="n">add</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">preterm</span><span class="bp">.</span><span class="n">var</span> <span class="mi">1</span> <span class="mi">3</span><span class="o">))</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">preterm</span><span class="bp">.</span><span class="n">cst</span> <span class="mi">1</span><span class="o">))</span><span class="bp">.</span><span class="n">and</span>
                             <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">preform</span><span class="bp">.</span><span class="n">eq</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">preterm</span><span class="bp">.</span><span class="n">var</span> <span class="mi">1</span> <span class="mi">5</span><span class="o">)</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">preterm</span><span class="bp">.</span><span class="n">cst</span> <span class="mi">0</span><span class="o">)))))</span><span class="bp">.</span><span class="n">and</span>
                      <span class="o">((</span><span class="n">nat</span><span class="bp">.</span><span class="n">preform</span><span class="bp">.</span><span class="n">eq</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">preterm</span><span class="bp">.</span><span class="n">var</span> <span class="mi">1</span> <span class="mi">3</span><span class="o">)</span> <span class="o">((</span><span class="n">nat</span><span class="bp">.</span><span class="n">preterm</span><span class="bp">.</span><span class="n">cst</span> <span class="mi">1</span><span class="o">)</span><span class="bp">.</span><span class="n">add</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">preterm</span><span class="bp">.</span><span class="n">var</span> <span class="mi">1</span> <span class="mi">6</span><span class="o">)))</span><span class="bp">.</span><span class="n">or</span>
                         <span class="o">((</span><span class="n">nat</span><span class="bp">.</span><span class="n">preform</span><span class="bp">.</span><span class="n">le</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">preterm</span><span class="bp">.</span><span class="n">var</span> <span class="mi">1</span> <span class="mi">3</span><span class="o">)</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">preterm</span><span class="bp">.</span><span class="n">cst</span> <span class="mi">1</span><span class="o">))</span><span class="bp">.</span><span class="n">and</span>
                            <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">preform</span><span class="bp">.</span><span class="n">eq</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">preterm</span><span class="bp">.</span><span class="n">var</span> <span class="mi">1</span> <span class="mi">6</span><span class="o">)</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">preterm</span><span class="bp">.</span><span class="n">cst</span> <span class="mi">0</span><span class="o">)))))</span>
                   <span class="bp">⟨⟨⟨⟨⟨</span><span class="n">trivial</span><span class="o">,</span> <span class="n">trivial</span><span class="bp">⟩</span><span class="o">,</span>
                       <span class="bp">⟨</span><span class="n">trivial</span><span class="o">,</span>
                        <span class="bp">⟨</span><span class="n">trivial</span><span class="o">,</span>
                         <span class="bp">⟨</span><span class="n">trivial</span><span class="o">,</span>
                          <span class="bp">⟨⟨</span><span class="n">trivial</span><span class="o">,</span> <span class="n">trivial</span><span class="bp">⟩</span><span class="o">,</span>
                           <span class="bp">⟨⟨</span><span class="n">trivial</span><span class="o">,</span> <span class="n">trivial</span><span class="bp">⟩</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">trivial</span><span class="o">,</span> <span class="n">trivial</span><span class="bp">⟩⟩⟩⟩⟩⟩⟩</span><span class="o">,</span>
                      <span class="bp">⟨</span><span class="n">trivial</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">trivial</span><span class="o">,</span> <span class="n">trivial</span><span class="bp">⟩⟩⟩</span><span class="o">,</span>
                     <span class="bp">⟨</span><span class="n">trivial</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">trivial</span><span class="o">,</span> <span class="n">trivial</span><span class="bp">⟩⟩⟩</span><span class="o">,</span>
                    <span class="bp">⟨</span><span class="n">trivial</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">trivial</span><span class="o">,</span> <span class="n">trivial</span><span class="bp">⟩⟩⟩</span>
                   <span class="bp">⟨⟨⟨⟨⟨⟨⟨</span><span class="n">trivial</span><span class="o">,</span> <span class="n">trivial</span><span class="bp">⟩</span><span class="o">,</span> <span class="n">trivial</span><span class="bp">⟩</span><span class="o">,</span> <span class="bp">⟨⟨</span><span class="n">trivial</span><span class="o">,</span> <span class="n">trivial</span><span class="bp">⟩</span><span class="o">,</span> <span class="n">trivial</span><span class="bp">⟩⟩</span><span class="o">,</span>
                       <span class="bp">⟨⟨</span><span class="n">trivial</span><span class="o">,</span> <span class="n">trivial</span><span class="bp">⟩</span><span class="o">,</span>
                        <span class="bp">⟨⟨⟨</span><span class="n">trivial</span><span class="o">,</span> <span class="n">trivial</span><span class="bp">⟩</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">trivial</span><span class="o">,</span> <span class="n">trivial</span><span class="bp">⟩⟩</span><span class="o">,</span>
                         <span class="bp">⟨⟨⟨</span><span class="n">trivial</span><span class="o">,</span> <span class="n">trivial</span><span class="bp">⟩</span><span class="o">,</span> <span class="n">trivial</span><span class="bp">⟩</span><span class="o">,</span>
                          <span class="bp">⟨⟨⟨⟨</span><span class="n">trivial</span><span class="o">,</span> <span class="n">trivial</span><span class="bp">⟩</span><span class="o">,</span> <span class="n">trivial</span><span class="bp">⟩</span><span class="o">,</span> <span class="bp">⟨⟨</span><span class="n">trivial</span><span class="o">,</span> <span class="n">trivial</span><span class="bp">⟩</span><span class="o">,</span> <span class="n">trivial</span><span class="bp">⟩⟩</span><span class="o">,</span>
                           <span class="bp">⟨⟨⟨⟨</span><span class="n">trivial</span><span class="o">,</span> <span class="n">trivial</span><span class="bp">⟩</span><span class="o">,</span> <span class="n">trivial</span><span class="bp">⟩</span><span class="o">,</span> <span class="bp">⟨⟨</span><span class="n">trivial</span><span class="o">,</span> <span class="n">trivial</span><span class="bp">⟩</span><span class="o">,</span> <span class="n">trivial</span><span class="bp">⟩⟩</span><span class="o">,</span>
                            <span class="bp">⟨⟨⟨</span><span class="n">trivial</span><span class="o">,</span> <span class="n">trivial</span><span class="bp">⟩</span><span class="o">,</span> <span class="n">trivial</span><span class="bp">⟩</span><span class="o">,</span>
                             <span class="bp">⟨⟨</span><span class="n">trivial</span><span class="o">,</span> <span class="n">trivial</span><span class="bp">⟩</span><span class="o">,</span> <span class="n">trivial</span><span class="bp">⟩⟩⟩⟩⟩⟩⟩⟩</span><span class="o">,</span>
                      <span class="bp">⟨⟨</span><span class="n">trivial</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">trivial</span><span class="o">,</span> <span class="n">trivial</span><span class="bp">⟩⟩</span><span class="o">,</span>
                       <span class="bp">⟨⟨</span><span class="n">trivial</span><span class="o">,</span> <span class="n">trivial</span><span class="bp">⟩</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">trivial</span><span class="o">,</span> <span class="n">trivial</span><span class="bp">⟩⟩⟩⟩</span><span class="o">,</span>
                     <span class="bp">⟨⟨⟨</span><span class="n">trivial</span><span class="o">,</span> <span class="n">trivial</span><span class="bp">⟩</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">trivial</span><span class="o">,</span> <span class="n">trivial</span><span class="bp">⟩⟩</span><span class="o">,</span>
                      <span class="bp">⟨⟨⟨</span><span class="n">trivial</span><span class="o">,</span> <span class="n">trivial</span><span class="bp">⟩</span><span class="o">,</span> <span class="n">trivial</span><span class="bp">⟩</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">trivial</span><span class="o">,</span> <span class="n">trivial</span><span class="bp">⟩⟩⟩⟩</span><span class="o">,</span>
                    <span class="bp">⟨⟨</span><span class="n">trivial</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">trivial</span><span class="o">,</span> <span class="n">trivial</span><span class="bp">⟩⟩</span><span class="o">,</span> <span class="bp">⟨⟨</span><span class="n">trivial</span><span class="o">,</span> <span class="n">trivial</span><span class="bp">⟩</span><span class="o">,</span> <span class="bp">⟨</span><span class="n">trivial</span><span class="o">,</span> <span class="n">trivial</span><span class="bp">⟩⟩⟩⟩</span>
                   <span class="o">(</span><span class="n">clauses</span><span class="bp">.</span><span class="n">unsat_cons</span>
                      <span class="o">([(</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="o">[</span><span class="bp">-</span><span class="o">[</span><span class="mi">1</span><span class="bp">+</span> <span class="mi">0</span><span class="o">],</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">1</span><span class="o">]),</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span>
                          <span class="o">[</span><span class="bp">-</span><span class="o">[</span><span class="mi">1</span><span class="bp">+</span> <span class="mi">0</span><span class="o">],</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="bp">-</span><span class="o">[</span><span class="mi">1</span><span class="bp">+</span> <span class="mi">0</span><span class="o">],</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">1</span><span class="o">]),</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">1</span><span class="o">,</span>
                          <span class="o">[</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="bp">-</span><span class="o">[</span><span class="mi">1</span><span class="bp">+</span> <span class="mi">0</span><span class="o">],</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">1</span><span class="o">]),</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">1</span><span class="o">,</span>
                          <span class="o">[</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="bp">-</span><span class="o">[</span><span class="mi">1</span><span class="bp">+</span> <span class="mi">0</span><span class="o">],</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="bp">-</span><span class="o">[</span><span class="mi">1</span><span class="bp">+</span> <span class="mi">0</span><span class="o">],</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">1</span><span class="o">]),</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">1</span><span class="o">,</span>
                          <span class="o">[</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="bp">-</span><span class="o">[</span><span class="mi">1</span><span class="bp">+</span> <span class="mi">0</span><span class="o">],</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span>
                              <span class="mi">1</span><span class="o">])],</span>
                       <span class="o">[(</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="o">[</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">1</span><span class="o">]),</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="o">[</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">1</span><span class="o">]),</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span>
                          <span class="o">[</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">1</span><span class="o">]),</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span>
                          <span class="o">[</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">1</span><span class="o">]),</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span>
                          <span class="o">[</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">1</span><span class="o">]),</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span>
                          <span class="o">[</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span>
                              <span class="mi">1</span><span class="o">]),</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span>
                          <span class="o">[</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span>
                              <span class="mi">0</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">1</span><span class="o">]),</span> <span class="o">(</span><span class="bp">-</span><span class="o">[</span><span class="mi">1</span><span class="bp">+</span> <span class="mi">0</span><span class="o">],</span>
                          <span class="o">[</span><span class="bp">-</span><span class="o">[</span><span class="mi">1</span><span class="bp">+</span> <span class="mi">0</span><span class="o">],</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">1</span><span class="o">]),</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span>
                          <span class="o">[</span><span class="bp">-</span><span class="o">[</span><span class="mi">1</span><span class="bp">+</span> <span class="mi">0</span><span class="o">],</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">1</span><span class="o">]),</span> <span class="o">(</span><span class="bp">-</span><span class="o">[</span><span class="mi">1</span><span class="bp">+</span> <span class="mi">0</span><span class="o">],</span>
                          <span class="o">[</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="bp">-</span><span class="o">[</span><span class="mi">1</span><span class="bp">+</span> <span class="mi">0</span><span class="o">]]),</span> <span class="o">(</span><span class="bp">-</span><span class="o">[</span><span class="mi">1</span><span class="bp">+</span> <span class="mi">0</span><span class="o">],</span>
                          <span class="o">[</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="bp">-</span><span class="o">[</span><span class="mi">1</span><span class="bp">+</span> <span class="mi">0</span><span class="o">]]),</span> <span class="o">(</span><span class="bp">-</span><span class="o">[</span><span class="mi">1</span><span class="bp">+</span> <span class="mi">0</span><span class="o">],</span>
                          <span class="o">[</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="bp">-</span><span class="o">[</span><span class="mi">1</span><span class="bp">+</span> <span class="mi">0</span><span class="o">],</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span>
                              <span class="mi">1</span><span class="o">])])</span>
                      <span class="o">[</span><span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="o">([</span><span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span>
                              <span class="mi">1</span><span class="o">,</span>
                            <span class="o">[</span><span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="err">…</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">1</span><span class="o">])],</span>
                         <span class="err">…</span><span class="o">),</span> <span class="o">([(</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="o">[</span><span class="bp">-</span><span class="o">[</span><span class="mi">1</span><span class="bp">+</span> <span class="mi">0</span><span class="o">],</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">1</span><span class="o">]),</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span>
                            <span class="o">[</span><span class="bp">-</span><span class="o">[</span><span class="mi">1</span><span class="bp">+</span> <span class="mi">0</span><span class="o">],</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="bp">-</span><span class="o">[</span><span class="mi">1</span><span class="bp">+</span> <span class="mi">0</span><span class="o">],</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">1</span><span class="o">]),</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">1</span><span class="o">,</span>
                            <span class="o">[</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="bp">-</span><span class="o">[</span><span class="mi">1</span><span class="bp">+</span> <span class="mi">0</span><span class="o">],</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">1</span><span class="o">]),</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">1</span><span class="o">,</span>
                            <span class="o">[</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="bp">-</span><span class="o">[</span><span class="mi">1</span><span class="bp">+</span> <span class="mi">0</span><span class="o">],</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="bp">-</span><span class="o">[</span><span class="mi">1</span><span class="bp">+</span> <span class="mi">0</span><span class="o">],</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">1</span><span class="o">]),</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">of_nat</span> <span class="mi">0</span><span class="o">,</span>
</code></pre></div>



<a name="206642398"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/Arena%20allocation%20for%20ITPs/near/206642398" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs.html#206642398">(Aug 11 2020 at 23:11)</a>:</h4>
<p>I think we will have to do something about <code>omega</code> soon. It has no maintainer and the author doesn't seem interested in maintenance</p>



<a name="206642465"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/Arena%20allocation%20for%20ITPs/near/206642465" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs.html#206642465">(Aug 11 2020 at 23:12)</a>:</h4>
<p>I think Seul really wanted to have part of it running in the kernel</p>



<a name="206642558"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/Arena%20allocation%20for%20ITPs/near/206642558" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs.html#206642558">(Aug 11 2020 at 23:13)</a>:</h4>
<p>I'm guessing that's what the array of <code>trivial</code>ities are doing</p>



<a name="206642753"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/Arena%20allocation%20for%20ITPs/near/206642753" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs.html#206642753">(Aug 11 2020 at 23:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs/near/206642398">said</a>:</p>
<blockquote>
<p>I think we will have to do something about <code>omega</code> soon. It has no maintainer and the author doesn't seem interested in maintenance</p>
</blockquote>
<p>I'm certain we'll have to do something about omega before the Lean 4 transition, because I can't imagine the current one getting ported.</p>



<a name="206643105"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/Arena%20allocation%20for%20ITPs/near/206643105" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs.html#206643105">(Aug 11 2020 at 23:19)</a>:</h4>
<p>I'm assuming that <code>213ms : real.pi_lt_31416 </code> is implied by <code>346ms : real.pi_lt_3141593</code>?</p>



<a name="206676530"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/Arena%20allocation%20for%20ITPs/near/206676530" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Wong <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs.html#206676530">(Aug 12 2020 at 09:55)</a>:</h4>
<p>How much work would it take to clean up <code>omega</code>? That sounds like something I can help out with, but I don't want to lick the cookie if I can't eat it.</p>



<a name="206676903"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/Arena%20allocation%20for%20ITPs/near/206676903" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs.html#206676903">(Aug 12 2020 at 10:00)</a>:</h4>
<p><code>omega</code> is 3k lines of pretty intricate code with limited documentation. It's a good proof of concept for reflexive tactics in Lean but I'm not sure it's the right approach overall. Fixing some of the <a href="https://github.com/leanprover-community/mathlib/issues/1484">open bugs</a> would be nice, but for serious improvements it might be easier to start from scratch.</p>



<a name="206677067"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/Arena%20allocation%20for%20ITPs/near/206677067" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs.html#206677067">(Aug 12 2020 at 10:02)</a>:</h4>
<p>For comparison, cloc says <code>linarith</code> is 711 code lines and 752 comment lines, <code>omega</code> is 2342 code and 367 comment.</p>



<a name="206677173"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/Arena%20allocation%20for%20ITPs/near/206677173" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/Arena.20allocation.20for.20ITPs.html#206677173">(Aug 12 2020 at 10:04)</a>:</h4>
<p>A rewrite should probably take some inspiration from the <code>lra</code>/<code>lia</code> interaction in Coq and share some code with <code>linarith</code>.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>