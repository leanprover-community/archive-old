---
layout: archive
title: Zulip Chat Archive
permalink: /stream/236449-Program-verification/topic/SMT.20(Z3).20bindings.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/index.html">Program verification</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/SMT.20(Z3).20bindings.html">SMT (Z3) bindings</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="199617299"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/SMT%20%28Z3%29%20bindings/near/199617299" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alcides Fonseca <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/SMT.20(Z3).20bindings.html#199617299">(Jun 03 2020 at 13:12)</a>:</h4>
<p>I understand at some point there was a smt tactic in lean. Is there any documentation on how to use an smt solver (z3 would be ideal for me) from Lean?</p>



<a name="199618896"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/SMT%20%28Z3%29%20bindings/near/199618896" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/SMT.20(Z3).20bindings.html#199618896">(Jun 03 2020 at 13:27)</a>:</h4>
<p>There is still a bunch of <code>smt</code> stuff in core</p>



<a name="199618899"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/SMT%20%28Z3%29%20bindings/near/199618899" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/SMT.20(Z3).20bindings.html#199618899">(Jun 03 2020 at 13:27)</a>:</h4>
<p>I've never used it</p>



<a name="199619254"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/SMT%20%28Z3%29%20bindings/near/199619254" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/SMT.20(Z3).20bindings.html#199619254">(Jun 03 2020 at 13:30)</a>:</h4>
<p>I remember Mario recently saying that nobody has ever used it.</p>
<p>If you figure it out, please let us know!</p>



<a name="199621216"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/SMT%20%28Z3%29%20bindings/near/199621216" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alcides Fonseca <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/SMT.20(Z3).20bindings.html#199621216">(Jun 03 2020 at 13:47)</a>:</h4>
<p>There is just a tactic that provides debugging for seeing the SMT state. But as far as I know, SMT is only used inside the c++ core.</p>
<p>-- This tactic is just a placeholder, designed to be modified for specific performance experiments</p>



<a name="199627251"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/SMT%20%28Z3%29%20bindings/near/199627251" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Simon Hudon <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/SMT.20(Z3).20bindings.html#199627251">(Jun 03 2020 at 14:35)</a>:</h4>
<p>I think <span class="user-mention" data-user-id="116045">@Jesse Michael Han</span> uses it frequently</p>



<a name="199628109"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/SMT%20%28Z3%29%20bindings/near/199628109" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/SMT.20(Z3).20bindings.html#199628109">(Jun 03 2020 at 14:42)</a>:</h4>
<p>There are two different questions here:</p>
<ol>
<li>About the internal SMT state (i.e. <code>begin[smt] ... end</code>, <code>by cc</code>): calling this SMT is a bit of a stretch.  There is no SAT solver, and it only knows about congruence closure (with AC) and heuristic instantiation.  At least <code>by cc</code> is used somewhat often in mathlib.</li>
<li>Interfacing with external SMT solvers.  Jared had an unverified interface to Z3 at one point: <a href="https://github.com/leanprover/smt2_interface">https://github.com/leanprover/smt2_interface</a>  This allows you to call Z3 on Lean goals (including some arithmetic), but it doesn't do proofs.</li>
</ol>



<a name="199628148"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/SMT%20%28Z3%29%20bindings/near/199628148" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/SMT.20(Z3).20bindings.html#199628148">(Jun 03 2020 at 14:42)</a>:</h4>
<p>The Z3 interface is completely unused, AFAIK.</p>



<a name="199632694"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/SMT%20%28Z3%29%20bindings/near/199632694" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alcides Fonseca <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/SMT.20(Z3).20bindings.html#199632694">(Jun 03 2020 at 15:16)</a>:</h4>
<p>Thanks! I was looking for that second one!</p>



<a name="199633141"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/SMT%20%28Z3%29%20bindings/near/199633141" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/SMT.20(Z3).20bindings.html#199633141">(Jun 03 2020 at 15:19)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/1083">#1083</a> is related, but uses Vampire, not Z3.</p>



<a name="199659906"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/SMT%20%28Z3%29%20bindings/near/199659906" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jesse Michael Han <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/SMT.20(Z3).20bindings.html#199659906">(Jun 03 2020 at 18:45)</a>:</h4>
<p>any invocation of <code>finish</code> dips into the internal SMT state (via heuristic instantiation + congruence closure)</p>



<a name="201329018"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/236449-Program%20verification/topic/SMT%20%28Z3%29%20bindings/near/201329018" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joe Hendrix <a href="https://leanprover-community.github.io/archive/stream/236449-Program-verification/topic/SMT.20(Z3).20bindings.html#201329018">(Jun 18 2020 at 21:37)</a>:</h4>
<p>I used the lean3 SMT tactic for congruence-closure type-problems -- it worked fine, but as noted it's not really the same  as an SMT solver.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>