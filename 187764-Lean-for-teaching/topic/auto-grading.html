---
layout: archive
title: Zulip Chat Archive
permalink: /stream/187764-Lean-for-teaching/topic/auto-grading.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/index.html">Lean for teaching</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/auto-grading.html">auto-grading</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="263603014"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/auto-grading/near/263603014" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/auto-grading.html#263603014">(Dec 03 2021 at 16:25)</a>:</h4>
<p>I was scheduled to teach an undergraduate class based on the Hitchhiker's guide for the spring semester. Unfortunately, 8:30 am is attractive time slot for students. Who knew. It's been pushed back to fall '22. </p>
<p>One of things I wanted to do was set up GitHub actions for auto-grading of Lean assignments. Something reusable would be nice. It looks straightforward to write some simple checks on the file. </p>
<ol>
<li>Do people have any existing setups? </li>
<li>Is there any value in hardcore locking things down?</li>
</ol>



<a name="263604136"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/auto-grading/near/263604136" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/auto-grading.html#263604136">(Dec 03 2021 at 16:33)</a>:</h4>
<p>I would love to have this, too.</p>



<a name="263604428"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/auto-grading/near/263604428" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/auto-grading.html#263604428">(Dec 03 2021 at 16:35)</a>:</h4>
<p>What I have done before is have students email me links to their code in the web editor (like <a href="https://leanprover-community.github.io/lean-web-editor/#code=--------------------------------------------%0D%0A--Andrew%20Souther%2C%20HW2%20Extra%20Credit%20Problem--%0D%0A--------------------------------------------%0D%0A%0D%0Aimport%20data.real.basic%0D%0A%0D%0Alocal%20notation%20%60%7C%60x%60%7C%60%20%3A%3D%20abs%20x%0D%0A%0D%0A%2F-%20Definition%20of%20the%20limit%20of%20a%20sequence%20-%2F%0D%0Adef%20converges_to%20%28x%20%3A%20%E2%84%95%20%E2%86%92%20%E2%84%9D%29%20%28X%20%3A%20%E2%84%9D%29%20%3A%20Prop%20%3A%3D%0D%0A%E2%88%80%20%CE%B5%20%3E%200%2C%20%E2%88%83%20%28M%20%3A%20%E2%84%95%29%2C%20%E2%88%80%20%28n%20%E2%89%A5%20M%29%2C%20%7Cx%20n%20-%20X%7C%20%3C%20%CE%B5%0D%0A%0D%0A%2F-%20If%20the%20sequence%20%60x%60%20converges%20to%20%60X%60%2C%20then%20for%20any%20constant%20%60C%60%2C%20the%20sequence%20%60C%20*%20x%60%0D%0Aconverges%20to%20%60C%20*%20X%60.%20-%2F%0D%0Aexample%20%28x%20%3A%20%E2%84%95%20%E2%86%92%20%E2%84%9D%29%20%28X%20C%20%3A%20%E2%84%9D%29%20%28hf%20%3A%20converges_to%20x%20X%29%20%3A%0D%0A%20%20converges_to%20%28%CE%BB%20n%2C%20C%20*%20x%20n%29%20%28C%20*%20X%29%20%3A%3D%0D%0Abegin%0D%0A%20%20intros%20%CE%B5%20h%CE%B5%2C%0D%0A%20%20--%20We%20consider%20two%20cases%20depending%20on%20whether%20or%20not%20the%20constant%20%60C%60%20is%20zero.%0D%0A%20%20by_cases%20hC%20%3A%20C%20%3D%200%2C%0D%0A%20%20--If%20C%3D%200%2C%20we%20use%20the%20fact%20that%20C*x%20%3D%200%20for%20all%20n.%20Any%20M%20will%20do%20in%20this%20case.%0D%0A%20%20%7Bhave%20h_zero%3A%20%E2%88%80%20n%2C%20%28%CE%BB%20n%2C%20C%20*%20x%20n%29n%20%3D%200%2C%0D%0A%20%20%7Bintro%20n%2C%0D%0A%20%20rw%20hC%2C%0D%0A%20%20exact%20zero_mul%20%28x%20n%29%7D%2C%0D%0A%20%20have%20hC_zero%20%3A%20C%20*%20X%20%3D%200%20%3A%3D%20mul_eq_zero_of_left%20hC%20X%2C%0D%0A%20%20use%200%2C%0D%0A%20%20intros%20n%20hn%2C%0D%0A%20%20rw%20%5BhC_zero%2C%20h_zero%5D%2C%0D%0A%20%20norm_num%2C%0D%0A%20%20linarith%7D%2C%0D%0A%20%20--If%20C%20%E2%89%A0%200%2C%20we%20pick%20an%20M%20to%20ensure%20that%20%7Cx%20-%20X%7C%20%3C%20%28%CE%B5%20%2F%20%7CC%7C%29%0D%0A%20%20%7B%20--%20If%20%60C%20%E2%89%A0%200%60%2C%20then%20%60%7CC%7C%20%3E%200%60.%0D%0A%20%20%20%20have%20hC'%20%3A%20%7CC%7C%20%3E%200%20%3A%3D%20abs_pos_iff.mpr%20hC%2C%0D%0A%20%20%20%20have%20h_lambda%20%3A%20%E2%88%80%20n%2C%20%28%CE%BB%20%28n%20%3A%20%E2%84%95%29%2C%20C%20*%20x%20n%29%20n%20%3D%20C%20*%20%28x%20n%29%20%3A%3D%20congr_fun%20rfl%2C%0D%0A%20%20%20%20cases%20hf%20%28%CE%B5%2F%7CC%7C%29%20%28div_pos%20h%CE%B5%20hC'%29%20with%20M%20hM%2C%0D%0A%20%20%20%20use%20M%2C%0D%0A%20%20%20%20intros%20n%20hn%2C%0D%0A%20%20%20%20have%20h_dist%3A%20%20%28C%20*%20x%20n%20-%20C%20*%20X%29%20%3D%20%20%28C%20*%20%28x%20n%20-%20X%29%29%20%3A%3D%20by%20ring%2C%0D%0A%20%20%20%20rw%20%5Bh_lambda%2C%20h_dist%2C%20abs_mul%20C%20%28x%20n%20-%20X%29%5D%2C%0D%0A%20%20%20%20have%20%3A%20%7Cx%20n%20-%20X%7C%20%3C%20%CE%B5%20%2F%20%7CC%7C%20%E2%86%92%20%7CC%7C%20*%20%7Cx%20n%20-%20X%7C%20%3C%20%CE%B5%20%3A%3D%20%28lt_div_iff'%20hC'%29.mp%2C%0D%0A%20%20%20%20apply%20this%2C%0D%0A%20%20%20%20apply%20hM%2C%0D%0A%20%20%20%20exact%20hn%7D%0D%0Aend%0D%0A%0D%0A%0D%0A-------------%0D%0A--Lagniappe--%0D%0A-------------%0D%0A%0D%0A--Problem%204%20has%20such%20a%20similar%20structure%2C%20I%20thought%20it%20would%20be%20reasonable%20too.%0D%0A%0D%0Aexample%20%28x%20%3A%20%E2%84%95%20%E2%86%92%20%E2%84%9D%29%20%28X%20l%20%3A%20%E2%84%9D%29%20%28hf%20%3A%20converges_to%20x%20l%29%20%28h_g%20%3A%20l%20%3E%20X%29%3A%0D%0A%20%20%E2%88%83%20%28M%20%3A%20%E2%84%95%29%2C%20%E2%88%80%28n%20%3A%20%E2%84%95%29%2C%20n%20%E2%89%A5%20M%20%E2%86%92%20x%20n%20%3E%20X%20%3A%3D%0D%0Abegin%0D%0A%20%20have%20h%E2%82%81%20%3A%20l%20-%20X%20%3E%200%20%3A%3D%20%20sub_pos.mpr%20h_g%2C%0D%0A%20%20cases%20hf%20%28l%20-%20X%29%20h%E2%82%81%20with%20M%20hM%2C%0D%0A%20%20use%20M%2C%0D%0A%20%20intros%20n%20h%E2%82%82%2C%0D%0A%20%20by_cases%20h%E2%82%83%20%3A%20x%20n%20-%20l%20%3E%200%2C%0D%0A%20%20%7Bcalc%20x%20n%20%3E%20l%20%3A%20sub_pos.mp%20h%E2%82%83%0D%0A%20%20%20%20%20%20...%20%20%20%3E%20X%20%3A%20h_g%7D%2C%0D%0A%20%20%7Bhave%20h%E2%82%84%3A%20l%20-%20x%20n%20%3E%3D%200%20%3A%3D%20by%20linarith%2C%0D%0A%20%20have%20h%E2%82%85%20%3A%20l%20-%20x%20n%20%3C%20l%20-%20X%2C%0D%0A%20%20%7Bcalc%20l%20-%20x%20n%20%3D%20%7Cl%20-%20x%20n%7C%20%3A%20%28abs_of_nonneg%20h%E2%82%84%29.symm%0D%0A%20%20%20%20%20%20%20%20%20%20%20...%20%3D%20%7Cx%20n%20-%20l%7C%20%3A%20abs_sub%20l%20%28x%20n%29%0D%0A%20%20%20%20%20%20%20%20%20%20%20...%20%3C%20l%20-%20X%20%20%20%20%20%3A%20hM%20n%20h%E2%82%82%7D%2C%0D%0A%20%20linarith%7D%2C%0D%0Aend">this</a>, cc <span class="user-mention" data-user-id="366882">@Andrew  Souther</span> ), so that I just click on the link and can confirm it works.</p>



<a name="263604671"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/auto-grading/near/263604671" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/auto-grading.html#263604671">(Dec 03 2021 at 16:37)</a>:</h4>
<p>For my previous Lean course, I used copy-pasta from MS Teams. This semester I got familiar with <a href="http://classroom.github.com">GitHub Classroom</a>. I only use it to auto-generate pdfs from the tex source in my grad course the moment.</p>



<a name="263604883"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/auto-grading/near/263604883" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/auto-grading.html#263604883">(Dec 03 2021 at 16:39)</a>:</h4>
<p>I've been thinking of using Gradescope for this (I really like their features for handwritten assignments), but it's for-pay.<br>
<a href="https://help.gradescope.com/article/h7ztxl9164-instructor-assignment-types#programming_assignments">https://help.gradescope.com/article/h7ztxl9164-instructor-assignment-types#programming_assignments</a></p>



<a name="263605020"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/auto-grading/near/263605020" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/auto-grading.html#263605020">(Dec 03 2021 at 16:40)</a>:</h4>
<p>It looks functionally equivalent to GH Classroom's offering. <a href="https://docs.github.com/en/education/manage-coursework-with-github-classroom/teach-with-github-classroom/use-autograding">Docs</a></p>



<a name="263605427"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/auto-grading/near/263605427" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/auto-grading.html#263605427">(Dec 03 2021 at 16:44)</a>:</h4>
<p>Which is really just some shortcuts for GH actions</p>



<a name="263605473"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/auto-grading/near/263605473" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/auto-grading.html#263605473">(Dec 03 2021 at 16:44)</a>:</h4>
<p>I'm worried about expecting my math majors to understand git, remote authentication, etc ... do you know what the user experience is like?  (Can they just point-and-click upload a file?)</p>



<a name="263605662"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/auto-grading/near/263605662" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/auto-grading.html#263605662">(Dec 03 2021 at 16:46)</a>:</h4>
<p>I took the position that knowing git is a job skill even for math PhDs and then forced them to use it. GH has made it pretty painless especially if they use the GUIs for MacOS/Win.</p>



<a name="263605757"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/auto-grading/near/263605757" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/auto-grading.html#263605757">(Dec 03 2021 at 16:47)</a>:</h4>
<p>I also had a homework 0 which was git/GH training. <a href="https://github.com/UofSC-Fall-2021-Math-738-001">Here</a> is the organization page for the class.</p>



<a name="263606002"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/auto-grading/near/263606002" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/auto-grading.html#263606002">(Dec 03 2021 at 16:48)</a>:</h4>
<p>The main features I most enjoy about GH Classroom are</p>
<ol>
<li>the actions integration</li>
<li>autocreation of PRs for each submitted assignment. It is so much easier to comment directly on a line of a file. </li>
</ol>
<p>But overall it is pretty bare bones.</p>



<a name="263606374"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/auto-grading/near/263606374" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/auto-grading.html#263606374">(Dec 03 2021 at 16:51)</a>:</h4>
<p><span class="user-mention" data-user-id="110596">@Rob Lewis</span> mentioned he had some existing tools.</p>



<a name="263610391"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/auto-grading/near/263610391" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/auto-grading.html#263610391">(Dec 03 2021 at 17:21)</a>:</h4>
<p>Brown has a Gradescope subscription, so this semester I used that. My TAs tried to set up a simple autograder, but it was clunky, and they hadn't learned to metaprogram so it would have fallen on me to do it proplerly. I decided to save myself the effort and wait until next time I teach the class, when my TAs will know some metaprogramming and can do something more robust.</p>



<a name="263610619"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/auto-grading/near/263610619" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/auto-grading.html#263610619">(Dec 03 2021 at 17:23)</a>:</h4>
<p>The problem is that (depending on how you structure the assignments) a check for "does this file compile" is both too strict and too weak. You may want to allow students to sorry certain lemmas, or if every problem is in the same file, you'd need extra code to distinguish in which problem the comilation error happens.</p>



<a name="263610763"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/auto-grading/near/263610763" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/auto-grading.html#263610763">(Dec 03 2021 at 17:24)</a>:</h4>
<p>Conversely, you'd want to check that nobody defines an unsound axiom and uses that as a <code>sorry</code> that doesn't raise any warnings.</p>



<a name="263610910"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/auto-grading/near/263610910" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/auto-grading.html#263610910">(Dec 03 2021 at 17:25)</a>:</h4>
<p>Really you want a metaprogram grading script that checks for a declaration with a certain name and type, and computes which axioms it uses. But even this isn't enough, if you have problems that ask students to state a theorem on their own -- there's probably a range of acceptable answers.</p>



<a name="263611298"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/auto-grading/near/263611298" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/auto-grading.html#263611298">(Dec 03 2021 at 17:28)</a>:</h4>
<p>I have some scripts for a course based on Logic and Proofs. Here the assignment structure was much simpler: there were two Lean assignments, each with 20 .lean files, each containing one <code>sorry</code>ed theorem. So the autograder would import all 20 files, then run a metaprogram to check for sorry-free proofs with the right type.</p>



<a name="263611495"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/auto-grading/near/263611495" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/auto-grading.html#263611495">(Dec 03 2021 at 17:29)</a>:</h4>
<p>Of course students still found ways to break that, out of ~150 submissions I'd have 15 that removed namespaces, or proved auxiliary lemmas with the same name in multiple files outside of the problem namespace, or whatever.</p>



<a name="263611667"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/auto-grading/near/263611667" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/auto-grading.html#263611667">(Dec 03 2021 at 17:30)</a>:</h4>
<p>And this wasn't set up on GitHub or Gradescope. We used CoCalc so I'd just download a folder with all the submissions and the script would output a spreadsheet I could upload to Canvas.</p>



<a name="263612514"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/auto-grading/near/263612514" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/auto-grading.html#263612514">(Dec 03 2021 at 17:37)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110596">Rob Lewis</span> <a href="#narrow/stream/187764-Lean-for.20teaching/topic/auto-grading/near/263611495">said</a>:</p>
<blockquote>
<p>Of course students still found ways to break that, out of ~150 submissions I'd have 15 that removed namespaces, or proved auxiliary lemmas with the same name in multiple files outside of the problem namespace, or whatever.</p>
</blockquote>
<p>Presumably, students would self-remedy if given immediate feedback on the assignment?</p>



<a name="263613074"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/auto-grading/near/263613074" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/auto-grading.html#263613074">(Dec 03 2021 at 17:41)</a>:</h4>
<p>For sure. This wasn't doable with the CoCalc setup, I didn't know how to distribute an autograder without exposing the solutions. Certainly possible on Gradescope, and I assume on GitHub.</p>



<a name="263613180"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/auto-grading/near/263613180" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/auto-grading.html#263613180">(Dec 03 2021 at 17:42)</a>:</h4>
<p>Er, actually, I guess the autograder for the L&amp;P course didn't need to know the solutions. I take it back</p>



<a name="263613817"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/auto-grading/near/263613817" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/auto-grading.html#263613817">(Dec 03 2021 at 17:47)</a>:</h4>
<p>It should be possible to write an autograder for Fermat's Last Theorem without knowing the solution <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span></p>



<a name="263613828"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/auto-grading/near/263613828" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/auto-grading.html#263613828">(Dec 03 2021 at 17:47)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110596">Rob Lewis</span> <a href="#narrow/stream/187764-Lean-for.20teaching/topic/auto-grading/near/263611298">said</a>:</p>
<blockquote>
<p>I have some scripts for a course based on Logic and Proofs. Here the assignment structure was much simpler: there were two Lean assignments, each with 20 .lean files, each containing one <code>sorry</code>ed theorem. So the autograder would import all 20 files, then run a metaprogram to check for sorry-free proofs with the right type.</p>
</blockquote>
<p>Other than perhaps checking for some dubious <code>axiom</code>s and some more descriptive feedback, I didn't imagine more than this. </p>
<p>I have no idea how to handle assignments where students roll their own statements.</p>



<a name="263614168"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/auto-grading/near/263614168" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/auto-grading.html#263614168">(Dec 03 2021 at 17:49)</a>:</h4>
<p>Another answer to what computers can do for mathematicians: save them from reading non-sense proofs. If a student can both go to a blackboard and explain a statement and prove it in lean, I have decent confidence they can write a solid natural language proof.</p>



<a name="263621013"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/auto-grading/near/263621013" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/auto-grading.html#263621013">(Dec 03 2021 at 18:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="306577">Matthew Ballard</span> <a href="#narrow/stream/187764-Lean-for.20teaching/topic/auto-grading/near/263614168">said</a>:</p>
<blockquote>
<p>Another answer to what computers can do for mathematicians: save them from reading non-sense proofs. If a student can both go to a blackboard and explain a statement and prove it in lean, I have decent confidence they can write a solid natural language proof.</p>
</blockquote>
<p>That is <em>extremely</em> optimistic in my experience. That's why I developed my controlled natural language tactics, in order to help students transfer their Lean proofs to paper.</p>



<a name="263621280"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/auto-grading/near/263621280" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/auto-grading.html#263621280">(Dec 03 2021 at 18:44)</a>:</h4>
<p>But they could stand at a board and explain things well?</p>



<a name="263634993"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/auto-grading/near/263634993" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/auto-grading.html#263634993">(Dec 03 2021 at 20:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110031">Patrick Massot</span> <a href="#narrow/stream/187764-Lean-for.20teaching/topic/auto-grading/near/263621013">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="306577">Matthew Ballard</span> <a href="#narrow/stream/187764-Lean-for.20teaching/topic/auto-grading/near/263614168">said</a>:</p>
<blockquote>
<p>Another answer to what computers can do for mathematicians: save them from reading non-sense proofs. If a student can both go to a blackboard and explain a statement and prove it in lean, I have decent confidence they can write a solid natural language proof.</p>
</blockquote>
<p>That is <em>extremely</em> optimistic in my experience. That's why I developed my controlled natural language tactics, in order to help students transfer their Lean proofs to paper.</p>
</blockquote>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span>  Are these controlled NL tactics a part of mathlib? I would love to have these for teaching students as well.</p>



<a name="263635212"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/auto-grading/near/263635212" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/auto-grading.html#263635212">(Dec 03 2021 at 20:41)</a>:</h4>
<p>They are not part of mathlib atm</p>



<a name="263635237"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/auto-grading/near/263635237" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/auto-grading.html#263635237">(Dec 03 2021 at 20:41)</a>:</h4>
<p><a href="https://github.com/PatrickMassot/lean-bavard">https://github.com/PatrickMassot/lean-bavard</a></p>



<a name="263635894"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/auto-grading/near/263635894" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/auto-grading.html#263635894">(Dec 03 2021 at 20:47)</a>:</h4>
<p>I don't think they're even in English yet</p>



<a name="263635909"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/auto-grading/near/263635909" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/auto-grading.html#263635909">(Dec 03 2021 at 20:47)</a>:</h4>
<p>But a repo with these tactics would be a great addition to <a href="https://leanprover-community.github.io/lean_projects.html">https://leanprover-community.github.io/lean_projects.html</a></p>



<a name="263635944"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/auto-grading/near/263635944" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/auto-grading.html#263635944">(Dec 03 2021 at 20:47)</a>:</h4>
<p>And a course repo could use that project as a dependency as well as mathlib</p>



<a name="263636186"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/auto-grading/near/263636186" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/auto-grading.html#263636186">(Dec 03 2021 at 20:49)</a>:</h4>
<p>Thanks a lot! Oh wow, these are a lot of tactics!!</p>
<p>I'll try and translate these to English over the winter break.</p>



<a name="263636276"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/auto-grading/near/263636276" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/auto-grading.html#263636276">(Dec 03 2021 at 20:50)</a>:</h4>
<p>Is there any way to use these in the lean web editor or something web-based that does not require a lean installation?</p>



<a name="263636365"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/auto-grading/near/263636365" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/auto-grading.html#263636365">(Dec 03 2021 at 20:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110596">Rob Lewis</span> <a href="#narrow/stream/187764-Lean-for.20teaching/topic/auto-grading/near/263635894">said</a>:</p>
<blockquote>
<p>I don't think they're even in English yet</p>
</blockquote>
<p>There is a partial English translation. I don't know if it is on github. But there is a talk on Youtube by Patrick from a month ago, where he does an english demo</p>



<a name="263637086"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/auto-grading/near/263637086" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/auto-grading.html#263637086">(Dec 03 2021 at 20:54)</a>:</h4>
<p><span class="user-mention silent" data-user-id="245078">Apurva Nakade</span> <a href="#narrow/stream/187764-Lean-for.20teaching/topic/auto-grading/near/263636276">said</a>:</p>
<blockquote>
<p>Is there any way to use these in the lean web editor or something web-based that does not require a lean installation?</p>
</blockquote>
<p>I guess you'd probably have to set up your own web editor and change the configuration slightly -- maybe <a href="https://github.com/leanprover-community/lean-web-editor/blob/master/combined_lib/leanpkg.toml">here</a>? <span class="user-mention" data-user-id="123965">@Bryan Gin-ge Chen</span> would know better</p>



<a name="263654575"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/auto-grading/near/263654575" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/auto-grading.html#263654575">(Dec 03 2021 at 21:21)</a>:</h4>
<p>Yeah, that's right. The <a href="https://github.com/leanprover-community/lean-web-editor/blob/master/README.md">leanprover-community/lean-web-editor repo README</a> hopefully has enough information to get you started, otherwise feel free to ping me here.</p>



<a name="263662635"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/auto-grading/near/263662635" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/auto-grading.html#263662635">(Dec 03 2021 at 22:36)</a>:</h4>
<p>Great! I'll start hacking and see how it goes...</p>



<a name="263706757"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/auto-grading/near/263706757" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/auto-grading.html#263706757">(Dec 04 2021 at 13:19)</a>:</h4>
<p>I know I need to find time to work on this. But time is extremely scarce. I need to clean up things to make them easier to translate. And there are additional challenges with English because Lean already uses some English words that can't be reused.</p>



<a name="263710144"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/auto-grading/near/263710144" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/auto-grading.html#263710144">(Dec 04 2021 at 14:11)</a>:</h4>
<p>One issue with the English clash is that mathematicians seem to use "apply" to mean so many different things. I think it's a really hard tactic to teach! Not because what it does is difficult, but because even if you know what it does, it is still a word which pops into your head every time you want to apply a theorem (which might be an iff statement) or apply a theorem to a hypothesis, or basically use any technique at all on any part of the local context by applying the technique.</p>



<a name="263714133"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/auto-grading/near/263714133" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/auto-grading.html#263714133">(Dec 04 2021 at 15:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/187764-Lean-for.20teaching/topic/auto-grading/near/263710144">said</a>:</p>
<blockquote>
<p>you want to apply a theorem (which might be an iff statement) or apply a theorem to a hypothesis, or basically use any technique at all on any part of the local context by applying the technique.</p>
</blockquote>
<p>I feel like it may be possible to generalize <code>apply</code> to these cases as well. For example, one could add an <code>apply f at h</code> to  apply functions to local hypotheses. Also, an <code>iff</code> statement could potentially have a <code>coe_fun</code> instance that coerces it to <code>mp</code> for <code>apply</code>.</p>



<a name="263714662"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/auto-grading/near/263714662" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/auto-grading.html#263714662">(Dec 04 2021 at 15:40)</a>:</h4>
<p><span class="user-mention" data-user-id="315577">@Mac</span> I've seen examples where new users wanted to <code>apply</code> and <code>iff</code> where they meant <code>rw</code>. I completely understand why they might want to use <code>apply</code> there, because that's the word you would use informally. I think that "rewrite" is almost never used in informal maths.</p>



<a name="263714821"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/auto-grading/near/263714821" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mac <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/auto-grading.html#263714821">(Dec 04 2021 at 15:44)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> fair enough. In that case there is an unfortunate clash between functional terminology and proof terminology that does not have an easy answer. If one was writing more natural tactics it may be a good idea to rename <code>apply</code> to <code>fapply</code>, <code>apply_fun</code>, or <code>apply function</code> and use plain <code>apply</code> for <code>rewrite</code>/<code>rw</code> (or potentially <code>simp</code>).</p>



<a name="263736038"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/auto-grading/near/263736038" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/auto-grading.html#263736038">(Dec 04 2021 at 22:46)</a>:</h4>
<p>I agree with these points. I myself find it hard to use <code>apply</code> and I only ever use it retrospectively to compactify. Perhaps <code>suffices</code> is a replacement? <code>rw</code> and <code>ext</code> are words that don't translate easily into math. And I don't quite get the differences between<code>let</code> <code>set</code> and <code>have</code> lol. </p>
<p>I still think it would be worthwhile to try and get NL tactics, even if they end up being clumsy and inefficient.</p>



<a name="263736190"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/auto-grading/near/263736190" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/auto-grading.html#263736190">(Dec 04 2021 at 22:50)</a>:</h4>
<p>I'll try to translate at least a few of Patrick's tactics. I really want to see some basic proof in Lean being more or less indistinguishable from a math proof on paper.</p>



<a name="263736903"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/auto-grading/near/263736903" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/auto-grading.html#263736903">(Dec 04 2021 at 23:06)</a>:</h4>
<p>For teaching purposes, my experience is that the vagueness of the "apply" word is indeed extremely problematic (we have the same issue in French). And I also agree that <code>rw</code> doesn't translate well on paper. I'm not happy with my NL version of <code>rw</code> which doesn't sound natural (because nothing would).</p>



<a name="263736947"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/auto-grading/near/263736947" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/auto-grading.html#263736947">(Dec 04 2021 at 23:08)</a>:</h4>
<p>About <code>let</code> and <code>have</code>, I sometimes wish Lean would distinguish between those. It's a trap that almost all beginners fall into. But for teaching purposes I'm very happy that Lean distinguishes them. I don't want my students to mix defining data and asserting a statement.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>