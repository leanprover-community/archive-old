---
layout: archive
title: Zulip Chat Archive
permalink: /stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/index.html">Lean for teaching</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html">autograding with GH classroom</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="269609376"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/269609376" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#269609376">(Jan 27 2022 at 17:42)</a>:</h4>
<p>I put together a basic auto-grading setup for Lean homework assignments using GitHub classroom at <a href="https://github.com/c0ppelius/lean-autograding">https://github.com/c0ppelius/lean-autograding</a></p>



<a name="269609919"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/269609919" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#269609919">(Jan 27 2022 at 17:46)</a>:</h4>
<p>The actual testing can certainly be improved. The main value of the repo is to show how to integrate calls to Lean into the GH classroom setup.</p>



<a name="269612983"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/269612983" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#269612983">(Jan 27 2022 at 18:03)</a>:</h4>
<p>Darn, I hacked together something literally last night :)</p>



<a name="269613123"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/269613123" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#269613123">(Jan 27 2022 at 18:04)</a>:</h4>
<p>Anyway, thank you for this (I am sure) far more professional setup!</p>



<a name="269613126"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/269613126" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#269613126">(Jan 27 2022 at 18:04)</a>:</h4>
<p>Great minds :)</p>



<a name="269613300"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/269613300" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#269613300">(Jan 27 2022 at 18:05)</a>:</h4>
<p>Did you use GitHub Actions?</p>



<a name="269613378"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/269613378" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#269613378">(Jan 27 2022 at 18:05)</a>:</h4>
<p>Mine is for Gradescope, although it's probably not so different.</p>



<a name="269613515"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/269613515" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#269613515">(Jan 27 2022 at 18:06)</a>:</h4>
<p>That seems like it might have better LMS support</p>



<a name="269613681"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/269613681" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#269613681">(Jan 27 2022 at 18:07)</a>:</h4>
<p>It also has the advantage of not using <code>git</code></p>



<a name="269614437"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/269614437" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#269614437">(Jan 27 2022 at 18:12)</a>:</h4>
<p>We'll see how my students find it, but the interface seems pretty easy, they just upload a single Lean file with a specified name.</p>



<a name="269614769"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/269614769" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#269614769">(Jan 27 2022 at 18:15)</a>:</h4>
<p>And I see we came up with the same mechanism for scoring:  first fail globally if the file contains errors or warnings, then apply a series of tests to verify whether each exercise has the type it's supposed to.</p>



<a name="269615556"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/269615556" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#269615556">(Jan 27 2022 at 18:21)</a>:</h4>
<p>Ideally one would parse the document and test whether there is a proof of the correct type somewhere in there. If you wanted to give more open ended assignments.</p>



<a name="269615842"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/269615842" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#269615842">(Jan 27 2022 at 18:23)</a>:</h4>
<p>Things like <code>axiom</code>'s and <code>constant</code>'s could be filtered depending on if they came from source file, eg you have to prove <code>X</code> but can assume and use <code>Y,Z</code> and not worry about their proofs</p>



<a name="269615912"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/269615912" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#269615912">(Jan 27 2022 at 18:23)</a>:</h4>
<p>Did you include hints or anything in your message to students?</p>



<a name="269637712"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/269637712" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#269637712">(Jan 27 2022 at 21:04)</a>:</h4>
<p><span class="user-mention" data-user-id="306577">@Matthew Ballard</span>  I didn't include any check to filter out axioms.  My class is small enough that I plan to glance over everyone's code anyway, so I would catch that sort of thing visually.  It would be very nice to have this check, though (you do this?).</p>
<p>And I also don't include any hints, except that in the "fails globally" case here:<br>
<span class="user-mention silent" data-user-id="260507">Heather Macbeth</span> <a href="#narrow/stream/187764-Lean-for.20teaching/topic/autograding.20with.20GH.20classroom/near/269614769">said</a>:</p>
<blockquote>
<p>And I see we came up with the same mechanism for scoring:  first fail globally if the file contains errors or warnings, then apply a series of tests to verify whether each exercise has the type it's supposed to.</p>
</blockquote>
<p>it posts a message saying that it has failed globally due to an error/warning in the file, so that a student with a submission containing 4 correct problems doesn't get confused about why her score is 0.</p>



<a name="269637796"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/269637796" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#269637796">(Jan 27 2022 at 21:05)</a>:</h4>
<p>However, the proof is in the pudding!  I am curious to see how it works when tried on actual students :)</p>



<a name="269682113"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/269682113" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#269682113">(Jan 28 2022 at 03:32)</a>:</h4>
<p>If the proof is in the pudding, where is all that pudding in mathlib?? <span aria-label="yum" class="emoji emoji-1f60b" role="img" title="yum">:yum:</span></p>



<a name="271045354"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/271045354" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#271045354">(Feb 07 2022 at 21:36)</a>:</h4>
<p>Continuing with this thread, I have some meta code that checks for a term of a given type anywhere in <code>assignment.lean</code> which removes the requirement that students name their solutions strictly.</p>



<a name="271045405"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/271045405" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#271045405">(Feb 07 2022 at 21:37)</a>:</h4>
<p>I still really wish I could pull the axioms without passing through <code>stdout</code>.</p>



<a name="271045520"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/271045520" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#271045520">(Feb 07 2022 at 21:38)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>
<span class="kn">import</span> <span class="n">assignment</span>

<span class="kd">variable</span> <span class="n">T</span> <span class="o">:</span> <span class="kt">Type</span>

<span class="kn">open</span> <span class="n">tactic</span>

<span class="kd">meta</span> <span class="kd">def</span> <span class="n">in_import</span> <span class="o">(</span><span class="n">env</span> <span class="o">:</span> <span class="n">environment</span><span class="o">)</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">name</span><span class="o">)</span> <span class="o">(</span><span class="n">path</span> <span class="o">:</span> <span class="n">string</span><span class="o">)</span> <span class="o">:</span> <span class="n">bool</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">env.decl_olean</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">path</span><span class="o">)</span> <span class="bp">&amp;&amp;</span> <span class="n">env.contains</span> <span class="n">n</span> <span class="bp">&amp;&amp;</span> <span class="o">(</span><span class="n">n</span> <span class="bp">∉</span> <span class="o">[</span><span class="bp">``</span><span class="n">quot</span><span class="o">,</span> <span class="bp">``</span><span class="n">quot.mk</span><span class="o">,</span> <span class="bp">``</span><span class="n">quot.lift</span><span class="o">,</span> <span class="bp">``</span><span class="n">quot.ind</span><span class="o">])</span>

<span class="kd">meta</span> <span class="kd">def</span> <span class="n">exact_list</span> <span class="o">:</span> <span class="n">list</span> <span class="n">name</span> <span class="bp">→</span> <span class="n">tactic</span> <span class="n">unit</span>
<span class="bp">|</span> <span class="o">[]</span> <span class="o">:=</span> <span class="n">failed</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">H</span> <span class="o">::</span> <span class="n">Hs</span><span class="o">)</span> <span class="o">:=</span> <span class="k">do</span>
                  <span class="n">e</span> <span class="bp">←</span> <span class="n">mk_const</span> <span class="n">H</span><span class="o">,</span>
                  <span class="n">exact</span> <span class="n">e</span> <span class="bp">&lt;|&gt;</span> <span class="n">exact_list</span> <span class="n">Hs</span>

<span class="kd">meta</span> <span class="kd">def</span> <span class="n">check_solutions</span> <span class="o">:</span> <span class="n">tactic</span> <span class="n">unit</span> <span class="o">:=</span>
<span class="k">do</span> <span class="n">env</span> <span class="bp">&lt;-</span> <span class="n">get_env</span><span class="o">,</span>
   <span class="k">let</span> <span class="n">decls</span> <span class="o">:=</span> <span class="n">env.fold</span> <span class="o">[]</span> <span class="n">list.cons</span><span class="o">,</span>
   <span class="n">cwd</span> <span class="bp">←</span> <span class="n">unsafe_run_io</span> <span class="n">io.env.get_cwd</span><span class="o">,</span>
   <span class="k">let</span> <span class="n">names</span> <span class="o">:=</span> <span class="n">decls.map</span> <span class="n">declaration.to_name</span><span class="o">,</span>
   <span class="k">let</span> <span class="n">assignment_names</span> <span class="o">:=</span> <span class="n">names.filter</span>
     <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">in_import</span> <span class="n">env</span> <span class="n">x</span> <span class="o">(</span><span class="n">cwd</span> <span class="bp">++</span> <span class="s2">"/src/assignment.lean"</span><span class="o">)</span> <span class="bp">&amp;&amp;</span> <span class="n">not</span> <span class="n">x.is_internal</span><span class="o">),</span>
   <span class="n">exact_list</span> <span class="n">assignment_names</span>

<span class="kd">theorem</span> <span class="n">check</span> <span class="o">:</span> <span class="n">T</span>  <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">check_solutions</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="271197443"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/271197443" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#271197443">(Feb 08 2022 at 22:00)</a>:</h4>
<p>Update: <code>lean X.lean</code> dumps everything to <code>stdout</code>. <code>stderr</code> is empty. So the GH autograding action only cares about the exit code of the process.</p>



<a name="294855995"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/294855995" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gihan Marasingha <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#294855995">(Aug 23 2022 at 12:35)</a>:</h4>
<p>Great stuff! I've been away from Zulip for a few months and it's amazing to see what's happening. I'm actually planning to use Git Hub Classrooms with Lean for the new academic year.</p>



<a name="295005981"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/295005981" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#295005981">(Aug 24 2022 at 09:06)</a>:</h4>
<p>I recently used github classrooms for a non-Lean course;  one tip I'd give would be to put a very minimal action in the student repo that references the real action, so that you can fix bugs in it without having to tell students how to update their git repository to get the new grader. That looks something like:</p>
<div class="codehilite" data-code-language="YAML"><pre><span></span><code><span class="nt">jobs</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">build</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="c1"># this name must be exactly this for the points to be reported to github classroom</span><span class="w"></span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Autograding</span><span class="w"></span>
<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span><span class="w"></span>

<span class="w">    </span><span class="nt">steps</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/checkout@v3</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Run grading</span><span class="w"></span>
<span class="w">      </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-classrooms/my_class_action@2022</span><span class="w">  </span><span class="c1"># version by cohort so as not to break submissions next year</span><span class="w"></span>
</code></pre></div>
<p>where <code>my_class_action</code> is a github "composite action"</p>



<a name="295070435"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/295070435" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#295070435">(Aug 24 2022 at 15:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="233737">Gihan Marasingha</span> <a href="#narrow/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom/near/294855995">said</a>:</p>
<blockquote>
<p>Great stuff! I've been away from Zulip for a few months and it's amazing to see what's happening. I'm actually planning to use Git Hub Classrooms with Lean for the new academic year.</p>
</blockquote>
<p>Thanks. I am not sure if this is in a completely working state currently. I am trying out Lean 4 for my class so will have to rewrite it that in a week or so.</p>



<a name="295071371"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/295071371" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#295071371">(Aug 24 2022 at 15:35)</a>:</h4>
<p>This semester is my first honest rodeo with GH classrooms so I am noticing some sharp edges. For example, it appears that instructors cannot set student groups for assignments. In fact, an instructor cannot create the (empty) named groups themselves. All group creation and membership is on the student end. There is a time-intensive <a href="https://education.github.community/t/using-existing-teams-in-group-assignments/6999/12">workaround</a> to create the empty groups but it still relies on students correctly joining their assigned group. You cannot fix a mistake without dumping the whole assignment and starting over.</p>



<a name="295071518"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/295071518" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#295071518">(Aug 24 2022 at 15:36)</a>:</h4>
<p>Perhaps people here are better versed, but is this really the state of things for student group creation/curation?</p>



<a name="295969093"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/295969093" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mike Shulman <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#295969093">(Aug 29 2022 at 18:14)</a>:</h4>
<p>I'm trying to use Lean 3 with gradescope, but I'm confused about how to deal with <code>sorry</code>.  It seems that definitions using <code>sorry</code> produce only a warning, not an error, and in particular don't set a positive exit-code, so I'm not sure how to test for them programmatically.  Is there a flag I can give to Lean to tell it to treat <code>sorry</code> as an error?</p>



<a name="295969226"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/295969226" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mike Shulman <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#295969226">(Aug 29 2022 at 18:15)</a>:</h4>
<p>I tried to figure out from the posted GH code how you're dealing with this, but I couldn't even figure out how lean is getting called or its return values parsed.</p>



<a name="295969322"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/295969322" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mike Shulman <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#295969322">(Aug 29 2022 at 18:15)</a>:</h4>
<p>Would anyone who's used gradescope be willing to share their autograder setup?</p>



<a name="295971006"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/295971006" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#295971006">(Aug 29 2022 at 18:25)</a>:</h4>
<p>I think you can use trust level 0 <code>-t0</code> flag to lean to get this behaviour, not sure what other effects this will have though</p>



<a name="295971118"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/295971118" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#295971118">(Aug 29 2022 at 18:25)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="381187">@Mike Shulman</span> long time no see. <a href="https://github.com/mattrobball/lean-autograding/blob/c004f4539968eaa5b3a42624308df9e9c9eeeca8/.test/test.lean#L16">Here</a> is the relevant function. The <a href="https://github.com/mattrobball/lean-autograding/blob/c004f4539968eaa5b3a42624308df9e9c9eeeca8/.github/classroom/autograding.json">classroom json file</a>  just calls <code>lean .test/test.lean</code> and expects nothing in response in stdout.</p>



<a name="295971586"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/295971586" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mike Shulman <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#295971586">(Aug 29 2022 at 18:28)</a>:</h4>
<p><span class="user-mention" data-user-id="127136">@Alex J. Best</span> Thanks, that seems to work!  It wasn't at all clear to me from the <code>lean --help</code> output that "do not trust any macro" included "do not allow <code>sorry</code>", but maybe <code>sorry</code> is a macro or something?</p>



<a name="295972137"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/295972137" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mike Shulman <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#295972137">(Aug 29 2022 at 18:30)</a>:</h4>
<p><span class="user-mention" data-user-id="306577">@Matthew Ballard</span> Thanks.  You appear to be doing some fancy coding in Lean that I don't understand.  What does your script do if the student hasn't solved that exercise?</p>



<a name="295972230"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/295972230" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#295972230">(Aug 29 2022 at 18:31)</a>:</h4>
<p>Yes this is not obvious from the help menu, but we've had this discussion on here somewhere before I think, and also wondered a lot about how to really check that people used no extra axioms for codeforces-like online challenges (its a long story and very hard to do right it turns out)</p>



<a name="295972482"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/295972482" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#295972482">(Aug 29 2022 at 18:32)</a>:</h4>
<p>(Again from memory but) I tested this and it should fail because it yields either an error because there is no statement with the appropriate name or the proof is not complete and it is <code>sorry</code>'d by default</p>



<a name="295972583"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/295972583" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#295972583">(Aug 29 2022 at 18:33)</a>:</h4>
<p>At the end of the rabbit hole was "you need to inspect the oleans"</p>



<a name="295972989"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/295972989" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#295972989">(Aug 29 2022 at 18:35)</a>:</h4>
<p>Anything beyond that can be gamed but if you just want something plausible, this was enough for me. (Currently I have go test file in the main directory for my cryto class to give you an idea of my level of concern ...)</p>



<a name="295973211"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/295973211" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mike Shulman <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#295973211">(Aug 29 2022 at 18:36)</a>:</h4>
<p>Ok, thanks!  I think I'm just going to test each exercise with a separate testing file run under <code>-t0</code>, so that I can test the exit codes rather than have to parse the textual output.</p>



<a name="295973274"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/295973274" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#295973274">(Aug 29 2022 at 18:37)</a>:</h4>
<p>Mine was mainly an exercise for myself in meta-programming :)</p>



<a name="295973286"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/295973286" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mike Shulman <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#295973286">(Aug 29 2022 at 18:37)</a>:</h4>
<p>At least, until someone writes a gradescope-utils package in Lean that will automatically produce JSON... (-:O</p>



<a name="295973440"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/295973440" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#295973440">(Aug 29 2022 at 18:38)</a>:</h4>
<p>I am going to take another run in Lean 4 later this week and will report back. (Though not in gradescope)</p>



<a name="295976895"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/295976895" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#295976895">(Aug 29 2022 at 18:58)</a>:</h4>
<p>I now remember the concern that led me here: I didn’t want students to declare and use convenient axioms.</p>



<a name="295989335"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/295989335" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mike Shulman <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#295989335">(Aug 29 2022 at 20:06)</a>:</h4>
<p>I tried that, but it seemed that student-declared axioms are caught by the computability checker: anything depending on an axiom has to be flagged noncomputable, and my test definitions are not so flagged, hence raise an error.  But I don't know much about how Lean works; is there an easy way that students could defeat that?</p>



<a name="295993480"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/295993480" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#295993480">(Aug 29 2022 at 20:12)</a>:</h4>
<p>Label them <code>noncomputable</code>?</p>



<a name="295998965"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/295998965" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mike Shulman <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#295998965">(Aug 29 2022 at 20:52)</a>:</h4>
<p>But an error will still be raised if <em>my</em> functions in the testing file aren't labeled <code>noncomputable</code>, and the students can't change those.</p>



<a name="296000258"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/296000258" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#296000258">(Aug 29 2022 at 21:02)</a>:</h4>
<p><a href="https://github.com/DonaldKellett/CW-Lean3-Examples">This</a> is good enough for Codewars so is probably good enough for coursework.</p>



<a name="296000807"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/296000807" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#296000807">(Aug 29 2022 at 21:06)</a>:</h4>
<p>If you are going to look at the submissions yourself, then the cost to benefit ratio tips over after just a simple sorry check.</p>



<a name="296018169"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/296018169" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#296018169">(Aug 30 2022 at 00:03)</a>:</h4>
<p><code>noncomputable</code> is not a good defense against axiom use, because you are allowed to use axioms that prove propositions in computable functions. So a student could just have <code>axiom my_sorry : false</code> and they could even use it in a function implementation without it getting marked <code>noncomputable</code>.</p>



<a name="296018866"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/296018866" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#296018866">(Aug 30 2022 at 00:12)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">axiom</span> <span class="n">my_sorry</span> <span class="o">:</span> <span class="n">false</span>
<span class="kd">def</span> <span class="n">my_computable_def</span> <span class="o">:</span> <span class="n">nat</span> <span class="bp">→</span> <span class="n">nat</span> <span class="o">:=</span> <span class="n">my_sorry.elim</span>
</code></pre></div>



<a name="296078650"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/296078650" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Siddhartha Gadgil <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#296078650">(Aug 30 2022 at 11:07)</a>:</h4>
<p>May be a silly question, but what if a student uses <code>sorryAx</code> manually instead of using the <code>sorry</code> macro?</p>



<a name="296081829"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/296081829" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#296081829">(Aug 30 2022 at 11:31)</a>:</h4>
<p>Codewars and <code>test.lean</code>both implement the two step check:</p>
<ul>
<li>have Lean check the proof</li>
<li>inspect the axioms to make sure nothing out of bounds is used</li>
</ul>
<p>Codewars parses the stdout/stderr using some JavaScript. The test file in the repo does axiom inspection in Lean itself.</p>



<a name="296082589"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/296082589" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#296082589">(Aug 30 2022 at 11:37)</a>:</h4>
<p>General consensus from before was that this could be defeated but then a student probably would have learned enough in the process.</p>



<a name="296084455"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/296084455" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#296084455">(Aug 30 2022 at 11:50)</a>:</h4>
<p>Both <span class="user-mention" data-user-id="110596">@Rob Lewis</span> and <span class="user-mention" data-user-id="260507">@Heather Macbeth</span> have experience with gradescope in particular. They might know more about talking to it</p>



<a name="296084774"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/296084774" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#296084774">(Aug 30 2022 at 11:53)</a>:</h4>
<p>All this becomes a real issue only if someone smart figures out a way to cheat and then tell everybody about it.</p>



<a name="296085322"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/296085322" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#296085322">(Aug 30 2022 at 11:56)</a>:</h4>
<p>We did make this stream public <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="296086096"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/296086096" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#296086096">(Aug 30 2022 at 12:01)</a>:</h4>
<p>But I would think CS students are fairly familiar with looking for the test file, seeing the test cases, and then fitting a function to those.</p>



<a name="296086362"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/296086362" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#296086362">(Aug 30 2022 at 12:03)</a>:</h4>
<p>If you are looking at the submission, then this fails quickly though.</p>



<a name="296381545"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/296381545" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mike Shulman <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#296381545">(Aug 31 2022 at 16:08)</a>:</h4>
<p>So you're saying there's no way to extract the information from lean about what axioms are used other than something like <code>#print axioms</code> and then parsing its textual output?</p>



<a name="296382280"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/296382280" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#296382280">(Aug 31 2022 at 16:12)</a>:</h4>
<p>You can do it with lean meta-programming, e.g. as seen in <a href="https://github.com/leanprover-community/mathlib/issues/10954">https://github.com/leanprover-community/mathlib/issues/10954</a></p>



<a name="296404056"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/296404056" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#296404056">(Aug 31 2022 at 16:40)</a>:</h4>
<p><del><code>test.lean</code> is a specific lean 3 internal implementation of the meta-programming approach</del> Hmm I thought I did a meta-programming one but it appears it took the easy way out :)</p>



<a name="296406055"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/296406055" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#296406055">(Aug 31 2022 at 16:50)</a>:</h4>
<p>Ah right <span class="user-mention" data-user-id="110049">@Mario Carneiro</span> gave that implementation (also seen here <a href="#narrow/stream/113489-new-members/topic/intuitionistic.20logic/near/224372208">https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/intuitionistic.20logic/near/224372208</a>) and I put adding it to the repository on my to-do list (and never took it off)</p>



<a name="296409045"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/296409045" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#296409045">(Aug 31 2022 at 17:05)</a>:</h4>
<p>Also interacting with GitHub Classroom (and Gradescope too?) occurs via stdout/stderr anyway: give some json specifying which command to run and what to compare the output to.</p>



<a name="296409749"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/296409749" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mike Shulman <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#296409749">(Aug 31 2022 at 17:09)</a>:</h4>
<p>Gradescope just runs a script that you specify, and expects the results to be placed in a specified JSON file.  It doesn't do any output comparison, it expects a particular JSON format that specifies the score.</p>



<a name="296410764"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/296410764" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#296410764">(Aug 31 2022 at 17:14)</a>:</h4>
<p>Oh, it appears they have libraries in common languages to help with the file creation. Right? Or is it just Python?</p>



<a name="296411409"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/296411409" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#296411409">(Aug 31 2022 at 17:17)</a>:</h4>
<p>Hmm, even the Java one dumps to stdout and saves the result in a json file.</p>



<a name="296415885"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/296415885" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mike Shulman <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#296415885">(Aug 31 2022 at 17:39)</a>:</h4>
<p>Yes, they have libraries that integrate with testing frameworks in Python and maybe a few other languages, but the end result is always a json file of the same format.</p>



<a name="297868911"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/297868911" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mike Shulman <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#297868911">(Sep 08 2022 at 21:36)</a>:</h4>
<p>After actually trying this, I realized that my original question about <code>sorry</code> wasn't even what I really wanted anyway.  Using <code>-t0</code> answers that question, but raises an error if <em>any</em> function in the file uses <code>sorry</code>, when actually I would like them to be able to leave the <code>sorry</code> there for some questions and still have the others graded.  So I guess I need to use <code>print axioms</code> even to detect <code>sorry</code>.</p>



<a name="300668622"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/300668622" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gihan Marasingha <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#300668622">(Sep 25 2022 at 16:26)</a>:</h4>
<p>I'm using a Windows machine at the moment and <span class="user-mention" data-user-id="306577">@Matthew Ballard</span>'s <code>test.lean</code> file contains the string<code>/src/assignment.lean</code>, which Windows doesn't like!</p>
<p>Is there a way for Lean to use slashes appropriate to the OS or do something else to get the correct path?</p>



<a name="300847050"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/300847050" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#300847050">(Sep 26 2022 at 16:01)</a>:</h4>
<p>Does switching to <code>\src\assignment.lean</code> fix the issue?</p>



<a name="300860152"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/300860152" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gihan Marasingha <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#300860152">(Sep 26 2022 at 17:00)</a>:</h4>
<p><span class="user-mention silent" data-user-id="306577">Matthew Ballard</span> <a href="#narrow/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom/near/300847050">said</a>:</p>
<blockquote>
<p>Does switching to <code>\src\assignment.lean</code> fix the issue?</p>
</blockquote>
<p>Yes it does. I was wondering if there was an OS-agnostic solution. It's not a big issue if there isn't one!</p>



<a name="300870393"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/300870393" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#300870393">(Sep 26 2022 at 17:57)</a>:</h4>
<p>You should be able to match off the head of the result of <code>io.get_cwd</code> to handle different cases. Whether there is a builtin function for constructing a system path from a list, I am not sure.</p>



<a name="302140291"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/302140291" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sarah Smith <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#302140291">(Oct 03 2022 at 20:12)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="306577">@Matthew Ballard</span> , did you end up re-writing your autograder for Lean 4? Do you still plan to? <a href="https://github.com/mattrobball/lean-autograding">https://github.com/mattrobball/lean-autograding</a></p>



<a name="302143795"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/302143795" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#302143795">(Oct 03 2022 at 20:33)</a>:</h4>
<p>I have something that I am currently using but the functionality is far from what I would like given the capabilities of Lean 4. The main limitation is time. </p>
<p>You can see it at work <a href="https://github.com/UofSC-Fall-2022-Math-300-H01/homework5">here</a>.</p>



<a name="302940771"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/302940771" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#302940771">(Oct 07 2022 at 22:01)</a>:</h4>
<p><a href="https://twitter.com/derKha/status/1578493681304494080?s=20&amp;t=xJ4T-mPBhLLOFn4RwICxAQ">https://twitter.com/derKha/status/1578493681304494080?s=20&amp;t=xJ4T-mPBhLLOFn4RwICxAQ</a></p>
<div class="inline-preview-twitter"><div class="twitter-tweet"><a href="https://twitter.com/derKha/status/1578493681304494080?s=20&amp;t=xJ4T-mPBhLLOFn4RwICxAQ"><img class="twitter-avatar" src="https://uploads.zulipusercontent.net/73b1cc6b0e68078201ad1856c80ab187a3c03baa/68747470733a2f2f7062732e7477696d672e636f6d2f70726f66696c655f696d616765732f313239313333333833303131333230363237332f4f7778726633696c5f6e6f726d616c2e6a7067"></a><p>a) cool, Lean made it to homework questions on SO
b) "discrete math" seems a bit... broad
c) why does the title read like a LLM prompt <a href="https://t.co/SiqRs36Hxy">https://twitter.com/derKha/status/1578493681304494080/photo/1</a></p><span>- Sebastian Ullrich (@derKha)</span><div class="twitter-image"><a href="https://t.co/SiqRs36Hxy"><img src="https://uploads.zulipusercontent.net/bb537d2675b1d812323f2e7baa1e8e1ea9941fe6/68747470733a2f2f7062732e7477696d672e636f6d2f6d656469612f466566764d746b57514151525166352e706e673a6c61726765"></a></div></div></div>



<a name="302940849"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/302940849" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#302940849">(Oct 07 2022 at 22:02)</a>:</h4>
<p>Just pointing this out because the questions seem very similar to <a href="https://github.com/UofSC-Fall-2022-Math-300-H01/homework5/blob/main/Hw5.lean">https://github.com/UofSC-Fall-2022-Math-300-H01/homework5/blob/main/Hw5.lean</a></p>



<a name="302980786"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/302980786" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastian Ullrich <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#302980786">(Oct 08 2022 at 08:19)</a>:</h4>
<p>See also <a href="#narrow/stream/116290-rss/topic/Newest.20questions.20tagged.20lean.20-.20Stack.20Overflow/near/302931112">https://leanprover.zulipchat.com/#narrow/stream/116290-rss/topic/Newest.20questions.20tagged.20lean.20-.20Stack.20Overflow/near/302931112</a> where I took it from :)</p>



<a name="303300988"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/303300988" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#303300988">(Oct 10 2022 at 17:34)</a>:</h4>
<p>We talked about this in class today. Sinners-in the-hands-of-an-angry-god-style. <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span></p>



<a name="303301265"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/187764-Lean%20for%20teaching/topic/autograding%20with%20GH%20classroom/near/303301265" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/187764-Lean-for-teaching/topic/autograding.20with.20GH.20classroom.html#303301265">(Oct 10 2022 at 17:36)</a>:</h4>
<p><del>But seriously, the most upsetting issue was the person on twitter that claimed this was from a freshmen CS course on discrete math. Really reminds me not to believe anything I read on the internet.</del></p>
<p>I should have looked more closely. These were familiar not because they were all in the assignment but because they came from <a href="https://leanprover.github.io/logic_and_proof/propositional_logic_in_lean.html#exercises">Chapter 4 exercises in Logic and Proof!</a></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>