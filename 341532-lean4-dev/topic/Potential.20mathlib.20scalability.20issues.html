---
layout: archive
title: Zulip Chat Archive
permalink: /stream/341532-lean4-dev/topic/Potential.20mathlib.20scalability.20issues.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/341532-lean4-dev/index.html">lean4 dev</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/341532-lean4-dev/topic/Potential.20mathlib.20scalability.20issues.html">Potential mathlib scalability issues</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="304097823"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/341532-lean4%20dev/topic/Potential%20mathlib%20scalability%20issues/near/304097823" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/341532-lean4-dev/topic/Potential.20mathlib.20scalability.20issues.html#304097823">(Oct 14 2022 at 18:59)</a>:</h4>
<p>As we're getting closer to move mathlib to Lean 4, we will probably run into quite a few performance problems because we've never done projects that size in Lean 4 before.  It would be great to get a head-start on fixes these issues now, so if you have a hunch that some things will scale badly, please feel free to complain with <em>concrete, reproducible, and realistic</em> test cases.</p>
<p>I'm thinking of issues like <a href="https://github.com/leanprover/lake/issues/130">https://github.com/leanprover/lake/issues/130</a>  There's probably lots of other scalability issues like that.</p>



<a name="304103305"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/341532-lean4%20dev/topic/Potential%20mathlib%20scalability%20issues/near/304103305" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/341532-lean4-dev/topic/Potential.20mathlib.20scalability.20issues.html#304103305">(Oct 14 2022 at 19:35)</a>:</h4>
<p>BTW, could somebody try <a href="https://github.com/gebner/inundation">https://github.com/gebner/inundation</a> on Windows and Mac?  I'm interested whether there's any performance difference between platforms.  It would also be great to verify that we don't get any "argument list too long" errors on other platforms.</p>



<a name="304129905"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/341532-lean4%20dev/topic/Potential%20mathlib%20scalability%20issues/near/304129905" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/341532-lean4-dev/topic/Potential.20mathlib.20scalability.20issues.html#304129905">(Oct 14 2022 at 22:54)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">lake</span> <span class="n">print</span><span class="bp">-</span><span class="n">paths</span> <span class="n">Inundation</span>  <span class="mi">10</span><span class="bp">.</span><span class="mi">95</span><span class="n">s</span> <span class="n">user</span> <span class="mi">21</span><span class="bp">.</span><span class="mi">31</span><span class="n">s</span> <span class="n">system</span> <span class="mi">305</span><span class="bp">%</span> <span class="n">cpu</span> <span class="mi">10</span><span class="bp">.</span><span class="mi">543</span> <span class="n">total</span>
</code></pre></div>
<p>on a 2.3 GHz 18-Core Intel Xeon W running Big Sur.</p>



<a name="304210509"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/341532-lean4%20dev/topic/Potential%20mathlib%20scalability%20issues/near/304210509" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/341532-lean4-dev/topic/Potential.20mathlib.20scalability.20issues.html#304210509">(Oct 15 2022 at 14:48)</a>:</h4>
<p><code>lake print-paths Inundation  7.88s user 3.09s system 142% cpu 7.687 total</code><br>
on a MacBook Pro with an M1 Max running Monterey</p>



<a name="304210879"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/341532-lean4%20dev/topic/Potential%20mathlib%20scalability%20issues/near/304210879" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matthew Ballard <a href="https://leanprover-community.github.io/archive/stream/341532-lean4-dev/topic/Potential.20mathlib.20scalability.20issues.html#304210879">(Oct 15 2022 at 14:52)</a>:</h4>
<p>I also tried it with a Windows laptop. It kept throwing errors with <code>lake build</code> suggesting I needed to open a workspace. After 5-6 rounds, I got idempotent behavior: no output. After that, timing the lake print-paths returned about the same numbers as on the linux partition.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>