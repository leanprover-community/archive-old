---
layout: archive
title: Zulip Chat Archive
permalink: /stream/330515-LftCM22/topic/quadratic.20fields.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/index.html">LftCM22</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html">quadratic fields</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="289234641"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289234641" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289234641">(Jul 11 2022 at 18:58)</a>:</h4>
<p><span class="user-mention" data-user-id="458142">@Daniel Hast</span> <span class="user-mention" data-user-id="513555">@Jackie Lang</span> it would be interesting to do some quadratic field stuff. Here are some thoughts!</p>



<a name="289234928"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289234928" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289234928">(Jul 11 2022 at 19:00)</a>:</h4>
<p>I think that a bad idea would be making an explicit model of quadratic fields, e.g. you could imagine a function which eats a squarefree integer d and spits out an explicit quadratic field <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">Q</mi><mo stretchy="false">(</mo><msqrt><mi>d</mi></msqrt><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathbb{Q}(\sqrt{d})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1822em;vertical-align:-0.25em;"></span><span class="mord mathbb">Q</span><span class="mopen">(</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9322em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathnormal">d</span></span></span><span style="top:-2.8922em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1078em;"><span></span></span></span></span></span><span class="mclose">)</span></span></span></span> and then one can go on and prove theorems about that quadratic field. The problem with this is that then when people come along with their own quadratic fields constructed in different ways, they will be <em>isomorphic</em> to the concrete definition but not <em>equal</em> to it, so one would be constantly porting definitions and theorems along isomorphisms.</p>



<a name="289235071"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289235071" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289235071">(Jul 11 2022 at 19:01)</a>:</h4>
<p>So perhaps one way to start would be a predicate on number fields (i.e. a function which eats a number field and outputs a true-false statement, saying "I have degree 2 over <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">Q</mi></mrow><annotation encoding="application/x-tex">\mathbb{Q}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8556em;vertical-align:-0.1667em;"></span><span class="mord mathbb">Q</span></span></span></span>".</p>



<a name="289235188"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289235188" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289235188">(Jul 11 2022 at 19:02)</a>:</h4>
<p>That should be easy to do. And now one can start asking questions about this field. For example one could try and prove that there exists a unique squarefree integer <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi></mrow><annotation encoding="application/x-tex">d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">d</span></span></span></span> such that the quadratic field is isomorphic to the splitting field of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>x</mi><mn>2</mn></msup><mo>−</mo><mi>d</mi></mrow><annotation encoding="application/x-tex">x^2-d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8974em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">d</span></span></span></span>.</p>



<a name="289235331"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289235331" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289235331">(Jul 11 2022 at 19:03)</a>:</h4>
<p>Once one has this, one can then prove the standard facts about what the integers of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">Q</mi><mo stretchy="false">(</mo><msqrt><mi>d</mi></msqrt><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathbb{Q}(\sqrt{d})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1822em;vertical-align:-0.25em;"></span><span class="mord mathbb">Q</span><span class="mopen">(</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9322em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathnormal">d</span></span></span><span style="top:-2.8922em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1078em;"><span></span></span></span></span></span><span class="mclose">)</span></span></span></span> are.</p>



<a name="289235373"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289235373" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289235373">(Jul 11 2022 at 19:03)</a>:</h4>
<p>Let me knock something up.</p>



<a name="289235423"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289235423" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289235423">(Jul 11 2022 at 19:03)</a>:</h4>
<p>I could live stream somewhere</p>



<a name="289235547"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289235547" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jackie Lang <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289235547">(Jul 11 2022 at 19:04)</a>:</h4>
<p>That sounds good; I don't know how to follow your livestream</p>



<a name="289235590"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289235590" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289235590">(Jul 11 2022 at 19:04)</a>:</h4>
<p>I'll send you a Zoom link</p>



<a name="289235663"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289235663" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289235663">(Jul 11 2022 at 19:05)</a>:</h4>
<p>This <a href="https://imperial-ac-uk.zoom.us/j/98307531484?pwd=ejQ3Z2lyaUJlYmRaS01TVlFIRGxtUT09">https://imperial-ac-uk.zoom.us/j/98307531484?pwd=ejQ3Z2lyaUJlYmRaS01TVlFIRGxtUT09</a> should work</p>



<a name="289237654"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289237654" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289237654">(Jul 11 2022 at 19:21)</a>:</h4>
<p>I am a little busy today and tomorrow, but then I will be happy to join this project</p>



<a name="289239478"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289239478" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Hast <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289239478">(Jul 11 2022 at 19:34)</a>:</h4>
<p>This project seems interesting to me. I'm still learning a lot of the basics of Lean, but I'll try to contribute to this.</p>



<a name="289243210"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289243210" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289243210">(Jul 11 2022 at 20:05)</a>:</h4>
<p><span class="user-mention" data-user-id="458142">@Daniel Hast</span> : how is it going?</p>



<a name="289244090"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289244090" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Hast <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289244090">(Jul 11 2022 at 20:13)</a>:</h4>
<p>Still brushing up on the basic syntax and familiarizing myself with some of the relevant library functions.</p>



<a name="289244152"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289244152" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289244152">(Jul 11 2022 at 20:13)</a>:</h4>
<p>Sounds good! Do not hesitate if you have questions, I am outside the lecture room.</p>



<a name="289290812"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289290812" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289290812">(Jul 12 2022 at 08:06)</a>:</h4>
<p>I'm also happy to help out with some quadratic field stuff</p>



<a name="289345015"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289345015" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Hast <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289345015">(Jul 12 2022 at 15:50)</a>:</h4>
<p>A key lemma that I can't find in mathlib is the following: Given a number field K, the rank of the ring of integers of K (as a <strong>Z</strong>-module) is equal to the dimension of K (as a <strong>Q</strong>-vector space). Anyone know if this has been implemented anywhere, either in mathlib or otherwise?</p>



<a name="289345946"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289345946" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289345946">(Jul 12 2022 at 15:55)</a>:</h4>
<p>I'm not sure. <span class="user-mention" data-user-id="130384">@Riccardo Brasca</span> and <span class="user-mention" data-user-id="389019">@Chris Birkbeck</span> know that part of the library best.</p>



<a name="289346113"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289346113" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289346113">(Jul 12 2022 at 15:56)</a>:</h4>
<p><a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/Rational.20basis.20of.20a.20number.20field">https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there-code-for-X.3F/topic/Rational.20basis.20of.20a.20number.20field</a></p>



<a name="289347044"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289347044" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289347044">(Jul 12 2022 at 16:02)</a>:</h4>
<p>To show the algebraic integers span the number field over Q, it would be convenient to use <a href="https://leanprover-community.github.io/mathlib_docs/find/scale_roots">docs#scale_roots</a>. (Linear independence was already done.)</p>



<a name="289347870"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289347870" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289347870">(Jul 12 2022 at 16:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="458142">Daniel Hast</span> <a href="#narrow/stream/330515-LftCM22/topic/quadratic.20fields/near/289345015">said</a>:</p>
<blockquote>
<p>A key lemma that I can't find in mathlib is the following: Given a number field K, the rank of the ring of integers of K (as a <strong>Z</strong>-module) is equal to the dimension of K (as a <strong>Q</strong>-vector space). Anyone know if this has been implemented anywhere, either in mathlib or otherwise?</p>
</blockquote>
<p>I don't think we have this in general (or at least I don't know where it is in mathlib) but the link above is a good place to start</p>



<a name="289348044"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289348044" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289348044">(Jul 12 2022 at 16:09)</a>:</h4>
<p>This is not in mathlib I think</p>



<a name="289348184"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289348184" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289348184">(Jul 12 2022 at 16:10)</a>:</h4>
<p>I am on mobile now, but I am afraid this requires some work</p>



<a name="289348345"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289348345" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289348345">(Jul 12 2022 at 16:11)</a>:</h4>
<p>For cyclotomic fields I essentially avoided speaking of integral basis</p>



<a name="289348447"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289348447" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289348447">(Jul 12 2022 at 16:12)</a>:</h4>
<p>But we were able to compute the discriminant and the ring of integers</p>



<a name="289348544"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289348544" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289348544">(Jul 12 2022 at 16:13)</a>:</h4>
<p>We also know the dimension of the power basis for the ring of integers, so we should almost have it in the cyclotomic case</p>



<a name="289348717"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289348717" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289348717">(Jul 12 2022 at 16:14)</a>:</h4>
<p>Note that all the traces/norms one has to consider are relative to the fields extension , even if we apply them to integral elements</p>



<a name="289348745"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289348745" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Hast <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289348745">(Jul 12 2022 at 16:14)</a>:</h4>
<p>That <code>linear_independent.of_fraction_ring</code> lemma at that link does look useful here; is it also not in mathlib yet? Anyway, I wonder if it would make sense to implement more of the general theory of rings of integers like this before doing the specifics of quadratic rings of integers.</p>



<a name="289348803"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289348803" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289348803">(Jul 12 2022 at 16:14)</a>:</h4>
<p>Yes, for cyclotomic fields we have it since we have the ring of integers, using <a href="https://github.com/leanprover-community/mathlib/pull/14981">#14981</a></p>



<a name="289348822"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289348822" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289348822">(Jul 12 2022 at 16:14)</a>:</h4>
<p>But in general there is no integral power basis</p>



<a name="289349879"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289349879" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289349879">(Jul 12 2022 at 16:22)</a>:</h4>
<p><span class="user-mention" data-user-id="458142">@Daniel Hast</span> which lemma are you talking t? If it is in mathlib you can write <a href="https://leanprover-community.github.io/mathlib_docs/find/name">docs#name</a> and it will create an hyperlink to the lemma</p>



<a name="289350198"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289350198" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Hast <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289350198">(Jul 12 2022 at 16:24)</a>:</h4>
<p><span class="user-mention" data-user-id="130384">@Riccardo Brasca</span> I meant the lemma at <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/Rational.20basis.20of.20a.20number.20field/near/271819591">https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there-code-for-X.3F/topic/Rational.20basis.20of.20a.20number.20field/near/271819591</a> that Junyan linked above. But I searched for that lemma name in mathlib and didn't find anything, so I'm guessing it hasn't made it into mathlib yet.</p>



<a name="289350219"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289350219" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289350219">(Jul 12 2022 at 16:25)</a>:</h4>
<p>Ah, I see. If I remember correctly I merged it at some point so it should be there</p>



<a name="289350407"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289350407" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Hast <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289350407">(Jul 12 2022 at 16:26)</a>:</h4>
<p>Do you know what name it has now?</p>



<a name="289350511"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289350511" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289350511">(Jul 12 2022 at 16:27)</a>:</h4>
<p>I don't find it, strange</p>



<a name="289350528"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289350528" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289350528">(Jul 12 2022 at 16:27)</a>:</h4>
<p>Give me 5 minutes</p>



<a name="289350731"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289350731" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289350731">(Jul 12 2022 at 16:28)</a>:</h4>
<p>The PR is <a href="https://github.com/leanprover-community/mathlib/pull/13041">#13041</a></p>



<a name="289350749"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289350749" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289350749">(Jul 12 2022 at 16:28)</a>:</h4>
<p>(deleted)</p>



<a name="289351018"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289351018" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289351018">(Jul 12 2022 at 16:30)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/linear_independent.localization">docs#linear_independent.localization</a></p>



<a name="289351075"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289351075" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289351075">(Jul 12 2022 at 16:31)</a>:</h4>
<p>And friends below it</p>



<a name="289351138"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289351138" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289351138">(Jul 12 2022 at 16:31)</a>:</h4>
<p>its <code>linear_independent.iff_fraction_ring</code></p>



<a name="289351150"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289351150" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289351150">(Jul 12 2022 at 16:31)</a>:</h4>
<p>oh beat me to it!</p>



<a name="289470232"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289470232" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289470232">(Jul 13 2022 at 14:48)</a>:</h4>
<p><span class="user-mention" data-user-id="458142">@Daniel Hast</span> are you working on quadratic/number fields?</p>



<a name="289470758"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289470758" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Hast <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289470758">(Jul 13 2022 at 14:51)</a>:</h4>
<p>Yes, I'm working on proving some lemmas for rings of integers of number fields. Currently I'm working on a proof that the rank of the ring of integers is equal to the dimension of the number field over <strong>Q</strong>.</p>



<a name="289472348"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289472348" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289472348">(Jul 13 2022 at 15:03)</a>:</h4>
<p>awesome! If you have any questions or want to post any code here for feedback then don't hesitate to do so.</p>



<a name="289474884"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289474884" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289474884">(Jul 13 2022 at 15:20)</a>:</h4>
<p>That is nice! What is your strategy?</p>



<a name="289476022"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289476022" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Hast <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289476022">(Jul 13 2022 at 15:28)</a>:</h4>
<p>First I'm writing up the proof that some nonzero multiple of an algebraic element is integral. Then I'm going to pretty much follow the standard proof where you show the ring of integers both contains and is contained in modules of the appropriate rank. Might need to prove some lemmas about the trace pairing along the way but I don't know of a simpler approach.</p>



<a name="289476121"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289476121" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Hast <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289476121">(Jul 13 2022 at 15:29)</a>:</h4>
<p>I might not have time to do all this, though; I'm leaving for PCMI in a few days and will be pretty busy with that for a few weeks.</p>



<a name="289479381"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289479381" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289479381">(Jul 13 2022 at 15:50)</a>:</h4>
<p>Already the first result is interesting</p>



<a name="289479438"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289479438" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289479438">(Jul 13 2022 at 15:50)</a>:</h4>
<p>It allows to define <em>the</em> discriminant of a number field</p>



<a name="289479466"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289479466" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289479466">(Jul 13 2022 at 15:50)</a>:</h4>
<p>As a well defined integer</p>



<a name="289479546"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289479546" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289479546">(Jul 13 2022 at 15:51)</a>:</h4>
<p>(and a well defined ideal in the relative case)</p>



<a name="289505916"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289505916" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Hast <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289505916">(Jul 13 2022 at 19:05)</a>:</h4>
<p>I'm sure I've done lots of inefficient or clunky things here, but I did complete the proof that an algebraic element has a nonzero multiple that's integral:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">variables</span> <span class="o">(</span><span class="n">A</span> <span class="n">K</span> <span class="n">C</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">A</span><span class="o">]</span> <span class="o">[</span><span class="n">is_domain</span> <span class="n">A</span><span class="o">]</span> <span class="o">[</span><span class="n">field</span> <span class="n">K</span><span class="o">]</span> <span class="o">[</span><span class="n">algebra</span> <span class="n">A</span> <span class="n">K</span><span class="o">]</span> <span class="o">[</span><span class="n">is_fraction_ring</span> <span class="n">A</span> <span class="n">K</span><span class="o">]</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">C</span><span class="o">]</span>

<span class="kd">lemma</span> <span class="n">algebraic_has_integral_multiple</span> <span class="o">[</span><span class="n">algebra</span> <span class="n">A</span> <span class="n">C</span><span class="o">]</span> <span class="o">[</span><span class="n">algebra</span> <span class="n">K</span> <span class="n">C</span><span class="o">]</span> <span class="o">[</span><span class="n">is_scalar_tower</span> <span class="n">A</span> <span class="n">K</span> <span class="n">C</span><span class="o">]</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">C</span><span class="o">}</span> <span class="o">:</span>
  <span class="n">is_algebraic</span> <span class="n">K</span> <span class="n">x</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">∃</span> <span class="n">d</span> <span class="o">:</span> <span class="n">A</span><span class="o">,</span> <span class="n">d</span> <span class="bp">≠</span> <span class="mi">0</span> <span class="bp">∧</span> <span class="n">is_integral</span> <span class="n">A</span> <span class="o">(</span><span class="n">x</span> <span class="bp">*</span> <span class="o">(</span><span class="n">algebra_map</span> <span class="n">A</span> <span class="n">C</span><span class="o">)</span> <span class="n">d</span><span class="o">))</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">rw</span> <span class="bp">←</span> <span class="n">is_algebraic_iff</span> <span class="n">A</span> <span class="n">K</span> <span class="n">C</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">h</span> <span class="k">with</span> <span class="n">f</span> <span class="n">hf</span><span class="o">,</span>
  <span class="n">use</span> <span class="n">f.leading_coeff</span><span class="o">,</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span>
    <span class="n">apply</span> <span class="n">polynomial.coeff_ne_zero_of_eq_degree</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">polynomial.degree_eq_iff_nat_degree_eq</span> <span class="n">hf.left</span><span class="o">,</span>
  <span class="o">},</span>
  <span class="n">by_cases</span> <span class="n">x_zero</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">use</span> <span class="n">polynomial.X</span><span class="o">,</span> <span class="n">simp</span> <span class="o">[</span><span class="n">x_zero</span><span class="o">],</span> <span class="o">},</span>
  <span class="n">use</span> <span class="n">polynomial.integral_normalization</span> <span class="n">f</span><span class="o">,</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">exact</span> <span class="n">polynomial.monic_integral_normalization</span> <span class="n">hf.left</span><span class="o">,</span> <span class="o">},</span>
  <span class="n">nontriviality</span> <span class="n">C</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">inj</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">A</span><span class="o">),</span> <span class="o">(</span><span class="n">algebra_map</span> <span class="n">A</span> <span class="n">C</span><span class="o">)</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">→</span> <span class="n">a</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span> <span class="kd">begin</span>
    <span class="n">intros</span> <span class="n">a</span> <span class="n">ha</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">is_fraction_ring.to_map_eq_zero_iff.mp</span><span class="o">,</span>
    <span class="n">apply</span> <span class="o">(</span><span class="n">algebra_map</span> <span class="n">K</span> <span class="n">C</span><span class="o">)</span><span class="bp">.</span><span class="n">map_eq_zero.mp</span><span class="o">,</span>
    <span class="n">rw</span> <span class="bp">←</span> <span class="n">ha</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">eq_comm</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">is_scalar_tower.algebra_map_apply</span> <span class="n">A</span> <span class="n">K</span> <span class="n">C</span> <span class="n">a</span><span class="o">,</span>
    <span class="n">assumption</span><span class="o">,</span>
  <span class="kd">end</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">polynomial.integral_normalization_eval₂_eq_zero</span> <span class="o">(</span><span class="n">algebra_map</span> <span class="n">A</span> <span class="n">C</span><span class="o">)</span> <span class="n">hf.right</span> <span class="n">inj</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="289512113"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289512113" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289512113">(Jul 13 2022 at 19:57)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code>  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">exact</span> <span class="n">polynomial.monic_integral_normalization</span> <span class="n">hf.left</span><span class="o">,</span> <span class="o">},</span>
</code></pre></div>
<p>could be </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">refine</span> <span class="o">⟨</span><span class="n">polynomial.monic_integral_normalization</span> <span class="n">hf.left</span><span class="o">,</span> <span class="n">_</span><span class="o">⟩,</span>
</code></pre></div>
<p>: basically <code>refine \&lt;_, _\&gt;</code> is the same as <code>split</code> but you can sometimes save a line with this trick.</p>



<a name="289512206"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289512206" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Hast <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289512206">(Jul 13 2022 at 19:57)</a>:</h4>
<p>...and now I just found that this is basically already exists in mathlib at <code>ring_theory.dedekind_domain.integral_closure.exists_integral_multiples</code>. The statements aren't identical but the slight extra generality in the version I wrote isn't actually relevant to the application to rings of integers. Oh well!</p>



<a name="289512682"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289512682" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289512682">(Jul 13 2022 at 20:00)</a>:</h4>
<p>That's super nice! It is actually not enough to define the discriminant, but we are not far.</p>



<a name="289512768"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289512768" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289512768">(Jul 13 2022 at 20:01)</a>:</h4>
<p>My idea is to use <a href="https://leanprover-community.github.io/mathlib_docs/find/algebra.discr_eq_discr_of_to_matrix_coeff_is_integral">docs#algebra.discr_eq_discr_of_to_matrix_coeff_is_integral</a></p>



<a name="289513166"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289513166" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289513166">(Jul 13 2022 at 20:04)</a>:</h4>
<p>And in any case it is better to be as general as possible :D</p>



<a name="289514604"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289514604" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289514604">(Jul 13 2022 at 20:16)</a>:</h4>
<p>I am thinking about the freeness of <code>𝓞 K</code>. We know that torsion free implies free for PID, so this is probably the fastest way to get there.</p>



<a name="289514643"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289514643" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289514643">(Jul 13 2022 at 20:16)</a>:</h4>
<p>And once we now that <code>𝓞 K</code> is free it should be easy to prove that it has the right rank.</p>



<a name="289514692"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289514692" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289514692">(Jul 13 2022 at 20:17)</a>:</h4>
<p>See <a href="https://leanprover-community.github.io/mathlib_docs/find/module.free_of_finite_type_torsion_free'">docs#module.free_of_finite_type_torsion_free'</a></p>



<a name="289514958"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289514958" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289514958">(Jul 13 2022 at 20:19)</a>:</h4>
<p><span class="user-mention silent" data-user-id="458142">Daniel Hast</span> <a href="#narrow/stream/330515-LftCM22/topic/quadratic.20fields/near/289512206">said</a>:</p>
<blockquote>
<p>...and now I just found that this is basically already exists in mathlib at <code>ring_theory.dedekind_domain.integral_closure.exists_integral_multiples</code>. The statements aren't identical but the slight extra generality in the version I wrote isn't actually relevant to the application to rings of integers. Oh well!</p>
</blockquote>
<p>It's good practice! Your code looked very nice to me. The library is huge and it's hard to get on top of everything that is there quickly. This comes from experience. Thanks a lot for your efforts on this -- it's about time we got number fields into a solid state.</p>



<a name="289516041"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289516041" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289516041">(Jul 13 2022 at 20:28)</a>:</h4>
<p>Do we know that <code>𝓞 K</code> is finite as <code>ℤ</code>-module?</p>



<a name="289516421"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289516421" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289516421">(Jul 13 2022 at 20:31)</a>:</h4>
<p>Hmm, I am afraid we don't</p>



<a name="289517987"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289517987" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289517987">(Jul 13 2022 at 20:44)</a>:</h4>
<p>OK, we probably need to follow the classical proof, but all the ingredients are there. Take <code>x</code> such that <code>K = ℚ(x)</code>, with <code>x</code> an algebraic integer. We know that <code>ℤ[x]</code> is finite, and to prove that <code>𝓞 K</code> is finite we can use <a href="https://leanprover-community.github.io/mathlib_docs/find/algebra.discr_mul_is_integral_mem_adjoin">docs#algebra.discr_mul_is_integral_mem_adjoin</a></p>



<a name="289518486"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289518486" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289518486">(Jul 13 2022 at 20:47)</a>:</h4>
<p><span class="user-mention" data-user-id="458142">@Daniel Hast</span> if you want a precise goal that I am pretty sure it is not in mathlib, we need a <a href="https://leanprover-community.github.io/mathlib_docs/find/power_basis">docs#power_basis</a>  <code>B</code> of <code>K</code> such that <code>B.gen</code> is integral. We surely have a way to produce a power basis of <code>K</code> (over <code>ℚ</code>), and the rest shouldn't be too difficult.</p>



<a name="289810340"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289810340" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289810340">(Jul 16 2022 at 05:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="458142">Daniel Hast</span> <a href="#narrow/stream/330515-LftCM22/topic/quadratic.20fields/near/289505916">said</a>:</p>
<blockquote>
<p>... I did complete the proof that an algebraic element has a nonzero multiple that's integral:</p>
<p><div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">variables</span> <span class="o">(</span><span class="n">A</span> <span class="n">K</span> <span class="n">C</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">A</span><span class="o">]</span> <span class="o">[</span><span class="n">is_domain</span> <span class="n">A</span><span class="o">]</span> <span class="o">[</span><span class="n">field</span> <span class="n">K</span><span class="o">]</span> <span class="o">[</span><span class="n">algebra</span> <span class="n">A</span> <span class="n">K</span><span class="o">]</span> <span class="o">[</span><span class="n">is_fraction_ring</span> <span class="n">A</span> <span class="n">K</span><span class="o">]</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">C</span><span class="o">]</span>
<span class="kd">lemma</span> <span class="n">algebraic_has_integral_multiple</span> <span class="o">[</span><span class="n">algebra</span> <span class="n">A</span> <span class="n">C</span><span class="o">]</span> <span class="o">[</span><span class="n">algebra</span> <span class="n">K</span> <span class="n">C</span><span class="o">]</span> <span class="o">[</span><span class="n">is_scalar_tower</span> <span class="n">A</span> <span class="n">K</span> <span class="n">C</span><span class="o">]</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">C</span><span class="o">}</span> <span class="o">:</span>
  <span class="n">is_algebraic</span> <span class="n">K</span> <span class="n">x</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">∃</span> <span class="n">d</span> <span class="o">:</span> <span class="n">A</span><span class="o">,</span> <span class="n">d</span> <span class="bp">≠</span> <span class="mi">0</span> <span class="bp">∧</span> <span class="n">is_integral</span> <span class="n">A</span> <span class="o">(</span><span class="n">x</span> <span class="bp">*</span> <span class="o">(</span><span class="n">algebra_map</span> <span class="n">A</span> <span class="n">C</span><span class="o">)</span> <span class="n">d</span><span class="o">))</span> <span class="o">:=</span>
</code></pre></div><br>
</p>
</blockquote>
<p>I am able to prove a possibly overly general version of the result:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">variables</span> <span class="o">{</span><span class="n">A</span> <span class="n">B</span> <span class="n">C</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">A</span><span class="o">]</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">B</span><span class="o">]</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">C</span><span class="o">]</span>
  <span class="o">[</span><span class="n">algebra</span> <span class="n">A</span> <span class="n">B</span><span class="o">]</span> <span class="o">[</span><span class="n">algebra</span> <span class="n">A</span> <span class="n">C</span><span class="o">]</span> <span class="o">[</span><span class="n">algebra</span> <span class="n">B</span> <span class="n">C</span><span class="o">]</span> <span class="o">[</span><span class="n">is_scalar_tower</span> <span class="n">A</span> <span class="n">B</span> <span class="n">C</span><span class="o">]</span>
<span class="kd">lemma</span> <span class="n">eq_smul_is_integral_of_is_localization</span> <span class="o">(</span><span class="n">M</span> <span class="o">:</span> <span class="n">submonoid</span> <span class="n">A</span><span class="o">)</span> <span class="o">[</span><span class="n">is_localization</span> <span class="n">M</span> <span class="n">B</span><span class="o">]</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">C</span><span class="o">}</span>
  <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">is_integral</span> <span class="n">B</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">y</span> <span class="o">:</span> <span class="n">C</span><span class="o">,</span> <span class="n">is_integral</span> <span class="n">A</span> <span class="n">y</span> <span class="bp">∧</span> <span class="bp">∃</span> <span class="n">d</span> <span class="o">:</span> <span class="n">B</span><span class="o">,</span> <span class="n">is_unit</span> <span class="n">d</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">d</span> <span class="bp">•</span> <span class="n">y</span> <span class="o">:=</span>
</code></pre></div>
<p>I think it's strictly more general, because if <code>B</code> is a field then we have <a href="https://leanprover-community.github.io/mathlib_docs/find/algebra.is_algebraic_iff_is_integral">docs#algebra.is_algebraic_iff_is_integral</a>. The full proof is at <a href="https://gist.github.com/alreadydone/ab2de3d78ca1288ff96456d4c799b6ee">this gist</a> and uses two lemmas, and one of them I believe is of some general interest:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">eq_map_of_frange_subset_srange</span> <span class="o">{</span><span class="n">A</span> <span class="n">B</span><span class="o">}</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">A</span><span class="o">]</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">B</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→+*</span> <span class="n">B</span><span class="o">)</span>
  <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">B</span><span class="o">[</span><span class="n">X</span><span class="o">])</span> <span class="o">(</span><span class="n">hp</span> <span class="o">:</span> <span class="bp">↑</span><span class="n">p.frange</span> <span class="bp">⊆</span> <span class="o">(</span><span class="n">f.srange</span> <span class="o">:</span> <span class="n">set</span> <span class="n">B</span><span class="o">))</span> <span class="o">:</span>
  <span class="bp">∃</span> <span class="n">q</span> <span class="o">:</span> <span class="n">A</span><span class="o">[</span><span class="n">X</span><span class="o">],</span> <span class="n">p</span> <span class="bp">=</span> <span class="n">q.map</span> <span class="n">f</span> <span class="bp">∧</span> <span class="n">q.nat_degree</span> <span class="bp">=</span> <span class="n">p.nat_degree</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">p.monic</span> <span class="bp">→</span> <span class="n">q.monic</span><span class="o">)</span> <span class="o">:=</span>
</code></pre></div>
<p>Its proof would be much easier if <code>f</code> is injective because <code>f.srange</code> would then be isomorphic to A and we can use <a href="https://leanprover-community.github.io/mathlib_docs/find/polynomial.map">docs#polynomial.map</a>. I might PR them some time but feel free to PR them for me if you need the result soon.</p>



<a name="289825974"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/quadratic%20fields/near/289825974" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/quadratic.20fields.html#289825974">(Jul 16 2022 at 12:31)</a>:</h4>
<p>Since this is strictly more general than a lemma already in the library I suggest to PR it as soon as possible. Short PRs are very welcome, and generalization is usually uncontroversial, so it can be merged quickly and then it won't be your problem to maintain the proof. (Mathlib changes very quickly, so a proof working today can be broken tomorrow.)</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>