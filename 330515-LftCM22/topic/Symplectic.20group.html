---
layout: archive
title: Zulip Chat Archive
permalink: /stream/330515-LftCM22/topic/Symplectic.20group.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/index.html">LftCM22</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/Symplectic.20group.html">Symplectic group</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="289344914"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/Symplectic%20group/near/289344914" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/Symplectic.20group.html#289344914">(Jul 12 2022 at 15:49)</a>:</h4>
<p>A thread for the symplectic group</p>
<p><span class="user-mention" data-user-id="455674">@Matej Penciak</span> and Fabien Clery.</p>



<a name="289345083"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/Symplectic%20group/near/289345083" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/Symplectic.20group.html#289345083">(Jul 12 2022 at 15:50)</a>:</h4>
<p><span class="user-mention" data-user-id="513795">@Fabien Cléry</span></p>



<a name="289350121"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/Symplectic%20group/near/289350121" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/Symplectic.20group.html#289350121">(Jul 12 2022 at 16:24)</a>:</h4>
<p>A thread for the symplectic group group ...</p>



<a name="289351395"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/Symplectic%20group/near/289351395" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/Symplectic.20group.html#289351395">(Jul 12 2022 at 16:33)</a>:</h4>
<p>right now we are only a monoid..</p>



<a name="289404946"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/Symplectic%20group/near/289404946" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matej Penciak <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/Symplectic.20group.html#289404946">(Jul 13 2022 at 01:04)</a>:</h4>
<p>I got kind of bogged down with some annoying technical things on the train back home. </p>
<p>I made the repo: <a href="https://github.com/mpenciak/symplectic_groups">https://github.com/mpenciak/symplectic_groups</a> if you want to check it out. I didn't quite get a group instance yet because I think I made a bad choice at some point to write all my theorems in terms of the hypotheses <br>
<code>{A : matrix (l ⊕ l) (l ⊕ l) ℝ} (hA : A ∈ symplectic l)</code><br>
instead of<br>
<code>(A : symplectic l)</code> <br>
so I've run into a weird situation where I need to prove <code>⟨(↑A)⁻¹, _⟩ * A = 1</code></p>



<a name="289405076"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/Symplectic%20group/near/289405076" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Matej Penciak <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/Symplectic.20group.html#289405076">(Jul 13 2022 at 01:07)</a>:</h4>
<p>(also people are welcome to <span aria-label="golf" class="emoji emoji-1f3cc" role="img" title="golf">:golf:</span>  my proofs)</p>



<a name="289408567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/Symplectic%20group/near/289408567" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/Symplectic.20group.html#289408567">(Jul 13 2022 at 02:17)</a>:</h4>
<p>I just came back from dinner, but I will have a look now</p>



<a name="289418452"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/Symplectic%20group/near/289418452" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jim Fowler <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/Symplectic.20group.html#289418452">(Jul 13 2022 at 05:58)</a>:</h4>
<p>The code for <code>symplectic_inv</code> was removed, but it seems like</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">symplectic_inv</span> <span class="o">{</span><span class="n">A</span> <span class="o">:</span> <span class="n">matrix</span> <span class="o">(</span><span class="n">l</span> <span class="bp">⊕</span> <span class="n">l</span><span class="o">)</span> <span class="o">(</span><span class="n">l</span> <span class="bp">⊕</span> <span class="n">l</span><span class="o">)</span> <span class="n">ℝ</span><span class="o">}</span> <span class="o">(</span><span class="n">hA</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">∈</span> <span class="n">symplectic_group</span> <span class="n">l</span><span class="o">)</span> <span class="o">[</span><span class="n">invertible</span> <span class="n">A</span><span class="o">]</span> <span class="o">[</span><span class="n">invertible</span> <span class="n">A</span><span class="bp">ᵀ</span><span class="o">]:</span>
  <span class="n">symplectic_group</span> <span class="n">l</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">val</span> <span class="o">:=</span> <span class="n">A</span><span class="bp">⁻¹</span><span class="o">,</span>
  <span class="n">property</span> <span class="o">:=</span>
  <span class="kd">begin</span>
    <span class="n">rw</span> <span class="n">mem_symplectic_group_iff</span> <span class="n">at</span> <span class="n">hA</span> <span class="bp">⊢</span><span class="o">,</span>
    <span class="n">apply_fun</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">A</span><span class="bp">⁻¹</span> <span class="bp">⬝</span> <span class="o">(</span><span class="n">x</span><span class="o">)</span> <span class="bp">⬝</span> <span class="o">(</span><span class="n">A</span><span class="bp">ᵀ</span><span class="o">)</span><span class="bp">⁻¹</span><span class="o">)</span> <span class="n">at</span> <span class="n">hA</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">matrix.transpose_nonsing_inv</span><span class="o">,</span>
    <span class="k">calc</span> <span class="n">A</span><span class="bp">⁻¹</span> <span class="bp">⬝</span> <span class="n">J</span> <span class="n">l</span> <span class="n">ℝ</span> <span class="bp">⬝</span> <span class="n">A</span><span class="bp">ᵀ⁻¹</span> <span class="bp">=</span> <span class="n">A</span><span class="bp">⁻¹</span> <span class="bp">⬝</span> <span class="o">(</span><span class="n">A</span> <span class="bp">⬝</span> <span class="n">J</span> <span class="n">l</span> <span class="n">ℝ</span> <span class="bp">⬝</span> <span class="n">A</span><span class="bp">ᵀ</span><span class="o">)</span> <span class="bp">⬝</span> <span class="n">A</span><span class="bp">ᵀ⁻¹</span> <span class="o">:</span> <span class="kd">by</span> <span class="n">exact</span> <span class="n">hA.symm</span>
    <span class="bp">...</span>                     <span class="bp">=</span> <span class="n">A</span><span class="bp">⁻¹</span> <span class="bp">⬝</span> <span class="n">A</span> <span class="bp">⬝</span> <span class="n">J</span> <span class="n">l</span> <span class="n">ℝ</span> <span class="bp">⬝</span> <span class="n">A</span><span class="bp">ᵀ</span> <span class="bp">⬝</span> <span class="n">A</span><span class="bp">ᵀ⁻¹</span> <span class="o">:</span> <span class="kd">by</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">matrix.mul_assoc</span><span class="o">]</span>
    <span class="bp">...</span>                     <span class="bp">=</span> <span class="o">(</span><span class="n">A</span><span class="bp">⁻¹</span> <span class="bp">⬝</span> <span class="n">A</span><span class="o">)</span> <span class="bp">⬝</span> <span class="o">(</span><span class="n">J</span> <span class="n">l</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">⬝</span> <span class="o">(</span><span class="n">A</span><span class="bp">ᵀ</span> <span class="bp">⬝</span> <span class="n">A</span><span class="bp">ᵀ⁻¹</span><span class="o">)</span> <span class="o">:</span> <span class="kd">by</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">matrix.mul_assoc</span><span class="o">]</span>
    <span class="bp">...</span>                     <span class="bp">=</span> <span class="o">(</span><span class="n">has_inv.inv</span> <span class="n">A</span> <span class="bp">⬝</span> <span class="n">A</span><span class="o">)</span> <span class="bp">⬝</span> <span class="o">(</span><span class="n">J</span> <span class="n">l</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">⬝</span> <span class="o">(</span><span class="n">A</span><span class="bp">ᵀ</span> <span class="bp">⬝</span> <span class="n">A</span><span class="bp">ᵀ⁻¹</span><span class="o">)</span> <span class="o">:</span> <span class="kd">by</span> <span class="n">refl</span>
    <span class="bp">...</span>                     <span class="bp">=</span> <span class="o">(</span><span class="bp">⅟</span> <span class="n">A</span> <span class="bp">⬝</span> <span class="n">A</span><span class="o">)</span> <span class="bp">⬝</span> <span class="o">(</span><span class="n">J</span> <span class="n">l</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">⬝</span> <span class="o">(</span><span class="n">A</span><span class="bp">ᵀ</span> <span class="bp">⬝</span> <span class="n">A</span><span class="bp">ᵀ⁻¹</span><span class="o">)</span> <span class="o">:</span> <span class="kd">by</span> <span class="n">rw</span> <span class="n">matrix.inv_of_eq_nonsing_inv</span>
    <span class="bp">...</span>                     <span class="bp">=</span> <span class="mi">1</span> <span class="bp">⬝</span> <span class="o">(</span><span class="n">J</span> <span class="n">l</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">⬝</span> <span class="o">(</span><span class="n">A</span><span class="bp">ᵀ</span> <span class="bp">⬝</span> <span class="n">A</span><span class="bp">ᵀ⁻¹</span><span class="o">)</span> <span class="o">:</span> <span class="kd">by</span> <span class="n">rw</span> <span class="n">matrix.inv_of_mul_self</span>
    <span class="bp">...</span>                     <span class="bp">=</span> <span class="mi">1</span> <span class="bp">⬝</span> <span class="o">(</span><span class="n">J</span> <span class="n">l</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">⬝</span> <span class="o">(</span><span class="n">A</span><span class="bp">ᵀ</span> <span class="bp">⬝</span> <span class="o">(</span><span class="bp">⅟</span> <span class="o">(</span><span class="n">A</span><span class="bp">ᵀ</span><span class="o">)))</span> <span class="o">:</span> <span class="kd">by</span> <span class="n">rw</span> <span class="n">matrix.inv_of_eq_nonsing_inv</span>
    <span class="bp">...</span>                     <span class="bp">=</span> <span class="mi">1</span> <span class="bp">⬝</span> <span class="o">(</span><span class="n">J</span> <span class="n">l</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">⬝</span> <span class="mi">1</span> <span class="o">:</span> <span class="kd">by</span> <span class="n">rw</span> <span class="n">matrix.mul_inv_of_self</span>
    <span class="bp">...</span>                     <span class="bp">=</span> <span class="n">J</span> <span class="n">l</span> <span class="n">ℝ</span> <span class="o">:</span> <span class="kd">by</span> <span class="n">simp</span>
  <span class="kd">end</span> <span class="o">}</span>
</code></pre></div>
<p>would work.</p>
<p>I find that I don't fully understand why matrices use <code>⬝</code> and the situation surrounding between <code>⅟ </code> versus <code>⁻¹</code> and between <code>has_inv</code>versus <code>invertible</code>.</p>



<a name="289419479"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/Symplectic%20group/near/289419479" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/Symplectic.20group.html#289419479">(Jul 13 2022 at 06:17)</a>:</h4>
<p>Isn't <code>invertible Aᵀ</code> redundant? You could do <code>haveI : invertible Aᵀ := // proof</code> after the <code>begin</code>.</p>



<a name="289421330"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/Symplectic%20group/near/289421330" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/Symplectic.20group.html#289421330">(Jul 13 2022 at 06:50)</a>:</h4>
<p>thanks <span class="user-mention" data-user-id="466727">@Jim Fowler</span>  actually both typeclasses are redunant, because we have <code>hA</code></p>



<a name="289421451"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/Symplectic%20group/near/289421451" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/Symplectic.20group.html#289421451">(Jul 13 2022 at 06:52)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/invertible">docs#invertible</a> is a data-carrying class, unfortunately</p>



<a name="289424924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/Symplectic%20group/near/289424924" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/Symplectic.20group.html#289424924">(Jul 13 2022 at 07:45)</a>:</h4>
<p>One can completely get around using <code>invertible</code> and the weird inversion, see the current commit in Matej's repo (commit f356924).</p>



<a name="289455606"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/Symplectic%20group/near/289455606" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jim Fowler <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/Symplectic.20group.html#289455606">(Jul 13 2022 at 13:02)</a>:</h4>
<p>I'm new to all this, and I would have thought that typeclass inference could have produced the <code>[invertible A]</code> from <code>hA</code>, so I am not sure what effect including <code>[invertible A]</code> has.</p>



<a name="289457979"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/Symplectic%20group/near/289457979" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz Doll <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/Symplectic.20group.html#289457979">(Jul 13 2022 at 13:21)</a>:</h4>
<p>these are called typeclass-instances. A brief and not really correct explanation is that a typeclass behaves somewhat like a structure, but it is not type, so you can add additional fields to different types and an instance is the implementation, so that you can access the fields of <code>invertible</code>for <code>A</code></p>



<a name="289469220"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/330515-LftCM22/topic/Symplectic%20group/near/289469220" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jim Fowler <a href="https://leanprover-community.github.io/archive/stream/330515-LftCM22/topic/Symplectic.20group.html#289469220">(Jul 13 2022 at 14:41)</a>:</h4>
<p>But I would have thought having <code>hA</code> in the tactic state would mean that <code>1/</code> would infer the <code>invertible</code> instance, so I'm not sure what effect including <code>[invertible A]</code> had.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>