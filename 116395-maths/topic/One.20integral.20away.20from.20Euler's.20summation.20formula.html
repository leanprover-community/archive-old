---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/One.20integral.20away.20from.20Euler's.20summation.20formula.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/One.20integral.20away.20from.20Euler's.20summation.20formula.html">One integral away from Euler's summation formula</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="220722106"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/One%20integral%20away%20from%20Euler%27s%20summation%20formula/near/220722106" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Masdeu <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/One.20integral.20away.20from.20Euler's.20summation.20formula.html#220722106">(Dec 22 2020 at 18:54)</a>:</h4>
<p>Hi,</p>
<p>I have been working on formalizing Euler's summation formula (<a href="https://github.com/leanprover-community/mathlib/issues/14">#14</a> in Freek's list) and I am just missing this lemma:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">measure_theory.interval_integral</span>
<span class="kn">import</span> <span class="n">measure_theory.lebesgue_measure</span>
<span class="kn">import</span> <span class="n">measure_theory.set_integral</span>
<span class="kn">import</span> <span class="n">analysis.calculus.deriv</span>

<span class="kd">noncomputable theory</span>
<span class="n">open_locale</span> <span class="n">classical</span>
<span class="n">open_locale</span> <span class="n">big_operators</span>
<span class="kn">open</span> <span class="n">interval_integral</span>
<span class="kn">open</span> <span class="n">real</span>

<span class="kd">theorem</span> <span class="n">integral_strictly_pos_of_cont</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span>
    <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">f</span><span class="o">)</span>
    <span class="o">(</span><span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&lt;</span> <span class="n">b</span><span class="o">)</span>
    <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">→</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">b</span> <span class="bp">→</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
    <span class="o">(</span><span class="n">hneq</span><span class="o">:</span> <span class="bp">∃</span> <span class="n">x</span><span class="o">,</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">b</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span>
    <span class="mi">0</span> <span class="bp">&lt;</span> <span class="bp">∫</span> <span class="n">x</span> <span class="k">in</span> <span class="n">a..b</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="o">:=</span>
<span class="kd">begin</span>
    <span class="gr">sorry</span>
<span class="kd">end</span>
</code></pre></div>
<p>I can prove that continuous -&gt; integrable, but I am having trouble converting hypotheses like <code>h</code> into something usable. As a warm-up exercise, I am having trouble formalizing</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">integral_nonneg_of_cont</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span>
    <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">interval_integrable</span> <span class="n">f</span> <span class="n">measure_theory.measure_space.volume</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span>
    <span class="o">(</span><span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">)</span>
    <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">→</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">b</span> <span class="bp">→</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span>
    <span class="mi">0</span> <span class="bp">≤</span> <span class="bp">∫</span> <span class="n">x</span> <span class="k">in</span> <span class="n">a..b</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div>
<p>which looks a lot easier. Any help would be appreciated :-).</p>



<a name="220728107"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/One%20integral%20away%20from%20Euler%27s%20summation%20formula/near/220728107" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/One.20integral.20away.20from.20Euler's.20summation.20formula.html#220728107">(Dec 22 2020 at 19:57)</a>:</h4>
<p>Have you tried using <a href="https://leanprover-community.github.io/mathlib_docs/find/measure_theory.integral_mono">docs#measure_theory.integral_mono</a>?</p>



<a name="220732937"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/One%20integral%20away%20from%20Euler%27s%20summation%20formula/near/220732937" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Masdeu <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/One.20integral.20away.20from.20Euler's.20summation.20formula.html#220732937">(Dec 22 2020 at 20:52)</a>:</h4>
<p>Thanks! I'll try, I guess that I need to construct functions which extend by 0 f and g outside the interval (a,b). Because directly it doesn't apply. But to be honest I hadn't been able to find that one. This is how I had started the first of the two (the one I'm ultimately interested in):</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">integrable_of_cont</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">}</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">f</span><span class="o">):</span>
    <span class="n">interval_integrable</span> <span class="n">f</span> <span class="n">measure_theory.measure_space.volume</span> <span class="n">a</span> <span class="n">b</span> <span class="o">:=</span>
<span class="kd">begin</span>
    <span class="k">have</span> <span class="n">hmeas</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="o">:=</span> <span class="n">continuous.measurable</span> <span class="n">h</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">hconton</span> <span class="o">:</span> <span class="n">continuous_on</span> <span class="n">f</span> <span class="o">(</span><span class="n">set.interval</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="o">:=</span> <span class="n">continuous.continuous_on</span> <span class="n">h</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">continuous_on.interval_integrable</span> <span class="n">hconton</span> <span class="n">hmeas</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">real.locally_finite_volume</span><span class="o">,</span>
<span class="kd">end</span>

<span class="kd">theorem</span> <span class="n">integral_strictly_pos_of_cont</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span>
    <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">f</span><span class="o">)</span>
    <span class="o">(</span><span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&lt;</span> <span class="n">b</span><span class="o">)</span>
    <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">→</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">b</span> <span class="bp">→</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
    <span class="o">(</span><span class="n">hneq</span><span class="o">:</span> <span class="bp">∃</span> <span class="n">x</span><span class="o">,</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">b</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span>
    <span class="mi">0</span> <span class="bp">&lt;</span> <span class="bp">∫</span> <span class="n">x</span> <span class="k">in</span> <span class="n">a..b</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="o">:=</span>
<span class="kd">begin</span>
    <span class="n">rw</span> <span class="n">integral_pos_iff_support_of_nonneg_ae'</span><span class="o">,</span>
    <span class="o">{</span>
        <span class="n">split</span><span class="o">,</span> <span class="n">assumption</span><span class="o">,</span>
        <span class="n">simp</span> <span class="n">only</span><span class="o">,</span>
        <span class="gr">sorry</span>
    <span class="o">},</span>
    <span class="o">{</span>
        <span class="gr">sorry</span>
    <span class="o">},</span>
    <span class="n">exact</span> <span class="n">integrable_of_cont</span> <span class="n">a</span> <span class="n">b</span> <span class="n">hf</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="220735926"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/One%20integral%20away%20from%20Euler%27s%20summation%20formula/near/220735926" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/One.20integral.20away.20from.20Euler's.20summation.20formula.html#220735926">(Dec 22 2020 at 21:26)</a>:</h4>
<p>Your strategy looks good to me. One sorry less:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">self_mem_ae_restrict</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">measurable_space</span> <span class="n">α</span><span class="o">]</span> <span class="o">{</span><span class="n">μ</span> <span class="o">:</span> <span class="n">measure</span> <span class="n">α</span><span class="o">}</span>
  <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">hs</span> <span class="o">:</span> <span class="n">is_measurable</span> <span class="n">s</span><span class="o">):</span>
  <span class="n">s</span> <span class="bp">∈</span> <span class="o">(</span><span class="n">μ.restrict</span> <span class="n">s</span><span class="o">)</span><span class="bp">.</span><span class="n">ae</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="n">ae_restrict_eq</span> <span class="n">hs</span><span class="o">,</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">exists_prop</span><span class="o">,</span> <span class="n">filter.mem_principal_sets</span><span class="o">,</span> <span class="n">filter.mem_inf_sets</span><span class="o">],</span>
  <span class="n">exact</span> <span class="o">⟨</span><span class="n">univ</span><span class="o">,</span> <span class="n">filter.univ_mem_sets</span><span class="o">,</span> <span class="n">s</span><span class="o">,</span> <span class="kd">by</span> <span class="n">simp</span><span class="o">⟩,</span>
<span class="kd">end</span>

<span class="kd">theorem</span> <span class="n">integral_strictly_pos_of_cont</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span>
    <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">f</span><span class="o">)</span>
    <span class="o">(</span><span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&lt;</span> <span class="n">b</span><span class="o">)</span>
    <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">→</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">b</span> <span class="bp">→</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
    <span class="o">(</span><span class="n">hneq</span><span class="o">:</span> <span class="bp">∃</span> <span class="n">x</span><span class="o">,</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">b</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span>
    <span class="mi">0</span> <span class="bp">&lt;</span> <span class="bp">∫</span> <span class="n">x</span> <span class="k">in</span> <span class="n">a..b</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">apply</span> <span class="o">(</span><span class="n">integral_pos_iff_support_of_nonneg_ae'</span> <span class="n">_</span> <span class="n">_</span><span class="o">)</span><span class="bp">.</span><span class="mi">2</span><span class="o">,</span>
  <span class="o">{</span> <span class="gr">sorry</span> <span class="o">},</span>
  <span class="o">{</span> <span class="k">have</span> <span class="o">:</span> <span class="n">Ioc</span> <span class="n">b</span> <span class="n">a</span> <span class="bp">=</span> <span class="bp">∅</span> <span class="o">:=</span> <span class="n">Ioc_eq_empty</span> <span class="n">hab.le</span><span class="o">,</span>
    <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">this</span><span class="o">,</span> <span class="n">union_empty</span><span class="o">],</span>
    <span class="n">exact</span> <span class="n">filter.eventually_of_mem</span>
      <span class="o">(</span><span class="n">self_mem_ae_restrict</span> <span class="n">is_measurable_Ioc</span><span class="o">)</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span> <span class="n">hx</span><span class="o">,</span> <span class="n">h</span> <span class="n">x</span> <span class="n">hx.1.le</span> <span class="n">hx.2</span><span class="o">)</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">exact</span> <span class="n">integrable_of_cont</span> <span class="n">a</span> <span class="n">b</span> <span class="n">hf</span> <span class="o">}</span>
<span class="kd">end</span>
</code></pre></div>



<a name="220738255"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/One%20integral%20away%20from%20Euler%27s%20summation%20formula/near/220738255" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/One.20integral.20away.20from.20Euler's.20summation.20formula.html#220738255">(Dec 22 2020 at 21:56)</a>:</h4>
<p>No sorry left:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">measure_theory.interval_integral</span>
<span class="kn">import</span> <span class="n">measure_theory.lebesgue_measure</span>
<span class="kn">import</span> <span class="n">measure_theory.set_integral</span>
<span class="kn">import</span> <span class="n">analysis.calculus.deriv</span>

<span class="kd">noncomputable theory</span>
<span class="n">open_locale</span> <span class="n">classical</span>
<span class="n">open_locale</span> <span class="n">big_operators</span>
<span class="n">open_locale</span> <span class="n">topological_space</span>
<span class="kn">open</span> <span class="n">interval_integral</span>
<span class="kn">open</span> <span class="n">real</span>
<span class="kn">open</span> <span class="n">measure_theory</span>
<span class="kn">open</span> <span class="n">set</span>

<span class="kd">lemma</span> <span class="n">integrable_of_cont</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">}</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">f</span><span class="o">):</span>
    <span class="n">interval_integrable</span> <span class="n">f</span> <span class="n">measure_theory.measure_space.volume</span> <span class="n">a</span> <span class="n">b</span> <span class="o">:=</span>
<span class="kd">begin</span>
    <span class="k">have</span> <span class="n">hmeas</span> <span class="o">:</span> <span class="n">measurable</span> <span class="n">f</span> <span class="o">:=</span> <span class="n">continuous.measurable</span> <span class="n">h</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">hconton</span> <span class="o">:</span> <span class="n">continuous_on</span> <span class="n">f</span> <span class="o">(</span><span class="n">set.interval</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="o">:=</span> <span class="n">continuous.continuous_on</span> <span class="n">h</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">continuous_on.interval_integrable</span> <span class="n">hconton</span> <span class="n">hmeas</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">real.locally_finite_volume</span><span class="o">,</span>
<span class="kd">end</span>

<span class="kd">lemma</span> <span class="n">self_mem_ae_restrict</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">measurable_space</span> <span class="n">α</span><span class="o">]</span> <span class="o">{</span><span class="n">μ</span> <span class="o">:</span> <span class="n">measure</span> <span class="n">α</span><span class="o">}</span>
  <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">hs</span> <span class="o">:</span> <span class="n">is_measurable</span> <span class="n">s</span><span class="o">):</span>
  <span class="n">s</span> <span class="bp">∈</span> <span class="o">(</span><span class="n">μ.restrict</span> <span class="n">s</span><span class="o">)</span><span class="bp">.</span><span class="n">ae</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="n">ae_restrict_eq</span> <span class="n">hs</span><span class="o">,</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">exists_prop</span><span class="o">,</span> <span class="n">filter.mem_principal_sets</span><span class="o">,</span> <span class="n">filter.mem_inf_sets</span><span class="o">],</span>
  <span class="n">exact</span> <span class="o">⟨</span><span class="n">univ</span><span class="o">,</span> <span class="n">filter.univ_mem_sets</span><span class="o">,</span> <span class="n">s</span><span class="o">,</span> <span class="kd">by</span> <span class="n">simp</span><span class="o">⟩,</span>
<span class="kd">end</span>

<span class="kd">lemma</span> <span class="n">nonempty_inter_of_nonempty_inter_closure</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">α</span><span class="o">]</span> <span class="o">{</span><span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">}</span>
  <span class="o">(</span><span class="n">hs</span> <span class="o">:</span> <span class="n">is_open</span> <span class="n">s</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="o">(</span><span class="n">s</span> <span class="bp">∩</span> <span class="n">closure</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">nonempty</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">s</span> <span class="bp">∩</span> <span class="n">t</span><span class="o">)</span><span class="bp">.</span><span class="n">nonempty</span> <span class="o">:=</span>
<span class="k">let</span> <span class="o">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">xs</span><span class="o">,</span> <span class="n">xt</span><span class="o">⟩</span> <span class="o">:=</span> <span class="n">h</span> <span class="k">in</span> <span class="n">_root_.mem_closure_iff.1</span> <span class="n">xt</span> <span class="n">s</span> <span class="n">hs</span> <span class="n">xs</span>

<span class="kd">lemma</span> <span class="n">real.volume_pos_of_is_open_of_nonempty</span> <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℝ</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">is_open</span> <span class="n">s</span><span class="o">)</span> <span class="o">(</span><span class="n">h'</span> <span class="o">:</span> <span class="n">s.nonempty</span><span class="o">)</span> <span class="o">:</span>
  <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">volume</span> <span class="n">s</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rcases</span> <span class="n">h'</span> <span class="k">with</span> <span class="o">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">hx</span><span class="o">⟩,</span>
  <span class="k">have</span> <span class="o">:</span> <span class="bp">∀ᶠ</span> <span class="o">(</span><span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="bp">𝓝</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span> <span class="bp">∈</span> <span class="n">s</span> <span class="o">:=</span> <span class="n">filter.eventually_of_mem</span> <span class="o">(</span><span class="n">mem_nhds_sets</span> <span class="n">h</span> <span class="n">hx</span><span class="o">)</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">y</span> <span class="n">H</span><span class="o">,</span> <span class="n">H</span><span class="o">),</span>
  <span class="n">exact</span> <span class="n">filter.eventually.volume_pos_of_nhds_real</span> <span class="n">this</span><span class="o">,</span>
<span class="kd">end</span>

<span class="kd">theorem</span> <span class="n">integral_strictly_pos_of_cont</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span>
    <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">f</span><span class="o">)</span>
    <span class="o">(</span><span class="n">hab</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&lt;</span> <span class="n">b</span><span class="o">)</span>
    <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">→</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">b</span> <span class="bp">→</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span>
    <span class="o">(</span><span class="n">hneq</span><span class="o">:</span> <span class="bp">∃</span> <span class="n">x</span><span class="o">,</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">x</span> <span class="bp">∧</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">b</span> <span class="bp">∧</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span>
    <span class="mi">0</span> <span class="bp">&lt;</span> <span class="bp">∫</span> <span class="n">x</span> <span class="k">in</span> <span class="n">a..b</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="n">integral_pos_iff_support_of_nonneg_ae'</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">refine</span> <span class="o">⟨</span><span class="n">hab</span><span class="o">,</span> <span class="n">_</span><span class="o">⟩,</span>
    <span class="k">let</span> <span class="n">s</span> <span class="o">:=</span> <span class="o">{</span><span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">|</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">f</span> <span class="n">b</span><span class="o">},</span>
    <span class="k">have</span> <span class="n">s_open</span> <span class="o">:</span> <span class="n">is_open</span> <span class="n">s</span> <span class="o">:=</span> <span class="n">is_open_lt</span> <span class="n">continuous_const</span> <span class="n">hf</span><span class="o">,</span>
    <span class="k">have</span> <span class="o">:</span> <span class="o">(</span><span class="n">s</span> <span class="bp">∩</span> <span class="n">closure</span> <span class="o">(</span><span class="n">Ioo</span> <span class="n">a</span> <span class="n">b</span><span class="o">))</span><span class="bp">.</span><span class="n">nonempty</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">rw</span> <span class="n">closure_Ioo</span> <span class="n">hab</span><span class="o">,</span>
      <span class="n">rcases</span> <span class="n">hneq</span> <span class="k">with</span> <span class="o">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">ax</span><span class="o">,</span> <span class="n">xb</span><span class="o">,</span> <span class="n">fxpos</span><span class="o">⟩,</span>
      <span class="k">have</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">s</span> <span class="bp">∩</span> <span class="n">Icc</span> <span class="n">a</span> <span class="n">b</span> <span class="o">:=</span> <span class="o">⟨</span><span class="n">fxpos</span><span class="o">,</span> <span class="n">ax</span><span class="o">,</span> <span class="n">xb</span><span class="o">⟩,</span>
      <span class="n">exact</span> <span class="n">nonempty_of_mem</span> <span class="n">this</span> <span class="o">},</span>
    <span class="k">have</span> <span class="o">:</span> <span class="o">(</span><span class="n">s</span> <span class="bp">∩</span> <span class="n">Ioo</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="n">nonempty</span> <span class="o">:=</span> <span class="n">nonempty_inter_of_nonempty_inter_closure</span> <span class="n">s_open</span> <span class="n">this</span><span class="o">,</span>
    <span class="k">have</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">volume</span> <span class="o">(</span><span class="n">s</span> <span class="bp">∩</span> <span class="n">Ioo</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span> <span class="o">:=</span>
      <span class="n">real.volume_pos_of_is_open_of_nonempty</span> <span class="o">(</span><span class="n">is_open_inter</span> <span class="n">s_open</span> <span class="n">is_open_Ioo</span><span class="o">)</span> <span class="n">this</span><span class="o">,</span>
    <span class="n">refine</span> <span class="n">this.trans_le</span> <span class="o">(</span><span class="n">measure_mono</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span> <span class="n">hx</span><span class="o">,</span> <span class="n">_</span><span class="o">)),</span>
    <span class="n">split</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">exact</span> <span class="n">ne_of_gt</span> <span class="o">(</span><span class="k">show</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">f</span> <span class="n">x</span><span class="o">,</span> <span class="k">from</span> <span class="n">hx.1</span><span class="o">)</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">exact</span> <span class="o">⟨</span><span class="n">hx.2.1</span><span class="o">,</span> <span class="n">hx.2.2.le</span><span class="o">⟩</span> <span class="o">}</span> <span class="o">},</span>
  <span class="o">{</span> <span class="k">have</span> <span class="o">:</span> <span class="n">Ioc</span> <span class="n">b</span> <span class="n">a</span> <span class="bp">=</span> <span class="bp">∅</span> <span class="o">:=</span> <span class="n">Ioc_eq_empty</span> <span class="n">hab.le</span><span class="o">,</span>
    <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">this</span><span class="o">,</span> <span class="n">union_empty</span><span class="o">],</span>
    <span class="n">exact</span> <span class="n">filter.eventually_of_mem</span>
      <span class="o">(</span><span class="n">self_mem_ae_restrict</span> <span class="n">is_measurable_Ioc</span><span class="o">)</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span> <span class="n">hx</span><span class="o">,</span> <span class="n">h</span> <span class="n">x</span> <span class="n">hx.1.le</span> <span class="n">hx.2</span><span class="o">)</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">exact</span> <span class="n">integrable_of_cont</span> <span class="n">a</span> <span class="n">b</span> <span class="n">hf</span> <span class="o">}</span>
<span class="kd">end</span>
</code></pre></div>



<a name="220739937"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/One%20integral%20away%20from%20Euler%27s%20summation%20formula/near/220739937" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Masdeu <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/One.20integral.20away.20from.20Euler's.20summation.20formula.html#220739937">(Dec 22 2020 at 22:16)</a>:</h4>
<p>Thanks, that's great! Tomorrow I'll post the complete proof on GitHub</p>



<a name="220741597"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/One%20integral%20away%20from%20Euler%27s%20summation%20formula/near/220741597" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/One.20integral.20away.20from.20Euler's.20summation.20formula.html#220741597">(Dec 22 2020 at 22:34)</a>:</h4>
<p>A version of <code>integrable_of_cont</code> is a part of <a href="https://github.com/leanprover-community/mathlib/tree/ftc2">branch#ftc2</a> <a href="https://github.com/leanprover-community/mathlib/issues/4945">#4945</a></p>



<a name="220741810"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/One%20integral%20away%20from%20Euler%27s%20summation%20formula/near/220741810" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/One.20integral.20away.20from.20Euler's.20summation.20formula.html#220741810">(Dec 22 2020 at 22:37)</a>:</h4>
<p>Actually (although that branch adds new versions) I put in the basic version <a href="https://leanprover-community.github.io/mathlib_docs/find/continuous.interval_integrable">docs#continuous.interval_integrable</a> a couple of weeks ago <a href="https://github.com/leanprover-community/mathlib/issues/5288">#5288</a></p>



<a name="220742165"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/One%20integral%20away%20from%20Euler%27s%20summation%20formula/near/220742165" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/One.20integral.20away.20from.20Euler's.20summation.20formula.html#220742165">(Dec 22 2020 at 22:38)</a>:</h4>
<p><span class="user-mention" data-user-id="260507">@Heather Macbeth</span> Sure, I'm sorry for a wrong reference.</p>



<a name="220742229"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/One%20integral%20away%20from%20Euler%27s%20summation%20formula/near/220742229" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/One.20integral.20away.20from.20Euler's.20summation.20formula.html#220742229">(Dec 22 2020 at 22:38)</a>:</h4>
<p>Well done <span class="user-mention" data-user-id="254058">@Marc Masdeu</span> !</p>



<a name="220800945"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/One%20integral%20away%20from%20Euler%27s%20summation%20formula/near/220800945" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Masdeu <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/One.20integral.20away.20from.20Euler's.20summation.20formula.html#220800945">(Dec 23 2020 at 16:01)</a>:</h4>
<p>The proof is there. One more down from Freek's list <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span> <br>
<a href="https://github.com/mmasdeu/euler">https://github.com/mmasdeu/euler</a></p>



<a name="220801070"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/One%20integral%20away%20from%20Euler%27s%20summation%20formula/near/220801070" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/One.20integral.20away.20from.20Euler's.20summation.20formula.html#220801070">(Dec 23 2020 at 16:02)</a>:</h4>
<p>Congrats!!</p>



<a name="220801080"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/One%20integral%20away%20from%20Euler%27s%20summation%20formula/near/220801080" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/One.20integral.20away.20from.20Euler's.20summation.20formula.html#220801080">(Dec 23 2020 at 16:02)</a>:</h4>
<p>are you planning to PR it to mathlib?</p>



<a name="220801396"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/One%20integral%20away%20from%20Euler%27s%20summation%20formula/near/220801396" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Masdeu <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/One.20integral.20away.20from.20Euler's.20summation.20formula.html#220801396">(Dec 23 2020 at 16:05)</a>:</h4>
<p>If there is interest, I could try. But I'd rather work on another project, this was just a fun exercise. It would be good to have zeta(2k) in there, and I hoped that I would be able to reuse some of what I learned to give that a try.</p>



<a name="220802412"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/One%20integral%20away%20from%20Euler%27s%20summation%20formula/near/220802412" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/One.20integral.20away.20from.20Euler's.20summation.20formula.html#220802412">(Dec 23 2020 at 16:17)</a>:</h4>
<p>If it doesn't get PRd, then it won't compile with mathlib of 2 months from now.</p>



<a name="220802455"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/One%20integral%20away%20from%20Euler%27s%20summation%20formula/near/220802455" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/One.20integral.20away.20from.20Euler's.20summation.20formula.html#220802455">(Dec 23 2020 at 16:17)</a>:</h4>
<p>If you PR it, then other people will keep your code compatible. This will be helpful even for you yourself, if you plan on reusing parts of it.</p>



<a name="220803215"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/One%20integral%20away%20from%20Euler%27s%20summation%20formula/near/220803215" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/One.20integral.20away.20from.20Euler's.20summation.20formula.html#220803215">(Dec 23 2020 at 16:25)</a>:</h4>
<p>It looks like there is a lot of useful material in there, in addition to the headline result!  You prove integration by parts, it'd be very nice to have this in mathlib.</p>



<a name="220803262"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/One%20integral%20away%20from%20Euler%27s%20summation%20formula/near/220803262" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/One.20integral.20away.20from.20Euler's.20summation.20formula.html#220803262">(Dec 23 2020 at 16:25)</a>:</h4>
<p>If PR'ing the whole thing is overwhelming, maybe you could do that as a test case.</p>



<a name="220803679"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/One%20integral%20away%20from%20Euler%27s%20summation%20formula/near/220803679" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/One.20integral.20away.20from.20Euler's.20summation.20formula.html#220803679">(Dec 23 2020 at 16:30)</a>:</h4>
<p>You prove your own FTC-2 too, since as you correctly gathered, it is not in mathlib currently.  But it should be soon (<a href="https://github.com/leanprover-community/mathlib/issues/4945">#4945</a>) which would shorten the "path" of new material on the way to integration by parts.</p>



<a name="220817207"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/One%20integral%20away%20from%20Euler%27s%20summation%20formula/near/220817207" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Masdeu <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/One.20integral.20away.20from.20Euler's.20summation.20formula.html#220817207">(Dec 23 2020 at 18:57)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> I know there are very solid pros to PRing many theorems to mathlib, but there are some cons, like the extra effort it requires. The argument about having other people maintain the code since it's in mathlib is correct, but if you see how SageMath has been evoling over the years, you see that the fact that there is so much intertwinned code makes it hard to develop new stuff, and eventually all tickets / PRs are about refactoring and the maths parts stops improving.<br>
Still, I think that mathlib is far from that stage now, and that most of what I've written should be in mathlib, so I'm not saying no to PRing in this particular case!</p>



<a name="220817503"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/One%20integral%20away%20from%20Euler%27s%20summation%20formula/near/220817503" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Masdeu <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/One.20integral.20away.20from.20Euler's.20summation.20formula.html#220817503">(Dec 23 2020 at 19:01)</a>:</h4>
<p><span class="user-mention" data-user-id="260507">@Heather Macbeth</span> thanks for the encouragement! I started this as I was aware that FTC2 was on its way, and I put it up as a black-box from which to get an immediate application. So what's in integrals.lean was originally a bunch of sorry's. But then I couldn't resist the urge to try to fill them in... By the way, I took ftc1 from <a href="https://github.com/jjaassoonn/transcendental">https://github.com/jjaassoonn/transcendental</a> and there is a lot of interesting stuff in there as well!</p>



<a name="220823309"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/One%20integral%20away%20from%20Euler%27s%20summation%20formula/near/220823309" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/One.20integral.20away.20from.20Euler's.20summation.20formula.html#220823309">(Dec 23 2020 at 20:13)</a>:</h4>
<p>By the way, that version of FTC-1 has several unnecessary hypotheses!  You can leave out <code>hf</code>, <code>h</code>, <code>hf3</code>, <code>hx0</code>:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">measure_theory.interval_integral</span>

<span class="kd">lemma</span> <span class="n">ftc1</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">-&gt;</span> <span class="n">ℝ</span><span class="o">}</span> <span class="o">(</span><span class="n">hf2</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">x0</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">has_deriv_at</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="bp">∫</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="k">in</span> <span class="n">a..b</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="n">x0</span><span class="o">)</span> <span class="n">x0</span> <span class="o">:=</span>
<span class="n">interval_integral.integral_has_deriv_at_right</span> <span class="o">(</span><span class="n">hf2.interval_integrable</span> <span class="n">_</span> <span class="n">_</span><span class="o">)</span> <span class="n">hf2.continuous_at</span>
</code></pre></div>
<p>But I agree that it would be very nice to add this variant of FTC-1 to mathlib, the use case (i.e., when <code>f</code> is continuous) is very common.</p>



<a name="221413714"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/One%20integral%20away%20from%20Euler%27s%20summation%20formula/near/221413714" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/One.20integral.20away.20from.20Euler's.20summation.20formula.html#221413714">(Jan 02 2021 at 19:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="254058">Marc Masdeu</span> <a href="#narrow/stream/116395-maths/topic/One.20integral.20away.20from.20Euler's.20summation.20formula/near/220800945">said</a>:</p>
<blockquote>
<p>The proof is there. One more down from Freek's list <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span> <br>
<a href="https://github.com/mmasdeu/euler">https://github.com/mmasdeu/euler</a></p>
</blockquote>
<p>You should make a PR to add it to the 100 theorems list at least <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span> <a href="https://github.com/leanprover-community/mathlib/blob/master/docs/100.yaml">https://github.com/leanprover-community/mathlib/blob/master/docs/100.yaml</a> there are a few other examples there (like number 18) that link to a non-mathlib repo for the result!</p>



<a name="221925163"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/One%20integral%20away%20from%20Euler%27s%20summation%20formula/near/221925163" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/One.20integral.20away.20from.20Euler's.20summation.20formula.html#221925163">(Jan 07 2021 at 10:20)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/5655">#5655</a> <span class="user-mention" data-user-id="254058">@Marc Masdeu</span> I added this to the list 100.yaml</p>



<a name="221934461"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/One%20integral%20away%20from%20Euler%27s%20summation%20formula/near/221934461" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Masdeu <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/One.20integral.20away.20from.20Euler's.20summation.20formula.html#221934461">(Jan 07 2021 at 12:11)</a>:</h4>
<p>I should have done this but I still need even to ask permissions... Thanks a lot <span class="user-mention" data-user-id="112680">@Johan Commelin</span> !</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>