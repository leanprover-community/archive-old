---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/subrings.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html">subrings</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="127699034"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127699034" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127699034">(Jun 07 2018 at 06:54)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="c">/-</span><span class="cm">- `S` is a subgroup: a set containing 1 and closed under multiplication, addition and and additive inverse. -/</span>
<span class="n">class</span> <span class="n">is_subring</span>  <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="c1">-- would like `extends is_add_subgroup`, but that class doesn&#39;t exist</span>
<span class="o">(</span><span class="n">one_mem</span>       <span class="o">:</span> <span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="err">∈</span> <span class="n">S</span><span class="o">)</span>
<span class="o">(</span><span class="n">mul_mem</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span><span class="o">}</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">S</span> <span class="bp">→</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">S</span> <span class="bp">→</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">S</span><span class="o">)</span>
<span class="o">(</span><span class="n">add_mem</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span><span class="o">}</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">S</span> <span class="bp">→</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">S</span> <span class="bp">→</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">S</span><span class="o">)</span>
<span class="o">(</span><span class="n">inv_mem</span> <span class="o">{</span><span class="n">x</span><span class="o">}</span>   <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">S</span> <span class="bp">→</span> <span class="bp">-</span><span class="n">x</span> <span class="err">∈</span> <span class="n">S</span><span class="o">)</span>

<span class="kn">instance</span> <span class="n">subtype</span><span class="bp">.</span><span class="n">ring</span> <span class="o">{</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">R</span><span class="o">}</span> <span class="o">[</span><span class="n">is_subring</span> <span class="n">S</span><span class="o">]</span> <span class="o">:</span> <span class="n">ring</span> <span class="n">S</span> <span class="o">:=</span> <span class="n">sorry</span>
</pre></div>



<a name="127699067"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127699067" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127699067">(Jun 07 2018 at 06:55)</a>:</h4>
<p>I think the route of defining <code>is_add_subgroup</code> will pay off in the end. Is this again one of those things where <code>[to_additive]</code> should help? The last time I tried that, it didn't work.</p>



<a name="127699721"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127699721" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127699721">(Jun 07 2018 at 07:08)</a>:</h4>
<p>Ok, the easy way out: I'll extend <code>is_submonoid</code>. Even though it feels "unmathematical" to me.</p>



<a name="127703755"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127703755" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127703755">(Jun 07 2018 at 08:32)</a>:</h4>
<p>A minimalist definition of subgroup is : non-empty and closed under lam x y,xy^{-1}. Is there any point using this minimalist definition? You could do the same with add_mem and inv_mem here. Does this save time or obfuscate? Or both?</p>



<a name="127706197"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127706197" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127706197">(Jun 07 2018 at 09:22)</a>:</h4>
<p>I think it would be best if we could extend both <code>is_submonoid</code> and <code>is_add_subgroup</code>.</p>



<a name="127711064"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127711064" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127711064">(Jun 07 2018 at 10:39)</a>:</h4>
<p>Regarding minimalist definitions (<code>x * y^{-1}</code>), I think it is best if the official definition is the bog standard definition, with no clever tricks or surprises. It's fine to then provide an alternative constructor which allows you to take advantage of shortcuts like this if you want them.</p>



<a name="127711149"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127711149" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127711149">(Jun 07 2018 at 10:40)</a>:</h4>
<p>Until the constructions become seriously dire, I think it's best to optimise definitions to be usable (after you've constructed instances), rather than easy to satisfy.</p>



<a name="127711160"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127711160" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127711160">(Jun 07 2018 at 10:40)</a>:</h4>
<p>(Of course actually redundant things should be lemmas.)</p>



<a name="127723434"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127723434" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127723434">(Jun 07 2018 at 15:22)</a>:</h4>
<p><a href="https://github.com/jcommelin/lean-perfectoid-spaces/tree/subring/src/for_mathlib" target="_blank" title="https://github.com/jcommelin/lean-perfectoid-spaces/tree/subring/src/for_mathlib">https://github.com/jcommelin/lean-perfectoid-spaces/tree/subring/src/for_mathlib</a></p>



<a name="127723435"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127723435" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127723435">(Jun 07 2018 at 15:22)</a>:</h4>
<p>Here is a small start on subrings</p>



<a name="127758357"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127758357" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127758357">(Jun 08 2018 at 06:47)</a>:</h4>
<p>Update: <a href="https://github.com/jcommelin/lean-perfectoid-spaces/blob/subring/src/for_mathlib/subring.lean" target="_blank" title="https://github.com/jcommelin/lean-perfectoid-spaces/blob/subring/src/for_mathlib/subring.lean">https://github.com/jcommelin/lean-perfectoid-spaces/blob/subring/src/for_mathlib/subring.lean</a></p>



<a name="127758368"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127758368" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127758368">(Jun 08 2018 at 06:47)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> what do you think is the best strategy for integral elements?</p>



<a name="127758422"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127758422" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127758422">(Jun 08 2018 at 06:48)</a>:</h4>
<p>Were univariate polynomials already there? Somewhere? Did Chris or Nicholas do this?</p>



<a name="127758494"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127758494" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127758494">(Jun 08 2018 at 06:51)</a>:</h4>
<p>I think lots of people did univariate polynomials</p>



<a name="127758500"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127758500" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127758500">(Jun 08 2018 at 06:51)</a>:</h4>
<p>but I don't know if anyone submitted a PR</p>



<a name="127758507"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127758507" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127758507">(Jun 08 2018 at 06:51)</a>:</h4>
<p>I think Kenny proved a universal property</p>



<a name="127758520"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127758520" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127758520">(Jun 08 2018 at 06:52)</a>:</h4>
<p><span class="user-mention" data-user-id="110044">@Chris Hughes</span> <span class="user-mention" data-user-id="110064">@Kenny Lau</span> <span class="user-mention" data-user-id="110294">@Johannes Hölzl</span> Did any of you PR a definition of a polynomial in 1 variable into mathlib?</p>



<a name="127758567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127758567" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127758567">(Jun 08 2018 at 06:53)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> Note that for the definition of a perfectoid space it might be the case that one only has to formalise the definition, i.e. "I am a root of a monic poly with coefficients in the smaller ring"</p>



<a name="127758569"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127758569" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127758569">(Jun 08 2018 at 06:53)</a>:</h4>
<p>Yes, that is what I am currently trying to do</p>



<a name="127758571"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127758571" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127758571">(Jun 08 2018 at 06:53)</a>:</h4>
<p>To prove integral closure is a ring will involve some Noetherian arguments</p>



<a name="127758572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127758572" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127758572">(Jun 08 2018 at 06:53)</a>:</h4>
<p>but I am not sure this result is needed</p>



<a name="127758573"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127758573" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127758573">(Jun 08 2018 at 06:53)</a>:</h4>
<p>We need "I am a subring of R^o"</p>



<a name="127758574"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127758574" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127758574">(Jun 08 2018 at 06:54)</a>:</h4>
<p>but I am not sure we need "...and by the way R^o is a ring"</p>



<a name="127758614"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127758614" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127758614">(Jun 08 2018 at 06:54)</a>:</h4>
<p>Right, we never take the closure (-; We only have stuff that already is a subring, and then prove it is closed</p>



<a name="127758621"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127758621" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127758621">(Jun 08 2018 at 06:54)</a>:</h4>
<p>Oooh, what you are saying is different from what I was saying...</p>



<a name="127762328"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127762328" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johannes Hölzl <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127762328">(Jun 08 2018 at 08:58)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span>  There are no univariate polynomials in mathlib or in a PR. I want to move the polynomials from Mason-Stother proof in July / August.</p>



<a name="127766040"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127766040" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127766040">(Jun 08 2018 at 10:59)</a>:</h4>
<p>I will do that once I've done my project.</p>



<a name="127766743"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127766743" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127766743">(Jun 08 2018 at 11:21)</a>:</h4>
<p>What is the best way to define the n-th power of an ideal?</p>



<a name="127767182"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127767182" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127767182">(Jun 08 2018 at 11:34)</a>:</h4>
<p>Current proposal:</p>
<div class="codehilite"><pre><span></span><span class="n">span</span> <span class="o">{</span><span class="n">i</span> <span class="bp">|</span> <span class="bp">∃</span> <span class="n">x</span> <span class="o">:</span> <span class="n">multiset</span> <span class="n">I</span><span class="o">,</span> <span class="n">x</span><span class="bp">.</span><span class="n">card</span> <span class="bp">=</span> <span class="n">n</span> <span class="bp">∧</span> <span class="n">i</span> <span class="bp">=</span> <span class="o">(</span><span class="n">x</span><span class="bp">.</span><span class="n">map</span> <span class="n">subtype</span><span class="bp">.</span><span class="n">val</span><span class="o">)</span><span class="bp">.</span><span class="n">prod</span><span class="o">}</span>
</pre></div>



<a name="127772173"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127772173" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127772173">(Jun 08 2018 at 13:32)</a>:</h4>
<p>I think Kenny did product of ideals so you could just define them recursively</p>



<a name="127772572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127772572" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johannes Hölzl <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127772572">(Jun 08 2018 at 13:40)</a>:</h4>
<p>Are Kenny's ideals a subtype parameterised by the ring? I guess they form a monoid? Then you could just write <code>I ^ n</code>?</p>



<a name="127772627"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127772627" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127772627">(Jun 08 2018 at 13:41)</a>:</h4>
<p>But <code>I</code> has type <code>set R</code>. And there is some instance hanging around telling you that it is an ideal. So now Lean wants <code>have_pow (set R) nat</code>.</p>



<a name="127772630"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127772630" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127772630">(Jun 08 2018 at 13:41)</a>:</h4>
<p>And that doesn't make sense.</p>



<a name="127772637"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127772637" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127772637">(Jun 08 2018 at 13:41)</a>:</h4>
<p>But maybe I'm missing something.</p>



<a name="127773371"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127773371" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127773371">(Jun 08 2018 at 13:58)</a>:</h4>
<p>It doesn't make sense to a mathematician -- that's what you're missing.</p>



<a name="127773379"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127773379" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127773379">(Jun 08 2018 at 13:58)</a>:</h4>
<p>I think the idea in CS is that you just define I*J for I and J sets to be the ideal generated by the ij</p>



<a name="127773380"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127773380" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127773380">(Jun 08 2018 at 13:58)</a>:</h4>
<p>why not?</p>



<a name="127773388"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127773388" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127773388">(Jun 08 2018 at 13:58)</a>:</h4>
<p>it's the same math/CS thing</p>



<a name="127773391"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127773391" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127773391">(Jun 08 2018 at 13:58)</a>:</h4>
<p>it's just like dividing by zero</p>



<a name="127773393"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127773393" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127773393">(Jun 08 2018 at 13:58)</a>:</h4>
<p>Is that even a CS thing?</p>



<a name="127773396"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127773396" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127773396">(Jun 08 2018 at 13:58)</a>:</h4>
<p>yes</p>



<a name="127773400"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127773400" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127773400">(Jun 08 2018 at 13:59)</a>:</h4>
<p>nobody divides by zero except CS people</p>



<a name="127773404"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127773404" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127773404">(Jun 08 2018 at 13:59)</a>:</h4>
<p>oh</p>



<a name="127773405"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127773405" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127773405">(Jun 08 2018 at 13:59)</a>:</h4>
<p>maybe applied mathematicians do</p>



<a name="127773407"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127773407" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127773407">(Jun 08 2018 at 13:59)</a>:</h4>
<p>no not even them</p>



<a name="127773408"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127773408" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127773408">(Jun 08 2018 at 13:59)</a>:</h4>
<p>where's the division by zero</p>



<a name="127773409"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127773409" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127773409">(Jun 08 2018 at 13:59)</a>:</h4>
<p>they only do 0 / 0</p>



<a name="127773413"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127773413" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127773413">(Jun 08 2018 at 13:59)</a>:</h4>
<p>the "division by zero" is when you multiply two sets that are not ideals together</p>



<a name="127773414"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127773414" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127773414">(Jun 08 2018 at 13:59)</a>:</h4>
<p>when nobody in their right mind would do this</p>



<a name="127773415"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127773415" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127773415">(Jun 08 2018 at 13:59)</a>:</h4>
<p>presumably this is exactly what is meant by I^n</p>



<a name="127773416"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127773416" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127773416">(Jun 08 2018 at 13:59)</a>:</h4>
<p>Exactly</p>



<a name="127773470"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127773470" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127773470">(Jun 08 2018 at 14:00)</a>:</h4>
<p>The notion A*B for A,B sets is well defined even if they are not ideals</p>



<a name="127773472"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127773472" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127773472">(Jun 08 2018 at 14:00)</a>:</h4>
<p>It's just a different way of thinking about things. I know exactly why Johan is confused.</p>



<a name="127773485"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127773485" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127773485">(Jun 08 2018 at 14:00)</a>:</h4>
<p>Yes, well-defined and kind-of pointless</p>



<a name="127773486"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127773486" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127773486">(Jun 08 2018 at 14:00)</a>:</h4>
<p>but if you want to restrict to ideals, it makes no difference</p>



<a name="127773487"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127773487" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127773487">(Jun 08 2018 at 14:00)</a>:</h4>
<p>so we don't think of it</p>



<a name="127773488"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127773488" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127773488">(Jun 08 2018 at 14:00)</a>:</h4>
<p>exactly</p>



<a name="127773491"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127773491" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127773491">(Jun 08 2018 at 14:00)</a>:</h4>
<p>and then whenever you apply it, you are probably carrying around a proof that things are ideals</p>



<a name="127773495"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127773495" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127773495">(Jun 08 2018 at 14:00)</a>:</h4>
<p>not at all pointless, the notation is not limited to ring theory</p>



<a name="127773497"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127773497" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127773497">(Jun 08 2018 at 14:00)</a>:</h4>
<p>This is just another instance of this canonical disconnect</p>



<a name="127773503"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127773503" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127773503">(Jun 08 2018 at 14:01)</a>:</h4>
<p>we only define things where we need them</p>



<a name="127773513"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127773513" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127773513">(Jun 08 2018 at 14:01)</a>:</h4>
<p>you over-define and sift later</p>



<a name="127773516"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127773516" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127773516">(Jun 08 2018 at 14:01)</a>:</h4>
<p>it's just cultural</p>



<a name="127773523"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127773523" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127773523">(Jun 08 2018 at 14:01)</a>:</h4>
<p>I'm certain I've seen A - B and A + B and other things as well with weirder sets than ideals</p>



<a name="127773576"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127773576" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127773576">(Jun 08 2018 at 14:02)</a>:</h4>
<p>i.e. "prove C + C = [0, 2] where C is the cantor set"</p>



<a name="127773599"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127773599" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127773599">(Jun 08 2018 at 14:02)</a>:</h4>
<p>0/0 is also well-defined. It is 57.</p>



<a name="127773615"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127773615" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127773615">(Jun 08 2018 at 14:03)</a>:</h4>
<p>but I'm not even stressing this domain of definition, define it on ideals if you want</p>



<a name="127773623"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127773623" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127773623">(Jun 08 2018 at 14:03)</a>:</h4>
<p>you can still define I^n that way</p>



<a name="127773630"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127773630" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127773630">(Jun 08 2018 at 14:04)</a>:</h4>
<p>And <code>A * B</code> for <code>A B : set R</code> has two definitions that make sense. (1) <code>{ a*b | a \in A, b \in B}</code> or (2) <del><code>span { a*b | a \in A, b \in B}</code></del> sorry, I meant <code>span { a*b | a \in span A, b \in span B}</code></p>



<a name="127773673"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127773673" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127773673">(Jun 08 2018 at 14:04)</a>:</h4>
<p>since I^(n+1) = I^n * I and I^0 = B and these are both ideals</p>



<a name="127773680"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127773680" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127773680">(Jun 08 2018 at 14:04)</a>:</h4>
<p>in ring theory you obviously need the second definition</p>



<a name="127773685"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127773685" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127773685">(Jun 08 2018 at 14:04)</a>:</h4>
<p>I would say that (1) is more natural. But for ideals you want (2)</p>



<a name="127773722"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127773722" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127773722">(Jun 08 2018 at 14:05)</a>:</h4>
<p>A question: using the set definition, is <code>span (I*I*I) = span (span (I*I) * I)</code>?</p>



<a name="127773729"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127773729" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127773729">(Jun 08 2018 at 14:05)</a>:</h4>
<p>yes</p>



<a name="127773771"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127773771" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127773771">(Jun 08 2018 at 14:06)</a>:</h4>
<p>Anyway, Kevin, here is <a href="https://github.com/jcommelin/lean-perfectoid-spaces/tree/subring" target="_blank" title="https://github.com/jcommelin/lean-perfectoid-spaces/tree/subring">https://github.com/jcommelin/lean-perfectoid-spaces/tree/subring</a> with <code>is_integrally_closed</code> up to some sorrys in mason-stother.</p>



<a name="127773788"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127773788" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127773788">(Jun 08 2018 at 14:06)</a>:</h4>
<p>A subset B is trivial, to see that B subset A, suffices to show that <code>span(I*I)*I subset I*I*I</code>, and then it follows from distributivity</p>



<a name="127773808"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127773808" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127773808">(Jun 08 2018 at 14:07)</a>:</h4>
<p>Here's another CS-ism: instead of dealing with ideals, generalize to all sets by implicitly taking the span when you need to</p>



<a name="127773872"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127773872" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127773872">(Jun 08 2018 at 14:08)</a>:</h4>
<p>Ok, so we put a semiring structure on <code>set R</code>...</p>



<a name="127773903"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127773903" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127773903">(Jun 08 2018 at 14:09)</a>:</h4>
<p>One problem with doing this generally is that <code>-A</code> is taken in sets</p>



<a name="127773973"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127773973" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127773973">(Jun 08 2018 at 14:10)</a>:</h4>
<p>Hmm, there is no semiring structure actually. Because <code>neg A</code> is <code>span (-A)</code>, and so <code>neg neg A \ne A</code>.</p>



<a name="127773984"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127773984" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127773984">(Jun 08 2018 at 14:11)</a>:</h4>
<p>Unless <code>A</code> is an ideal... but that is a very crazy assumption. (-;</p>



<a name="127774029"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127774029" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127774029">(Jun 08 2018 at 14:12)</a>:</h4>
<p>I think the nice thing to do is to define a class <code>ideals R</code>, just as with <code>opens X</code>.</p>



<a name="127774043"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127774043" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127774043">(Jun 08 2018 at 14:12)</a>:</h4>
<p>And then put the nice structure on <code>ideals R</code>.</p>



<a name="127774051"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127774051" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127774051">(Jun 08 2018 at 14:12)</a>:</h4>
<p>actually if you only want a semiring you don't need neg</p>



<a name="127774056"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127774056" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127774056">(Jun 08 2018 at 14:13)</a>:</h4>
<p>I don't think you have to worry about any cancellation</p>



<a name="127774067"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127774067" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127774067">(Jun 08 2018 at 14:13)</a>:</h4>
<p>but the distributive law fails I think</p>



<a name="127774069"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127774069" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127774069">(Jun 08 2018 at 14:13)</a>:</h4>
<p>Aah, you are right of course</p>



<a name="127774147"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127774147" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127774147">(Jun 08 2018 at 14:14)</a>:</h4>
<p><code>{1, 2}*({1} + {1}) = {2, 4}</code>, <code>{1, 2}*{1} + {1,2}*{1} = {2,3,4}</code></p>



<a name="127774188"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127774188" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127774188">(Jun 08 2018 at 14:15)</a>:</h4>
<p>No, your counterexample fails. Both sides are <code>R</code>.</p>



<a name="127774235"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127774235" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127774235">(Jun 08 2018 at 14:16)</a>:</h4>
<p>And in fact, I think you get a semiring.</p>



<a name="127774259"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127774259" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127774259">(Jun 08 2018 at 14:16)</a>:</h4>
<p>The output of <code>+</code> and <code>*</code> is always an ideal.</p>



<a name="127774283"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127774283" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127774283">(Jun 08 2018 at 14:17)</a>:</h4>
<p><code>A + B</code> is defined as <code>span (span A +' span B)</code>, where <code>+'</code> is the stupid element-wise addition.</p>



<a name="127774288"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127774288" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127774288">(Jun 08 2018 at 14:17)</a>:</h4>
<p>Analogously for <code>*</code>.</p>



<a name="127774346"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127774346" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127774346">(Jun 08 2018 at 14:18)</a>:</h4>
<p>(I agree that my initial definition was wrong. But I had not learnt your CS-ism back then. So I didn't put in enough <code>span</code>s.)</p>



<a name="127774416"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127774416" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127774416">(Jun 08 2018 at 14:21)</a>:</h4>
<p>I think <code>span (A +' B)</code> should suffice?</p>



<a name="127774476"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127774476" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127774476">(Jun 08 2018 at 14:22)</a>:</h4>
<p>My observation is that elementwise addition is non-distributive (although it is associative and commutative if the underlying op is)</p>



<a name="127774499"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127774499" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127774499">(Jun 08 2018 at 14:23)</a>:</h4>
<p>Right, but you want that multiplication and addition of ideals is distributive.</p>



<a name="127774504"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127774504" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127774504">(Jun 08 2018 at 14:23)</a>:</h4>
<p>That is a fact that will someday be in mathlib, I hope.</p>



<a name="127774514"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127774514" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127774514">(Jun 08 2018 at 14:23)</a>:</h4>
<p>So we tweak our definition, and throw in some extra <code>span</code>s.</p>



<a name="127774669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127774669" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127774669">(Jun 08 2018 at 14:26)</a>:</h4>
<p>You don't need the extra spans though, the span in the upgraded addition is sufficient to fix the issues</p>



<a name="127774696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127774696" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127774696">(Jun 08 2018 at 14:27)</a>:</h4>
<p><code>span (A *' span (B +' C)) = span (span (A *' B) +' span (A *' C))</code></p>



<a name="127774957"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127774957" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127774957">(Jun 08 2018 at 14:33)</a>:</h4>
<p>Take <code>A = R</code>, <code>B = {1}</code> and <code>C = {-1}</code>. Then LHS = 0 while RHS = R.</p>



<a name="127780905"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127780905" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127780905">(Jun 08 2018 at 16:34)</a>:</h4>
<p>The main point here is that you should be writing <code>(I : ideal R)</code>, not <code>(I : set R) (h : is_ideal I)</code> or whatever.</p>



<a name="127781504"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127781504" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127781504">(Jun 08 2018 at 16:49)</a>:</h4>
<p>So why do we still write <code>(R : Type) [ring R]</code>? Shouldn't we write <code>R : Ring</code> and <code>G : Group</code> or something like that?</p>



<a name="127781586"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127781586" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127781586">(Jun 08 2018 at 16:51)</a>:</h4>
<p>Or does the difference have to do with whether your class is a <code>Prop</code>?</p>



<a name="127781612"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127781612" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127781612">(Jun 08 2018 at 16:51)</a>:</h4>
<p>So all the <code>is_open</code>s, <code>is_ideal</code>s and <code>is_subring</code>s get gathered into classes <code>opens</code>, <code>ideals</code>, and <code>subrings</code>. But things like rings and groups shouldn't...</p>



<a name="127781677"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127781677" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127781677">(Jun 08 2018 at 16:53)</a>:</h4>
<p>I think in many cases you should also be writing <code>R : Ring</code> etc. Particularly in settings where the only thing you know about <code>R</code> is that it is a ring.</p>



<a name="127781694"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127781694" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127781694">(Jun 08 2018 at 16:53)</a>:</h4>
<p><code>R : Ring</code> might be less convenient when dealing with specific objects. For examples, the real numbers are a ring but they are also a topological space, etc.</p>



<a name="127781772"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127781772" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127781772">(Jun 08 2018 at 16:55)</a>:</h4>
<p>Right</p>



<a name="127781873"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127781873" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127781873">(Jun 08 2018 at 16:57)</a>:</h4>
<p><span class="user-mention" data-user-id="110032">@Reid Barton</span> I think Mario said something along the lines that type inference and coercions don't work together.</p>



<a name="127781959"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127781959" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127781959">(Jun 08 2018 at 16:59)</a>:</h4>
<p>So, suppose you have the following statement <code>instance {R : Type} [ring R] (S: subrings R) : ring S</code>. If you then want to prove <code>instance {R : Type} [comm_ring R] (S: subrings R) : comm_ring S</code> I think you run in to trouble, because now Lean needs to turn <code>S</code> into a <code>Type</code> and also infer that it is a <code>ring</code>.</p>



<a name="127782008"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127782008" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127782008">(Jun 08 2018 at 17:00)</a>:</h4>
<p>And I couldn't just easily prove stuff.</p>



<a name="127782026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/127782026" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#127782026">(Jun 08 2018 at 17:00)</a>:</h4>
<p>(I don't have Lean here atm... so I can't reproduce the exact problem I ran into.</p>



<a name="205655108"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/205655108" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashvni Narayanan <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#205655108">(Aug 01 2020 at 00:29)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">coe_bot</span> <span class="o">:</span> <span class="o">((</span><span class="err">⊥</span> <span class="o">:</span> <span class="n">subring</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span> <span class="n">R</span><span class="o">)</span> <span class="bp">=</span> <span class="n">set</span><span class="bp">.</span><span class="n">range</span> <span class="o">(</span><span class="n">coe</span> <span class="o">:</span> <span class="bp">ℤ</span> <span class="bp">→</span> <span class="n">R</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">cast_ring_hom</span> <span class="n">R</span><span class="o">)</span><span class="bp">.</span><span class="n">coe_set_range</span>
</code></pre></div>


<p>Here, ⊥ is defined to be</p>
<div class="codehilite"><pre><span></span><code><span class="kn">instance</span> <span class="o">:</span> <span class="n">has_bot</span> <span class="o">(</span><span class="n">subring</span> <span class="n">R</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">⟨</span><span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">cast_ring_hom</span> <span class="n">R</span><span class="o">)</span><span class="bp">.</span><span class="n">set_range</span><span class="bp">⟩</span>
</code></pre></div>


<p>The proof of the above lemma gives the error : </p>
<div class="codehilite"><pre><span></span><code><span class="n">type</span> <span class="n">mismatch</span> <span class="n">at</span> <span class="n">application</span>
  <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">cast_ring_hom</span> <span class="n">R</span><span class="o">)</span><span class="bp">.</span><span class="n">coe_set_range</span>
<span class="n">term</span>
  <span class="n">int</span><span class="bp">.</span><span class="n">cast_ring_hom</span> <span class="n">R</span>
<span class="n">has</span> <span class="n">type</span>
  <span class="bp">ℤ</span> <span class="bp">→+*</span> <span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span>
<span class="n">but</span> <span class="n">is</span> <span class="n">expected</span> <span class="n">to</span> <span class="k">have</span> <span class="n">type</span>
  <span class="err">?</span><span class="n">m_1</span> <span class="bp">→+*</span> <span class="err">?</span><span class="n">m_2</span> <span class="o">:</span> <span class="kt">Type</span> <span class="err">?</span>
<span class="n">Additional</span> <span class="n">information</span><span class="o">:</span>
<span class="n">c</span><span class="o">:</span><span class="err">\</span><span class="n">Users</span><span class="err">\</span><span class="n">ashvn</span><span class="err">\</span><span class="n">my_project</span><span class="err">\</span><span class="n">DVR</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">bundled_subrings_working</span><span class="bp">.</span><span class="n">lean</span><span class="o">:</span> <span class="kn">context</span><span class="o">:</span> <span class="n">switched</span> <span class="n">to</span> <span class="n">simple</span> <span class="n">application</span> <span class="n">elaboration</span> <span class="n">procedure</span> <span class="n">because</span> <span class="n">failed</span> <span class="n">to</span> <span class="n">use</span> <span class="n">expected</span> <span class="n">type</span> <span class="n">to</span> <span class="n">elaborate</span> <span class="n">it</span><span class="o">,</span> <span class="n">error</span> <span class="n">message</span>
  <span class="n">type</span> <span class="n">mismatch</span> <span class="n">at</span> <span class="n">application</span>
    <span class="o">(</span><span class="n">int</span><span class="bp">.</span><span class="n">cast_ring_hom</span> <span class="n">R</span><span class="o">)</span><span class="bp">.</span><span class="n">coe_set_range</span>
  <span class="n">term</span>
    <span class="n">int</span><span class="bp">.</span><span class="n">cast_ring_hom</span> <span class="n">R</span>
  <span class="n">has</span> <span class="n">type</span>
    <span class="bp">ℤ</span> <span class="bp">→+*</span> <span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span>
  <span class="n">but</span> <span class="n">is</span> <span class="n">expected</span> <span class="n">to</span> <span class="k">have</span> <span class="n">type</span>
    <span class="err">?</span><span class="n">m_1</span> <span class="bp">→+*</span> <span class="err">?</span><span class="n">m_2</span> <span class="o">:</span> <span class="kt">Type</span> <span class="err">?</span>
</code></pre></div>


<p>The lemma coe_set_range says:</p>
<div class="codehilite"><pre><span></span><code><span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">coe_set_range</span> <span class="o">:</span> <span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">set_range</span> <span class="o">:</span> <span class="n">set</span> <span class="n">S</span><span class="o">)</span> <span class="bp">=</span> <span class="n">set</span><span class="bp">.</span><span class="n">range</span> <span class="n">f</span> <span class="o">:=</span> <span class="n">set</span><span class="bp">.</span><span class="n">image_univ</span>
</code></pre></div>


<p>I don't see why there is a type mismatch error occurs, since both \Z and R are rings. I also don't understand the long error.</p>



<a name="205655270"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/205655270" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#205655270">(Aug 01 2020 at 00:33)</a>:</h4>
<p>Try turning on <code>set_option pp.all true</code>?</p>



<a name="205655692"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/205655692" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashvni Narayanan <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#205655692">(Aug 01 2020 at 00:44)</a>:</h4>
<p>Gives the error: </p>
<div class="codehilite"><pre><span></span><code><span class="n">type</span> <span class="n">mismatch</span> <span class="n">at</span> <span class="n">application</span>
  <span class="bp">@</span><span class="n">ring_hom</span><span class="bp">.</span><span class="n">coe_set_range</span><span class="bp">.</span><span class="o">{</span><span class="err">?</span><span class="n">l_1</span><span class="o">}</span> <span class="err">?</span><span class="n">m_2</span> <span class="err">?</span><span class="n">m_3</span> <span class="err">?</span><span class="n">m_4</span> <span class="err">?</span><span class="n">m_5</span> <span class="o">(</span><span class="bp">@</span><span class="n">int</span><span class="bp">.</span><span class="n">cast_ring_hom</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="n">R</span> <span class="bp">_</span><span class="n">inst_1</span><span class="o">)</span>
<span class="n">term</span>
  <span class="bp">@</span><span class="n">int</span><span class="bp">.</span><span class="n">cast_ring_hom</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="n">R</span> <span class="bp">_</span><span class="n">inst_1</span>
<span class="n">has</span> <span class="n">type</span>
  <span class="bp">@</span><span class="n">ring_hom</span><span class="bp">.</span><span class="o">{</span><span class="mi">0</span> <span class="n">u</span><span class="o">}</span> <span class="n">int</span> <span class="n">R</span> <span class="n">int</span><span class="bp">.</span><span class="n">semiring</span> <span class="o">(</span><span class="bp">@</span><span class="n">ring</span><span class="bp">.</span><span class="n">to_semiring</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="n">R</span> <span class="bp">_</span><span class="n">inst_1</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span>
<span class="n">but</span> <span class="n">is</span> <span class="n">expected</span> <span class="n">to</span> <span class="k">have</span> <span class="n">type</span>
  <span class="bp">@</span><span class="n">ring_hom</span><span class="bp">.</span><span class="o">{</span><span class="err">?</span><span class="n">l_1</span> <span class="err">?</span><span class="n">l_1</span><span class="o">}</span> <span class="err">?</span><span class="n">m_2</span> <span class="err">?</span><span class="n">m_3</span> <span class="o">(</span><span class="bp">@</span><span class="n">ring</span><span class="bp">.</span><span class="n">to_semiring</span><span class="bp">.</span><span class="o">{</span><span class="err">?</span><span class="n">l_1</span><span class="o">}</span> <span class="err">?</span><span class="n">m_2</span> <span class="err">?</span><span class="n">m_4</span><span class="o">)</span> <span class="o">(</span><span class="bp">@</span><span class="n">ring</span><span class="bp">.</span><span class="n">to_semiring</span><span class="bp">.</span><span class="o">{</span><span class="err">?</span><span class="n">l_1</span><span class="o">}</span> <span class="err">?</span><span class="n">m_3</span> <span class="err">?</span><span class="n">m_5</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Type</span> <span class="err">?</span><span class="n">l_1</span>
<span class="n">Additional</span> <span class="n">information</span><span class="o">:</span>
<span class="n">c</span><span class="o">:</span><span class="err">\</span><span class="n">Users</span><span class="err">\</span><span class="n">ashvn</span><span class="err">\</span><span class="n">my_project</span><span class="err">\</span><span class="n">DVR</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">bundled_subrings_working</span><span class="bp">.</span><span class="n">lean</span><span class="o">:</span> <span class="kn">context</span><span class="o">:</span> <span class="n">switched</span> <span class="n">to</span> <span class="n">simple</span> <span class="n">application</span> <span class="n">elaboration</span> <span class="n">procedure</span> <span class="n">because</span> <span class="n">failed</span> <span class="n">to</span> <span class="n">use</span> <span class="n">expected</span> <span class="n">type</span> <span class="n">to</span> <span class="n">elaborate</span> <span class="n">it</span><span class="o">,</span> <span class="n">error</span> <span class="n">message</span>
  <span class="n">type</span> <span class="n">mismatch</span> <span class="n">at</span> <span class="n">application</span>
    <span class="bp">@</span><span class="n">ring_hom</span><span class="bp">.</span><span class="n">coe_set_range</span><span class="bp">.</span><span class="o">{</span><span class="err">?</span><span class="n">l_1</span><span class="o">}</span> <span class="err">?</span><span class="n">m_2</span> <span class="err">?</span><span class="n">m_3</span> <span class="err">?</span><span class="n">m_4</span> <span class="err">?</span><span class="n">m_5</span> <span class="o">(</span><span class="bp">@</span><span class="n">int</span><span class="bp">.</span><span class="n">cast_ring_hom</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="n">R</span> <span class="bp">_</span><span class="n">inst_1</span><span class="o">)</span>
  <span class="n">term</span>
    <span class="bp">@</span><span class="n">int</span><span class="bp">.</span><span class="n">cast_ring_hom</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="n">R</span> <span class="bp">_</span><span class="n">inst_1</span>
  <span class="n">has</span> <span class="n">type</span>
    <span class="bp">@</span><span class="n">ring_hom</span><span class="bp">.</span><span class="o">{</span><span class="mi">0</span> <span class="n">u</span><span class="o">}</span> <span class="n">int</span> <span class="n">R</span> <span class="n">int</span><span class="bp">.</span><span class="n">semiring</span> <span class="o">(</span><span class="bp">@</span><span class="n">ring</span><span class="bp">.</span><span class="n">to_semiring</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="n">R</span> <span class="bp">_</span><span class="n">inst_1</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span>
  <span class="n">but</span> <span class="n">is</span> <span class="n">expected</span> <span class="n">to</span> <span class="k">have</span> <span class="n">type</span>
    <span class="bp">@</span><span class="n">ring_hom</span><span class="bp">.</span><span class="o">{</span><span class="err">?</span><span class="n">l_1</span> <span class="err">?</span><span class="n">l_1</span><span class="o">}</span> <span class="err">?</span><span class="n">m_2</span> <span class="err">?</span><span class="n">m_3</span> <span class="o">(</span><span class="bp">@</span><span class="n">ring</span><span class="bp">.</span><span class="n">to_semiring</span><span class="bp">.</span><span class="o">{</span><span class="err">?</span><span class="n">l_1</span><span class="o">}</span> <span class="err">?</span><span class="n">m_2</span> <span class="err">?</span><span class="n">m_4</span><span class="o">)</span>
      <span class="o">(</span><span class="bp">@</span><span class="n">ring</span><span class="bp">.</span><span class="n">to_semiring</span><span class="bp">.</span><span class="o">{</span><span class="err">?</span><span class="n">l_1</span><span class="o">}</span> <span class="err">?</span><span class="n">m_3</span> <span class="err">?</span><span class="n">m_5</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Type</span> <span class="err">?</span><span class="n">l_1</span>
</code></pre></div>


<p>It seems to me that the problem is that we have int.semiring instead of int.to_semiring?</p>



<a name="205656042"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/205656042" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#205656042">(Aug 01 2020 at 00:52)</a>:</h4>
<p>Is <code>coe_set_range</code> in mathlib?</p>



<a name="205656049"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/205656049" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#205656049">(Aug 01 2020 at 00:52)</a>:</h4>
<p>It looks like a universe issue</p>



<a name="205656054"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/205656054" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#205656054">(Aug 01 2020 at 00:52)</a>:</h4>
<p><code>@ring_hom.{0 u}</code> versus <code>@ring_hom.{?l_1 ?l_1}</code></p>



<a name="205656055"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/205656055" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashvni Narayanan <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#205656055">(Aug 01 2020 at 00:52)</a>:</h4>
<p>Actually, this is just a copy of </p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">coe_bot</span> <span class="o">:</span> <span class="o">((</span><span class="err">⊥</span> <span class="o">:</span> <span class="n">subsemiring</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span> <span class="n">R</span><span class="o">)</span> <span class="bp">=</span> <span class="n">set</span><span class="bp">.</span><span class="n">range</span> <span class="o">(</span><span class="n">coe</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">R</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">cast_ring_hom</span> <span class="n">R</span><span class="o">)</span><span class="bp">.</span><span class="n">coe_srange</span>
</code></pre></div>


<p>for subrings, so this works for \N, but not for \Z (as a subring)</p>



<a name="205656543"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/205656543" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashvni Narayanan <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#205656543">(Aug 01 2020 at 01:04)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110032">Reid Barton</span> <a href="#narrow/stream/116395-maths/topic/subrings/near/205656042">said</a>:</p>
<blockquote>
<p>Is <code>coe_set_range</code> in mathlib?</p>
</blockquote>
<p>No, the lemma I want to use is defined in the file.</p>



<a name="205657076"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/205657076" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#205657076">(Aug 01 2020 at 01:18)</a>:</h4>
<p>I would assume the <code>variables</code> are set up in a way that causes this universe issue.</p>



<a name="205657250"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/205657250" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashvni Narayanan <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#205657250">(Aug 01 2020 at 01:23)</a>:</h4>
<p>Changing </p>
<div class="codehilite"><pre><span></span><code><span class="kn">variable</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">ring</span> <span class="n">R</span><span class="o">]</span>
</code></pre></div>


<p>to</p>
<div class="codehilite"><pre><span></span><code><span class="kn">variable</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">ring</span> <span class="n">R</span><span class="o">]</span>
</code></pre></div>


<p>solved it, thank you!</p>



<a name="205923961"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/205923961" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashvni Narayanan <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#205923961">(Aug 04 2020 at 15:47)</a>:</h4>
<p>I have a ring R, and a list <code>L : list(list R))</code> . I want to define a list <code>M : list(list R))</code> such that </p>
<div class="codehilite"><pre><span></span><code><span class="o">(</span><span class="n">list</span><span class="bp">.</span><span class="n">map</span> <span class="n">list</span><span class="bp">.</span><span class="n">prod</span> <span class="n">M</span><span class="o">)</span><span class="bp">.</span><span class="n">sum</span> <span class="bp">=</span> <span class="bp">-</span> <span class="o">(</span><span class="n">list</span><span class="bp">.</span><span class="n">map</span> <span class="n">list</span><span class="bp">.</span><span class="n">prod</span> <span class="n">L</span><span class="o">)</span><span class="bp">.</span><span class="n">sum</span>
</code></pre></div>


<p>I think this definition should do it : </p>
<div class="codehilite"><pre><span></span><code>    <span class="k">let</span> <span class="n">M</span> <span class="o">:=</span> <span class="n">list</span><span class="bp">.</span><span class="n">map</span> <span class="o">(</span><span class="n">list</span><span class="bp">.</span><span class="n">map</span> <span class="o">(</span><span class="n">has_neg</span> <span class="o">))</span> <span class="n">L</span><span class="o">,</span>
</code></pre></div>


<p>however, this gives an error</p>
<div class="codehilite"><pre><span></span><code><span class="n">type</span> <span class="n">mismatch</span> <span class="n">at</span> <span class="n">application</span>
  <span class="n">list</span><span class="bp">.</span><span class="n">map</span> <span class="o">(</span><span class="n">list</span><span class="bp">.</span><span class="n">map</span> <span class="n">has_neg</span><span class="o">)</span> <span class="n">L</span>
<span class="n">term</span>
  <span class="n">L</span>
<span class="n">has</span> <span class="n">type</span>
  <span class="n">list</span> <span class="o">(</span><span class="n">list</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span>
<span class="n">but</span> <span class="n">is</span> <span class="n">expected</span> <span class="n">to</span> <span class="k">have</span> <span class="n">type</span>
  <span class="n">list</span> <span class="o">(</span><span class="n">list</span> <span class="o">(</span><span class="kt">Type</span> <span class="err">?</span><span class="o">))</span> <span class="o">:</span> <span class="kt">Type</span> <span class="o">(</span><span class="err">?</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span>
</code></pre></div>


<p>Any help is appreciated, thank you!</p>



<a name="205924450"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/205924450" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#205924450">(Aug 04 2020 at 15:51)</a>:</h4>
<p>Is it because <code>has_neg</code> should be <code>has_neg.neg</code>?</p>



<a name="205924533"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/205924533" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#205924533">(Aug 04 2020 at 15:52)</a>:</h4>
<p>Also, I don't think this would work, since the product of <code>[-1,-2]</code> is not the negative of the product of <code>[1,2]</code>.</p>



<a name="205924623"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/205924623" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#205924623">(Aug 04 2020 at 15:53)</a>:</h4>
<p>But it's possible I'm misunderstanding what you're trying to do here...</p>



<a name="205927514"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/205927514" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#205927514">(Aug 04 2020 at 16:17)</a>:</h4>
<p>This is a difficult question, since list.prod evaluates the empty list to 1.</p>



<a name="205927721"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/205927721" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#205927721">(Aug 04 2020 at 16:18)</a>:</h4>
<p>How you you define this for, say, the following list of lists: <code>[[],[]]</code>?</p>



<a name="205928954"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/205928954" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#205928954">(Aug 04 2020 at 16:30)</a>:</h4>
<p><code>(list.map list.prod L).sum</code> when evaluated at <code>[[1,2],[3,4]]</code> is ([2,12]).sum which is 14. If you negate everything you still get 14.</p>



<a name="205929017"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/205929017" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#205929017">(Aug 04 2020 at 16:31)</a>:</h4>
<p>Yeah, so it seems you want to only negate the head of each list, but then the empty lists cause issues.</p>



<a name="205929247"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/205929247" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#205929247">(Aug 04 2020 at 16:33)</a>:</h4>
<p>I think you want to define a function like this:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra</span>

<span class="n">def</span> <span class="n">helper</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span> <span class="n">list</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">list</span> <span class="n">α</span>
<span class="bp">|</span> <span class="o">[]</span> <span class="o">:=</span> <span class="o">[</span><span class="bp">-</span><span class="mi">1</span><span class="o">]</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">a</span> <span class="bp">::</span> <span class="n">as</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">-</span><span class="n">a</span> <span class="bp">::</span> <span class="n">as</span>
</code></pre></div>


<p>and map using that.</p>



<a name="205965897"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/205965897" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashvni Narayanan <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#205965897">(Aug 04 2020 at 21:57)</a>:</h4>
<p>I defined </p>
<div class="codehilite"><pre><span></span><code>  <span class="k">let</span> <span class="n">M</span> <span class="o">:=</span> <span class="n">list</span><span class="bp">.</span><span class="n">map</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span><span class="n">list</span> <span class="n">R</span><span class="o">),</span> <span class="o">(</span><span class="n">list</span><span class="bp">.</span><span class="n">cons</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="n">b</span><span class="o">))</span> <span class="n">L</span><span class="o">,</span>
</code></pre></div>


<p>and it seems to work. I believe it is equivalent to the definition you gave?<br>
Thank you!</p>



<a name="205965929"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/205965929" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#205965929">(Aug 04 2020 at 21:57)</a>:</h4>
<p>It's a bit different, but it also works.</p>



<a name="205965973"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/205965973" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#205965973">(Aug 04 2020 at 21:58)</a>:</h4>
<p>That should certainly work. What are you doing though?</p>



<a name="205966298"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/205966298" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashvni Narayanan <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#205966298">(Aug 04 2020 at 22:01)</a>:</h4>
<p>I was trying to prove this (got from the <code>subsemiring</code> file) : </p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">mem_closure_iff_exists_list</span> <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">R</span><span class="o">}</span> <span class="o">{</span><span class="n">x</span><span class="o">}</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">closure</span> <span class="n">s</span> <span class="bp">↔</span>
  <span class="bp">∃</span> <span class="n">L</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">list</span> <span class="n">R</span><span class="o">),</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">t</span> <span class="err">∈</span> <span class="n">L</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">t</span><span class="o">,</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">s</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">L</span><span class="bp">.</span><span class="n">map</span> <span class="n">list</span><span class="bp">.</span><span class="n">prod</span><span class="o">)</span><span class="bp">.</span><span class="n">sum</span> <span class="bp">=</span> <span class="n">x</span> <span class="o">:=</span>
</code></pre></div>


<p>After struggling with the negation case for a while, I found this in the <code>is_subring</code> file :</p>
<div class="codehilite"><pre><span></span><code><span class="kn">theorem</span> <span class="n">exists_list_of_mem_closure</span> <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">R</span><span class="o">}</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">R</span><span class="o">}</span> <span class="o">(</span><span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">closure</span> <span class="n">s</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">∃</span> <span class="n">L</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">list</span> <span class="n">R</span><span class="o">),</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">t</span> <span class="err">∈</span> <span class="n">L</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">t</span><span class="o">,</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">s</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span><span class="o">:</span><span class="n">R</span><span class="o">))</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">L</span><span class="bp">.</span><span class="n">map</span> <span class="n">list</span><span class="bp">.</span><span class="n">prod</span><span class="o">)</span><span class="bp">.</span><span class="n">sum</span> <span class="bp">=</span> <span class="n">x</span><span class="o">)</span> <span class="o">:=</span>
</code></pre></div>


<p>The proof is similar, so I am currently working the proof around.</p>



<a name="205966448"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/205966448" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#205966448">(Aug 04 2020 at 22:02)</a>:</h4>
<p>Then your suggestion looks perfect!</p>



<a name="205966471"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/205966471" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#205966471">(Aug 04 2020 at 22:02)</a>:</h4>
<p>Because -1 is in your ring</p>



<a name="205966525"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/205966525" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#205966525">(Aug 04 2020 at 22:03)</a>:</h4>
<p>The lemma as it stands without allowing -1 is false</p>



<a name="205966545"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/205966545" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#205966545">(Aug 04 2020 at 22:03)</a>:</h4>
<p>Yeah I'm confused</p>



<a name="205966619"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/205966619" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashvni Narayanan <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#205966619">(Aug 04 2020 at 22:04)</a>:</h4>
<p>Yes exactly, I realised that only after trying the negation case for very long</p>



<a name="205966746"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/205966746" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#205966746">(Aug 04 2020 at 22:05)</a>:</h4>
<p>Since <code>exists_list_of_mem_closure</code> already exists, what are you trying to prove? A corresponding statement for semirings? i.e. what is <code>R</code>?</p>



<a name="205966909"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/205966909" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#205966909">(Aug 04 2020 at 22:07)</a>:</h4>
<p>oh <code>mem_closure_iff_exists_list</code> also already exists, so now I'm doubly confused</p>



<a name="205966935"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/205966935" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#205966935">(Aug 04 2020 at 22:07)</a>:</h4>
<p>You're trying to prove <code>mem_closure_iff_exists_list</code> even though mathlib already has a proof?</p>



<a name="205967143"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/205967143" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#205967143">(Aug 04 2020 at 22:09)</a>:</h4>
<p>We're bundling subrings. It existed for <code>is_subring</code>.</p>



<a name="205967371"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/205967371" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashvni Narayanan <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#205967371">(Aug 04 2020 at 22:12)</a>:</h4>
<p>I am trying to adapt <code>exists_list_of_mem_closure</code> for bundled subrings, the definition of closure is somewhat different, and the existing proof breaks, because it uses something from <code>deprecated.subgroups</code>.</p>



<a name="205967563"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/subrings/near/205967563" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/subrings.html#205967563">(Aug 04 2020 at 22:14)</a>:</h4>
<p>I see</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>