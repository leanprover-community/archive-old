---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/lint.20test.20optimization.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lint.20test.20optimization.html">lint test optimization</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="260402757"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lint%20test%20optimization/near/260402757" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lint.20test.20optimization.html#260402757">(Nov 05 2021 at 13:11)</a>:</h4>
<p>Do you guys think it's worth it to try to optimize <a href="https://github.com/leanprover-community/mathlib/runs/4116713427?check_suite_focus=true">lint tests</a> by using the result of the previous test and a <code>git diff</code> to see what has changed since then? They're taking ~28 minutes per commit and tend to get larger and larger as mathlib grows and more and more frequent as more people join us</p>



<a name="260402952"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lint%20test%20optimization/near/260402952" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lint.20test.20optimization.html#260402952">(Nov 05 2021 at 13:13)</a>:</h4>
<p>The simplifier linters (like <code>simp_nf</code>) take almost all of the time, and they are "global" linters. That means that a change to declaration <code>A</code> can cause the linter to fail for declaration <code>B</code></p>



<a name="260402969"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lint%20test%20optimization/near/260402969" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lint.20test.20optimization.html#260402969">(Nov 05 2021 at 13:13)</a>:</h4>
<p>Are you asking for this for faster turn around time to confirm the validity of a commit? Some linters are file-local, thru are solely syntactic. Those are the ones that run first. The linters you're asking about are global linters, like checking if some simp lemma is stated in a form that another upstream simp lemma would simp away.</p>



<a name="260403051"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lint%20test%20optimization/near/260403051" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lint.20test.20optimization.html#260403051">(Nov 05 2021 at 13:14)</a>:</h4>
<p>From your diff, you'd have to reconstruct the whole available environment of declarations.</p>



<a name="260403283"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lint%20test%20optimization/near/260403283" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Arthur Paulino <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lint.20test.20optimization.html#260403283">(Nov 05 2021 at 13:16)</a>:</h4>
<blockquote>
<p>Are you asking for this for faster turn around time to confirm the validity of a commit?</p>
</blockquote>
<p>Not exactly... I'm just wondering if we could lower the computational cost of the process</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>