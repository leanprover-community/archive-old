---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/Sheaf.20condition.20for.20type-valued.20sheaf.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Sheaf.20condition.20for.20type-valued.20sheaf.html">Sheaf condition for type-valued sheaf</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="231949255"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Sheaf%20condition%20for%20type-valued%20sheaf/near/231949255" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Justus Springer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Sheaf.20condition.20for.20type-valued.20sheaf.html#231949255">(Mar 26 2021 at 11:29)</a>:</h4>
<p>So in <code>topology/sheaves/sheaf_condition</code> there are currently three equivalent formulations of the sheaf condition, all of which are stated for a sheaf valued in an arbitrary category. When working with type-valued sheaves, I find myself wanting a more explicit formulation, i.e. that for some family of open sets <code>U : ι → opens X</code>, every compatible family of sections <code>s : Π i : ι, F.obj (op (U i))</code> admits a unique gluing <code>t : F.obj (op (supr U))</code>. In particular I want to conclude that if two sections <code>s t : F.obj (op V)</code> agree locally on an open cover, they must already be equal. Is there a straight-forward way to obtain this fact from the categorical definition of the sheaf condition? The most promising lemma I found in the library is <code>unique_of_type_equalizer</code> in <code>category_theory/limits/shapes/types.lean</code>, which gives an explicit construction of equalizers in the category of types. Would this be the way to go?</p>
<p>Follow-up question: Would an API for the sheaf condition of type-valued sheaves, which proves the facts from above, be desirable?</p>



<a name="231949441"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Sheaf%20condition%20for%20type-valued%20sheaf/near/231949441" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Sheaf.20condition.20for.20type-valued.20sheaf.html#231949441">(Mar 26 2021 at 11:31)</a>:</h4>
<p>I think <a href="https://github.com/leanprover-community/mathlib/blob/master/src/topology/sheaves/local_predicate.lean">https://github.com/leanprover-community/mathlib/blob/master/src/topology/sheaves/local_predicate.lean</a> was designed for working with "hands-on" sheaves</p>



<a name="231949509"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Sheaf%20condition%20for%20type-valued%20sheaf/near/231949509" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Sheaf.20condition.20for.20type-valued.20sheaf.html#231949509">(Mar 26 2021 at 11:32)</a>:</h4>
<p>But I forgot to what extent we know that all the different sheaf conditions can be swapped in and out for eachother</p>



<a name="231949680"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Sheaf%20condition%20for%20type-valued%20sheaf/near/231949680" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Justus Springer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Sheaf.20condition.20for.20type-valued.20sheaf.html#231949680">(Mar 26 2021 at 11:33)</a>:</h4>
<p><code>local_predicate.lean</code> only talks about sheaves of functions, no?</p>



<a name="231950232"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Sheaf%20condition%20for%20type-valued%20sheaf/near/231950232" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Sheaf.20condition.20for.20type-valued.20sheaf.html#231950232">(Mar 26 2021 at 11:38)</a>:</h4>
<p>Yes, I don't think <code>local_predicate.lean</code> is what you want.</p>



<a name="231950290"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Sheaf%20condition%20for%20type-valued%20sheaf/near/231950290" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Sheaf.20condition.20for.20type-valued.20sheaf.html#231950290">(Mar 26 2021 at 11:39)</a>:</h4>
<p>The sheaf conditions in <code>topology/sheaves/sheaf_condition</code> are all proved equivalent. (We have yet more sheaf conditions for sheaves on a site, and I think they are still disconnected from the earlier development of sheaves on a space, however.)</p>



<a name="231950331"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Sheaf%20condition%20for%20type-valued%20sheaf/near/231950331" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Sheaf.20condition.20for.20type-valued.20sheaf.html#231950331">(Mar 26 2021 at 11:39)</a>:</h4>
<p>I suspect that what you want, <span class="user-mention" data-user-id="384542">@Justus Springer</span>, is not actually there yet. This part of the library is pretty new!</p>



<a name="231951072"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Sheaf%20condition%20for%20type-valued%20sheaf/near/231951072" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Sheaf.20condition.20for.20type-valued.20sheaf.html#231951072">(Mar 26 2021 at 11:46)</a>:</h4>
<p>Oh, sorry, I think I misspoke about <code>local_predicate.lean</code>. Maybe Johan meant you should use it along with something in <code>sheafify</code> to reduce to the case of dependently typed functions.</p>



<a name="231951785"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Sheaf%20condition%20for%20type-valued%20sheaf/near/231951785" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Sheaf.20condition.20for.20type-valued.20sheaf.html#231951785">(Mar 26 2021 at 11:54)</a>:</h4>
<p>Fix some type family <code>Z : X \to Type*</code>, and assume your sheaf <code>F</code> is any subsheaf of the sheaf of sections of this family. Then your statement is obviously true. Now, we construct sheafification of a presheaf <code>F</code> as follows. Let <code>Z</code> be the stalks of <code>F</code>. The sheafification of <code>F</code> is the sheaf of sections of <code>Z</code> which are locally germs. This ... means that the statement is true for any sheaf, because it is the same as its sheafification?</p>
<p>(I have no idea if that argument is even true, let alone if it is easy to formalise given what we have... 90% of my knowledge of sheaves came from writing those files...)</p>



<a name="231952203"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Sheaf%20condition%20for%20type-valued%20sheaf/near/231952203" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Sheaf.20condition.20for.20type-valued.20sheaf.html#231952203">(Mar 26 2021 at 11:59)</a>:</h4>
<p>Okay, forget that argument for a bit.</p>
<p>I don't think you need anything about <code>unique_of_type_equalizer</code>. You are just using that <code>equalizer.\iota</code> is a mono, in the equalizer diagram for the sheaf condition.</p>



<a name="231954233"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Sheaf%20condition%20for%20type-valued%20sheaf/near/231954233" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Justus Springer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Sheaf.20condition.20for.20type-valued.20sheaf.html#231954233">(Mar 26 2021 at 12:17)</a>:</h4>
<p>Thanks for the input! I'm going to keep experimenting and maybe PR something soon.</p>



<a name="231954450"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Sheaf%20condition%20for%20type-valued%20sheaf/near/231954450" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Sheaf.20condition.20for.20type-valued.20sheaf.html#231954450">(Mar 26 2021 at 12:19)</a>:</h4>
<div class="spoiler-block"><div class="spoiler-header">
</div><div class="spoiler-content" aria-hidden="true">
<p>import topology.sheaves.sheaf<br>
import category_theory.limits.types</p>
<p>open Top<br>
open topological_space<br>
open opposite<br>
open category_theory<br>
open category_theory.limits</p>
<p>universes u</p>
<p>variables (X : Top.{u})<br>
variables (F : sheaf (Type u) X)<br>
variables {ι : Type u} (U : ι → opens X)</p>
<p>lemma ext {f g : F.presheaf.obj (op (supr U))} <br>
  (w : ∀ i, <a href="http://F.presheaf.map">F.presheaf.map</a> (opens.le_supr U i).op f = <a href="http://F.presheaf.map">F.presheaf.map</a> (opens.le_supr U i).op g ) : <br>
  f = g :=<br>
begin<br>
  have := mono_of_is_limit_parallel_pair (F.sheaf_condition U),<br>
  have := (mono_iff_injective _).mp this,<br>
  apply this,<br>
  ext,<br>
  dsimp [presheaf.sheaf_condition_equalizer_products.res],<br>
  simp,<br>
  apply w,<br>
end</p>
</div></div>



<a name="231954454"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Sheaf%20condition%20for%20type-valued%20sheaf/near/231954454" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Justus Springer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Sheaf.20condition.20for.20type-valued.20sheaf.html#231954454">(Mar 26 2021 at 12:19)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110087">Scott Morrison</span> <a href="#narrow/stream/116395-maths/topic/Sheaf.20condition.20for.20type-valued.20sheaf/near/231952203">said</a>:</p>
<blockquote>
<p>You are just using that <code>equalizer.\iota</code> is a mono</p>
</blockquote>
<p>Right, this would also be an option, however this only gives me uniqueness of a gluing, but not existence I think.</p>



<a name="231954529"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Sheaf%20condition%20for%20type-valued%20sheaf/near/231954529" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Sheaf.20condition.20for.20type-valued.20sheaf.html#231954529">(Mar 26 2021 at 12:20)</a>:</h4>
<p>Ah, I was answering directly "In particular I want to conclude that if two sections s t : F.obj (op V) agree locally on an open cover, they must already be equal."</p>



<a name="231954541"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Sheaf%20condition%20for%20type-valued%20sheaf/near/231954541" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Sheaf.20condition.20for.20type-valued.20sheaf.html#231954541">(Mar 26 2021 at 12:20)</a>:</h4>
<p>(This is done in the spoiler block above.)</p>



<a name="231954610"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Sheaf%20condition%20for%20type-valued%20sheaf/near/231954610" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Justus Springer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Sheaf.20condition.20for.20type-valued.20sheaf.html#231954610">(Mar 26 2021 at 12:20)</a>:</h4>
<p>True, for that it would suffice</p>



<a name="231954632"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Sheaf%20condition%20for%20type-valued%20sheaf/near/231954632" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Justus Springer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Sheaf.20condition.20for.20type-valued.20sheaf.html#231954632">(Mar 26 2021 at 12:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110087">Scott Morrison</span> <a href="#narrow/stream/116395-maths/topic/Sheaf.20condition.20for.20type-valued.20sheaf/near/231954541">said</a>:</p>
<blockquote>
<p>(This is done in the spoiler block above.)</p>
</blockquote>
<p>Oh thanks a lot!</p>



<a name="231954661"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Sheaf%20condition%20for%20type-valued%20sheaf/near/231954661" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Sheaf.20condition.20for.20type-valued.20sheaf.html#231954661">(Mar 26 2021 at 12:21)</a>:</h4>
<p>I better sleep. Have fun, looking forward to the PRs!</p>



<a name="231956362"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Sheaf%20condition%20for%20type-valued%20sheaf/near/231956362" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Sheaf.20condition.20for.20type-valued.20sheaf.html#231956362">(Mar 26 2021 at 12:36)</a>:</h4>
<p>I think this formulation is given by the definition of the sheaf condition in category_theory/sites/sheaf</p>



<a name="231961278"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Sheaf%20condition%20for%20type-valued%20sheaf/near/231961278" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Justus Springer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Sheaf.20condition.20for.20type-valued.20sheaf.html#231961278">(Mar 26 2021 at 13:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="246273">Bhavik Mehta</span> <a href="#narrow/stream/116395-maths/topic/Sheaf.20condition.20for.20type-valued.20sheaf/near/231956362">said</a>:</p>
<blockquote>
<p>I think this formulation is given by the definition of the sheaf condition in category_theory/sites/sheaf</p>
</blockquote>
<p>I don't know much about sheaves on sites/topoi unfortunately, so this seems like even more categorical overhead to me...</p>



<a name="231961530"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Sheaf%20condition%20for%20type-valued%20sheaf/near/231961530" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Justus Springer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Sheaf.20condition.20for.20type-valued.20sheaf.html#231961530">(Mar 26 2021 at 13:14)</a>:</h4>
<p>Can sheaves on spaces be easily subsumed by this more general framework?</p>



<a name="231962419"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Sheaf%20condition%20for%20type-valued%20sheaf/near/231962419" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Sheaf.20condition.20for.20type-valued.20sheaf.html#231962419">(Mar 26 2021 at 13:20)</a>:</h4>
<p>Right -- given a top space you can make a site, and a sheaf on the space is the same thing as a sheaf on the site.</p>



<a name="231963502"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Sheaf%20condition%20for%20type-valued%20sheaf/near/231963502" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Sheaf.20condition.20for.20type-valued.20sheaf.html#231963502">(Mar 26 2021 at 13:27)</a>:</h4>
<p>On paper...<br>
In Lean, they are different beasts, and so you will need to work your way through an equivalence of categories <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span></p>



<a name="231976702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Sheaf%20condition%20for%20type-valued%20sheaf/near/231976702" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Sheaf.20condition.20for.20type-valued.20sheaf.html#231976702">(Mar 26 2021 at 14:45)</a>:</h4>
<p>Right - it's on my todo list to make the passage between the two smoother</p>



<a name="232569270"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Sheaf%20condition%20for%20type-valued%20sheaf/near/232569270" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Sheaf.20condition.20for.20type-valued.20sheaf.html#232569270">(Mar 31 2021 at 10:44)</a>:</h4>
<p><span class="user-mention" data-user-id="384542">@Justus Springer</span>, thanks for that pair of PRs. They look really nice, and much better than what we have at the moment.</p>



<a name="232572564"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Sheaf%20condition%20for%20type-valued%20sheaf/near/232572564" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Justus Springer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Sheaf.20condition.20for.20type-valued.20sheaf.html#232572564">(Mar 31 2021 at 11:15)</a>:</h4>
<p>Thanks a lot!<br>
I'm now learning more about sites, so I might be able to help building the bridges between sheaves on spaces and sheaves on sites in the future.</p>



<a name="232573338"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Sheaf%20condition%20for%20type-valued%20sheaf/near/232573338" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Justus Springer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Sheaf.20condition.20for.20type-valued.20sheaf.html#232573338">(Mar 31 2021 at 11:22)</a>:</h4>
<p>By the way, is <a href="https://github.com/leanprover-community/mathlib/issues/5927">#5927</a> still being developed <span class="user-mention" data-user-id="246273">@Bhavik Mehta</span> ?</p>



<a name="232578908"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Sheaf%20condition%20for%20type-valued%20sheaf/near/232578908" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Sheaf.20condition.20for.20type-valued.20sheaf.html#232578908">(Mar 31 2021 at 12:11)</a>:</h4>
<p>I think the changes there were mostly just about names and docs which I just haven't got around to fixing yet!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>