---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/Determinant.20of.20adjugate.20matrix.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Determinant.20of.20adjugate.20matrix.html">Determinant of adjugate matrix</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="258932123"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Determinant%20of%20adjugate%20matrix/near/258932123" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Determinant.20of.20adjugate.20matrix.html#258932123">(Oct 25 2021 at 08:57)</a>:</h4>
<p>I'd like to show that <code>(adjugate A).det = A.det ^ (fintype.card n - 1)</code>. Right now we only have <a href="https://leanprover-community.github.io/mathlib_docs/find/matrix.det_adjugate_of_cancel">docs#matrix.det_adjugate_of_cancel</a>, but this assumes cancellation is possible which seems unnecessary as both sides of the statement are just sums of products.</p>
<p>Am I correct in assuming this is true without that assumption? I was hoping the lemmas in <a href="https://github.com/leanprover-community/mathlib/issues/9947">#9947</a> would help with showing this, but I can't think of a proof strategy that doesn't involve unfolding <code>matrix.det</code> and doing some painful sum manipulation.</p>



<a name="258933224"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Determinant%20of%20adjugate%20matrix/near/258933224" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Wärn <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Determinant.20of.20adjugate.20matrix.html#258933224">(Oct 25 2021 at 09:08)</a>:</h4>
<p>There's a trick to proving this, where you consider the 'generic <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>×</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">n \times n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span>-matrix' with coefficients in the polynomial ring over <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">Z</mi></mrow><annotation encoding="application/x-tex">\mathbb Z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord mathbb">Z</span></span></span></span> in <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>n</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">n^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span> variables. Its determinant is non-zero, hence cancellable, so the mathlib lemma applies. Now any <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>×</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">n \times n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span>-matrix over any ring is the image of this generic matrix under some ring hom, so by some naturality lemmas the theorem holds for any matrix.</p>



<a name="258933395"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Determinant%20of%20adjugate%20matrix/near/258933395" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Determinant.20of.20adjugate.20matrix.html#258933395">(Oct 25 2021 at 09:10)</a>:</h4>
<p>That's a formal approach to my "both sides of the statement are just sums of products." hand-wave, right?</p>



<a name="258933771"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Determinant%20of%20adjugate%20matrix/near/258933771" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Determinant.20of.20adjugate.20matrix.html#258933771">(Oct 25 2021 at 09:14)</a>:</h4>
<p>Unfortunately <code>mv_polynomial</code> isn't available to import yet where I want to generalize this lemma</p>



<a name="258933845"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Determinant%20of%20adjugate%20matrix/near/258933845" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Determinant.20of.20adjugate.20matrix.html#258933845">(Oct 25 2021 at 09:15)</a>:</h4>
<p>But I assume you mean something like showing <code>∃ (A' : matrix n n (mv_polynomial ℤ (n × n))) (f : mv_polynomial ℤ (n × n) →+* α), A = A'.map f</code></p>



<a name="258934116"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Determinant%20of%20adjugate%20matrix/near/258934116" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Determinant.20of.20adjugate.20matrix.html#258934116">(Oct 25 2021 at 09:17)</a>:</h4>
<p>Or possibly</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">∃</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">mv_polynomial</span> <span class="n">ℤ</span> <span class="o">(</span><span class="n">n</span> <span class="bp">×</span> <span class="n">n</span><span class="o">)</span> <span class="bp">→+*</span> <span class="n">α</span><span class="o">),</span> <span class="n">A</span> <span class="bp">=</span> <span class="o">((</span><span class="n">prod.mk</span> <span class="o">:</span> <span class="n">matrix</span> <span class="n">n</span> <span class="n">n</span> <span class="o">(</span><span class="n">n</span> <span class="bp">×</span> <span class="n">n</span><span class="o">))</span><span class="bp">.</span><span class="n">map</span> <span class="n">X</span><span class="o">)</span><span class="bp">.</span><span class="n">map</span> <span class="n">f</span>
</code></pre></div>



<a name="258934754"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Determinant%20of%20adjugate%20matrix/near/258934754" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Wärn <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Determinant.20of.20adjugate.20matrix.html#258934754">(Oct 25 2021 at 09:24)</a>:</h4>
<p>That looks about right. You'd need to know that <code>A'.det</code> is nonzero, and that the polynomial ring is an integral domain. And you could write down the ring hom <code>f</code> explicitly (it maps the variables to entries of <code>A</code>)</p>



<a name="258935581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Determinant%20of%20adjugate%20matrix/near/258935581" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Determinant.20of.20adjugate.20matrix.html#258935581">(Oct 25 2021 at 09:33)</a>:</h4>
<p>Will be back shortly with a few sorries...</p>



<a name="258936568"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Determinant%20of%20adjugate%20matrix/near/258936568" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Determinant.20of.20adjugate.20matrix.html#258936568">(Oct 25 2021 at 09:43)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">det_adjugate'</span> <span class="o">{</span><span class="n">A</span> <span class="o">:</span> <span class="n">matrix</span> <span class="n">n</span> <span class="n">n</span> <span class="n">α</span><span class="o">}</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">adjugate</span> <span class="n">A</span><span class="o">)</span><span class="bp">.</span><span class="n">det</span> <span class="bp">=</span> <span class="n">A.det</span> <span class="bp">^</span> <span class="o">(</span><span class="n">fintype.card</span> <span class="n">n</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="c1">-- get rid of the `- 1`</span>
  <span class="n">cases</span> <span class="n">h_card</span> <span class="o">:</span> <span class="n">fintype.card</span> <span class="n">n</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">haveI</span> <span class="o">:</span> <span class="n">is_empty</span> <span class="n">n</span> <span class="o">:=</span> <span class="n">fintype.card_eq_zero_iff.mp</span> <span class="n">h_card</span><span class="o">,</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">nat.zero_sub</span><span class="o">,</span> <span class="n">pow_zero</span><span class="o">,</span> <span class="n">adjugate_subsingleton</span><span class="o">,</span> <span class="n">det_one</span><span class="o">]</span> <span class="o">},</span>
  <span class="n">rw</span> <span class="bp">←</span><span class="n">h_card</span><span class="o">,</span>

  <span class="c1">-- express `A` as a polynomial in n^2 variables</span>
  <span class="k">let</span> <span class="n">A'</span> <span class="o">:=</span> <span class="o">(</span><span class="n">matrix.map</span> <span class="o">(</span><span class="n">prod.mk</span><span class="o">)</span> <span class="o">(</span><span class="n">mv_polynomial.X</span> <span class="o">:</span> <span class="o">(</span><span class="n">n</span> <span class="bp">×</span> <span class="n">n</span><span class="o">)</span> <span class="bp">→</span> <span class="n">mv_polynomial</span> <span class="n">_</span> <span class="n">ℤ</span><span class="o">)),</span>
  <span class="k">have</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">=</span> <span class="n">ring_hom.map_matrix</span> <span class="o">(</span><span class="n">mv_polynomial.aeval</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">p</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">×</span> <span class="n">n</span><span class="o">,</span> <span class="n">A</span> <span class="n">p.1</span> <span class="n">p.2</span><span class="o">))</span><span class="bp">.</span><span class="n">to_ring_hom</span> <span class="n">A'</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">ext</span> <span class="n">i</span> <span class="n">j</span><span class="o">,</span>
    <span class="n">simp</span> <span class="o">},</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">this</span><span class="o">,</span> <span class="bp">←</span><span class="n">ring_hom.map_adjugate</span><span class="o">,</span> <span class="bp">←</span><span class="n">ring_hom.map_det</span><span class="o">,</span> <span class="bp">←</span><span class="n">ring_hom.map_det</span><span class="o">,</span> <span class="bp">←</span><span class="n">ring_hom.map_pow</span><span class="o">],</span>
  <span class="n">congr'</span> <span class="mi">1</span><span class="o">,</span>

  <span class="n">apply</span> <span class="n">det_adjugate_of_cancel</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">h_card</span><span class="o">,</span> <span class="n">nat.succ_sub_succ_eq_sub</span><span class="o">,</span> <span class="n">nat.sub_zero</span><span class="o">,</span> <span class="n">pow_succ</span><span class="o">],</span>
  <span class="n">intros</span> <span class="n">b</span> <span class="n">hb</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">mul_left_cancel₀</span> <span class="n">_</span> <span class="n">hb</span><span class="o">,</span>
  <span class="k">show</span> <span class="o">(</span><span class="n">map</span> <span class="n">prod.mk</span> <span class="n">mv_polynomial.X</span><span class="o">)</span><span class="bp">.</span><span class="n">det</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">,</span>
  <span class="gr">sorry</span>
<span class="kd">end</span>
</code></pre></div>
<p>(below <a href="https://leanprover-community.github.io/mathlib_docs/find/ring_hom.map_adjugate">docs#ring_hom.map_adjugate</a>)</p>



<a name="258936585"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Determinant%20of%20adjugate%20matrix/near/258936585" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Determinant.20of.20adjugate.20matrix.html#258936585">(Oct 25 2021 at 09:44)</a>:</h4>
<p>So yes, "You'd need to know that A'.det is nonzero" is the missing piece</p>



<a name="258937374"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Determinant%20of%20adjugate%20matrix/near/258937374" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Determinant.20of.20adjugate.20matrix.html#258937374">(Oct 25 2021 at 09:53)</a>:</h4>
<p>Which frankly feels almost as hard as the original</p>



<a name="258937614"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Determinant%20of%20adjugate%20matrix/near/258937614" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Determinant.20of.20adjugate.20matrix.html#258937614">(Oct 25 2021 at 09:56)</a>:</h4>
<p>A'.det has to be nonzero because otherwise, the determinant of every n x n matrix would be zero (same argument)</p>



<a name="258940106"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Determinant%20of%20adjugate%20matrix/near/258940106" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Determinant.20of.20adjugate.20matrix.html#258940106">(Oct 25 2021 at 10:23)</a>:</h4>
<p>Got it, thanks; edited above</p>



<a name="258940153"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Determinant%20of%20adjugate%20matrix/near/258940153" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Determinant.20of.20adjugate.20matrix.html#258940153">(Oct 25 2021 at 10:24)</a>:</h4>
<p>It's unfortunate that <a href="https://tqft.net/mathlib/linear_algebra/matrix/nonsingular_inverse">file#linear_algebra/matrix/nonsingular_inverse</a> will now have to import <a href="https://tqft.net/mathlib/ring_theory/polynomial/basic">file#ring_theory/polynomial/basic</a>, but I guess that's better than not having the proof at all</p>



<a name="258951960"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Determinant%20of%20adjugate%20matrix/near/258951960" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Determinant.20of.20adjugate.20matrix.html#258951960">(Oct 25 2021 at 12:34)</a>:</h4>
<p>I did a similar proof through the polynomial matrix ring for the commutativity of the multiplication of adjugate (in a not necessarily commutative base ring) below in the file.</p>



<a name="258952031"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Determinant%20of%20adjugate%20matrix/near/258952031" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Determinant.20of.20adjugate.20matrix.html#258952031">(Oct 25 2021 at 12:35)</a>:</h4>
<p>Darij Grinberg has great notes on these sorts of proofs.</p>



<a name="258964038"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Determinant%20of%20adjugate%20matrix/near/258964038" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Determinant.20of.20adjugate.20matrix.html#258964038">(Oct 25 2021 at 14:08)</a>:</h4>
<p>They're a basic technique in algebraic geometry. To prove certain kinds of statements for all X, you only have to prove them for the universal X, and the universal X might have nice properties which a general X doesn't have. For example in algebraic geometry the universal X might be flat, or integral (which was what happened here).</p>



<a name="258964381"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Determinant%20of%20adjugate%20matrix/near/258964381" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Determinant.20of.20adjugate.20matrix.html#258964381">(Oct 25 2021 at 14:10)</a>:</h4>
<p>An interesting example where this technique <em>didn't</em> work was Eric's question the other day about whether a and b non-invertible implied ab non-invertible in a not necessarily commutative ring. Then the universal example was a quotient of a non-commuting polynomial ring in two variables by some bi-ideal and seemed hard to work with; it was easier to give a more concrete counterexample.</p>



<a name="258964686"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Determinant%20of%20adjugate%20matrix/near/258964686" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Determinant.20of.20adjugate.20matrix.html#258964686">(Oct 25 2021 at 14:13)</a>:</h4>
<p>An example where it does work well is in Johan and Rob's work on Witt vectors, where p was much better behaved in the universal object than it was in general</p>



<a name="259219082"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Determinant%20of%20adjugate%20matrix/near/259219082" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Determinant.20of.20adjugate.20matrix.html#259219082">(Oct 27 2021 at 10:33)</a>:</h4>
<p>PR'd the above and a similar proof as <a href="https://github.com/leanprover-community/mathlib/issues/9991">#9991</a></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>