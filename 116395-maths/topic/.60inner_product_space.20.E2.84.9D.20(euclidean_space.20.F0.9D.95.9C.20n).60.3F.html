---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/.60inner_product_space.20.E2.84.9D.20(euclidean_space.20.F0.9D.95.9C.20n).60.3F.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.60inner_product_space.20.E2.84.9D.20(euclidean_space.20.F0.9D.95.9C.20n).60.3F.html">`inner_product_space ‚Ñù (euclidean_space ùïú n)`?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="230756908"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%60inner_product_space%20%E2%84%9D%20%28euclidean_space%20%F0%9D%95%9C%20n%29%60%3F/near/230756908" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.60inner_product_space.20.E2.84.9D.20(euclidean_space.20.F0.9D.95.9C.20n).60.3F.html#230756908">(Mar 17 2021 at 20:01)</a>:</h4>
<p>Is it bad to add an instance <code>inner_product_space ‚Ñù (euclidean_space ùïú n) := inner_product_space.is_R_or_C_to_real</code>?</p>



<a name="230756953"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%60inner_product_space%20%E2%84%9D%20%28euclidean_space%20%F0%9D%95%9C%20n%29%60%3F/near/230756953" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.60inner_product_space.20.E2.84.9D.20(euclidean_space.20.F0.9D.95.9C.20n).60.3F.html#230756953">(Mar 17 2021 at 20:01)</a>:</h4>
<p>Or how can I test whether it's bad?</p>



<a name="230757054"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%60inner_product_space%20%E2%84%9D%20%28euclidean_space%20%F0%9D%95%9C%20n%29%60%3F/near/230757054" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.60inner_product_space.20.E2.84.9D.20(euclidean_space.20.F0.9D.95.9C.20n).60.3F.html#230757054">(Mar 17 2021 at 20:02)</a>:</h4>
<p>You mean, assuming <code>[is_R_or_C ùïú]</code>? It shouldn't be bad a priori.</p>



<a name="230757101"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%60inner_product_space%20%E2%84%9D%20%28euclidean_space%20%F0%9D%95%9C%20n%29%60%3F/near/230757101" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.60inner_product_space.20.E2.84.9D.20(euclidean_space.20.F0.9D.95.9C.20n).60.3F.html#230757101">(Mar 17 2021 at 20:02)</a>:</h4>
<p>Yes, assuming <code>[is_R_or_C ùïú]</code></p>



<a name="230757179"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%60inner_product_space%20%E2%84%9D%20%28euclidean_space%20%F0%9D%95%9C%20n%29%60%3F/near/230757179" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.60inner_product_space.20.E2.84.9D.20(euclidean_space.20.F0.9D.95.9C.20n).60.3F.html#230757179">(Mar 17 2021 at 20:03)</a>:</h4>
<p>See notes#is_R_or_C instance</p>



<a name="230757200"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%60inner_product_space%20%E2%84%9D%20%28euclidean_space%20%F0%9D%95%9C%20n%29%60%3F/near/230757200" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.60inner_product_space.20.E2.84.9D.20(euclidean_space.20.F0.9D.95.9C.20n).60.3F.html#230757200">(Mar 17 2021 at 20:03)</a>:</h4>
<p>I mean, <a href="https://leanprover-community.github.io/mathlib_docs/notes.html#is_R_or_C%20instance">https://leanprover-community.github.io/mathlib_docs/notes.html#is_R_or_C%20instance</a></p>



<a name="230757334"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%60inner_product_space%20%E2%84%9D%20%28euclidean_space%20%F0%9D%95%9C%20n%29%60%3F/near/230757334" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.60inner_product_space.20.E2.84.9D.20(euclidean_space.20.F0.9D.95.9C.20n).60.3F.html#230757334">(Mar 17 2021 at 20:04)</a>:</h4>
<p>Does <code>R^1</code> satisfy is_R_or_C?</p>



<a name="230757383"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%60inner_product_space%20%E2%84%9D%20%28euclidean_space%20%F0%9D%95%9C%20n%29%60%3F/near/230757383" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.60inner_product_space.20.E2.84.9D.20(euclidean_space.20.F0.9D.95.9C.20n).60.3F.html#230757383">(Mar 17 2021 at 20:04)</a>:</h4>
<p>It's probably not even a field</p>



<a name="230757440"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%60inner_product_space%20%E2%84%9D%20%28euclidean_space%20%F0%9D%95%9C%20n%29%60%3F/near/230757440" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.60inner_product_space.20.E2.84.9D.20(euclidean_space.20.F0.9D.95.9C.20n).60.3F.html#230757440">(Mar 17 2021 at 20:04)</a>:</h4>
<p><code>is_R_or_C</code> is for fields. And it is <em>only</em> registered for straight <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">R</mi></mrow><annotation encoding="application/x-tex">\R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord"><span class="mord mathbb">R</span></span></span></span></span> and straight <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">C</mi></mrow><annotation encoding="application/x-tex">\mathbb{C}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord"><span class="mord mathbb">C</span></span></span></span></span>.</p>



<a name="230757454"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%60inner_product_space%20%E2%84%9D%20%28euclidean_space%20%F0%9D%95%9C%20n%29%60%3F/near/230757454" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.60inner_product_space.20.E2.84.9D.20(euclidean_space.20.F0.9D.95.9C.20n).60.3F.html#230757454">(Mar 17 2021 at 20:04)</a>:</h4>
<p>i.e. is the class literally for <code>real</code> and <code>complex</code> or does it mean isomorphic to R or C</p>



<a name="230757695"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%60inner_product_space%20%E2%84%9D%20%28euclidean_space%20%F0%9D%95%9C%20n%29%60%3F/near/230757695" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.60inner_product_space.20.E2.84.9D.20(euclidean_space.20.F0.9D.95.9C.20n).60.3F.html#230757695">(Mar 17 2021 at 20:06)</a>:</h4>
<p>The latter</p>



<a name="230757967"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%60inner_product_space%20%E2%84%9D%20%28euclidean_space%20%F0%9D%95%9C%20n%29%60%3F/near/230757967" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.60inner_product_space.20.E2.84.9D.20(euclidean_space.20.F0.9D.95.9C.20n).60.3F.html#230757967">(Mar 17 2021 at 20:08)</a>:</h4>
<p>There's an algebraic closure of the reals called R-bar, which contains two square roots of -1 but nobody thought to say "OK this one is the one with positive imaginary part" yet, so it's just a set of size 2. As such it comes with an involution which swaps the elements around, and which would be complex conjugation if you identified the field with C. The reason it's sometimes better than C is that if you make stuff with R-bar then you are more acutely aware of how everything behaves with respect to complex conjugation. For example Langlands uses this principle when checking functoriality for real and complex groups and I've seen it used in other places in arithmetic. For some reason it seems to be of no real use to the analysts though, I guess they just keep track of the action of complex conjugation explicitly.</p>



<a name="230758161"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%60inner_product_space%20%E2%84%9D%20%28euclidean_space%20%F0%9D%95%9C%20n%29%60%3F/near/230758161" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.60inner_product_space.20.E2.84.9D.20(euclidean_space.20.F0.9D.95.9C.20n).60.3F.html#230758161">(Mar 17 2021 at 20:09)</a>:</h4>
<p>I'm going to define</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">to_euclidean</span> <span class="o">:</span> <span class="n">E</span> <span class="bp">‚âÉ</span><span class="n">L</span><span class="o">[</span><span class="bp">ùïú</span><span class="o">]</span> <span class="n">euclidean_space</span> <span class="bp">ùïú</span> <span class="o">(</span><span class="n">fin</span> <span class="bp">$</span> <span class="n">finite_dimensional.findim</span> <span class="bp">ùïú</span> <span class="n">E</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">continuous_linear_equiv.of_findim_eq</span> <span class="n">findim_euclidean_space_fin.symm</span>

<span class="kd">def</span> <span class="n">euclidean.dist</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">E</span><span class="o">)</span> <span class="o">:</span> <span class="n">‚Ñù</span> <span class="o">:=</span> <span class="n">dist</span> <span class="o">(</span><span class="n">to_euclidean</span> <span class="bp">ùïú</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">to_euclidean</span> <span class="bp">ùïú</span> <span class="n">y</span><span class="o">)</span>
</code></pre></div>
<p>and prove some lemmas around this notion to avoid explicitly using <code>to_euclidean</code> (or an equivalent construction) in the definition of a smooth bump function.</p>



<a name="230758268"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%60inner_product_space%20%E2%84%9D%20%28euclidean_space%20%F0%9D%95%9C%20n%29%60%3F/near/230758268" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.60inner_product_space.20.E2.84.9D.20(euclidean_space.20.F0.9D.95.9C.20n).60.3F.html#230758268">(Mar 17 2021 at 20:10)</a>:</h4>
<p>And the proof of <code>times_cont_diff.euclidean_dist</code> needs <code>euclidean_space</code> to be a real inner product space.</p>



<a name="230766844"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%60inner_product_space%20%E2%84%9D%20%28euclidean_space%20%F0%9D%95%9C%20n%29%60%3F/near/230766844" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.60inner_product_space.20.E2.84.9D.20(euclidean_space.20.F0.9D.95.9C.20n).60.3F.html#230766844">(Mar 17 2021 at 21:07)</a>:</h4>
<p>What's the proper way to make this definition?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">analysis.complex.basic</span>
<span class="kn">import</span> <span class="n">analysis.normed_space.linear_isometry</span>
<span class="kn">import</span> <span class="n">analysis.normed_space.inner_product</span>
<span class="kn">import</span> <span class="n">tactic.ring</span>

<span class="n">open_locale</span> <span class="n">big_operators</span>

<span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">norm_euclidean_space</span> <span class="o">{</span><span class="bp">ùïú</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">is_R_or_C</span> <span class="bp">ùïú</span><span class="o">]</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">n</span><span class="o">]</span>
  <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">euclidean_space</span> <span class="bp">ùïú</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="bp">‚à•</span> <span class="n">x</span> <span class="bp">‚à•</span> <span class="bp">=</span> <span class="n">real.sqrt</span> <span class="o">(</span><span class="bp">‚àë</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">n</span><span class="o">),</span> <span class="bp">‚à•</span><span class="n">x</span> <span class="n">i</span><span class="bp">‚à•</span> <span class="bp">^</span> <span class="o">(</span><span class="mi">2</span> <span class="o">:</span> <span class="n">‚Ñù</span><span class="o">))</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">pi_Lp.norm_eq</span><span class="o">,</span> <span class="n">real.sqrt_eq_rpow</span><span class="o">]</span>

<span class="sd">/-- a + bi -/</span>
<span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">iso_pos</span> <span class="o">:</span> <span class="o">(</span><span class="n">euclidean_space</span> <span class="n">‚Ñù</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">))</span> <span class="bp">‚âÉ‚Çó·µ¢</span><span class="o">[</span><span class="n">‚Ñù</span><span class="o">]</span> <span class="n">‚ÑÇ</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">Œª</span> <span class="n">pair</span><span class="o">,</span> <span class="n">pair</span> <span class="mi">0</span> <span class="bp">+</span> <span class="n">pair</span> <span class="mi">1</span> <span class="bp">*</span> <span class="n">complex.I</span><span class="o">,</span>
  <span class="n">map_add'</span> <span class="o">:=</span> <span class="bp">Œª</span> <span class="n">_</span> <span class="n">_</span><span class="o">,</span> <span class="kd">by</span> <span class="o">{</span> <span class="n">simp</span><span class="o">,</span> <span class="n">ring</span> <span class="o">},</span>
  <span class="n">map_smul'</span> <span class="o">:=</span> <span class="bp">Œª</span> <span class="n">_</span> <span class="n">_</span><span class="o">,</span>  <span class="kd">by</span> <span class="o">{</span> <span class="n">simp</span><span class="o">,</span> <span class="n">ring</span> <span class="o">},</span>
  <span class="n">inv_fun</span> <span class="o">:=</span> <span class="bp">Œª</span> <span class="n">z</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">2</span><span class="o">),</span> <span class="o">[</span><span class="n">z.re</span><span class="o">,</span> <span class="n">z.im</span><span class="o">]</span><span class="bp">.</span><span class="n">nth_le</span> <span class="n">i</span> <span class="n">i.is_lt</span><span class="o">,</span>
  <span class="n">left_inv</span> <span class="o">:=</span> <span class="bp">Œª</span> <span class="n">_</span><span class="o">,</span> <span class="kd">by</span> <span class="o">{</span> <span class="n">ext</span> <span class="n">i</span><span class="o">,</span> <span class="n">fin_cases</span> <span class="n">i</span><span class="bp">;</span> <span class="n">simp</span> <span class="o">},</span>
  <span class="n">right_inv</span> <span class="o">:=</span> <span class="bp">Œª</span> <span class="n">_</span><span class="o">,</span> <span class="kd">by</span> <span class="o">{</span> <span class="n">simp</span> <span class="o">},</span>
  <span class="n">norm_map'</span> <span class="o">:=</span> <span class="bp">Œª</span> <span class="n">_</span><span class="o">,</span> <span class="kd">by</span> <span class="o">{</span>
    <span class="n">norm_fin</span> <span class="o">[</span><span class="n">complex.abs</span><span class="o">,</span> <span class="n">complex.norm_sq_apply</span><span class="o">,</span> <span class="n">fin.sum_univ_succ</span><span class="o">,</span> <span class="bp">‚Üê</span><span class="n">pow_two</span><span class="o">],</span>
    <span class="n">congr'</span> <span class="mi">2</span><span class="bp">;</span>
    <span class="gr">sorry</span> <span class="o">}</span> <span class="o">}</span>
</code></pre></div>



<a name="230770132"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%60inner_product_space%20%E2%84%9D%20%28euclidean_space%20%F0%9D%95%9C%20n%29%60%3F/near/230770132" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.60inner_product_space.20.E2.84.9D.20(euclidean_space.20.F0.9D.95.9C.20n).60.3F.html#230770132">(Mar 17 2021 at 21:29)</a>:</h4>
<p>Without addressing your sorry, I'd do the structural part as</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">analysis.complex.basic</span>
<span class="kn">import</span> <span class="n">analysis.normed_space.linear_isometry</span>

<span class="kd">noncomputable theory</span>

<span class="kd">def</span> <span class="n">iso_pos</span> <span class="o">:</span> <span class="n">‚ÑÇ</span> <span class="bp">‚âÉ‚Çó·µ¢</span><span class="o">[</span><span class="n">‚Ñù</span><span class="o">]</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span> <span class="bp">‚Üí</span> <span class="n">‚Ñù</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">norm_map'</span> <span class="o">:=</span> <span class="gr">sorry</span><span class="o">,</span>
  <span class="bp">..</span> <span class="n">complex.is_basis_one_I.equiv_fun</span> <span class="o">}</span>
</code></pre></div>



<a name="230771205"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%60inner_product_space%20%E2%84%9D%20%28euclidean_space%20%F0%9D%95%9C%20n%29%60%3F/near/230771205" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.60inner_product_space.20.E2.84.9D.20(euclidean_space.20.F0.9D.95.9C.20n).60.3F.html#230771205">(Mar 17 2021 at 21:37)</a>:</h4>
<p>The norm for <code>(fin 2 ‚Üí ‚Ñù)</code> is the sup norm, so I don't think that will pan out.</p>



<a name="230771597"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%60inner_product_space%20%E2%84%9D%20%28euclidean_space%20%F0%9D%95%9C%20n%29%60%3F/near/230771597" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.60inner_product_space.20.E2.84.9D.20(euclidean_space.20.F0.9D.95.9C.20n).60.3F.html#230771597">(Mar 17 2021 at 21:40)</a>:</h4>
<p>Oh sorry, you need to use the type synonym <code>euclidean_space ‚Ñù (fin 2)</code>.</p>



<a name="230771743"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%60inner_product_space%20%E2%84%9D%20%28euclidean_space%20%F0%9D%95%9C%20n%29%60%3F/near/230771743" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.60inner_product_space.20.E2.84.9D.20(euclidean_space.20.F0.9D.95.9C.20n).60.3F.html#230771743">(Mar 17 2021 at 21:41)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">analysis.complex.basic</span>
<span class="kn">import</span> <span class="n">analysis.normed_space.linear_isometry</span>
<span class="kn">import</span> <span class="n">analysis.normed_space.inner_product</span>

<span class="kd">noncomputable theory</span>

<span class="kd">def</span> <span class="n">iso_pos</span> <span class="o">:</span> <span class="n">‚ÑÇ</span> <span class="bp">‚âÉ‚Çó·µ¢</span><span class="o">[</span><span class="n">‚Ñù</span><span class="o">]</span> <span class="o">(</span><span class="n">euclidean_space</span> <span class="n">‚Ñù</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">))</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">norm_map'</span> <span class="o">:=</span> <span class="gr">sorry</span><span class="o">,</span>
  <span class="bp">..</span> <span class="n">complex.is_basis_one_I.equiv_fun</span> <span class="o">}</span>
</code></pre></div>



<a name="230780125"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%60inner_product_space%20%E2%84%9D%20%28euclidean_space%20%F0%9D%95%9C%20n%29%60%3F/near/230780125" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.60inner_product_space.20.E2.84.9D.20(euclidean_space.20.F0.9D.95.9C.20n).60.3F.html#230780125">(Mar 17 2021 at 22:28)</a>:</h4>
<p><span class="user-mention" data-user-id="308899">@Yakov Pechersky</span> By the way, something that should work but doesn't is</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">analysis.complex.basic</span>
<span class="kn">import</span> <span class="n">analysis.normed_space.inner_product</span>

<span class="kd">noncomputable theory</span>

<span class="kd">def</span> <span class="n">iso_pos</span> <span class="o">:</span> <span class="n">‚ÑÇ</span> <span class="bp">‚âÉ‚Çó·µ¢</span><span class="o">[</span><span class="n">‚Ñù</span><span class="o">]</span> <span class="o">(</span><span class="n">euclidean_space</span> <span class="n">‚Ñù</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">))</span> <span class="o">:=</span>
<span class="n">complex.is_basis_one_I.isometry_euclidean_of_orthonormal</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="n">orthonormal_iff_ite</span><span class="o">,</span>
  <span class="n">intros</span> <span class="n">i</span><span class="o">,</span> <span class="n">fin_cases</span> <span class="n">i</span><span class="bp">;</span>
  <span class="n">intros</span> <span class="n">j</span><span class="bp">;</span> <span class="n">fin_cases</span> <span class="n">j</span><span class="bp">;</span>
  <span class="n">simp</span> <span class="o">[</span><span class="n">real_inner_eq_re_inner</span><span class="o">]</span>
<span class="kd">end</span>
</code></pre></div>



<a name="230780186"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%60inner_product_space%20%E2%84%9D%20%28euclidean_space%20%F0%9D%95%9C%20n%29%60%3F/near/230780186" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.60inner_product_space.20.E2.84.9D.20(euclidean_space.20.F0.9D.95.9C.20n).60.3F.html#230780186">(Mar 17 2021 at 22:28)</a>:</h4>
<p>It seems to be getting stuck on some sort of diamond:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">analysis.complex.basic</span>
<span class="kn">import</span> <span class="n">analysis.normed_space.inner_product</span>

<span class="kd">noncomputable theory</span>

<span class="kd">def</span> <span class="n">iso_pos</span> <span class="o">:</span> <span class="n">‚ÑÇ</span> <span class="bp">‚âÉ‚Çó·µ¢</span><span class="o">[</span><span class="n">‚Ñù</span><span class="o">]</span> <span class="o">(</span><span class="n">euclidean_space</span> <span class="n">‚Ñù</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">))</span> <span class="o">:=</span>
<span class="bp">@</span><span class="n">is_basis.isometry_euclidean_of_orthonormal</span> <span class="n">‚Ñù</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span> <span class="o">(</span><span class="bp">!</span><span class="o">[</span><span class="mi">1</span><span class="o">,</span> <span class="n">complex.I</span><span class="o">]</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">2</span> <span class="bp">‚Üí</span> <span class="n">‚ÑÇ</span><span class="o">)</span>
<span class="kd">begin</span>
  <span class="n">convert</span> <span class="n">complex.is_basis_one_I</span><span class="o">,</span>
  <span class="c1">-- stuck with ‚ä¢ normed_space.to_semimodule = complex.semimodule</span>
<span class="kd">end</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="n">orthonormal_iff_ite</span><span class="o">,</span>
  <span class="n">intros</span> <span class="n">i</span><span class="o">,</span> <span class="n">fin_cases</span> <span class="n">i</span><span class="bp">;</span>
  <span class="n">intros</span> <span class="n">j</span><span class="bp">;</span> <span class="n">fin_cases</span> <span class="n">j</span><span class="bp">;</span>
  <span class="n">simp</span> <span class="o">[</span><span class="n">real_inner_eq_re_inner</span><span class="o">]</span>
<span class="kd">end</span>
</code></pre></div>



<a name="230780386"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%60inner_product_space%20%E2%84%9D%20%28euclidean_space%20%F0%9D%95%9C%20n%29%60%3F/near/230780386" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.60inner_product_space.20.E2.84.9D.20(euclidean_space.20.F0.9D.95.9C.20n).60.3F.html#230780386">(Mar 17 2021 at 22:30)</a>:</h4>
<p>My attempt to solve the sorry is at this state:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">analysis.complex.basic</span>
<span class="kn">import</span> <span class="n">analysis.normed_space.linear_isometry</span>
<span class="kn">import</span> <span class="n">analysis.normed_space.inner_product</span>

<span class="n">open_locale</span> <span class="n">big_operators</span>

<span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">norm_euclidean_space</span> <span class="o">{</span><span class="bp">ùïú</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">is_R_or_C</span> <span class="bp">ùïú</span><span class="o">]</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">n</span><span class="o">]</span>
  <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">euclidean_space</span> <span class="bp">ùïú</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="bp">‚à•</span> <span class="n">x</span> <span class="bp">‚à•</span> <span class="bp">=</span> <span class="n">real.sqrt</span> <span class="o">(</span><span class="bp">‚àë</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">n</span><span class="o">),</span> <span class="bp">‚à•</span><span class="n">x</span> <span class="n">i</span><span class="bp">‚à•</span> <span class="bp">^</span> <span class="o">(</span><span class="mi">2</span> <span class="o">:</span> <span class="n">‚Ñù</span><span class="o">))</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">pi_Lp.norm_eq</span><span class="o">,</span> <span class="n">real.sqrt_eq_rpow</span><span class="o">]</span>

<span class="kd">def</span> <span class="n">iso_pos</span> <span class="o">:</span> <span class="o">(</span><span class="n">euclidean_space</span> <span class="n">‚Ñù</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">))</span> <span class="bp">‚âÉ‚Çó·µ¢</span><span class="o">[</span><span class="n">‚Ñù</span><span class="o">]</span> <span class="n">‚ÑÇ</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">norm_map'</span> <span class="o">:=</span> <span class="bp">Œª</span> <span class="n">_</span><span class="o">,</span> <span class="kd">by</span> <span class="o">{</span> <span class="n">simp</span> <span class="o">[</span><span class="n">fin.sum_univ_succ</span><span class="o">,</span> <span class="n">complex.abs</span><span class="o">,</span> <span class="n">complex.norm_sq_apply</span><span class="o">],</span>
  <span class="n">extract_goal</span><span class="o">,</span> <span class="o">},</span>
  <span class="bp">..</span> <span class="n">complex.is_basis_one_I.equiv_fun.symm</span> <span class="o">}</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">_x</span> <span class="o">:</span> <span class="n">euclidean_space</span> <span class="n">‚Ñù</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">))</span> <span class="o">:</span>
  <span class="n">real.sqrt</span> <span class="o">(</span><span class="n">_x</span> <span class="mi">0</span> <span class="bp">*</span> <span class="n">_x</span> <span class="mi">0</span> <span class="bp">+</span> <span class="n">_x</span> <span class="o">(</span><span class="n">fin.succ</span> <span class="mi">0</span><span class="o">)</span> <span class="bp">*</span> <span class="n">_x</span> <span class="o">(</span><span class="n">fin.succ</span> <span class="mi">0</span><span class="o">))</span> <span class="bp">=</span>
    <span class="n">real.sqrt</span> <span class="o">(</span><span class="bp">‚à•</span><span class="n">_x</span> <span class="mi">0</span><span class="bp">‚à•</span> <span class="bp">^</span> <span class="o">(</span><span class="mi">2</span> <span class="o">:</span> <span class="n">‚Ñù</span><span class="o">)</span> <span class="bp">+</span> <span class="bp">‚à•</span><span class="n">_x</span> <span class="o">(</span><span class="n">fin.succ</span> <span class="mi">0</span><span class="o">)</span><span class="bp">‚à•</span> <span class="bp">^</span> <span class="o">(</span><span class="mi">2</span> <span class="o">:</span> <span class="n">‚Ñù</span><span class="o">))</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="gr">admit</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>
<p>which will require something like a <code>rpow_bit0</code>.</p>



<a name="230782532"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%60inner_product_space%20%E2%84%9D%20%28euclidean_space%20%F0%9D%95%9C%20n%29%60%3F/near/230782532" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.60inner_product_space.20.E2.84.9D.20(euclidean_space.20.F0.9D.95.9C.20n).60.3F.html#230782532">(Mar 17 2021 at 22:51)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">analysis.complex.basic</span>
<span class="kn">import</span> <span class="n">analysis.normed_space.linear_isometry</span>
<span class="kn">import</span> <span class="n">analysis.normed_space.inner_product</span>

<span class="n">open_locale</span> <span class="n">big_operators</span>

<span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">norm_euclidean_space</span> <span class="o">{</span><span class="bp">ùïú</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">is_R_or_C</span> <span class="bp">ùïú</span><span class="o">]</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">n</span><span class="o">]</span>
  <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">euclidean_space</span> <span class="bp">ùïú</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="bp">‚à•</span> <span class="n">x</span> <span class="bp">‚à•</span> <span class="bp">=</span> <span class="n">real.sqrt</span> <span class="o">(</span><span class="bp">‚àë</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">n</span><span class="o">),</span> <span class="bp">‚à•</span><span class="n">x</span> <span class="n">i</span><span class="bp">‚à•</span> <span class="bp">^</span> <span class="mi">2</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">have</span> <span class="o">:</span> <span class="o">(</span><span class="mi">2</span> <span class="o">:</span> <span class="n">‚Ñù</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">2</span> <span class="o">:</span> <span class="n">‚Ñï</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">norm_num</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h</span> <span class="o">:</span> <span class="bp">‚àÄ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">‚Ñù</span><span class="o">)</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">‚Ñï</span><span class="o">),</span> <span class="n">real.rpow</span> <span class="n">x</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">monoid.pow</span> <span class="n">x</span> <span class="n">n</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">simp</span><span class="o">,</span>
  <span class="n">simp_rw</span> <span class="o">[</span><span class="n">pi_Lp.norm_eq</span><span class="o">,</span> <span class="n">real.sqrt_eq_rpow</span><span class="o">,</span> <span class="n">this</span><span class="o">,</span> <span class="bp">‚Üê</span><span class="n">real.rpow_eq_pow</span><span class="o">,</span> <span class="n">h</span><span class="o">],</span>
  <span class="n">simp</span>
<span class="kd">end</span>

<span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">iso_pos</span> <span class="o">:</span> <span class="o">(</span><span class="n">euclidean_space</span> <span class="n">‚Ñù</span> <span class="o">(</span><span class="n">fin</span> <span class="mi">2</span><span class="o">))</span> <span class="bp">‚âÉ‚Çó·µ¢</span><span class="o">[</span><span class="n">‚Ñù</span><span class="o">]</span> <span class="n">‚ÑÇ</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">norm_map'</span> <span class="o">:=</span> <span class="bp">Œª</span> <span class="n">_</span><span class="o">,</span> <span class="kd">by</span> <span class="o">{</span> <span class="n">simp</span> <span class="o">[</span><span class="n">fin.sum_univ_succ</span><span class="o">,</span> <span class="n">complex.abs</span><span class="o">,</span> <span class="n">complex.norm_sq_apply</span><span class="o">,</span>
                                <span class="n">pow_two</span><span class="o">,</span> <span class="n">real.norm_eq_abs</span><span class="o">]</span> <span class="o">},</span>
  <span class="bp">..</span> <span class="n">complex.is_basis_one_I.equiv_fun.symm</span> <span class="o">}</span>
</code></pre></div>



<a name="230936749"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%60inner_product_space%20%E2%84%9D%20%28euclidean_space%20%F0%9D%95%9C%20n%29%60%3F/near/230936749" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.60inner_product_space.20.E2.84.9D.20(euclidean_space.20.F0.9D.95.9C.20n).60.3F.html#230936749">(Mar 18 2021 at 21:00)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/6760">#6760</a> to solve the diamond. I know this is not necessary for what you did, but having diamonds around is always bad.</p>



<a name="230936934"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%60inner_product_space%20%E2%84%9D%20%28euclidean_space%20%F0%9D%95%9C%20n%29%60%3F/near/230936934" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.60inner_product_space.20.E2.84.9D.20(euclidean_space.20.F0.9D.95.9C.20n).60.3F.html#230936934">(Mar 18 2021 at 21:01)</a>:</h4>
<p>Oh good!  I was just testing this, it seems that the diamond was introduced by <a href="https://github.com/leanprover-community/mathlib/issues/6562">#6562</a>.</p>



<a name="230937071"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%60inner_product_space%20%E2%84%9D%20%28euclidean_space%20%F0%9D%95%9C%20n%29%60%3F/near/230937071" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.60inner_product_space.20.E2.84.9D.20(euclidean_space.20.F0.9D.95.9C.20n).60.3F.html#230937071">(Mar 18 2021 at 21:02)</a>:</h4>
<p>See <a href="https://github.com/leanprover-community/mathlib/tree/test-isometry-complex">branch#test-isometry-complex</a>, based off the mathlib before that PR ... it compiles locally for me.</p>



<a name="230938969"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%60inner_product_space%20%E2%84%9D%20%28euclidean_space%20%F0%9D%95%9C%20n%29%60%3F/near/230938969" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.60inner_product_space.20.E2.84.9D.20(euclidean_space.20.F0.9D.95.9C.20n).60.3F.html#230938969">(Mar 18 2021 at 21:15)</a>:</h4>
<p>Thanks, I was hoping to get to this after finishing the PR on simplifying nat/int powers over the reals. Now you've slain another smul diamond =)</p>



<a name="231901729"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%60inner_product_space%20%E2%84%9D%20%28euclidean_space%20%F0%9D%95%9C%20n%29%60%3F/near/231901729" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.60inner_product_space.20.E2.84.9D.20(euclidean_space.20.F0.9D.95.9C.20n).60.3F.html#231901729">(Mar 26 2021 at 01:29)</a>:</h4>
<p>Now that <a href="https://github.com/leanprover-community/mathlib/issues/6760">#6760</a> is merged, I PR'd the isometry as <a href="https://github.com/leanprover-community/mathlib/issues/6877">#6877</a>.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>