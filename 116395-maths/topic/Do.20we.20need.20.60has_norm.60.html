---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/Do.20we.20need.20.60has_norm.60.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Do.20we.20need.20.60has_norm.60.html">Do we need `has_norm`</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="269056434"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Do%20we%20need%20%60has_norm%60/near/269056434" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Do.20we.20need.20.60has_norm.60.html#269056434">(Jan 24 2022 at 03:27)</a>:</h4>
<p>Is there any example where we can't use <code>has_nnnorm</code> instead?</p>



<a name="269056449"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Do%20we%20need%20%60has_norm%60/near/269056449" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Do.20we.20need.20.60has_norm.60.html#269056449">(Jan 24 2022 at 03:27)</a>:</h4>
<p>I mean, should we force the norm to be nonnegative by definition?</p>



<a name="269056488"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Do%20we%20need%20%60has_norm%60/near/269056488" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Do.20we.20need.20.60has_norm.60.html#269056488">(Jan 24 2022 at 03:28)</a>:</h4>
<p>(same question for <code>dist</code>/<code>nndist</code>).</p>



<a name="269056499"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Do%20we%20need%20%60has_norm%60/near/269056499" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Do.20we.20need.20.60has_norm.60.html#269056499">(Jan 24 2022 at 03:28)</a>:</h4>
<p>we might want <code>norm</code> to have a separate defeq from <code>nnnorm</code></p>



<a name="269056515"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Do%20we%20need%20%60has_norm%60/near/269056515" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Do.20we.20need.20.60has_norm.60.html#269056515">(Jan 24 2022 at 03:29)</a>:</h4>
<p>When we don't want defeq <code>norm x = (nnnorm x : real)</code>?</p>



<a name="269056585"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Do%20we%20need%20%60has_norm%60/near/269056585" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Do.20we.20need.20.60has_norm.60.html#269056585">(Jan 24 2022 at 03:30)</a>:</h4>
<p>because <code>norm x</code> might have a natural expression of its own which just happens to be always nonnegative and is not defeq to coercing that real to a <code>nnreal</code> and then back to a real</p>



<a name="269056601"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Do%20we%20need%20%60has_norm%60/near/269056601" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Do.20we.20need.20.60has_norm.60.html#269056601">(Jan 24 2022 at 03:30)</a>:</h4>
<p>(note: this came up because some lemmas about <code>is_o</code> assume <code>normed_group</code> just to have a nonnegative norm)</p>



<a name="269056602"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Do%20we%20need%20%60has_norm%60/near/269056602" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Do.20we.20need.20.60has_norm.60.html#269056602">(Jan 24 2022 at 03:30)</a>:</h4>
<p>For example <code>abs (x - y) : real</code> has this property</p>



<a name="269056608"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Do%20we%20need%20%60has_norm%60/near/269056608" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Do.20we.20need.20.60has_norm.60.html#269056608">(Jan 24 2022 at 03:31)</a>:</h4>
<p><code>((⟨x, hx : 0 ≤ x⟩ : nnreal) : real) = x</code> is always defeq</p>



<a name="269056688"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Do%20we%20need%20%60has_norm%60/near/269056688" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Do.20we.20need.20.60has_norm.60.html#269056688">(Jan 24 2022 at 03:33)</a>:</h4>
<p>Maybe to turn it around then: why is <code>nnnorm</code> a field, when it could just be a definition combining the <code>x</code> and <code>hx</code> from a real-valued norm?</p>



<a name="269056846"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Do%20we%20need%20%60has_norm%60/near/269056846" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Do.20we.20need.20.60has_norm.60.html#269056846">(Jan 24 2022 at 03:38)</a>:</h4>
<p>E.g., the norm on <code>α → β</code> is defined using <code>finset.sup</code></p>



<a name="269056892"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Do%20we%20need%20%60has_norm%60/near/269056892" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Do.20we.20need.20.60has_norm.60.html#269056892">(Jan 24 2022 at 03:38)</a>:</h4>
<p>So, we can have a nice defeq for <code>nnnorm</code> on a pi type (though it seems that we don't have it).</p>



<a name="269056899"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Do%20we%20need%20%60has_norm%60/near/269056899" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Do.20we.20need.20.60has_norm.60.html#269056899">(Jan 24 2022 at 03:39)</a>:</h4>
<p>AFAIR, <code>has_nnnorm</code> was introduced not long ago.</p>



<a name="269056906"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Do%20we%20need%20%60has_norm%60/near/269056906" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Do.20we.20need.20.60has_norm.60.html#269056906">(Jan 24 2022 at 03:39)</a>:</h4>
<p>/me is running <code>git log -S has_nnnorm</code></p>



<a name="269056911"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Do%20we%20need%20%60has_norm%60/near/269056911" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Do.20we.20need.20.60has_norm.60.html#269056911">(Jan 24 2022 at 03:39)</a>:</h4>
<p>I think it is reasonable to just have one class here which adds both fields</p>



<a name="269056970"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Do%20we%20need%20%60has_norm%60/near/269056970" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Do.20we.20need.20.60has_norm.60.html#269056970">(Jan 24 2022 at 03:40)</a>:</h4>
<p><span class="user-mention" data-user-id="130384">@Riccardo Brasca</span> added <code>has_nnnorm</code> in <a href="https://github.com/leanprover-community/mathlib/pull/7986">#7986</a>. The commit message says that <code>has_nnnorm</code> is useful in LTE.</p>



<a name="269056988"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Do%20we%20need%20%60has_norm%60/near/269056988" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Do.20we.20need.20.60has_norm.60.html#269056988">(Jan 24 2022 at 03:41)</a>:</h4>
<p>So, I suggest that we wait for comments from LTE people.</p>



<a name="269057049"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Do%20we%20need%20%60has_norm%60/near/269057049" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Do.20we.20need.20.60has_norm.60.html#269057049">(Jan 24 2022 at 03:42)</a>:</h4>
<p>unless for some reason you want a norm that isn't nonnegative? Looking at you, <a href="https://en.wikipedia.org/wiki/Field_norm">field norm</a></p>



<a name="269057823"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Do%20we%20need%20%60has_norm%60/near/269057823" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Do.20we.20need.20.60has_norm.60.html#269057823">(Jan 24 2022 at 04:01)</a>:</h4>
<p>But if it also doesn't take values in <code>real</code></p>



<a name="269057894"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Do%20we%20need%20%60has_norm%60/near/269057894" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Do.20we.20need.20.60has_norm.60.html#269057894">(Jan 24 2022 at 04:02)</a>:</h4>
<p>(at least not necessarily)</p>



<a name="269074573"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Do%20we%20need%20%60has_norm%60/near/269074573" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Do.20we.20need.20.60has_norm.60.html#269074573">(Jan 24 2022 at 08:53)</a>:</h4>
<p>I don't remember exactly why LTE was full of non negative norm, maybe <span class="user-mention" data-user-id="112680">@Johan Commelin</span> can say more.<br>
I just realized we were using it a lot and so it was reasonable to have it in mathlib, where almost everything is done using <code>has_norm</code>.</p>



<a name="269074707"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Do%20we%20need%20%60has_norm%60/near/269074707" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Do.20we.20need.20.60has_norm.60.html#269074707">(Jan 24 2022 at 08:54)</a>:</h4>
<p>At the end of the day the two notion are equivalent, and I don't have a strong preference over one or the other, but it would be nice to only have one norm. <span class="user-mention" data-user-id="387244">@Yaël Dillies</span> Is this relevant for the refactor you are doing?</p>



<a name="269074751"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Do%20we%20need%20%60has_norm%60/near/269074751" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Do.20we.20need.20.60has_norm.60.html#269074751">(Jan 24 2022 at 08:55)</a>:</h4>
<p>Which one? <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span></p>



<a name="269074774"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Do%20we%20need%20%60has_norm%60/near/269074774" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Do.20we.20need.20.60has_norm.60.html#269074774">(Jan 24 2022 at 08:55)</a>:</h4>
<p>It took care of plenty of <code>nonneg</code> hypotheses for us. You can just take products, and don't have to prove they stay nonneg, etc...</p>



<a name="269074848"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Do%20we%20need%20%60has_norm%60/near/269074848" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Do.20we.20need.20.60has_norm.60.html#269074848">(Jan 24 2022 at 08:56)</a>:</h4>
<p>We almost never use honest <code>ℝ</code> in LTE. So it was really nice to be able to just stay in the <code>ℝ≥0</code> realm.</p>



<a name="269074906"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Do%20we%20need%20%60has_norm%60/near/269074906" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Do.20we.20need.20.60has_norm.60.html#269074906">(Jan 24 2022 at 08:56)</a>:</h4>
<p>Either way shouldn't affect any of my refactors.</p>



<a name="269074979"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Do%20we%20need%20%60has_norm%60/near/269074979" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Do.20we.20need.20.60has_norm.60.html#269074979">(Jan 24 2022 at 08:57)</a>:</h4>
<p>The question is not to get rid of <code>nnnorm</code>, however, right? It's about making it nonprimitive.</p>



<a name="269097736"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Do%20we%20need%20%60has_norm%60/near/269097736" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Do.20we.20need.20.60has_norm.60.html#269097736">(Jan 24 2022 at 12:27)</a>:</h4>
<p>I suggested to put <code>norm x = (nnnorm x : real)</code> by definition.</p>



<a name="269110498"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Do%20we%20need%20%60has_norm%60/near/269110498" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Do.20we.20need.20.60has_norm.60.html#269110498">(Jan 24 2022 at 14:09)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/116395-maths/topic/Do.20we.20need.20.60has_norm.60/near/269074848">said</a>:</p>
<blockquote>
<p>We almost never use honest <code>ℝ</code> in LTE. So it was really nice to be able to just stay in the <code>ℝ≥0</code> realm.</p>
</blockquote>
<p>My experience is that I hated <code>ℝ≥0</code> every single second I used it in LTE, mostly because it's less tactic friendly.</p>



<a name="269118793"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Do%20we%20need%20%60has_norm%60/near/269118793" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Do.20we.20need.20.60has_norm.60.html#269118793">(Jan 24 2022 at 15:08)</a>:</h4>
<p>So one fix for this is to make better tactics I guess.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>