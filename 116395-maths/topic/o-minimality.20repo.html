---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/o-minimality.20repo.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html">o-minimality repo</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="208316253"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208316253" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208316253">(Aug 28 2020 at 08:16)</a>:</h4>
<p>Several people have expressed interest in model theory and o-minimality (cc <span class="user-mention" data-user-id="302826">@Aaron Anderson</span>). For quite some time <span class="user-mention" data-user-id="110032">@Reid Barton</span> and I have been working on a project (with and without lean) involving o-minimality. On the Lean side, it took a while to get something that we are happy with. Since others have also started work in this direction, we've decided to open up our repo, so others can take a look: <a href="https://github.com/rwbarton/lean-omin">https://github.com/rwbarton/lean-omin</a><br>
Note that we take a very non-model-theoretic approach to the definitions. We believe that both versions should exist, with an interface between them. The model theoretic approach is suited for reasoning about (o-minimal) structures, whereas our hands-on approach is (we think) better for actually working with specific examples.</p>
<p>Our two "showcases": we've proven the first part of monotonicity and constructed the o-minimal structure of semilinear sets/functions.</p>



<a name="208316499"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208316499" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208316499">(Aug 28 2020 at 08:21)</a>:</h4>
<p>What is the situation regarding the missing tactic which Reid talked about in his Pittsburgh talk?</p>



<a name="208316707"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208316707" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208316707">(Aug 28 2020 at 08:24)</a>:</h4>
<p>We don't really have a dedicated tactic yet, but it won't be hard to write it now.</p>



<a name="208316763"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208316763" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208316763">(Aug 28 2020 at 08:24)</a>:</h4>
<p>It can be very similar to <code>continuity</code>. We have the "basic lemmas" that it should try to apply. And then there should maybe be a bit of convenience wrapping around it.</p>



<a name="208319760"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208319760" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208319760">(Aug 28 2020 at 09:01)</a>:</h4>
<p>Isn't it amazing that ideas coming from one area of formalization can be used in another? This push just to "get math done" goes off in many directions but the things we learn all somehow feed back into each other</p>



<a name="208323380"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208323380" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208323380">(Aug 28 2020 at 09:46)</a>:</h4>
<p>Ooh, a new project repo. Install some <a href="https://leanprover-community.github.io/ci.html">Actions</a>, add it to the <a href="https://github.com/leanprover-contrib/leanprover-contrib/blob/master/projects/projects.yml">contrib list</a>, and it will show up on the <a href="https://leanprover-community.github.io/lean_projects.html">brand new web page</a>!</p>



<a name="208350349"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208350349" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208350349">(Aug 28 2020 at 14:35)</a>:</h4>
<p>This is on my todo list, though I think the project already doesn't build with the latest mathlib <span aria-label="face palm" class="emoji emoji-1f926" role="img" title="face palm">:face_palm:</span></p>



<a name="208350588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208350588" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208350588">(Aug 28 2020 at 14:37)</a>:</h4>
<p>One purpose of the table at the bottom of that page is to shame people into keeping their projects updated</p>



<a name="208366176"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208366176" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208366176">(Aug 28 2020 at 16:38)</a>:</h4>
<p>Does van den Dries ever actually define "tame" that way?</p>



<a name="208366653"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208366653" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208366653">(Aug 28 2020 at 16:42)</a>:</h4>
<p>No, I think the book just says "a finite union of intervals and points", and doesn't actually ever use the term "tame" at all, so it seemed like a convenient opportunity to define "tame" to mean something.</p>



<a name="208366740"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208366740" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208366740">(Aug 28 2020 at 16:43)</a>:</h4>
<p>I also made up some words in the construction of the simple / semilinear o-minimal structures like "isolating" that probably have a real name in model theory.</p>



<a name="208366783"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208366783" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208366783">(Aug 28 2020 at 16:43)</a>:</h4>
<p>Coloquially model theorists tend to use "tame" to mean a larger class of things, although I don't think we use it as a technical word</p>



<a name="208366902"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208366902" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208366902">(Aug 28 2020 at 16:44)</a>:</h4>
<p>It basically refers to any structure where only a small collection of well-behaved sets are definable</p>



<a name="208366990"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208366990" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208366990">(Aug 28 2020 at 16:45)</a>:</h4>
<p>So here I need a word for precisely those "well-behaved" sets</p>



<a name="208367058"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208367058" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208367058">(Aug 28 2020 at 16:45)</a>:</h4>
<p>Certainly <code>o_minimal.tame</code> can have only one meaning (-;</p>



<a name="208367102"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208367102" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208367102">(Aug 28 2020 at 16:45)</a>:</h4>
<p>at least, once you know what a DUNLO is <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span></p>



<a name="208367161"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208367161" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208367161">(Aug 28 2020 at 16:46)</a>:</h4>
<p>Naming improvement suggestions are more than welcome</p>



<a name="208367212"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208367212" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208367212">(Aug 28 2020 at 16:46)</a>:</h4>
<p>Yeah, I don't have a problem with <code>o_minimal.tame</code> for now, I just wanted to point out that we'd also refer to the definable sets of an algebraically closed field or something as tame, even when there's no order involved</p>



<a name="208367297"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208367297" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208367297">(Aug 28 2020 at 16:47)</a>:</h4>
<p>By the way, for those interested in the model theory of real closed fields, Johan and I have no intention of proving that the semialgebraic structure is o-minimal, and we'd be quite happy if such a theorem (or the hard part of such a theorem, maybe formulated differently) were to magically appear.</p>



<a name="208367446"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208367446" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208367446">(Aug 28 2020 at 16:48)</a>:</h4>
<p>Yeah, I do have the intention of formalizing Tarski-Seidenberg</p>



<a name="208367580"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208367580" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208367580">(Aug 28 2020 at 16:49)</a>:</h4>
<p>I think the first thing I could do really is relate this definability-only definition of a structure to the functions-and-relations one</p>



<a name="208367781"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208367781" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208367781">(Aug 28 2020 at 16:51)</a>:</h4>
<p>I find that it's pretty easy to port the flypitch definition of a structure and start defining model theory things with that, but I haven't made any serious attempt to actually port formulas</p>



<a name="208367890"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208367890" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208367890">(Aug 28 2020 at 16:52)</a>:</h4>
<p>but there's a surprising amount of model theory you can define without formulas, including the category of definable sets as you've seen, and back-and-forth arguments</p>



<a name="208371212"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208371212" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208371212">(Aug 28 2020 at 17:18)</a>:</h4>
<p>The word "tame" came from Grothendieck (the esquisse, I think).</p>



<a name="208372010"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208372010" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208372010">(Aug 28 2020 at 17:26)</a>:</h4>
<p>Yup, but he didn't define it (-;</p>



<a name="208373091"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208373091" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208373091">(Aug 28 2020 at 17:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="302826">Aaron Anderson</span> <a href="#narrow/stream/116395-maths/topic/o-minimality.20repo/near/208367580">said</a>:</p>
<blockquote>
<p>I think the first thing I could do really is relate this definability-only definition of a structure to the functions-and-relations one</p>
</blockquote>
<p>Yes, if you have a (model-theoretic) structure for a language, its definable sets form a <code>struc</code>, and conversely, if you have a <code>struc</code> then you could form the language whose relation symbols are given by all the definable sets.</p>



<a name="208373121"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208373121" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208373121">(Aug 28 2020 at 17:35)</a>:</h4>
<p>It's sort of like <code>eqv_gen</code> and <code>setoid</code></p>



<a name="208373270"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208373270" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208373270">(Aug 28 2020 at 17:36)</a>:</h4>
<p>We can maybe make <code>struc</code> an instance for <code>L</code>-structures, but it depends on the choice of language</p>



<a name="208457581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208457581" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208457581">(Aug 29 2020 at 22:43)</a>:</h4>
<p>I know the naming isn’t so important yet, but here’s a concept: a <code>constructible</code> set of a topological space is a boolean combination of open/closed sets</p>



<a name="208457590"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208457590" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208457590">(Aug 29 2020 at 22:43)</a>:</h4>
<p>Then <code>o_minimal.tame</code> is just constructible in the order topology</p>



<a name="208457657"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208457657" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208457657">(Aug 29 2020 at 22:44)</a>:</h4>
<p>And of course it works for ACF also</p>



<a name="208513244"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208513244" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208513244">(Aug 31 2020 at 01:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/116395-maths/topic/o-minimality.20repo/near/208316499">said</a>:</p>
<blockquote>
<p>What is the situation regarding the missing tactic which Reid talked about in his Pittsburgh talk?</p>
</blockquote>
<p>We've just gotten to the point where we can state and prove the statements in question by hand in the first place. I wrote <a href="https://github.com/rwbarton/lean-omin/blob/master/src/o_minimal/mono1.lean#L83-L94">this proof</a> and <a href="https://github.com/rwbarton/lean-omin/blob/master/omin/topology.lean#L72-L93">this proof</a> manually; these are two of the examples from the talk. As you can see it's already not that pleasant to write the proofs by hand.</p>



<a name="208513315"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208513315" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208513315">(Aug 31 2020 at 01:29)</a>:</h4>
<p>As Johan says the hope is to use something like the continuity tactic to produce these proofs automatically, although the space of problems we want to handle is more complicated (involving both definable sets and definable functions, and in the future possibly higher-order notions of definability).</p>



<a name="208513416"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208513416" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208513416">(Aug 31 2020 at 01:32)</a>:</h4>
<p>While a tactic would be nice for those things, I think a flypitch-ish encoding of formulas should be able to get us most of the way.</p>



<a name="208513502"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208513502" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208513502">(Aug 31 2020 at 01:34)</a>:</h4>
<p>At least, I think writing the flypitchishly formal version of the defining formula wouldn't be too bad, although eventually a tactic could do it</p>



<a name="208513581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208513581" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208513581">(Aug 31 2020 at 01:36)</a>:</h4>
<p>And then we'd just need a theorem that says that <code>def_set</code> is equivalent to there existing some formula whose realization is exactly the set in question.</p>



<a name="208515979"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208515979" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208515979">(Aug 31 2020 at 02:54)</a>:</h4>
<p>Sure, but you still don't want to do this by hand, because when I just wrote down a set that is obviously definable, I simply want the system to notice this.</p>



<a name="208515993"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208515993" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208515993">(Aug 31 2020 at 02:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="302826">Aaron Anderson</span> <a href="#narrow/stream/116395-maths/topic/o-minimality.20repo/near/208457590">said</a>:</p>
<blockquote>
<p>Then <code>o_minimal.tame</code> is just constructible in the order topology</p>
</blockquote>
<p>I'm confused. Doesn't this mean that the infinite union of open intervals <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mo>⋃</mo><mrow><mi>n</mi><mo>∈</mo><mn>2</mn><mi mathvariant="double-struck">Z</mi></mrow></msub><mo stretchy="false">(</mo><mi>n</mi><mo separator="true">,</mo><mi>n</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\bigcup_{n \in 2 \mathbb{Z}} (n, n+1)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1.07708em;vertical-align:-0.32708000000000004em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">⋃</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.18251299999999993em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mrel mtight">∈</span><span class="mord mtight">2</span><span class="mord mtight"><span class="mord mathbb mtight">Z</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.32708000000000004em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span> is constructible, hence tame? That seems wrong.</p>



<a name="208520030"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208520030" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208520030">(Aug 31 2020 at 04:40)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/116395-maths/topic/o-minimality.20repo/near/208515993">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="302826">Aaron Anderson</span> <a href="#narrow/stream/116395-maths/topic/o-minimality.20repo/near/208457590">said</a>:</p>
<blockquote>
<p>Then <code>o_minimal.tame</code> is just constructible in the order topology</p>
</blockquote>
<p>I'm confused. Doesn't this mean that the infinite union of open intervals <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mo>⋃</mo><mrow><mi>n</mi><mo>∈</mo><mn>2</mn><mi mathvariant="double-struck">Z</mi></mrow></msub><mo stretchy="false">(</mo><mi>n</mi><mo separator="true">,</mo><mi>n</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\bigcup_{n \in 2 \mathbb{Z}} (n, n+1)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1.07708em;vertical-align:-0.32708000000000004em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">⋃</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.18251299999999993em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mrel mtight">∈</span><span class="mord mtight">2</span><span class="mord mtight"><span class="mord mathbb mtight">Z</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.32708000000000004em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span> is constructible, hence tame? That seems wrong.</p>
</blockquote>
<p>Yeah, you're right, constructible and tame are totally different here.</p>



<a name="208520119"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208520119" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208520119">(Aug 31 2020 at 04:43)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/116395-maths/topic/o-minimality.20repo/near/208515979">said</a>:</p>
<blockquote>
<p>Sure, but you still don't want to do this by hand, because when I just wrote down a set that is obviously definable, I simply want the system to notice this.</p>
</blockquote>
<p>Like I said, I agree that this tactic should exist eventually, but it looks to me that the most annoying part of the job is showing that the set realized by a given formula is actually a <code>def_set</code></p>



<a name="208520661"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208520661" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208520661">(Aug 31 2020 at 05:00)</a>:</h4>
<p>But in our current setup, there are no formulas. Showing that a set is definable typically amounts to hitting it with "definable sets are a boolean algebra" several times.</p>



<a name="208520721"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208520721" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208520721">(Aug 31 2020 at 05:02)</a>:</h4>
<p>Right, and that's the part that could be eliminated "just" with porting some flypitch and proving our two definitions of definable are equivalent.</p>



<a name="208520746"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208520746" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208520746">(Aug 31 2020 at 05:03)</a>:</h4>
<p>I don't see how that would make proving that a certain set is definable any easier in practice.</p>



<a name="208520806"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208520806" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208520806">(Aug 31 2020 at 05:05)</a>:</h4>
<p>Saying <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo>∩</mo><mi>T</mi></mrow><annotation encoding="application/x-tex">S \cap T</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∩</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span> is definable, because it is the intersection of two definable sets, seems a lot shorter than saying, oh well, there are formulas <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo separator="true">,</mo><mi>g</mi></mrow><annotation encoding="application/x-tex">f, g</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span></span></span></span> that realize to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo separator="true">,</mo><mi>T</mi></mrow><annotation encoding="application/x-tex">S, T</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span>, and hence <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo>∧</mo><mi>g</mi></mrow><annotation encoding="application/x-tex">f \land g</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∧</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span></span></span></span> realizes to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo>∩</mo><mi>T</mi></mrow><annotation encoding="application/x-tex">S \cap T</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∩</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span>, therefore it is definable.</p>



<a name="208520814"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208520814" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208520814">(Aug 31 2020 at 05:05)</a>:</h4>
<p>I very much agree that what you are suggesting should be in mathlib. It will be important and useful.</p>



<a name="208520819"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208520819" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208520819">(Aug 31 2020 at 05:06)</a>:</h4>
<p>But I don't think it will help with this particular issue.</p>



<a name="208520866"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208520866" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208520866">(Aug 31 2020 at 05:06)</a>:</h4>
<p>Rather, I like it because it will allow me to say that a certain set is definable without parameters, things like that. That stuff that simply cannot be expressed in our current framework.</p>



<a name="208520921"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208520921" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208520921">(Aug 31 2020 at 05:08)</a>:</h4>
<p>The way that <span class="user-mention" data-user-id="110032">@Reid Barton</span>  stuctures one of the proofs goes like this:</p>
<ul>
<li>Take a look at this predicate which is visibly-to-a-human first-order</li>
<li>Quickly show with <code>ext</code> that it defines the set I want to show is definable</li>
<li>Spend a long time applying boolean algebra and projection axioms</li>
</ul>



<a name="208520928"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208520928" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208520928">(Aug 31 2020 at 05:08)</a>:</h4>
<p>I don't think we can automate the first bullet point without a tactic, and the second one seems inevitable, and not a problem.</p>



<a name="208520931"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208520931" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208520931">(Aug 31 2020 at 05:08)</a>:</h4>
<p>It's the 3rd one that I think can be simplified with this proof structure:</p>



<a name="208521050"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208521050" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208521050">(Aug 31 2020 at 05:12)</a>:</h4>
<p>Ok, fair enough. I agree that there a places where this would significantly shorten the proof.</p>



<a name="208521053"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208521053" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208521053">(Aug 31 2020 at 05:12)</a>:</h4>
<ul>
<li>Take a look at this explicit first-order formula that's just as easy to write as the Lean predicate</li>
<li>Show the set that it realizes is the set satisfied by set you want, this step should still be easy once we have a simp-set for unfolding the recursive definition of formula realization, and maybe that already exists in flypitch</li>
<li>Use a theorem which says <code>def_set S</code> is equivalent to "there exists a formula whose realization is S`</li>
</ul>



<a name="208521128"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208521128" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jesse Michael Han <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208521128">(Aug 31 2020 at 05:15)</a>:</h4>
<p>that will be painful with flypitch-style model theory</p>
<p>it's easier to just do backward chaining with definability lemmas than synthesize a formula and apply a soundness theorem, even if the search for definability lemmas can be phrased in terms of synthesizing a first-order formula</p>



<a name="208521293"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208521293" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208521293">(Aug 31 2020 at 05:20)</a>:</h4>
<p>I'm willing to consider that synthesizing a first-order formula with a tactic might be more difficult than I would first guess, but I still think that it'd be more straightforward when you're working manually, because a lot of model theory texts already have the formulas written out</p>



<a name="208521357"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208521357" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208521357">(Aug 31 2020 at 05:22)</a>:</h4>
<p>In any case, I don't think it matters much just yet, because we're still a long way from having either theorems about first-order formulas or a tactic</p>



<a name="208522556"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208522556" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jesse Michael Han <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208522556">(Aug 31 2020 at 05:57)</a>:</h4>
<p>in the end, the same work must be done, regardless of whether the search tree is reified as a formula or how the work is split between Lean and the user</p>
<blockquote>
<p>In any case, I don't think it matters much just yet, because we're still a long way from having either theorems about first-order formulas or a tactic</p>
</blockquote>
<p>you might be surprised, as <code>tidy</code> is OP:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">tidy</span>
<span class="kn">import</span> <span class="bp">.</span><span class="n">definable</span>

<span class="kn">open</span> <span class="n">o_minimal</span>

<span class="kn">namespace</span> <span class="n">tactic</span>

<span class="n">meta</span> <span class="n">def</span> <span class="n">definability_tactics</span> <span class="o">(</span><span class="n">md</span> <span class="o">:</span> <span class="n">transparency</span> <span class="o">:=</span> <span class="kn">reducible</span><span class="o">)</span> <span class="o">:</span> <span class="n">list</span> <span class="o">(</span><span class="n">tactic</span> <span class="n">string</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">[</span>
  <span class="n">assumption</span> <span class="bp">*&gt;</span> <span class="n">pure</span> <span class="s2">&quot;assumption&quot;</span><span class="o">,</span>
  <span class="bp">`</span><span class="o">[</span><span class="n">apply</span> <span class="n">def_fun_subtype_val</span><span class="o">]</span> <span class="bp">*&gt;</span> <span class="n">pure</span> <span class="s2">&quot;apply def_fun_subtype_val&quot;</span><span class="o">,</span>
  <span class="bp">`</span><span class="o">[</span><span class="n">apply</span> <span class="n">def_fun</span><span class="bp">.</span><span class="n">id</span><span class="o">]</span> <span class="bp">*&gt;</span> <span class="n">pure</span> <span class="s2">&quot;apply def_fun.id&quot;</span><span class="o">,</span>
  <span class="bp">`</span><span class="o">[</span><span class="n">apply</span> <span class="n">def_fun</span><span class="bp">.</span><span class="n">fst</span><span class="o">]</span> <span class="bp">*&gt;</span> <span class="n">pure</span> <span class="s2">&quot;apply def_fun.fst&quot;</span><span class="o">,</span>
  <span class="bp">`</span><span class="o">[</span><span class="n">apply</span> <span class="n">def_fun</span><span class="bp">.</span><span class="n">snd</span><span class="o">]</span> <span class="bp">*&gt;</span> <span class="n">pure</span> <span class="s2">&quot;apply def_fun.snd&quot;</span><span class="o">,</span>
  <span class="bp">`</span><span class="o">[</span><span class="n">apply</span> <span class="n">def_fun</span><span class="bp">.</span><span class="n">id</span><span class="o">]</span> <span class="bp">*&gt;</span> <span class="n">pure</span> <span class="s2">&quot;apply def_fun.id&quot;</span><span class="o">,</span>
  <span class="bp">`</span><span class="o">[</span><span class="n">apply</span> <span class="n">def_fun_const</span><span class="o">]</span> <span class="bp">*&gt;</span> <span class="n">pure</span> <span class="s2">&quot;apply def_fun_const&quot;</span><span class="o">,</span>
  <span class="bp">`</span><span class="o">[</span><span class="n">apply</span> <span class="n">def_val_const</span><span class="o">]</span> <span class="bp">*&gt;</span> <span class="n">pure</span> <span class="s2">&quot;apply def_val_const&quot;</span><span class="o">,</span>
  <span class="bp">`</span><span class="o">[</span><span class="n">apply</span> <span class="n">def_fun</span><span class="bp">.</span><span class="n">image</span><span class="o">]</span> <span class="bp">*&gt;</span> <span class="n">pure</span> <span class="s2">&quot;apply def_fun.image&quot;</span><span class="o">,</span>
  <span class="bp">`</span><span class="o">[</span><span class="n">apply</span> <span class="n">def_fun</span><span class="bp">.</span><span class="n">comp</span><span class="o">]</span> <span class="bp">*&gt;</span> <span class="n">pure</span> <span class="s2">&quot;apply def_fun.comp&quot;</span><span class="o">,</span>
  <span class="bp">`</span><span class="o">[</span><span class="n">apply</span> <span class="n">def_fun</span><span class="bp">.</span><span class="n">preimage</span><span class="o">]</span> <span class="bp">*&gt;</span> <span class="n">pure</span> <span class="s2">&quot;apply def_fun.preimage&quot;</span><span class="o">,</span>
  <span class="bp">`</span><span class="o">[</span><span class="n">apply</span> <span class="n">def_set</span><span class="bp">.</span><span class="n">imp</span><span class="o">]</span> <span class="bp">*&gt;</span> <span class="n">pure</span> <span class="s2">&quot;apply def_set.imp&quot;</span><span class="o">,</span>
  <span class="bp">`</span><span class="o">[</span><span class="n">apply</span> <span class="n">def_set_eq</span><span class="o">]</span> <span class="bp">*&gt;</span> <span class="n">pure</span> <span class="s2">&quot;apply def_set_eq&quot;</span><span class="o">,</span>
  <span class="bp">`</span><span class="o">[</span><span class="n">apply</span> <span class="n">definable_le</span><span class="o">]</span> <span class="bp">*&gt;</span> <span class="n">pure</span> <span class="s2">&quot;apply definable_le&quot;</span><span class="o">,</span>
  <span class="bp">`</span><span class="o">[</span><span class="n">apply</span> <span class="n">def_set</span><span class="bp">.</span><span class="k">forall</span><span class="o">]</span> <span class="bp">*&gt;</span> <span class="n">pure</span> <span class="s2">&quot;apply def_set.forall&quot;</span><span class="o">,</span>
  <span class="bp">`</span><span class="o">[</span><span class="n">apply</span> <span class="n">def_set</span><span class="bp">.</span><span class="n">prod</span><span class="o">]</span> <span class="bp">*&gt;</span> <span class="n">pure</span> <span class="s2">&quot;apply def_set.prod&quot;</span>
<span class="o">]</span>

<span class="kn">namespace</span> <span class="n">interactive</span>
<span class="n">setup_tactic_parser</span>

<span class="n">meta</span> <span class="n">def</span> <span class="n">definability</span> <span class="o">(</span><span class="n">trace</span> <span class="o">:</span> <span class="n">parse</span> <span class="err">$</span> <span class="n">optional</span> <span class="err">$</span> <span class="n">tk</span> <span class="s2">&quot;?&quot;</span><span class="o">)</span> <span class="o">:</span> <span class="n">tactic</span> <span class="n">unit</span> <span class="o">:=</span>
<span class="n">tactic</span><span class="bp">.</span><span class="n">tidy</span> <span class="o">{</span> <span class="n">tactics</span> <span class="o">:=</span> <span class="n">definability_tactics</span> <span class="kn">reducible</span><span class="o">,</span> <span class="n">trace_result</span> <span class="o">:=</span> <span class="n">trace</span><span class="bp">.</span><span class="n">is_some</span> <span class="o">}</span>

<span class="kn">end</span> <span class="n">interactive</span>
<span class="kn">end</span> <span class="n">tactic</span>
</code></pre></div>


<div class="codehilite"><pre><span></span><code>   have finite_fibers : ∀ z, finite (f ⁻¹&#39; {z}),
   { intro z,
     have : def_set S (subtype.val &#39;&#39; (f ⁻¹&#39; {z})),
<span class="gd">-    { apply def_fun.image,</span>
<span class="gd">-      exact def_fun_subtype_val,</span>
<span class="gd">-      exact def_fun.preimage hf def_val_const },</span>
<span class="gi">+    { definability },</span>


<span class="gd">-  have : def_set S (subtype.val &#39;&#39; K) := begin</span>
<span class="gd">-    apply def_fun.image def_fun_subtype_val,</span>
<span class="gd">-    -- TODO: automate this proof</span>
<span class="gd">-    apply def_set.forall,</span>
<span class="gd">-    apply def_set.imp,</span>
<span class="gd">-    apply def_set_eq,</span>
<span class="gd">-    exact hf.comp def_fun.fst,</span>
<span class="gd">-    exact hf.comp def_fun.snd,</span>
<span class="gd">-    -- TODO: definable_le instance for Ioo</span>
<span class="gd">-    change def_set S {p : Ioo a b × Ioo a b | p.1.val ≤ p.2.val},</span>
<span class="gd">-    apply definable_le,</span>
<span class="gd">-    exact def_fun_subtype_val.comp def_fun.fst,</span>
<span class="gd">-    exact def_fun_subtype_val.comp def_fun.snd</span>
<span class="gd">-  end,</span>
<span class="gi">+  have : def_set S (subtype.val &#39;&#39; K) :=</span>
<span class="gi">+    by { definability, change def_set S {p : Ioo a b × Ioo a b | p.1.val ≤ p.2.val}, definability },</span>
</code></pre></div>



<a name="208544942"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208544942" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208544942">(Aug 31 2020 at 11:23)</a>:</h4>
<p><span class="user-mention silent" data-user-id="302826">Aaron Anderson</span> <a href="#narrow/stream/116395-maths/topic/o-minimality.20repo/near/208521293">said</a>:</p>
<blockquote>
<p>I'm willing to consider that synthesizing a first-order formula with a tactic might be more difficult than I would first guess, but I still think that it'd be more straightforward when you're working manually, because a lot of model theory texts already have the formulas written out</p>
</blockquote>
<p>It is less straightforward than it might appear; for example, in <code>def_interior</code>'s</p>
<div class="codehilite"><pre><span></span><code>    <span class="o">{</span><span class="n">x</span> <span class="bp">|</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">l</span> <span class="n">u</span> <span class="o">:</span> <span class="n">fin</span> <span class="bp">_</span> <span class="bp">→</span> <span class="n">R</span><span class="o">),</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">i</span><span class="o">,</span> <span class="n">l</span> <span class="n">i</span> <span class="bp">&lt;</span> <span class="n">coords</span> <span class="n">R</span> <span class="n">x</span> <span class="n">i</span> <span class="bp">∧</span> <span class="n">coords</span> <span class="n">R</span> <span class="n">x</span> <span class="n">i</span> <span class="bp">&lt;</span> <span class="n">u</span> <span class="n">i</span><span class="o">)</span>
         <span class="bp">∧</span> <span class="bp">∀</span> <span class="n">y</span><span class="o">,</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">i</span><span class="o">,</span> <span class="n">l</span> <span class="n">i</span> <span class="bp">&lt;</span> <span class="n">coords</span> <span class="n">R</span> <span class="n">y</span> <span class="n">i</span> <span class="bp">∧</span> <span class="n">coords</span> <span class="n">R</span> <span class="n">y</span> <span class="n">i</span> <span class="bp">&lt;</span> <span class="n">u</span> <span class="n">i</span><span class="o">)</span> <span class="bp">→</span> <span class="n">y</span> <span class="err">∈</span> <span class="n">s</span><span class="o">},</span>
</code></pre></div>


<ul>
<li>The <code>∃ l u</code>, <code>∀ y</code> quantifiers bind <code>n</code> <code>R</code>-valued variables, not just one. Furthermore, the <code>∀ y</code> one implicitly restricts <code>y</code> to the subset <code>X</code> of <code>R^n</code>.</li>
<li>On the other hand, the <code>∀ i</code>s aren't actually quantifiers in the first-order language at all, but rather a way to express a conjunction of a variable number of formulas. The formula written out looks something like</li>
</ul>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi mathvariant="normal">∃</mi><msub><mi>l</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msub><mi>l</mi><mi>n</mi></msub><mo separator="true">,</mo><msub><mi>u</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msub><mi>u</mi><mi>n</mi></msub><mo separator="true">,</mo><msub><mi>l</mi><mn>1</mn></msub><mo>&lt;</mo><msub><mi>x</mi><mn>1</mn></msub><mo>&lt;</mo><msub><mi>u</mi><mn>1</mn></msub><mo>∧</mo><mo>⋯</mo><mo>∧</mo><msub><mi>l</mi><mi>n</mi></msub><mo>&lt;</mo><msub><mi>x</mi><mi>n</mi></msub><mo>&lt;</mo><msub><mi>u</mi><mi>n</mi></msub><mo>∧</mo><mspace linebreak="newline"></mspace><mo stretchy="false">(</mo><mi mathvariant="normal">∀</mi><msub><mi>y</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msub><mi>y</mi><mi>n</mi></msub><mo separator="true">,</mo><msub><mi>l</mi><mn>1</mn></msub><mo>&lt;</mo><msub><mi>y</mi><mn>1</mn></msub><mo>&lt;</mo><msub><mi>u</mi><mn>1</mn></msub><mo>∧</mo><mo>⋯</mo><mo>∧</mo><msub><mi>l</mi><mi>n</mi></msub><mo>&lt;</mo><msub><mi>y</mi><mi>n</mi></msub><mo>&lt;</mo><msub><mi>u</mi><mi>n</mi></msub><mtext>  </mtext><mo>⟹</mo><mtext>  </mtext><mo stretchy="false">(</mo><msub><mi>y</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msub><mi>y</mi><mi>n</mi></msub><mo stretchy="false">)</mo><mo>∈</mo><mi>S</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\exists l_1, \ldots, l_n, u_1, \ldots, u_n,
l_1 &lt; x_1 &lt; u_1 \wedge \cdots \wedge l_n &lt; x_n &lt; u_n \wedge \\
(\forall y_1, \ldots, y_n, l_1 &lt; y_1 &lt; u_1 \wedge \cdots \wedge l_n &lt; y_n &lt;
u_n \implies (y_1, \ldots, y_n) \in S)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord">∃</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.01968em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.01968em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.01968em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.6891em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7055600000000001em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∧</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.55556em;vertical-align:0em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∧</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.01968em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.6891em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7055600000000001em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∧</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">∀</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.01968em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7335400000000001em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7055600000000001em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∧</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.55556em;vertical-align:0em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∧</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.01968em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.7335400000000001em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.675em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⟹</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mclose">)</span></span></span></span></span></p>
<ul>
<li>We have to find some way to handle the condition "<code>y ∈ s</code>", using the hypothesis that <code>s</code> is definable.</li>
</ul>



<a name="208545230"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/o-minimality%20repo/near/208545230" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/o-minimality.20repo.html#208545230">(Aug 31 2020 at 11:28)</a>:</h4>
<p>The nice thing about just applying lemmas rather than writing down some term of an inductive type is that you don't have to decide up front what the rules for building formulas are--you can keep extending your collection of lemmas as needed.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>