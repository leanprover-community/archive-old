---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/gcd_monoid.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/gcd_monoid.html">gcd_monoid</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="303478640"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/gcd_monoid/near/303478640" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/gcd_monoid.html#303478640">(Oct 11 2022 at 16:50)</a>:</h4>
<p>I don't find an instance of <code>gcd_monoid</code> for a <code>principal_ideal_domain</code> (nor of <code>gcd_normalized_monoid</code>). Is it normal?</p>



<a name="303481287"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/gcd_monoid/near/303481287" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/gcd_monoid.html#303481287">(Oct 11 2022 at 17:03)</a>:</h4>
<p>It seems it's not there</p>



<a name="303481449"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/gcd_monoid/near/303481449" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/gcd_monoid.html#303481449">(Oct 11 2022 at 17:04)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/unique_factorization_monoid.to_gcd_monoid">docs#unique_factorization_monoid.to_gcd_monoid</a> and <a href="https://leanprover-community.github.io/mathlib_docs/find/unique_factorization_monoid.to_normalized_gcd_monoid">docs#unique_factorization_monoid.to_normalized_gcd_monoid</a> are not instances though <a href="https://leanprover-community.github.io/mathlib_docs/find/docs">docs#docs</a>#principal_ideal_ring.to_unique_factorization_monoid is.</p>



<a name="303481541"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/gcd_monoid/near/303481541" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/gcd_monoid.html#303481541">(Oct 11 2022 at 17:04)</a>:</h4>
<p>because gcd_monoid carries data</p>



<a name="303481806"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/gcd_monoid/near/303481806" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/gcd_monoid.html#303481806">(Oct 11 2022 at 17:06)</a>:</h4>
<p>Ah sure</p>



<a name="303481862"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/gcd_monoid/near/303481862" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/gcd_monoid.html#303481862">(Oct 11 2022 at 17:06)</a>:</h4>
<p>How the normalization is defined on a general UFD?!</p>



<a name="303482015"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/gcd_monoid/near/303482015" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/gcd_monoid.html#303482015">(Oct 11 2022 at 17:07)</a>:</h4>
<p>It takes [normalization_monoid Î±] as an argument</p>



<a name="303482037"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/gcd_monoid/near/303482037" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/gcd_monoid.html#303482037">(Oct 11 2022 at 17:07)</a>:</h4>
<p>Ah ops</p>



<a name="303482061"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/gcd_monoid/near/303482061" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/gcd_monoid.html#303482061">(Oct 11 2022 at 17:08)</a>:</h4>
<p>It makes sense</p>



<a name="303482433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/gcd_monoid/near/303482433" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/gcd_monoid.html#303482433">(Oct 11 2022 at 17:09)</a>:</h4>
<p>Still I think <a href="https://leanprover-community.github.io/mathlib_docs/find/unique_factorization_monoid.to_gcd_monoid">https://leanprover-community.github.io/mathlib_docs/find/unique_factorization_monoid.to_gcd_monoid</a> should be an instance</p>



<a name="303482543"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/gcd_monoid/near/303482543" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/gcd_monoid.html#303482543">(Oct 11 2022 at 17:10)</a>:</h4>
<p>You need <a href="https://leanprover-community.github.io/mathlib_docs/find/unique_factorization_monoid.normalization_monoid">docs#unique_factorization_monoid.normalization_monoid</a> to choose a normalization. <del>(It seems this construction can be generalized to any monoid ...)</del></p>



<a name="303482981"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/gcd_monoid/near/303482981" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/gcd_monoid.html#303482981">(Oct 11 2022 at 17:12)</a>:</h4>
<p>Mmm, if it is an instance it risks to conflict with the normalized one</p>



<a name="303483035"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/gcd_monoid/near/303483035" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/gcd_monoid.html#303483035">(Oct 11 2022 at 17:13)</a>:</h4>
<p>So annoying</p>



<a name="303511190"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/gcd_monoid/near/303511190" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/gcd_monoid.html#303511190">(Oct 11 2022 at 20:05)</a>:</h4>
<p>I think it doesn't hurt to add <code>unique_factorization_monoid -&gt; nonempty (gcd_monoid / normalization_monoid / normalized_gcd_monoid)</code> instances, and then you can use choice (or just destruct the <code>nonempty</code> when in a proof) to get the desired (normalized)_(gcd)_monoid.</p>



<a name="303521373"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/gcd_monoid/near/303521373" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/gcd_monoid.html#303521373">(Oct 11 2022 at 21:15)</a>:</h4>
<p>Well, but then if you need to use choice, or destruct <code>nonempty</code> in a proof, isn't it the same as doing <code>haveI : blabla</code> and add the local instance? By "the same" I mean "equally annoying".</p>



<a name="303522649"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/gcd_monoid/near/303522649" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/gcd_monoid.html#303522649">(Oct 11 2022 at 21:24)</a>:</h4>
<p>Maybe some theorems could be changed to use the <code>nonempty gcd_monoid</code> etc. hypothesis, if gcd doesn't appear in the statement? If you want the gcd data you have to make some choice, right? If you're working with explicit types there may already be gcd_monoid instances like <a href="https://leanprover-community.github.io/mathlib_docs/find/polynomial.normalized_gcd_monoid">docs#polynomial.normalized_gcd_monoid</a>. I don't know about your use case so maybe this is a <a href="https://en.wikipedia.org/wiki/XY_problem">#xy</a>.</p>



<a name="303522938"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/gcd_monoid/near/303522938" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/gcd_monoid.html#303522938">(Oct 11 2022 at 21:27)</a>:</h4>
<p>Well, my use case is for <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi mathvariant="double-struck">Z</mi><mi>p</mi></msub></mrow><annotation encoding="application/x-tex">\mathbb{Z}_p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.975em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathbb">Z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">â</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span> but in general I would like to have <span class="user-mention" data-user-id="130384">@Riccardo Brasca</span> 's  proof that the minimal polynomial does not change when passing to the field of fractions for arbitrary PID's. Now we have it for <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">Z</mi></mrow><annotation encoding="application/x-tex">\mathbb{Z}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6889em;"></span><span class="mord mathbb">Z</span></span></span></span> and for <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo stretchy="false">[</mo><mi>T</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">k[T]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mclose">]</span></span></span></span> but this sounds strange.</p>



<a name="303523103"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/gcd_monoid/near/303523103" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/gcd_monoid.html#303523103">(Oct 11 2022 at 21:28)</a>:</h4>
<p>At any rate, I will use PID-&gt;UFM-&gt;normalized_gcd using <code>haveI</code> for the second step for the time being.</p>



<a name="303524107"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/gcd_monoid/near/303524107" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/gcd_monoid.html#303524107">(Oct 11 2022 at 21:36)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/minpoly.gcd_domain_eq_field_fractions">docs#minpoly.gcd_domain_eq_field_fractions</a> is a theorem that could have <code>[normalized_gcd_monoid R]</code> replaced by <code>[nonempty (normalized_gcd_monoid R)]</code> as far as I can see.</p>
<p>We certainly don't want to end up with two non-defeq instances on the same type. We could use <a href="https://leanprover-community.github.io/mathlib_docs/notes.html#forgetful%20inheritance">forgetful inheritance</a> and demand that <code>unique_factorization_monoid</code> carries the data of gcd and normalization, but it seems to me there's no good way to normalize in a consistent way in e.g. a number ring of class number one.</p>



<a name="303524347"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/gcd_monoid/near/303524347" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/gcd_monoid.html#303524347">(Oct 11 2022 at 21:38)</a>:</h4>
<p>Yes, I think you are right. Yet I wonder if there is a mathematical reason for these troubles: the theorem should hold for a PID, right? The choice of normalization is only needed to allow the greater generality of <code>gcd_monoids</code> instead of <code>UFD</code>'s, am I wrong?</p>



<a name="303524702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/gcd_monoid/near/303524702" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/gcd_monoid.html#303524702">(Oct 11 2022 at 21:41)</a>:</h4>
<p>Actually I think this particular theorem could simply be generalized to use <a href="https://leanprover-community.github.io/mathlib_docs/find/is_integrally_closed">docs#is_integrally_closed</a> as I mention in <a href="#narrow/stream/217875-Is-there-code-for-X.3F/topic/Power.20basis.20of.20.60adjoin.20R.20x.60/near/303506914">another thread</a>, which is a Prop, then typeclass inference through the instances <a href="https://leanprover-community.github.io/mathlib_docs/find/unique_factorization_monoid.is_integrally_closed">docs#unique_factorization_monoid.is_integrally_closed</a> and <a href="https://leanprover-community.github.io/mathlib_docs/find/principal_ideal_ring.to_unique_factorization_monoid">docs#principal_ideal_ring.to_unique_factorization_monoid</a> should be automatic.</p>
<p>Before that happens, PID-&gt;UFM-&gt;normalized_gcd is probably the easiest way to go.</p>
<p>Actually right now if you want to use <a href="https://leanprover-community.github.io/mathlib_docs/find/adjoin_root.minpoly.equiv_adjoin">docs#adjoin_root.minpoly.equiv_adjoin</a> for R a field you have to go through that ordeal as well.</p>



<a name="303525197"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/gcd_monoid/near/303525197" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/gcd_monoid.html#303525197">(Oct 11 2022 at 21:45)</a>:</h4>
<p>Actually, I tried but I am stuck with <code>normalization_monoid â¤_[p]</code> which seems to be needed for <a href="https://leanprover-community.github.io/mathlib_docs/find/unique_factorization_monoid.to_normalized_gcd_monoid">docs#unique_factorization_monoid.to_normalized_gcd_monoid</a> But this cannot be inferred by PID/UFD automatically.</p>



<a name="303525336"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/gcd_monoid/near/303525336" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/gcd_monoid.html#303525336">(Oct 11 2022 at 21:46)</a>:</h4>
<p>But I agree that <code>integrally_closed</code> seems the right generality, I hope it will get PR'd soon.</p>



<a name="303526185"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/gcd_monoid/near/303526185" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/gcd_monoid.html#303526185">(Oct 11 2022 at 21:51)</a>:</h4>
<p>This is what you are missing:<br>
<span class="user-mention silent" data-user-id="224323">Junyan Xu</span> <a href="#narrow/stream/116395-maths/topic/gcd_monoid/near/303482543">said</a>:</p>
<blockquote>
<p>You need <a href="https://leanprover-community.github.io/mathlib_docs/find/unique_factorization_monoid.normalization_monoid">docs#unique_factorization_monoid.normalization_monoid</a> to choose a normalization. <del>(It seems this construction can be generalized to any monoid ...)</del></p>
</blockquote>



<a name="303526536"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/gcd_monoid/near/303526536" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/gcd_monoid.html#303526536">(Oct 11 2022 at 21:53)</a>:</h4>
<p>Ah, thanks! As a last question: where does this "normalization" idea come from? Do we have an example in nature of something having several normalizations? And why is it called a "normalization" (the <code>norm_unit</code> gadget in <a href="https://leanprover-community.github.io/mathlib_docs/find/normalization_monoid">docs#normalization_monoid</a> looks completely obscure to me, what is it meant to represent?)</p>



<a name="303527354"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/gcd_monoid/near/303527354" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/gcd_monoid.html#303527354">(Oct 11 2022 at 22:00)</a>:</h4>
<p>The first example is multiplying the inverse of the leading coefficient of a polynomial to make it monic (over a field; over a general normalized_monoid you may still normalize the leading coefficient the same way you normalize it in the base monoid), and in the integers you multiply by the sign; the other examples tend to have trivial group of units so the <a href="https://leanprover-community.github.io/mathlib_docs/find/normalize">docs#normalize</a> map is just identity.</p>



<a name="303527882"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/gcd_monoid/near/303527882" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/gcd_monoid.html#303527882">(Oct 11 2022 at 22:03)</a>:</h4>
<p>Oh, I see. I think I need to understand this better, I will come back if I have any further questions. But thanks so much!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>