---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/Showing.20equality.20of.20finite.20sets.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Showing.20equality.20of.20finite.20sets.html">Showing equality of finite sets</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="213644280"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Showing%20equality%20of%20finite%20sets/near/213644280" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gihan Marasingha <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Showing.20equality.20of.20finite.20sets.html#213644280">(Oct 17 2020 at 09:56)</a>:</h4>
<p>Is there a tactic to show two finite sets (for simplicity, let's say sets of integers) are equal? That is, can I do the following in one line? Same question for showing two such sets are not equal.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.set</span>

<span class="kn">open</span> <span class="n">set</span>

<span class="kd">example</span> <span class="o">:</span> <span class="o">({</span><span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">8</span><span class="o">}</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℤ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">({</span><span class="mi">5</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">8</span><span class="o">,</span> <span class="mi">6</span><span class="o">}</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="n">ext_iff</span><span class="o">,</span> <span class="c1">-- Use the definition of set equality</span>
  <span class="n">intro</span> <span class="n">x</span><span class="o">,</span> <span class="c1">-- Assume `x` is an integer.</span>
  <span class="n">split</span><span class="o">,</span> <span class="c1">-- It suffices to prove `x ∈ {5, 6, 7, 8} → x ∈ {5, 7, 5, 8, 6}` and the converse.</span>
  <span class="o">{</span> <span class="n">rintro</span>  <span class="o">(</span><span class="n">h₈</span> <span class="bp">|</span> <span class="n">h₇</span> <span class="bp">|</span> <span class="n">h₆</span> <span class="bp">|</span> <span class="n">h₅</span> <span class="bp">|</span> <span class="n">k</span><span class="o">),</span>
    <span class="o">{</span> <span class="n">rw</span> <span class="n">h₈</span><span class="o">,</span> <span class="n">right</span><span class="o">,</span> <span class="n">left</span><span class="o">,</span> <span class="n">refl</span><span class="o">,</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">rw</span> <span class="n">h₇</span><span class="o">,</span> <span class="n">right</span><span class="o">,</span> <span class="n">right</span><span class="o">,</span> <span class="n">right</span><span class="o">,</span> <span class="n">left</span><span class="o">,</span> <span class="n">refl</span><span class="o">,</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">rw</span> <span class="n">h₆</span><span class="o">,</span> <span class="n">left</span><span class="o">,</span> <span class="n">refl</span><span class="o">,</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">rw</span> <span class="n">h₅</span><span class="o">,</span> <span class="n">right</span><span class="o">,</span> <span class="n">right</span><span class="o">,</span> <span class="n">left</span><span class="o">,</span> <span class="n">refl</span><span class="o">,</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">exfalso</span><span class="o">,</span> <span class="n">apply</span> <span class="n">k</span><span class="o">,</span> <span class="o">},</span> <span class="o">},</span> <span class="c1">-- The case `x ∈ ∅`.</span>
  <span class="o">{</span> <span class="n">rintro</span> <span class="o">(</span><span class="n">h₆</span> <span class="bp">|</span> <span class="n">h₈</span> <span class="bp">|</span> <span class="n">h₅</span> <span class="bp">|</span> <span class="n">h₇</span> <span class="bp">|</span> <span class="n">h₅</span> <span class="bp">|</span> <span class="n">k</span><span class="o">),</span>
    <span class="o">{</span> <span class="n">rw</span> <span class="n">h₆</span><span class="o">,</span> <span class="n">right</span><span class="o">,</span> <span class="n">right</span><span class="o">,</span> <span class="n">left</span><span class="o">,</span> <span class="n">refl</span><span class="o">,</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">rw</span> <span class="n">h₈</span><span class="o">,</span> <span class="n">left</span><span class="o">,</span> <span class="n">refl</span><span class="o">,</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">rw</span> <span class="n">h₅</span><span class="o">,</span> <span class="n">right</span><span class="o">,</span> <span class="n">right</span><span class="o">,</span> <span class="n">right</span><span class="o">,</span> <span class="n">left</span><span class="o">,</span> <span class="n">refl</span><span class="o">,</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">rw</span> <span class="n">h₇</span><span class="o">,</span> <span class="n">right</span><span class="o">,</span> <span class="n">left</span><span class="o">,</span> <span class="n">refl</span><span class="o">,</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">rw</span> <span class="n">h₅</span><span class="o">,</span> <span class="n">right</span><span class="o">,</span> <span class="n">right</span><span class="o">,</span> <span class="n">right</span><span class="o">,</span> <span class="n">left</span><span class="o">,</span> <span class="n">refl</span><span class="o">,</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">exfalso</span><span class="o">,</span> <span class="n">apply</span> <span class="n">k</span> <span class="o">},</span> <span class="o">},</span>
<span class="kd">end</span>
</code></pre></div>



<a name="213644552"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Showing%20equality%20of%20finite%20sets/near/213644552" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Showing.20equality.20of.20finite.20sets.html#213644552">(Oct 17 2020 at 10:05)</a>:</h4>
<p>This works:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.set</span>

<span class="kn">open</span> <span class="n">set</span>

<span class="kd">example</span> <span class="o">:</span> <span class="o">({</span><span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">8</span><span class="o">}</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℤ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">({</span><span class="mi">5</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">8</span><span class="o">,</span> <span class="mi">6</span><span class="o">}</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="o">{</span> <span class="n">ext</span><span class="o">,</span> <span class="n">finish</span> <span class="o">}</span>
</code></pre></div>



<a name="213644608"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Showing%20equality%20of%20finite%20sets/near/213644608" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gihan Marasingha <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Showing.20equality.20of.20finite.20sets.html#213644608">(Oct 17 2020 at 10:06)</a>:</h4>
<p>Thanks very much!</p>



<a name="213644686"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Showing%20equality%20of%20finite%20sets/near/213644686" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Showing.20equality.20of.20finite.20sets.html#213644686">(Oct 17 2020 at 10:08)</a>:</h4>
<p><code>simp</code> should work too</p>



<a name="213644702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Showing%20equality%20of%20finite%20sets/near/213644702" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Showing.20equality.20of.20finite.20sets.html#213644702">(Oct 17 2020 at 10:09)</a>:</h4>
<p><code>by simp</code> reports: </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">tactic</span> <span class="n">failed</span><span class="o">,</span> <span class="n">there</span> <span class="n">are</span> <span class="n">unsolved</span> <span class="n">goals</span>
<span class="n">state</span><span class="o">:</span>
<span class="bp">⊢</span> <span class="o">{</span><span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">8</span><span class="o">}</span> <span class="bp">=</span> <span class="o">{</span><span class="mi">7</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">8</span><span class="o">,</span> <span class="mi">6</span><span class="o">}</span>
</code></pre></div>



<a name="213644784"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Showing%20equality%20of%20finite%20sets/near/213644784" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Showing.20equality.20of.20finite.20sets.html#213644784">(Oct 17 2020 at 10:11)</a>:</h4>
<p>Worth noting perhaps that if you use <code>finset</code>s, <code>dec_trivial</code> works:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.finset</span>
<span class="kd">example</span> <span class="o">:</span> <span class="o">({</span><span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">8</span><span class="o">}</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">ℤ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">({</span><span class="mi">5</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">8</span><span class="o">,</span> <span class="mi">6</span><span class="o">}</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">:=</span> <span class="n">dec_trivial</span>
</code></pre></div>



<a name="213644886"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Showing%20equality%20of%20finite%20sets/near/213644886" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Showing.20equality.20of.20finite.20sets.html#213644886">(Oct 17 2020 at 10:14)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">:</span> <span class="o">({</span><span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">8</span><span class="o">}</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℤ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">({</span><span class="mi">5</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">8</span><span class="o">,</span> <span class="mi">6</span><span class="o">}</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">set.singleton_def</span><span class="o">,</span> <span class="n">set.insert_comm</span><span class="o">,</span> <span class="n">set.insert_eq_of_mem</span><span class="o">,</span> <span class="n">set.mem_insert</span><span class="o">]</span>
</code></pre></div>



<a name="213646247"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Showing%20equality%20of%20finite%20sets/near/213646247" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Showing.20equality.20of.20finite.20sets.html#213646247">(Oct 17 2020 at 10:53)</a>:</h4>
<p>I don't know how to prove an inequality easily though:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.set</span>
<span class="kd">example</span> <span class="o">:</span> <span class="o">({</span><span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">8</span><span class="o">}</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℤ</span><span class="o">)</span> <span class="bp">≠</span> <span class="o">({</span><span class="mi">15</span><span class="o">,</span> <span class="mi">15</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">8</span><span class="o">,</span> <span class="mi">6</span><span class="o">}</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">sorry</span>
</code></pre></div>



<a name="213646319"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Showing%20equality%20of%20finite%20sets/near/213646319" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Showing.20equality.20of.20finite.20sets.html#213646319">(Oct 17 2020 at 10:55)</a>:</h4>
<p>probably lift to finsets and use dec_trivial</p>



<a name="213646333"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Showing%20equality%20of%20finite%20sets/near/213646333" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Showing.20equality.20of.20finite.20sets.html#213646333">(Oct 17 2020 at 10:56)</a>:</h4>
<p>or observe that <code>15</code> is in one and not the other (which can be proven fairly automatically)</p>



<a name="213646485"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Showing%20equality%20of%20finite%20sets/near/213646485" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gihan Marasingha <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Showing.20equality.20of.20finite.20sets.html#213646485">(Oct 17 2020 at 10:59)</a>:</h4>
<p>Using your ideas, I can simplify a proof that two sets aren't equal, but am I missing a trick in the proof below? I understand that <code>dec_trivial</code> would work if these were <code>finset</code>s. And how might one do this with <code>simp only</code>?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">:</span> <span class="o">({</span><span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">8</span><span class="o">}</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℤ</span><span class="o">)</span> <span class="bp">≠</span> <span class="o">({</span><span class="mi">5</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">8</span><span class="o">,</span> <span class="mi">6</span><span class="o">}</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">ext_iff</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">contrapose</span><span class="bp">!</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">use</span> <span class="mi">7</span><span class="o">,</span>
  <span class="n">finish</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="213646686"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Showing%20equality%20of%20finite%20sets/near/213646686" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Showing.20equality.20of.20finite.20sets.html#213646686">(Oct 17 2020 at 11:04)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.set.basic</span> <span class="n">tactic.norm_num</span>

<span class="kd">theorem</span> <span class="n">ne_of_mem_of_not_mem_right</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span><span class="o">}</span> <span class="o">[</span><span class="n">has_mem</span> <span class="n">α</span> <span class="n">β</span><span class="o">]</span> <span class="o">{</span><span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">β</span><span class="o">}</span>
  <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">h₁</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">∈</span> <span class="n">s</span><span class="o">)</span> <span class="o">(</span><span class="n">h₂</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">∉</span> <span class="n">t</span><span class="o">)</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">≠</span> <span class="n">t</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">h</span><span class="o">,</span> <span class="n">h₂</span> <span class="bp">$</span> <span class="n">h</span> <span class="bp">▸</span> <span class="n">h₁</span>

<span class="kd">example</span> <span class="o">:</span> <span class="o">({</span><span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">8</span><span class="o">}</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℤ</span><span class="o">)</span> <span class="bp">≠</span> <span class="o">({</span><span class="mi">5</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">8</span><span class="o">,</span> <span class="mi">6</span><span class="o">}</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">ne_of_mem_of_not_mem_right</span> <span class="mi">7</span> <span class="o">(</span><span class="kd">by</span> <span class="n">simp</span><span class="o">)</span> <span class="o">(</span><span class="kd">by</span> <span class="n">norm_num</span><span class="o">)</span>
</code></pre></div>



<a name="213646790"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Showing%20equality%20of%20finite%20sets/near/213646790" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Showing.20equality.20of.20finite.20sets.html#213646790">(Oct 17 2020 at 11:07)</a>:</h4>
<p>or without the lemma:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">:</span> <span class="o">({</span><span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">8</span><span class="o">}</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℤ</span><span class="o">)</span> <span class="bp">≠</span> <span class="o">({</span><span class="mi">5</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">8</span><span class="o">,</span> <span class="mi">6</span><span class="o">}</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="n">e</span><span class="o">,</span> <span class="o">(</span><span class="kd">by</span> <span class="n">norm_num</span> <span class="o">:</span> <span class="o">(</span><span class="mi">7</span><span class="o">:</span><span class="n">ℤ</span><span class="o">)</span> <span class="bp">∉</span> <span class="o">({</span><span class="mi">5</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">8</span><span class="o">,</span> <span class="mi">6</span><span class="o">}</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℤ</span><span class="o">))</span> <span class="bp">$</span> <span class="n">e</span> <span class="bp">▸</span> <span class="kd">by</span> <span class="n">simp</span>
</code></pre></div>



<a name="213647365"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Showing%20equality%20of%20finite%20sets/near/213647365" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Showing.20equality.20of.20finite.20sets.html#213647365">(Oct 17 2020 at 11:21)</a>:</h4>
<p>Here's a proof going through <code>finset</code>s:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.set</span>
<span class="kd">example</span> <span class="o">:</span> <span class="o">({</span><span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">8</span><span class="o">}</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℤ</span><span class="o">)</span> <span class="bp">≠</span> <span class="o">({</span><span class="mi">15</span><span class="o">,</span> <span class="mi">15</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">8</span><span class="o">,</span> <span class="mi">6</span><span class="o">}</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">have</span> <span class="o">:</span> <span class="o">({</span><span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">8</span><span class="o">}</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">ℤ</span><span class="o">)</span> <span class="bp">≠</span> <span class="o">{</span><span class="mi">15</span><span class="o">,</span> <span class="mi">15</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">8</span><span class="o">,</span> <span class="mi">6</span><span class="o">}</span> <span class="o">:=</span> <span class="n">dec_trivial</span><span class="o">,</span>
  <span class="n">contrapose</span><span class="bp">!</span> <span class="n">this</span><span class="o">,</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">this</span><span class="o">,</span> <span class="n">finset.coe_inj.symm</span><span class="o">,</span> <span class="n">finset.coe_insert</span><span class="o">,</span> <span class="n">finset.coe_singleton</span><span class="o">],</span>
<span class="kd">end</span>
</code></pre></div>



<a name="213647882"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Showing%20equality%20of%20finite%20sets/near/213647882" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gihan Marasingha <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Showing.20equality.20of.20finite.20sets.html#213647882">(Oct 17 2020 at 11:35)</a>:</h4>
<p>Now that I see <code>norm_num</code> proves non-membership, here's an alternative. I needed an intermediate result, <code>foo</code>. Is this in mathlib?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.set</span>

<span class="kn">open</span> <span class="n">set</span>

<span class="kn">open</span> <span class="n">classical</span>
<span class="kn">local</span> <span class="kn">attribute</span> <span class="o">[</span><span class="kd">instance</span><span class="o">]</span> <span class="n">prop_decidable</span>

<span class="kd">theorem</span> <span class="n">foo</span> <span class="o">(</span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">):</span> <span class="bp">¬</span><span class="o">(</span><span class="n">p</span> <span class="bp">↔</span> <span class="n">q</span><span class="o">)</span> <span class="bp">↔</span> <span class="o">(</span><span class="n">p</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">q</span><span class="o">)</span> <span class="bp">∨</span> <span class="o">(</span><span class="n">q</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">p</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="bp">@</span><span class="n">iff_def</span> <span class="n">p</span> <span class="n">q</span><span class="o">,</span> <span class="n">not_and_distrib</span><span class="o">,</span> <span class="n">not_imp</span><span class="o">,</span> <span class="n">not_imp</span><span class="o">]</span>

<span class="kd">example</span> <span class="o">:</span> <span class="o">({</span><span class="mi">5</span><span class="o">,</span> <span class="mi">6</span><span class="o">,</span> <span class="mi">7</span><span class="o">,</span> <span class="mi">8</span><span class="o">}</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℤ</span><span class="o">)</span> <span class="bp">≠</span> <span class="o">({</span><span class="mi">5</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">8</span><span class="o">,</span> <span class="mi">6</span><span class="o">}</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">ext_iff</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">contrapose</span><span class="bp">!</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">use</span> <span class="mi">7</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">foo</span><span class="o">,</span>
  <span class="n">norm_num</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="213648087"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Showing%20equality%20of%20finite%20sets/near/213648087" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Showing.20equality.20of.20finite.20sets.html#213648087">(Oct 17 2020 at 11:41)</a>:</h4>
<p>I don't know if <code>foo</code> is in that huge <code>logic.basic</code> file which has loads of this stuff, but just to remark that <code>tauto!</code> proves goals like this:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>

<span class="kd">theorem</span> <span class="n">foo</span> <span class="o">(</span><span class="n">p</span> <span class="n">q</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">):</span> <span class="bp">¬</span><span class="o">(</span><span class="n">p</span> <span class="bp">↔</span> <span class="n">q</span><span class="o">)</span> <span class="bp">↔</span> <span class="o">(</span><span class="n">p</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">q</span><span class="o">)</span> <span class="bp">∨</span> <span class="o">(</span><span class="n">q</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">p</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">tauto</span><span class="bp">!</span>
</code></pre></div>



<a name="213648139"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Showing%20equality%20of%20finite%20sets/near/213648139" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Showing.20equality.20of.20finite.20sets.html#213648139">(Oct 17 2020 at 11:42)</a>:</h4>
<p>Searching for things like this is harder than us mathematicians might think it should be, because sometimes the proofs in logic.basic have random decidable hypotheses which we wouldn't think to put in, because they're not true constructively, which can confuse <code>library_search</code> (and this certainly doesn't look true constructively: I don't think </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">pq</span><span class="o">:</span> <span class="kt">Prop</span>
<span class="n">h</span><span class="o">:</span> <span class="bp">¬</span><span class="o">(</span><span class="n">p</span> <span class="bp">↔</span> <span class="n">q</span><span class="o">)</span>
<span class="bp">⊢</span> <span class="n">p</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">q</span> <span class="bp">∨</span> <span class="n">q</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">p</span>
</code></pre></div>

<p>is going anywhere because constructively the hypothesis is useless and you don't know whether to go left or right).</p>



<a name="213648265"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Showing%20equality%20of%20finite%20sets/near/213648265" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gihan Marasingha <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Showing.20equality.20of.20finite.20sets.html#213648265">(Oct 17 2020 at 11:46)</a>:</h4>
<p>Yes, I think I'm teaching the first cohort of maths student at Exeter who really need to know the difference between classical and non-classical reasoning.</p>
<p>I've had the question, 'Isn't negation introduction just the same as proof by contradiction?' Which it is to a classical mathematician. I hope my colleagues don't hate me.</p>



<a name="213648343"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Showing%20equality%20of%20finite%20sets/near/213648343" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Showing.20equality.20of.20finite.20sets.html#213648343">(Oct 17 2020 at 11:49)</a>:</h4>
<p>Yes, constructivists get super-hung up on the fact that the proof that there is no rational number whose square is 2 is constructive even though we say "let's prove it by contradiction". They seem less hung up on the fact that the intermediate value theorem is not valid constructively so they can't construct the square root function :-)</p>



<a name="213648412"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Showing%20equality%20of%20finite%20sets/near/213648412" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Showing.20equality.20of.20finite.20sets.html#213648412">(Oct 17 2020 at 11:51)</a>:</h4>
<p>it's probably called <code>not_iff</code></p>



<a name="213648416"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Showing%20equality%20of%20finite%20sets/near/213648416" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Showing.20equality.20of.20finite.20sets.html#213648416">(Oct 17 2020 at 11:51)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/not_iff">docs#not_iff</a>?</p>



<a name="213648507"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Showing%20equality%20of%20finite%20sets/near/213648507" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Showing.20equality.20of.20finite.20sets.html#213648507">(Oct 17 2020 at 11:54)</a>:</h4>
<p>Huh, congratulations on finding a hole in the library</p>



<a name="213648520"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Showing%20equality%20of%20finite%20sets/near/213648520" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Showing.20equality.20of.20finite.20sets.html#213648520">(Oct 17 2020 at 11:55)</a>:</h4>
<p>it's extra weird because we actually have a definition for the rhs, it is <code>xor</code>, but there are literally no theorems about it, not even the obvious <code>\not (a \iff b) &lt;-&gt; xor a b</code> which this would be equivalent to</p>



<a name="213648568"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Showing%20equality%20of%20finite%20sets/near/213648568" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gihan Marasingha <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Showing.20equality.20of.20finite.20sets.html#213648568">(Oct 17 2020 at 11:56)</a>:</h4>
<p>Well even though <code>not_iff</code> isn't the same as <code>foo</code>, it does the job in this case.</p>



<a name="213648584"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Showing%20equality%20of%20finite%20sets/near/213648584" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Showing.20equality.20of.20finite.20sets.html#213648584">(Oct 17 2020 at 11:57)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/116395-maths/topic/Showing.20equality.20of.20finite.20sets/near/213648139">said</a>:</p>
<blockquote>
<p>Searching for things like this is harder than us mathematicians might think it should be, because sometimes the proofs in logic.basic have random decidable hypotheses which we wouldn't think to put in, because they're not true constructively, which can confuse <code>library_search</code> (and this certainly doesn't look true constructively: I don't think </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">pq</span><span class="o">:</span> <span class="kt">Prop</span>
<span class="n">h</span><span class="o">:</span> <span class="bp">¬</span><span class="o">(</span><span class="n">p</span> <span class="bp">↔</span> <span class="n">q</span><span class="o">)</span>
<span class="bp">⊢</span> <span class="n">p</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">q</span> <span class="bp">∨</span> <span class="n">q</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="n">p</span>
</code></pre></div>

<p>is going anywhere because constructively the hypothesis is useless and you don't know whether to go left or right).</p>
</blockquote>
<p>Note that this is no longer the case, I reformed <code>logic.basic</code> to go classical a few months ago</p>



<a name="213648632"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Showing%20equality%20of%20finite%20sets/near/213648632" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Showing.20equality.20of.20finite.20sets.html#213648632">(Oct 17 2020 at 11:58)</a>:</h4>
<p>all the funny decidable hypothesis theorems are now in <code>decidable</code> namespace</p>



<a name="213649108"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Showing%20equality%20of%20finite%20sets/near/213649108" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Showing.20equality.20of.20finite.20sets.html#213649108">(Oct 17 2020 at 12:12)</a>:</h4>
<p>Now, who wants to take all the useful lemmas from this thread and PR them before we forget?</p>



<a name="213649236"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Showing%20equality%20of%20finite%20sets/near/213649236" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gihan Marasingha <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Showing.20equality.20of.20finite.20sets.html#213649236">(Oct 17 2020 at 12:16)</a>:</h4>
<p>Be my guest. I suppose <code>foo</code> is a terrible name :(</p>



<a name="213652377"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Showing%20equality%20of%20finite%20sets/near/213652377" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Showing.20equality.20of.20finite.20sets.html#213652377">(Oct 17 2020 at 13:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/116395-maths/topic/Showing.20equality.20of.20finite.20sets/near/213648343">said</a>:</p>
<blockquote>
<p>They seem less hung up on the fact that the intermediate value theorem is not valid constructively so they can't construct the square root function :-)</p>
</blockquote>
<p>You actually can construct the square root function</p>



<a name="213652382"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Showing%20equality%20of%20finite%20sets/near/213652382" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Showing.20equality.20of.20finite.20sets.html#213652382">(Oct 17 2020 at 13:39)</a>:</h4>
<p>just not by using the intermediate value theorem</p>



<a name="213664808"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Showing%20equality%20of%20finite%20sets/near/213664808" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Showing.20equality.20of.20finite.20sets.html#213664808">(Oct 17 2020 at 18:37)</a>:</h4>
<p>oh of course, there's an algorithm.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>