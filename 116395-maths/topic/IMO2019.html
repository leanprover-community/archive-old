---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/IMO2019.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html">IMO2019</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="172254134"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172254134" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172254134">(Aug 01 2019 at 19:42)</a>:</h4>
<p>It's silly talking about IMO2019 in three different threads none of which are in <a class="stream" data-stream-id="116395" href="/#narrow/stream/116395-maths">#maths</a>  . When I was a kid I always used to feel that "every geometry problem can be solved using coordinates". Is that true? I would imagine this sort of thing is well-understood nowadays. My feeling was that you just bash everything out and you end up having to prove something of the form X=X. What is actually going on? In particular, is the analytic approach to Q2 and Q6 "doomed to succeed" in some sense?</p>



<a name="172254150"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172254150" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172254150">(Aug 01 2019 at 19:42)</a>:</h4>
<p><a href="https://www.imo-official.org/year_info.aspx?year=2019" target="_blank" title="https://www.imo-official.org/year_info.aspx?year=2019">https://www.imo-official.org/year_info.aspx?year=2019</a></p>



<a name="172254202"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172254202" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172254202">(Aug 01 2019 at 19:43)</a>:</h4>
<p>Didn't Tarski prove that Euclidean geometry is decidable? That's what you were alluding to with the <code>dec_trivial</code>, right?</p>



<a name="172254288"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172254288" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172254288">(Aug 01 2019 at 19:44)</a>:</h4>
<p>The <code>dec_trivial</code> was about the graph theory problem, which is indeed a finite search problem...</p>



<a name="172254327"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172254327" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172254327">(Aug 01 2019 at 19:45)</a>:</h4>
<p>Aah, right. So nr2 and nr6 are also <code>dec_trivial</code></p>



<a name="172255126"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172255126" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172255126">(Aug 01 2019 at 19:55)</a>:</h4>
<p>Great, so only two problems left!</p>



<a name="172255213"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172255213" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172255213">(Aug 01 2019 at 19:56)</a>:</h4>
<p>And Reid has nearly done one of them</p>



<a name="172262252"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172262252" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172262252">(Aug 01 2019 at 21:15)</a>:</h4>
<p>I don't know anything about IMO, but I guess proofs by <code>dec_trivial</code> do not qualify. Would you get points for transcribing an exhaustive search or something like that? Or is it a virtual question because this would take way too much time in practice?</p>



<a name="172264463"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172264463" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172264463">(Aug 01 2019 at 21:45)</a>:</h4>
<p>Yes exactly, it will probably take longer than the lifespan of the earth to do it by <code>dec_trivial</code>. But of course this is just a tedious implementation issue.</p>



<a name="172264503"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172264503" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172264503">(Aug 01 2019 at 21:45)</a>:</h4>
<p>Actually maybe the geometry ones could really be done by just bashing out the algebra. I've done olympiad problems in the past that way. It was the only technique I knew :-)</p>



<a name="172264604"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172264604" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172264604">(Aug 01 2019 at 21:46)</a>:</h4>
<p>See also <a href="https://dpt-info.u-strasbg.fr/~narboux/area_method.html" target="_blank" title="https://dpt-info.u-strasbg.fr/~narboux/area_method.html">https://dpt-info.u-strasbg.fr/~narboux/area_method.html</a></p>



<a name="172264638"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172264638" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172264638">(Aug 01 2019 at 21:47)</a>:</h4>
<p>random hit from google "formalization area method"</p>



<a name="172266496"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172266496" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172266496">(Aug 01 2019 at 22:19)</a>:</h4>
<p>Manual Eberl's Isabelle effort for Q1 -- much shorter. <a href="http://downthetypehole.de/paste/4YbGgqb4" target="_blank" title="http://downthetypehole.de/paste/4YbGgqb4">http://downthetypehole.de/paste/4YbGgqb4</a></p>



<a name="172268233"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172268233" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172268233">(Aug 01 2019 at 22:45)</a>:</h4>
<p>I see some <code>auto</code> and some <code>blast</code> in there; can Kevin or Reid tell us "which parts" of their proofs are being handled by these?</p>



<a name="172271548"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172271548" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172271548">(Aug 01 2019 at 23:50)</a>:</h4>
<p>The <code>auto</code> on line 24 corresponds to the stuff I do starting <code>have hf₀ := hf 0 0,</code> in order to solve the equations <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>c</mi><mn>2</mn></msup><mo>=</mo><mn>2</mn><mi>c</mi></mrow><annotation encoding="application/x-tex">c^2 = 2c</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord mathdefault">c</span></span></span></span> and <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2</mn><mi>d</mi><mo>=</mo><mi>c</mi><mi>d</mi></mrow><annotation encoding="application/x-tex">2d=cd</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord mathdefault">d</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">c</span><span class="mord mathdefault">d</span></span></span></span></p>



<a name="172271598"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172271598" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172271598">(Aug 01 2019 at 23:51)</a>:</h4>
<p>I don't see how the <code>blast</code> on line 34 does anything interesting at all, it looks like we did all the work earlier</p>



<a name="172271664"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172271664" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172271664">(Aug 01 2019 at 23:52)</a>:</h4>
<p>Some of the other <code>auto</code>/<code>simp</code> handles some linear combinations of equations and algebraic simplification which I wasn't too happy about in my version</p>



<a name="172273695"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172273695" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172273695">(Aug 02 2019 at 00:33)</a>:</h4>
<p>Making good progress on IMO 2019-4: <a href="https://gist.github.com/fpvandoorn/e0bd9d116a59a5f01d1d661f3677b72f" target="_blank" title="https://gist.github.com/fpvandoorn/e0bd9d116a59a5f01d1d661f3677b72f">https://gist.github.com/fpvandoorn/e0bd9d116a59a5f01d1d661f3677b72f</a></p>
<p>The main argument is there. The main missing ingredient is that <code>multiplicity 2 n.fact &lt; n</code>, i.e. there are less than <code>n</code> factors of <code>2</code> in <code>n!</code>.</p>



<a name="172274847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172274847" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172274847">(Aug 02 2019 at 00:58)</a>:</h4>
<p>I think your sorried lemmas about multiplicity already exist for <code>padic_val</code>, is that known to be the same as <code>multiplicity</code>?</p>



<a name="172275121"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172275121" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172275121">(Aug 02 2019 at 01:04)</a>:</h4>
<p>The theorem about the multiplicity of primes in factorials was discussed here around the end of May I think</p>



<a name="172275122"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172275122" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172275122">(Aug 02 2019 at 01:04)</a>:</h4>
<p>Though I don't think anyone proved it</p>



<a name="172285437"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172285437" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172285437">(Aug 02 2019 at 05:44)</a>:</h4>
<p><code>padic_val</code> is defined in terms of <code>multiplicity</code>.</p>



<a name="172297354"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172297354" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172297354">(Aug 02 2019 at 10:05)</a>:</h4>
<blockquote>
<p>The main argument is there. The main missing ingredient is that <code>multiplicity 2 n.fact &lt; n</code>, i.e. there are less than <code>n</code> factors of <code>2</code> in <code>n!</code>.</p>
</blockquote>
<p>I'm having a go at this, but note that the actual sorried lemma in the gist is false for n=0</p>



<a name="172299653"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172299653" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172299653">(Aug 02 2019 at 11:01)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">padics</span> <span class="n">imo2019_4</span>

<span class="kn">instance</span> <span class="n">two_prime</span> <span class="o">:</span> <span class="n">nat</span><span class="bp">.</span><span class="n">prime</span> <span class="mi">2</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">norm_num</span>

<span class="kn">lemma</span> <span class="n">aux1</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">padic_val_rat</span> <span class="mi">2</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span><span class="bp">.</span><span class="n">fact</span> <span class="bp">=</span> <span class="n">padic_val_rat</span> <span class="mi">2</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">+</span> <span class="n">padic_val_rat</span> <span class="mi">2</span> <span class="n">n</span><span class="bp">.</span><span class="n">fact</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">rw</span> <span class="o">(</span><span class="k">show</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span><span class="bp">.</span><span class="n">fact</span> <span class="bp">=</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">n</span><span class="bp">.</span><span class="n">fact</span><span class="o">,</span> <span class="k">from</span> <span class="n">rfl</span><span class="o">),</span>
  <span class="n">rw</span> <span class="n">nat</span><span class="bp">.</span><span class="n">cast_mul</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">padic_val_rat</span><span class="bp">.</span><span class="n">mul</span> <span class="mi">2</span><span class="o">,</span>
  <span class="n">refl</span><span class="o">,</span>
  <span class="c1">-- side conditions</span>
  <span class="n">norm_cast</span><span class="o">,</span> <span class="n">exact</span> <span class="n">dec_trivial</span><span class="o">,</span>
  <span class="n">norm_cast</span><span class="o">,</span> <span class="k">have</span> <span class="o">:=</span> <span class="n">nat</span><span class="bp">.</span><span class="n">fact_pos</span> <span class="n">n</span><span class="o">,</span> <span class="n">linarith</span><span class="o">,</span> <span class="c1">-- I have no shame</span>
<span class="kn">end</span>

<span class="kn">lemma</span> <span class="n">aux2</span> <span class="o">(</span><span class="n">d</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">padic_val_rat</span> <span class="mi">2</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="n">d</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="k">begin</span>
<span class="k">show</span> <span class="n">padic_val_rat</span> <span class="mi">2</span> <span class="o">((</span><span class="mi">2</span> <span class="bp">*</span> <span class="n">d</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">padic_val_rat</span><span class="bp">.</span><span class="n">padic_val_rat_of_int</span><span class="o">,</span>
  <span class="n">norm_cast</span><span class="o">,</span>
  <span class="n">convert</span> <span class="n">enat</span><span class="bp">.</span><span class="n">get_zero</span> <span class="bp">_</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">multiplicity</span><span class="bp">.</span><span class="n">multiplicity_eq_zero_of_not_dvd</span><span class="o">,</span>
  <span class="n">rintro</span> <span class="bp">⟨</span><span class="n">c</span><span class="o">,</span> <span class="n">hc</span><span class="bp">⟩</span><span class="o">,</span>
  <span class="n">apply</span> <span class="bp">@</span><span class="n">zero_ne_one</span> <span class="bp">ℕ</span><span class="o">,</span>
  <span class="k">calc</span> <span class="mi">0</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="n">c</span><span class="o">)</span> <span class="err">%</span> <span class="mi">2</span> <span class="o">:</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">mul_mod_right</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span>
  <span class="bp">...</span>    <span class="bp">=</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="n">d</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="err">%</span> <span class="mi">2</span> <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">hc</span>
  <span class="bp">...</span>    <span class="bp">=</span> <span class="bp">_</span> <span class="o">:</span> <span class="n">nat</span><span class="bp">.</span><span class="n">mod_two_of_bodd</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="n">d</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span>
  <span class="bp">...</span>    <span class="bp">=</span> <span class="mi">1</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span><span class="o">,</span>
  <span class="c1">-- now pick up the pieces</span>
  <span class="n">all_goals</span> <span class="o">{</span><span class="n">exact</span> <span class="n">dec_trivial</span><span class="o">},</span>
<span class="kn">end</span>

<span class="kn">lemma</span> <span class="n">two_adic_val_fact_even</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">padic_val_rat</span> <span class="mi">2</span> <span class="o">((</span><span class="mi">2</span> <span class="bp">*</span> <span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="n">fact</span><span class="o">)</span> <span class="bp">=</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">padic_val_rat</span> <span class="mi">2</span> <span class="n">n</span><span class="bp">.</span><span class="n">fact</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">induction</span> <span class="n">n</span> <span class="k">with</span> <span class="n">d</span> <span class="n">hd</span><span class="o">,</span>
    <span class="k">show</span> <span class="n">padic_val_rat</span> <span class="mi">2</span> <span class="mi">1</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">+</span> <span class="n">padic_val_rat</span> <span class="mi">2</span> <span class="mi">1</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">zero_add</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">(</span><span class="k">show</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ</span> <span class="n">d</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">d</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">,</span> <span class="k">by</span> <span class="n">ring</span><span class="o">),</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">aux1</span><span class="o">,</span> <span class="n">aux1</span><span class="o">,</span> <span class="n">hd</span><span class="o">],</span>
  <span class="n">norm_cast</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">(</span><span class="k">show</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">d</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="o">(</span><span class="n">d</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">),</span> <span class="k">by</span> <span class="n">ring</span><span class="o">),</span>
  <span class="n">rw</span> <span class="n">nat</span><span class="bp">.</span><span class="n">cast_mul</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">padic_val_rat</span><span class="bp">.</span><span class="n">mul</span> <span class="mi">2</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">padic_val_rat</span><span class="bp">.</span><span class="n">padic_val_rat_self</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">(</span><span class="k">show</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ</span> <span class="n">d</span> <span class="bp">=</span> <span class="n">d</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">,</span> <span class="k">from</span> <span class="n">rfl</span><span class="o">),</span>
  <span class="n">rw</span> <span class="n">aux1</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">aux2</span><span class="o">,</span>
  <span class="n">simp</span><span class="o">,</span>
  <span class="n">all_goals</span> <span class="o">{</span><span class="n">try</span> <span class="o">{</span><span class="n">norm_cast</span><span class="o">},</span> <span class="n">exact</span> <span class="n">dec_trivial</span><span class="o">},</span>
<span class="kn">end</span>

<span class="kn">lemma</span> <span class="n">two_adic_val_fact_odd</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">padic_val_rat</span> <span class="mi">2</span> <span class="o">((</span><span class="mi">2</span> <span class="bp">*</span> <span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span><span class="bp">.</span><span class="n">fact</span><span class="o">)</span> <span class="bp">=</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">padic_val_rat</span> <span class="mi">2</span> <span class="n">n</span><span class="bp">.</span><span class="n">fact</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">rw</span> <span class="n">aux1</span><span class="o">,</span>
  <span class="n">convert</span> <span class="n">two_adic_val_fact_even</span> <span class="n">n</span><span class="o">,</span>
  <span class="n">convert</span> <span class="n">zero_add</span> <span class="bp">_</span><span class="o">,</span>
  <span class="n">convert</span> <span class="n">aux2</span> <span class="n">n</span><span class="o">,</span>
<span class="kn">end</span>

<span class="kn">lemma</span> <span class="n">even_or_odd</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">c</span><span class="o">,</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">∨</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">c</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">induction</span> <span class="n">n</span> <span class="k">with</span> <span class="n">d</span> <span class="n">hd</span><span class="o">,</span>
    <span class="n">use</span> <span class="mi">0</span><span class="o">,</span> <span class="n">left</span><span class="o">,</span> <span class="n">refl</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">hd</span> <span class="k">with</span> <span class="n">e</span> <span class="n">he</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">he</span><span class="o">,</span>
    <span class="n">use</span> <span class="n">e</span><span class="o">,</span> <span class="n">right</span><span class="o">,</span> <span class="n">rw</span> <span class="n">he</span><span class="o">,</span>
  <span class="n">use</span> <span class="o">(</span><span class="n">e</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">),</span> <span class="n">left</span><span class="o">,</span> <span class="n">rw</span> <span class="n">he</span><span class="o">,</span> <span class="n">ring</span><span class="o">,</span>
<span class="kn">end</span>

<span class="kn">lemma</span> <span class="n">two_adic_val_fact</span> <span class="o">(</span><span class="n">d</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">padic_val_rat</span> <span class="mi">2</span> <span class="n">d</span><span class="bp">.</span><span class="n">fact</span> <span class="bp">=</span> <span class="n">d</span> <span class="bp">/</span> <span class="mi">2</span> <span class="bp">+</span> <span class="n">padic_val_rat</span> <span class="mi">2</span> <span class="o">(</span><span class="n">d</span> <span class="bp">/</span> <span class="mi">2</span><span class="o">)</span><span class="bp">.</span><span class="n">fact</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">cases</span> <span class="o">(</span><span class="n">even_or_odd</span> <span class="n">d</span><span class="o">)</span> <span class="k">with</span> <span class="n">n</span> <span class="n">hn</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">hn</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="n">hn</span><span class="o">,</span>
    <span class="n">convert</span> <span class="n">two_adic_val_fact_even</span> <span class="n">n</span><span class="o">,</span>
      <span class="n">norm_cast</span><span class="o">,</span>
    <span class="n">all_goals</span> <span class="o">{</span><span class="n">rw</span> <span class="o">[</span><span class="n">mul_comm</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">mul_div_cancel</span><span class="o">],</span> <span class="n">exact</span> <span class="n">dec_trivial</span><span class="o">},</span>
  <span class="o">},</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="n">hn</span><span class="o">,</span>
    <span class="n">convert</span> <span class="n">two_adic_val_fact_odd</span> <span class="n">n</span><span class="o">,</span>
      <span class="n">norm_cast</span><span class="o">,</span>
    <span class="n">all_goals</span> <span class="o">{</span><span class="n">rw</span> <span class="o">[</span><span class="n">add_comm</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">add_mul_div_left</span><span class="o">],</span> <span class="n">convert</span> <span class="n">zero_add</span> <span class="bp">_</span><span class="o">,</span> <span class="n">exact</span> <span class="n">dec_trivial</span><span class="o">},</span>
  <span class="o">}</span>
<span class="kn">end</span>

<span class="kn">lemma</span> <span class="n">easy</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">/</span> <span class="mi">2</span> <span class="bp">+</span> <span class="n">n</span> <span class="bp">/</span> <span class="mi">2</span> <span class="bp">≤</span> <span class="n">n</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">cases</span> <span class="n">even_or_odd</span> <span class="n">n</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">h</span><span class="o">,</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">h</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">mul_div_right</span><span class="o">],</span> <span class="n">linarith</span><span class="o">,</span> <span class="n">exact</span> <span class="n">dec_trivial</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">add_comm</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">nat</span><span class="bp">.</span><span class="n">add_mul_div_left</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">(</span><span class="k">show</span> <span class="mi">1</span> <span class="bp">/</span> <span class="mi">2</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span> <span class="k">from</span> <span class="n">dec_trivial</span><span class="o">),</span>
  <span class="n">linarith</span><span class="o">,</span> <span class="c1">-- finally!</span>
  <span class="n">exact</span> <span class="n">dec_trivial</span><span class="o">,</span>
<span class="kn">end</span>

<span class="kn">lemma</span> <span class="n">two_adic_val_fact_lt</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">padic_val_rat</span> <span class="mi">2</span> <span class="n">n</span><span class="bp">.</span><span class="n">fact</span> <span class="bp">&lt;</span> <span class="n">n</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">revert</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">nat</span><span class="bp">.</span><span class="n">strong_induction_on</span> <span class="n">n</span><span class="o">,</span> <span class="n">clear</span> <span class="n">n</span><span class="o">,</span>
  <span class="n">intros</span> <span class="n">m</span> <span class="n">hm</span><span class="o">,</span>
  <span class="n">by_cases</span> <span class="n">h1</span> <span class="o">:</span> <span class="n">m</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">,</span>
    <span class="n">intro</span> <span class="n">h0</span><span class="o">,</span> <span class="n">rw</span> <span class="n">h1</span><span class="o">,</span>
    <span class="k">show</span> <span class="n">padic_val_rat</span> <span class="mi">2</span> <span class="mi">1</span> <span class="bp">&lt;</span> <span class="mi">1</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">padic_val_rat</span><span class="bp">.</span><span class="n">one</span><span class="o">,</span> <span class="n">exact</span> <span class="n">dec_trivial</span><span class="o">,</span>
  <span class="n">intro</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">two_adic_val_fact</span> <span class="n">m</span><span class="o">,</span>
  <span class="k">have</span> <span class="o">:=</span> <span class="n">hm</span> <span class="o">(</span><span class="n">m</span> <span class="bp">/</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">,</span>
  <span class="n">refine</span> <span class="n">lt_of_lt_of_le</span> <span class="o">(</span><span class="n">add_lt_add_left</span> <span class="n">this</span> <span class="bp">_</span><span class="o">)</span> <span class="bp">_</span><span class="o">,</span>
  <span class="n">norm_cast</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">easy</span> <span class="n">m</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">nat</span><span class="bp">.</span><span class="n">div_lt_iff_lt_mul&#39;</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">mul_two</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">nat</span><span class="bp">.</span><span class="n">lt_add_of_zero_lt_left</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">nat</span><span class="bp">.</span><span class="n">pos_of_ne_zero</span> <span class="n">h</span><span class="o">,</span>
  <span class="c1">-- now pick up the pieces</span>
    <span class="n">exact</span> <span class="n">dec_trivial</span><span class="o">,</span>
  <span class="n">intro</span> <span class="n">h2</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">nat</span><span class="bp">.</span><span class="n">div_eq_zero_iff</span> <span class="n">at</span> <span class="n">h2</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">h2</span> <span class="k">with</span> <span class="n">c</span> <span class="n">hc</span><span class="o">,</span> <span class="n">apply</span> <span class="n">h1</span><span class="o">,</span> <span class="n">refl</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">hc</span> <span class="k">with</span> <span class="n">d</span> <span class="n">hd</span><span class="o">,</span> <span class="n">apply</span> <span class="n">h</span><span class="o">,</span> <span class="n">refl</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">hd</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">dec_trivial</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>


<p>There's the proof for p=2 but using padic_val_rat. It's dirty but it works. Now I need to convince Lean that multiplicity (taking values in enat) and padic_val_rat (taking values in int) are the same...</p>



<a name="172299936"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172299936" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172299936">(Aug 02 2019 at 11:07)</a>:</h4>
<p>Isn't <code>padic_val</code> defined in terms of <code>multiplicity</code>? So I would hope that after unfolding some definitions <code>norm_cast</code> can do this.</p>



<a name="172299959"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172299959" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172299959">(Aug 02 2019 at 11:07)</a>:</h4>
<div class="codehilite"><pre><span></span>h1 : ↑((multiplicity ↑2 ↑(nat.fact n)).get _) &lt; ↑n
⊢ multiplicity 2 (nat.fact n) &lt; ↑n
</pre></div>


<p><code>h1</code> is about <code>int</code>, and the goal is about <code>enat</code>. What do you think?</p>



<a name="172300009"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172300009" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172300009">(Aug 02 2019 at 11:08)</a>:</h4>
<p>the <code>get</code> is <code>roption.get</code></p>



<a name="172300032"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172300032" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172300032">(Aug 02 2019 at 11:09)</a>:</h4>
<p>hmm, <code>h1</code> might be a coe from nat to int</p>



<a name="172300682"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172300682" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172300682">(Aug 02 2019 at 11:23)</a>:</h4>
<p><code>rw coe_lt_coe at h1</code>?</p>



<a name="172300732"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172300732" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172300732">(Aug 02 2019 at 11:24)</a>:</h4>
<p>Where is the proof that goes into the <code>get _</code>?</p>



<a name="172300734"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172300734" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172300734">(Aug 02 2019 at 11:24)</a>:</h4>
<p>The problem is the <code>_</code>. I've made progress.</p>



<a name="172300746"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172300746" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172300746">(Aug 02 2019 at 11:24)</a>:</h4>
<p>Yes exactly, one has to supply that proof explicitly it seems.</p>



<a name="172300755"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172300755" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172300755">(Aug 02 2019 at 11:24)</a>:</h4>
<p><code>convert h1; exact option.some_get _</code>?</p>



<a name="172300758"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172300758" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172300758">(Aug 02 2019 at 11:24)</a>:</h4>
<p>Because <code>rw [← enat.coe_get ThatProof, enat.coe_lt_coe]</code> will also help.</p>



<a name="172300773"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172300773" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172300773">(Aug 02 2019 at 11:25)</a>:</h4>
<p>convert h1 fails horribly with goals like int = enat</p>



<a name="172300785"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172300785" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172300785">(Aug 02 2019 at 11:25)</a>:</h4>
<p>I'm making progress though.</p>



<a name="172300791"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172300791" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172300791">(Aug 02 2019 at 11:25)</a>:</h4>
<p>Ah, there is also <code>multiplicity.nat_eq_int</code> or whatever.</p>



<a name="172300792"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172300792" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172300792">(Aug 02 2019 at 11:25)</a>:</h4>
<p>There's some int coercions i didn't see.</p>



<a name="172300840"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172300840" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172300840">(Aug 02 2019 at 11:26)</a>:</h4>
<p>So there's a lemma to prove about multiplicity being preseved along injective monoid homs I guess.</p>



<a name="172300841"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172300841" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172300841">(Aug 02 2019 at 11:26)</a>:</h4>
<p><code>int.coe_nat_multiplicity</code></p>



<a name="172301602"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172301602" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172301602">(Aug 02 2019 at 11:42)</a>:</h4>
<p>I've got it down to</p>
<div class="codehilite"><pre><span></span>⊢ ∀ (m : enat) (n : ℕ) (h : m.dom), m.get h &lt; n → m &lt; ↑n
</pre></div>



<a name="172301772"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172301772" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172301772">(Aug 02 2019 at 11:46)</a>:</h4>
<p>I'm hoping this is true, because modulo this I have </p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">multiplicity_two_fact_lt</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">multiplicity</span> <span class="mi">2</span> <span class="n">n</span><span class="bp">.</span><span class="n">fact</span> <span class="bp">&lt;</span> <span class="n">n</span>
</pre></div>


<p>which is hopefully enough for <span class="user-mention" data-user-id="111080">@Floris van Doorn</span>  (note h)</p>



<a name="172301941"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172301941" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172301941">(Aug 02 2019 at 11:49)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">aux_53</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="n">enat</span><span class="o">)</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">m</span><span class="bp">.</span><span class="n">dom</span><span class="o">),</span> <span class="n">m</span><span class="bp">.</span><span class="n">get</span> <span class="n">h</span> <span class="bp">&lt;</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">m</span> <span class="bp">&lt;</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">enat</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">intros</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">(</span><span class="k">show</span> <span class="n">m</span> <span class="bp">=</span> <span class="n">m</span><span class="bp">.</span><span class="n">get</span> <span class="n">h</span><span class="o">,</span> <span class="k">by</span> <span class="n">simp</span><span class="o">),</span>
  <span class="n">norm_cast</span><span class="o">,</span> <span class="n">assumption</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>



<a name="172302042"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172302042" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172302042">(Aug 02 2019 at 11:50)</a>:</h4>
<p><a href="https://gist.github.com/kbuzzard/4ca88f429bda4744fd038f7471ebfb67" target="_blank" title="https://gist.github.com/kbuzzard/4ca88f429bda4744fd038f7471ebfb67">https://gist.github.com/kbuzzard/4ca88f429bda4744fd038f7471ebfb67</a></p>
<p><span class="user-mention" data-user-id="111080">@Floris van Doorn</span> <span class="user-mention" data-user-id="110032">@Reid Barton</span>  -- it's a mess, but hopefully it helps.</p>



<a name="172302099"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172302099" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172302099">(Aug 02 2019 at 11:51)</a>:</h4>
<p><span class="user-mention" data-user-id="213273">@Paul-Nicolas Madelaine</span> I used <code>norm_cast</code> 11 times! Thank you so much!</p>



<a name="172302168"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172302168" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172302168">(Aug 02 2019 at 11:52)</a>:</h4>
<blockquote>
<p>Because <code>rw [← enat.coe_get ThatProof, enat.coe_lt_coe]</code> will also help.</p>
</blockquote>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> does this help <span aria-label="up" class="emoji emoji-2b06" role="img" title="up">:up:</span></p>



<a name="172302186"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172302186" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172302186">(Aug 02 2019 at 11:53)</a>:</h4>
<p>Ooh, wait. You already found a proof.</p>



<a name="172302191"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172302191" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172302191">(Aug 02 2019 at 11:53)</a>:</h4>
<p>Yes, what you and Chris said helped a great deal.</p>



<a name="172302208"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172302208" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172302208">(Aug 02 2019 at 11:53)</a>:</h4>
<p>Yes, there are no sorries in the gist.</p>



<a name="172302267"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172302267" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172302267">(Aug 02 2019 at 11:54)</a>:</h4>
<p>It feels a bit dirty not doing something for general p (I guess <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mo>&gt;</mo><mn>0</mn><mtext>  </mtext><mo>⟹</mo><mtext>  </mtext><msub><mi>v</mi><mi>p</mi></msub><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">!</mo><mo stretchy="false">)</mo><mo>&lt;</mo><mi>n</mi><mi mathvariant="normal">/</mi><mo stretchy="false">(</mo><mi>p</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">n &gt;0 \implies v_p(n!)&lt;n/(p-1)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.66844em;vertical-align:-0.024em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⟹</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mclose">!</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">n</span><span class="mord">/</span><span class="mopen">(</span><span class="mord mathdefault">p</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span>) but we only need it for p=2 for the IMO problem.</p>



<a name="172302295"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172302295" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172302295">(Aug 02 2019 at 11:55)</a>:</h4>
<p>p=2 makes life much easier because one doesn't have to venture into rat.</p>



<a name="172302377"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172302377" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172302377">(Aug 02 2019 at 11:57)</a>:</h4>
<p>and one can just use the dirty fact that every integer is either even or odd, and the 2-adic valuation of an odd integer is 0. The general proof will be more painful for both of these reasons.</p>



<a name="172302438"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172302438" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172302438">(Aug 02 2019 at 11:58)</a>:</h4>
<p>I'm going to leave this now because unfortunately I have literally hundreds of unread emails which need dealing with, but this experience showed me that we seem to be missing a bunch of lemmas all over the place.</p>



<a name="172302546"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172302546" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172302546">(Aug 02 2019 at 12:00)</a>:</h4>
<p>I used <code>padic_val_rat</code> because results like <code>padic_val_rat.mul</code> were proved (which are not true for general n-adic valuations if n isn't irreducible). Is there an analogous result for multiplicity in e.g. a UFD?</p>



<a name="172302572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172302572" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172302572">(Aug 02 2019 at 12:01)</a>:</h4>
<p>If there is then I suspect that one could have used multiplicity all the way through, but I suspect it would have been no easier or harder. The proof needs a huge tidy.</p>



<a name="172304815"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172304815" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172304815">(Aug 02 2019 at 12:42)</a>:</h4>
<p>Looks like a good start though. There was some discussion earlier about the best way to even write down the answer <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mo>∑</mo><mrow><mi>j</mi><mo>≥</mo><mn>1</mn></mrow></msub><mo stretchy="false">⌊</mo><mi>n</mi><mi mathvariant="normal">/</mi><msup><mi>p</mi><mi>j</mi></msup><mo stretchy="false">⌋</mo></mrow><annotation encoding="application/x-tex">\sum_{j \ge 1} \lfloor n/p^j \rfloor</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1.260482em;vertical-align:-0.43581800000000004em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.16195399999999993em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight">≥</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.43581800000000004em;"><span></span></span></span></span></span></span><span class="mopen">⌊</span><span class="mord mathdefault">n</span><span class="mord">/</span><span class="mord"><span class="mord mathdefault">p</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.824664em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span></span></span></span></span><span class="mclose">⌋</span></span></span></span>.<br>
Your <code>two_adic_val_fact (d : ℕ) : padic_val_rat 2 d.fact = d / 2 + padic_val_rat 2 (d / 2).fact</code> is a nice intermediate statement to aim for (for general <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">p</span></span></span></span>) and sometimes it might be the most convenient form to use as well.</p>



<a name="172304988"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172304988" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172304988">(Aug 02 2019 at 12:45)</a>:</h4>
<p>That was the reason I put the time in. I was initially thinking "eew, you can't prove this by induction, it's kind of nasty" but then when I realised that the intermediate statement was provable by the case split into even and odd and then induction, and the result we needed followed from that and strong induction, I thought I'd go for it. Probably I should have done everything using <code>multiplicity</code>.</p>



<a name="172306775"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172306775" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172306775">(Aug 02 2019 at 13:09)</a>:</h4>
<p>Right, I see in a couple places you did 2 things where in general you would have to do <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">p</span></span></span></span> things. But it's probably not that hard to do little inductions from <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi><mo>∗</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">p*n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.6597200000000001em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">p</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span></span></span></span> up to <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi><mo>∗</mo><mi>n</mi><mo>+</mo><mi>r</mi></mrow><annotation encoding="application/x-tex">p*n + r</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.6597200000000001em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">p</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span></span></span></span> for <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>0</mn><mo>≤</mo><mi>r</mi><mo>&lt;</mo><mi>p</mi></mrow><annotation encoding="application/x-tex">0 \le r &lt; p</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.78041em;vertical-align:-0.13597em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">p</span></span></span></span></p>



<a name="172315319"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172315319" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172315319">(Aug 02 2019 at 14:57)</a>:</h4>
<p>Very nice, <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span>. Thanks! I indeed have the assumption that <code>n &gt; 0</code>, so adding that assumption (that I missed) is indeed no problem.</p>



<a name="172340008"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172340008" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172340008">(Aug 02 2019 at 20:28)</a>:</h4>
<p>I finished the proof of IMO 2019-4! <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span> <a href="https://gist.github.com/fpvandoorn/e0bd9d116a59a5f01d1d661f3677b72f" target="_blank" title="https://gist.github.com/fpvandoorn/e0bd9d116a59a5f01d1d661f3677b72f">https://gist.github.com/fpvandoorn/e0bd9d116a59a5f01d1d661f3677b72f</a></p>
<p>Not all lemmas I prove in that file are used. Once I started proving lemma's about multiplicity/enat/roption, I decided to also prove all similar missing lemmas. I'll PR them to mathlib at some point.</p>



<a name="172340039"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172340039" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172340039">(Aug 02 2019 at 20:29)</a>:</h4>
<p>I'm importing Kevin's file in that Gist.</p>



<a name="172340053"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172340053" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172340053">(Aug 02 2019 at 20:29)</a>:</h4>
<p>Should we have a leanprover-community/lean-imo repository?</p>



<a name="172380057"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172380057" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172380057">(Aug 02 2019 at 23:07)</a>:</h4>
<p>That's one possibility. <br>
I will make a PR to mathlib soon adding a new top-level folder where we can put one-off projects like this. I think when we talked about this earlier the consensus was to have projects like these in mathlib, but not in the <code>src/</code> folder, so that we can make sure that files like this keep compiling.</p>



<a name="172610110"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172610110" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172610110">(Aug 06 2019 at 17:32)</a>:</h4>
<p>IMO2019-4 just appeared in the AFP along with 1 and 5. I guess it's the year of the contest problem...</p>



<a name="172610149"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172610149" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172610149">(Aug 06 2019 at 17:32)</a>:</h4>
<p>Yeah, Manuel Eberl saw me going on about Q1 on Twitter.</p>



<a name="172610233"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172610233" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172610233">(Aug 06 2019 at 17:33)</a>:</h4>
<p><a href="https://mathoverflow.net/questions/337558/automatically-solving-olympiad-geometry-problems?noredirect=1#comment844402_337558" target="_blank" title="https://mathoverflow.net/questions/337558/automatically-solving-olympiad-geometry-problems?noredirect=1#comment844402_337558">https://mathoverflow.net/questions/337558/automatically-solving-olympiad-geometry-problems?noredirect=1#comment844402_337558</a> That was me trying to work out how to do Q2 and Q6</p>



<a name="172615638"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172615638" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172615638">(Aug 06 2019 at 18:24)</a>:</h4>
<p>Manuel was even seen here at the time we were discussing IMO</p>



<a name="172615675"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172615675" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172615675">(Aug 06 2019 at 18:25)</a>:</h4>
<p>For the record, Kevin:</p>
<blockquote>
<p>See also <a href="https://dpt-info.u-strasbg.fr/~narboux/area_method.html" target="_blank" title="https://dpt-info.u-strasbg.fr/~narboux/area_method.html">https://dpt-info.u-strasbg.fr/~narboux/area_method.html</a></p>
</blockquote>



<a name="172621304"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/IMO2019/near/172621304" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/IMO2019.html#172621304">(Aug 06 2019 at 19:32)</a>:</h4>
<p>Aah, that link makes a lot more sense now I know what the area method is! Thanks Patrick. Sorry I missed it the first time around. So maybe the Coq people can do Q2?</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>