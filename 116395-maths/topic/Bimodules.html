---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/Bimodules.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html">Bimodules</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="206137816"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/206137816" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#206137816">(Aug 06 2020 at 13:07)</a>:</h4>
<p>Does this really work?</p>



<a name="206137829"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/206137829" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#206137829">(Aug 06 2020 at 13:07)</a>:</h4>
<p>Anyways, wouldn't it be more natural to write right actions on the right?</p>



<a name="206137942"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/206137942" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#206137942">(Aug 06 2020 at 13:08)</a>:</h4>
<p>Yes, but since everything is already done for left modules, wouldn't it be more convenient to define a right action as a left action by M\op?</p>



<a name="206138000"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/206138000" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#206138000">(Aug 06 2020 at 13:09)</a>:</h4>
<p>Notation can be introduced for a right action, I guess.</p>



<a name="206138159"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/206138159" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#206138159">(Aug 06 2020 at 13:10)</a>:</h4>
<p>I'm not sure what is more convenient, but maybe that's just lasting scars from <code>opposite</code></p>



<a name="206138225"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/206138225" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#206138225">(Aug 06 2020 at 13:11)</a>:</h4>
<p>I'm thinking something along these lines: </p>
<div class="codehilite"><pre><span></span><code><span class="kn">notation</span> <span class="n">a</span> <span class="bp">`</span> <span class="err">•</span> <span class="bp">`</span><span class="o">:</span><span class="mi">73</span> <span class="n">m</span> <span class="o">:=</span> <span class="n">has_scalar</span><span class="bp">.</span><span class="n">smul</span> <span class="o">(</span><span class="n">opposite</span><span class="bp">.</span><span class="n">op</span> <span class="n">m</span><span class="o">)</span> <span class="n">a</span>
</code></pre></div>



<a name="206139197"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/206139197" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#206139197">(Aug 06 2020 at 13:20)</a>:</h4>
<p>Is that the same character as left multiplication?</p>



<a name="206139240"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/206139240" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#206139240">(Aug 06 2020 at 13:20)</a>:</h4>
<p>Yeah, is that a problem?</p>



<a name="206139354"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/206139354" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#206139354">(Aug 06 2020 at 13:21)</a>:</h4>
<p>Would this work for bimodules?</p>



<a name="206139376"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/206139376" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#206139376">(Aug 06 2020 at 13:21)</a>:</h4>
<p>Not sure yet. I'll have to try.</p>



<a name="206139385"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/206139385" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#206139385">(Aug 06 2020 at 13:21)</a>:</h4>
<p>I was imagining we would use some paired characters, like steal the stupid triangle notation perhaps</p>



<a name="206139455"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/206139455" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#206139455">(Aug 06 2020 at 13:22)</a>:</h4>
<p>I'm not sure what you're referring to.</p>



<a name="206139609"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/206139609" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#206139609">(Aug 06 2020 at 13:23)</a>:</h4>
<p>e.g. change <code>smul</code> to <code>▸</code> and use <code>◂</code> for right multiplication (<code>muls</code>?)</p>



<a name="206139701"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/206139701" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#206139701">(Aug 06 2020 at 13:24)</a>:</h4>
<p>but of course there's doubtless a large number of other options</p>



<a name="206139772"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/206139772" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#206139772">(Aug 06 2020 at 13:24)</a>:</h4>
<p>example <span aria-label="one" class="emoji emoji-0031-20e3" role="img" title="one">:one:</span> of a bimodule is R as an (R, R)-bimodule, so I'm having trouble imagining using the same notation for multiplication on both sides</p>



<a name="206139807"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/206139807" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#206139807">(Aug 06 2020 at 13:25)</a>:</h4>
<p>This works:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra</span>

<span class="n">class</span> <span class="n">comm_mul_action</span> <span class="n">M</span> <span class="n">N</span> <span class="n">α</span>
  <span class="o">[</span><span class="n">monoid</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">monoid</span> <span class="n">N</span><span class="o">]</span>
  <span class="o">[</span><span class="n">mul_action</span> <span class="n">M</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">mul_action</span> <span class="n">N</span> <span class="n">α</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">commutes</span> <span class="o">{</span><span class="n">m</span> <span class="o">:</span> <span class="n">M</span><span class="o">}</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">N</span><span class="o">}</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">:</span> <span class="n">m</span> <span class="err">•</span> <span class="n">n</span> <span class="err">•</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">n</span> <span class="err">•</span> <span class="n">m</span> <span class="err">•</span> <span class="n">a</span><span class="o">)</span>

<span class="n">class</span> <span class="n">biaction</span> <span class="n">M</span> <span class="n">N</span> <span class="n">α</span> <span class="o">[</span><span class="n">monoid</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">monoid</span> <span class="n">N</span><span class="o">]</span>
  <span class="o">[</span><span class="n">mul_action</span> <span class="n">M</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">mul_action</span> <span class="n">N</span><span class="err">ᵒᵖ</span> <span class="n">α</span><span class="o">]</span> <span class="kn">extends</span> <span class="n">comm_mul_action</span> <span class="n">M</span> <span class="n">N</span><span class="err">ᵒᵖ</span> <span class="n">α</span>

<span class="kn">notation</span> <span class="n">a</span> <span class="bp">`</span> <span class="err">•</span> <span class="bp">`</span><span class="o">:</span><span class="mi">73</span> <span class="n">m</span> <span class="o">:=</span> <span class="n">has_scalar</span><span class="bp">.</span><span class="n">smul</span> <span class="o">(</span><span class="n">opposite</span><span class="bp">.</span><span class="n">op</span> <span class="n">m</span><span class="o">)</span> <span class="n">a</span>

<span class="n">class</span> <span class="n">bimodule</span> <span class="n">A</span> <span class="n">B</span> <span class="n">M</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">A</span><span class="o">]</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">B</span><span class="o">]</span> <span class="o">[</span><span class="n">add_comm_monoid</span> <span class="n">M</span><span class="o">]</span>
  <span class="o">[</span><span class="n">semimodule</span> <span class="n">A</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">semimodule</span> <span class="n">B</span><span class="err">ᵒᵖ</span> <span class="n">M</span><span class="o">]</span> <span class="kn">extends</span> <span class="n">biaction</span> <span class="n">A</span> <span class="n">B</span> <span class="n">M</span>

<span class="kn">variables</span> <span class="o">(</span><span class="n">A</span> <span class="n">B</span> <span class="n">M</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">A</span><span class="o">]</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">B</span><span class="o">]</span> <span class="o">[</span><span class="n">add_comm_monoid</span> <span class="n">M</span><span class="o">]</span>
  <span class="o">[</span><span class="n">semimodule</span> <span class="n">A</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">semimodule</span> <span class="n">B</span><span class="err">ᵒᵖ</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">bimodule</span> <span class="n">A</span> <span class="n">B</span> <span class="n">M</span><span class="o">]</span>
<span class="kn">variables</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">A</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">B</span><span class="o">)</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="n">M</span><span class="o">)</span>

<span class="kn">example</span> <span class="o">:</span> <span class="n">a</span> <span class="err">•</span> <span class="n">m</span> <span class="err">•</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">a</span> <span class="err">•</span> <span class="o">(</span><span class="n">m</span> <span class="err">•</span> <span class="n">b</span><span class="o">)</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">comm_mul_action</span><span class="bp">.</span><span class="n">commutes</span>
</code></pre></div>



<a name="206140080"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/206140080" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#206140080">(Aug 06 2020 at 13:27)</a>:</h4>
<p>(I'm going to move lots of this discussion to topic "bimodules")</p>



<a name="206140115"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/206140115" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#206140115">(Aug 06 2020 at 13:27)</a>:</h4>
<p>oh wait I can't any more</p>



<a name="206140822"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/206140822" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#206140822">(Aug 06 2020 at 13:32)</a>:</h4>
<p>I'll just make a new topic.</p>



<a name="206140837"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/206140837" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#206140837">(Aug 06 2020 at 13:32)</a>:</h4>
<p>oh, I would have to do it on my own messages</p>



<a name="206140874"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/206140874" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#206140874">(Aug 06 2020 at 13:32)</a>:</h4>
<p>I think you can do it on your messages, e.g., starting with <a href="#narrow/stream/116395-maths/topic/Pointed.20monoid/near/205964445">this one</a></p>



<a name="206140975"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/206140975" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#206140975">(Aug 06 2020 at 13:33)</a>:</h4>
<p>I don't have a move option.</p>



<a name="206141044"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/206141044" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#206141044">(Aug 06 2020 at 13:34)</a>:</h4>
<p>edit message and then change the topic</p>



<a name="206141139"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/206141139" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#206141139">(Aug 06 2020 at 13:34)</a>:</h4>
<p>That worked!</p>



<a name="206141221"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/206141221" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#206141221">(Aug 06 2020 at 13:35)</a>:</h4>
<p>Here's what I have so far:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra</span>

<span class="n">class</span> <span class="n">comm_mul_action</span> <span class="n">M</span> <span class="n">N</span> <span class="n">α</span>
  <span class="o">[</span><span class="n">monoid</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">monoid</span> <span class="n">N</span><span class="o">]</span>
  <span class="o">[</span><span class="n">mul_action</span> <span class="n">M</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">mul_action</span> <span class="n">N</span> <span class="n">α</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">commutes</span> <span class="o">{</span><span class="n">m</span> <span class="o">:</span> <span class="n">M</span><span class="o">}</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">N</span><span class="o">}</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">:</span> <span class="n">m</span> <span class="err">•</span> <span class="n">n</span> <span class="err">•</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">n</span> <span class="err">•</span> <span class="n">m</span> <span class="err">•</span> <span class="n">a</span><span class="o">)</span>

<span class="n">class</span> <span class="n">biaction</span> <span class="n">M</span> <span class="n">N</span> <span class="n">α</span> <span class="o">[</span><span class="n">monoid</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">monoid</span> <span class="n">N</span><span class="o">]</span>
  <span class="o">[</span><span class="n">mul_action</span> <span class="n">M</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">mul_action</span> <span class="n">N</span><span class="err">ᵒᵖ</span> <span class="n">α</span><span class="o">]</span> <span class="kn">extends</span> <span class="n">comm_mul_action</span> <span class="n">M</span> <span class="n">N</span><span class="err">ᵒᵖ</span> <span class="n">α</span>

<span class="kn">notation</span> <span class="n">a</span> <span class="bp">`</span> <span class="err">•</span> <span class="bp">`</span><span class="o">:</span><span class="mi">73</span> <span class="n">m</span> <span class="o">:=</span> <span class="n">has_scalar</span><span class="bp">.</span><span class="n">smul</span> <span class="o">(</span><span class="n">opposite</span><span class="bp">.</span><span class="n">op</span> <span class="n">m</span><span class="o">)</span> <span class="n">a</span>

<span class="n">class</span> <span class="n">bimodule</span> <span class="n">A</span> <span class="n">B</span> <span class="n">M</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">A</span><span class="o">]</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">B</span><span class="o">]</span> <span class="o">[</span><span class="n">add_comm_monoid</span> <span class="n">M</span><span class="o">]</span>
  <span class="o">[</span><span class="n">semimodule</span> <span class="n">A</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">semimodule</span> <span class="n">B</span><span class="err">ᵒᵖ</span> <span class="n">M</span><span class="o">]</span> <span class="kn">extends</span> <span class="n">biaction</span> <span class="n">A</span> <span class="n">B</span> <span class="n">M</span>

<span class="kn">variables</span> <span class="o">(</span><span class="n">A</span> <span class="n">B</span> <span class="n">M</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">A</span><span class="o">]</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">B</span><span class="o">]</span> <span class="o">[</span><span class="n">add_comm_monoid</span> <span class="n">M</span><span class="o">]</span>
  <span class="o">[</span><span class="n">semimodule</span> <span class="n">A</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">semimodule</span> <span class="n">B</span><span class="err">ᵒᵖ</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">bimodule</span> <span class="n">A</span> <span class="n">B</span> <span class="n">M</span><span class="o">]</span>
<span class="kn">variables</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">A</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">B</span><span class="o">)</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="n">M</span><span class="o">)</span>

<span class="kn">example</span> <span class="o">:</span> <span class="n">a</span> <span class="err">•</span> <span class="n">m</span> <span class="err">•</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">a</span> <span class="err">•</span> <span class="o">(</span><span class="n">m</span> <span class="err">•</span> <span class="n">b</span><span class="o">)</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">comm_mul_action</span><span class="bp">.</span><span class="n">commutes</span>

<span class="kn">instance</span> <span class="n">foo1</span> <span class="o">:</span> <span class="n">semimodule</span> <span class="n">A</span><span class="err">ᵒᵖ</span> <span class="n">A</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">smul</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">a</span><span class="bp">.</span><span class="n">unop</span><span class="o">,</span>
  <span class="n">one_smul</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span><span class="o">,</span>
  <span class="n">mul_smul</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">mul_assoc</span><span class="o">],</span>
  <span class="n">smul_add</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">add_mul</span><span class="o">],</span>
  <span class="n">smul_zero</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span><span class="o">,</span>
  <span class="n">add_smul</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">mul_add</span><span class="o">],</span>
  <span class="n">zero_smul</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">}</span>

<span class="kn">instance</span> <span class="n">foo</span> <span class="o">:</span> <span class="n">bimodule</span> <span class="n">A</span> <span class="n">A</span> <span class="n">A</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">commutes</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span><span class="o">,</span> <span class="k">by</span> <span class="o">{</span> <span class="n">change</span> <span class="bp">_</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">_</span> <span class="bp">*</span> <span class="bp">_</span> <span class="o">)</span> <span class="bp">=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">rw</span> <span class="err">←</span><span class="n">mul_assoc</span><span class="o">,</span> <span class="n">refl</span> <span class="o">}</span> <span class="o">}</span>
</code></pre></div>



<a name="206141420"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/206141420" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#206141420">(Aug 06 2020 at 13:37)</a>:</h4>
<p>Now if you try to use <code>•</code> on a ring <code>A</code> do you not get some overloaded notation error?</p>



<a name="206141475"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/206141475" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#206141475">(Aug 06 2020 at 13:37)</a>:</h4>
<p>Yeah, there's the issue.</p>



<a name="206141576"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/206141576" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Utensil Song <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#206141576">(Aug 06 2020 at 13:38)</a>:</h4>
<p>Ping <span class="user-mention" data-user-id="310045">@Eric Wieser</span></p>



<a name="206141691"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/206141691" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#206141691">(Aug 06 2020 at 13:39)</a>:</h4>
<p>Okay, how do you write that right triangle thing?</p>



<a name="206141836"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/206141836" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#206141836">(Aug 06 2020 at 13:40)</a>:</h4>
<p><code>\tb</code> but in emacs</p>



<a name="206141864"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/206141864" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#206141864">(Aug 06 2020 at 13:40)</a>:</h4>
<p>Works in vscode too.</p>



<a name="206142058"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/206142058" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#206142058">(Aug 06 2020 at 13:41)</a>:</h4>
<p>Can we just use an r subscript for the right version?</p>



<a name="206142186"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/206142186" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#206142186">(Aug 06 2020 at 13:42)</a>:</h4>
<p>Maybe, but wouldn't it be terrible to write <code>\bu\_r</code> a million times?</p>



<a name="206142223"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/206142223" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#206142223">(Aug 06 2020 at 13:43)</a>:</h4>
<p>Could always have \bur as a shorhand</p>



<a name="206142247"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/206142247" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#206142247">(Aug 06 2020 at 13:43)</a>:</h4>
<p>Or \rbullet etc</p>



<a name="206143243"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/206143243" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#206143243">(Aug 06 2020 at 13:50)</a>:</h4>
<p>The last line in this gives me errors:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra</span>

<span class="n">class</span> <span class="n">comm_mul_action</span> <span class="n">M</span> <span class="n">N</span> <span class="n">α</span>
  <span class="o">[</span><span class="n">monoid</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">monoid</span> <span class="n">N</span><span class="o">]</span>
  <span class="o">[</span><span class="n">mul_action</span> <span class="n">M</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">mul_action</span> <span class="n">N</span> <span class="n">α</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">commutes</span> <span class="o">{</span><span class="n">m</span> <span class="o">:</span> <span class="n">M</span><span class="o">}</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">N</span><span class="o">}</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">:</span> <span class="n">m</span> <span class="err">•</span> <span class="n">n</span> <span class="err">•</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">n</span> <span class="err">•</span> <span class="n">m</span> <span class="err">•</span> <span class="n">a</span><span class="o">)</span>

<span class="n">class</span> <span class="n">biaction</span> <span class="n">M</span> <span class="n">N</span> <span class="n">α</span> <span class="o">[</span><span class="n">monoid</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">monoid</span> <span class="n">N</span><span class="o">]</span>
  <span class="o">[</span><span class="n">mul_action</span> <span class="n">M</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">mul_action</span> <span class="n">N</span><span class="err">ᵒᵖ</span> <span class="n">α</span><span class="o">]</span> <span class="kn">extends</span> <span class="n">comm_mul_action</span> <span class="n">M</span> <span class="n">N</span><span class="err">ᵒᵖ</span> <span class="n">α</span>

<span class="kn">notation</span> <span class="n">m</span> <span class="bp">`</span> <span class="err">•ᵣ</span> <span class="bp">`</span><span class="o">:</span><span class="mi">73</span> <span class="n">a</span> <span class="o">:=</span> <span class="o">(</span><span class="n">opposite</span><span class="bp">.</span><span class="n">op</span> <span class="n">a</span><span class="o">)</span> <span class="err">•</span> <span class="n">m</span>

<span class="n">class</span> <span class="n">bimodule</span> <span class="n">A</span> <span class="n">B</span> <span class="n">M</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">A</span><span class="o">]</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">B</span><span class="o">]</span> <span class="o">[</span><span class="n">add_comm_monoid</span> <span class="n">M</span><span class="o">]</span>
  <span class="o">[</span><span class="n">semimodule</span> <span class="n">A</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">semimodule</span> <span class="n">B</span><span class="err">ᵒᵖ</span> <span class="n">M</span><span class="o">]</span> <span class="kn">extends</span> <span class="n">biaction</span> <span class="n">A</span> <span class="n">B</span> <span class="n">M</span>

<span class="kn">variables</span> <span class="o">(</span><span class="n">A</span> <span class="n">B</span> <span class="n">M</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">A</span><span class="o">]</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">B</span><span class="o">]</span> <span class="o">[</span><span class="n">add_comm_monoid</span> <span class="n">M</span><span class="o">]</span>
  <span class="o">[</span><span class="n">semimodule</span> <span class="n">A</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">semimodule</span> <span class="n">B</span><span class="err">ᵒᵖ</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">bimodule</span> <span class="n">A</span> <span class="n">B</span> <span class="n">M</span><span class="o">]</span>
<span class="kn">variables</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">A</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">B</span><span class="o">)</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="n">M</span><span class="o">)</span>

<span class="bp">#</span><span class="kn">check</span> <span class="n">a</span> <span class="err">•</span> <span class="n">m</span> <span class="err">•ᵣ</span> <span class="n">b</span>
<span class="bp">#</span><span class="kn">check</span> <span class="n">a</span> <span class="err">•</span> <span class="o">(</span><span class="n">m</span> <span class="err">•ᵣ</span> <span class="n">b</span><span class="o">)</span>

<span class="kn">example</span> <span class="o">:</span> <span class="n">a</span> <span class="err">•</span> <span class="n">m</span> <span class="err">•ᵣ</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">a</span> <span class="err">•</span> <span class="o">(</span><span class="n">m</span> <span class="err">•ᵣ</span> <span class="n">b</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sorry</span>
</code></pre></div>


<p>Can anyone reproduce and/or explain why?</p>



<a name="206143450"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/206143450" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#206143450">(Aug 06 2020 at 13:52)</a>:</h4>
<p><code>example : (a • m •ᵣ b) = a • (m •ᵣ b) := sorry</code></p>



<a name="206143465"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/206143465" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#206143465">(Aug 06 2020 at 13:52)</a>:</h4>
<p>Yeah, just figured that out too :)</p>



<a name="206143491"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/206143491" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#206143491">(Aug 06 2020 at 13:52)</a>:</h4>
<p>That's annoying though.</p>



<a name="206143513"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/206143513" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#206143513">(Aug 06 2020 at 13:53)</a>:</h4>
<p>I guess it's some precedence issue with equality?</p>



<a name="206143521"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/206143521" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#206143521">(Aug 06 2020 at 13:53)</a>:</h4>
<p>or <code>notation m ` •ᵣ `:73 a:73 := (opposite.op a) • m</code> or 72 whichever is the right one, I can never remember how these work</p>



<a name="206143699"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/206143699" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#206143699">(Aug 06 2020 at 13:54)</a>:</h4>
<p>73 is the right one apparently</p>



<a name="206143953"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/206143953" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#206143953">(Aug 06 2020 at 13:56)</a>:</h4>
<p>I think we should make it 72: e.g. with 73 this is true:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">variables</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="o">:</span> <span class="n">A</span><span class="o">}</span>

<span class="kn">example</span> <span class="o">:</span> <span class="n">x</span> <span class="err">•</span> <span class="n">y</span> <span class="err">•ᵣ</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">x</span> <span class="err">•</span> <span class="o">(</span><span class="n">y</span> <span class="err">•ᵣ</span> <span class="n">z</span><span class="o">)</span> <span class="o">:=</span> <span class="n">rfl</span>
</code></pre></div>



<a name="206144013"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/206144013" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#206144013">(Aug 06 2020 at 13:56)</a>:</h4>
<p>what I mean is the levels for <code>•ᵣ</code> should be equal because then it will associate properly with itself</p>



<a name="206144028"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/206144028" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#206144028">(Aug 06 2020 at 13:57)</a>:</h4>
<p>Oh ok.</p>



<a name="206144262"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/206144262" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#206144262">(Aug 06 2020 at 13:59)</a>:</h4>
<p>Seems okay so far:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra</span>

<span class="n">class</span> <span class="n">comm_mul_action</span> <span class="n">M</span> <span class="n">N</span> <span class="n">α</span>
  <span class="o">[</span><span class="n">monoid</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">monoid</span> <span class="n">N</span><span class="o">]</span>
  <span class="o">[</span><span class="n">mul_action</span> <span class="n">M</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">mul_action</span> <span class="n">N</span> <span class="n">α</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">commutes</span> <span class="o">{</span><span class="n">m</span> <span class="o">:</span> <span class="n">M</span><span class="o">}</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">N</span><span class="o">}</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">:</span> <span class="n">m</span> <span class="err">•</span> <span class="n">n</span> <span class="err">•</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">n</span> <span class="err">•</span> <span class="n">m</span> <span class="err">•</span> <span class="n">a</span><span class="o">)</span>

<span class="n">class</span> <span class="n">biaction</span> <span class="n">M</span> <span class="n">N</span> <span class="n">α</span> <span class="o">[</span><span class="n">monoid</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">monoid</span> <span class="n">N</span><span class="o">]</span>
  <span class="o">[</span><span class="n">mul_action</span> <span class="n">M</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">mul_action</span> <span class="n">N</span><span class="err">ᵒᵖ</span> <span class="n">α</span><span class="o">]</span> <span class="kn">extends</span> <span class="n">comm_mul_action</span> <span class="n">M</span> <span class="n">N</span><span class="err">ᵒᵖ</span> <span class="n">α</span>

<span class="kn">notation</span> <span class="n">m</span> <span class="bp">`</span> <span class="err">•ᵣ</span> <span class="bp">`</span><span class="o">:</span><span class="mi">72</span> <span class="n">a</span><span class="o">:</span><span class="mi">72</span> <span class="o">:=</span> <span class="o">(</span><span class="n">opposite</span><span class="bp">.</span><span class="n">op</span> <span class="n">a</span><span class="o">)</span> <span class="err">•</span> <span class="n">m</span>

<span class="n">class</span> <span class="n">bimodule</span> <span class="n">A</span> <span class="n">B</span> <span class="n">M</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">A</span><span class="o">]</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">B</span><span class="o">]</span> <span class="o">[</span><span class="n">add_comm_monoid</span> <span class="n">M</span><span class="o">]</span>
  <span class="o">[</span><span class="n">semimodule</span> <span class="n">A</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">semimodule</span> <span class="n">B</span><span class="err">ᵒᵖ</span> <span class="n">M</span><span class="o">]</span> <span class="kn">extends</span> <span class="n">biaction</span> <span class="n">A</span> <span class="n">B</span> <span class="n">M</span>

<span class="kn">variables</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">A</span><span class="o">]</span>

<span class="kn">namespace</span> <span class="n">semiring</span>
<span class="kn">instance</span> <span class="o">:</span> <span class="n">semimodule</span> <span class="n">A</span><span class="err">ᵒᵖ</span> <span class="n">A</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">smul</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">a</span><span class="bp">.</span><span class="n">unop</span><span class="o">,</span>
  <span class="n">one_smul</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span><span class="o">,</span>
  <span class="n">mul_smul</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">mul_assoc</span><span class="o">],</span>
  <span class="n">smul_add</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">add_mul</span><span class="o">],</span>
  <span class="n">smul_zero</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span><span class="o">,</span>
  <span class="n">add_smul</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">mul_add</span><span class="o">],</span>
  <span class="n">zero_smul</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">}</span>

<span class="kn">instance</span> <span class="o">:</span> <span class="n">bimodule</span> <span class="n">A</span> <span class="n">A</span> <span class="n">A</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">commutes</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span><span class="o">,</span> <span class="k">by</span> <span class="o">{</span> <span class="n">change</span> <span class="bp">_</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">_</span> <span class="bp">*</span> <span class="bp">_</span> <span class="o">)</span> <span class="bp">=</span> <span class="bp">_</span><span class="o">,</span> <span class="n">rw</span> <span class="err">←</span><span class="n">mul_assoc</span><span class="o">,</span> <span class="n">refl</span> <span class="o">}</span> <span class="o">}</span>
<span class="kn">end</span> <span class="n">semiring</span>

<span class="kn">variables</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="o">:</span> <span class="n">A</span><span class="o">}</span>

<span class="kn">example</span> <span class="o">:</span> <span class="n">x</span> <span class="err">•</span> <span class="n">y</span> <span class="err">•ᵣ</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">x</span> <span class="err">•</span> <span class="o">(</span><span class="n">y</span> <span class="err">•ᵣ</span> <span class="n">z</span><span class="o">)</span> <span class="o">:=</span>
  <span class="k">by</span> <span class="n">simp_rw</span> <span class="n">comm_mul_action</span><span class="bp">.</span><span class="n">commutes</span>
</code></pre></div>



<a name="206146313"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/206146313" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#206146313">(Aug 06 2020 at 14:13)</a>:</h4>
<p><code>notation m ` •ᵣ `:72 a:72 := (opposite.op a) • m</code> - this doesn't strike me as correct - don't you need <code>(opposite.unop (opposite.op a) • (opposite.op m))</code>?</p>
<p>i.e., flip both arguments and the order of multiplication, then flip the result back</p>



<a name="206147359"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/206147359" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#206147359">(Aug 06 2020 at 14:21)</a>:</h4>
<p>I'm confused. Why? A right action is just a left action by the opposite ring.</p>



<a name="206147916"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/206147916" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#206147916">(Aug 06 2020 at 14:25)</a>:</h4>
<p>My uninformed thinking was that maybe <code>α</code> needs to be made opposite too. Maybe the argument goes that <code>α</code> doesn't define any multiplicative operator so it doesn't matter</p>



<a name="206166054"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/206166054" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#206166054">(Aug 06 2020 at 16:44)</a>:</h4>
<p><code>α</code> has no multiplication so there is no need to <code>opposite</code> it.</p>



<a name="206166339"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/206166339" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#206166339">(Aug 06 2020 at 16:46)</a>:</h4>
<p>Note that <code>comm_mul_action</code> can be used for something else than bimodules. E.g., a group representation is a <code>mul_action</code> on a vector space that commutes with the action of the field (though this doesn't help us study the set of all representations).</p>



<a name="206169414"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/206169414" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#206169414">(Aug 06 2020 at 17:09)</a>:</h4>
<p><span class="user-mention silent" data-user-id="214703">Yury G. Kudryashov</span> <a href="#narrow/stream/116395-maths/topic/Bimodules/near/206166054">said</a>:</p>
<blockquote>
<p><code>α</code> has no multiplication so there is no need to <code>opposite</code> it.</p>
</blockquote>
<p>There's no <code>has_mul α</code> in that context, but what if there is in a consumer?</p>



<a name="206170642"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/206170642" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#206170642">(Aug 06 2020 at 17:19)</a>:</h4>
<p>I'm the case of an algebra, the multiplication from the base ring commutes with everything anyway, so it shouldn't matter.</p>



<a name="206170805"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/206170805" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#206170805">(Aug 06 2020 at 17:21)</a>:</h4>
<p>Is this the example you have in mind?</p>



<a name="220741049"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/220741049" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#220741049">(Dec 22 2020 at 22:29)</a>:</h4>
<p>I think we should revisit this. I've been discussing bimodule implementation at <a href="#narrow/stream/144837-PR-reviews/topic/4770.20smul_comm_class">https://leanprover.zulipchat.com/#narrow/stream/144837-PR-reviews/topic/4770.20smul_comm_class</a> with <span class="user-mention" data-user-id="214703">@Yury G. Kudryashov</span></p>



<a name="220741060"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/220741060" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#220741060">(Dec 22 2020 at 22:29)</a>:</h4>
<p>my work so far is at <a href="https://github.com/leanprover-community/mathlib/tree/bimodule">branch#bimodule</a></p>



<a name="220741267"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/220741267" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#220741267">(Dec 22 2020 at 22:31)</a>:</h4>
<p>Can you define <code>subbimodule R M := submodule (R × opposite R) M</code> and reuse most of the theory about submodules?</p>



<a name="220742426"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/220742426" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#220742426">(Dec 22 2020 at 22:39)</a>:</h4>
<p>I'll try that. Should I also try defining <code>bimodule</code>s that way from the beginning, or just provide a <code>module (A × opposite B) M</code> instance given<code>bimodule A B M</code>?</p>



<a name="220742563"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/220742563" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#220742563">(Dec 22 2020 at 22:40)</a>:</h4>
<p>I guess that last question is about equivalent to "should bimodules be mixins?"</p>



<a name="220742631"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/220742631" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#220742631">(Dec 22 2020 at 22:41)</a>:</h4>
<p>We should have a <code>semimodule (R × S) M</code> instance given <code>semimodule R M</code>, <code>semimodule S M</code>, and <code>smul_comm_class R S M</code>.</p>



<a name="220743662"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/220743662" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#220743662">(Dec 22 2020 at 22:53)</a>:</h4>
<p>I don't know if the last few comments use the Cartesian product just because of Unicode input problems with zulip, but it's important to note that a bimodule is a module over the tensor product not the Cartesian product (distributivity won't work correctly with Cartesian product).</p>



<a name="220744060"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/220744060" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#220744060">(Dec 22 2020 at 22:58)</a>:</h4>
<p>Hrmm, we are climbing up the import tree quickly</p>



<a name="220744107"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/220744107" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#220744107">(Dec 22 2020 at 22:59)</a>:</h4>
<p><span class="user-mention" data-user-id="243562">@Adam Topaz</span> It's because I made a stupid mistake.</p>



<a name="220744227"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/220744227" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#220744227">(Dec 22 2020 at 23:00)</a>:</h4>
<p>BTW, should we redefine <code>submodule</code>s based on a <code>distrib_mul_action</code> instead of a <code>semimodule</code>?</p>



<a name="220744269"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/220744269" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#220744269">(Dec 22 2020 at 23:01)</a>:</h4>
<p>Yeah, this is getting impractical for basic definitions, in part because our tensor products require commutativity, and a lot of the point of bimodules requires noncommutative scalars</p>



<a name="220744385"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/220744385" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#220744385">(Dec 22 2020 at 23:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="214703">Yury G. Kudryashov</span> <a href="#narrow/stream/116395-maths/topic/Bimodules/near/220744227">said</a>:</p>
<blockquote>
<p>BTW, should we redefine <code>submodule</code>s based on a <code>distrib_mul_action</code> instead of a <code>semimodule</code>?</p>
</blockquote>
<p>I don't see why not. Nothing breaks immediately.</p>



<a name="220744471"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/220744471" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#220744471">(Dec 22 2020 at 23:03)</a>:</h4>
<p>wait, the commutativity requirement might not be necessary, let me check</p>



<a name="220744911"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/220744911" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#220744911">(Dec 22 2020 at 23:09)</a>:</h4>
<p>Yeah, I think commutativity isn't necessary, but subtraction totally is</p>



<a name="220744980"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/220744980" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#220744980">(Dec 22 2020 at 23:10)</a>:</h4>
<p>I'm ok only defining <code>subbimodule</code>s for actual <code>bimodule</code>s and not <code>bisemimodule</code>s</p>



<a name="220746999"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/220746999" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#220746999">(Dec 22 2020 at 23:37)</a>:</h4>
<p>I hope that whatever ends up happening is built on top of some kind of bi-<code>mul_action</code>s so we don't have to reinvent those later. That probably rules out approaches based on the tensor product (which likely weren't that viable anyways).</p>



<a name="220747958"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/220747958" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#220747958">(Dec 22 2020 at 23:50)</a>:</h4>
<p>I think the tensor product might be viable for defining <code>subbimodule</code>s - not really for <code>bimodule</code>s themselves.</p>



<a name="220748118"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/220748118" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#220748118">(Dec 22 2020 at 23:52)</a>:</h4>
<p>As to bi-<code>mul_action</code>, I think the implementation would just be to assume two separate <code>mul_action</code>s and then a <code>smul_comm_class</code>, which we already have</p>



<a name="220749309"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/220749309" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#220749309">(Dec 23 2020 at 00:08)</a>:</h4>
<p>Unless you mean implementing <code>sub_bi_mul_action</code></p>



<a name="220749582"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules/near/220749582" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Bimodules.html#220749582">(Dec 23 2020 at 00:12)</a>:</h4>
<p>In which case I think there would be a diamond to deal with</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>