---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/target.20of.20ring.20hom.20algebra.20over.20image.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/target.20of.20ring.20hom.20algebra.20over.20image.html">target of ring hom algebra over image</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="275017440"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/target%20of%20ring%20hom%20algebra%20over%20image/near/275017440" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashwin Iyengar <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/target.20of.20ring.20hom.20algebra.20over.20image.html#275017440">(Mar 11 2022 at 18:55)</a>:</h4>
<p>If I have a commutative unital ring homomorphism <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo>:</mo><mi>A</mi><mo>→</mo><mi>B</mi></mrow><annotation encoding="application/x-tex">f: A \to B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span></span></span>, then does mathlib know that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi></mrow><annotation encoding="application/x-tex">B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span></span></span> is an <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>A</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(A)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">A</span><span class="mclose">)</span></span></span></span>-algebra? What would be the best way to access this instance of being an algebra?</p>



<a name="275017483"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/target%20of%20ring%20hom%20algebra%20over%20image/near/275017483" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashwin Iyengar <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/target.20of.20ring.20hom.20algebra.20over.20image.html#275017483">(Mar 11 2022 at 18:55)</a>:</h4>
<p>Or do I just have to construct it</p>



<a name="275023296"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/target%20of%20ring%20hom%20algebra%20over%20image/near/275023296" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/target.20of.20ring.20hom.20algebra.20over.20image.html#275023296">(Mar 11 2022 at 19:36)</a>:</h4>
<p>What do you mean by <code>f(A)</code>? There is a type v term issue here. The image of <code>f</code> has type <code>subring B</code> so in particular it's a term. However <code>algebra X B</code> needs <code>X</code> to be a type. Do you really need to consider this image? Would you be happy with the idea that B is an A-algebra? That is much easier.</p>



<a name="275023601"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/target%20of%20ring%20hom%20algebra%20over%20image/near/275023601" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/target.20of.20ring.20hom.20algebra.20over.20image.html#275023601">(Mar 11 2022 at 19:38)</a>:</h4>
<p>If you insist:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.algebra.basic</span>

<span class="kd">variables</span> <span class="o">(</span><span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">A</span><span class="o">]</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">B</span><span class="o">]</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→+*</span> <span class="n">B</span><span class="o">)</span> <span class="o">:</span> <span class="n">algebra</span> <span class="o">(</span><span class="n">f.range</span><span class="o">)</span> <span class="n">B</span> <span class="o">:=</span>
<span class="n">algebra.of_subring</span> <span class="n">_</span>
</code></pre></div>



<a name="275023772"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/target%20of%20ring%20hom%20algebra%20over%20image/near/275023772" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/target.20of.20ring.20hom.20algebra.20over.20image.html#275023772">(Mar 11 2022 at 19:40)</a>:</h4>
<p>(found using <code>library_search</code> BTW)</p>



<a name="275037428"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/target%20of%20ring%20hom%20algebra%20over%20image/near/275037428" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/target.20of.20ring.20hom.20algebra.20over.20image.html#275037428">(Mar 11 2022 at 21:42)</a>:</h4>
<p>Doesn't <code>apply_instance</code> find it?</p>



<a name="275069679"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/target%20of%20ring%20hom%20algebra%20over%20image/near/275069679" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashwin Iyengar <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/target.20of.20ring.20hom.20algebra.20over.20image.html#275069679">(Mar 12 2022 at 01:39)</a>:</h4>
<p>Thanks! I think I am actually happy for <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi></mrow><annotation encoding="application/x-tex">B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span></span></span> to be an <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span> algebra in the end.</p>



<a name="275072064"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/target%20of%20ring%20hom%20algebra%20over%20image/near/275072064" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/target.20of.20ring.20hom.20algebra.20over.20image.html#275072064">(Mar 12 2022 at 02:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="235423">Ashwin Iyengar</span> has marked this topic as unresolved.</p>



<a name="275074445"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/target%20of%20ring%20hom%20algebra%20over%20image/near/275074445" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashwin Iyengar <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/target.20of.20ring.20hom.20algebra.20over.20image.html#275074445">(Mar 12 2022 at 03:41)</a>:</h4>
<p>I guess I want to say "a field <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span></span></span></span> of characteristic <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span></span></span></span> such that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mi>F</mi><mo>:</mo><msup><mi>F</mi><mi>p</mi></msup><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[F:F^p]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span></span></span></span></span><span class="mclose">]</span></span></span></span> is finite". So I want to write something like <code>finite_dimensional (frobenius F p).range F</code>, but this doesn't work because, among other reasons, <code>(frobenius F p).range</code> is a term rather than a type. So instead I want to say something like <code>finite_dimensional F F</code> but I want to view the second <code>F</code> as a module over <code>F</code> via frobenius rather than the canonical module structure. I've been searching the docs but can't figure out how to do this in a clean way. Any help would be appreciated.</p>



<a name="275074573"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/target%20of%20ring%20hom%20algebra%20over%20image/near/275074573" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/target.20of.20ring.20hom.20algebra.20over.20image.html#275074573">(Mar 12 2022 at 03:44)</a>:</h4>
<p>I would introduce a type alias for the second <code>F</code> (the target of the Frobenius map), and consider it as an <code>F</code> algebra w.r.t. Frob.</p>



<a name="275074661"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/target%20of%20ring%20hom%20algebra%20over%20image/near/275074661" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/target.20of.20ring.20hom.20algebra.20over.20image.html#275074661">(Mar 12 2022 at 03:47)</a>:</h4>
<p>In any case, you can still use the range and write <code>finite_dimensional Frob.range F</code> or something like this. I don't know how Frobenius is denoted in mathlib.</p>



<a name="275074726"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/target%20of%20ring%20hom%20algebra%20over%20image/near/275074726" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/target.20of.20ring.20hom.20algebra.20over.20image.html#275074726">(Mar 12 2022 at 03:48)</a>:</h4>
<p>Oh, I guess it should be <code>finite_dimensional (frobenius F p).range F</code>. I'm surprised that doesn't work...</p>



<a name="275074927"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/target%20of%20ring%20hom%20algebra%20over%20image/near/275074927" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/target.20of.20ring.20hom.20algebra.20over.20image.html#275074927">(Mar 12 2022 at 03:54)</a>:</h4>
<p>Aha! The issue is not that it's a term as opposed to a type (because there is a coercion to sort), but rather that mathlib doesn't know that the image will be a division ring, which is required for <code>finite_dimensional</code>.</p>



<a name="275075082"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/target%20of%20ring%20hom%20algebra%20over%20image/near/275075082" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/target.20of.20ring.20hom.20algebra.20over.20image.html#275075082">(Mar 12 2022 at 03:58)</a>:</h4>
<p>Okay, that's indeed the issue:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.char_p.basic</span>
<span class="kn">import</span> <span class="n">linear_algebra.finite_dimensional</span>
<span class="kn">import</span> <span class="n">algebra.algebra.basic</span>

<span class="kd">universe</span> <span class="n">u</span>
<span class="kd">variables</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">field</span> <span class="n">F</span><span class="o">]</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">[</span><span class="n">fact</span> <span class="o">(</span><span class="n">nat.prime</span> <span class="n">p</span><span class="o">)]</span> <span class="o">[</span><span class="n">char_p</span> <span class="n">F</span> <span class="n">p</span><span class="o">]</span>

<span class="kd">instance</span> <span class="o">:</span> <span class="n">field</span> <span class="o">(</span><span class="n">frobenius</span> <span class="n">F</span> <span class="n">p</span><span class="o">)</span><span class="bp">.</span><span class="n">range</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">inv</span> <span class="o">:=</span> <span class="gr">sorry</span><span class="o">,</span>
  <span class="n">div</span> <span class="o">:=</span> <span class="gr">sorry</span><span class="o">,</span>
  <span class="n">div_eq_mul_inv</span> <span class="o">:=</span> <span class="gr">sorry</span><span class="o">,</span>
  <span class="n">zpow</span> <span class="o">:=</span> <span class="gr">sorry</span><span class="o">,</span>
  <span class="n">zpow_zero'</span> <span class="o">:=</span> <span class="gr">sorry</span><span class="o">,</span>
  <span class="n">zpow_succ'</span> <span class="o">:=</span> <span class="gr">sorry</span><span class="o">,</span>
  <span class="n">zpow_neg'</span> <span class="o">:=</span> <span class="gr">sorry</span><span class="o">,</span>
  <span class="n">exists_pair_ne</span> <span class="o">:=</span> <span class="gr">sorry</span><span class="o">,</span>
  <span class="n">mul_inv_cancel</span> <span class="o">:=</span> <span class="gr">sorry</span><span class="o">,</span>
  <span class="n">inv_zero</span> <span class="o">:=</span> <span class="gr">sorry</span><span class="o">,</span>
  <span class="bp">..</span><span class="o">(</span><span class="n">infer_instance</span> <span class="o">:</span> <span class="n">comm_ring</span> <span class="n">_</span><span class="o">)</span> <span class="o">}</span>

<span class="kd">example</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="n">finite_dimensional</span> <span class="o">(</span><span class="n">frobenius</span> <span class="n">F</span> <span class="n">p</span><span class="o">)</span><span class="bp">.</span><span class="n">range</span> <span class="n">F</span>
</code></pre></div>



<a name="275075225"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/target%20of%20ring%20hom%20algebra%20over%20image/near/275075225" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashwin Iyengar <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/target.20of.20ring.20hom.20algebra.20over.20image.html#275075225">(Mar 12 2022 at 04:01)</a>:</h4>
<p>Ah ok! That's interesting, thanks</p>



<a name="275075411"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/target%20of%20ring%20hom%20algebra%20over%20image/near/275075411" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashwin Iyengar <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/target.20of.20ring.20hom.20algebra.20over.20image.html#275075411">(Mar 12 2022 at 04:04)</a>:</h4>
<p>the mathlib docs suggest you can make an aliases of a def or theorem, but how do you alias a type?</p>



<a name="275075561"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/target%20of%20ring%20hom%20algebra%20over%20image/near/275075561" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/target.20of.20ring.20hom.20algebra.20over.20image.html#275075561">(Mar 12 2022 at 04:09)</a>:</h4>
<p>It can be as easy as <code>def K := F</code>.</p>



<a name="275075619"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/target%20of%20ring%20hom%20algebra%20over%20image/near/275075619" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/target.20of.20ring.20hom.20algebra.20over.20image.html#275075619">(Mar 12 2022 at 04:11)</a>:</h4>
<p>But the issue of considering F as an algebra over itself with respect to Frobenius is important enough that we should give some thought about how to do this properly so that it's easy to work with. Unfortunately, I won't be able to help with this tonight.</p>



<a name="275081018"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/target%20of%20ring%20hom%20algebra%20over%20image/near/275081018" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashwin Iyengar <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/target.20of.20ring.20hom.20algebra.20over.20image.html#275081018">(Mar 12 2022 at 06:39)</a>:</h4>
<p>Ah okay. Maybe it's worth making an instance of <code>field</code> for the image whenever you have a nontrivial homomorphism from a field?</p>



<a name="275086659"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/target%20of%20ring%20hom%20algebra%20over%20image/near/275086659" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/target.20of.20ring.20hom.20algebra.20over.20image.html#275086659">(Mar 12 2022 at 09:11)</a>:</h4>
<p>I think the right generality is "homomorphism from a field into a nontrivial ring" and yes I think the type class inference system should be able to handle this.</p>



<a name="275088554"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/target%20of%20ring%20hom%20algebra%20over%20image/near/275088554" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/target.20of.20ring.20hom.20algebra.20over.20image.html#275088554">(Mar 12 2022 at 10:02)</a>:</h4>
<p>There's possibly a trap here when that nontrivial ring is already a field</p>



<a name="275088575"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/target%20of%20ring%20hom%20algebra%20over%20image/near/275088575" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/target.20of.20ring.20hom.20algebra.20over.20image.html#275088575">(Mar 12 2022 at 10:03)</a>:</h4>
<p>Which might end up creating an equal but not defeq diamond in <code>has_inv</code></p>



<a name="275089779"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/target%20of%20ring%20hom%20algebra%20over%20image/near/275089779" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/target.20of.20ring.20hom.20algebra.20over.20image.html#275089779">(Mar 12 2022 at 10:35)</a>:</h4>
<p>but the <code>range</code> will be a <code>subring</code>, right?</p>



<a name="275094825"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/target%20of%20ring%20hom%20algebra%20over%20image/near/275094825" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/target.20of.20ring.20hom.20algebra.20over.20image.html#275094825">(Mar 12 2022 at 12:42)</a>:</h4>
<p>Picking up on what Eric says, non-trivial field automorphisms seem worrying.  For instance, there was a recent thread precisely about the image of Frobenius.  If the field is perfect (and not the prime field), wouldn't this create issues?</p>



<a name="275095078"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/target%20of%20ring%20hom%20algebra%20over%20image/near/275095078" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/target.20of.20ring.20hom.20algebra.20over.20image.html#275095078">(Mar 12 2022 at 12:49)</a>:</h4>
<p>I am not sure what the concern is here; <code>↥(frobenius F p).range</code> will never be definitionally equal to <code>F</code>.</p>



<a name="275095338"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/target%20of%20ring%20hom%20algebra%20over%20image/near/275095338" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/target.20of.20ring.20hom.20algebra.20over.20image.html#275095338">(Mar 12 2022 at 12:55)</a>:</h4>
<p>Ok, I think that I understand, thanks!</p>
<p>I was worried about potentially creating loops, where the image of a field is a field recursively.  But, if I understand correctly, this creates more and more complicated types.</p>



<a name="275095652"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/target%20of%20ring%20hom%20algebra%20over%20image/near/275095652" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/target.20of.20ring.20hom.20algebra.20over.20image.html#275095652">(Mar 12 2022 at 13:00)</a>:</h4>
<p>Yeah, subrings are more complex than rings in Lean! Just like the quotient <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi><mi mathvariant="normal">/</mi><mo>∼</mo></mrow><annotation encoding="application/x-tex">X/\sim</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mord">/</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∼</span></span></span></span> is more complicated than <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span></span> so they write it above it and we get <code>quotient.lift</code> :-)</p>



<a name="275096202"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/target%20of%20ring%20hom%20algebra%20over%20image/near/275096202" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/target.20of.20ring.20hom.20algebra.20over.20image.html#275096202">(Mar 12 2022 at 13:08)</a>:</h4>
<p>Yes, I find this very confusing, even though I understand the motivation.  Even knowing this, I still get it wrong!</p>



<a name="275104619"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/target%20of%20ring%20hom%20algebra%20over%20image/near/275104619" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashwin Iyengar <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/target.20of.20ring.20hom.20algebra.20over.20image.html#275104619">(Mar 12 2022 at 16:16)</a>:</h4>
<p>When I do <code>obtain</code> below it suddenly changes the goal state so that the code below doesn't compile. I'm a little confused as to why not.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.algebra.basic</span>

<span class="kd">variables</span> <span class="o">(</span><span class="n">F</span> <span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">field</span> <span class="n">F</span><span class="o">]</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">F</span> <span class="bp">→+*</span> <span class="n">R</span><span class="o">)</span> <span class="o">[</span><span class="n">nontrivial</span> <span class="n">R</span><span class="o">]</span>

<span class="kd">noncomputable theory</span>

<span class="kd">instance</span> <span class="o">:</span> <span class="n">field</span> <span class="n">f.range</span> <span class="o">:=</span>
<span class="n">field_of_is_unit_or_eq_zero</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">a</span><span class="o">,</span>
  <span class="kd">begin</span>
    <span class="n">cases</span> <span class="n">em</span> <span class="o">(</span><span class="n">a</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">),</span>
    <span class="o">{</span> <span class="n">right</span><span class="o">,</span> <span class="n">assumption</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">left</span><span class="o">,</span>
      <span class="k">let</span> <span class="n">y</span> <span class="o">:=</span> <span class="n">function.injective.exists_unique_of_mem_range</span> <span class="n">f.injective</span> <span class="n">a.prop</span><span class="o">,</span>
      <span class="n">obtain</span> <span class="o">⟨</span><span class="n">lift</span><span class="o">,</span> <span class="n">prop</span><span class="o">⟩</span> <span class="o">:=</span> <span class="n">y</span><span class="o">,</span>
      <span class="k">let</span> <span class="n">l</span> <span class="o">:</span> <span class="n">lift</span> <span class="bp">≠</span> <span class="mi">0</span> <span class="o">:=</span> <span class="gr">sorry</span><span class="o">,</span>
      <span class="k">let</span> <span class="n">a_unit</span> <span class="o">:=</span> <span class="n">ring_hom.is_unit_map</span> <span class="n">f</span> <span class="o">(</span><span class="n">is_unit.mk0</span> <span class="n">lift</span> <span class="n">l</span><span class="o">),</span>
      <span class="n">rw</span> <span class="n">prop.1</span> <span class="n">at</span> <span class="n">a_unit</span><span class="o">,</span>
      <span class="n">exact</span> <span class="n">a_unit</span>
    <span class="o">}</span>
  <span class="kd">end</span>
<span class="o">)</span>
</code></pre></div>



<a name="275105111"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/target%20of%20ring%20hom%20algebra%20over%20image/near/275105111" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashwin Iyengar <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/target.20of.20ring.20hom.20algebra.20over.20image.html#275105111">(Mar 12 2022 at 16:28)</a>:</h4>
<p>Okay nevermind, this apparently had something to do with the fact that I used <code>y</code>, this almost works:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.char_p.basic</span>
<span class="kn">import</span> <span class="n">linear_algebra.finite_dimensional</span>
<span class="kn">import</span> <span class="n">algebra.algebra.basic</span>

<span class="kd">variables</span> <span class="o">(</span><span class="n">F</span> <span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">field</span> <span class="n">F</span><span class="o">]</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">F</span> <span class="bp">→+*</span> <span class="n">R</span><span class="o">)</span> <span class="o">[</span><span class="n">nontrivial</span> <span class="n">R</span><span class="o">]</span>

<span class="kd">noncomputable theory</span>

<span class="kd">instance</span> <span class="o">:</span> <span class="n">field</span> <span class="n">f.range</span> <span class="o">:=</span>
<span class="n">field_of_is_unit_or_eq_zero</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">a</span><span class="o">,</span>
  <span class="kd">begin</span>
    <span class="n">cases</span> <span class="n">em</span> <span class="o">(</span><span class="n">a</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">),</span>
    <span class="o">{</span> <span class="n">right</span><span class="o">,</span> <span class="n">assumption</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">left</span><span class="o">,</span>
      <span class="n">obtain</span> <span class="o">⟨</span><span class="n">lift</span><span class="o">,</span> <span class="n">prop</span><span class="o">⟩</span> <span class="o">:=</span> <span class="n">function.injective.exists_unique_of_mem_range</span> <span class="n">f.injective</span> <span class="n">a.prop</span><span class="o">,</span>
      <span class="k">let</span> <span class="n">l</span> <span class="o">:</span> <span class="n">lift</span> <span class="bp">≠</span> <span class="mi">0</span> <span class="o">:=</span> <span class="gr">sorry</span><span class="o">,</span>
      <span class="k">let</span> <span class="n">a_unit</span> <span class="o">:=</span> <span class="n">ring_hom.is_unit_map</span> <span class="n">f</span> <span class="o">(</span><span class="n">is_unit.mk0</span> <span class="n">lift</span> <span class="n">l</span><span class="o">),</span>
      <span class="n">rw</span> <span class="n">prop.1</span> <span class="n">at</span> <span class="n">a_unit</span><span class="o">,</span>
      <span class="n">exact</span> <span class="n">a_unit</span>
    <span class="o">}</span>
  <span class="kd">end</span>
<span class="o">)</span>
</code></pre></div>



<a name="275105307"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/target%20of%20ring%20hom%20algebra%20over%20image/near/275105307" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/target.20of.20ring.20hom.20algebra.20over.20image.html#275105307">(Mar 12 2022 at 16:32)</a>:</h4>
<p>I suspect the culprit was <code>let</code>.</p>



<a name="275105347"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/target%20of%20ring%20hom%20algebra%20over%20image/near/275105347" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/target.20of.20ring.20hom.20algebra.20over.20image.html#275105347">(Mar 12 2022 at 16:33)</a>:</h4>
<p>This should be true for division rings as well, right?</p>



<a name="275105415"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/target%20of%20ring%20hom%20algebra%20over%20image/near/275105415" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/target.20of.20ring.20hom.20algebra.20over.20image.html#275105415">(Mar 12 2022 at 16:34)</a>:</h4>
<p>The one thing you have to pay attention to diamond-wise is to never define <code>field (subtype p)</code>, because it would match yours.</p>



<a name="275107345"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/target%20of%20ring%20hom%20algebra%20over%20image/near/275107345" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/target.20of.20ring.20hom.20algebra.20over.20image.html#275107345">(Mar 12 2022 at 17:19)</a>:</h4>
<p>Yaël <a href="#narrow/stream/116395-maths/topic/target.20of.20ring.20hom.20algebra.20over.20image/near/275105307">said</a>:</p>
<blockquote>
<p>I suspect the culprit was <code>let</code>.</p>
</blockquote>
<p>What he means is "use <code>let</code> when defining data, but use <code>have</code> when defining proofs". So for example your <code>let l : lift ≠ 0 := sorry,</code> should be <code>have l :  lift ≠ 0 := sorry,</code>.</p>



<a name="275107738"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/target%20of%20ring%20hom%20algebra%20over%20image/near/275107738" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/target.20of.20ring.20hom.20algebra.20over.20image.html#275107738">(Mar 12 2022 at 17:28)</a>:</h4>
<blockquote>
<p>this almost works</p>
</blockquote>
<p>Your problem is that you haven't quite proved enough. You have <code>a</code> in the range and you know <code>↑a</code>, its image in <code>R</code>, is a unit, but that's not enough to deduce that <code>a</code> is a unit because you don't know the inverse is also in the range.</p>



<a name="275108038"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/target%20of%20ring%20hom%20algebra%20over%20image/near/275108038" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/target.20of.20ring.20hom.20algebra.20over.20image.html#275108038">(Mar 12 2022 at 17:36)</a>:</h4>
<p>I think a case split on the preimage of a in F is easier.</p>
<div class="spoiler-block"><div class="spoiler-header">
</div><div class="spoiler-content" aria-hidden="true">
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="o">:</span> <span class="n">field</span> <span class="n">f.range</span> <span class="o">:=</span>
<span class="n">field_of_is_unit_or_eq_zero</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">a</span><span class="o">,</span>
  <span class="kd">begin</span>
    <span class="n">rcases</span> <span class="n">a</span> <span class="k">with</span> <span class="o">⟨</span><span class="n">_</span><span class="o">,</span> <span class="n">b</span><span class="o">,</span> <span class="n">rfl</span><span class="o">⟩,</span>
    <span class="n">cases</span> <span class="n">em</span> <span class="o">(</span><span class="n">b</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">),</span>
    <span class="o">{</span> <span class="n">right</span><span class="o">,</span> <span class="n">ext</span><span class="o">,</span> <span class="n">simp</span> <span class="o">[</span><span class="n">h</span><span class="o">]</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">left</span><span class="o">,</span>
      <span class="n">exact</span> <span class="n">is_unit.map</span> <span class="n">f.range_restrict</span> <span class="o">(</span><span class="n">is_unit.mk0</span> <span class="n">_</span> <span class="n">h</span><span class="o">)</span> <span class="o">}</span>
  <span class="kd">end</span>
<span class="o">)</span>
</code></pre></div>
</div></div>



<a name="275463641"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/target%20of%20ring%20hom%20algebra%20over%20image/near/275463641" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashwin Iyengar <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/target.20of.20ring.20hom.20algebra.20over.20image.html#275463641">(Mar 16 2022 at 03:30)</a>:</h4>
<p>Ohh thank you, I didn't know about range_restrict</p>



<a name="275475773"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/target%20of%20ring%20hom%20algebra%20over%20image/near/275475773" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/target.20of.20ring.20hom.20algebra.20over.20image.html#275475773">(Mar 16 2022 at 07:45)</a>:</h4>
<p>Neither did I until I went looking for it because of your question :-)</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>