---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/class.20group.20of.20a.20number.20field.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/class.20group.20of.20a.20number.20field.html">class group of a number field</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="223559762"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/class%20group%20of%20a%20number%20field/near/223559762" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/class.20group.20of.20a.20number.20field.html#223559762">(Jan 21 2021 at 19:37)</a>:</h4>
<p>I've not been thinking about class groups of number fields for a while now, and a number theory PhD student at Imperial has just raised it as a potential Lean project. I think that finiteness of the class group of a number field is within scope, except that as far as I know we don't even have number fields. I know that <span class="user-mention" data-user-id="250372">@Ashvni Narayanan</span> and <span class="user-mention" data-user-id="238446">@Anne Baanen</span> and probably others have been thinking about these things. </p>
<p>1) Number fields. Am I right in thinking that we don't even have the definition yet? Johan and I talked about this once, and came up with the proposal that a number field should just be a field with a Q-algebra structure which is finite-dimensional as a Q-vector space -- all of these are typeclasses.</p>
<p>2) Global fields. The ad hoc definition is that a global field is either a number field or a finite extension of a function field in one variable over a finite field. There is a much much more complex definition which unifies these two cases, which <span class="user-mention" data-user-id="243562">@Adam Topaz</span> told me about, involving fields which have a bunch of valuations on them and satisfy a product formula, but I am not sure that it's worth using that as a <em>definition</em>, it feels more to me like it should be a theorem, and that perhaps it's just worth ignoring function fields for now.</p>
<p>3) Integers of a number field are a Dedekind domain. If we don't have number fields we don't have this, I guess.</p>
<p>4) Integers of a number field have a class group. This is where I begin to get hazy. We have fractional ideals in the generality of integral domains. Do we know that Dedekind domains have class groups yet? I glanced through mathlib but couldn't spot it. Is someone working on this?</p>
<p>5) Class group of a number field is finite. This is a reasonable goal, hopefully. This is mentioned as a "card" at <a href="https://github.com/leanprover-community/mathlib/projects/6">https://github.com/leanprover-community/mathlib/projects/6</a> . It's not true that the class group of a general Dedekind domain is finite (<span class="tex-error">$$\mathbbb{C}[X,Y]/(Y^2-X^3-1)$$</span> is a counterexample, it has class group the complex point of the elliptic curve defined by <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>Y</mi><mn>2</mn></msup><mo>=</mo><msup><mi>X</mi><mn>3</mn></msup><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">Y^2=X^3+1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>). </p>
<p>It would be nice to get back to this stuff. Finiteness of class group of a number field, and finite generation of the unit group, are two of the theorems we prove in our undergraduate algebraic number theory course, but they don't seem to be on Patrick's list, perhaps because they don't teach them in Orsay.</p>
<p>What is the status of these things?</p>



<a name="223560082"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/class%20group%20of%20a%20number%20field/near/223560082" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashvni Narayanan <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/class.20group.20of.20a.20number.20field.html#223560082">(Jan 21 2021 at 19:39)</a>:</h4>
<p>To my knowledge, 1, 3, 4 and 5 have been accomplished (or will be, in a few days).</p>



<a name="223560156"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/class%20group%20of%20a%20number%20field/near/223560156" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashvni Narayanan <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/class.20group.20of.20a.20number.20field.html#223560156">(Jan 21 2021 at 19:39)</a>:</h4>
<p>I have been thinking about 2, I think <span class="user-mention" data-user-id="238446">@Anne Baanen</span> and <span class="user-mention" data-user-id="300245">@Filippo A. E. Nuccio</span> might have more to say on that.</p>



<a name="223560269"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/class%20group%20of%20a%20number%20field/near/223560269" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/class.20group.20of.20a.20number.20field.html#223560269">(Jan 21 2021 at 19:40)</a>:</h4>
<p>Oh I'm glad I asked! I knew you'd been thinking about this stuff. I'm happy to forget about global fields for now.</p>



<a name="223560551"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/class%20group%20of%20a%20number%20field/near/223560551" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/class.20group.20of.20a.20number.20field.html#223560551">(Jan 21 2021 at 19:42)</a>:</h4>
<p>Wow! So even 5 is almost done? That's cool!</p>



<a name="223560861"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/class%20group%20of%20a%20number%20field/near/223560861" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashvni Narayanan <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/class.20group.20of.20a.20number.20field.html#223560861">(Jan 21 2021 at 19:44)</a>:</h4>
<p>Yes, I think the credit goes majorly to <span class="user-mention" data-user-id="238446">@Anne Baanen</span>  :)</p>



<a name="223563401"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/class%20group%20of%20a%20number%20field/near/223563401" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/class.20group.20of.20a.20number.20field.html#223563401">(Jan 21 2021 at 20:05)</a>:</h4>
<p>Is Dirichlet's unit theorem also in the works?</p>



<a name="223564944"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/class%20group%20of%20a%20number%20field/near/223564944" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/class.20group.20of.20a.20number.20field.html#223564944">(Jan 21 2021 at 20:19)</a>:</h4>
<p>Well, it is "in the works" and I have started thinking a little bit about that. But (as far as I know) nothing has been written and I am probably in the coming future going more in the Liquid Experiment direction, so I would say it is "open".</p>



<a name="223565221"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/class%20group%20of%20a%20number%20field/near/223565221" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/class.20group.20of.20a.20number.20field.html#223565221">(Jan 21 2021 at 20:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/116395-maths/topic/class.20group.20of.20a.20number.20field/near/223559762">said</a>:</p>
<blockquote>
<p>I've not been thinking about class groups of number fields for a while now, and a number theory PhD student at Imperial has just raised it as a potential Lean project. I think that finiteness of the class group of a number field is within scope, except that as far as I know we don't even have number fields. I know that <span class="user-mention silent" data-user-id="250372">Ashvni Narayanan</span> and <span class="user-mention silent" data-user-id="238446">Anne Baanen</span> and probably others have been thinking about these things. </p>
<p>1) Number fields. Am I right in thinking that we don't even have the definition yet? Johan and I talked about this once, and came up with the proposal that a number field should just be a field with a Q-algebra structure which is finite-dimensional as a Q-vector space -- all of these are typeclasses.</p>
<p>2) Global fields. The ad hoc definition is that a global field is either a number field or a finite extension of a function field in one variable over a finite field. There is a much much more complex definition which unifies these two cases, which <span class="user-mention silent" data-user-id="243562">Adam Topaz</span> told me about, involving fields which have a bunch of valuations on them and satisfy a product formula, but I am not sure that it's worth using that as a <em>definition</em>, it feels more to me like it should be a theorem, and that perhaps it's just worth ignoring function fields for now.</p>
<p>3) Integers of a number field are a Dedekind domain. If we don't have number fields we don't have this, I guess.</p>
<p>4) Integers of a number field have a class group. This is where I begin to get hazy. We have fractional ideals in the generality of integral domains. Do we know that Dedekind domains have class groups yet? I glanced through mathlib but couldn't spot it. Is someone working on this?</p>
<p>5) Class group of a number field is finite. This is a reasonable goal, hopefully. This is mentioned as a "card" at <a href="https://github.com/leanprover-community/mathlib/projects/6">https://github.com/leanprover-community/mathlib/projects/6</a> . It's not true that the class group of a general Dedekind domain is finite (<span class="tex-error">$$\mathbbb{C}[X,Y]/(Y^2-X^3-1)$$</span> is a counterexample, it has class group the complex point of the elliptic curve defined by <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>Y</mi><mn>2</mn></msup><mo>=</mo><msup><mi>X</mi><mn>3</mn></msup><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">Y^2=X^3+1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>). </p>
<p>It would be nice to get back to this stuff. Finiteness of class group of a number field, and finite generation of the unit group, are two of the theorems we prove in our undergraduate algebraic number theory course, but they don't seem to be on Patrick's list, perhaps because they don't teach them in Orsay.</p>
<p>What is the status of these things?</p>
</blockquote>
<p>Concerning 2), we had a discussion in the Dedekind Domain Project about a "good"  definition, but we haven't got that far.</p>



<a name="223565652"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/class%20group%20of%20a%20number%20field/near/223565652" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/class.20group.20of.20a.20number.20field.html#223565652">(Jan 21 2021 at 20:25)</a>:</h4>
<p>For 2, I don't remember what definition I mentioned to Kevin, but one possible definition of a global field is a finitely-generated field of Kronecker dimension 1 (and Kronecker dimension can be computed in terms of ranks of valuations).</p>



<a name="223568635"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/class%20group%20of%20a%20number%20field/near/223568635" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/class.20group.20of.20a.20number.20field.html#223568635">(Jan 21 2021 at 20:51)</a>:</h4>
<p>Adam you pointed out this old paper of Artin and Whaples to me.</p>



<a name="223568729"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/class%20group%20of%20a%20number%20field/near/223568729" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/class.20group.20of.20a.20number.20field.html#223568729">(Jan 21 2021 at 20:52)</a>:</h4>
<p>Oh right!</p>



<a name="223569168"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/class%20group%20of%20a%20number%20field/near/223569168" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/class.20group.20of.20a.20number.20field.html#223569168">(Jan 21 2021 at 20:56)</a>:</h4>
<p>Actually, I think it was <span class="user-mention" data-user-id="127136">@Alex J. Best</span> that pointed that out.</p>



<a name="223614450"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/class%20group%20of%20a%20number%20field/near/223614450" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/class.20group.20of.20a.20number.20field.html#223614450">(Jan 22 2021 at 08:31)</a>:</h4>
<p>Oh oops :-) Sorry Alex! It seems to me that in practice it's rather common that arguments split into the number field and function field case. All my stuff with Gee on algebraic reps really needed the Archimedean places, for example</p>



<a name="223619250"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/class%20group%20of%20a%20number%20field/near/223619250" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/class.20group.20of.20a.20number.20field.html#223619250">(Jan 22 2021 at 09:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/116395-maths/topic/class.20group.20of.20a.20number.20field/near/223560551">said</a>:</p>
<blockquote>
<p>Wow! So even 5 is almost done? That's cool!</p>
</blockquote>
<p>Here's the relevant declaration in our development branch: <a href="https://github.com/leanprover-community/mathlib/blob/dedekind-domain-dev/src/algebraic_number_theory/number_field.lean#L84">https://github.com/leanprover-community/mathlib/blob/dedekind-domain-dev/src/algebraic_number_theory/number_field.lean#L84</a></p>



<a name="223646777"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/class%20group%20of%20a%20number%20field/near/223646777" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sander Dahmen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/class.20group.20of.20a.20number.20field.html#223646777">(Jan 22 2021 at 14:21)</a>:</h4>
<p>In fact, it has been set up so that finiteness of the class group for function fields in the easy case, i.e. finite separable extensions of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">F(t)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span></span></span></span> with <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span></span></span></span> a finite field, should also readily follow.</p>



<a name="223648545"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/class%20group%20of%20a%20number%20field/near/223648545" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/class.20group.20of.20a.20number.20field.html#223648545">(Jan 22 2021 at 14:35)</a>:</h4>
<p>Is it something like "if all residue fields of a Dedekind domain are finite, then the class group is finite"? Or is there more to it than this?</p>



<a name="223648857"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/class%20group%20of%20a%20number%20field/near/223648857" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sander Dahmen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/class.20group.20of.20a.20number.20field.html#223648857">(Jan 22 2021 at 14:38)</a>:</h4>
<p>This is not sufficient! There are some crazy counter examples with all residue fields finite and infinite class group I believe (but I would have to look them up)..</p>



<a name="223648923"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/class%20group%20of%20a%20number%20field/near/223648923" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/class.20group.20of.20a.20number.20field.html#223648923">(Jan 22 2021 at 14:39)</a>:</h4>
<p>Oh interesting! I do not know this stuff at all, I am a number fields guy.</p>



<a name="223649087"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/class%20group%20of%20a%20number%20field/near/223649087" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sander Dahmen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/class.20group.20of.20a.20number.20field.html#223649087">(Jan 22 2021 at 14:40)</a>:</h4>
<p>Actually me too. But I guess we want to have (somewhat) general stuff in Mathlib..</p>



<a name="223649255"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/class%20group%20of%20a%20number%20field/near/223649255" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sander Dahmen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/class.20group.20of.20a.20number.20field.html#223649255">(Jan 22 2021 at 14:42)</a>:</h4>
<p>At the end of the day it's some box principle argument that you have to so separately for <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">Z</mi></mrow><annotation encoding="application/x-tex">\mathbb{Z}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord"><span class="mord mathbb">Z</span></span></span></span></span> and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo stretchy="false">[</mo><mi>t</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">F[t]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">[</span><span class="mord mathnormal">t</span><span class="mclose">]</span></span></span></span> to get some "generalised division with remainder" and then everything works uniformly after that.</p>



<a name="223649395"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/class%20group%20of%20a%20number%20field/near/223649395" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sander Dahmen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/class.20group.20of.20a.20number.20field.html#223649395">(Jan 22 2021 at 14:43)</a>:</h4>
<p>Except that you still have to do completely inseparable extensions to consider all global fields. If one would actually care about them ;-)</p>



<a name="223649640"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/class%20group%20of%20a%20number%20field/near/223649640" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/class.20group.20of.20a.20number.20field.html#223649640">(Jan 22 2021 at 14:44)</a>:</h4>
<p>Finite residue fields + product formula is enough, I think.</p>



<a name="223649908"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/class%20group%20of%20a%20number%20field/near/223649908" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sander Dahmen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/class.20group.20of.20a.20number.20field.html#223649908">(Jan 22 2021 at 14:46)</a>:</h4>
<p>Could be, do you have a reference? (Does this perhaps translate back from class field theory?)</p>



<a name="223650081"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/class%20group%20of%20a%20number%20field/near/223650081" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/class.20group.20of.20a.20number.20field.html#223650081">(Jan 22 2021 at 14:47)</a>:</h4>
<p>This is essentially Artin Whaples (I think... I should check the details there)</p>



<a name="225908993"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/class%20group%20of%20a%20number%20field/near/225908993" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/class.20group.20of.20a.20number.20field.html#225908993">(Feb 10 2021 at 21:14)</a>:</h4>
<p><span class="user-mention" data-user-id="238446">@Anne Baanen</span> <span class="user-mention" data-user-id="250372">@Ashvni Narayanan</span> <span class="user-mention" data-user-id="300245">@Filippo A. E. Nuccio</span> <span class="user-mention" data-user-id="133635">@Sander Dahmen</span> I just finished reading your paper. Really cool project! I didn't realize you covered so much ground! And it's very well-written. This is cool!</p>



<a name="225913495"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/class%20group%20of%20a%20number%20field/near/225913495" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashvni Narayanan <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/class.20group.20of.20a.20number.20field.html#225913495">(Feb 10 2021 at 21:46)</a>:</h4>
<p>Thank you! :)</p>



<a name="225959960"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/class%20group%20of%20a%20number%20field/near/225959960" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/class.20group.20of.20a.20number.20field.html#225959960">(Feb 11 2021 at 08:25)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="112680">@Johan Commelin</span> for your nice words.</p>



<a name="225964899"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/class%20group%20of%20a%20number%20field/near/225964899" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sander Dahmen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/class.20group.20of.20a.20number.20field.html#225964899">(Feb 11 2021 at 09:17)</a>:</h4>
<p>Thanks!</p>



<a name="225974917"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/class%20group%20of%20a%20number%20field/near/225974917" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/class.20group.20of.20a.20number.20field.html#225974917">(Feb 11 2021 at 11:02)</a>:</h4>
<p>Thank you <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p>



<a name="226270880"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/class%20group%20of%20a%20number%20field/near/226270880" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/class.20group.20of.20a.20number.20field.html#226270880">(Feb 13 2021 at 22:04)</a>:</h4>
<p>I had some discussions with Ambrus Pal today about this claim in the paper that the result is not complete because it only deals with separable extensions of k(T), k finite. Ambrus says that every smooth irreducible projective curve is a separable cover of P^1, which means that every global function field over a finite field is a separable extension of k(T), meaning that your proof is already complete. He didn't give a precise reference though.</p>



<a name="226274335"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/class%20group%20of%20a%20number%20field/near/226274335" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/class.20group.20of.20a.20number.20field.html#226274335">(Feb 13 2021 at 23:14)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> this is a general fact about perfect fields. </p>
<p>Wikipedia gives a reference from Matsumura: <a href="https://en.m.wikipedia.org/wiki/Perfect_field">https://en.m.wikipedia.org/wiki/Perfect_field</a><br>
(See the section on separating transcendence bases)</p>



<a name="226275182"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/class%20group%20of%20a%20number%20field/near/226275182" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/class.20group.20of.20a.20number.20field.html#226275182">(Feb 13 2021 at 23:34)</a>:</h4>
<p>Just to be clear, Ambrus did mention the assumption that k was perfect in his email. Yes Matsumura 26.2 does it -- k^{1/p}=k in this finite field setting, and the definition of separably generated is just above theorem 26.1:</p>
<p><a href="/user_uploads/3121/fgYQ4q9OEK0zFiC3hxpRDKvw/matsumura.png">matsumura.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/3121/fgYQ4q9OEK0zFiC3hxpRDKvw/matsumura.png" title="matsumura.png"><img src="/user_uploads/3121/fgYQ4q9OEK0zFiC3hxpRDKvw/matsumura.png"></a></div><p>Just to be clear, what I am saying is that 8.2 "Future directions" the first point -- you've done it already, because every global field is of the form you've dealt with.</p>



<a name="226286634"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/class%20group%20of%20a%20number%20field/near/226286634" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/class.20group.20of.20a.20number.20field.html#226286634">(Feb 14 2021 at 05:15)</a>:</h4>
<p>I also think that the statement about smooth irreducible projective curves admitting a separable morphism to P^1 is true.  It uses the <em>smoothness</em> assumption on the curve.  Here is a sketch.</p>
<p>Embed your smooth curve <code>C</code> in projective space via a "sufficiently ample" linear system (any embedding is ok if the field is infinite, which is the only interesting case, as finite fields are perfect anyway).</p>
<p>First, show that there are hyperplanes that intersect the curve <code>C</code> transversely.  Indeed, such hyperplanes exist over the algebraic closure of the ground field, since our curve is smooth and hence geometrically reduced.  Moreover, the set of such hyperplanes is a dense open subset of the set of all hyperplanes.  If our field is infinite, then there are hyperplanes in the intersection.  Otherwise, we use a form of Bertini's theorem, exploiting the "ampleness" of the embedding.</p>
<p>Next, use the linear system formed by one hyperplane <code>H</code> transverse to <code>C</code> and any other hyperplane <code>H' ≠ p</code>.  This linear system extends to a morphism to <code>ℙ^1</code> that is separable, since the fiber corresponding to <code>H</code> is geometrically reduced.</p>
<p>The challenge is to formalize a proof of this!  <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span></p>
<p>Here is also an example of what fails otherwise.</p>
<p>Let <code>k</code> be an imperfect field of characteristic <code>p</code> and let <code>k ⊂ k' be a non-separable, purely inseparable extension (i.e. I am excluding the trivial purely inseparable extension!).  Let </code>ℙ<code> be </code>ℙ^1<code> over </code>k'<code>, viewed as a scheme over </code>k<code>.  Thus, </code>ℙ<code> is a projective curve over </code>k<code> that is not geometrically reduced.  Let </code>k ⊂ K<code> be any subfield of the function field </code>k' (x)<code> of </code>ℙ<code>, and let </code>ℙ → C_K<code> be the corresponding morphism of curves.   If the morphism </code>ℙ → C_K<code> is separable, then </code>K<code> contains </code>k'<code> and hence </code>C_k<code> is also not geometrically reduced over </code>k`.</p>
<p>Some details are missing, but I am not feeding these results to Lean!</p>



<a name="226286733"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/class%20group%20of%20a%20number%20field/near/226286733" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/class.20group.20of.20a.20number.20field.html#226286733">(Feb 14 2021 at 05:18)</a>:</h4>
<p>Oh, I see now that the reference that Kevin gave essentially states a more general version of the statement that I sketched.  I leave it here, since I would really like to be able to give such geometric arguments in Lean, doing geometric reductions, before performing simple algebraic computations.</p>
<p>This will take a probably long time, though...</p>



<a name="226293026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/class%20group%20of%20a%20number%20field/near/226293026" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/class.20group.20of.20a.20number.20field.html#226293026">(Feb 14 2021 at 08:29)</a>:</h4>
<p>I don't see why it needs to take a long time, we just need people to work on it</p>



<a name="227926892"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/class%20group%20of%20a%20number%20field/near/227926892" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/class.20group.20of.20a.20number.20field.html#227926892">(Feb 26 2021 at 13:26)</a>:</h4>
<p>Oh here's something else which I knew was true for number fields and only had a vague idea about whether it was true in general: sum of e_i f_i = n. I found this paper <a href="https://arxiv.org/abs/2102.10481">https://arxiv.org/abs/2102.10481</a> (from a few days ago on ArXiv) quite enlightening!</p>



<a name="227927762"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/class%20group%20of%20a%20number%20field/near/227927762" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/class.20group.20of.20a.20number.20field.html#227927762">(Feb 26 2021 at 13:33)</a>:</h4>
<p>This is something that's true in general for discrete valuations. general valuations can have "defect" which contradict this.</p>



<a name="227927868"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/class%20group%20of%20a%20number%20field/near/227927868" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/class.20group.20of.20a.20number.20field.html#227927868">(Feb 26 2021 at 13:34)</a>:</h4>
<p>I'm sure the book "valued fields" has a textbook account of this</p>



<a name="227927963"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/class%20group%20of%20a%20number%20field/near/227927963" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/class.20group.20of.20a.20number.20field.html#227927963">(Feb 26 2021 at 13:35)</a>:</h4>
<p>Doesn't Theorem 2 say that this is only true in the Japanese/excellent case?</p>



<a name="227928009"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/class%20group%20of%20a%20number%20field/near/227928009" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/class.20group.20of.20a.20number.20field.html#227928009">(Feb 26 2021 at 13:35)</a>:</h4>
<p>I can't seem to open this on my phone right now...</p>



<a name="227928035"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/class%20group%20of%20a%20number%20field/near/227928035" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/class.20group.20of.20a.20number.20field.html#227928035">(Feb 26 2021 at 13:36)</a>:</h4>
<p>I'll have to check a little later</p>



<a name="227930416"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/class%20group%20of%20a%20number%20field/near/227930416" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/class.20group.20of.20a.20number.20field.html#227930416">(Feb 26 2021 at 13:55)</a>:</h4>
<p>Ok, that's right. It only works for discrete valuations assuming the extension of fields is separable. See <a href="https://link.springer.com/book/10.1007/3-540-30035-X">https://link.springer.com/book/10.1007/3-540-30035-X</a> section 3.3</p>



<a name="228217680"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/class%20group%20of%20a%20number%20field/near/228217680" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sander Dahmen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/class.20group.20of.20a.20number.20field.html#228217680">(Mar 01 2021 at 11:57)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> <span class="user-mention" data-user-id="243562">@Adam Topaz</span> Still thanks for pointing out Theorem 26.2 in Matsumura etc.!<br>
I guess we should change the first "do to" in our paper to formalizing that a finitely generated field extension over a perfect field <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> is separably generated over <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>, (and/)or its corollary to global function fields.<br>
(Or we could "cheat" and make the separability part of the function field def., which would be convenient for some purposes, but otherwise quite clumsy to drag around I guess.)</p>



<a name="228229421"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/class%20group%20of%20a%20number%20field/near/228229421" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/class.20group.20of.20a.20number.20field.html#228229421">(Mar 01 2021 at 13:30)</a>:</h4>
<p>My instinct would be just to say that you've proved it for all global fields (because it's a theorem that you have). This was the same with perfectoid spaces -- along the way we had to put a topology on a perfectoid space and there are two definitions of the topology (generated by X or generated by Y), and a theorem with a very long proof that they're the same, which we didn't formalise. Let's say we put topology X on a perfectoid space. Then what about the papers which claim that the definition is the topology generated by Y? Like you, we chose the definition which made our lives easier. </p>
<p>Definitions are slippery things. If we define an elliptic curve over a field to be a smooth proper geometrically connected variety of dimension 1 with a commutative group structure (which is a definition you'll see in the fancier books) then it will be a lot easier to prove weak Mordell-Weil because we won't have to prove anything about a group law on those pesky plane cubics! Why not just remark that there are several definitions of a global field and they're all known to be mathematically equivalent but you haven't formalised the equivalences, but the issue is only in the char p setting so won't affect your future work?</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>