---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/module.2Erestrict_scalars.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/module.2Erestrict_scalars.html">module.restrict_scalars</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="207076901"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/module.restrict_scalars/near/207076901" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/module.2Erestrict_scalars.html#207076901">(Aug 16 2020 at 15:56)</a>:</h4>
<p>Now that <code>is_scalar_tower</code> is there could it be a good idea to remove <code>module.restrict_scalars</code> from mathlib by substituting it with <code>is_scalar_tower</code>? In abstract lemmas it should be no problem to require two additional instances (one of <code>semimodule</code> and one of <code>is_scalar_tower</code>) and in practical cases, it should be always possible to define such instances: I mean manually defining restrict_scalars and proving there is an instance of <code>is_scalar_tower</code></p>



<a name="207077253"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/module.restrict_scalars/near/207077253" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/module.2Erestrict_scalars.html#207077253">(Aug 16 2020 at 16:08)</a>:</h4>
<p>That sounds like a good idea! I can't think of any disadvantages really: adding one pair of <code>semimodule</code> and <code>is_scalar_tower</code> instances per definition seems less painful than writing out <code>restrict_scalars R A M</code> potentially many times.</p>



<a name="207077304"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/module.restrict_scalars/near/207077304" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/module.2Erestrict_scalars.html#207077304">(Aug 16 2020 at 16:08)</a>:</h4>
<p>Yes I completely agree! I believe <code>restrict_scalars</code> is very painful</p>



<a name="207077320"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/module.restrict_scalars/near/207077320" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/module.2Erestrict_scalars.html#207077320">(Aug 16 2020 at 16:09)</a>:</h4>
<p>In any case I uploaded a compromise of the two things in the derivations PR, and I'd do it as a refactor in another PR in case</p>



<a name="207077877"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/module.restrict_scalars/near/207077877" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/module.2Erestrict_scalars.html#207077877">(Aug 16 2020 at 16:25)</a>:</h4>
<p>Wouldn't the construction of the restriction of scalars <em>functor</em> be more annoying without <code>restrict_scalars</code>?</p>



<a name="207078050"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/module.restrict_scalars/near/207078050" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/module.2Erestrict_scalars.html#207078050">(Aug 16 2020 at 16:30)</a>:</h4>
<p>In this case we could probably leave just the definition of it and the bare minimum needed for the functor</p>



<a name="207078578"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/module.restrict_scalars/near/207078578" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/module.2Erestrict_scalars.html#207078578">(Aug 16 2020 at 16:42)</a>:</h4>
<p>I don't have any actual opinions on this, but, playing devil's advocate, it might be worthwhile to have some consistency in the API for left/right adjoins in algebra. So while in this case the restriction of scalars functor is just the identity on the underlying type, this will not be the case in all situations. On the other hand, maybe it makes sense to make/use analogues of <code>is_scalar_tower</code> for <em>all</em> forgetful functors.</p>



<a name="207186426"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/module.restrict_scalars/near/207186426" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/module.2Erestrict_scalars.html#207186426">(Aug 17 2020 at 19:24)</a>:</h4>
<p>No! <code>module.restrict_scalars</code> is how you make the instance <code>module R M</code> given <code>algebra R S</code> and <code>module S M</code>, and <code>is_scalar_tower R S M</code> is how you prove theorems.</p>



<a name="207186470"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/module.restrict_scalars/near/207186470" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/module.2Erestrict_scalars.html#207186470">(Aug 17 2020 at 19:25)</a>:</h4>
<p>cf. the same situation with <code>algebra.comap</code> and <code>is_algebra_tower</code> (now <code>is_scalar_tower</code>)</p>



<a name="207200803"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/module.restrict_scalars/near/207200803" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/module.2Erestrict_scalars.html#207200803">(Aug 17 2020 at 21:47)</a>:</h4>
<p>Sorry can you elaborate further? I am not sure I understand what you support. The point I was trying to make above is that until now, <code>is_scalar_tower</code> was not there and <code>restrict_scalars</code> was used for everything so also "to prove theorems" as you say. The idea is to leave just the definition of restrict scalars so to use it to help making instances but removing any lemma that has to do with it and using <code>is_scalar_tower</code> instead</p>



<a name="207200917"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/module.restrict_scalars/near/207200917" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/module.2Erestrict_scalars.html#207200917">(Aug 17 2020 at 21:48)</a>:</h4>
<p>I mean similar to what I did in the first draft of derivations here in Zulip</p>



<a name="207220661"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/module.restrict_scalars/near/207220661" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/module.2Erestrict_scalars.html#207220661">(Aug 18 2020 at 03:40)</a>:</h4>
<p>I think you both agree with each other (-;</p>



<a name="207237077"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/module.restrict_scalars/near/207237077" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/module.2Erestrict_scalars.html#207237077">(Aug 18 2020 at 08:53)</a>:</h4>
<p>Yes this what I also thought but I was confused from the "No!"</p>



<a name="207238073"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/module.restrict_scalars/near/207238073" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/module.2Erestrict_scalars.html#207238073">(Aug 18 2020 at 09:06)</a>:</h4>
<p>I was saying "No!" to "remove <code>module.restrict_scalars</code> from mathlib"</p>



<a name="207238082"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/module.restrict_scalars/near/207238082" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/module.2Erestrict_scalars.html#207238082">(Aug 18 2020 at 09:06)</a>:</h4>
<p>I guess I was taking it out of context</p>



<a name="207238552"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/module.restrict_scalars/near/207238552" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/module.2Erestrict_scalars.html#207238552">(Aug 18 2020 at 09:13)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/semimodule.restrict_scalars">docs#semimodule.restrict_scalars</a> because I'm lazy and someone else might be too</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>