---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/lists.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lists.html">lists</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="251692767"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lists/near/251692767" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lists.html#251692767">(Sep 02 2021 at 10:08)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span>, I'm about to write docstrings for <code>lists</code>. How should I understand the choice to make <code>lists' α</code> contain a copy of <code>α</code> (using <code>atom</code>)? Also, is the <code>bool</code> in there really meaning "this is a proper list, not an atom"?</p>



<a name="251692885"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lists/near/251692885" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lists.html#251692885">(Sep 02 2021 at 10:09)</a>:</h4>
<p>You should think of <code>lists A</code> as a kind of naive set theory, like you find in early discussions about <code>\in</code> and <code>\subseteq</code>. It is basically finite ZFA</p>



<a name="251692970"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lists/near/251692970" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lists.html#251692970">(Sep 02 2021 at 10:10)</a>:</h4>
<p>it's computable, so that you can evaluate stuff like <code>{2, 3} \in {2, {2, 3}, 5}</code></p>



<a name="251693042"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lists/near/251693042" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lists.html#251693042">(Sep 02 2021 at 10:11)</a>:</h4>
<p>Indeed the bool in the underlying implementation is there to distinguish proper lists from list-or-atom</p>



<a name="251693074"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lists/near/251693074" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lists.html#251693074">(Sep 02 2021 at 10:11)</a>:</h4>
<p>It would have been a mutual inductive but the support for that in lean 3 isn't so great</p>



<a name="251693284"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lists/near/251693284" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lists.html#251693284">(Sep 02 2021 at 10:13)</a>:</h4>
<p>It was originally intended to be used for formalizing elementary set theory problems, back when <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> was looking at formalizing his problem sheets and got stuck on questions about set theory</p>



<a name="251693376"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lists/near/251693376" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lists.html#251693376">(Sep 02 2021 at 10:14)</a>:</h4>
<p>But terms of <code>lists A</code> are ordered, right?</p>



<a name="251693443"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lists/near/251693443" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lists.html#251693443">(Sep 02 2021 at 10:15)</a>:</h4>
<p>I never got around to the quotient part, <code>lists</code> is just the substrate</p>



<a name="251693460"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lists/near/251693460" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lists.html#251693460">(Sep 02 2021 at 10:15)</a>:</h4>
<p>Ah okay, that makes more sense!</p>



<a name="251693473"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lists/near/251693473" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lists.html#251693473">(Sep 02 2021 at 10:15)</a>:</h4>
<p>you can take a quotient in much the same way as <code>pSet</code> / <code>Set</code></p>



<a name="251693521"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lists/near/251693521" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lists.html#251693521">(Sep 02 2021 at 10:16)</a>:</h4>
<p>Yeah that's what I was expecting to see.</p>



<a name="251693581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lists/near/251693581" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lists.html#251693581">(Sep 02 2021 at 10:17)</a>:</h4>
<p>And how should I explain the difference between <code>lists'</code> and <code>lists</code>?</p>



<a name="251693599"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lists/near/251693599" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lists.html#251693599">(Sep 02 2021 at 10:17)</a>:</h4>
<p>it would be nice to finish it at some point but the demand wasn't so high and it wasn't a high priority</p>



<a name="251693616"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lists/near/251693616" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lists.html#251693616">(Sep 02 2021 at 10:17)</a>:</h4>
<p>I think <code>lists'</code> is an implementation detail</p>



<a name="251693729"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lists/near/251693729" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lists.html#251693729">(Sep 02 2021 at 10:19)</a>:</h4>
<p>And why using the plural? You used a cap for <code>pSet</code> and <code>Set</code>.</p>



<a name="251693741"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lists/near/251693741" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lists.html#251693741">(Sep 02 2021 at 10:19)</a>:</h4>
<p>The reason for the distinction is that we don't want <code>cons 1 2</code> to be well formed</p>



<a name="251693756"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lists/near/251693756" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lists.html#251693756">(Sep 02 2021 at 10:19)</a>:</h4>
<p>Aaah yeah</p>



<a name="251693764"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lists/near/251693764" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lists.html#251693764">(Sep 02 2021 at 10:19)</a>:</h4>
<p>Actually, isn't <code>Set</code> the usual notation for the category of sets?</p>



<a name="251693858"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lists/near/251693858" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lists.html#251693858">(Sep 02 2021 at 10:20)</a>:</h4>
<p>Would it make more sense if they were called <code>zfc_set</code>, <code>zfc_pset</code>, <code>zfa_list</code>, <code>zfa_list'</code>?</p>



<a name="251693929"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lists/near/251693929" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lists.html#251693929">(Sep 02 2021 at 10:21)</a>:</h4>
<p>I don't see a contradiction in the naming, the caps are since it is a higher order object containing all the sets at once, much like the category</p>



<a name="251693941"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lists/near/251693941" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lists.html#251693941">(Sep 02 2021 at 10:21)</a>:</h4>
<p>in fact I imagine you could also make it the category literally</p>



<a name="251694040"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lists/near/251694040" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lists.html#251694040">(Sep 02 2021 at 10:22)</a>:</h4>
<p>Well it will nameclash when people will want to define the category. But yeah stuff can be decided then.</p>



<a name="251694041"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lists/near/251694041" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lists.html#251694041">(Sep 02 2021 at 10:22)</a>:</h4>
<p>but keep in mind that these were all written a very long time ago (category theory was not in mathlib at all)</p>



<a name="251694076"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lists/near/251694076" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lists.html#251694076">(Sep 02 2021 at 10:23)</a>:</h4>
<p>Still I don't get <code>lists</code>. It's not the type of several <code>list</code>s</p>



<a name="251694089"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lists/near/251694089" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lists.html#251694089">(Sep 02 2021 at 10:23)</a>:</h4>
<p>most category stuff is in the <code>category_theory</code> namespace</p>



<a name="251694116"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lists/near/251694116" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lists.html#251694116">(Sep 02 2021 at 10:23)</a>:</h4>
<p>Ah okay, then I retract</p>



<a name="251694121"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lists/near/251694121" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lists.html#251694121">(Sep 02 2021 at 10:23)</a>:</h4>
<p>It's still a type constructor, like <code>list</code>, since it's parameterized over a base type of atoms</p>



<a name="251694177"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lists/near/251694177" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lists.html#251694177">(Sep 02 2021 at 10:24)</a>:</h4>
<p>it's the type of list-of-list-of-list... of A</p>



<a name="251694219"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lists/near/251694219" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lists.html#251694219">(Sep 02 2021 at 10:24)</a>:</h4>
<p>So the plural refers to the fact that elements of a list are themselves lists?</p>



<a name="251694228"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lists/near/251694228" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lists.html#251694228">(Sep 02 2021 at 10:24)</a>:</h4>
<p>except not really since it also allows mixed level objects like [1, [2, 3]]</p>



<a name="251694240"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lists/near/251694240" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lists.html#251694240">(Sep 02 2021 at 10:24)</a>:</h4>
<p>yeah</p>



<a name="251694271"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lists/near/251694271" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lists.html#251694271">(Sep 02 2021 at 10:25)</a>:</h4>
<p>it's lists all the way down :)</p>



<a name="251694282"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lists/near/251694282" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lists.html#251694282">(Sep 02 2021 at 10:25)</a>:</h4>
<p>Aaaah <span aria-label="scream" class="emoji emoji-1f631" role="img" title="scream">:scream:</span></p>



<a name="251701853"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lists/near/251701853" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lists.html#251701853">(Sep 02 2021 at 11:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/116395-maths/topic/lists/near/251693284">said</a>:</p>
<blockquote>
<p>It was originally intended to be used for formalizing elementary set theory problems, back when <span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> was looking at formalizing his problem sheets and got stuck on questions about set theory</p>
</blockquote>
<p>At that time I was making the canonical error of saying "it says it like this in the book, therefore I need to make an exact copy of this somehow in Lean" (I didn't know anything about type theory at the time).</p>



<a name="251708240"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lists/near/251708240" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lists.html#251708240">(Sep 02 2021 at 12:42)</a>:</h4>
<p>Dumb question, what is the A in ZFA standing for?</p>



<a name="251708313"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lists/near/251708313" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lists.html#251708313">(Sep 02 2021 at 12:43)</a>:</h4>
<p>Maybe "atoms"? Is this some theory with urelements?</p>



<a name="251708517"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lists/near/251708517" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lists.html#251708517">(Sep 02 2021 at 12:44)</a>:</h4>
<p>Hmm, yeah, maybe. The central object is</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">inductive</span> <span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="n">lists'</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">:</span> <span class="n">bool</span> <span class="bp">→</span> <span class="kt">Type</span> <span class="n">u</span>
<span class="bp">|</span> <span class="n">atom</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">lists'</span> <span class="n">ff</span>
<span class="bp">|</span> <span class="n">nil</span> <span class="o">:</span> <span class="n">lists'</span> <span class="n">tt</span>
<span class="bp">|</span> <span class="n">cons'</span> <span class="o">{</span><span class="n">b</span><span class="o">}</span> <span class="o">:</span> <span class="n">lists'</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">lists'</span> <span class="n">tt</span> <span class="bp">→</span> <span class="n">lists'</span> <span class="n">tt</span>
</code></pre></div>



<a name="251711185"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lists/near/251711185" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lists.html#251711185">(Sep 02 2021 at 13:05)</a>:</h4>
<p>yes, this is ZF with "atoms" that are not sets. It is the perfect setting for talking about simple sets of natural numbers like <code>{1, {2, 3}, 4}</code></p>



<a name="251711697"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lists/near/251711697" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lists.html#251711697">(Sep 02 2021 at 13:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/116395-maths/topic/lists/near/251701853">said</a>:</p>
<blockquote>
<p>At that time I was making the canonical error of saying "it says it like this in the book, therefore I need to make an exact copy of this somehow in Lean" (I didn't know anything about type theory at the time).</p>
</blockquote>
<p>I think this is only half of an error. You shouldn't exactly replicate the book, but you also shouldn't be too eager to simply drop an area or a kind of question just because it's not easy to formalize. That's the mentality that leads to formal mathematics only ever exploring stuff like finite combinatorics, lists, and natural numbers</p>



<a name="251726021"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lists/near/251726021" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lists.html#251726021">(Sep 02 2021 at 14:39)</a>:</h4>
<p>I now reached an alternate state of mind. All docstrings in this file now look like "does something to a <strong>list</strong> to make it a <strong>list</strong>" and now my brain can't access the meaning of "list" anymore <span aria-label="dizzy" class="emoji emoji-1f635" role="img" title="dizzy">:dizzy:</span></p>



<a name="251726119"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lists/near/251726119" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lists.html#251726119">(Sep 02 2021 at 14:40)</a>:</h4>
<p>All I see is a chain of four characters sounding funny together. <em>list, list, list, lissst</em></p>



<a name="251729583"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lists/near/251729583" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lists.html#251729583">(Sep 02 2021 at 15:01)</a>:</h4>
<p>I can't let the opportunity to mention "semantic satiation" go by!</p>



<a name="251729715"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lists/near/251729715" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lists.html#251729715">(Sep 02 2021 at 15:02)</a>:</h4>
<p>Eheheh <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span></p>



<a name="251729847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lists/near/251729847" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lists.html#251729847">(Sep 02 2021 at 15:02)</a>:</h4>
<p>Here's <a href="https://github.com/leanprover-community/mathlib/issues/8967">#8967</a> for the vertigo-enjoyers.</p>



<a name="251745396"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lists/near/251745396" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lists.html#251745396">(Sep 02 2021 at 16:41)</a>:</h4>
<p>If I understand it correctly, <code>lists'</code> and <code>lists</code> together are "compiling" the following (invalid) recursive definition as an inductive type:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">lists</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">:=</span> <span class="n">α</span> <span class="bp">⊕</span> <span class="n">list</span> <span class="o">(</span><span class="n">lists</span> <span class="n">α</span><span class="o">)</span>
</code></pre></div>
<p>The <code>bool</code> index in <code>lists'</code> is encoding which side of the sum something is. If this is correct, maybe mentioning it might help motivate things in the documentation.</p>
<p>In that case, it seems the goal for ZFA sets is to compile the following recursive definition:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">finsets</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">:=</span> <span class="n">α</span> <span class="bp">⊕</span> <span class="n">finset</span> <span class="o">(</span><span class="n">finsets</span> <span class="n">α</span><span class="o">)</span>
</code></pre></div>



<a name="251746415"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lists/near/251746415" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lists.html#251746415">(Sep 02 2021 at 16:47)</a>:</h4>
<p>Yes, you're absolutely right.</p>



<a name="251746430"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lists/near/251746430" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lists.html#251746430">(Sep 02 2021 at 16:47)</a>:</h4>
<p>Hmm, this seems to execute very slowly:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">inductive</span> <span class="n">lists</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span>
<span class="bp">|</span> <span class="n">atom</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">lists</span>
<span class="bp">|</span> <span class="n">list</span> <span class="o">:</span> <span class="n">list</span> <span class="n">lists</span> <span class="bp">→</span> <span class="n">lists</span>
</code></pre></div>



<a name="251746604"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lists/near/251746604" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lists.html#251746604">(Sep 02 2021 at 16:48)</a>:</h4>
<p>Universe issue?</p>



<a name="251748752"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lists/near/251748752" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lists.html#251748752">(Sep 02 2021 at 17:01)</a>:</h4>
<p>Don't think so.  It seems like nested inductive types might just be slow for Lean to work out -- it generates a whole lot of auxiliary definitions, and it seems to be coming up with something along the lines of Mario's <code>lists</code> definition (haven't really confirmed that, though).</p>
<p>Lean doesn't allow the following, since it doesn't know how to eliminate the recursion:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">inductive</span> <span class="n">finsets</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span>
<span class="bp">|</span> <span class="n">atom</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">finsets</span>
<span class="bp">|</span> <span class="n">fs</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">finsets</span> <span class="bp">→</span> <span class="n">finsets</span>
</code></pre></div>



<a name="251815131"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/lists/near/251815131" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/lists.html#251815131">(Sep 03 2021 at 02:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="306601">Kyle Miller</span> <a href="#narrow/stream/116395-maths/topic/lists/near/251746430">said</a>:</p>
<blockquote>
<p>Hmm, this seems to execute very slowly:</p>
<p><div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">inductive</span> <span class="n">lists</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span>
<span class="bp">|</span> <span class="n">atom</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">lists</span>
<span class="bp">|</span> <span class="n">list</span> <span class="o">:</span> <span class="n">list</span> <span class="n">lists</span> <span class="bp">→</span> <span class="n">lists</span>
</code></pre></div><br>
</p>
</blockquote>
<p>It might be good to put this exact definition in the comment for <code>lists</code> and/or <code>lists'</code> as motivation</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>