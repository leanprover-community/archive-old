---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/adjoining.20multiple.20elements.20notation.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/adjoining.20multiple.20elements.20notation.html">adjoining multiple elements notation</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="208889112"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/adjoining%20multiple%20elements%20notation/near/208889112" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Browning <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/adjoining.20multiple.20elements.20notation.html#208889112">(Sep 02 2020 at 21:16)</a>:</h4>
<p>So currently the notation for adjoining multiple elements to a field is<br>
<code>notation K`⟮`:std.prec.max_plus l:(foldr `, ` (h t, set.insert h t) ∅) `⟯` := adjoin K l</code><br>
(from field_theory/adjoin.lean).<br>
This definition is causing us a few headaches since <code>F⟮α⟯</code> is not equal to <code>adjoin F {α}</code>, and <code>F⟮α,β⟯</code> is not equal to <code>adjoin F {α,β}</code> (and so on).<br>
Does anyone know how to change the definition of the notation to fix this problem?<br>
I think that this requires treating the first element differently, so that we start off by applying set.insert to a singleton, rather than to the empty set.</p>



<a name="208890175"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/adjoining%20multiple%20elements%20notation/near/208890175" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/adjoining.20multiple.20elements.20notation.html#208890175">(Sep 02 2020 at 21:27)</a>:</h4>
<p>Would something like this work?</p>
<div class="codehilite"><pre><span></span><code><span class="kn">notation</span> <span class="n">K</span><span class="bp">`</span><span class="err">⟮</span><span class="bp">`</span><span class="o">:</span><span class="n">std</span><span class="bp">.</span><span class="n">prec</span><span class="bp">.</span><span class="n">max_plus</span> <span class="n">l</span><span class="bp">`</span><span class="err">⟯</span><span class="bp">`</span> <span class="o">:=</span> <span class="n">adjoin</span> <span class="n">K</span> <span class="o">{</span><span class="n">l</span><span class="o">}</span>
<span class="kn">notation</span> <span class="n">K</span><span class="bp">`</span><span class="err">⟮</span><span class="bp">`</span><span class="o">:</span><span class="n">std</span><span class="bp">.</span><span class="n">prec</span><span class="bp">.</span><span class="n">max_plus</span> <span class="n">α</span><span class="bp">`</span><span class="o">,</span><span class="bp">`</span><span class="n">l</span><span class="o">:(</span><span class="n">foldr</span> <span class="bp">`</span><span class="o">,</span> <span class="bp">`</span> <span class="o">(</span><span class="n">h</span> <span class="n">t</span><span class="o">,</span> <span class="n">set</span><span class="bp">.</span><span class="n">insert</span> <span class="n">h</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span><span class="n">α</span><span class="o">})</span> <span class="bp">`</span><span class="err">⟯</span><span class="bp">`</span> <span class="o">:=</span> <span class="n">adjoin</span> <span class="n">K</span> <span class="n">l</span>

<span class="kn">variables</span> <span class="o">(</span><span class="n">α</span> <span class="n">β</span><span class="o">:</span> <span class="n">E</span><span class="o">)</span>
<span class="bp">#</span><span class="kn">check</span> <span class="n">F</span><span class="err">⟮</span><span class="n">α</span><span class="err">⟯</span>
<span class="bp">#</span><span class="kn">check</span> <span class="n">F</span><span class="err">⟮</span><span class="n">α</span><span class="o">,</span><span class="n">β</span><span class="err">⟯</span>
</code></pre></div>



<a name="208891756"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/adjoining%20multiple%20elements%20notation/near/208891756" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Browning <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/adjoining.20multiple.20elements.20notation.html#208891756">(Sep 02 2020 at 21:43)</a>:</h4>
<p>that looks promising, although it seems to sometimes require casting that wasn't previously necessary:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">notation</span> <span class="n">K</span><span class="bp">`</span><span class="err">⟮</span><span class="bp">`</span><span class="o">:</span><span class="n">std</span><span class="bp">.</span><span class="n">prec</span><span class="bp">.</span><span class="n">max_plus</span> <span class="n">l</span><span class="bp">`</span><span class="err">⟯</span><span class="bp">`</span> <span class="o">:=</span> <span class="n">adjoin</span> <span class="n">K</span> <span class="o">{</span><span class="n">l</span><span class="o">}</span>
<span class="kn">notation</span> <span class="n">K</span><span class="bp">`</span><span class="err">⟮</span><span class="bp">`</span><span class="o">:</span><span class="n">std</span><span class="bp">.</span><span class="n">prec</span><span class="bp">.</span><span class="n">max_plus</span> <span class="n">α</span><span class="bp">`</span><span class="o">,</span><span class="bp">`</span><span class="n">l</span><span class="o">:(</span><span class="n">foldr</span> <span class="bp">`</span><span class="o">,</span> <span class="bp">`</span> <span class="o">(</span><span class="n">h</span> <span class="n">t</span><span class="o">,</span> <span class="n">set</span><span class="bp">.</span><span class="n">insert</span> <span class="n">h</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span><span class="n">α</span><span class="o">})</span> <span class="bp">`</span><span class="err">⟯</span><span class="bp">`</span> <span class="o">:=</span> <span class="n">adjoin</span> <span class="n">K</span> <span class="n">l</span>

<span class="c1">--this works</span>
<span class="kn">lemma</span> <span class="n">mem_adjoin_simple_self</span> <span class="o">:</span> <span class="n">α</span> <span class="err">∈</span> <span class="o">(</span><span class="n">F</span><span class="err">⟮</span><span class="n">α</span><span class="err">⟯</span> <span class="o">:</span> <span class="n">subalgebra</span> <span class="n">F</span> <span class="n">E</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="c1">--but this worked with the old notation</span>
<span class="kn">lemma</span> <span class="n">mem_adjoin_simple_self</span> <span class="o">:</span> <span class="n">α</span> <span class="err">∈</span> <span class="n">F</span><span class="err">⟮</span><span class="n">α</span><span class="err">⟯</span> <span class="o">:=</span> <span class="n">sorry</span>
</code></pre></div>



<a name="208892065"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/adjoining%20multiple%20elements%20notation/near/208892065" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/adjoining.20multiple.20elements.20notation.html#208892065">(Sep 02 2020 at 21:45)</a>:</h4>
<p>I would wonder which notation is getting used there.</p>



<a name="208892122"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/adjoining%20multiple%20elements%20notation/near/208892122" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/adjoining.20multiple.20elements.20notation.html#208892122">(Sep 02 2020 at 21:46)</a>:</h4>
<p>Oh wait, only one has a comma in it ...</p>



<a name="208892134"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/adjoining%20multiple%20elements%20notation/near/208892134" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/adjoining.20multiple.20elements.20notation.html#208892134">(Sep 02 2020 at 21:46)</a>:</h4>
<p>er, rather only one <em>doesn't</em> have a comma</p>



<a name="208892283"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/adjoining%20multiple%20elements%20notation/near/208892283" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Lutz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/adjoining.20multiple.20elements.20notation.html#208892283">(Sep 02 2020 at 21:47)</a>:</h4>
<p>maybe you need <code>adjoin K (@singleton _ _ set.has_singleton l)</code> instead of <code>adjoin K {l}</code></p>



<a name="208892393"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/adjoining%20multiple%20elements%20notation/near/208892393" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Lutz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/adjoining.20multiple.20elements.20notation.html#208892393">(Sep 02 2020 at 21:48)</a>:</h4>
<p>I think it's the same issue we ran into before</p>



<a name="208892426"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/adjoining%20multiple%20elements%20notation/near/208892426" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Lutz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/adjoining.20multiple.20elements.20notation.html#208892426">(Sep 02 2020 at 21:48)</a>:</h4>
<p>where for some reason Lean gets confused about the type of <code>{l}</code></p>



<a name="208892538"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/adjoining%20multiple%20elements%20notation/near/208892538" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Browning <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/adjoining.20multiple.20elements.20notation.html#208892538">(Sep 02 2020 at 21:49)</a>:</h4>
<p>Ok, so it seems like this works:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">notation</span> <span class="n">K</span><span class="bp">`</span><span class="err">⟮</span><span class="bp">`</span><span class="o">:</span><span class="n">std</span><span class="bp">.</span><span class="n">prec</span><span class="bp">.</span><span class="n">max_plus</span> <span class="n">l</span><span class="bp">`</span><span class="err">⟯</span><span class="bp">`</span> <span class="o">:=</span> <span class="n">adjoin</span> <span class="n">K</span> <span class="o">(</span><span class="bp">@</span><span class="n">singleton</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">set</span><span class="bp">.</span><span class="n">has_singleton</span> <span class="n">l</span><span class="o">)</span>
<span class="kn">notation</span> <span class="n">K</span><span class="bp">`</span><span class="err">⟮</span><span class="bp">`</span><span class="o">:</span><span class="n">std</span><span class="bp">.</span><span class="n">prec</span><span class="bp">.</span><span class="n">max_plus</span> <span class="n">α</span><span class="bp">`</span><span class="o">,</span><span class="bp">`</span><span class="n">l</span><span class="o">:(</span><span class="n">foldr</span> <span class="bp">`</span><span class="o">,</span> <span class="bp">`</span> <span class="o">(</span><span class="n">h</span> <span class="n">t</span><span class="o">,</span> <span class="n">set</span><span class="bp">.</span><span class="n">insert</span> <span class="n">h</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span><span class="n">α</span><span class="o">})</span> <span class="bp">`</span><span class="err">⟯</span><span class="bp">`</span> <span class="o">:=</span> <span class="n">adjoin</span> <span class="n">K</span> <span class="n">l</span>
</code></pre></div>


<p>and I haven't noticed any problems yet</p>



<a name="208895430"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/adjoining%20multiple%20elements%20notation/near/208895430" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/adjoining.20multiple.20elements.20notation.html#208895430">(Sep 02 2020 at 22:17)</a>:</h4>
<p>You might need to change whether whitespace is necessary between the commas</p>



<a name="208895903"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/adjoining%20multiple%20elements%20notation/near/208895903" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Browning <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/adjoining.20multiple.20elements.20notation.html#208895903">(Sep 02 2020 at 22:22)</a>:</h4>
<p>here's an potential issue: it seems to be inserting the wrong way: <code>F⟮α,β⟯</code> equals <code>adjoin F {β, α}</code>, I think.</p>



<a name="208897767"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/adjoining%20multiple%20elements%20notation/near/208897767" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Lutz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/adjoining.20multiple.20elements.20notation.html#208897767">(Sep 02 2020 at 22:42)</a>:</h4>
<p>I think that was also a problem with the original notation</p>



<a name="208897782"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/adjoining%20multiple%20elements%20notation/near/208897782" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Lutz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/adjoining.20multiple.20elements.20notation.html#208897782">(Sep 02 2020 at 22:42)</a>:</h4>
<p>but it would be good to fix</p>



<a name="208897802"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/adjoining%20multiple%20elements%20notation/near/208897802" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Lutz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/adjoining.20multiple.20elements.20notation.html#208897802">(Sep 02 2020 at 22:42)</a>:</h4>
<p>maybe <code>foldl</code> instead of <code>foldr</code>?</p>



<a name="208897910"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/adjoining%20multiple%20elements%20notation/near/208897910" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Lutz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/adjoining.20multiple.20elements.20notation.html#208897910">(Sep 02 2020 at 22:43)</a>:</h4>
<p>No, that doesn't make any difference actually</p>



<a name="208899154"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/adjoining%20multiple%20elements%20notation/near/208899154" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Browning <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/adjoining.20multiple.20elements.20notation.html#208899154">(Sep 02 2020 at 22:59)</a>:</h4>
<p>the big problem seems to be that Yakov's code pick's off the first element and inserts into that singleton</p>



<a name="208899235"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/adjoining%20multiple%20elements%20notation/near/208899235" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Browning <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/adjoining.20multiple.20elements.20notation.html#208899235">(Sep 02 2020 at 23:00)</a>:</h4>
<p>I think that you would instead have to pick off the last element</p>



<a name="208899297"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/adjoining%20multiple%20elements%20notation/near/208899297" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Lutz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/adjoining.20multiple.20elements.20notation.html#208899297">(Sep 02 2020 at 23:00)</a>:</h4>
<p>Oh, good point</p>



<a name="208899542"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/adjoining%20multiple%20elements%20notation/near/208899542" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Lutz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/adjoining.20multiple.20elements.20notation.html#208899542">(Sep 02 2020 at 23:03)</a>:</h4>
<p><span class="user-mention silent" data-user-id="298851">Patrick Lutz</span> <a href="#narrow/stream/116395-maths/topic/adjoining.20multiple.20elements.20notation/near/208897802">said</a>:</p>
<blockquote>
<p>maybe <code>foldl</code> instead of <code>foldr</code>?</p>
</blockquote>
<p>Oh, wait, this makes it worse. It means the entire list is flipped rather than just the first element being in the wrong place</p>



<a name="208900142"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/adjoining%20multiple%20elements%20notation/near/208900142" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Lutz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/adjoining.20multiple.20elements.20notation.html#208900142">(Sep 02 2020 at 23:10)</a>:</h4>
<p>Is there some way of reversing a list in Lean?</p>



<a name="208900267"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/adjoining%20multiple%20elements%20notation/near/208900267" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Browning <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/adjoining.20multiple.20elements.20notation.html#208900267">(Sep 02 2020 at 23:12)</a>:</h4>
<p>list.reverse?</p>



<a name="208900335"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/adjoining%20multiple%20elements%20notation/near/208900335" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Lutz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/adjoining.20multiple.20elements.20notation.html#208900335">(Sep 02 2020 at 23:12)</a>:</h4>
<p>we don't actually have a list though I guess</p>



<a name="208900357"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/adjoining%20multiple%20elements%20notation/near/208900357" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Browning <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/adjoining.20multiple.20elements.20notation.html#208900357">(Sep 02 2020 at 23:12)</a>:</h4>
<p>yeah, <code>l</code> is a set so you can't just add a reverse on the right hand side</p>



<a name="208900362"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/adjoining%20multiple%20elements%20notation/near/208900362" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Lutz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/adjoining.20multiple.20elements.20notation.html#208900362">(Sep 02 2020 at 23:12)</a>:</h4>
<p>maybe we could first form a list then reverse it then turn it into a set</p>



<a name="208900392"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/adjoining%20multiple%20elements%20notation/near/208900392" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Browning <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/adjoining.20multiple.20elements.20notation.html#208900392">(Sep 02 2020 at 23:13)</a>:</h4>
<p>might work</p>



<a name="208900401"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/adjoining%20multiple%20elements%20notation/near/208900401" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Browning <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/adjoining.20multiple.20elements.20notation.html#208900401">(Sep 02 2020 at 23:13)</a>:</h4>
<p>there might even be automatic coersion list -&gt; set</p>



<a name="208900477"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/adjoining%20multiple%20elements%20notation/near/208900477" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Lutz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/adjoining.20multiple.20elements.20notation.html#208900477">(Sep 02 2020 at 23:14)</a>:</h4>
<p><span class="user-mention silent" data-user-id="253861">Thomas Browning</span> <a href="#narrow/stream/116395-maths/topic/adjoining.20multiple.20elements.20notation/near/208900401">said</a>:</p>
<blockquote>
<p>there might even be automatic coersion list -&gt; set</p>
</blockquote>
<p>although we want the set we get to be definitionally equal to <code>{a, b, c}</code></p>



<a name="208900521"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/adjoining%20multiple%20elements%20notation/near/208900521" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Browning <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/adjoining.20multiple.20elements.20notation.html#208900521">(Sep 02 2020 at 23:14)</a>:</h4>
<p>doesn't seem like there's automatic coersion</p>



<a name="208900533"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/adjoining%20multiple%20elements%20notation/near/208900533" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Browning <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/adjoining.20multiple.20elements.20notation.html#208900533">(Sep 02 2020 at 23:14)</a>:</h4>
<p>but there should be a way</p>



<a name="208900557"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/adjoining%20multiple%20elements%20notation/near/208900557" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Browning <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/adjoining.20multiple.20elements.20notation.html#208900557">(Sep 02 2020 at 23:14)</a>:</h4>
<div class="codehilite"><pre><span></span><code>
</code></pre></div>



<a name="208900586"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/adjoining%20multiple%20elements%20notation/near/208900586" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Browning <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/adjoining.20multiple.20elements.20notation.html#208900586">(Sep 02 2020 at 23:14)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">notation</span> <span class="n">K</span><span class="bp">`</span><span class="err">⟮</span><span class="bp">`</span><span class="o">:</span><span class="n">std</span><span class="bp">.</span><span class="n">prec</span><span class="bp">.</span><span class="n">max_plus</span> <span class="n">l</span><span class="bp">`</span><span class="err">⟯</span><span class="bp">`</span> <span class="o">:=</span> <span class="n">adjoin</span> <span class="n">K</span> <span class="o">(</span><span class="bp">@</span><span class="n">singleton</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">set</span><span class="bp">.</span><span class="n">has_singleton</span> <span class="n">l</span><span class="o">)</span>
<span class="kn">notation</span> <span class="n">K</span><span class="bp">`</span><span class="err">⟮</span><span class="bp">`</span><span class="o">:</span><span class="n">std</span><span class="bp">.</span><span class="n">prec</span><span class="bp">.</span><span class="n">max_plus</span> <span class="n">α</span><span class="bp">`</span><span class="o">,</span><span class="bp">`</span><span class="n">l</span><span class="o">:(</span><span class="n">foldl</span> <span class="bp">`</span><span class="o">,</span> <span class="bp">`</span> <span class="o">(</span><span class="n">h</span> <span class="n">t</span><span class="o">,</span> <span class="n">list</span><span class="bp">.</span><span class="n">insert</span> <span class="n">h</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span><span class="n">α</span><span class="o">})</span> <span class="bp">`</span><span class="err">⟯</span><span class="bp">`</span> <span class="o">:=</span> <span class="n">adjoin</span> <span class="n">K</span> <span class="o">((</span><span class="n">l</span><span class="bp">.</span><span class="n">reverse</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span> <span class="bp">_</span><span class="o">)</span>
</code></pre></div>



<a name="208900587"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/adjoining%20multiple%20elements%20notation/near/208900587" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Lutz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/adjoining.20multiple.20elements.20notation.html#208900587">(Sep 02 2020 at 23:14)</a>:</h4>
<p><span class="user-mention silent" data-user-id="298851">Patrick Lutz</span> <a href="#narrow/stream/116395-maths/topic/adjoining.20multiple.20elements.20notation/near/208900362">said</a>:</p>
<blockquote>
<p>maybe we could first form a list then reverse it then turn it into a set</p>
</blockquote>
<p>why can't I give emoji reacts to my own messages?</p>



<a name="208900728"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/adjoining%20multiple%20elements%20notation/near/208900728" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Lutz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/adjoining.20multiple.20elements.20notation.html#208900728">(Sep 02 2020 at 23:16)</a>:</h4>
<p><span class="user-mention silent" data-user-id="253861">Thomas Browning</span> <a href="#narrow/stream/116395-maths/topic/adjoining.20multiple.20elements.20notation/near/208900586">said</a>:</p>
<blockquote>
<div class="codehilite"><pre><span></span><code><span class="kn">notation</span> <span class="n">K</span><span class="bp">`</span><span class="err">⟮</span><span class="bp">`</span><span class="o">:</span><span class="n">std</span><span class="bp">.</span><span class="n">prec</span><span class="bp">.</span><span class="n">max_plus</span> <span class="n">l</span><span class="bp">`</span><span class="err">⟯</span><span class="bp">`</span> <span class="o">:=</span> <span class="n">adjoin</span> <span class="n">K</span> <span class="o">(</span><span class="bp">@</span><span class="n">singleton</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">set</span><span class="bp">.</span><span class="n">has_singleton</span> <span class="n">l</span><span class="o">)</span>
<span class="kn">notation</span> <span class="n">K</span><span class="bp">`</span><span class="err">⟮</span><span class="bp">`</span><span class="o">:</span><span class="n">std</span><span class="bp">.</span><span class="n">prec</span><span class="bp">.</span><span class="n">max_plus</span> <span class="n">α</span><span class="bp">`</span><span class="o">,</span><span class="bp">`</span><span class="n">l</span><span class="o">:(</span><span class="n">foldl</span> <span class="bp">`</span><span class="o">,</span> <span class="bp">`</span> <span class="o">(</span><span class="n">h</span> <span class="n">t</span><span class="o">,</span> <span class="n">list</span><span class="bp">.</span><span class="n">insert</span> <span class="n">h</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span><span class="n">α</span><span class="o">})</span> <span class="bp">`</span><span class="err">⟯</span><span class="bp">`</span> <span class="o">:=</span> <span class="n">adjoin</span> <span class="n">K</span> <span class="o">((</span><span class="n">l</span><span class="bp">.</span><span class="n">reverse</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span> <span class="bp">_</span><span class="o">)</span>
</code></pre></div>


</blockquote>
<p>this seems to cause some problems</p>



<a name="208900760"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/adjoining%20multiple%20elements%20notation/near/208900760" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Browning <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/adjoining.20multiple.20elements.20notation.html#208900760">(Sep 02 2020 at 23:16)</a>:</h4>
<p>yeah, the coersion doesn't work</p>



<a name="208900764"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/adjoining%20multiple%20elements%20notation/near/208900764" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Lutz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/adjoining.20multiple.20elements.20notation.html#208900764">(Sep 02 2020 at 23:16)</a>:</h4>
<p>oh</p>



<a name="208900778"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/adjoining%20multiple%20elements%20notation/near/208900778" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Lutz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/adjoining.20multiple.20elements.20notation.html#208900778">(Sep 02 2020 at 23:16)</a>:</h4>
<p>why are the errors about <code>decidable_eq</code>?</p>



<a name="208900788"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/adjoining%20multiple%20elements%20notation/near/208900788" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Browning <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/adjoining.20multiple.20elements.20notation.html#208900788">(Sep 02 2020 at 23:17)</a>:</h4>
<p>no idea</p>



<a name="208900801"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/adjoining%20multiple%20elements%20notation/near/208900801" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Browning <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/adjoining.20multiple.20elements.20notation.html#208900801">(Sep 02 2020 at 23:17)</a>:</h4>
<p>if you add in a hypothesis about decidable_eq then it gives a coersion error</p>



<a name="208900807"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/adjoining%20multiple%20elements%20notation/near/208900807" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Lutz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/adjoining.20multiple.20elements.20notation.html#208900807">(Sep 02 2020 at 23:17)</a>:</h4>
<p>I guess it has something to do with the elements of a list being allowed to be different but not the elements of a set?</p>



<a name="208901266"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/adjoining%20multiple%20elements%20notation/near/208901266" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/adjoining.20multiple.20elements.20notation.html#208901266">(Sep 02 2020 at 23:23)</a>:</h4>
<p>Can you have a lemma that discusses adjoining a multiset?</p>



<a name="208901269"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/adjoining%20multiple%20elements%20notation/near/208901269" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/adjoining.20multiple.20elements.20notation.html#208901269">(Sep 02 2020 at 23:23)</a>:</h4>
<p>Then you can use a list</p>



<a name="208902906"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/adjoining%20multiple%20elements%20notation/near/208902906" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/adjoining.20multiple.20elements.20notation.html#208902906">(Sep 02 2020 at 23:42)</a>:</h4>
<p>This seems to work...</p>
<div class="codehilite"><pre><span></span><code><span class="n">class</span> <span class="n">fancy_insert</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">insert</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">set</span> <span class="n">α</span><span class="o">)</span>

<span class="bp">@</span><span class="o">[</span><span class="n">priority</span> <span class="mi">1000</span><span class="o">]</span>
<span class="kn">instance</span> <span class="n">fancy_insert_empty</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">:</span> <span class="n">fancy_insert</span> <span class="o">(</span><span class="err">∅</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">insert</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="bp">@</span><span class="n">singleton</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">set</span><span class="bp">.</span><span class="n">has_singleton</span> <span class="n">x</span> <span class="o">}</span>

<span class="bp">@</span><span class="o">[</span><span class="n">priority</span> <span class="mi">900</span><span class="o">]</span>
<span class="kn">instance</span> <span class="n">fancy_insert_nonempty</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">fancy_insert</span> <span class="n">s</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">insert</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">set</span><span class="bp">.</span><span class="n">insert</span> <span class="n">x</span> <span class="n">s</span> <span class="o">}</span>

<span class="kn">notation</span> <span class="n">K</span><span class="bp">`</span><span class="err">⟮</span><span class="bp">`</span><span class="o">:</span><span class="n">std</span><span class="bp">.</span><span class="n">prec</span><span class="bp">.</span><span class="n">max_plus</span> <span class="n">l</span><span class="o">:(</span><span class="n">foldr</span> <span class="bp">`</span><span class="o">,</span> <span class="bp">`</span> <span class="o">(</span><span class="n">h</span> <span class="n">t</span><span class="o">,</span> <span class="n">fancy_insert</span><span class="bp">.</span><span class="n">insert</span> <span class="n">t</span> <span class="n">h</span><span class="o">)</span> <span class="err">∅</span><span class="o">)</span> <span class="bp">`</span><span class="err">⟯</span><span class="bp">`</span> <span class="o">:=</span> <span class="n">adjoin</span> <span class="n">K</span> <span class="n">l</span>
</code></pre></div>



<a name="208903084"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/adjoining%20multiple%20elements%20notation/near/208903084" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/adjoining.20multiple.20elements.20notation.html#208903084">(Sep 02 2020 at 23:44)</a>:</h4>
<p>(assuming I'm following what you're trying to accomplish)</p>



<a name="208903303"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/adjoining%20multiple%20elements%20notation/near/208903303" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Browning <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/adjoining.20multiple.20elements.20notation.html#208903303">(Sep 02 2020 at 23:46)</a>:</h4>
<p>Lovely! I think that works.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>