---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/.60lie_ring.2Eto_non_unital_non_assoc_semiring.60.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.60lie_ring.2Eto_non_unital_non_assoc_semiring.60.html">`lie_ring.to_non_unital_non_assoc_semiring`</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="294256214"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%60lie_ring.to_non_unital_non_assoc_semiring%60/near/294256214" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.60lie_ring.2Eto_non_unital_non_assoc_semiring.60.html#294256214">(Aug 19 2022 at 12:38)</a>:</h4>
<p>Several files promote <a href="https://leanprover-community.github.io/mathlib_docs/find/lie_ring.to_non_unital_non_assoc_semiring">docs#lie_ring.to_non_unital_non_assoc_semiring</a> to an instance (where multiplication is given by <code>has_bracket</code>), which basically immediately creates a diamond with <a href="https://leanprover-community.github.io/mathlib_docs/find/lie_ring.of_associative_ring">docs#lie_ring.of_associative_ring</a>. How do I deal with this safely? Shouldn't this instance be on a type synonym instead?</p>



<a name="294256771"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%60lie_ring.to_non_unital_non_assoc_semiring%60/near/294256771" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.60lie_ring.2Eto_non_unital_non_assoc_semiring.60.html#294256771">(Aug 19 2022 at 12:41)</a>:</h4>
<p>More specifically, in <a href="https://leanprover-community.github.io/mathlib_docs/find/free_lie_algebra.lift_aux_map_smul">docs#free_lie_algebra.lift_aux_map_smul</a> this instance leads to two different multiplications on <code>R</code>, both of which can lift to scalar multiplications on <a href="https://leanprover-community.github.io/mathlib_docs/find/lib">docs#lib</a>. Currently we avoid this by restricting the lifting to scalars to <code>distrib_mul_action</code> but in the right generality (as I implemented <a href="https://github.com/leanprover-community/mathlib/pull/16132">#16132</a>) they immediately conflict.</p>



<a name="294260174"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%60lie_ring.to_non_unital_non_assoc_semiring%60/near/294260174" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.60lie_ring.2Eto_non_unital_non_assoc_semiring.60.html#294260174">(Aug 19 2022 at 13:01)</a>:</h4>
<p>I haven't looked at <a href="https://github.com/leanprover-community/mathlib/pull/16132">#16132</a> to understand why it triggers this issue but you're right: we have a diamond if <code>lie_ring.of_associative_ring</code> and <code>lie_ring.to_non_unital_non_assoc_semiring</code> are simultaneously instances so we should use a type synonym.</p>



<a name="294262317"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%60lie_ring.to_non_unital_non_assoc_semiring%60/near/294262317" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.60lie_ring.2Eto_non_unital_non_assoc_semiring.60.html#294262317">(Aug 19 2022 at 13:13)</a>:</h4>
<p>Ok, I'll add that to my stack of TODOs :)</p>



<a name="294263190"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%60lie_ring.to_non_unital_non_assoc_semiring%60/near/294263190" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.60lie_ring.2Eto_non_unital_non_assoc_semiring.60.html#294263190">(Aug 19 2022 at 13:18)</a>:</h4>
<p>Any suggestion for a name: <code>bracket_ring</code>?</p>



<a name="294263572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%60lie_ring.to_non_unital_non_assoc_semiring%60/near/294263572" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.60lie_ring.2Eto_non_unital_non_assoc_semiring.60.html#294263572">(Aug 19 2022 at 13:21)</a>:</h4>
<p>Or maybe <code>commutator_ring</code>?</p>



<a name="294268041"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%60lie_ring.to_non_unital_non_assoc_semiring%60/near/294268041" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.60lie_ring.2Eto_non_unital_non_assoc_semiring.60.html#294268041">(Aug 19 2022 at 13:37)</a>:</h4>
<p>That was surprisingly straightforward: <a href="https://github.com/leanprover-community/mathlib/pull/16154">#16154</a></p>



<a name="294269108"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%60lie_ring.to_non_unital_non_assoc_semiring%60/near/294269108" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.60lie_ring.2Eto_non_unital_non_assoc_semiring.60.html#294269108">(Aug 19 2022 at 13:43)</a>:</h4>
<p>Great, I'll review it as soon as it's passed CI!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>