---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html">Metrisability of compact-open topology</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="249912863"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/249912863" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#249912863">(Aug 18 2021 at 21:15)</a>:</h4>
<p>Here's a basic fact that I believe we have yet to teach Mathlib.</p>
<p>If <code>X</code> is a compact topological space and <code>Y</code> is a metric space then the compact-open topology on <code>C(X, Y)</code> is metrisable with distance function <code>dist f g = supr (Î» x, dist (f x) (g x))</code>.</p>



<a name="249912889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/249912889" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#249912889">(Aug 18 2021 at 21:15)</a>:</h4>
<p>We do have the compact-open topology <a href="https://leanprover-community.github.io/mathlib_docs/find/continuous_map.compact_open">docs#continuous_map.compact_open</a>, (which arguably should be a <code>def</code> rather than an <code>instance</code>) and we do have the metric space structure <a href="https://leanprover-community.github.io/mathlib_docs/find/continuous_map.metric_space">docs#continuous_map.metric_space</a>, but I believe we do not have this result.</p>



<a name="249912983"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/249912983" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#249912983">(Aug 18 2021 at 21:16)</a>:</h4>
<p>I may want this result in the near future so I want to check I understand how to formalise it in such a way that the topology induced from the metric space structure is defeq to the compact-open topology. In other words, I'd like the following to work:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">topology.continuous_function.compact</span>
<span class="kn">import</span> <span class="n">topology.compact_open</span>

<span class="kd">variables</span> <span class="o">(</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">X</span><span class="o">]</span> <span class="o">[</span><span class="n">compact_space</span> <span class="n">X</span><span class="o">]</span> <span class="o">[</span><span class="n">metric_space</span> <span class="n">Y</span><span class="o">]</span>

<span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="n">continuous_map.compact_open</span> <span class="o">:</span> <span class="n">topological_space</span> <span class="n">C</span><span class="o">(</span><span class="n">X</span><span class="o">,</span> <span class="n">Y</span><span class="o">))</span> <span class="bp">=</span>
          <span class="n">metric_space.to_uniform_space'.to_topological_space</span> <span class="o">:=</span> <span class="n">rfl</span> <span class="c1">-- Fails</span>
</code></pre></div>



<a name="249913063"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/249913063" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#249913063">(Aug 18 2021 at 21:17)</a>:</h4>
<p>Looking at the definition of <a href="https://leanprover-community.github.io/mathlib_docs/find/pseudo_metric_space">docs#pseudo_metric_space</a>, I see its constructor cleverly contains a redundant argument <code>to_uniform_space</code> which allows you to specify the topology manually and then I suppose <code>uniformity_dist</code> becomes the actual mathematical fact about metrisability. I think I recall watching a talk about this being invented to make the topology on the product of metrics spaces defeq to the product topology.</p>
<p>Have I got that right?</p>



<a name="249913197"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/249913197" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#249913197">(Aug 18 2021 at 21:18)</a>:</h4>
<p>(In fact the situation is slightly more complicated because of the fact that we define the metric space structure on <code>C(X, Y)</code> via the bounded continuous functions but this is an independent complication.)</p>



<a name="249913702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/249913702" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#249913702">(Aug 18 2021 at 21:22)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/continuous_map.metric_space">docs#continuous_map.metric_space</a> assumes the target is a normed group</p>



<a name="249913919"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/249913919" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#249913919">(Aug 18 2021 at 21:24)</a>:</h4>
<p>Otherwise you got the picture mostly right, except there are actually three layers, not two: metric, uniform structure, topology.</p>



<a name="249914356"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/249914356" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#249914356">(Aug 18 2021 at 21:28)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110031">Patrick Massot</span> <a href="#narrow/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology/near/249913702">said</a>:</p>
<blockquote>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/continuous_map.metric_space">docs#continuous_map.metric_space</a> assumes the target is a normed group</p>
</blockquote>
<p>Ha, I thought <a href="https://github.com/leanprover-community/mathlib/issues/8717">#8717</a> would land before anyone read this.  I think we're minutes away from what I said being literally true.</p>



<a name="249914525"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/249914525" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#249914525">(Aug 18 2021 at 21:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110031">Patrick Massot</span> <a href="#narrow/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology/near/249913919">said</a>:</p>
<blockquote>
<p>Otherwise you got the picture mostly right, except there are actually three layers, not two: metric, uniform structure, topology.</p>
</blockquote>
<p>Right, thanks. I am aware that there is a uniform structure sitting in between the topology and metric space structures and was ignoring it to simplify but of course, it does matter. Thanks for highlighting it.</p>



<a name="249955349"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/249955349" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#249955349">(Aug 19 2021 at 08:16)</a>:</h4>
<p>It seems we don't really have a nice API to do that, but you can still wrestle through it to get to the crucial point (which is left as an exercise of course):</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">topology.continuous_function.compact</span>
<span class="kn">import</span> <span class="n">topology.compact_open</span>

<span class="kd">noncomputable theory</span>

<span class="kn">open</span> <span class="n">continuous_map</span> <span class="n">filter</span> <span class="n">set</span>
<span class="n">open_locale</span> <span class="n">filter</span>

<span class="kd">variables</span> <span class="o">(</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">X</span><span class="o">]</span> <span class="o">[</span><span class="n">compact_space</span> <span class="n">X</span><span class="o">]</span> <span class="o">[</span><span class="n">metric_space</span> <span class="n">Y</span><span class="o">]</span>

<span class="c">/-</span><span class="cm"> the following function is extacted from `uniform_space_of_dist` -/</span>

<span class="kd">def</span> <span class="n">uniform_space.core_of_dist</span> <span class="o">{</span><span class="n">Î±</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">dist</span> <span class="o">:</span> <span class="n">Î±</span> <span class="bp">â</span> <span class="n">Î±</span> <span class="bp">â</span> <span class="n">â</span><span class="o">)</span>
  <span class="o">(</span><span class="n">dist_self</span> <span class="o">:</span> <span class="bp">â</span> <span class="n">x</span> <span class="o">:</span> <span class="n">Î±</span><span class="o">,</span> <span class="n">dist</span> <span class="n">x</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span>
  <span class="o">(</span><span class="n">dist_comm</span> <span class="o">:</span> <span class="bp">â</span> <span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">Î±</span><span class="o">,</span> <span class="n">dist</span> <span class="n">x</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">dist</span> <span class="n">y</span> <span class="n">x</span><span class="o">)</span>
  <span class="o">(</span><span class="n">dist_triangle</span> <span class="o">:</span> <span class="bp">â</span> <span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="o">:</span> <span class="n">Î±</span><span class="o">,</span> <span class="n">dist</span> <span class="n">x</span> <span class="n">z</span> <span class="bp">â¤</span> <span class="n">dist</span> <span class="n">x</span> <span class="n">y</span> <span class="bp">+</span> <span class="n">dist</span> <span class="n">y</span> <span class="n">z</span><span class="o">)</span> <span class="o">:</span> <span class="n">uniform_space.core</span> <span class="n">Î±</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">uniformity</span> <span class="o">:=</span> <span class="o">(</span><span class="bp">â¨</span> <span class="n">Îµ</span><span class="bp">&gt;</span><span class="mi">0</span><span class="o">,</span> <span class="bp">ð</span> <span class="o">{</span><span class="n">p</span><span class="o">:</span><span class="n">Î±</span><span class="bp">Ã</span><span class="n">Î±</span> <span class="bp">|</span> <span class="n">dist</span> <span class="n">p.1</span> <span class="n">p.2</span> <span class="bp">&lt;</span> <span class="n">Îµ</span><span class="o">}),</span>
  <span class="n">refl</span>       <span class="o">:=</span> <span class="n">le_infi</span> <span class="bp">$</span> <span class="k">assume</span> <span class="n">Îµ</span><span class="o">,</span> <span class="n">le_infi</span> <span class="bp">$</span>
    <span class="kd">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">set.subset_def</span><span class="o">,</span> <span class="n">id_rel</span><span class="o">,</span> <span class="n">dist_self</span><span class="o">,</span> <span class="o">(</span><span class="bp">&gt;</span><span class="o">)]</span> <span class="o">{</span><span class="n">contextual</span> <span class="o">:=</span> <span class="n">tt</span><span class="o">},</span>
  <span class="n">comp</span>       <span class="o">:=</span> <span class="n">le_infi</span> <span class="bp">$</span> <span class="k">assume</span> <span class="n">Îµ</span><span class="o">,</span> <span class="n">le_infi</span> <span class="bp">$</span> <span class="k">assume</span> <span class="n">h</span><span class="o">,</span> <span class="n">lift'_le</span>
    <span class="o">(</span><span class="n">mem_infi_of_mem</span> <span class="o">(</span><span class="n">Îµ</span> <span class="bp">/</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">$</span> <span class="n">mem_infi_of_mem</span> <span class="o">(</span><span class="n">div_pos</span> <span class="n">h</span> <span class="n">zero_lt_two</span><span class="o">)</span> <span class="o">(</span><span class="n">subset.refl</span> <span class="n">_</span><span class="o">))</span> <span class="bp">$</span>
    <span class="k">have</span> <span class="bp">â</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">Î±</span><span class="o">),</span> <span class="n">dist</span> <span class="n">a</span> <span class="n">c</span> <span class="bp">&lt;</span> <span class="n">Îµ</span> <span class="bp">/</span> <span class="mi">2</span> <span class="bp">â</span> <span class="n">dist</span> <span class="n">c</span> <span class="n">b</span> <span class="bp">&lt;</span> <span class="n">Îµ</span> <span class="bp">/</span> <span class="mi">2</span> <span class="bp">â</span> <span class="n">dist</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">&lt;</span> <span class="n">Îµ</span><span class="o">,</span>
      <span class="k">from</span> <span class="k">assume</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">hac</span> <span class="n">hcb</span><span class="o">,</span>
      <span class="k">calc</span> <span class="n">dist</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">â¤</span> <span class="n">dist</span> <span class="n">a</span> <span class="n">c</span> <span class="bp">+</span> <span class="n">dist</span> <span class="n">c</span> <span class="n">b</span> <span class="o">:</span> <span class="n">dist_triangle</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span>
        <span class="bp">...</span> <span class="bp">&lt;</span> <span class="n">Îµ</span> <span class="bp">/</span> <span class="mi">2</span> <span class="bp">+</span> <span class="n">Îµ</span> <span class="bp">/</span> <span class="mi">2</span> <span class="o">:</span> <span class="n">add_lt_add</span> <span class="n">hac</span> <span class="n">hcb</span>
        <span class="bp">...</span> <span class="bp">=</span> <span class="n">Îµ</span> <span class="o">:</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">div_add_div_same</span><span class="o">,</span> <span class="n">add_self_div_two</span><span class="o">],</span>
    <span class="kd">by</span> <span class="n">simpa</span> <span class="o">[</span><span class="n">comp_rel</span><span class="o">],</span>
  <span class="n">symm</span>       <span class="o">:=</span> <span class="n">tendsto_infi.2</span> <span class="bp">$</span> <span class="k">assume</span> <span class="n">Îµ</span><span class="o">,</span> <span class="n">tendsto_infi.2</span> <span class="bp">$</span> <span class="k">assume</span> <span class="n">h</span><span class="o">,</span>
    <span class="n">tendsto_infi'</span> <span class="n">Îµ</span> <span class="bp">$</span> <span class="n">tendsto_infi'</span> <span class="n">h</span> <span class="bp">$</span> <span class="n">tendsto_principal_principal.2</span> <span class="bp">$</span> <span class="kd">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">dist_comm</span><span class="o">]</span> <span class="o">}</span>

<span class="kd">def</span> <span class="n">better_metric</span> <span class="o">:</span> <span class="n">metric_space</span> <span class="n">C</span><span class="o">(</span><span class="n">X</span><span class="o">,</span><span class="n">Y</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">dist</span> <span class="o">:=</span> <span class="bp">Î»</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="n">dist</span> <span class="o">(</span><span class="n">equiv_bounded_of_compact</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">equiv_bounded_of_compact</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">y</span><span class="o">),</span>
  <span class="n">dist_self</span> <span class="o">:=</span> <span class="bp">Î»</span> <span class="n">x</span><span class="o">,</span> <span class="n">dist_self</span> <span class="n">_</span><span class="o">,</span>
  <span class="n">dist_comm</span> <span class="o">:=</span> <span class="bp">Î»</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="n">dist_comm</span> <span class="n">_</span> <span class="n">_</span><span class="o">,</span>
  <span class="n">dist_triangle</span> <span class="o">:=</span> <span class="bp">Î»</span> <span class="n">x</span> <span class="n">y</span> <span class="n">z</span><span class="o">,</span> <span class="n">dist_triangle</span> <span class="n">_</span> <span class="n">_</span>  <span class="n">_</span><span class="o">,</span>
  <span class="n">edist</span> <span class="o">:=</span> <span class="bp">Î»</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="n">edist</span> <span class="o">(</span><span class="n">equiv_bounded_of_compact</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">equiv_bounded_of_compact</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">y</span><span class="o">),</span>
  <span class="n">edist_dist</span> <span class="o">:=</span> <span class="bp">Î»</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="n">edist_dist</span> <span class="n">_</span> <span class="n">_</span><span class="o">,</span>
  <span class="n">to_uniform_space</span> <span class="o">:=</span> <span class="o">{</span> <span class="n">is_open_uniformity</span> <span class="o">:=</span> <span class="kd">begin</span>
      <span class="n">dsimp</span> <span class="n">only</span> <span class="o">[</span><span class="n">uniform_space.core_of_dist</span><span class="o">],</span>
      <span class="gr">sorry</span>
    <span class="kd">end</span><span class="o">,</span>
    <span class="bp">..</span><span class="n">uniform_space.core_of_dist</span> <span class="n">dist</span> <span class="n">dist_self</span> <span class="n">dist_comm</span> <span class="n">dist_triangle</span><span class="o">},</span>
  <span class="n">uniformity_dist</span> <span class="o">:=</span> <span class="n">rfl</span><span class="o">,</span>
  <span class="n">eq_of_dist_eq_zero</span> <span class="o">:=</span> <span class="kd">begin</span>
    <span class="n">intros</span> <span class="n">x</span> <span class="n">y</span> <span class="n">h</span><span class="o">,</span>
    <span class="n">exact</span> <span class="o">(</span><span class="n">equiv_bounded_of_compact</span> <span class="n">X</span> <span class="n">Y</span><span class="o">)</span><span class="bp">.</span><span class="n">injective</span> <span class="o">(</span><span class="n">eq_of_dist_eq_zero</span> <span class="n">h</span><span class="o">)</span>
  <span class="kd">end</span> <span class="o">}</span>

<span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="n">continuous_map.compact_open</span> <span class="o">:</span> <span class="n">topological_space</span> <span class="n">C</span><span class="o">(</span><span class="n">X</span><span class="o">,</span> <span class="n">Y</span><span class="o">))</span> <span class="bp">=</span>
  <span class="o">(</span><span class="bp">@</span><span class="n">metric_space.to_uniform_space'</span> <span class="n">_</span> <span class="o">(</span><span class="n">better_metric</span> <span class="n">X</span> <span class="n">Y</span><span class="o">)</span><span class="bp">.</span><span class="n">to_pseudo_metric_space</span><span class="o">)</span><span class="bp">.</span><span class="n">to_topological_space</span> <span class="o">:=</span>
<span class="n">rfl</span>
</code></pre></div>



<a name="249955519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/249955519" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#249955519">(Aug 19 2021 at 08:18)</a>:</h4>
<p>Note the <code>@</code> in the example is only there because mathlib currently has the wrong metric space instance. Once you'll have replace this wrong instance with the better one you'll be able to state the example as you originally did.</p>



<a name="249955591"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/249955591" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#249955591">(Aug 19 2021 at 08:18)</a>:</h4>
<p>Thank you so much for this!</p>



<a name="249956214"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/249956214" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#249956214">(Aug 19 2021 at 08:23)</a>:</h4>
<p>My secret reason for originally wanting this was to eliminate <a href="https://github.com/leanprover-community/mathlib/blob/8b0db1a748bac6d8dab74e4a38be1acdbf7143ce/src/number_theory/L_functions.lean#L48">this lemma</a> because of <a href="https://leanprover-community.github.io/mathlib_docs/find/continuous_map.continuous_const'">docs#continuous_map.continuous_const'</a></p>



<a name="249963388"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/249963388" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#249963388">(Aug 19 2021 at 09:47)</a>:</h4>
<p><span class="user-mention" data-user-id="240862">@Oliver Nash</span>  I felt guilty for leaving you in such a mess so I came back and wrote an API:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">topology.continuous_function.compact</span>
<span class="kn">import</span> <span class="n">topology.compact_open</span>

<span class="kd">noncomputable theory</span>

<span class="kn">open</span> <span class="n">continuous_map</span> <span class="n">filter</span> <span class="n">set</span>
<span class="n">open_locale</span> <span class="n">filter</span>

<span class="kd">variables</span> <span class="o">(</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">X</span><span class="o">]</span> <span class="o">[</span><span class="n">compact_space</span> <span class="n">X</span><span class="o">]</span> <span class="o">[</span><span class="n">metric_space</span> <span class="n">Y</span><span class="o">]</span>

<span class="c">/-</span><span class="cm"> the following function is extacted from `uniform_space_of_dist` -/</span>

<span class="kd">def</span> <span class="n">uniform_space.core_of_dist</span> <span class="o">{</span><span class="n">Î±</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">dist</span> <span class="o">:</span> <span class="n">Î±</span> <span class="bp">â</span> <span class="n">Î±</span> <span class="bp">â</span> <span class="n">â</span><span class="o">)</span>
  <span class="o">(</span><span class="n">dist_self</span> <span class="o">:</span> <span class="bp">â</span> <span class="n">x</span> <span class="o">:</span> <span class="n">Î±</span><span class="o">,</span> <span class="n">dist</span> <span class="n">x</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span>
  <span class="o">(</span><span class="n">dist_comm</span> <span class="o">:</span> <span class="bp">â</span> <span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">Î±</span><span class="o">,</span> <span class="n">dist</span> <span class="n">x</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">dist</span> <span class="n">y</span> <span class="n">x</span><span class="o">)</span>
  <span class="o">(</span><span class="n">dist_triangle</span> <span class="o">:</span> <span class="bp">â</span> <span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="o">:</span> <span class="n">Î±</span><span class="o">,</span> <span class="n">dist</span> <span class="n">x</span> <span class="n">z</span> <span class="bp">â¤</span> <span class="n">dist</span> <span class="n">x</span> <span class="n">y</span> <span class="bp">+</span> <span class="n">dist</span> <span class="n">y</span> <span class="n">z</span><span class="o">)</span> <span class="o">:</span> <span class="n">uniform_space.core</span> <span class="n">Î±</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">uniformity</span> <span class="o">:=</span> <span class="o">(</span><span class="bp">â¨</span> <span class="n">Îµ</span><span class="bp">&gt;</span><span class="mi">0</span><span class="o">,</span> <span class="bp">ð</span> <span class="o">{</span><span class="n">p</span><span class="o">:</span><span class="n">Î±</span><span class="bp">Ã</span><span class="n">Î±</span> <span class="bp">|</span> <span class="n">dist</span> <span class="n">p.1</span> <span class="n">p.2</span> <span class="bp">&lt;</span> <span class="n">Îµ</span><span class="o">}),</span>
  <span class="n">refl</span>       <span class="o">:=</span> <span class="n">le_infi</span> <span class="bp">$</span> <span class="k">assume</span> <span class="n">Îµ</span><span class="o">,</span> <span class="n">le_infi</span> <span class="bp">$</span>
    <span class="kd">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">set.subset_def</span><span class="o">,</span> <span class="n">id_rel</span><span class="o">,</span> <span class="n">dist_self</span><span class="o">,</span> <span class="o">(</span><span class="bp">&gt;</span><span class="o">)]</span> <span class="o">{</span><span class="n">contextual</span> <span class="o">:=</span> <span class="n">tt</span><span class="o">},</span>
  <span class="n">comp</span>       <span class="o">:=</span> <span class="n">le_infi</span> <span class="bp">$</span> <span class="k">assume</span> <span class="n">Îµ</span><span class="o">,</span> <span class="n">le_infi</span> <span class="bp">$</span> <span class="k">assume</span> <span class="n">h</span><span class="o">,</span> <span class="n">lift'_le</span>
    <span class="o">(</span><span class="n">mem_infi_of_mem</span> <span class="o">(</span><span class="n">Îµ</span> <span class="bp">/</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">$</span> <span class="n">mem_infi_of_mem</span> <span class="o">(</span><span class="n">div_pos</span> <span class="n">h</span> <span class="n">zero_lt_two</span><span class="o">)</span> <span class="o">(</span><span class="n">subset.refl</span> <span class="n">_</span><span class="o">))</span> <span class="bp">$</span>
    <span class="k">have</span> <span class="bp">â</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">Î±</span><span class="o">),</span> <span class="n">dist</span> <span class="n">a</span> <span class="n">c</span> <span class="bp">&lt;</span> <span class="n">Îµ</span> <span class="bp">/</span> <span class="mi">2</span> <span class="bp">â</span> <span class="n">dist</span> <span class="n">c</span> <span class="n">b</span> <span class="bp">&lt;</span> <span class="n">Îµ</span> <span class="bp">/</span> <span class="mi">2</span> <span class="bp">â</span> <span class="n">dist</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">&lt;</span> <span class="n">Îµ</span><span class="o">,</span>
      <span class="k">from</span> <span class="k">assume</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">hac</span> <span class="n">hcb</span><span class="o">,</span>
      <span class="k">calc</span> <span class="n">dist</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">â¤</span> <span class="n">dist</span> <span class="n">a</span> <span class="n">c</span> <span class="bp">+</span> <span class="n">dist</span> <span class="n">c</span> <span class="n">b</span> <span class="o">:</span> <span class="n">dist_triangle</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span>
        <span class="bp">...</span> <span class="bp">&lt;</span> <span class="n">Îµ</span> <span class="bp">/</span> <span class="mi">2</span> <span class="bp">+</span> <span class="n">Îµ</span> <span class="bp">/</span> <span class="mi">2</span> <span class="o">:</span> <span class="n">add_lt_add</span> <span class="n">hac</span> <span class="n">hcb</span>
        <span class="bp">...</span> <span class="bp">=</span> <span class="n">Îµ</span> <span class="o">:</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">div_add_div_same</span><span class="o">,</span> <span class="n">add_self_div_two</span><span class="o">],</span>
    <span class="kd">by</span> <span class="n">simpa</span> <span class="o">[</span><span class="n">comp_rel</span><span class="o">],</span>
  <span class="n">symm</span>       <span class="o">:=</span> <span class="n">tendsto_infi.2</span> <span class="bp">$</span> <span class="k">assume</span> <span class="n">Îµ</span><span class="o">,</span> <span class="n">tendsto_infi.2</span> <span class="bp">$</span> <span class="k">assume</span> <span class="n">h</span><span class="o">,</span>
    <span class="n">tendsto_infi'</span> <span class="n">Îµ</span> <span class="bp">$</span> <span class="n">tendsto_infi'</span> <span class="n">h</span> <span class="bp">$</span> <span class="n">tendsto_principal_principal.2</span> <span class="bp">$</span> <span class="kd">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">dist_comm</span><span class="o">]</span> <span class="o">}</span>

<span class="kd">def</span> <span class="n">pseudo_metric_space.of_metrizable</span> <span class="o">{</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">X</span><span class="o">]</span> <span class="o">(</span><span class="n">dist</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">â</span> <span class="n">X</span> <span class="bp">â</span> <span class="n">â</span><span class="o">)</span>
  <span class="o">(</span><span class="n">dist_self</span> <span class="o">:</span> <span class="bp">â</span> <span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span> <span class="n">dist</span> <span class="n">x</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span>
  <span class="o">(</span><span class="n">dist_comm</span> <span class="o">:</span> <span class="bp">â</span> <span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span> <span class="n">dist</span> <span class="n">x</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">dist</span> <span class="n">y</span> <span class="n">x</span><span class="o">)</span>
  <span class="o">(</span><span class="n">dist_triangle</span> <span class="o">:</span> <span class="bp">â</span> <span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span> <span class="n">dist</span> <span class="n">x</span> <span class="n">z</span> <span class="bp">â¤</span> <span class="n">dist</span> <span class="n">x</span> <span class="n">y</span> <span class="bp">+</span> <span class="n">dist</span> <span class="n">y</span> <span class="n">z</span><span class="o">)</span>
  <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="bp">â</span> <span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">X</span><span class="o">,</span> <span class="n">is_open</span> <span class="n">s</span> <span class="bp">â</span> <span class="bp">â</span> <span class="n">x</span> <span class="bp">â</span> <span class="n">s</span><span class="o">,</span> <span class="bp">â</span> <span class="n">Îµ</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">,</span> <span class="bp">â</span> <span class="n">y</span><span class="o">,</span> <span class="n">dist</span> <span class="n">x</span> <span class="n">y</span> <span class="bp">&lt;</span> <span class="n">Îµ</span> <span class="bp">â</span> <span class="n">y</span> <span class="bp">â</span> <span class="n">s</span><span class="o">)</span> <span class="o">:</span>
<span class="n">pseudo_metric_space</span> <span class="n">X</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">dist</span> <span class="o">:=</span> <span class="n">dist</span><span class="o">,</span>
  <span class="n">dist_self</span> <span class="o">:=</span> <span class="bp">Î»</span> <span class="n">x</span><span class="o">,</span> <span class="n">dist_self</span> <span class="n">_</span><span class="o">,</span>
  <span class="n">dist_comm</span> <span class="o">:=</span> <span class="bp">Î»</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="n">dist_comm</span> <span class="n">_</span> <span class="n">_</span><span class="o">,</span>
  <span class="n">dist_triangle</span> <span class="o">:=</span> <span class="bp">Î»</span> <span class="n">x</span> <span class="n">y</span> <span class="n">z</span><span class="o">,</span> <span class="n">dist_triangle</span> <span class="n">_</span> <span class="n">_</span>  <span class="n">_</span><span class="o">,</span>
  <span class="n">to_uniform_space</span> <span class="o">:=</span> <span class="o">{</span> <span class="n">is_open_uniformity</span> <span class="o">:=</span> <span class="kd">begin</span>
    <span class="n">dsimp</span> <span class="n">only</span> <span class="o">[</span><span class="n">uniform_space.core_of_dist</span><span class="o">],</span>
    <span class="n">intros</span> <span class="n">s</span><span class="o">,</span>
    <span class="n">change</span> <span class="n">is_open</span> <span class="n">s</span> <span class="bp">â</span> <span class="n">_</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">H</span> <span class="n">s</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">forall_congr</span><span class="o">,</span> <span class="n">intro</span> <span class="n">x</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">forall_congr</span><span class="o">,</span> <span class="n">intro</span> <span class="n">x_in</span><span class="o">,</span>
    <span class="n">erw</span> <span class="o">(</span><span class="n">has_basis_binfi_principal</span> <span class="n">_</span> <span class="n">nonempty_Ioi</span><span class="o">)</span><span class="bp">.</span><span class="n">mem_iff</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">apply</span> <span class="n">exists_congr</span><span class="o">,</span> <span class="n">intros</span> <span class="n">Îµ</span><span class="o">,</span>
      <span class="n">apply</span> <span class="n">exists_congr</span><span class="o">,</span> <span class="n">intros</span> <span class="n">Îµ_pos</span><span class="o">,</span>
      <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">prod.forall</span><span class="o">,</span> <span class="n">set_of_subset_set_of</span><span class="o">],</span>
      <span class="n">split</span><span class="o">,</span>
      <span class="o">{</span> <span class="n">rintros</span> <span class="n">h</span> <span class="n">_</span> <span class="n">y</span> <span class="n">H</span> <span class="n">rfl</span><span class="o">,</span>
        <span class="n">exact</span> <span class="n">h</span> <span class="n">y</span> <span class="n">H</span> <span class="o">},</span>
      <span class="o">{</span> <span class="n">intros</span> <span class="n">h</span> <span class="n">y</span> <span class="n">hxy</span><span class="o">,</span>
        <span class="n">exact</span> <span class="n">h</span> <span class="n">_</span> <span class="n">_</span> <span class="n">hxy</span> <span class="n">rfl</span> <span class="o">}</span> <span class="o">},</span>
      <span class="o">{</span> <span class="n">exact</span> <span class="bp">Î»</span> <span class="n">r</span> <span class="o">(</span><span class="n">hr</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">r</span><span class="o">)</span> <span class="n">p</span> <span class="o">(</span><span class="n">hp</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">p</span><span class="o">),</span> <span class="o">â¨</span><span class="n">min</span> <span class="n">r</span> <span class="n">p</span><span class="o">,</span> <span class="n">lt_min</span> <span class="n">hr</span> <span class="n">hp</span><span class="o">,</span>
        <span class="bp">Î»</span> <span class="n">x</span> <span class="o">(</span><span class="n">hx</span> <span class="o">:</span> <span class="n">dist</span> <span class="n">_</span> <span class="n">_</span> <span class="bp">&lt;</span> <span class="n">_</span><span class="o">),</span> <span class="n">lt_of_lt_of_le</span> <span class="n">hx</span> <span class="o">(</span><span class="n">min_le_left</span> <span class="n">r</span> <span class="n">p</span><span class="o">),</span>
        <span class="bp">Î»</span> <span class="n">x</span> <span class="o">(</span><span class="n">hx</span> <span class="o">:</span> <span class="n">dist</span> <span class="n">_</span> <span class="n">_</span> <span class="bp">&lt;</span> <span class="n">_</span><span class="o">),</span> <span class="n">lt_of_lt_of_le</span> <span class="n">hx</span> <span class="o">(</span><span class="n">min_le_right</span> <span class="n">r</span> <span class="n">p</span><span class="o">)â©</span> <span class="o">},</span>
      <span class="o">{</span> <span class="n">apply_instance</span> <span class="o">}</span>
    <span class="kd">end</span><span class="o">,</span>
    <span class="bp">..</span><span class="n">uniform_space.core_of_dist</span> <span class="n">dist</span> <span class="n">dist_self</span> <span class="n">dist_comm</span> <span class="n">dist_triangle</span> <span class="o">},</span>
  <span class="n">uniformity_dist</span> <span class="o">:=</span> <span class="n">rfl</span> <span class="o">}</span>


<span class="kd">def</span> <span class="n">better_metric</span> <span class="o">:</span> <span class="n">metric_space</span> <span class="n">C</span><span class="o">(</span><span class="n">X</span><span class="o">,</span><span class="n">Y</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">eq_of_dist_eq_zero</span> <span class="o">:=</span> <span class="kd">begin</span>
    <span class="n">intros</span> <span class="n">x</span> <span class="n">y</span> <span class="n">h</span><span class="o">,</span>
    <span class="n">exact</span> <span class="o">(</span><span class="n">equiv_bounded_of_compact</span> <span class="n">X</span> <span class="n">Y</span><span class="o">)</span><span class="bp">.</span><span class="n">injective</span> <span class="o">(</span><span class="n">eq_of_dist_eq_zero</span> <span class="n">h</span><span class="o">)</span>
  <span class="kd">end</span><span class="o">,</span>
  <span class="bp">..</span><span class="n">pseudo_metric_space.of_metrizable</span> <span class="o">(</span><span class="bp">Î»</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="n">dist</span> <span class="o">(</span><span class="n">equiv_bounded_of_compact</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">x</span><span class="o">)</span>
    <span class="o">(</span><span class="n">equiv_bounded_of_compact</span> <span class="n">X</span> <span class="n">Y</span> <span class="n">y</span><span class="o">))</span> <span class="o">(</span><span class="bp">Î»</span> <span class="n">x</span><span class="o">,</span> <span class="n">dist_self</span> <span class="n">_</span><span class="o">)</span> <span class="o">(</span><span class="bp">Î»</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="n">dist_comm</span> <span class="n">_</span> <span class="n">_</span><span class="o">)</span>
    <span class="o">(</span><span class="bp">Î»</span> <span class="n">x</span> <span class="n">y</span> <span class="n">z</span><span class="o">,</span> <span class="n">dist_triangle</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span><span class="o">)</span> <span class="kd">begin</span>

      <span class="gr">sorry</span>
    <span class="kd">end</span> <span class="o">}</span>

<span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="n">continuous_map.compact_open</span> <span class="o">:</span> <span class="n">topological_space</span> <span class="n">C</span><span class="o">(</span><span class="n">X</span><span class="o">,</span> <span class="n">Y</span><span class="o">))</span> <span class="bp">=</span>
  <span class="o">(</span><span class="bp">@</span><span class="n">metric_space.to_uniform_space'</span> <span class="n">_</span> <span class="o">(</span><span class="n">better_metric</span> <span class="n">X</span> <span class="n">Y</span><span class="o">)</span><span class="bp">.</span><span class="n">to_pseudo_metric_space</span><span class="o">)</span><span class="bp">.</span><span class="n">to_topological_space</span> <span class="o">:=</span>
<span class="n">rfl</span>
</code></pre></div>



<a name="249963426"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/249963426" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#249963426">(Aug 19 2021 at 09:48)</a>:</h4>
<p>Note that the actual content about the compact open topology is still <code>sorry</code> but the goal is no longer a big mess.</p>



<a name="249963484"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/249963484" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#249963484">(Aug 19 2021 at 09:48)</a>:</h4>
<p>Yes I see that. This is marvellous!</p>



<a name="249963535"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/249963535" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#249963535">(Aug 19 2021 at 09:49)</a>:</h4>
<p>Now it's independent from the internals of our implementation of uniform and metric spaces.</p>



<a name="249963586"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/249963586" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#249963586">(Aug 19 2021 at 09:49)</a>:</h4>
<p>Right.</p>



<a name="249963646"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/249963646" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#249963646">(Aug 19 2021 at 09:50)</a>:</h4>
<p>From a quick scan it looks like <code>uniform_space.core_of_dist</code> and <code>pseudo_metric_space.of_metrizable</code> deserve to be PR'd on their own, right?</p>



<a name="249963741"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/249963741" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#249963741">(Aug 19 2021 at 09:51)</a>:</h4>
<p>Sure. The first one needs to be put right above <a href="https://leanprover-community.github.io/mathlib_docs/find/uniform_space_of_dist">docs#uniform_space_of_dist</a> and used there</p>



<a name="249963924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/249963924" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#249963924">(Aug 19 2021 at 09:53)</a>:</h4>
<p>I'll PR that right away</p>



<a name="249964010"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/249964010" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#249964010">(Aug 19 2021 at 09:54)</a>:</h4>
<p>Excellent! I'll resume learning about convexity for now :-)</p>



<a name="249964919"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/249964919" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#249964919">(Aug 19 2021 at 10:04)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/8759">#8759</a></p>



<a name="251696336"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/251696336" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#251696336">(Sep 02 2021 at 10:49)</a>:</h4>
<p>I returned to this yesterday. Despite the fact that you made it easy to establish the metrisability while ignoring the uniform space structure, I decided I wanted to prove the uniform structure was also compatible (and keep everything defeq).</p>



<a name="251696483"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/251696483" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#251696483">(Sep 02 2021 at 10:51)</a>:</h4>
<p>I started like this:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">topology.compact_open</span>

<span class="n">open_locale</span> <span class="n">filter</span> <span class="n">uniformity</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">Î±</span> <span class="n">Î²</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">Î±</span><span class="o">]</span> <span class="o">[</span><span class="n">uniform_space</span> <span class="n">Î²</span><span class="o">]</span>

<span class="kd">instance</span> <span class="o">:</span> <span class="n">uniform_space</span> <span class="n">C</span><span class="o">(</span><span class="n">Î±</span><span class="o">,</span> <span class="n">Î²</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">uniformity</span> <span class="o">:=</span> <span class="bp">â¨</span> <span class="o">(</span><span class="n">K</span> <span class="o">:</span> <span class="n">set</span> <span class="n">Î±</span><span class="o">)</span> <span class="o">(</span><span class="n">hK</span> <span class="o">:</span> <span class="n">is_compact</span> <span class="n">K</span><span class="o">)</span> <span class="o">(</span><span class="n">V</span> <span class="bp">â</span> <span class="bp">ð¤</span> <span class="n">Î²</span><span class="o">),</span>
                  <span class="bp">ð</span> <span class="o">{</span> <span class="n">p</span> <span class="o">:</span> <span class="n">C</span><span class="o">(</span><span class="n">Î±</span><span class="o">,</span> <span class="n">Î²</span><span class="o">)</span> <span class="bp">Ã</span> <span class="n">C</span><span class="o">(</span><span class="n">Î±</span><span class="o">,</span> <span class="n">Î²</span><span class="o">)</span> <span class="bp">|</span> <span class="bp">â</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">Î±</span><span class="o">),</span> <span class="o">(</span><span class="n">p.1</span> <span class="n">x</span><span class="o">,</span> <span class="n">p.2</span> <span class="n">x</span><span class="o">)</span> <span class="bp">â</span> <span class="n">V</span> <span class="o">},</span>
  <span class="n">refl</span> <span class="o">:=</span> <span class="gr">sorry</span><span class="o">,</span> <span class="c1">-- trivial</span>
  <span class="n">symm</span> <span class="o">:=</span> <span class="gr">sorry</span><span class="o">,</span> <span class="c1">-- trivial</span>
  <span class="n">comp</span> <span class="o">:=</span> <span class="gr">sorry</span><span class="o">,</span> <span class="c1">-- trivial</span>
  <span class="n">is_open_uniformity</span> <span class="o">:=</span> <span class="gr">sorry</span><span class="o">,</span> <span class="c">/-</span><span class="cm"> some work needed -/</span> <span class="o">}</span>
</code></pre></div>
<p>(which hopefully is correct) and then decided the key to <code>is_open_uniformity</code> was a corollary of the Lebesgue number lemma so I've created <a href="https://github.com/leanprover-community/mathlib/issues/8963">#8963</a> .</p>



<a name="251696524"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/251696524" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#251696524">(Sep 02 2021 at 10:51)</a>:</h4>
<p>I only wanted to give this a day at most so I'm going to pause again and resume in a week or so.</p>



<a name="252100790"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/252100790" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#252100790">(Sep 05 2021 at 20:45)</a>:</h4>
<p>Can this uniform space structure be expressed as the Sup or Inf (I'm not sure which way the order goes) of a family of uniform space structures, one for each compact set <code>K</code> in <code>Î±</code>, which are respectively the pullbacks to <code>C(Î±, Î²)</code> from <code>Î± â Î²</code> of a uniform space structure on <code>Î± â Î²</code>? Maybe the pi-type uniform structure,</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">uniform_convergence_on</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">Î±</span><span class="o">)</span> <span class="o">:</span> <span class="n">uniform_space</span> <span class="o">(</span><span class="n">Î±</span> <span class="bp">â</span> <span class="n">Î²</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">uniform_space.of_core</span> <span class="o">(</span><span class="bp">â¨</span> <span class="n">a</span> <span class="bp">â</span> <span class="n">s</span><span class="o">,</span> <span class="n">uniform_space.comap</span> <span class="o">(</span><span class="bp">Î»</span> <span class="n">f</span> <span class="o">:</span> <span class="o">(</span><span class="n">Î±</span> <span class="bp">â</span> <span class="n">Î²</span><span class="o">),</span> <span class="n">f</span> <span class="n">a</span><span class="o">)</span> <span class="n">_i</span><span class="o">)</span><span class="bp">.</span><span class="n">to_core</span>
</code></pre></div>
<p>(edit: or on second thoughts maybe some other uniform structure, but the point remains)</p>



<a name="252100982"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/252100982" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#252100982">(Sep 05 2021 at 20:48)</a>:</h4>
<p>By definition if one takes <code>K = set.univ</code> this is really the pi uniform space structure.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">uniform_convergence_on</span> <span class="n">set.univ</span> <span class="o">:</span> <span class="n">uniform_space</span> <span class="o">(</span><span class="n">Î±</span> <span class="bp">â</span> <span class="n">Î²</span><span class="o">))</span> <span class="bp">=</span> <span class="k">Pi</span><span class="bp">.</span><span class="n">uniform_space</span> <span class="o">(</span><span class="bp">Î»</span> <span class="n">a</span> <span class="o">:</span> <span class="n">Î±</span><span class="o">,</span> <span class="n">Î²</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">rfl</span>
</code></pre></div>



<a name="252101385"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/252101385" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#252101385">(Sep 05 2021 at 20:56)</a>:</h4>
<p>Also, is there a theorem somewhere in mathlib relating the compact-open topology to <code>tendsto_locally_uniformly</code>?  Something like this, though maybe I'm missing some conditions:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">topology.uniform_space.uniform_convergence</span>
<span class="kn">import</span> <span class="n">topology.compact_open</span>

<span class="n">open_locale</span> <span class="n">topological_space</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">Î¹</span> <span class="n">Î±</span> <span class="n">Î²</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">Î±</span><span class="o">]</span> <span class="o">[</span><span class="n">uniform_space</span> <span class="n">Î²</span><span class="o">]</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="n">Î¹</span> <span class="bp">â</span> <span class="n">C</span><span class="o">(</span><span class="n">Î±</span><span class="o">,</span> <span class="n">Î²</span><span class="o">))</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">C</span><span class="o">(</span><span class="n">Î±</span><span class="o">,</span> <span class="n">Î²</span><span class="o">))</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">filter</span> <span class="n">Î¹</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">tendsto_locally_uniformly</span> <span class="o">(</span><span class="bp">Î»</span> <span class="n">i</span><span class="o">,</span> <span class="n">F</span> <span class="n">i</span><span class="o">)</span> <span class="n">f</span> <span class="n">p</span> <span class="bp">â</span> <span class="n">filter.tendsto</span> <span class="n">F</span> <span class="n">p</span> <span class="o">(</span><span class="bp">ð</span> <span class="n">f</span><span class="o">)</span> <span class="o">:=</span>
<span class="gr">sorry</span>
</code></pre></div>



<a name="252101965"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/252101965" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#252101965">(Sep 05 2021 at 21:07)</a>:</h4>
<p>[just a comment on the ordering: to turn a poset into a category one turns <code>a&lt;=b</code> into a map <code>a -&gt; b</code> and this is the "philosophy" in general; by which I mean that for two uniform structures U1 and U2 on a type X, it's set up so that U1 &lt;= U2 iff id : (X, U1) -&gt; (X,U2) is continuous. I think this is the logic; it's how I remember the ordering for topological spaces.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">topology.uniform_space.basic</span>

<span class="kd">example</span> <span class="o">{</span><span class="n">Î±</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">uâ</span> <span class="n">uâ</span> <span class="o">:</span> <span class="n">uniform_space</span> <span class="n">Î±</span><span class="o">}</span> <span class="o">:</span> <span class="n">uâ</span> <span class="bp">â¤</span> <span class="n">uâ</span> <span class="bp">â</span> <span class="bp">@</span><span class="n">uniform_continuous</span> <span class="n">Î±</span> <span class="n">Î±</span> <span class="n">uâ</span> <span class="n">uâ</span> <span class="n">id</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">uniform_continuous_iff</span><span class="o">,</span> <span class="n">uniform_space_comap_id</span><span class="o">],</span>
  <span class="n">refl</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>
<p>]</p>



<a name="252104390"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/252104390" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#252104390">(Sep 05 2021 at 21:55)</a>:</h4>
<p>To reframe my main question more succinctly:</p>
<ul>
<li>is there a family of topologies <code>uniform_convergence_on K</code> on <code>C(Î±, Î²)</code>, parametrized by the compact sets <code>K</code> of <code>Î±</code>, such that the compact-open topology is the infimum of these topologies?</li>
<li>if so, and if moreover <code>Î²</code> is a uniform space, does the topology <code>uniform_convergence_on K</code> come from some natural uniform structure?</li>
</ul>



<a name="252106690"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/252106690" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#252106690">(Sep 05 2021 at 22:38)</a>:</h4>
<p>Dumb questions: does the functor from uniform spaces to topological spaces preserve Infs or Sups? I'm assuming the compact open topology isn't in general coming from a compact open uniformity</p>



<a name="252106826"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/252106826" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#252106826">(Sep 05 2021 at 22:41)</a>:</h4>
<p>I have no idea, thinking about uniform spaces makes my head hurt, but I thought that this</p>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology/near/252106690">said</a>:</p>
<blockquote>
<p>the compact open topology ... coming from a compact open uniformity</p>
</blockquote>
<p>is what Oliver was doing <a href="#narrow/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology/near/251696483">here</a>.</p>



<a name="252108064"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/252108064" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#252108064">(Sep 05 2021 at 23:05)</a>:</h4>
<p>Aah -- so we are assuming that the target is a uniform space and not just a topological space?</p>



<a name="252108153"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/252108153" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#252108153">(Sep 05 2021 at 23:07)</a>:</h4>
<p>I am more interested in the uniform-space-target case.  But maybe this part</p>
<p><span class="user-mention silent" data-user-id="260507">Heather Macbeth</span> <a href="#narrow/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology/near/252104390">said</a>:</p>
<blockquote>
<ul>
<li>is there a family of topologies <code>uniform_convergence_on K</code> on <code>C(Î±, Î²)</code>, parametrized by the compact sets <code>K</code> of <code>Î±</code>, such that the compact-open topology is the infimum of these topologies?</li>
</ul>
</blockquote>
<p>is true even if the target is just a topological space?</p>



<a name="252108626"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/252108626" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#252108626">(Sep 05 2021 at 23:16)</a>:</h4>
<p>[Another irrelevant point: my understanding is that for general topological spaces the compact open topology isn't quite as nice as one would help, i.e. it doesn't give a good "internal hom" structure on the category of topological spaces (in contrast to the category of abelian groups, where Hom(A,B) is naturally an abelian group and this abelian structure plays well with everything) and this was perhaps one of the things which motivates the study of condensed sets instead.]</p>



<a name="252108723"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/252108723" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#252108723">(Sep 05 2021 at 23:18)</a>:</h4>
<p>[now back at Lean] <a href="https://leanprover-community.github.io/mathlib_docs/find/to_topological_space_Inf">docs#to_topological_space_Inf</a> says that Infs for uniform spaces and topological spaces agree.</p>



<a name="252109477"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/252109477" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#252109477">(Sep 05 2021 at 23:33)</a>:</h4>
<p>I think it is formally true (i.e. true by definition, at least by Wikipedia's definition) that for K compact in X, if T(K) is the coarsest topology on C(X,Y) such that for all U in Y open, the set of f in C(X,Y) such that f(K) \subseteq U is open, then the compact open topology on C(X,Y) is the topology generated by all of the T(K) as K varies, i.e. the Inf of these topologies in the mathlib sense. The reason is simply that the compact open topology on C(X,Y) is, if my understanding is correct, the coarsest topology (fewest open sets) such that V(K,U) is open for all K compact and U open, where V(K,U) is the f such that f(K) \subseteq U.</p>



<a name="252109860"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/252109860" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#252109860">(Sep 05 2021 at 23:40)</a>:</h4>
<p><span class="user-mention silent" data-user-id="260507">Heather Macbeth</span> <a href="#narrow/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology/near/252101385">said</a>:</p>
<blockquote>
<p>Also, is there a theorem somewhere in mathlib relating the compact-open topology to <code>tendsto_locally_uniformly</code>?  Something like this, though maybe I'm missing some conditions:</p>
<p><div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">topology.uniform_space.uniform_convergence</span>
<span class="kn">import</span> <span class="n">topology.compact_open</span>

<span class="n">open_locale</span> <span class="n">topological_space</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">Î¹</span> <span class="n">Î±</span> <span class="n">Î²</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">Î±</span><span class="o">]</span> <span class="o">[</span><span class="n">uniform_space</span> <span class="n">Î²</span><span class="o">]</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="n">Î¹</span> <span class="bp">â</span> <span class="n">C</span><span class="o">(</span><span class="n">Î±</span><span class="o">,</span> <span class="n">Î²</span><span class="o">))</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">C</span><span class="o">(</span><span class="n">Î±</span><span class="o">,</span> <span class="n">Î²</span><span class="o">))</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">filter</span> <span class="n">Î¹</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">tendsto_locally_uniformly</span> <span class="o">(</span><span class="bp">Î»</span> <span class="n">i</span><span class="o">,</span> <span class="n">F</span> <span class="n">i</span><span class="o">)</span> <span class="n">f</span> <span class="n">p</span> <span class="bp">â</span> <span class="n">filter.tendsto</span> <span class="n">F</span> <span class="n">p</span> <span class="o">(</span><span class="bp">ð</span> <span class="n">f</span><span class="o">)</span> <span class="o">:=</span>
<span class="gr">sorry</span>
</code></pre></div><br>
</p>
</blockquote>
<p>This seems to be pretty much the content of the second paragraph of <a href="https://en.wikipedia.org/wiki/Compact-open_topology">the Wikipedia page on the compact open topology</a> (and there's also the implicit claim that if beta is not assumed to be a uniform space then this is false -- edit: actually I guess if beta isn't a uniform space the claim doesn't even make sense).</p>



<a name="252118373"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/252118373" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#252118373">(Sep 06 2021 at 02:23)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology/near/252109860">said</a>:</p>
<blockquote>
<p>This seems to be pretty much the content of the second paragraph of <a href="https://en.wikipedia.org/wiki/Compact-open_topology">the Wikipedia page on the compact open topology</a> (and there's also the implicit claim that if beta is not assumed to be a uniform space then this is false -- edit: actually I guess if beta isn't a uniform space the claim doesn't even make sense).</p>
</blockquote>
<p>But it's not in mathlib -- is that right?</p>



<a name="252146710"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/252146710" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#252146710">(Sep 06 2021 at 08:59)</a>:</h4>
<p>Correct, this is not in Mathlib. Indeed a regex search for <code>import.*compact_open</code> shows nothing imports <code>topology/compact_open.lean</code> so the only things Mathlib knows about the CO topology are in this file.</p>



<a name="252146993"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/252146993" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#252146993">(Sep 06 2021 at 09:01)</a>:</h4>
<p><span class="user-mention silent" data-user-id="260507">Heather Macbeth</span> <a href="#narrow/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology/near/252108153">said</a>:</p>
<blockquote>
<p>I am more interested in the uniform-space-target case.  But maybe this part</p>
<p><span class="user-mention silent" data-user-id="260507">Heather Macbeth</span> <a href="#narrow/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology/near/252104390">said</a>:</p>
<blockquote>
<ul>
<li>is there a family of topologies <code>uniform_convergence_on K</code> on <code>C(Î±, Î²)</code>, parametrized by the compact sets <code>K</code> of <code>Î±</code>, such that the compact-open topology is the infimum of these topologies?</li>
</ul>
</blockquote>
<p>is true even if the target is just a topological space?</p>
</blockquote>
<p>I think I must be parsing this paragraph incorrectly because I cannot make sense of <code>uniform_convergence_on K</code> without assuming <code>Î²</code> carries a uniform space structure: haven't you defined<code>uniform_convergence_on</code> using <code>uniform_space.comap</code>?</p>



<a name="252147758"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/252147758" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#252147758">(Sep 06 2021 at 09:08)</a>:</h4>
<p>In any case I can well imagine that once we start developing the CO topology / uniform space structure further, we will find it useful provide these characterisations of them (e.g., the coarsest structure such that property X holds). For now I just want to actually get the definition of the uniform structure on <code>C(Î±, Î²)</code> in place (when <code>Î²</code> is uniform).</p>



<a name="252148360"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/252148360" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#252148360">(Sep 06 2021 at 09:13)</a>:</h4>
<p>With regard to the connection with Pi types, the compact open topology can be defined on the space of all maps <code>Î± â Î²</code> and then CO topology on <code>C(Î±, Î²)</code> arises as the subspace topology. Mathematically it seems a bit ridiculous to topologise <code>Î± â Î²</code> but I can imagine it __might__ be useful to define the compact open topology on <code>C(Î±, Î²)</code> this way because it might allow a bit more flexibility when formalising. (E.g., if we have a subset of maps <code>Î± â Î²</code> that are continuous but not definitionally a subset of <code>C(Î±, Î²)</code>.)</p>



<a name="252148535"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/252148535" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#252148535">(Sep 06 2021 at 09:15)</a>:</h4>
<p>Anyway, none of the above answers your interesting questions but I claim the first thing to do is to fill in the proof of <code>is_open_uniformity</code> <a href="#narrow/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology/near/251696483">here</a> and I claim the first thing to do for that is to merge <a href="https://github.com/leanprover-community/mathlib/issues/8963">#8963</a></p>



<a name="252149060"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/252149060" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#252149060">(Sep 06 2021 at 09:20)</a>:</h4>
<p>Depending on how much progress I make with my primary goal this week, I'll try to return to this toward the end of the week.</p>



<a name="252195278"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/252195278" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#252195278">(Sep 06 2021 at 16:03)</a>:</h4>
<p><span class="user-mention silent" data-user-id="240862">Oliver Nash</span> <a href="#narrow/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology/near/252148360">said</a>:</p>
<blockquote>
<p>Mathematically it seems a bit ridiculous to topologise <code>Î± â Î²</code></p>
</blockquote>
<p>In fact, it already bears a topology, right?  The topology of pointwise convergence, <a href="https://leanprover-community.github.io/mathlib_docs/find/Pi.topological_space">docs#Pi.topological_space</a>.  I was fighting against this before in a couple of experiments.</p>



<a name="252195570"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/252195570" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#252195570">(Sep 06 2021 at 16:06)</a>:</h4>
<p><span class="user-mention silent" data-user-id="240862">Oliver Nash</span> <a href="#narrow/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology/near/252146993">said</a>:</p>
<blockquote>
<p>I think I must be parsing this paragraph incorrectly because I cannot make sense of <code>uniform_convergence_on K</code> without assuming <code>Î²</code> carries a uniform space structure: haven't you defined<code>uniform_convergence_on</code> using <code>uniform_space.comap</code>?</p>
</blockquote>
<p>Indeed I had a second idea here, different from the <code>comap</code> stuff, which I didn't write out explicitly.  I was wondering if, by analogy with <a href="https://leanprover-community.github.io/mathlib_docs/find/compact_open/src">src#compact_open</a>, we could define a family of topologies which I will temporarily call <code>uniform_convergence_on K</code> (but this is a bad name since it doesn't require a uniform structure):</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">uniform_convergence_on</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">Î±</span><span class="o">)</span> <span class="o">:</span> <span class="n">topological_space</span> <span class="n">C</span><span class="o">(</span><span class="n">Î±</span><span class="o">,</span> <span class="n">Î²</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">topological_space.generate_from</span>
  <span class="o">{</span><span class="n">m</span> <span class="bp">|</span> <span class="bp">â</span> <span class="o">(</span><span class="n">u</span> <span class="o">:</span> <span class="n">set</span> <span class="n">Î²</span><span class="o">)</span> <span class="o">(</span><span class="n">hu</span> <span class="o">:</span> <span class="n">is_open</span> <span class="n">u</span><span class="o">),</span> <span class="n">m</span> <span class="bp">=</span> <span class="n">compact_open.gen</span> <span class="n">s</span> <span class="n">u</span><span class="o">}</span>
</code></pre></div>



<a name="252195633"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/252195633" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#252195633">(Sep 06 2021 at 16:07)</a>:</h4>
<p>And if, then, it would be true that</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="n">continuous_map.compact_open</span> <span class="o">:</span> <span class="n">topological_space</span> <span class="n">C</span><span class="o">(</span><span class="n">Î±</span><span class="o">,</span> <span class="n">Î²</span><span class="o">))</span>
  <span class="bp">=</span> <span class="bp">â¨</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">Î±</span><span class="o">)</span> <span class="o">(</span><span class="n">hs</span> <span class="o">:</span> <span class="n">is_compact</span> <span class="n">s</span><span class="o">),</span> <span class="n">uniform_convergence_on</span> <span class="n">Î²</span> <span class="n">s</span> <span class="o">:=</span>
<span class="gr">sorry</span>
</code></pre></div>



<a name="252195710"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/252195710" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#252195710">(Sep 06 2021 at 16:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology/near/252109477">said</a>:</p>
<blockquote>
<p>I think it is formally true (i.e. true by definition, at least by Wikipedia's definition) that for K compact in X, if T(K) is the coarsest topology on C(X,Y) such that for all U in Y open, the set of f in C(X,Y) such that f(K) \subseteq U is open, then the compact open topology on C(X,Y) is the topology generated by all of the T(K) as K varies, i.e. the Inf of these topologies in the mathlib sense</p>
</blockquote>
<p>This is effectively defining <code>uniform_convergence_on K</code> as the topology <code>T(K)</code> described here by Kevin.</p>



<a name="252195815"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/252195815" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#252195815">(Sep 06 2021 at 16:09)</a>:</h4>
<p>Then, instead of uniformizing <code>compact_open</code> directly, it would suffice for you to uniformize each of the individual topologies <code>uniform_convergence_on K</code>.</p>



<a name="252196147"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/252196147" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#252196147">(Sep 06 2021 at 16:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="260507">Heather Macbeth</span> <a href="#narrow/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology/near/252195633">said</a>:</p>
<blockquote>
<p>And if, then, it would be true that</p>
<p><div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="n">continuous_map.compact_open</span> <span class="o">:</span> <span class="n">topological_space</span> <span class="n">C</span><span class="o">(</span><span class="n">Î±</span><span class="o">,</span> <span class="n">Î²</span><span class="o">))</span>
  <span class="bp">=</span> <span class="bp">â¨</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">Î±</span><span class="o">)</span> <span class="o">(</span><span class="n">hs</span> <span class="o">:</span> <span class="n">is_compact</span> <span class="n">s</span><span class="o">),</span> <span class="n">uniform_convergence_on</span> <span class="n">Î²</span> <span class="n">s</span> <span class="o">:=</span>
<span class="gr">sorry</span>
</code></pre></div><br>
</p>
</blockquote>
<p>Right I understand now. Yes, I agree that will probably be useful quite soon once one starts proving things with the compact-open topology.</p>



<a name="252196282"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/252196282" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#252196282">(Sep 06 2021 at 16:14)</a>:</h4>
<p>For me, the motivation is that I would like to relate the topology <code>compact_open</code> to the family of pseudo-metric space structures</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">sup_metric_on</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">Î±</span><span class="o">)</span> <span class="o">:</span> <span class="n">has_dist</span> <span class="n">C</span><span class="o">(</span><span class="n">Î±</span><span class="o">,</span> <span class="n">Î²</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">â¨</span><span class="bp">Î»</span><span class="n">f</span> <span class="n">g</span><span class="o">,</span> <span class="n">Inf</span> <span class="o">{</span><span class="n">C</span> <span class="bp">|</span> <span class="mi">0</span> <span class="bp">â¤</span> <span class="n">C</span> <span class="bp">â§</span> <span class="bp">â</span> <span class="n">x</span> <span class="bp">â</span> <span class="n">s</span><span class="o">,</span> <span class="n">dist</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="n">x</span><span class="o">)</span> <span class="bp">â¤</span> <span class="n">C</span><span class="o">}â©</span>
</code></pre></div>
<p>(pseudo-metric because functions which agree on <code>s</code> are at distance 0 from each other).  I was hoping that it would be true that <code>compact_open</code> is the Inf over all compact <code>K</code> of the topologies associated to <code>sup_metric_on</code>.</p>



<a name="252196289"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/252196289" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#252196289">(Sep 06 2021 at 16:14)</a>:</h4>
<p>If I manage to get to this later in the week, I'll consider this approach.</p>



<a name="252196676"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/252196676" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#252196676">(Sep 06 2021 at 16:18)</a>:</h4>
<p><span class="user-mention silent" data-user-id="260507">Heather Macbeth</span> <a href="#narrow/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology/near/252196282">said</a>:</p>
<blockquote>
<p>For me, the motivation is that I would like to relate the topology <code>compact_open</code> to the family of pseudo-metric space structures</p>
<p><div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">sup_metric_on</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">Î±</span><span class="o">)</span> <span class="o">:</span> <span class="n">has_dist</span> <span class="n">C</span><span class="o">(</span><span class="n">Î±</span><span class="o">,</span> <span class="n">Î²</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">â¨</span><span class="bp">Î»</span><span class="n">f</span> <span class="n">g</span><span class="o">,</span> <span class="n">Inf</span> <span class="o">{</span><span class="n">C</span> <span class="bp">|</span> <span class="mi">0</span> <span class="bp">â¤</span> <span class="n">C</span> <span class="bp">â§</span> <span class="bp">â</span> <span class="n">x</span> <span class="bp">â</span> <span class="n">s</span><span class="o">,</span> <span class="n">dist</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="n">x</span><span class="o">)</span> <span class="bp">â¤</span> <span class="n">C</span><span class="o">}â©</span>
</code></pre></div><br>
</p>
</blockquote>
<p>Do you want <code>Î±</code> (or <code>s</code>) to be compact here? Don't you also have the problem that functions which are unboundedly far away from each other will be distance 0 with this definition?</p>



<a name="252196769"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/252196769" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#252196769">(Sep 06 2021 at 16:19)</a>:</h4>
<p>You're right, I was thinking <code>s</code> should be compact.</p>



<a name="252196886"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/252196886" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#252196886">(Sep 06 2021 at 16:20)</a>:</h4>
<p>OK so in that case you essentially want the exact thing that caused me to start this thread, except that you also want the <code>_on</code> version because you have <code>s</code>.</p>



<a name="252196974"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/252196974" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#252196974">(Sep 06 2021 at 16:21)</a>:</h4>
<p>I mean we have <a href="https://leanprover-community.github.io/mathlib_docs/find/continuous_map.metric_space">docs#continuous_map.metric_space</a> already and it's metric is (indirectly) what you have defined because it comes from <a href="https://leanprover-community.github.io/mathlib_docs/find/bounded_continuous_function.has_dist">docs#bounded_continuous_function.has_dist</a></p>



<a name="252197090"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/252197090" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#252197090">(Sep 06 2021 at 16:22)</a>:</h4>
<p>Yes! Although I don't care about putting a literal (somewhat arbitrary) metric compatible with the compact-open topology for a general (not necessarily compact) domain, instead I care about connecting it (maybe as the Inf) to a certain family of canonical pseudo-metrics.</p>



<a name="252197188"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/252197188" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#252197188">(Sep 06 2021 at 16:23)</a>:</h4>
<p>And indeed, if this all works out, we probably want to refactor <a href="https://leanprover-community.github.io/mathlib_docs/find/continuous_map.metric_space">docs#continuous_map.metric_space</a>  to be a special case of this construction, the case when the whole space <code>Î±</code> is compact.</p>



<a name="252197323"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/252197323" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#252197323">(Sep 06 2021 at 16:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="260507">Heather Macbeth</span> <a href="#narrow/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology/near/252197188">said</a>:</p>
<blockquote>
<p>And indeed, if this all works out, we probably want to refactor <a href="https://leanprover-community.github.io/mathlib_docs/find/continuous_map.metric_space">docs#continuous_map.metric_space</a>  to be a special case of this construction, the case when the whole space <code>Î±</code> is compact.</p>
</blockquote>
<p>I plan to do this. I don't think it would be hard; it's just prioritised behind a bunch of other stuff. Maybe you'll get there before me ;-)</p>



<a name="252197532"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/252197532" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#252197532">(Sep 06 2021 at 16:27)</a>:</h4>
<p>This is all in the service of outlining what should replace <span class="user-mention" data-user-id="389019">@Chris Birkbeck</span>'s version of the Weierstrass M-test ... maybe I got a bit distracted :)</p>



<a name="252197666"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/252197666" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#252197666">(Sep 06 2021 at 16:29)</a>:</h4>
<p>Likewise I was lead here from a distant land. I think I understand your point of view now. I think it's totally achievable and just requires a couple of solid days.</p>



<a name="252198603"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/252198603" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#252198603">(Sep 06 2021 at 16:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="260507">Heather Macbeth</span> <a href="#narrow/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology/near/252197532">said</a>:</p>
<blockquote>
<p>This is all in the service of outlining what should replace <span class="user-mention silent" data-user-id="389019">Chris Birkbeck</span>'s version of the Weierstrass M-test ... maybe I got a bit distracted :)</p>
</blockquote>
<p>Hmm yes, maybe it's best I wait a bit  :)</p>



<a name="252235641"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/252235641" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#252235641">(Sep 07 2021 at 00:22)</a>:</h4>
<p><span class="user-mention" data-user-id="240862">@Oliver Nash</span> I've made <a href="https://github.com/leanprover-community/mathlib/issues/9046">#9046</a>, expressing the compact-open topology as an Inf of topologies.  The statement looks like</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="sd">/-- The compact-open topology is equal to the infimum, as `s` varies over the compact subsets of</span>
<span class="sd">`Î±`, of the topologies of uniform convergence on `s`. -/</span>
<span class="kd">lemma</span> <span class="n">compact_open_eq_Inf_uniform_on</span> <span class="o">:</span>
  <span class="n">continuous_map.compact_open</span> <span class="bp">=</span> <span class="bp">â¨</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">Î±</span><span class="o">)</span> <span class="o">(</span><span class="n">hs</span> <span class="o">:</span> <span class="n">is_compact</span> <span class="n">s</span><span class="o">),</span> <span class="n">uniform_on</span> <span class="n">Î²</span> <span class="n">s</span> <span class="o">:=</span>
</code></pre></div>
<p>Let me solicit opinions on two points:</p>
<ul>
<li>a better name for what I have called <code>uniform on Î² s</code>, i.e. a certain family of topologies on <code>C(Î±, Î²)</code>, parametrized by <code>s : set Î±</code> ... if <code>Î²</code> is a uniform space and <code>s</code> is compact then this topology should be the topology of uniform convergence on <code>s</code>, but <code>uniform_on</code> seems like a bad name because it doesn't require a uniform structure on <code>Î²</code></li>
<li>should I actually redefine <code>compact_open</code> to this <code>Inf</code> definition, or keep the old definition?</li>
</ul>



<a name="252235821"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/252235821" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#252235821">(Sep 07 2021 at 00:25)</a>:</h4>
<p>Maybe <span class="user-mention" data-user-id="110032">@Reid Barton</span> is the right person to ask.</p>



<a name="252260005"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/252260005" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#252260005">(Sep 07 2021 at 06:59)</a>:</h4>
<p>Oh wow, thanks <span class="user-mention" data-user-id="260507">@Heather Macbeth</span> , really nice work. I'll comment on the PR and thanks!</p>



<a name="259114305"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/259114305" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#259114305">(Oct 26 2021 at 15:29)</a>:</h4>
<p><span class="user-mention" data-user-id="260507">@Heather Macbeth</span> I finally came back to the problem of proving that the topology of compact convergence (when the target is a uniform space) is the same as the compact-open topology.</p>



<a name="259114366"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/259114366" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#259114366">(Oct 26 2021 at 15:29)</a>:</h4>
<p>Don't celebrate too soon because I'm not done yet but I did get this far:</p>



<a name="259114393"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/259114393" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#259114393">(Oct 26 2021 at 15:29)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">topology.compact_open</span>
<span class="kn">import</span> <span class="n">topology.uniform_space.basic</span>

<span class="kd">universes</span> <span class="n">uâ</span> <span class="n">uâ</span>

<span class="n">open_locale</span> <span class="n">filter</span> <span class="n">uniformity</span> <span class="n">topological_space</span>
<span class="kn">open</span> <span class="n">uniform_space</span> <span class="n">set</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">Î±</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">uâ</span><span class="o">}</span> <span class="o">{</span><span class="n">Î²</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">uâ</span><span class="o">}</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">Î±</span><span class="o">]</span> <span class="o">[</span><span class="n">uniform_space</span> <span class="n">Î²</span><span class="o">]</span>
<span class="kd">variables</span> <span class="o">(</span><span class="n">K</span> <span class="o">:</span> <span class="n">set</span> <span class="n">Î±</span><span class="o">)</span> <span class="o">(</span><span class="n">V</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">Î²</span> <span class="bp">Ã</span> <span class="n">Î²</span><span class="o">))</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">C</span><span class="o">(</span><span class="n">Î±</span><span class="o">,</span> <span class="n">Î²</span><span class="o">))</span>

<span class="sd">/-- A subbase for the topology of compact convergence. -/</span>
<span class="kd">def</span> <span class="n">uniform_gen</span> <span class="o">:</span> <span class="n">set</span> <span class="n">C</span><span class="o">(</span><span class="n">Î±</span><span class="o">,</span> <span class="n">Î²</span><span class="o">)</span> <span class="o">:=</span> <span class="o">{</span><span class="n">g</span> <span class="bp">|</span> <span class="bp">â</span> <span class="o">(</span><span class="n">x</span> <span class="bp">â</span> <span class="n">K</span><span class="o">),</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">,</span> <span class="n">g</span> <span class="n">x</span><span class="o">)</span> <span class="bp">â</span> <span class="n">V</span> <span class="o">}</span>

<span class="sd">/-- The topology of compact convergence. I claim this topology is induced by a uniform structure,</span>
<span class="sd">defined below. -/</span>
<span class="kd">def</span> <span class="n">compact_convergence_topology</span> <span class="o">:</span> <span class="n">topological_space</span> <span class="n">C</span><span class="o">(</span><span class="n">Î±</span><span class="o">,</span> <span class="n">Î²</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">topological_space.generate_from</span>
  <span class="o">{</span><span class="n">m</span> <span class="bp">|</span> <span class="bp">â</span> <span class="o">(</span><span class="n">K</span> <span class="o">:</span> <span class="n">set</span> <span class="n">Î±</span><span class="o">)</span> <span class="o">(</span><span class="n">hK</span> <span class="o">:</span> <span class="n">is_compact</span> <span class="n">K</span><span class="o">)</span> <span class="o">(</span><span class="n">V</span> <span class="bp">â</span> <span class="bp">ð¤</span> <span class="n">Î²</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">C</span><span class="o">(</span><span class="n">Î±</span><span class="o">,</span> <span class="n">Î²</span><span class="o">)),</span> <span class="n">m</span> <span class="bp">=</span> <span class="n">uniform_gen</span> <span class="n">K</span> <span class="n">V</span> <span class="n">f</span> <span class="o">}</span>

<span class="kd">lemma</span> <span class="n">mem_uniform_gen_self</span> <span class="o">(</span><span class="n">hV</span> <span class="o">:</span> <span class="n">V</span> <span class="bp">â</span> <span class="bp">ð¤</span> <span class="n">Î²</span><span class="o">)</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">â</span> <span class="n">uniform_gen</span> <span class="n">K</span> <span class="n">V</span> <span class="n">f</span> <span class="o">:=</span> <span class="bp">Î»</span> <span class="n">x</span> <span class="n">hx</span><span class="o">,</span> <span class="n">refl_mem_uniformity</span> <span class="n">hV</span>

<span class="sd">/-- This should be sufficient to show we actually have a neighbourhood basis. -/</span>
<span class="kd">lemma</span> <span class="n">uniform_gen_nhd_basis</span> <span class="o">{</span><span class="n">gâ</span> <span class="n">gâ</span> <span class="o">:</span> <span class="n">C</span><span class="o">(</span><span class="n">Î±</span><span class="o">,</span> <span class="n">Î²</span><span class="o">)}</span>
  <span class="o">(</span><span class="n">hâ</span> <span class="o">:</span> <span class="n">gâ</span> <span class="bp">â</span> <span class="n">uniform_gen</span> <span class="n">K</span> <span class="n">V</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">hâ</span> <span class="o">:</span> <span class="n">gâ</span> <span class="bp">â</span> <span class="n">uniform_gen</span> <span class="n">K</span> <span class="n">V</span> <span class="n">gâ</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">gâ</span> <span class="bp">â</span> <span class="n">uniform_gen</span> <span class="n">K</span> <span class="o">(</span><span class="n">V</span> <span class="bp">â</span> <span class="n">V</span><span class="o">)</span> <span class="n">f</span> <span class="o">:=</span>
<span class="bp">Î»</span> <span class="n">x</span> <span class="n">hx</span><span class="o">,</span> <span class="o">â¨</span><span class="n">gâ</span> <span class="n">x</span><span class="o">,</span> <span class="n">hâ</span> <span class="n">x</span> <span class="n">hx</span><span class="o">,</span> <span class="n">hâ</span> <span class="n">x</span> <span class="n">hx</span><span class="o">â©</span>

<span class="sd">/-- Any point of `compact_open.gen K U` is also an interior point wrt the topology of compact</span>
<span class="sd">convergence.</span>

<span class="sd">The topology of compact convergence is thus at least as fine as the compact-open topology. -/</span>
<span class="kd">lemma</span> <span class="n">uniform_gen_subset_compact_open</span> <span class="o">(</span><span class="n">hK</span> <span class="o">:</span> <span class="n">is_compact</span> <span class="n">K</span><span class="o">)</span> <span class="o">{</span><span class="n">U</span> <span class="o">:</span> <span class="n">set</span> <span class="n">Î²</span><span class="o">}</span> <span class="o">(</span><span class="n">hU</span> <span class="o">:</span> <span class="n">is_open</span> <span class="n">U</span><span class="o">)</span>
  <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">â</span> <span class="n">continuous_map.compact_open.gen</span> <span class="n">K</span> <span class="n">U</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">â</span> <span class="o">(</span><span class="n">V</span> <span class="bp">â</span> <span class="bp">ð¤</span> <span class="n">Î²</span><span class="o">),</span> <span class="n">uniform_gen</span> <span class="n">K</span> <span class="n">V</span> <span class="n">f</span> <span class="bp">â</span> <span class="n">continuous_map.compact_open.gen</span> <span class="n">K</span> <span class="n">U</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">obtain</span> <span class="o">â¨</span><span class="n">V</span><span class="o">,</span> <span class="n">hVâ</span><span class="o">,</span> <span class="n">hVâ</span><span class="o">,</span> <span class="n">hVâ</span><span class="o">â©</span> <span class="o">:=</span> <span class="n">lebesgue_number_of_compact_open</span> <span class="o">(</span><span class="n">hK.image</span> <span class="n">f.continuous</span><span class="o">)</span> <span class="n">hU</span> <span class="n">hf</span><span class="o">,</span>
  <span class="n">refine</span> <span class="o">â¨</span><span class="n">V</span><span class="o">,</span> <span class="n">hVâ</span><span class="o">,</span> <span class="n">_</span><span class="o">â©,</span>
  <span class="n">rintros</span> <span class="n">g</span> <span class="n">hg</span> <span class="bp">-</span> <span class="o">â¨</span><span class="n">x</span><span class="o">,</span> <span class="n">hx</span><span class="o">,</span> <span class="n">rfl</span><span class="o">â©,</span>
  <span class="n">exact</span> <span class="n">hVâ</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="o">â¨</span><span class="n">x</span><span class="o">,</span> <span class="n">hx</span><span class="o">,</span> <span class="n">rfl</span><span class="o">â©</span> <span class="o">(</span><span class="n">hg</span> <span class="n">x</span> <span class="n">hx</span><span class="o">),</span>
<span class="kd">end</span>

<span class="sd">/-- The point `f` in `uniform_gen K V f` is also an interior point wrt the compact-open topology.</span>

<span class="sd">From this it should follow that the compact-open topology is at least as fine as the topology of</span>
<span class="sd">compact convergence. -/</span>
<span class="kd">lemma</span> <span class="n">Inter_compact_open_gen_subset_uniform_gen</span> <span class="o">(</span><span class="n">hK</span> <span class="o">:</span> <span class="n">is_compact</span> <span class="n">K</span><span class="o">)</span> <span class="o">(</span><span class="n">hV</span> <span class="o">:</span> <span class="n">V</span> <span class="bp">â</span> <span class="bp">ð¤</span> <span class="n">Î²</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">â</span> <span class="o">(</span><span class="n">Î¹</span> <span class="o">:</span> <span class="kt">Sort</span> <span class="o">(</span><span class="n">uâ</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">Î¹</span><span class="o">]</span>
  <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="n">Î¹</span> <span class="bp">â</span> <span class="n">set</span> <span class="n">Î±</span><span class="o">)</span> <span class="o">(</span><span class="n">hC</span> <span class="o">:</span> <span class="bp">â</span> <span class="n">i</span><span class="o">,</span> <span class="n">is_compact</span> <span class="o">(</span><span class="n">C</span> <span class="n">i</span><span class="o">))</span>
  <span class="o">(</span><span class="n">U</span> <span class="o">:</span> <span class="n">Î¹</span> <span class="bp">â</span> <span class="n">set</span> <span class="n">Î²</span><span class="o">)</span> <span class="o">(</span><span class="n">hU</span> <span class="o">:</span> <span class="bp">â</span> <span class="n">i</span><span class="o">,</span> <span class="n">is_open</span> <span class="o">(</span><span class="n">U</span> <span class="n">i</span><span class="o">)),</span>
  <span class="o">(</span><span class="n">f</span> <span class="bp">â</span> <span class="bp">â</span> <span class="n">i</span><span class="o">,</span> <span class="n">continuous_map.compact_open.gen</span> <span class="o">(</span><span class="n">C</span> <span class="n">i</span><span class="o">)</span> <span class="o">(</span><span class="n">U</span> <span class="n">i</span><span class="o">))</span> <span class="bp">â§</span>
  <span class="o">(</span><span class="bp">â</span> <span class="n">i</span><span class="o">,</span> <span class="n">continuous_map.compact_open.gen</span> <span class="o">(</span><span class="n">C</span> <span class="n">i</span><span class="o">)</span> <span class="o">(</span><span class="n">U</span> <span class="n">i</span><span class="o">))</span> <span class="bp">â</span> <span class="n">uniform_gen</span> <span class="n">K</span> <span class="n">V</span> <span class="n">f</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="c1">-- Below needs https://github.com/leanprover-community/mathlib/pull/9981</span>
  <span class="n">obtain</span> <span class="o">â¨</span><span class="n">W</span><span class="o">,</span> <span class="n">hWâ</span><span class="o">,</span> <span class="n">hWâ</span><span class="o">,</span> <span class="n">hWâ</span><span class="o">,</span> <span class="n">hWâ</span><span class="o">â©</span> <span class="o">:=</span> <span class="n">comp_open_symm_mem_uniformity_sets</span> <span class="n">hV</span><span class="o">,</span>
  <span class="n">obtain</span> <span class="o">â¨</span><span class="n">Z</span><span class="o">,</span> <span class="n">hZâ</span><span class="o">,</span> <span class="n">hZâ</span><span class="o">,</span> <span class="n">hZâ</span><span class="o">,</span> <span class="n">hZâ</span><span class="o">â©</span> <span class="o">:=</span> <span class="n">comp_open_symm_mem_uniformity_sets</span> <span class="n">hWâ</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">U</span> <span class="o">:</span> <span class="n">Î±</span> <span class="bp">â</span> <span class="n">set</span> <span class="n">Î±</span> <span class="o">:=</span> <span class="bp">Î»</span> <span class="n">x</span><span class="o">,</span> <span class="n">f</span><span class="bp">â»Â¹'</span> <span class="o">(</span><span class="n">ball</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="n">Z</span><span class="o">),</span>
  <span class="k">have</span> <span class="n">hU</span> <span class="o">:</span> <span class="bp">â</span> <span class="n">x</span><span class="o">,</span> <span class="n">is_open</span> <span class="o">(</span><span class="n">U</span> <span class="n">x</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">Î»</span> <span class="n">x</span><span class="o">,</span> <span class="n">f.continuous.is_open_preimage</span> <span class="n">_</span> <span class="o">(</span><span class="n">is_open_ball</span> <span class="n">_</span> <span class="n">hZâ</span><span class="o">),</span>
  <span class="k">have</span> <span class="n">hUK</span> <span class="o">:</span> <span class="n">K</span> <span class="bp">â</span> <span class="bp">â</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">K</span><span class="o">),</span> <span class="n">U</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">K</span><span class="o">),</span>
  <span class="o">{</span> <span class="n">intros</span> <span class="n">x</span> <span class="n">hx</span><span class="o">,</span>
    <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">exists_prop</span><span class="o">,</span> <span class="n">mem_Union</span><span class="o">,</span> <span class="n">Union_coe_set</span><span class="o">,</span> <span class="n">mem_preimage</span><span class="o">],</span>
    <span class="n">use</span> <span class="o">(â¨</span><span class="n">x</span><span class="o">,</span> <span class="n">hx</span><span class="o">â©</span> <span class="o">:</span> <span class="n">K</span><span class="o">),</span>
    <span class="n">simp</span> <span class="o">[</span><span class="n">hx</span><span class="o">,</span> <span class="n">mem_ball_self</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="n">hZâ</span><span class="o">],</span> <span class="o">},</span>
  <span class="n">obtain</span> <span class="o">â¨</span><span class="n">t</span><span class="o">,</span> <span class="n">ht</span><span class="o">â©</span> <span class="o">:=</span> <span class="n">hK.elim_finite_subcover</span> <span class="n">_</span> <span class="o">(</span><span class="bp">Î»</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">K</span><span class="o">),</span> <span class="n">hU</span> <span class="n">x.val</span><span class="o">)</span> <span class="n">hUK</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">C</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">â</span> <span class="n">set</span> <span class="n">Î±</span> <span class="o">:=</span> <span class="bp">Î»</span> <span class="n">i</span><span class="o">,</span> <span class="n">K</span> <span class="bp">â©</span> <span class="n">closure</span> <span class="o">(</span><span class="n">U</span> <span class="o">((</span><span class="n">i</span> <span class="o">:</span> <span class="n">K</span><span class="o">)</span> <span class="o">:</span> <span class="n">Î±</span><span class="o">)),</span>
  <span class="k">have</span> <span class="n">hC</span> <span class="o">:</span> <span class="n">K</span> <span class="bp">â</span> <span class="bp">â</span> <span class="n">i</span><span class="o">,</span> <span class="n">C</span> <span class="n">i</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="bp">â</span> <span class="n">K.inter_Union</span><span class="o">,</span> <span class="n">subset_inter_iff</span><span class="o">],</span>
    <span class="n">refine</span> <span class="o">â¨</span><span class="n">rfl.subset</span><span class="o">,</span> <span class="n">ht.trans</span> <span class="n">_</span><span class="o">â©,</span>
    <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">set_coe.forall</span><span class="o">,</span> <span class="n">subtype.coe_mk</span><span class="o">,</span> <span class="n">Union_subset_iff</span><span class="o">],</span>
    <span class="n">intros</span> <span class="n">x</span> <span class="n">hxâ</span> <span class="n">hxâ</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">subset_subset_Union</span> <span class="o">(â¨</span><span class="n">_</span><span class="o">,</span> <span class="n">hxâ</span><span class="o">â©</span> <span class="o">:</span> <span class="n">t</span><span class="o">),</span>
    <span class="n">simp</span> <span class="o">[</span><span class="n">subset_closure</span><span class="o">],</span> <span class="o">},</span>
  <span class="k">have</span> <span class="n">hfC</span> <span class="o">:</span> <span class="bp">â</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">t</span><span class="o">),</span> <span class="n">f</span> <span class="bp">''</span> <span class="n">C</span> <span class="n">i</span> <span class="bp">â</span> <span class="n">ball</span> <span class="o">(</span><span class="n">f</span> <span class="o">((</span><span class="n">i</span> <span class="o">:</span> <span class="n">K</span><span class="o">)</span> <span class="o">:</span> <span class="n">Î±</span><span class="o">))</span> <span class="n">W</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rintros</span> <span class="o">â¨â¨</span><span class="n">x</span><span class="o">,</span> <span class="n">hxâ</span><span class="o">â©,</span> <span class="n">hxâ</span><span class="o">â©,</span>
    <span class="k">calc</span> <span class="n">f</span> <span class="bp">''</span> <span class="o">(</span><span class="n">K</span> <span class="bp">â©</span> <span class="n">closure</span> <span class="o">(</span><span class="n">U</span> <span class="n">x</span><span class="o">))</span>
          <span class="bp">â</span> <span class="n">f</span> <span class="bp">''</span> <span class="o">(</span><span class="n">closure</span> <span class="o">(</span><span class="n">U</span> <span class="n">x</span><span class="o">))</span> <span class="o">:</span> <span class="kd">by</span> <span class="o">{</span> <span class="n">mono</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">inter_subset_right</span><span class="o">],</span> <span class="o">}</span>
      <span class="bp">...</span> <span class="bp">â</span> <span class="n">closure</span> <span class="o">(</span><span class="n">f</span> <span class="bp">''</span> <span class="o">(</span><span class="n">U</span> <span class="n">x</span><span class="o">))</span> <span class="o">:</span> <span class="n">continuous_on.image_closure</span> <span class="n">f.continuous.continuous_on</span>
      <span class="bp">...</span> <span class="bp">â</span> <span class="n">closure</span> <span class="o">(</span><span class="n">ball</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="n">Z</span><span class="o">)</span> <span class="o">:</span> <span class="kd">by</span> <span class="o">{</span> <span class="n">mono</span><span class="o">,</span> <span class="n">simp</span><span class="o">,</span> <span class="o">}</span>
      <span class="bp">...</span> <span class="bp">â</span> <span class="n">ball</span> <span class="o">(</span><span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="n">W</span> <span class="o">:</span> <span class="kd">by</span> <span class="o">{</span> <span class="n">intros</span> <span class="n">y</span> <span class="n">hy</span><span class="o">,</span>
                                <span class="n">obtain</span> <span class="o">â¨</span><span class="n">z</span><span class="o">,</span> <span class="n">hzâ</span><span class="o">,</span><span class="n">hzâ</span><span class="o">â©</span> <span class="o">:=</span> <span class="n">uniform_space.mem_closure_iff_ball.mp</span> <span class="n">hy</span> <span class="n">hZâ</span><span class="o">,</span>
                                <span class="n">rw</span> <span class="n">mem_ball_symmetry</span> <span class="n">hZâ</span> <span class="n">at</span> <span class="n">hzâ</span><span class="o">,</span>
                                <span class="n">exact</span> <span class="n">ball_mono</span> <span class="n">hZâ</span> <span class="n">_</span> <span class="o">(</span><span class="n">mem_ball_comp</span> <span class="n">hzâ</span> <span class="n">hzâ</span><span class="o">),</span> <span class="o">},</span> <span class="o">},</span>
  <span class="n">refine</span> <span class="o">â¨</span><span class="n">t</span><span class="o">,</span>
          <span class="n">t.fintype_coe_sort</span><span class="o">,</span>
          <span class="n">C</span><span class="o">,</span>
          <span class="bp">Î»</span> <span class="n">i</span><span class="o">,</span> <span class="n">hK.inter_right</span> <span class="n">is_closed_closure</span><span class="o">,</span>
          <span class="bp">Î»</span> <span class="n">i</span><span class="o">,</span> <span class="n">ball</span> <span class="o">(</span><span class="n">f</span> <span class="o">((</span><span class="n">i</span> <span class="o">:</span> <span class="n">K</span><span class="o">)</span> <span class="o">:</span> <span class="n">Î±</span><span class="o">))</span> <span class="n">W</span><span class="o">,</span>
          <span class="bp">Î»</span> <span class="n">i</span><span class="o">,</span> <span class="n">is_open_ball</span> <span class="n">_</span> <span class="n">hWâ</span><span class="o">,</span>
          <span class="kd">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">continuous_map.compact_open.gen</span><span class="o">,</span> <span class="n">hfC</span><span class="o">,</span> <span class="bp">-</span><span class="n">image_subset_iff</span><span class="o">],</span>
          <span class="n">_</span><span class="o">â©,</span>
  <span class="n">intros</span> <span class="n">g</span> <span class="n">hg</span> <span class="n">x</span> <span class="n">hx</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">hWâ</span><span class="o">,</span>
  <span class="n">replace</span> <span class="n">hx</span> <span class="o">:=</span> <span class="n">mem_Union.mp</span> <span class="o">(</span><span class="n">hC</span> <span class="n">hx</span><span class="o">),</span>
  <span class="n">obtain</span> <span class="o">â¨</span><span class="n">y</span><span class="o">,</span> <span class="n">hy</span><span class="o">â©</span> <span class="o">:=</span> <span class="n">hx</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">mem_comp_rel</span><span class="o">,</span>
  <span class="n">use</span> <span class="n">f</span> <span class="n">y</span><span class="o">,</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">mem_Inter</span><span class="o">,</span> <span class="n">continuous_map.compact_open.gen</span><span class="o">,</span> <span class="n">mem_set_of_eq</span><span class="o">,</span> <span class="n">image_subset_iff</span><span class="o">]</span> <span class="n">at</span> <span class="n">hg</span><span class="o">,</span>
  <span class="n">refine</span> <span class="o">â¨</span><span class="n">_</span><span class="o">,</span> <span class="n">mem_preimage.mp</span> <span class="o">(</span><span class="n">hg</span> <span class="n">y</span> <span class="n">hy</span><span class="o">)â©,</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">image_subset_iff</span><span class="o">,</span> <span class="n">mem_preimage</span><span class="o">]</span> <span class="n">at</span> <span class="n">hfC</span><span class="o">,</span>
  <span class="n">specialize</span> <span class="n">hfC</span> <span class="n">y</span> <span class="n">hy</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">ball_eq_of_symmetry</span> <span class="n">hWâ</span><span class="o">]</span> <span class="n">at</span> <span class="n">hfC</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">hfC</span><span class="o">,</span>
<span class="kd">end</span>

<span class="sd">/-- This should follow from the various lemmas above. -/</span>
<span class="kd">lemma</span> <span class="n">compact_open_eq_uniform</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">compact_convergence_topology</span> <span class="o">:</span> <span class="n">topological_space</span> <span class="n">C</span><span class="o">(</span><span class="n">Î±</span><span class="o">,</span> <span class="n">Î²</span><span class="o">))</span> <span class="bp">=</span> <span class="n">continuous_map.compact_open</span> <span class="o">:=</span>
<span class="gr">sorry</span>

<span class="sd">/-- I believe the topology this induces is `compact_convergence_topology`. -/</span>
<span class="kd">instance</span> <span class="o">:</span> <span class="n">uniform_space</span> <span class="n">C</span><span class="o">(</span><span class="n">Î±</span><span class="o">,</span> <span class="n">Î²</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">uniformity</span> <span class="o">:=</span> <span class="bp">â¨</span> <span class="o">(</span><span class="n">K</span> <span class="o">:</span> <span class="n">set</span> <span class="n">Î±</span><span class="o">)</span> <span class="o">(</span><span class="n">hK</span> <span class="o">:</span> <span class="n">is_compact</span> <span class="n">K</span><span class="o">)</span> <span class="o">(</span><span class="n">V</span> <span class="bp">â</span> <span class="bp">ð¤</span> <span class="n">Î²</span><span class="o">),</span>
                  <span class="bp">ð</span> <span class="o">{</span> <span class="n">p</span> <span class="o">:</span> <span class="n">C</span><span class="o">(</span><span class="n">Î±</span><span class="o">,</span> <span class="n">Î²</span><span class="o">)</span> <span class="bp">Ã</span> <span class="n">C</span><span class="o">(</span><span class="n">Î±</span><span class="o">,</span> <span class="n">Î²</span><span class="o">)</span> <span class="bp">|</span> <span class="bp">â</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">Î±</span><span class="o">),</span> <span class="o">(</span><span class="n">p.1</span> <span class="n">x</span><span class="o">,</span> <span class="n">p.2</span> <span class="n">x</span><span class="o">)</span> <span class="bp">â</span> <span class="n">V</span> <span class="o">},</span>
  <span class="n">refl</span> <span class="o">:=</span> <span class="gr">sorry</span><span class="o">,</span> <span class="c1">-- trivial</span>
  <span class="n">symm</span> <span class="o">:=</span> <span class="gr">sorry</span><span class="o">,</span> <span class="c1">-- trivial</span>
  <span class="n">comp</span> <span class="o">:=</span> <span class="gr">sorry</span><span class="o">,</span> <span class="c1">-- trivial</span>
  <span class="n">is_open_uniformity</span> <span class="o">:=</span> <span class="gr">sorry</span><span class="o">,</span> <span class="c">/-</span><span class="cm"> Should be easily reduced to `compact_open_eq_uniform` -/</span> <span class="o">}</span>
</code></pre></div>



<a name="259114662"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/259114662" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#259114662">(Oct 26 2021 at 15:31)</a>:</h4>
<p>I really want to switch back to sort out another lemma in the Sphere Eversion project now but I think the above takes care of the mathematical content of what we need.</p>



<a name="259114699"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/259114699" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#259114699">(Oct 26 2021 at 15:31)</a>:</h4>
<p>I'll push this through to the end in a week or two.</p>



<a name="259114757"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/259114757" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#259114757">(Oct 26 2021 at 15:31)</a>:</h4>
<p>This is more than you initially planned, right?  You were initially going to do just the fact that if <code>Î±</code> is compact then compact-open is the uniform topology.</p>



<a name="259114884"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/259114884" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#259114884">(Oct 26 2021 at 15:32)</a>:</h4>
<p>I always planned to do it for any topological space <code>Î±</code> (not just compact).</p>



<a name="259114912"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/259114912" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#259114912">(Oct 26 2021 at 15:32)</a>:</h4>
<p>Though I may well have communicated my intentions poorly!</p>



<a name="259115208"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/259115208" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#259115208">(Oct 26 2021 at 15:34)</a>:</h4>
<p>Does it, in the end, route through the theorem <a href="https://leanprover-community.github.io/mathlib_docs/find/continuous_map.exists_tendsto_compact_open_iff_forall">docs#continuous_map.exists_tendsto_compact_open_iff_forall</a> which I had proved?  Or is this theorem now a corollary of your bigger result?</p>



<a name="259115307"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/259115307" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#259115307">(Oct 26 2021 at 15:34)</a>:</h4>
<p>(I need to hop on the subway but I'll think more about this later.  Thanks for working on this!)</p>



<a name="259115529"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/259115529" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#259115529">(Oct 26 2021 at 15:36)</a>:</h4>
<p>It does not actually use that result.</p>



<a name="259115682"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/259115682" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#259115682">(Oct 26 2021 at 15:37)</a>:</h4>
<p>I'm not sure if it would be better if it did but either way I'm glad we have that result.</p>



<a name="262314889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/262314889" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#262314889">(Nov 22 2021 at 12:58)</a>:</h4>
<p>Hello, I just wanted to follow up on the status of this. If I remember correctly, Heather mentioned that using some of the things here one could show that "on a compact space , the compact-open topology is the same as the topology induced by the sup-norm".  </p>
<p>Do we have this result now?</p>



<a name="262315453"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/262315453" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#262315453">(Nov 22 2021 at 13:03)</a>:</h4>
<p>We don't but we're close. I have it on one of my lists to get back to this but it would be great if someone else took up the baton.</p>



<a name="262315602"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/262315602" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#262315602">(Nov 22 2021 at 13:04)</a>:</h4>
<p>Part of the reason it is a bit of work is that we want to factor it through the result that when the codomain is a uniform space, the compact open topology is the same as the topology of compact convergence.</p>



<a name="262315703"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/262315703" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#262315703">(Nov 22 2021 at 13:05)</a>:</h4>
<p>I basically proved this here <a href="#narrow/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology/near/259114393">https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology/near/259114393</a> but some details still need to be filled in.</p>



<a name="262317225"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/262317225" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#262317225">(Nov 22 2021 at 13:20)</a>:</h4>
<p>Ah ok, well I'm happy to try and help removing some sorries. Where can I find the repo for this?</p>



<a name="262317498"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/262317498" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#262317498">(Nov 22 2021 at 13:23)</a>:</h4>
<p>Great! There's no repo or branch, just the snippet above.</p>



<a name="262317526"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/262317526" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#262317526">(Nov 22 2021 at 13:23)</a>:</h4>
<p>It's a MWE if you open it against master in Mathlib.</p>



<a name="262317584"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/262317584" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#262317584">(Nov 22 2021 at 13:24)</a>:</h4>
<p>I do actually have proofs of the <code>sorry</code>s marked <code>trivial</code> but my proofs are so disgusting I didn't censored them.</p>



<a name="262317965"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/262317965" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#262317965">(Nov 22 2021 at 13:27)</a>:</h4>
<p>Ah ok cool. Let me play around with it a bit and see what I can do. I'll need to think about how one goes from this to the <code>sup-norm</code> statement, I expect its easy, but I need to parse all the different things here first :)</p>



<a name="262318263"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/262318263" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#262318263">(Nov 22 2021 at 13:29)</a>:</h4>
<p><span class="user-mention silent" data-user-id="389019">Chris Birkbeck</span> <a href="#narrow/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology/near/262317965">said</a>:</p>
<blockquote>
<p>I'll need to think about how one goes from this to the <code>sup-norm</code> statement</p>
</blockquote>
<p>Putting aside the issue that the distance is the norm of the difference, this should come down to proving <a href="https://leanprover-community.github.io/mathlib_docs/find/pseudo_metric_space.uniformity_dist">docs#pseudo_metric_space.uniformity_dist</a></p>



<a name="262318345"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/262318345" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#262318345">(Nov 22 2021 at 13:30)</a>:</h4>
<p>The setup is all very clever but if you're seeing it for the first time, it might be a bit opaque.</p>



<a name="262319199"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/262319199" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#262319199">(Nov 22 2021 at 13:38)</a>:</h4>
<p>Hmm yeah I've not really been that exposed to this part of the mathlib, so I need to spend some time getting up to speed :)</p>



<a name="262504522"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/262504522" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#262504522">(Nov 23 2021 at 19:50)</a>:</h4>
<p>So I made a start on this and made a draft PR here: <a href="https://github.com/leanprover-community/mathlib/issues/10439">#10439</a>. Haven't really got that far yet.</p>



<a name="262580128"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/262580128" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#262580128">(Nov 24 2021 at 12:14)</a>:</h4>
<p>Thanks for doing this <span class="user-mention" data-user-id="389019">@Chris Birkbeck</span> What you have so far looks like a good start!</p>



<a name="265344634"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/265344634" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#265344634">(Dec 17 2021 at 19:07)</a>:</h4>
<p>I finally returned to this earlier this week and have removed all <code>sorry</code>s from <a href="https://github.com/leanprover-community/mathlib/pull/10439">#10439</a></p>



<a name="265344889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/265344889" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#265344889">(Dec 17 2021 at 19:09)</a>:</h4>
<p>The code needs about a day's work till I have something that I can put out for review but I am at least confident that the definitions are correct in view of:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">correct_entourages</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">C</span><span class="o">(</span><span class="n">Î±</span><span class="o">,</span> <span class="n">Î²</span><span class="o">)</span> <span class="bp">Ã</span> <span class="n">C</span><span class="o">(</span><span class="n">Î±</span><span class="o">,</span> <span class="n">Î²</span><span class="o">)))</span> <span class="o">:</span>
  <span class="n">X</span> <span class="bp">â</span> <span class="bp">ð¤</span> <span class="n">C</span><span class="o">(</span><span class="n">Î±</span><span class="o">,</span> <span class="n">Î²</span><span class="o">)</span> <span class="bp">â</span> <span class="bp">â</span> <span class="o">(</span><span class="n">K</span> <span class="o">:</span> <span class="n">set</span> <span class="n">Î±</span><span class="o">)</span> <span class="o">(</span><span class="n">V</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">Î²</span> <span class="bp">Ã</span> <span class="n">Î²</span><span class="o">))</span> <span class="o">(</span><span class="n">hK</span> <span class="o">:</span> <span class="n">is_compact</span> <span class="n">K</span><span class="o">)</span> <span class="o">(</span><span class="n">hV</span> <span class="o">:</span> <span class="n">V</span> <span class="bp">â</span> <span class="bp">ð¤</span> <span class="n">Î²</span><span class="o">),</span>
    <span class="o">{</span> <span class="n">fg</span> <span class="o">:</span> <span class="n">C</span><span class="o">(</span><span class="n">Î±</span><span class="o">,</span> <span class="n">Î²</span><span class="o">)</span> <span class="bp">Ã</span> <span class="n">C</span><span class="o">(</span><span class="n">Î±</span><span class="o">,</span> <span class="n">Î²</span><span class="o">)</span> <span class="bp">|</span> <span class="bp">â</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">Î±</span><span class="o">),</span> <span class="n">x</span> <span class="bp">â</span> <span class="n">K</span> <span class="bp">â</span> <span class="o">(</span><span class="n">fg.1</span> <span class="n">x</span><span class="o">,</span> <span class="n">fg.2</span> <span class="n">x</span><span class="o">)</span> <span class="bp">â</span> <span class="n">V</span> <span class="o">}</span> <span class="bp">â</span> <span class="n">X</span> <span class="o">:=</span>
<span class="n">mem_compact_convergence_uniformity</span> <span class="n">X</span>

<span class="kd">lemma</span> <span class="n">correct_topology_even_defeq</span> <span class="o">:</span>
  <span class="bp">@</span><span class="n">uniform_space.to_topological_space</span> <span class="n">C</span><span class="o">(</span><span class="n">Î±</span><span class="o">,</span> <span class="n">Î²</span><span class="o">)</span> <span class="n">_</span> <span class="bp">=</span> <span class="n">continuous_map.compact_open</span> <span class="o">:=</span>
<span class="n">rfl</span>
</code></pre></div>
<p>(here <code>Î±</code> is a <code>topological_space</code> and <code>Î²</code> is a <code>uniform_space</code>).</p>



<a name="265345344"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/265345344" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#265345344">(Dec 17 2021 at 19:13)</a>:</h4>
<p>In summary when <code>Î±</code> is a <code>topological_space</code> and <code>Î²</code> is a <code>uniform_space</code>, we'll be able to speak of uniform convergence in the space of continuous maps <code>C(Î±, Î²)</code> and furthermore, we'll know that the underlying topology is the compact-open topology.</p>



<a name="265356153"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/265356153" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#265356153">(Dec 17 2021 at 20:27)</a>:</h4>
<p>Fantastic!</p>



<a name="265417450"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/265417450" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#265417450">(Dec 18 2021 at 13:04)</a>:</h4>
<p>Awesome!</p>



<a name="265812713"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/265812713" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#265812713">(Dec 22 2021 at 14:47)</a>:</h4>
<p>I finally have a version of this work ready for review: <a href="https://github.com/leanprover-community/mathlib/pull/10967">#10967</a></p>



<a name="265813153"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/265813153" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#265813153">(Dec 22 2021 at 14:51)</a>:</h4>
<p><span class="user-mention" data-user-id="389019">@Chris Birkbeck</span> I accidentally dropped you as a co-author when creating the tidied-up PR. I've just added you back!</p>



<a name="265813276"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/265813276" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Birkbeck <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#265813276">(Dec 22 2021 at 14:52)</a>:</h4>
<p>Oh don't worry, I really don't think I did much! You did all the work really</p>



<a name="265813408"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/265813408" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#265813408">(Dec 22 2021 at 14:54)</a>:</h4>
<p>Incidentally the Bourbaki proof of the main result in this PR uses some non-trivial results so that they can say:<br>
<a href="/user_uploads/3121/mHKvLRFconRrmbrsM8gHYrba/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/mHKvLRFconRrmbrsM8gHYrba/image.png" title="image.png"><img src="/user_uploads/3121/mHKvLRFconRrmbrsM8gHYrba/image.png"></a></div>



<a name="265813490"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/265813490" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#265813490">(Dec 22 2021 at 14:55)</a>:</h4>
<p>and I could never see where they use these assumptions in what follows. Now that I've formalised this, I don't think they do use them.</p>



<a name="265813575"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/265813575" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#265813575">(Dec 22 2021 at 14:55)</a>:</h4>
<p>It was to make the arguments fit in their head better</p>



<a name="265815414"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/265815414" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#265815414">(Dec 22 2021 at 15:14)</a>:</h4>
<p>In the end, is there a lemma where you can say: this is exactly lemma X from Bourbaki except that we removed assumption Y?</p>



<a name="265819319"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/265819319" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#265819319">(Dec 22 2021 at 15:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110031">Patrick Massot</span> <a href="#narrow/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology/near/265815414">said</a>:</p>
<blockquote>
<p>In the end, is there a lemma where you can say: this is exactly lemma X from Bourbaki except that we removed assumption Y?</p>
</blockquote>
<p>Oh dear, I seem to have given the wrong impression; I love beating Bourbaki but that's not what happened here. Bourbaki establish their result in full generality but they do so by reducing to the case where they're looking at maps from a compact space to a Hausdorff space. What I meant  in my remark above was that if you look at the proof they then give for the case to which they reduce, I couldn't see where they used the assumptions of compactness and Hausdorffness.</p>



<a name="265819628"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/265819628" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#265819628">(Dec 22 2021 at 15:52)</a>:</h4>
<p>It's hardly worth all these words but to be precise, I wondered:<br>
 (a) am I missing something and they really do need the assumptions of compactness and Hausdorffness?<br>
 (b) is it necessary to set things up this way or can one just prove the result directly?</p>
<p>I'm still not sure about (a) because I didn't chase down the precise generality in which they proved the various lemmata that they invoke but I am now absolutely sure about (b) because I have convinced Lean using a direct argument.</p>



<a name="265907576"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/265907576" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#265907576">(Dec 23 2021 at 11:19)</a>:</h4>
<p>I played a bit with the code in this PR. I feel bad because I'm responsible for some of the mess here. We have a nice API around <a href="https://leanprover-community.github.io/mathlib_docs/find/filter.has_basis">docs#filter.has_basis</a>, some connection with <a href="https://leanprover-community.github.io/mathlib_docs/find/filter_basis">docs#filter_basis</a> but not connection with <a href="https://leanprover-community.github.io/mathlib_docs/find/topological_space.is_topological_basis">docs#topological_space.is_topological_basis</a>. The main issue is probably that we need a parametrized version of <a href="https://leanprover-community.github.io/mathlib_docs/find/topological_space.is_topological_basis">docs#topological_space.is_topological_basis</a> (ie an API for talking about maps whose image is a topological basis, probably using also a predicate on the source type as in <a href="https://leanprover-community.github.io/mathlib_docs/find/filter.has_basis">docs#filter.has_basis</a>). And then we would need a lot of stupid small lemmas. Anyway, I pushed some <a href="https://github.com/leanprover-community/mathlib/compare/ocfnash/compact_convergence...has_basis_compact_cvg">new branch</a>  hinting at how we could use <a href="https://leanprover-community.github.io/mathlib_docs/find/filter.has_basis">docs#filter.has_basis</a> in that file. I'm not sure it's worth pursuing and I exhausted my time budget. The current state is somehow stuck between two worlds hence features extremely nasty unpacking and packing as in <code>has_basis_nhds_compact_open</code> (note for expert tactic writers: this is really the kind of proof that is driving me crazy).</p>



<a name="265908618"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/265908618" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#265908618">(Dec 23 2021 at 11:35)</a>:</h4>
<p>Don't feel bad! The very few rough corners around <code>is_topological_basis</code> were more than compensated for by the awesomeness of what is in place. I'll take a look at your branch this afternoon and see if I can easily incorporate its ideas.</p>



<a name="265952178"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Metrisability%20of%20compact-open%20topology/near/265952178" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Metrisability.20of.20compact-open.20topology.html#265952178">(Dec 23 2021 at 20:49)</a>:</h4>
<p>In the end, I didn't get a chance to look at this today but I expect to have time for it tomorrow morning.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>