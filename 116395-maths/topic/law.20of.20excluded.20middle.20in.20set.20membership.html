---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html">law of excluded middle in set membership</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="213638481"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213638481" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> ZHAO Jinxiang <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213638481">(Oct 17 2020 at 06:43)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.set.basic</span>
<span class="kd">example</span> <span class="o">{</span><span class="n">x</span><span class="o">:</span><span class="n">α</span><span class="o">}</span> <span class="o">{</span><span class="n">s</span><span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">}:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">s</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">∉</span> <span class="n">s</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">exact</span> <span class="n">classical.em</span> <span class="o">(</span><span class="n">x</span> <span class="bp">∈</span> <span class="n">s</span><span class="o">),</span>
<span class="kd">end</span>
</code></pre></div>

<p>Can we prove it without <code>classical.em</code> in lean?</p>



<a name="213639257"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213639257" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213639257">(Oct 17 2020 at 07:10)</a>:</h4>
<p>I think it's equivalent. Given an arbitrary proposition P you can make the set of natural numbers such that P holds and then asking if 37 is in or not is just asking if P is true or false</p>



<a name="213639443"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213639443" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213639443">(Oct 17 2020 at 07:17)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="bp">∀</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">X</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">∉</span> <span class="n">X</span><span class="o">)</span> <span class="bp">↔</span> <span class="bp">∀</span> <span class="n">p</span><span class="o">,</span> <span class="n">p</span> <span class="bp">∨</span> <span class="bp">¬</span> <span class="n">p</span> <span class="o">:=</span>
<span class="o">⟨</span><span class="bp">λ</span> <span class="n">H</span> <span class="n">p</span><span class="o">,</span> <span class="n">H</span> <span class="n">unit</span> <span class="o">{</span><span class="n">x</span> <span class="bp">|</span> <span class="n">p</span><span class="o">}</span> <span class="o">(),</span> <span class="bp">λ</span> <span class="n">H</span> <span class="n">α</span> <span class="n">X</span> <span class="n">x</span><span class="o">,</span> <span class="n">H</span> <span class="o">(</span><span class="n">x</span> <span class="bp">∈</span> <span class="n">X</span><span class="o">)⟩</span>
</code></pre></div>



<a name="213639601"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213639601" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213639601">(Oct 17 2020 at 07:22)</a>:</h4>
<p>oh oops, here's a better version</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">:</span> <span class="o">(</span><span class="bp">∀</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">X</span> <span class="bp">∨</span> <span class="n">x</span> <span class="bp">∉</span> <span class="n">X</span><span class="o">)</span> <span class="bp">↔</span> <span class="bp">∀</span> <span class="n">p</span><span class="o">,</span> <span class="n">p</span> <span class="bp">∨</span> <span class="bp">¬</span> <span class="n">p</span> <span class="o">:=</span>
<span class="o">⟨</span><span class="bp">λ</span> <span class="n">H</span> <span class="n">p</span><span class="o">,</span> <span class="n">H</span> <span class="n">ℕ</span> <span class="o">{</span><span class="n">x</span> <span class="bp">|</span> <span class="n">p</span><span class="o">}</span> <span class="mi">37</span><span class="o">,</span> <span class="bp">λ</span> <span class="n">H</span> <span class="n">α</span> <span class="n">X</span> <span class="n">x</span><span class="o">,</span> <span class="n">H</span> <span class="o">(</span><span class="n">x</span> <span class="bp">∈</span> <span class="n">X</span><span class="o">)⟩</span>
</code></pre></div>



<a name="213640445"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213640445" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> ZHAO Jinxiang <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213640445">(Oct 17 2020 at 07:55)</a>:</h4>
<p>That means: intuitionistic logic can't prove <code>x ∈ s ∨ x ∉ s</code>?</p>



<a name="213640493"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213640493" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213640493">(Oct 17 2020 at 07:56)</a>:</h4>
<p>Because sets are functions taking values in Prop not bool</p>



<a name="213640495"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213640495" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> ZHAO Jinxiang <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213640495">(Oct 17 2020 at 07:56)</a>:</h4>
<p>I use <code>classical.em</code> in this theorem. But I hope that the proof of theorem <code>union_diff_cancel</code> does not rely on the <em>law of excluded middle</em>.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">universe</span> <span class="kd">variables</span> <span class="n">u</span>
<span class="kd">variables</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span>
<span class="kd">theorem</span> <span class="n">union_diff_cancel</span> <span class="o">{</span><span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">⊆</span> <span class="n">t</span><span class="o">)</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">∪</span> <span class="o">(</span><span class="n">t</span> <span class="bp">\</span> <span class="n">s</span><span class="o">)</span> <span class="bp">=</span> <span class="n">t</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">ext</span> <span class="n">x</span><span class="o">,</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">set.mem_union_eq</span><span class="o">,</span> <span class="n">set.mem_diff</span><span class="o">,</span> <span class="n">set.subset_def</span><span class="o">]</span> <span class="n">at</span> <span class="bp">*</span><span class="o">,</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span>
    <span class="n">rintro</span> <span class="o">(</span><span class="n">h₁</span><span class="bp">|</span><span class="o">⟨</span><span class="n">h₁</span><span class="o">,</span><span class="n">h₂</span><span class="o">⟩),</span>
    <span class="o">{</span>
      <span class="k">have</span> <span class="o">:=</span> <span class="n">h</span> <span class="n">_</span> <span class="n">h₁</span><span class="o">,</span>
      <span class="n">assumption</span><span class="o">,</span>
    <span class="o">},</span>
    <span class="o">{</span>
      <span class="n">assumption</span><span class="o">,</span>
    <span class="o">}</span>
  <span class="o">},</span>
  <span class="o">{</span>
    <span class="n">intro</span> <span class="n">h₁</span><span class="o">,</span>
    <span class="k">have</span> <span class="o">:=</span> <span class="n">classical.em</span> <span class="o">(</span><span class="n">x</span> <span class="bp">∈</span> <span class="n">s</span><span class="o">),</span> <span class="c1">-- TODO: remove classical.em</span>
    <span class="n">cases</span> <span class="n">this</span><span class="o">,</span>
    <span class="o">{</span>
      <span class="n">left</span><span class="o">,</span>
      <span class="n">assumption</span><span class="o">,</span>
    <span class="o">},</span>
    <span class="o">{</span>
      <span class="n">right</span><span class="o">,</span>
      <span class="n">split</span><span class="o">,</span>
      <span class="n">assumption</span><span class="o">,</span>
      <span class="n">assumption</span><span class="o">,</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="kd">end</span>
</code></pre></div>



<a name="213640496"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213640496" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213640496">(Oct 17 2020 at 07:56)</a>:</h4>
<p>Set unit = Prop</p>



<a name="213640499"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213640499" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213640499">(Oct 17 2020 at 07:57)</a>:</h4>
<p>unfortunately it does</p>



<a name="213640541"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213640541" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213640541">(Oct 17 2020 at 07:58)</a>:</h4>
<p>If alpha is unit, s is P and t is Q you can just directly work out the logic statement that this is equivalent to</p>



<a name="213640551"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213640551" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213640551">(Oct 17 2020 at 07:59)</a>:</h4>
<p>P implies Q is your hypothesis and the conclusion is P or (Q and not P) implies Q</p>



<a name="213640599"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213640599" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213640599">(Oct 17 2020 at 08:00)</a>:</h4>
<p>So your question is simply whether this is true constructively</p>



<a name="213640612"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213640612" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213640612">(Oct 17 2020 at 08:01)</a>:</h4>
<p>And so maybe this is ok</p>



<a name="213640625"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213640625" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213640625">(Oct 17 2020 at 08:01)</a>:</h4>
<p>The general case will reduce to this using functional or set extensionality</p>



<a name="213640672"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213640672" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213640672">(Oct 17 2020 at 08:02)</a>:</h4>
<p>Oh no crap</p>



<a name="213640682"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213640682" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213640682">(Oct 17 2020 at 08:03)</a>:</h4>
<p>It's P or (Q and not P) is <em>equivalent</em> to Q</p>



<a name="213640683"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213640683" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213640683">(Oct 17 2020 at 08:03)</a>:</h4>
<p>So you're in trouble</p>



<a name="213640723"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213640723" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213640723">(Oct 17 2020 at 08:04)</a>:</h4>
<p>So you're not ok as Kenny says</p>



<a name="213640804"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213640804" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213640804">(Oct 17 2020 at 08:07)</a>:</h4>
<p>You're ok if you assume the set <code>s</code> is given by a decidable predicate:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">union_diff_cancel</span> <span class="o">{</span><span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">}</span> <span class="o">[</span><span class="n">p</span> <span class="o">:</span> <span class="n">decidable_pred</span> <span class="n">s</span><span class="o">]</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">⊆</span> <span class="n">t</span><span class="o">)</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">∪</span> <span class="o">(</span><span class="n">t</span> <span class="bp">\</span> <span class="n">s</span><span class="o">)</span> <span class="bp">=</span> <span class="n">t</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">ext</span> <span class="n">x</span><span class="o">,</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">set.mem_diff</span><span class="o">,</span> <span class="n">set.mem_union_eq</span><span class="o">],</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rintros</span> <span class="o">(</span><span class="n">xel</span> <span class="bp">|</span> <span class="o">⟨</span><span class="n">xel</span><span class="o">,</span> <span class="n">xnel</span><span class="o">⟩),</span>
    <span class="n">exact</span> <span class="n">h</span> <span class="n">xel</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">xel</span><span class="o">,</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">intro</span> <span class="n">xel</span><span class="o">,</span>
    <span class="c1">-- by_cases x ∈ s, -- but expanded out using the instance just to show there's no classical.em sneaking in</span>
    <span class="n">rcases</span> <span class="n">p</span> <span class="n">x</span> <span class="k">with</span> <span class="o">(</span><span class="n">h₁</span> <span class="bp">|</span> <span class="n">h₂</span><span class="o">),</span>
    <span class="o">{</span> <span class="n">right</span><span class="o">,</span> <span class="n">exact</span> <span class="o">⟨</span><span class="n">xel</span><span class="o">,</span> <span class="n">h₁</span><span class="o">⟩,</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">left</span><span class="o">,</span> <span class="n">exact</span> <span class="n">h₂</span><span class="o">,</span> <span class="o">},</span> <span class="o">},</span>
<span class="kd">end</span>
</code></pre></div>

<p>Using <code>by_cases</code> like usual:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">union_diff_cancel</span> <span class="o">{</span><span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">}</span> <span class="o">[</span><span class="n">decidable_pred</span> <span class="n">s</span><span class="o">]</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">⊆</span> <span class="n">t</span><span class="o">)</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">∪</span> <span class="o">(</span><span class="n">t</span> <span class="bp">\</span> <span class="n">s</span><span class="o">)</span> <span class="bp">=</span> <span class="n">t</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">ext</span> <span class="n">x</span><span class="o">,</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">set.mem_diff</span><span class="o">,</span> <span class="n">set.mem_union_eq</span><span class="o">],</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rintros</span> <span class="o">(</span><span class="n">xel</span> <span class="bp">|</span> <span class="o">⟨</span><span class="n">xel</span><span class="o">,</span> <span class="n">xnel</span><span class="o">⟩),</span>
    <span class="n">exact</span> <span class="n">h</span> <span class="n">xel</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">xel</span><span class="o">,</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">intro</span> <span class="n">xel</span><span class="o">,</span>
    <span class="n">by_cases</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">s</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">left</span><span class="o">,</span> <span class="n">exact</span> <span class="n">h</span><span class="o">,</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">right</span><span class="o">,</span> <span class="n">exact</span> <span class="o">⟨</span><span class="n">xel</span><span class="o">,</span> <span class="n">h</span><span class="o">⟩,</span> <span class="o">},</span> <span class="o">},</span>
<span class="kd">end</span>
</code></pre></div>



<a name="213641011"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213641011" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213641011">(Oct 17 2020 at 08:14)</a>:</h4>
<p>Referencing what Kevin said,</p>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership/near/213640493">said</a>:</p>
<blockquote>
<p>Because sets are functions taking values in Prop not bool</p>
</blockquote>
<p>what <code>decidable_pred</code> gives you is a way to, essentially, turn the <code>Prop</code>-valued set membership function into a <code>bool</code>-valued one.  However, this restricts which sets you're allowed to use this theorem with.</p>



<a name="213641208"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213641208" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> ZHAO Jinxiang <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213641208">(Oct 17 2020 at 08:21)</a>:</h4>
<p>Thank you very much. </p>
<p>But remove <code>[decidable_pred s]</code> in second example also works. Is by_cases introduce em?</p>



<a name="213641564"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213641564" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213641564">(Oct 17 2020 at 08:33)</a>:</h4>
<p>yes</p>



<a name="213641567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213641567" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213641567">(Oct 17 2020 at 08:33)</a>:</h4>
<p>well, it will use a decidable instance if it can</p>



<a name="213641620"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213641620" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> ZHAO Jinxiang <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213641620">(Oct 17 2020 at 08:35)</a>:</h4>
<p>So, if I want to force it only use <em>a decidable instance</em>, I should write the first style, <code>rcases p x with (h₁ | h₂)</code>.</p>



<a name="213641663"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213641663" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213641663">(Oct 17 2020 at 08:36)</a>:</h4>
<p>I'm a bit confused... it looks like the proofs that the tactics generate are exactly the same whether or not that <code>decidable_pred</code> is there.</p>



<a name="213641783"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213641783" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213641783">(Oct 17 2020 at 08:40)</a>:</h4>
<p>Oh, never mind.  I didn't set it to <code>pp.all</code>.  Without the <code>decidable_pred</code>, it uses <code>classical.prop_decidable</code> instead.</p>



<a name="213641840"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213641840" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213641840">(Oct 17 2020 at 08:42)</a>:</h4>
<p><span class="user-mention" data-user-id="329691">@ZHAO Jinxiang</span> I'm not sure what you should do -- I only wrote that because it came to mind.  I usually use classical reasoning within proofs myself.</p>



<a name="213641845"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213641845" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> ZHAO Jinxiang <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213641845">(Oct 17 2020 at 08:42)</a>:</h4>
<p>What's <code>pp.all</code>?</p>



<a name="213641898"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213641898" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213641898">(Oct 17 2020 at 08:44)</a>:</h4>
<p>First, I was using the command <code>#print union_diff_cancel</code> to get Lean to print the proof term.  Then I remembered to add <code>set_option pp.all true</code> before this to get it to show the full form of the term -- all implicit arguments become visible</p>



<a name="213641911"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213641911" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213641911">(Oct 17 2020 at 08:45)</a>:</h4>
<p>It turns out <code>set_option pp.implicit true</code> is enough to see the difference, and it's easier to read than <code>pp.all</code></p>



<a name="213641912"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213641912" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> ZHAO Jinxiang <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213641912">(Oct 17 2020 at 08:45)</a>:</h4>
<p>I am trying to translate <a href="https://www.springer.com/gp/book/9789811017896">a math book</a> to lean, I want to derive all theorems from axioms as much as possible.</p>



<a name="213641962"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213641962" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213641962">(Oct 17 2020 at 08:46)</a>:</h4>
<p>To be perfectly frank, lean isn't the best tool for proofs in a restricted logic, unless that logic is intuitionistic logic</p>



<a name="213641974"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213641974" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213641974">(Oct 17 2020 at 08:47)</a>:</h4>
<p>the majority of mathlib use is predicated on full classical logic</p>



<a name="213641977"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213641977" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213641977">(Oct 17 2020 at 08:47)</a>:</h4>
<p>Is there any reason you don't take <code>classical.em</code> as an axiom then?</p>



<a name="213641984"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213641984" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213641984">(Oct 17 2020 at 08:47)</a>:</h4>
<p>I would imagine that Tao's Analysis 1 is written for classical logic</p>



<a name="213642025"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213642025" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> ZHAO Jinxiang <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213642025">(Oct 17 2020 at 08:48)</a>:</h4>
<p>Yes.</p>



<a name="213642028"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213642028" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213642028">(Oct 17 2020 at 08:48)</a>:</h4>
<p>so then there are no problems</p>



<a name="213642030"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213642030" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213642030">(Oct 17 2020 at 08:48)</a>:</h4>
<p>just use mathlib normally</p>



<a name="213642032"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213642032" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> ZHAO Jinxiang <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213642032">(Oct 17 2020 at 08:48)</a>:</h4>
<p>Ok, I'll use classical logic. <span aria-label="joy" class="emoji emoji-1f602" role="img" title="joy">:joy:</span></p>



<a name="213642040"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213642040" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213642040">(Oct 17 2020 at 08:49)</a>:</h4>
<p>Also, have you looked at the proof of <code>classical.em</code>? It follows from other axioms.</p>



<a name="213642041"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213642041" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213642041">(Oct 17 2020 at 08:49)</a>:</h4>
<p>If you get too close to the foundations you will notice that the axioms don't match up 1-1 to a logic textbook, but the full theories are roughly equivalent</p>



<a name="213642089"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213642089" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213642089">(Oct 17 2020 at 08:50)</a>:</h4>
<p>like there is no axiom for "and elimination" in lean, it falls out of a much more general axiom schema for inductive types</p>



<a name="213642092"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213642092" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213642092">(Oct 17 2020 at 08:50)</a>:</h4>
<p>Both of the proofs of <code>union_diff_cancel</code> depend on the two axioms <code>classical.em</code> follows from, if I'm not mistaken.</p>



<a name="213642097"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213642097" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213642097">(Oct 17 2020 at 08:51)</a>:</h4>
<p><code>union_diff_cancel</code> is equivalent to EM</p>



<a name="213642103"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213642103" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213642103">(Oct 17 2020 at 08:51)</a>:</h4>
<p>Sure, what I mean is that the proof terms explicitly have the <code>propext</code> and <code>funext</code> (but as <code>set.ext</code>)</p>



<a name="213642145"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213642145" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213642145">(Oct 17 2020 at 08:52)</a>:</h4>
<p>so if that's true, there's no point avoiding <code>classical.em</code></p>



<a name="213642151"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213642151" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213642151">(Oct 17 2020 at 08:52)</a>:</h4>
<p>well the biggie is <code>classical.choice</code></p>



<a name="213642158"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213642158" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213642158">(Oct 17 2020 at 08:53)</a>:</h4>
<p>also <code>funext</code> isn't an axiom in lean</p>



<a name="213642289"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213642289" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213642289">(Oct 17 2020 at 08:57)</a>:</h4>
<p>(I know that <code>funext</code> comes from quotient types and I was using "axiom" loosely, but I did forget <code>classical.prop_decidable</code> used <code>classical.choice</code> in those last comments.)</p>



<a name="213642338"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213642338" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213642338">(Oct 17 2020 at 08:58)</a>:</h4>
<p>is it possible to make <code>by_cases</code> use <code>classical.em</code> when possible? (assuming anyone cared about <code>classical.choice</code> in their proofs?)</p>



<a name="213642469"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213642469" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213642469">(Oct 17 2020 at 09:02)</a>:</h4>
<p>Wasn't that added in <a href="https://github.com/leanprover-community/lean/issues/409">lean#409</a>?</p>



<a name="213642545"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213642545" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213642545">(Oct 17 2020 at 09:05)</a>:</h4>
<p>It looks like it uses <code>classical.prop_decidable</code> as a fallback, which is implemented with <code>classical.choice</code>.</p>



<a name="213642612"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213642612" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213642612">(Oct 17 2020 at 09:07)</a>:</h4>
<p>I'm ok with choice, so this isn't a serious question in any way.  But if anyone isn't ok with it, it seems like for <code>Prop</code> goals <code>by_cases</code> could use <code>classical.em</code> instead.</p>



<a name="213642616"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213642616" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213642616">(Oct 17 2020 at 09:07)</a>:</h4>
<p>Oh, sorry, I see what you mean now.</p>



<a name="213712597"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213712597" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> ZHAO Jinxiang <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213712597">(Oct 18 2020 at 15:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="306601">Kyle Miller</span> <a href="#narrow/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership/near/213640804">said</a>:</p>
<blockquote>
<p>You're ok if you assume the set <code>s</code> is given by a decidable predicate:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">union_diff_cancel</span> <span class="o">{</span><span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">}</span> <span class="o">[</span><span class="n">p</span> <span class="o">:</span> <span class="n">decidable_pred</span> <span class="n">s</span><span class="o">]</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">⊆</span> <span class="n">t</span><span class="o">)</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">∪</span> <span class="o">(</span><span class="n">t</span> <span class="bp">\</span> <span class="n">s</span><span class="o">)</span> <span class="bp">=</span> <span class="n">t</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">ext</span> <span class="n">x</span><span class="o">,</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">set.mem_diff</span><span class="o">,</span> <span class="n">set.mem_union_eq</span><span class="o">],</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rintros</span> <span class="o">(</span><span class="n">xel</span> <span class="bp">|</span> <span class="o">⟨</span><span class="n">xel</span><span class="o">,</span> <span class="n">xnel</span><span class="o">⟩),</span>
    <span class="n">exact</span> <span class="n">h</span> <span class="n">xel</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">xel</span><span class="o">,</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">intro</span> <span class="n">xel</span><span class="o">,</span>
    <span class="c1">-- by_cases x ∈ s, -- but expanded out using the instance just to show there's no classical.em sneaking in</span>
    <span class="n">rcases</span> <span class="n">p</span> <span class="n">x</span> <span class="k">with</span> <span class="o">(</span><span class="n">h₁</span> <span class="bp">|</span> <span class="n">h₂</span><span class="o">),</span>
    <span class="o">{</span> <span class="n">right</span><span class="o">,</span> <span class="n">exact</span> <span class="o">⟨</span><span class="n">xel</span><span class="o">,</span> <span class="n">h₁</span><span class="o">⟩,</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">left</span><span class="o">,</span> <span class="n">exact</span> <span class="n">h₂</span><span class="o">,</span> <span class="o">},</span> <span class="o">},</span>
<span class="kd">end</span>
</code></pre></div>

<p>Using <code>by_cases</code> like usual:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">union_diff_cancel</span> <span class="o">{</span><span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">}</span> <span class="o">[</span><span class="n">decidable_pred</span> <span class="n">s</span><span class="o">]</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">⊆</span> <span class="n">t</span><span class="o">)</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">∪</span> <span class="o">(</span><span class="n">t</span> <span class="bp">\</span> <span class="n">s</span><span class="o">)</span> <span class="bp">=</span> <span class="n">t</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">ext</span> <span class="n">x</span><span class="o">,</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">set.mem_diff</span><span class="o">,</span> <span class="n">set.mem_union_eq</span><span class="o">],</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rintros</span> <span class="o">(</span><span class="n">xel</span> <span class="bp">|</span> <span class="o">⟨</span><span class="n">xel</span><span class="o">,</span> <span class="n">xnel</span><span class="o">⟩),</span>
    <span class="n">exact</span> <span class="n">h</span> <span class="n">xel</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">xel</span><span class="o">,</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">intro</span> <span class="n">xel</span><span class="o">,</span>
    <span class="n">by_cases</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">s</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">left</span><span class="o">,</span> <span class="n">exact</span> <span class="n">h</span><span class="o">,</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">right</span><span class="o">,</span> <span class="n">exact</span> <span class="o">⟨</span><span class="n">xel</span><span class="o">,</span> <span class="n">h</span><span class="o">⟩,</span> <span class="o">},</span> <span class="o">},</span>
<span class="kd">end</span>
</code></pre></div>

</blockquote>
<p>What's the difference  with <code>t x</code> and <code>x ∈ t</code>?</p>



<a name="213712607"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213712607" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213712607">(Oct 18 2020 at 15:58)</a>:</h4>
<p>They are definitionally, but not syntactically, equal.</p>



<a name="213712622"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213712622" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> ZHAO Jinxiang <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213712622">(Oct 18 2020 at 15:59)</a>:</h4>
<p>Can we change it  syntactically?</p>



<a name="213712628"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213712628" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213712628">(Oct 18 2020 at 15:59)</a>:</h4>
<p><code>rw set.mem_def</code> I think</p>



<a name="213712967"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213712967" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> ZHAO Jinxiang <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213712967">(Oct 18 2020 at 16:07)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">union_diff_cancel</span> <span class="o">{</span><span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">}</span> <span class="o">[</span><span class="n">p</span> <span class="o">:</span> <span class="n">decidable_pred</span> <span class="n">s</span><span class="o">]</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">⊆</span> <span class="n">t</span><span class="o">)</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">∪</span> <span class="o">(</span><span class="n">t</span> <span class="bp">\</span> <span class="n">s</span><span class="o">)</span> <span class="bp">=</span> <span class="n">t</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">ext</span> <span class="n">x</span><span class="o">,</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">set.mem_diff</span><span class="o">,</span> <span class="n">set.mem_union_eq</span><span class="o">],</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rintros</span> <span class="o">(</span><span class="n">xel</span> <span class="bp">|</span> <span class="o">⟨</span><span class="n">xel</span><span class="o">,</span> <span class="n">xnel</span><span class="o">⟩),</span>
    <span class="n">exact</span> <span class="n">h</span> <span class="n">xel</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">xel</span><span class="o">,</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">intro</span> <span class="n">xel</span><span class="o">,</span>
    <span class="n">rcases</span> <span class="n">p</span> <span class="n">x</span> <span class="k">with</span> <span class="o">(</span><span class="n">h₁</span> <span class="bp">|</span> <span class="n">h₂</span><span class="o">),</span>
    <span class="o">{</span>
      <span class="n">rewrite</span> <span class="bp">&lt;-</span><span class="n">set.mem_def</span> <span class="n">at</span> <span class="n">h₁</span><span class="o">,</span>  <span class="c1">-- rewrite tactic failed, did not find instance of the pattern in the target expression</span>
      <span class="n">right</span><span class="o">,</span> <span class="n">exact</span> <span class="o">⟨</span><span class="n">xel</span><span class="o">,</span> <span class="n">h₁</span><span class="o">⟩,</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">left</span><span class="o">,</span> <span class="n">exact</span> <span class="n">h₂</span><span class="o">,</span> <span class="o">},</span> <span class="o">},</span>
<span class="kd">end</span>
</code></pre></div>



<a name="213730416"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213730416" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213730416">(Oct 18 2020 at 22:56)</a>:</h4>
<p><code>      rewrite ← @set.mem_def _ x s at h₁,</code> works. Lean needs some hints for some reason</p>



<a name="213730938"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213730938" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213730938">(Oct 18 2020 at 23:09)</a>:</h4>
<p><span class="user-mention silent" data-user-id="329691">ZHAO Jinxiang</span> <a href="#narrow/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership/near/213712597">said</a>:</p>
<blockquote>
<p>What's the difference  with <code>t x</code> and <code>x ∈ t</code>?</p>
</blockquote>
<p><code>x ∈ t</code> is defined to be <code>t x</code>, and should <em>always</em> be favored. It is a bad habit to break the abstraction barrier of sets. The phrase <code>decidable_pred s</code> also breaks the abstraction barrier, and should be replaced by <code>decidable_pred (∈ s)</code>.</p>



<a name="213731928"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/law%20of%20excluded%20middle%20in%20set%20membership/near/213731928" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/law.20of.20excluded.20middle.20in.20set.20membership.html#213731928">(Oct 18 2020 at 23:41)</a>:</h4>
<p>There is an instance <code>[decidable_pred s] : decidable_pred (∈s)</code>, so at least this doesn't create diamonds.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>