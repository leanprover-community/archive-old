---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/groebner.20basis.20algorithm.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html">groebner basis algorithm</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="197206992"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197206992" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197206992">(May 11 2020 at 21:28)</a>:</h4>
<p>I don't really know what a groebner basis algorithm is, except that </p>
<ol>
<li>
<p>it's a generalization of the <code>ring</code> tactic and </p>
</li>
<li>
<p>sage has an implementation that is fast enough to be useful to people doing exploratory mathematics</p>
</li>
</ol>
<p>question: does the grobner basis method produce small witnesses checkable by <code>ring</code>? if so, can we get <code>ring++</code> in Lean by "just" shelling out to an oracle?</p>



<a name="197208494"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197208494" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197208494">(May 11 2020 at 21:45)</a>:</h4>
<p>Yes, this is possible but you need to understand what elements of the coefficients ring are equal to zero.</p>



<a name="197208725"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197208725" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197208725">(May 11 2020 at 21:47)</a>:</h4>
<p>Coq has a per-field/ring set of tactics that deal with coefficients, and this set of tactics is used by <code>ring</code>, <code>field</code>, and <code>groebner</code> (not sure about exact names).</p>



<a name="197208891"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197208891" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197208891">(May 11 2020 at 21:49)</a>:</h4>
<p>I've also had this thought, I think this is a really achievable goal, what's needed is  enough of the theory to give Buchberger's criterion, this should be enough that lean can check the witness, then Sage or Singular can be called to produce a basis.</p>



<a name="197209114"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197209114" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197209114">(May 11 2020 at 21:51)</a>:</h4>
<p>If all we want is a tactic that solves a goal <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mn>1</mn></msub><mo stretchy="false">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy="false">)</mo><mo>=</mo><mn>0</mn><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msub><mi>P</mi><mi>k</mi></msub><mo stretchy="false">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy="false">)</mo><mo>=</mo><mn>0</mn><mo>⊢</mo><mi>Q</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msub><mi>x</mi><mi>n</mi></msub><mo stretchy="false">)</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">P_1(x_1, \dots, x_n) = 0, \dots, P_k(x_1, \dots, x_n)=0 \vdash Q(x_1, \dots, x_n)=0</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⊢</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">Q</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>, then we don't need any theory to check the witness.</p>



<a name="197209416"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197209416" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197209416">(May 11 2020 at 21:54)</a>:</h4>
<p>Because the witness has a form <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo stretchy="false">(</mo><msub><mi>P</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msub><mi>P</mi><mi>k</mi></msub><mo stretchy="false">)</mo><mo>=</mo><msup><mi>Q</mi><mi>m</mi></msup></mrow><annotation encoding="application/x-tex">R(P_1, \dots, P_k)=Q^m</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault">Q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">m</span></span></span></span></span></span></span></span></span></span></span>.</p>



<a name="197209526"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197209526" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197209526">(May 11 2020 at 21:55)</a>:</h4>
<p>On the other hand, it would be nice to have a function that verifies <code>is_groebner_basis</code> predicate but this can be postponed.</p>



<a name="197210882"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197210882" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197210882">(May 11 2020 at 22:09)</a>:</h4>
<p>Yes this is a job which would be perfect for an external solver like sage and it would not surprise me at all if <span class="user-mention" data-user-id="116034">@William Stein</span> could help. <span class="user-mention" data-user-id="110596">@Rob Lewis</span> set this up with Mathematica before, right?</p>



<a name="197210931"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197210931" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197210931">(May 11 2020 at 22:09)</a>:</h4>
<p>The "normal"algebra package finds a relation and then <code>ring</code> formally checks it</p>



<a name="197211031"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197211031" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197211031">(May 11 2020 at 22:10)</a>:</h4>
<p><span class="user-mention" data-user-id="110043">@Gabriel Ebner</span>'s hammer project would also be a good template for calling an external program, parsing the result into lean and then doing something with it I think.</p>



<a name="197211581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197211581" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197211581">(May 11 2020 at 22:15)</a>:</h4>
<p>It would be great to have a Sage link, but I think for this purpose calling one of the underlying libraries of Sage to calculate groebner bases might be simpler (and faster) to begin with.</p>



<a name="197246223"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197246223" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197246223">(May 12 2020 at 08:30)</a>:</h4>
<p>Some people at the VU have worked on Gröbner bases a while back, but I believe it's dormant now. I'll ask about the current state and see if they want to share the work in progress.</p>



<a name="197246416"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197246416" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197246416">(May 12 2020 at 08:32)</a>:</h4>
<p>every project not PR'd into mathlib is lost in time</p>



<a name="197248899"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197248899" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197248899">(May 12 2020 at 08:59)</a>:</h4>
<p>Do you know if they were actually implementing the algorithm in Lean? Because this is one of these situations where a result is far easier to check than to discover, the discovering might be best left to an external program</p>



<a name="197249212"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197249212" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197249212">(May 12 2020 at 09:02)</a>:</h4>
<p>The project at the VU did implement the algorithm in Lean, but I think resurrecting it will be a big challenge.</p>



<a name="197249269"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197249269" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197249269">(May 12 2020 at 09:03)</a>:</h4>
<p>Doing this with an external computation is totally reasonable. The problem is, how do we integrate that into mathlib? Do we make Sage a dependency for compiling the library?</p>



<a name="197249309"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197249309" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197249309">(May 12 2020 at 09:03)</a>:</h4>
<p>Who wants to stay up to date on compatibility with different OSs, Python versions, Sage versions, ...?</p>



<a name="197249374"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197249374" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197249374">(May 12 2020 at 09:04)</a>:</h4>
<p>I guess this shouldn't be in mathlib?</p>



<a name="197249418"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197249418" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197249418">(May 12 2020 at 09:04)</a>:</h4>
<p>Or the tactic should just break if the dependency isn't there?</p>



<a name="197249421"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197249421" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197249421">(May 12 2020 at 09:04)</a>:</h4>
<p>We don't need to leave calls to Sage in the library, so maybe it's not a requirement to compile. But there's still some presumption that if the tactic is available someone keeps it working.</p>



<a name="197249498"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197249498" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197249498">(May 12 2020 at 09:05)</a>:</h4>
<p>It's similar to worries about <a href="https://github.com/leanprover-community/mathlib/issues/1083">#1083</a></p>



<a name="197249549"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197249549" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197249549">(May 12 2020 at 09:06)</a>:</h4>
<p>This is one of these tactics like library_search where you run it once and it says "type this instead" and whoever types this instead doesn't need sage</p>



<a name="197249651"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197249651" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197249651">(May 12 2020 at 09:07)</a>:</h4>
<p>Right, but if you want to run it once, you do need Sage, so a lot of people are going to show up on this chat asking "why doesn't <code>groebner</code> work for me?"</p>



<a name="197249776"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197249776" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197249776">(May 12 2020 at 09:08)</a>:</h4>
<p>Maybe if we call it <code>groebner_sage</code> we will get less of those questions?</p>



<a name="197249790"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197249790" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197249790">(May 12 2020 at 09:08)</a>:</h4>
<p>Or <code>sage.groebner</code></p>



<a name="197249813"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197249813" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197249813">(May 12 2020 at 09:09)</a>:</h4>
<p>Again, it's the same situation as <a href="https://github.com/leanprover-community/mathlib/issues/1083">#1083</a> or sledgehammer or anything with external dependencies. I'm not saying don't do it. Just make sure it's worth the support costs.</p>



<a name="197249853"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197249853" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197249853">(May 12 2020 at 09:09)</a>:</h4>
<p>/ know who's tasked with supporting it and what they're willing to help with.</p>



<a name="197250276"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197250276" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197250276">(May 12 2020 at 09:15)</a>:</h4>
<p>I think the first step is to write the <code>ring ++</code> tactic that can be used as the target for these <code>groebner</code> calls</p>



<a name="197250649"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197250649" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197250649">(May 12 2020 at 09:19)</a>:</h4>
<p>I'm imagining an interface like <code>ring [(x + y, h1), (z, &lt;- h2)]</code> which checks that if the goal is <code>a = b</code> and <code>h1 : l1 = r1</code> and <code>h2 : l2 = r2</code>, then <code>a - (x + y) * l1 - z * r2 = b - (x + y) * r1 - z * l2</code> is an equality in commutative rings</p>



<a name="197250779"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197250779" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197250779">(May 12 2020 at 09:21)</a>:</h4>
<p>Importantly, you don't need sage to use this tactic; in many instances it is perfectly within the ability of the user to come up with coefficients making the invocation work</p>



<a name="197251089"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197251089" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197251089">(May 12 2020 at 09:24)</a>:</h4>
<p>Wow, this looks like a much easier endeavour and Mario is absolutely right, in many cases the user will be able to solve for the coefficients by themselves. And in the manual it could say "if you are lazy and don't want to work out the coefficients of h1 and h2 yourself, then type "sage.ring_hint" and cut and paste the resulting code into sage, and then cut and paste the output of the sage code back into Lean" :-)</p>



<a name="197251314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197251314" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197251314">(May 12 2020 at 09:27)</a>:</h4>
<p>Even if you do need sage, can sage not just return a certificate that can be passed as an argument to the tactic?</p>



<a name="197251382"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197251382" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197251382">(May 12 2020 at 09:28)</a>:</h4>
<p>So there's one version that interfaces with sage and one that just asks for the certificate.</p>



<a name="197251396"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197251396" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197251396">(May 12 2020 at 09:28)</a>:</h4>
<p>yes, but if the replacement tactic is so arcane that it can't be used directly, then you still need to use sage to construct the proof</p>



<a name="197251462"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197251462" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197251462">(May 12 2020 at 09:29)</a>:</h4>
<p>In <span class="user-mention" data-user-id="235513">@Daniel Fabian</span> 's example from yesterday, he had</p>
<div class="codehilite"><pre><span></span><code><span class="n">h1</span> <span class="o">:</span> <span class="n">f</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">k</span><span class="o">))</span> <span class="bp">+</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">f</span> <span class="o">(</span><span class="n">l</span> <span class="bp">-</span> <span class="n">a</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f</span> <span class="o">(</span><span class="n">f</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="n">l</span><span class="o">)),</span>
<span class="n">h2</span> <span class="o">:</span> <span class="n">f</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">+</span> <span class="n">k</span><span class="o">))</span> <span class="bp">+</span> <span class="mi">2</span> <span class="bp">*</span> <span class="n">f</span> <span class="o">(</span><span class="n">l</span> <span class="bp">-</span> <span class="n">b</span><span class="o">)</span> <span class="bp">=</span> <span class="n">f</span> <span class="o">(</span><span class="n">f</span> <span class="o">(</span><span class="n">k</span> <span class="bp">+</span> <span class="n">l</span><span class="o">))</span>
<span class="err">⊢</span> <span class="mi">2</span> <span class="bp">*</span> <span class="o">(</span><span class="n">f</span> <span class="o">(</span><span class="n">l</span> <span class="bp">-</span> <span class="n">a</span><span class="o">)</span> <span class="bp">-</span> <span class="n">f</span> <span class="o">(</span><span class="n">l</span> <span class="bp">-</span> <span class="n">b</span><span class="o">))</span> <span class="bp">=</span> <span class="n">f</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="o">(</span><span class="n">b</span> <span class="bp">+</span> <span class="n">k</span><span class="o">))</span> <span class="bp">-</span> <span class="n">f</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">k</span><span class="o">))</span>
</code></pre></div>


<p>and <code>ring++ [(1,h1),(1,&lt;-h2)]</code> would do it, as would <code>ring++ [(1,h1),(-1,h2)]</code> (note in particular that there is no need for <code>&lt;-</code> I guess). The fact that these numbers are +-1 is why <code>linarith</code> solved it, but in general they won't be.</p>



<a name="197251528"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197251528" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197251528">(May 12 2020 at 09:30)</a>:</h4>
<p>the back arrow (and the subtractions in my gloss of what they mean) are to support semirings</p>



<a name="197251561"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197251561" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197251561">(May 12 2020 at 09:30)</a>:</h4>
<p>rofl</p>



<a name="197251649"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197251649" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197251649">(May 12 2020 at 09:31)</a>:</h4>
<p><span class="user-mention" data-user-id="110044">@Chris Hughes</span>  for example, if you are a maintainer and are fixing a broken proof, and the certificate no longer works, you need to have sage to regenerate the proof</p>



<a name="197252426"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197252426" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197252426">(May 12 2020 at 09:39)</a>:</h4>
<p>If you were fairly strict about how to use it, then it might be okay. As in you always used it as <code>have _ : by groebner [certificate]</code>, then the proofs would be fairly stable</p>



<a name="197252498"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197252498" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197252498">(May 12 2020 at 09:39)</a>:</h4>
<p>If this is implemented, it would be great if the Sage call could fall back to a Lean implementation. Try the fast one first, but if Sage isn't there, do it natively. A rudimentary meta groebner basis algorithm isn't crazy hard.</p>



<a name="197253017"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197253017" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197253017">(May 12 2020 at 09:45)</a>:</h4>
<p>how expensive is FFI to sage/mathematica? Is it possible that the lean version will win for not being "external"?</p>



<a name="197253225"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197253225" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197253225">(May 12 2020 at 09:47)</a>:</h4>
<p>It depends how much effort you put into the architecture of both. Sage and Mathematica are both very expensive to start up. If you don't have a server running, the native version will probably win for small problems, especially if you do a decent job implementing it.</p>



<a name="197254209"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197254209" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197254209">(May 12 2020 at 09:57)</a>:</h4>
<p>In case there are any people who don't really know what Groebner bases are, here is a summary of what is going on.</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="n">a</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">=</span> <span class="n">b</span><span class="bp">^</span><span class="mi">2</span><span class="o">)</span> <span class="o">(</span><span class="n">h2</span> <span class="o">:</span> <span class="n">a</span><span class="bp">^</span><span class="mi">3</span><span class="bp">=</span><span class="n">b</span><span class="bp">^</span><span class="mi">4</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span><span class="bp">^</span><span class="mi">8</span><span class="bp">=</span><span class="n">b</span><span class="bp">^</span><span class="mi">10</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="c1">-- proof which contains a human-generated mathematical idea</span>
  <span class="n">rw</span> <span class="o">(</span><span class="k">show</span> <span class="n">a</span><span class="bp">^</span><span class="mi">8</span> <span class="bp">=</span> <span class="n">a</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">*</span> <span class="n">a</span><span class="bp">^</span><span class="mi">3</span> <span class="bp">*</span> <span class="n">a</span><span class="bp">^</span><span class="mi">3</span><span class="o">,</span> <span class="k">by</span> <span class="n">ring</span><span class="o">),</span>
  <span class="n">rw</span> <span class="n">h1</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">h2</span><span class="o">,</span>
  <span class="n">ring</span> <span class="c1">-- note `ring` called twice, once to implement the idea and once to finish the job</span>
<span class="kn">end</span>

<span class="c1">-- the Commelin-Barton trick</span>
<span class="bp">@</span><span class="o">[</span><span class="kn">reducible</span><span class="o">]</span> <span class="n">def</span> <span class="n">eq</span><span class="bp">.</span><span class="n">lhs</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">e</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">)</span> <span class="o">:</span> <span class="n">α</span> <span class="o">:=</span> <span class="n">x</span>
<span class="bp">@</span><span class="o">[</span><span class="kn">reducible</span><span class="o">]</span> <span class="n">def</span> <span class="n">eq</span><span class="bp">.</span><span class="n">rhs</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">e</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span><span class="o">)</span> <span class="o">:</span> <span class="n">α</span> <span class="o">:=</span> <span class="n">y</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="n">a</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">=</span> <span class="n">b</span><span class="bp">^</span><span class="mi">2</span><span class="o">)</span> <span class="o">(</span><span class="n">h2</span> <span class="o">:</span> <span class="n">a</span><span class="bp">^</span><span class="mi">3</span> <span class="bp">=</span> <span class="n">b</span><span class="bp">^</span><span class="mi">4</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span><span class="bp">^</span><span class="mi">8</span> <span class="bp">=</span> <span class="n">b</span><span class="bp">^</span><span class="mi">10</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="c1">-- &quot;the same&quot; human-generated idea, in a different format</span>
  <span class="n">suffices</span> <span class="o">:</span> <span class="n">a</span><span class="bp">^</span><span class="mi">8</span>  <span class="bp">+</span> <span class="n">a</span><span class="bp">^</span><span class="mi">6</span><span class="bp">*</span><span class="n">h1</span><span class="bp">.</span><span class="n">rhs</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">^</span><span class="mi">6</span><span class="bp">*</span><span class="n">h2</span><span class="bp">.</span><span class="n">rhs</span> <span class="bp">+</span> <span class="n">a</span><span class="bp">^</span><span class="mi">3</span><span class="bp">*</span><span class="n">b</span><span class="bp">^</span><span class="mi">2</span><span class="bp">*</span><span class="n">h2</span><span class="bp">.</span><span class="n">rhs</span> <span class="bp">=</span>
             <span class="n">b</span><span class="bp">^</span><span class="mi">10</span> <span class="bp">+</span> <span class="n">a</span><span class="bp">^</span><span class="mi">6</span><span class="bp">*</span><span class="n">h1</span><span class="bp">.</span><span class="n">lhs</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">^</span><span class="mi">6</span><span class="bp">*</span><span class="n">h2</span><span class="bp">.</span><span class="n">lhs</span> <span class="bp">+</span> <span class="n">a</span><span class="bp">^</span><span class="mi">3</span><span class="bp">*</span><span class="n">b</span><span class="bp">^</span><span class="mi">2</span><span class="bp">*</span><span class="n">h2</span><span class="bp">.</span><span class="n">lhs</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="o">(</span><span class="k">show</span> <span class="n">eq</span><span class="bp">.</span><span class="n">lhs</span> <span class="n">h1</span> <span class="bp">=</span> <span class="n">eq</span><span class="bp">.</span><span class="n">rhs</span> <span class="n">h1</span><span class="o">,</span> <span class="k">from</span> <span class="n">h1</span><span class="o">)</span> <span class="n">at</span> <span class="n">this</span><span class="o">,</span>
    <span class="n">rw</span> <span class="o">(</span><span class="k">show</span> <span class="n">eq</span><span class="bp">.</span><span class="n">lhs</span> <span class="n">h2</span> <span class="bp">=</span> <span class="n">eq</span><span class="bp">.</span><span class="n">rhs</span> <span class="n">h2</span><span class="o">,</span> <span class="k">from</span> <span class="n">h2</span><span class="o">)</span> <span class="n">at</span> <span class="n">this</span><span class="o">,</span>
    <span class="n">simp</span> <span class="n">at</span> <span class="n">this</span><span class="o">,</span> <span class="n">exact</span> <span class="n">this</span><span class="o">},</span> <span class="c1">-- note: no `ring` needed</span>
  <span class="n">unfold</span> <span class="n">eq</span><span class="bp">.</span><span class="n">lhs</span> <span class="n">eq</span><span class="bp">.</span><span class="n">rhs</span><span class="o">,</span>
  <span class="n">ring</span><span class="o">,</span>
<span class="kn">end</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="n">a</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">=</span> <span class="n">b</span><span class="bp">^</span><span class="mi">2</span><span class="o">)</span> <span class="o">(</span><span class="n">h2</span> <span class="o">:</span> <span class="n">a</span><span class="bp">^</span><span class="mi">3</span> <span class="bp">=</span> <span class="n">b</span><span class="bp">^</span><span class="mi">4</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span><span class="bp">^</span><span class="mi">8</span> <span class="bp">=</span> <span class="n">b</span><span class="bp">^</span><span class="mi">10</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="c1">-- the above script, all packed into a tactic</span>
  <span class="n">ring</span><span class="bp">++</span> <span class="o">[(</span><span class="n">a</span><span class="bp">^</span><span class="mi">6</span><span class="o">,</span> <span class="err">←</span><span class="n">h1</span><span class="o">),</span> <span class="o">(</span><span class="n">b</span><span class="bp">^</span><span class="mi">6</span><span class="bp">+</span><span class="n">a</span><span class="bp">^</span><span class="mi">3</span><span class="bp">*</span><span class="n">b</span><span class="bp">^</span><span class="mi">2</span><span class="o">,</span> <span class="err">←</span><span class="n">h2</span><span class="o">)]</span>
  <span class="c1">-- doesn&#39;t work yet though</span>
<span class="kn">end</span>

<span class="c">/-</span><span class="cm"></span>
<span class="cm">The underlying question: Let R be the ring ℤ[A,B] and let I be the ideal (A^2-B^2,A^3-B^4).</span>
<span class="cm">Is A^8-B^10 in I? Yes it is, because it&#39;s A^6(A^2-B^2)+(A^3B^2+B^6)(A^3-B^4)</span>

<span class="cm">The point is a computer algebra package such as SAGE could find the representation of A^8-B^10</span>
<span class="cm">and then ring++ can just take the inputs and check that the computer algebra package gave</span>
<span class="cm">the right answer</span>
<span class="cm">-/</span>
</code></pre></div>



<a name="197254540"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197254540" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197254540">(May 12 2020 at 10:00)</a>:</h4>
<p>thanks for the explanation; that makes it very clear</p>



<a name="197254572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197254572" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197254572">(May 12 2020 at 10:00)</a>:</h4>
<p>I never know if you are being sarcastic ;-)</p>



<a name="197254590"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197254590" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197254590">(May 12 2020 at 10:00)</a>:</h4>
<p>your proof is a bit unexpected. I would have expected something akin to <code>h1 * h2 * h2</code></p>



<a name="197254649"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197254649" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197254649">(May 12 2020 at 10:01)</a>:</h4>
<p>I guess this is part of the grobner basis idea that this can be written as a linear function of the h's</p>



<a name="197254666"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197254666" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197254666">(May 12 2020 at 10:01)</a>:</h4>
<p>Yes, the problem is that to prove (h2.lhs)^2=(h2.rhs)^2 you have to write 0 as a difference of two squares and observe that one of the factors is zero</p>



<a name="197254733"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197254733" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197254733">(May 12 2020 at 10:02)</a>:</h4>
<p>b^6+a^3b^2=b^2(b^4+a^3) which is the LHS+RHS factor for h2.</p>



<a name="197254751"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197254751" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197254751">(May 12 2020 at 10:02)</a>:</h4>
<p>but that's not true, right? I mean <code>h2.lhs^2 = h2.rhs^2</code> follows trivially from <code>h2.lhs = h2.rhs</code></p>



<a name="197254771"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197254771" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197254771">(May 12 2020 at 10:03)</a>:</h4>
<p>But your ring++ specification didn't have this</p>



<a name="197254779"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197254779" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197254779">(May 12 2020 at 10:03)</a>:</h4>
<p>that is true</p>



<a name="197254793"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197254793" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197254793">(May 12 2020 at 10:03)</a>:</h4>
<p>I could only subtract <code>c*h1.lhs</code> and <code>c*h1.rhs</code>, but I know how all this works in practice so I just worked around it</p>



<a name="197254821"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197254821" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197254821">(May 12 2020 at 10:03)</a>:</h4>
<p>I was thinking abot being able to write some equation like <code>h1 * h2 * h2</code> where it means what you think it means</p>



<a name="197254939"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197254939" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197254939">(May 12 2020 at 10:04)</a>:</h4>
<p>If <code>ring++</code> is to be a human usable tactic, I think it should probably allow such things even if they aren't strictly required for the ideal membership problem</p>



<a name="197254948"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197254948" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197254948">(May 12 2020 at 10:05)</a>:</h4>
<p>If you're happy with more work for you, that's great. I'm observing that <code>ring++</code> in the form you proposed seems to me to be writable in a small amount of code and provides a tool which looks like it might already be really useful.</p>



<a name="197255023"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197255023" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197255023">(May 12 2020 at 10:06)</a>:</h4>
<p>I believe that a grobner basis algorithm will always produce a certificate which is a linear function of the hypotheses</p>



<a name="197255065"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197255065" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197255065">(May 12 2020 at 10:06)</a>:</h4>
<p>It should be easy to write the Sage code which turns <code>(h1 : a^2 = b^2) (h2 : a^3 = b^4) : a^8 = b^10</code> into <code> ring++ [(a^6, ←h1), (b^6+a^3*b^2, ←h2)]</code></p>



<a name="197255238"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197255238" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197255238">(May 12 2020 at 10:08)</a>:</h4>
<p>You are proposing making something easier for humans to use, and of course the easier it is for humans to use the better, but what has dawned on me is that even this "stupid" version of <code>ring++</code> where there is no syntax for being able to add <code>h1.lhs*h3.rhs^2</code> to one side and <code>h1.rhs*h3.lhs^2</code> to the other, is still something which has got far more power than I had realised.</p>



<a name="197255253"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197255253" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197255253">(May 12 2020 at 10:09)</a>:</h4>
<p>because I can write sage code from there</p>



<a name="197255412"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197255412" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197255412">(May 12 2020 at 10:10)</a>:</h4>
<p>I think another way to think about the coefficients you got is to successively rewrite <code>a^2 * a^3 * a^3 = b^2 * a^3 * a^3 = b^2 * b^4 * a^3 = b^2 * b^4 * b^4</code>. Each equality is a coefficient times one of the hypotheses, and the chaining is adding the functions together, so you get a linear combination in the end</p>



<a name="197256430"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197256430" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197256430">(May 12 2020 at 10:22)</a>:</h4>
<p>I think that what's happening now is that you are interested in making some kind of better, or easier-to-use algorithm, but this is not the kind of thing I know anything about; I can already see the path to enlightenment and it uses external forces which I have (computer algebra packages), so as far as I am concerned the problem is solved.</p>



<a name="197257241"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197257241" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197257241">(May 12 2020 at 10:33)</a>:</h4>
<p>rather, I'm reverse engineering where you got those constants since they weren't in the first version of the proof</p>



<a name="197257302"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197257302" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197257302">(May 12 2020 at 10:34)</a>:</h4>
<p>oh but they're just obvious ;-)</p>



<a name="197257318"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197257318" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197257318">(May 12 2020 at 10:34)</a>:</h4>
<p>The second rewrite is really two rewrites. I am doing them separately</p>



<a name="197257334"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197257334" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197257334">(May 12 2020 at 10:34)</a>:</h4>
<p>The first changes <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>a</mi><mn>6</mn></msup><msup><mi>a</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">a^6a^2</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">6</span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span> into <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>a</mi><mn>6</mn></msup><msup><mi>b</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">a^6b^2</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">6</span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></p>



<a name="197257336"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197257336" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197257336">(May 12 2020 at 10:34)</a>:</h4>
<p>as for making <code>ring ++</code>, there is no real added difficulty in multiplying equations compared to adding them. Especially if you give the remainder term, this is pretty trivial and you can have the equations under arbitrary functions</p>



<a name="197257368"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197257368" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197257368">(May 12 2020 at 10:35)</a>:</h4>
<p>the second changes <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>a</mi><mn>6</mn></msup><msup><mi>b</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">a^6b^2</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">6</span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span> into <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>a</mi><mn>3</mn></msup><msup><mi>b</mi><mn>6</mn></msup></mrow><annotation encoding="application/x-tex">a^3b^6</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">6</span></span></span></span></span></span></span></span></span></span></span> and the third changes that to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>b</mi><mn>10</mn></msup></mrow><annotation encoding="application/x-tex">b^{10}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">0</span></span></span></span></span></span></span></span></span></span></span></span>. I guess I wrote them in a different order though.</p>



<a name="197257484"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197257484" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197257484">(May 12 2020 at 10:36)</a>:</h4>
<p>actually, the version I proposed might still not be sufficient for semirings unless you include transitivity</p>



<a name="197257490"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197257490" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197257490">(May 12 2020 at 10:36)</a>:</h4>
<p>I am too unimaginative to imagine the syntax for "now add <code>h1.L*h3.R^2</code> to one side and <code>h1.R*h3.L^2</code> to the other"</p>



<a name="197257520"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197257520" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197257520">(May 12 2020 at 10:37)</a>:</h4>
<p>I am just thinking about literally writing <code>ring h1 * h2 * h2</code></p>



<a name="197257608"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197257608" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197257608">(May 12 2020 at 10:38)</a>:</h4>
<p>Of course I personally don't care about semirings. If I ever have an equality between naturals which I want to prove, then I can embed it into the integers and prove it there, and if it uses subtraction then I already did something wrong (I didn't embed into the integers early enough).</p>



<a name="197257633"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197257633" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197257633">(May 12 2020 at 10:38)</a>:</h4>
<p>Nat subtraction does not exist in maths so you never see it in the wild</p>



<a name="197257645"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197257645" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197257645">(May 12 2020 at 10:38)</a>:</h4>
<p>We see it in the wild all the time</p>



<a name="197257656"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197257656" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197257656">(May 12 2020 at 10:38)</a>:</h4>
<p>the lean wild</p>



<a name="197257669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197257669" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197257669">(May 12 2020 at 10:39)</a>:</h4>
<p>same with nat equalities</p>



<a name="197257677"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197257677" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197257677">(May 12 2020 at 10:39)</a>:</h4>
<p>Now we have <code>norm_cast</code> I just move between nat and int freely.</p>



<a name="197257716"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197257716" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197257716">(May 12 2020 at 10:39)</a>:</h4>
<p>Yeah you see nat subtraction in CS Lean, but in CS lean you surely don't see complicated Groebner bases questions? <code>omega</code> will do for you, right?</p>



<a name="197257727"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197257727" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197257727">(May 12 2020 at 10:39)</a>:</h4>
<p>Sure you do</p>



<a name="197257779"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197257779" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197257779">(May 12 2020 at 10:40)</a>:</h4>
<p>Oh OK I stand corrected!</p>



<a name="197257795"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197257795" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197257795">(May 12 2020 at 10:40)</a>:</h4>
<p>That problem that you used in the example could just as easily have been on nat</p>



<a name="197257813"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197257813" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197257813">(May 12 2020 at 10:40)</a>:</h4>
<p>Sure, but it's not a problem a computer scientist needs to solve when they're verifying that their code has no bugs</p>



<a name="197257847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197257847" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197257847">(May 12 2020 at 10:40)</a>:</h4>
<p>whereas it's the sort of thing which comes up all the time in number theory</p>



<a name="197257881"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197257881" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197257881">(May 12 2020 at 10:41)</a>:</h4>
<p>except that we can move to int</p>



<a name="197257914"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197257914" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197257914">(May 12 2020 at 10:41)</a>:</h4>
<p>I know for a fact that linear arithmetic comes up all the time, and this is essentially the equality version</p>



<a name="197257994"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197257994" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197257994">(May 12 2020 at 10:42)</a>:</h4>
<p>but you already have <code>linarith</code>, which Patrick observed solved Daniel Fabian's question.</p>



<a name="197258015"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197258015" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197258015">(May 12 2020 at 10:42)</a>:</h4>
<p>Do we have a generic construction for putting negation in a semiring?</p>



<a name="197258061"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197258061" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197258061">(May 12 2020 at 10:43)</a>:</h4>
<p>You mean localising it? I think that <span class="user-mention" data-user-id="118107">@Amelia Livingston</span> has worked her socks off with this.</p>



<a name="197258083"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197258083" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197258083">(May 12 2020 at 10:43)</a>:</h4>
<p>although she is in the middle of UG maths exams now (like Chris)</p>



<a name="197258092"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197258092" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197258092">(May 12 2020 at 10:43)</a>:</h4>
<p>is it good enough to be used behind the scenes by <code>ring ++</code>?</p>



<a name="197258100"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197258100" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197258100">(May 12 2020 at 10:44)</a>:</h4>
<p>Now that I don't know.</p>



<a name="197258147"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197258147" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197258147">(May 12 2020 at 10:44)</a>:</h4>
<p>In particular does it need additional hypotheses on the semiring</p>



<a name="197258185"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197258185" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197258185">(May 12 2020 at 10:44)</a>:</h4>
<p>The map from the semiring to its ringification won't be injective in general</p>



<a name="197258342"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197258342" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197258342">(May 12 2020 at 10:46)</a>:</h4>
<p>that's... bad, right?</p>



<a name="197258565"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197258565" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197258565">(May 12 2020 at 10:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/116395-maths/topic/groebner.20basis.20algorithm/near/197257520">said</a>:</p>
<blockquote>
<p>I am just thinking about literally writing <code>ring h1 * h2 * h2</code></p>
</blockquote>
<p>My example is too superficial perhaps. In general life won't be as easy as this.</p>



<a name="197258669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197258669" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197258669">(May 12 2020 at 10:50)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/116395-maths/topic/groebner.20basis.20algorithm/near/197258342">said</a>:</p>
<blockquote>
<p>that's... bad, right?</p>
</blockquote>
<p>Well the question as to whether a computer scientist cares about a non-ring semiring whose map to its ringification is not injective is one for which I'd be surprised to hear that the answer was "yes", but you already surprised me once.</p>



<a name="197258672"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197258672" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197258672">(May 12 2020 at 10:50)</a>:</h4>
<p>Isn't it though? At least for everything covered by grobner basis algorithm it is <code>ring a * h1 + b * h2.symm</code> and so on</p>



<a name="197258695"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197258695" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197258695">(May 12 2020 at 10:50)</a>:</h4>
<p>Yes, but we just got lucky that the goal literally was h1h2^2</p>



<a name="197258763"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197258763" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197258763">(May 12 2020 at 10:51)</a>:</h4>
<blockquote>
<p>Well the question as to whether a computer scientist cares about a non-ring semiring whose map to its ringification is not injective is one for which I'd be surprised to hear that the answer was "yes", but you already surprised me once.</p>
</blockquote>
<p>The CS problem is not <em>that</em> the map is not injective, but rather that we don't <em>have available</em> the knowledge that the map is injective</p>



<a name="197258938"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197258938" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197258938">(May 12 2020 at 10:53)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="n">e</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="n">a</span><span class="bp">+</span><span class="n">b</span> <span class="bp">=</span> <span class="n">c</span><span class="bp">+</span><span class="n">d</span><span class="o">)</span> <span class="o">(</span><span class="n">h2</span> <span class="o">:</span> <span class="n">a</span><span class="bp">^</span><span class="mi">2</span><span class="bp">+</span><span class="n">b</span><span class="bp">^</span><span class="mi">2</span><span class="bp">=</span><span class="n">c</span><span class="bp">^</span><span class="mi">2</span><span class="bp">+</span><span class="n">d</span><span class="bp">^</span><span class="mi">2</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span><span class="bp">^</span><span class="mi">2</span><span class="bp">-</span><span class="n">c</span><span class="bp">^</span><span class="mi">2</span><span class="bp">+</span><span class="n">e</span><span class="bp">*</span><span class="n">b</span><span class="bp">-</span><span class="n">e</span><span class="bp">*</span><span class="n">d</span><span class="bp">=</span><span class="n">d</span><span class="bp">^</span><span class="mi">2</span><span class="bp">-</span><span class="n">b</span><span class="bp">^</span><span class="mi">2</span><span class="bp">+</span><span class="n">e</span><span class="bp">*</span><span class="n">a</span><span class="bp">-</span><span class="n">e</span><span class="bp">*</span><span class="n">c</span> <span class="o">:=</span>
</code></pre></div>


<p>This is the sort of goal I'd really like to be able to dispatch quickly. Goals like this come up annoyingly often.</p>



<a name="197259028"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197259028" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197259028">(May 12 2020 at 10:54)</a>:</h4>
<p>You have that the map from nat to int is injective. I've seen no coherent argument from you for why to make the tactic work for semirings. If it works for all commutative rings and nat, will the CS people be satisfied? I conjecture that the maths people will.</p>



<a name="197259095"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197259095" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197259095">(May 12 2020 at 10:55)</a>:</h4>
<p>I wouldn't use it with nat anyway, because if I have a question about nat then I will coerce to int, work there, and coerce back. This will always work for me because I don't do pathological things with naturals like subtract them until I have coerced to int.</p>



<a name="197259106"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197259106" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197259106">(May 12 2020 at 10:55)</a>:</h4>
<p>commutative rings and nat is probably enough? There are also ennreal, enat and a few other examples of semirings that are not commutative rings or nat in mathlib</p>



<a name="197259172"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197259172" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197259172">(May 12 2020 at 10:56)</a>:</h4>
<p>Oh! I could quite imagine ennreal being something that people might need. This is a nice example.</p>



<a name="197259183"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197259183" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197259183">(May 12 2020 at 10:56)</a>:</h4>
<p>it's also not even cancellative</p>



<a name="197259185"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197259185" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197259185">(May 12 2020 at 10:56)</a>:</h4>
<p>I never quite know how seriously to take arithmetic in types like ennreal.</p>



<a name="197259195"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197259195" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197259195">(May 12 2020 at 10:56)</a>:</h4>
<p>Sure it's a really important target type for certain norms</p>



<a name="197259262"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197259262" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197259262">(May 12 2020 at 10:57)</a>:</h4>
<p>but what one actually does in practice with outputs of norm functions -- I am not so sure that people end up doing complicated polynomial arithmetic with them, or if they did then they might be able to say "if a=infinity then what we actually want to prove is trivial, and if a is finite let's just coerce back into the reals"</p>



<a name="197259358"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197259358" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197259358">(May 12 2020 at 10:58)</a>:</h4>
<p>Here's an interface that would work with semirings: <code>ring_rw [a*h1]</code> tries to find a <code>b</code> such that <code>goal.lhs = a * h1.lhs + b</code> and then rewrites it to <code>a * h1.rhs + b</code></p>



<a name="197259379"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197259379" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197259379">(May 12 2020 at 10:59)</a>:</h4>
<p>and you can have a sequence of such, and it closes with <code>ring</code></p>



<a name="197261600"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197261600" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197261600">(May 12 2020 at 11:26)</a>:</h4>
<p>My example</p>
<div class="codehilite"><pre><span></span><code><span class="kn">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="n">e</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="n">a</span><span class="bp">+</span><span class="n">b</span> <span class="bp">=</span> <span class="n">c</span><span class="bp">+</span><span class="n">d</span><span class="o">)</span> <span class="o">(</span><span class="n">h2</span> <span class="o">:</span> <span class="n">a</span><span class="bp">^</span><span class="mi">2</span><span class="bp">+</span><span class="n">b</span><span class="bp">^</span><span class="mi">2</span><span class="bp">=</span><span class="n">c</span><span class="bp">^</span><span class="mi">2</span><span class="bp">+</span><span class="n">d</span><span class="bp">^</span><span class="mi">2</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span><span class="bp">^</span><span class="mi">2</span><span class="bp">-</span><span class="n">c</span><span class="bp">^</span><span class="mi">2</span><span class="bp">+</span><span class="n">e</span><span class="bp">*</span><span class="n">b</span><span class="bp">-</span><span class="n">e</span><span class="bp">*</span><span class="n">d</span><span class="bp">=</span><span class="n">d</span><span class="bp">^</span><span class="mi">2</span><span class="bp">-</span><span class="n">b</span><span class="bp">^</span><span class="mi">2</span><span class="bp">-</span><span class="n">e</span><span class="bp">*</span><span class="n">a</span><span class="bp">+</span><span class="n">e</span><span class="bp">*</span><span class="n">c</span> <span class="o">:=</span>
</code></pre></div>


<p>is a great example of what is currently hard to do. If <code>h1 : a = F(b,c,d,e)</code> then you can just eliminate all <code>a</code>'s with <code>rw h1</code> and you now have 1 fewer generator. When you're down to 0 generators you've won. With the example you don't have just one variable on one side in either hypothesis so currently you have to start faffing around with various <code>eq_add_iff_sub_eq</code>-type lemmas.</p>



<a name="197261758"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197261758" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197261758">(May 12 2020 at 11:28)</a>:</h4>
<p><del>oh hang on, it's also not true</del> (sign error fixed)</p>



<a name="197261851"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197261851" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197261851">(May 12 2020 at 11:29)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="n">e</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="n">a</span><span class="bp">+</span><span class="n">b</span> <span class="bp">=</span> <span class="n">c</span><span class="bp">+</span><span class="n">d</span><span class="o">)</span> <span class="o">(</span><span class="n">h2</span> <span class="o">:</span> <span class="n">a</span><span class="bp">^</span><span class="mi">2</span><span class="bp">+</span><span class="n">b</span><span class="bp">^</span><span class="mi">2</span><span class="bp">=</span><span class="n">c</span><span class="bp">^</span><span class="mi">2</span><span class="bp">+</span><span class="n">d</span><span class="bp">^</span><span class="mi">2</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span><span class="bp">^</span><span class="mi">2</span><span class="bp">-</span><span class="n">c</span><span class="bp">^</span><span class="mi">2</span><span class="bp">+</span><span class="n">e</span><span class="bp">*</span><span class="n">b</span><span class="bp">-</span><span class="n">e</span><span class="bp">*</span><span class="n">d</span><span class="bp">=</span><span class="n">d</span><span class="bp">^</span><span class="mi">2</span><span class="bp">-</span><span class="n">b</span><span class="bp">^</span><span class="mi">2</span><span class="bp">-</span><span class="n">e</span><span class="bp">*</span><span class="n">a</span><span class="bp">+</span><span class="n">e</span><span class="bp">*</span><span class="n">c</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">apply_fun</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">e</span><span class="bp">*</span><span class="n">x</span><span class="o">)</span> <span class="n">at</span> <span class="n">h1</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">mul_add</span><span class="o">,</span> <span class="n">mul_add</span><span class="o">]</span> <span class="n">at</span> <span class="n">h1</span><span class="o">,</span>
  <span class="n">linarith</span><span class="o">,</span>
<span class="kn">end</span>
</code></pre></div>


<p>This is the sort of hackery I'd come up with for that</p>



<a name="197261965"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197261965" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197261965">(May 12 2020 at 11:31)</a>:</h4>
<p>with <code>ring_rw</code>, I'm imagining that it will <em>make</em> it match, even if it doesn't obviously match. So if you <code>ring_rw [h2]</code> on that goal, <code>a^2-c^2+e*b-e*d</code> turns into <code>(a^2+b^2)-c^2+e*b-e*d-b^2</code> and then it gets rewritten to <code>(c^2+d^2)-c^2+e*b-e*d-b^2</code>, which it can also simplify if desired.</p>



<a name="197262095"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197262095" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197262095">(May 12 2020 at 11:32)</a>:</h4>
<p>After cancelling factors, the goal generated by <code>ring_rw [h2]</code> might be <code>e*b-e*d=-e*a+e*c</code></p>



<a name="197262110"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197262110" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197262110">(May 12 2020 at 11:32)</a>:</h4>
<p>I multiplied one equation by <code>e</code>; if I'd also multiplied the non-linear equation by something it would have been harder to sort out. In general you have to know what factor to multiply by which is what your original ring++ was asking for.</p>



<a name="197262161"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197262161" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197262161">(May 12 2020 at 11:33)</a>:</h4>
<p><code>ring_rw [h2]</code> is just like <code>ring++ [(1,h2)]</code></p>



<a name="197262171"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197262171" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197262171">(May 12 2020 at 11:33)</a>:</h4>
<p>Right, <code>ring_rw [h1]</code> at this point would not solve the goal, it would make a mess, but <code>ring_rw [-e * h1]</code> would work</p>



<a name="197262230"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197262230" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197262230">(May 12 2020 at 11:34)</a>:</h4>
<p>Yes, this is an alternative interface in terms of multiple rewrites instead of linear functions</p>



<a name="197262248"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/groebner%20basis%20algorithm/near/197262248" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/groebner.20basis.20algorithm.html#197262248">(May 12 2020 at 11:34)</a>:</h4>
<p>Yes, I now see that the way you're thinking about it is going to make it far easier for humans to use.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>