---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/set.2Enontrivial.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Enontrivial.html">set.nontrivial</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="291876305"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.nontrivial/near/291876305" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Enontrivial.html#291876305">(Aug 03 2022 at 16:32)</a>:</h4>
<p>I am considering the benefits of a <code>set.nontrivial</code> predicate, with the property that <code>s.nontrivial iff ¬ s.subsingleton</code>. This would allow for the use of dot notation etc. This is analogous to the <code>subsingleton</code> and <code>nontrivial</code> typeclasses. What are people's thoughts?</p>



<a name="291876379"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.nontrivial/near/291876379" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Enontrivial.html#291876379">(Aug 03 2022 at 16:33)</a>:</h4>
<p>(This comes up naturally when considering things like the infimum distance of a set under a metric.)</p>



<a name="291902873"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.nontrivial/near/291902873" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Enontrivial.html#291902873">(Aug 03 2022 at 18:42)</a>:</h4>
<p>Would writing <code>¬ s.subsingleton</code> be sufficient? Or would you be wanting to have lemmas you access via dot notation on a <code>set.nontrivial</code> term?</p>



<a name="291903086"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.nontrivial/near/291903086" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Enontrivial.html#291903086">(Aug 03 2022 at 18:44)</a>:</h4>
<p>I think the reason a special <code>nontrivial</code> class exists is that typeclass inference wouldn't really work for <code>¬ (subsingleton X)</code>.</p>



<a name="291903232"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.nontrivial/near/291903232" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Enontrivial.html#291903232">(Aug 03 2022 at 18:45)</a>:</h4>
<p>I had been writing <code>¬ s.subsingleton</code>, but, exactly as you say, I kept wanting a dot notation for it.</p>
<p>(Also I would define <code>s.nontrivial</code> as the push_neg version, i.e. not "not forall" but "exists" - bit easier to actually use.)</p>



<a name="291903575"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.nontrivial/near/291903575" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Enontrivial.html#291903575">(Aug 03 2022 at 18:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="330967">Wrenna Robson</span> <a href="#narrow/stream/116395-maths/topic/set.2Enontrivial/near/291876305">said</a>:</p>
<blockquote>
<p>I am considering the benefits of a <code>set.nontrivial</code> predicate, with the property that <code>s.nontrivial iff ¬ s.subsingleton</code>. This would allow for the use of dot notation etc. This is analogous to the <code>subsingleton</code> and <code>nontrivial</code> typeclasses. What are people's thoughts?</p>
</blockquote>
<p>Given that we already have quite a few set analogs of typeclasses, such as <code>set.nonempty</code>, <code>set.subsingleton</code>, <code>set.finite</code>, <code>set.infinite</code>, <code>set.countable</code>, I think one more will be welcome as long as it has the appropriate API</p>



<a name="291904340"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.nontrivial/near/291904340" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Enontrivial.html#291904340">(Aug 03 2022 at 18:55)</a>:</h4>
<p>Dot notation seems to be sufficient cause for a special predicate. I think it's fair define it in the most convenient form, then prove it's equivalent to <code>¬ s.subsingleton</code> (I assume they're literally push_negs of each other.)</p>
<p>You'll still need to create API to link up <code>nontrivial</code> and <code>set.nontrivial</code> (and rename any <code>not_subsingleton</code> lemmas), but maybe some of that already exists.</p>



<a name="291904976"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.nontrivial/near/291904976" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Enontrivial.html#291904976">(Aug 03 2022 at 19:00)</a>:</h4>
<p>I'd say the "correct" definition of <code>set.nontrivial</code> is the one that matches <code>nontrivial</code>, which is <code>∃ x y ∈ s, x ≠ y</code></p>



<a name="291905141"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.nontrivial/near/291905141" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Enontrivial.html#291905141">(Aug 03 2022 at 19:01)</a>:</h4>
<p>(Yes, that's the push-neg of the negation of <a href="https://leanprover-community.github.io/mathlib_docs/find/set.subsingleton">docs#set.subsingleton</a>)</p>



<a name="291905148"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.nontrivial/near/291905148" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Enontrivial.html#291905148">(Aug 03 2022 at 19:01)</a>:</h4>
<p>The simp-normal form of <code>¬ s.subsingleton</code> should be made into <code>s.nontrivial</code>, and you should also have a lemma <code>set.nontrivial_coe_iff : nontrivial (↥s) ↔ s.nontrivial</code>.</p>



<a name="291905650"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.nontrivial/near/291905650" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Enontrivial.html#291905650">(Aug 03 2022 at 19:05)</a>:</h4>
<blockquote>
<p>Dot notation seems to be sufficient cause for a special predicate.</p>
</blockquote>
<p>I've thought about an extension to dot notation that would help us out here, but there are still some details I'm not sure about, and like always Lean 4 is around the corner so it's not the best idea to put energy into this.</p>
<p>The idea is that when doing dot notation lookup for <code>x.foo</code> when <code>x : a (b ...)</code> you would first look for <code>a.foo</code> and then if that fails you would look for <code>b.a.foo</code>. It'd only go looking this far, not recursively.</p>
<p>Then you could have <code>set.subsingleton.not</code> lemmas.</p>



<a name="291906007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.nontrivial/near/291906007" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Enontrivial.html#291906007">(Aug 03 2022 at 19:08)</a>:</h4>
<p>One place this is not the best is with <code>has_mem</code> lemmas. When you have <code>h : x ∈ s</code> and <code>s : a</code>, ideally <code>h.foo</code> would look at <code>a.has_mem.mem.foo</code>. With my simpler idea, it only would look for a lemma associated to <code>x</code>.</p>



<a name="291930517"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.nontrivial/near/291930517" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Enontrivial.html#291930517">(Aug 03 2022 at 22:47)</a>:</h4>
<p>Do we have such a coe_iff lemma for subsingleton?</p>



<a name="291930647"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.nontrivial/near/291930647" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Enontrivial.html#291930647">(Aug 03 2022 at 22:48)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/set.subsingleton_coe">docs#set.subsingleton_coe</a></p>



<a name="291930957"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.nontrivial/near/291930957" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Enontrivial.html#291930957">(Aug 03 2022 at 22:52)</a>:</h4>
<p>Right. My plan was to essentially mirror all the API for <code>set.subsingleton</code>. I don't <em>think</em> we have many <code>not_subsingleton</code> lemmas but they might be called something different.</p>



<a name="291930981"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.nontrivial/near/291930981" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Enontrivial.html#291930981">(Aug 03 2022 at 22:53)</a>:</h4>
<p>(...arguably you could have a similar pair of predicates for finset...)</p>



<a name="291931048"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.nontrivial/near/291931048" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Enontrivial.html#291931048">(Aug 03 2022 at 22:53)</a>:</h4>
<p>Actually we don't even have <code>finset.subsingleton</code>.</p>



<a name="291931104"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.nontrivial/near/291931104" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Enontrivial.html#291931104">(Aug 03 2022 at 22:54)</a>:</h4>
<p>Right.</p>



<a name="291931149"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.nontrivial/near/291931149" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Enontrivial.html#291931149">(Aug 03 2022 at 22:54)</a>:</h4>
<p>Is there a need for it? I can see that it might come up.</p>



<a name="291931155"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.nontrivial/near/291931155" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Enontrivial.html#291931155">(Aug 03 2022 at 22:54)</a>:</h4>
<p>Is there a need for it? I can see that it might come up.</p>



<a name="291948543"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.nontrivial/near/291948543" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Enontrivial.html#291948543">(Aug 04 2022 at 00:24)</a>:</h4>
<p>My take on API is to add it only when it's either relevant or trivial</p>



<a name="291948562"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.nontrivial/near/291948562" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Enontrivial.html#291948562">(Aug 04 2022 at 00:25)</a>:</h4>
<p>If we don't need <code>finset.singleton</code> yet, no need to add the API</p>



<a name="291948573"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.nontrivial/near/291948573" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Enontrivial.html#291948573">(Aug 04 2022 at 00:25)</a>:</h4>
<p>At the end of the day, it's the theorems you use the API on that inform how it should look, not the other way around</p>



<a name="292001333"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.nontrivial/near/292001333" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Enontrivial.html#292001333">(Aug 04 2022 at 12:40)</a>:</h4>
<p>Well, I do have a need for it... but it might just be me.</p>



<a name="292001368"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.nontrivial/near/292001368" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Enontrivial.html#292001368">(Aug 04 2022 at 12:40)</a>:</h4>
<p>incidentally, <code>set.nontrivial</code> is currently the name of the nontrivial instance of set.</p>



<a name="292001404"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.nontrivial/near/292001404" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Enontrivial.html#292001404">(Aug 04 2022 at 12:41)</a>:</h4>
<p>Could rename to <code>nontrivial_of_nonempty</code> or something</p>



<a name="292001412"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.nontrivial/near/292001412" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Enontrivial.html#292001412">(Aug 04 2022 at 12:41)</a>:</h4>
<p>What do you think?</p>



<a name="292022313"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.nontrivial/near/292022313" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Enontrivial.html#292022313">(Aug 04 2022 at 15:18)</a>:</h4>
<p>Renaming the instance seems fine to me. <a href="https://leanprover-community.github.io/mathlib_docs/find/set.nontrivial">docs#set.nontrivial</a> is the fact that <code>set X</code> itself is nontrivial -- I wonder if something like <code>nontrivial_set</code> is a more appropriate name? I'm not sure.</p>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/set.nontrivial_mono">docs#set.nontrivial_mono</a> might want to be renamed too (or replaced with a <code>set.nontrivial</code> version?)</p>



<a name="292033417"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.nontrivial/near/292033417" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Enontrivial.html#292033417">(Aug 04 2022 at 16:38)</a>:</h4>
<p>No because we will call the <code>set.nontrivial</code> version <code>set.nontrivial.mono</code>.</p>



<a name="292040999"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.nontrivial/near/292040999" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Enontrivial.html#292040999">(Aug 04 2022 at 17:12)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/15867">#15867</a> now exists</p>



<a name="292041099"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.nontrivial/near/292041099" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Enontrivial.html#292041099">(Aug 04 2022 at 17:13)</a>:</h4>
<p>(I kept <code>nontrivial_mono</code>, though I moved it later in the file to take advantage of the new functionality.)</p>



<a name="292041214"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.nontrivial/near/292041214" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Enontrivial.html#292041214">(Aug 04 2022 at 17:14)</a>:</h4>
<p>I've made a couple of additions and changes to <code>subsingleton</code>, but they were really only things that I noticed as I was going, I've tried to keep to a fairly tight scope.</p>



<a name="292088751"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.nontrivial/near/292088751" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Wrenna Robson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Enontrivial.html#292088751">(Aug 05 2022 at 00:34)</a>:</h4>
<p>And I finally got it to build...!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>