---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/f.20.3D.20g.20implies.20deriv.20f.20.3D.20deriv.20g.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/f.20.3D.20g.20implies.20deriv.20f.20.3D.20deriv.20g.html">f = g implies deriv f = deriv g</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="303020962"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/f%20%3D%20g%20implies%20deriv%20f%20%3D%20deriv%20g/near/303020962" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mark Andrew Gerads <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/f.20.3D.20g.20implies.20deriv.20f.20.3D.20deriv.20g.html#303020962">(Oct 08 2022 at 13:46)</a>:</h4>
<p>I've been trying for a while and did not figure it out. Please help find the next step in <code>ruesDiffIteratedDeriv</code>, applying <code>deriv</code> to both sides of the equation <code>K_ih</code>.<br>
<a href="/user_uploads/3121/8A084bX2AklWDurG_PXSI5AZ/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/8A084bX2AklWDurG_PXSI5AZ/image.png" title="image.png"><img src="/user_uploads/3121/8A084bX2AklWDurG_PXSI5AZ/image.png"></a></div><div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">analysis.complex.basic</span>
<span class="kn">import</span> <span class="n">analysis.calculus.deriv</span>
<span class="kn">import</span> <span class="n">analysis.calculus.iterated_deriv</span>

<span class="kd">def</span> <span class="n">ruesDiff</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℂ</span> <span class="bp">→</span> <span class="n">ℂ</span> <span class="o">:=</span> <span class="gr">sorry</span>

<span class="kd">lemma</span> <span class="n">ruesDiffHasDeriv</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">z</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">has_deriv_at</span> <span class="o">(</span><span class="n">ruesDiff</span> <span class="n">n</span> <span class="n">m</span><span class="o">)</span> <span class="o">(</span><span class="n">ruesDiff</span> <span class="n">n</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="n">z</span><span class="o">)</span> <span class="n">z</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="gr">sorry</span><span class="o">,</span> <span class="c1">-- already proved elsewhere</span>
<span class="kd">end</span>

<span class="kd">lemma</span> <span class="n">ruesDiffDeriv</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">deriv</span> <span class="o">(</span><span class="n">ruesDiff</span> <span class="n">n</span> <span class="n">m</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">ruesDiff</span> <span class="n">n</span> <span class="o">(</span><span class="n">m</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">refine</span> <span class="n">deriv_eq</span> <span class="n">_</span><span class="o">,</span>
  <span class="n">intros</span> <span class="n">z</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">ruesDiffHasDeriv</span> <span class="n">n</span> <span class="n">m</span> <span class="n">z</span><span class="o">,</span>
<span class="kd">end</span>

<span class="kd">lemma</span> <span class="n">ruesDiffIteratedDeriv</span> <span class="o">(</span><span class="n">k</span> <span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="n">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">z</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="o">:</span> <span class="n">iterated_deriv</span> <span class="n">k</span> <span class="o">(</span><span class="n">ruesDiff</span> <span class="n">n</span> <span class="n">m</span><span class="o">)</span> <span class="bp">=</span> <span class="n">ruesDiff</span> <span class="n">n</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="n">m</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">induction</span> <span class="n">k</span> <span class="k">with</span> <span class="n">K</span> <span class="n">K_ih</span><span class="o">,</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">iterated_deriv_zero</span><span class="o">,</span> <span class="n">nat.cast_zero</span><span class="o">,</span> <span class="n">zero_add</span><span class="o">],</span>
  <span class="c1">-- -- the following 4 attemps all failed.</span>

  <span class="c1">-- {</span>
  <span class="c1">--   have h0 : deriv (iterated_deriv K (ruesDiff n m)) = deriv (ruesDiff n ((K:ℤ) + m)),</span>
  <span class="c1">--   exact congr_arg deriv,</span>
  <span class="c1">-- },</span>

  <span class="c1">-- simp_rw congr_arg deriv at K_ih,</span>

  <span class="c1">-- simp_rw congr_arg (deriv:(ℂ → ℂ) → (ℂ → ℂ)) at K_ih,</span>

  <span class="c1">-- simp_rw (congr_arg (λ (f : (ℂ → ℂ)), deriv f)) at K_ih,</span>
  <span class="gr">sorry</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="303021801"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/f%20%3D%20g%20implies%20deriv%20f%20%3D%20deriv%20g/near/303021801" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Yang <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/f.20.3D.20g.20implies.20deriv.20f.20.3D.20deriv.20g.html#303021801">(Oct 08 2022 at 13:53)</a>:</h4>
<p>Without actual looking in an IDE, I would guess <code>congr_arg deriv K_ih</code> works.</p>



<a name="303022647"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/f%20%3D%20g%20implies%20deriv%20f%20%3D%20deriv%20g/near/303022647" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/f.20.3D.20g.20implies.20deriv.20f.20.3D.20deriv.20g.html#303022647">(Oct 08 2022 at 14:00)</a>:</h4>
<p>You won't get anywhere without explicitly invoking <code>ruesDiffDeriv</code></p>



<a name="303022701"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/f%20%3D%20g%20implies%20deriv%20f%20%3D%20deriv%20g/near/303022701" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/f.20.3D.20g.20implies.20deriv.20f.20.3D.20deriv.20g.html#303022701">(Oct 08 2022 at 14:01)</a>:</h4>
<p>These two lines close the goal</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code>  <span class="n">rw</span> <span class="o">[</span><span class="n">iterated_deriv_succ</span><span class="o">,</span> <span class="n">K_ih</span><span class="o">],</span>
  <span class="n">exact</span> <span class="o">(</span><span class="n">ruesDiffDeriv</span> <span class="n">_</span> <span class="n">_</span><span class="o">),</span>
</code></pre></div>



<a name="303022728"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/f%20%3D%20g%20implies%20deriv%20f%20%3D%20deriv%20g/near/303022728" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/f.20.3D.20g.20implies.20deriv.20f.20.3D.20deriv.20g.html#303022728">(Oct 08 2022 at 14:01)</a>:</h4>
<p>Stay with <code>rw [iterated_deriv_succ, K_ih],</code>, I think</p>



<a name="303022811"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/f%20%3D%20g%20implies%20deriv%20f%20%3D%20deriv%20g/near/303022811" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/f.20.3D.20g.20implies.20deriv.20f.20.3D.20deriv.20g.html#303022811">(Oct 08 2022 at 14:02)</a>:</h4>
<p>Ha, not as fast as Damiano</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>