---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/tendsto.20mixing.20nat.20and.20int.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/tendsto.20mixing.20nat.20and.20int.html">tendsto mixing nat and int</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="268024785"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/tendsto%20mixing%20nat%20and%20int/near/268024785" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/tendsto.20mixing.20nat.20and.20int.html#268024785">(Jan 14 2022 at 15:03)</a>:</h4>
<p>Do we have the following</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">‚Ñ§</span> <span class="bp">‚Üí</span> <span class="n">‚Ñù</span><span class="o">)</span> <span class="o">(</span><span class="n">d</span> <span class="o">:</span> <span class="n">‚Ñ§</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">‚Ñù</span><span class="o">)</span> <span class="o">:</span> <span class="n">tendsto</span> <span class="o">(</span><span class="bp">Œª</span> <span class="n">n</span> <span class="o">:</span> <span class="n">‚Ñï</span><span class="o">,</span> <span class="n">f</span> <span class="n">n</span><span class="o">)</span> <span class="n">at_top</span> <span class="o">(</span><span class="bp">ùìù</span> <span class="n">a</span><span class="o">)</span> <span class="bp">‚Üî</span>
  <span class="n">tendsto</span> <span class="o">(</span><span class="bp">Œª</span> <span class="n">n</span> <span class="o">:</span> <span class="n">‚Ñï</span><span class="o">,</span> <span class="n">f</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="n">d</span><span class="o">))</span> <span class="n">at_top</span> <span class="o">(</span><span class="bp">ùìù</span> <span class="n">a</span><span class="o">)</span> <span class="o">:=</span>
</code></pre></div>
<p>(if you replace all <code>‚Ñ§</code> by <code>‚Ñï</code> in the above <code>example</code>, this is exactly <a href="https://leanprover-community.github.io/mathlib_docs/find/filter.tendsto_add_at_top_iff_nat">docs#filter.tendsto_add_at_top_iff_nat</a>). This would be immediate to prove if  <code>(Œª n : ‚Ñï, f (n + d))</code> sent the <code>at_top</code> filter of <code>‚Ñï</code> to itself, which is true but I cannot say it: I tried </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">map_zadd_at_top_eq_nat</span> <span class="o">(</span><span class="n">d</span> <span class="o">:</span> <span class="n">‚Ñ§</span><span class="o">)</span> <span class="o">:</span> <span class="n">map</span> <span class="o">(</span><span class="bp">Œª</span> <span class="n">a</span> <span class="o">:</span> <span class="n">‚Ñï</span><span class="o">,</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">d</span><span class="o">)</span> <span class="o">(</span><span class="n">at_top</span> <span class="o">:</span> <span class="n">filter</span> <span class="n">‚Ñï</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">at_top</span> <span class="o">:</span> <span class="n">filter</span> <span class="n">‚Ñï</span><span class="o">)</span> <span class="o">:=</span>
</code></pre></div>
<p>but of course got the error that the map <code>(Œª n : ‚Ñï, f (n + d))</code> does not respect  <code>‚Ñï</code>. I would have an idea on how to prove the lemma using some "eventual" business, but I do not actually know how to <em>state</em> it...</p>



<a name="268025205"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/tendsto%20mixing%20nat%20and%20int/near/268025205" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/tendsto.20mixing.20nat.20and.20int.html#268025205">(Jan 14 2022 at 15:06)</a>:</h4>
<p>There must be some way, using filter voodoo, of using the fact that these two maps are eventually the same, where eventually is in the sense of the filters involved. But I also don't immediately see how to formulate the statement!</p>



<a name="268025273"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/tendsto%20mixing%20nat%20and%20int/near/268025273" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/tendsto.20mixing.20nat.20and.20int.html#268025273">(Jan 14 2022 at 15:06)</a>:</h4>
<p>Yes, I also see the proof of a statement I can't state... <span aria-label="cold sweat" class="emoji emoji-1f630" role="img" title="cold sweat">:cold_sweat:</span></p>



<a name="268027198"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/tendsto%20mixing%20nat%20and%20int/near/268027198" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/tendsto.20mixing.20nat.20and.20int.html#268027198">(Jan 14 2022 at 15:20)</a>:</h4>
<p><span class="user-mention" data-user-id="300245">@Filippo A. E. Nuccio</span> can you give me your imports?</p>



<a name="268027236"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/tendsto%20mixing%20nat%20and%20int/near/268027236" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/tendsto.20mixing.20nat.20and.20int.html#268027236">(Jan 14 2022 at 15:20)</a>:</h4>
<p>import data.int.interval<br>
import data.finset.nat_antidiagonal<br>
import laurent_measures.basic<br>
import laurent_measures.theta<br>
import linear_algebra.basic</p>



<a name="268027331"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/tendsto%20mixing%20nat%20and%20int/near/268027331" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/tendsto.20mixing.20nat.20and.20int.html#268027331">(Jan 14 2022 at 15:21)</a>:</h4>
<p>Mathlib only imports?</p>



<a name="268027496"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/tendsto%20mixing%20nat%20and%20int/near/268027496" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/tendsto.20mixing.20nat.20and.20int.html#268027496">(Jan 14 2022 at 15:22)</a>:</h4>
<p>Ah, how can I get this? Should I retrace back all the mathlib imports in those files, or is there a way to ask Lean about this?</p>



<a name="268027536"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/tendsto%20mixing%20nat%20and%20int/near/268027536" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/tendsto.20mixing.20nat.20and.20int.html#268027536">(Jan 14 2022 at 15:22)</a>:</h4>
<p>It's okay, I can probably figure it out.</p>



<a name="268027645"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/tendsto%20mixing%20nat%20and%20int/near/268027645" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/tendsto.20mixing.20nat.20and.20int.html#268027645">(Jan 14 2022 at 15:23)</a>:</h4>
<p>A not-so-minimal import list, in case it helps anyone else:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.int.interval</span>
<span class="kn">import</span> <span class="n">data.finset.nat_antidiagonal</span>
<span class="kn">import</span> <span class="n">linear_algebra.basic</span>
<span class="kn">import</span> <span class="n">analysis.special_functions.pow</span>
<span class="kn">import</span> <span class="n">analysis.special_functions.log</span>
<span class="kn">import</span> <span class="n">analysis.specific_limits</span>
<span class="kn">import</span> <span class="n">category_theory.Fintype</span>
<span class="kn">import</span> <span class="n">analysis.normed_space.basic</span>
</code></pre></div>



<a name="268027737"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/tendsto%20mixing%20nat%20and%20int/near/268027737" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/tendsto.20mixing.20nat.20and.20int.html#268027737">(Jan 14 2022 at 15:23)</a>:</h4>
<p>(I don't think I need the <code>category_theory.Fintype</code> for the statement at hand)</p>



<a name="268027783"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/tendsto%20mixing%20nat%20and%20int/near/268027783" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/tendsto.20mixing.20nat.20and.20int.html#268027783">(Jan 14 2022 at 15:24)</a>:</h4>
<p>I can have a look if you want</p>



<a name="268027847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/tendsto%20mixing%20nat%20and%20int/near/268027847" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/tendsto.20mixing.20nat.20and.20int.html#268027847">(Jan 14 2022 at 15:24)</a>:</h4>
<p>Thanks!</p>



<a name="268029715"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/tendsto%20mixing%20nat%20and%20int/near/268029715" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/tendsto.20mixing.20nat.20and.20int.html#268029715">(Jan 14 2022 at 15:37)</a>:</h4>
<p>I proved it by brute forcing a lemma for Filippo:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">order.filter.at_top_bot</span> <span class="n">tactic.linarith</span>

<span class="kn">open</span> <span class="n">filter</span>

<span class="kd">lemma</span> <span class="n">filippo</span> <span class="o">:</span> <span class="n">map</span> <span class="o">(</span><span class="n">coe</span> <span class="o">:</span> <span class="n">‚Ñï</span> <span class="bp">‚Üí</span> <span class="n">‚Ñ§</span><span class="o">)</span> <span class="n">at_top</span> <span class="bp">=</span> <span class="n">at_top</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">ext</span> <span class="n">s</span><span class="o">,</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">set.mem_preimage</span><span class="o">,</span> <span class="n">mem_at_top_sets</span><span class="o">,</span> <span class="n">ge_iff_le</span><span class="o">,</span> <span class="n">mem_map</span><span class="o">],</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rintro</span> <span class="o">‚ü®</span><span class="n">a</span><span class="o">,</span> <span class="n">ha</span><span class="o">‚ü©,</span>
    <span class="n">use</span> <span class="n">a</span><span class="o">,</span>
    <span class="n">intros</span> <span class="n">b</span> <span class="n">hb</span><span class="o">,</span>
    <span class="n">lift</span> <span class="n">b</span> <span class="n">to</span> <span class="n">‚Ñï</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">ha</span><span class="o">,</span>
    <span class="n">exact_mod_cast</span> <span class="n">hb</span><span class="o">,</span>
    <span class="n">linarith</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">rintro</span> <span class="o">‚ü®</span><span class="n">a</span><span class="o">,</span> <span class="n">ha</span><span class="o">‚ü©,</span>
    <span class="n">use</span> <span class="n">a.nat_abs</span><span class="o">,</span>
    <span class="n">intros</span> <span class="n">b</span> <span class="n">hb</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">ha</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">int.le_nat_abs.trans</span><span class="o">,</span>
    <span class="n">exact_mod_cast</span> <span class="n">hb</span> <span class="o">}</span>
<span class="kd">end</span>

<span class="kd">example</span> <span class="o">{</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">‚Ñ§</span> <span class="bp">‚Üí</span> <span class="n">X</span><span class="o">}</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="n">filter</span> <span class="n">X</span><span class="o">)</span> <span class="o">:</span> <span class="n">tendsto</span> <span class="o">(</span><span class="bp">Œª</span> <span class="n">n</span> <span class="o">:</span> <span class="n">‚Ñï</span><span class="o">,</span> <span class="n">f</span> <span class="n">n</span><span class="o">)</span> <span class="n">at_top</span> <span class="n">F</span> <span class="bp">‚Üî</span>
  <span class="n">tendsto</span> <span class="n">f</span> <span class="n">at_top</span> <span class="n">F</span> <span class="o">:=</span>
<span class="k">show</span> <span class="n">map</span> <span class="o">(</span><span class="n">f</span> <span class="bp">‚àò</span> <span class="n">coe</span><span class="o">)</span> <span class="n">_</span> <span class="bp">‚â§</span> <span class="n">_</span> <span class="bp">‚Üî</span> <span class="n">_</span><span class="o">,</span> <span class="kd">by</span> <span class="n">simpa</span> <span class="o">[</span><span class="bp">‚Üê</span> <span class="n">map_map</span><span class="o">,</span> <span class="n">filippo</span><span class="o">]</span>
</code></pre></div>



<a name="268029828"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/tendsto%20mixing%20nat%20and%20int/near/268029828" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/tendsto.20mixing.20nat.20and.20int.html#268029828">(Jan 14 2022 at 15:38)</a>:</h4>
<p>The first proof is ugly because I didn't took time to think about the proper generality so I proved it by brute force. But then the example becomes obvious</p>



<a name="268033696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/tendsto%20mixing%20nat%20and%20int/near/268033696" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/tendsto.20mixing.20nat.20and.20int.html#268033696">(Jan 14 2022 at 16:04)</a>:</h4>
<p>Thanks!</p>



<a name="268033820"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/tendsto%20mixing%20nat%20and%20int/near/268033820" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/tendsto.20mixing.20nat.20and.20int.html#268033820">(Jan 14 2022 at 16:05)</a>:</h4>
<p>I'll have a look and ask if I have questions (in the meanwhile, I will also  copy-paste it in LTE, with your permission <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span> )</p>



<a name="268041234"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/tendsto%20mixing%20nat%20and%20int/near/268041234" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/tendsto.20mixing.20nat.20and.20int.html#268041234">(Jan 14 2022 at 16:56)</a>:</h4>
<p>Sure.</p>



<a name="268041449"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/tendsto%20mixing%20nat%20and%20int/near/268041449" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/tendsto.20mixing.20nat.20and.20int.html#268041449">(Jan 14 2022 at 16:58)</a>:</h4>
<p>Thanks!</p>



<a name="272526078"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/tendsto%20mixing%20nat%20and%20int/near/272526078" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anatole Dedecker <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/tendsto.20mixing.20nat.20and.20int.html#272526078">(Feb 19 2022 at 15:58)</a>:</h4>
<p>See <a href="https://leanprover-community.github.io/mathlib_docs/find/tendsto_coe_nat_at_top_at_top">docs#tendsto_coe_nat_at_top_at_top</a></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>