---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/Minimal.20polynomials.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Minimal.20polynomials.html">Minimal polynomials</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="208512081"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Minimal%20polynomials/near/208512081" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Minimal.20polynomials.html#208512081">(Aug 31 2020 at 00:52)</a>:</h4>
<p>I'm trying to remove the assumptions of commutativity required to define minimal polynomials, so that we can use them in linear algebra, over at <a href="https://github.com/leanprover-community/mathlib/tree/minimal_polynomial_noncomm">branch#minimal_polynomial_noncomm</a></p>



<a name="208512097"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Minimal%20polynomials/near/208512097" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Minimal.20polynomials.html#208512097">(Aug 31 2020 at 00:52)</a>:</h4>
<p>Everything appears to be working without too much effort, except for the theorem <a href="https://leanprover-community.github.io/mathlib_docs/find/integral_closure_idem">docs#integral_closure_idem</a></p>



<a name="208512169"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Minimal%20polynomials/near/208512169" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Minimal.20polynomials.html#208512169">(Aug 31 2020 at 00:55)</a>:</h4>
<p>Can anyone help me troubleshoot what's gone wrong? I've changed the instance assumptions of <code>is_integral</code> to let one <code>semiring</code> be noncommutative, but I don't know what that's breaking</p>



<a name="208512704"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Minimal%20polynomials/near/208512704" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Minimal.20polynomials.html#208512704">(Aug 31 2020 at 01:10)</a>:</h4>
<p>What's the integral closure of a noncommutative ring?</p>



<a name="208512723"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Minimal%20polynomials/near/208512723" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Minimal.20polynomials.html#208512723">(Aug 31 2020 at 01:11)</a>:</h4>
<p>Integral closure still assumes commutativity.</p>



<a name="208512775"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Minimal%20polynomials/near/208512775" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Minimal.20polynomials.html#208512775">(Aug 31 2020 at 01:12)</a>:</h4>
<p>I've only changed the assumption on the basic definition <code>is_integral</code>, which amounts to being the root of a monic polynomial, and three lemmas about <code>is_integral</code> that don't deal with integral closures per se.</p>



<a name="208512833"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Minimal%20polynomials/near/208512833" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Minimal.20polynomials.html#208512833">(Aug 31 2020 at 01:14)</a>:</h4>
<p>Oh I see.</p>



<a name="208512922"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Minimal%20polynomials/near/208512922" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Minimal.20polynomials.html#208512922">(Aug 31 2020 at 01:17)</a>:</h4>
<p>I'm not on a computer, but my guess is that it's an issue with <code>is_integral_trans</code></p>



<a name="208513057"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Minimal%20polynomials/near/208513057" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Minimal.20polynomials.html#208513057">(Aug 31 2020 at 01:21)</a>:</h4>
<p>Taking it apart, this almost works:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">theorem</span> <span class="n">integral_closure_idem</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">A</span><span class="o">]</span> <span class="o">[</span><span class="n">algebra</span> <span class="n">R</span> <span class="n">A</span><span class="o">]</span> <span class="o">:</span>
  <span class="n">integral_closure</span> <span class="o">(</span><span class="n">integral_closure</span> <span class="n">R</span> <span class="n">A</span> <span class="o">:</span> <span class="n">set</span> <span class="n">A</span><span class="o">)</span> <span class="n">A</span> <span class="bp">=</span> <span class="err">⊥</span> <span class="o">:=</span>
<span class="n">eq_bot_iff</span><span class="bp">.</span><span class="mi">2</span> <span class="err">$</span> <span class="bp">λ</span> <span class="n">x</span> <span class="n">hx</span><span class="o">,</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">mem_bot</span><span class="bp">.</span><span class="mi">2</span>
<span class="bp">⟨⟨</span><span class="n">x</span><span class="o">,</span> <span class="k">by</span> <span class="o">{</span> <span class="n">apply</span> <span class="n">is_integral_trans</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">hx</span><span class="o">,</span> <span class="n">exact</span> <span class="o">(</span><span class="n">integral_closure</span> <span class="n">R</span> <span class="n">A</span><span class="o">)</span><span class="bp">.</span><span class="n">algebra</span><span class="o">,</span>
          <span class="n">swap</span><span class="o">,</span> <span class="n">apply</span> <span class="n">integral_closure</span><span class="bp">.</span><span class="n">is_integral</span><span class="o">,</span> <span class="n">sorry</span> <span class="o">}</span><span class="bp">⟩</span><span class="o">,</span> <span class="n">rfl</span><span class="bp">⟩</span>
</code></pre></div>


<p>but I'd need to synthesize the <code>is_scalar_tower</code> instance.</p>



<a name="208513059"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Minimal%20polynomials/near/208513059" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Minimal.20polynomials.html#208513059">(Aug 31 2020 at 01:21)</a>:</h4>
<p>Of course, I'd really rather not butcher this proof over this bug.</p>



<a name="208513105"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Minimal%20polynomials/near/208513105" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Minimal.20polynomials.html#208513105">(Aug 31 2020 at 01:22)</a>:</h4>
<p>(My branch is building, but that's because I've commented out that theorem)</p>



<a name="208521111"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Minimal%20polynomials/near/208521111" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Minimal.20polynomials.html#208521111">(Aug 31 2020 at 05:14)</a>:</h4>
<p>Ok, I've got a workaround, but I'd still appreciate insight as to why I need to declare this one instance manually, so I can fix it:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">theorem</span> <span class="n">integral_closure_idem</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">A</span><span class="o">]</span> <span class="o">[</span><span class="n">algebra</span> <span class="n">R</span> <span class="n">A</span><span class="o">]</span> <span class="o">:</span>
  <span class="n">integral_closure</span> <span class="o">(</span><span class="n">integral_closure</span> <span class="n">R</span> <span class="n">A</span> <span class="o">:</span> <span class="n">set</span> <span class="n">A</span><span class="o">)</span> <span class="n">A</span> <span class="bp">=</span> <span class="err">⊥</span> <span class="o">:=</span>
<span class="n">eq_bot_iff</span><span class="bp">.</span><span class="mi">2</span> <span class="err">$</span> <span class="bp">λ</span> <span class="n">x</span> <span class="n">hx</span><span class="o">,</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">mem_bot</span><span class="bp">.</span><span class="mi">2</span>
<span class="bp">⟨⟨</span><span class="n">x</span><span class="o">,</span> <span class="bp">@</span><span class="n">is_integral_trans</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="o">(</span><span class="n">integral_closure</span> <span class="n">R</span> <span class="n">A</span><span class="o">)</span><span class="bp">.</span><span class="n">algebra</span> <span class="bp">_</span> <span class="n">integral_closure</span><span class="bp">.</span><span class="n">is_integral</span> <span class="n">x</span> <span class="n">hx</span><span class="bp">⟩</span><span class="o">,</span> <span class="n">rfl</span><span class="bp">⟩</span>
</code></pre></div>



<a name="208538739"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Minimal%20polynomials/near/208538739" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Minimal.20polynomials.html#208538739">(Aug 31 2020 at 10:00)</a>:</h4>
<p>It looks like it is caused by the diamond <code>subalgebra -&gt; subring -&gt; ring</code> and <code>subalgebra -&gt; comm_ring -&gt; ring</code></p>



<a name="211330637"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Minimal%20polynomials/near/211330637" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Minimal.20polynomials.html#211330637">(Sep 25 2020 at 23:58)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> , I could add minimal polynomials of endomorphisms or matrices to the <code>yaml</code>s, but there's no one <code>decl</code>, as at <span class="user-mention" data-user-id="238446">@Anne Baanen</span>'s advice (which did simplify things), I've been working directly with expressions of the form <code>minimal_polynomial f.is_integral</code>. Should I define <code>min_poly</code> somewhere, so we can link to it?</p>



<a name="211343461"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Minimal%20polynomials/near/211343461" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Minimal.20polynomials.html#211343461">(Sep 26 2020 at 05:27)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> what do you think? Should we just link to <code>minimal_polynomial</code> for the minpoly of a matrix?</p>



<a name="211354260"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Minimal%20polynomials/near/211354260" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Minimal.20polynomials.html#211354260">(Sep 26 2020 at 10:44)</a>:</h4>
<p>If I had to choose one, then it would be <code>matrix.is_integral</code>, because it contains the matrix/linear algebra specific work.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>