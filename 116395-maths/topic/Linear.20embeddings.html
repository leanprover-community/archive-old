---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/Linear.20embeddings.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Linear.20embeddings.html">Linear embeddings</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="197325470"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Linear%20embeddings/near/197325470" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Linear.20embeddings.html#197325470">(May 12 2020 at 19:22)</a>:</h4>
<p>I want to define/prove some stuff about <code>submodule</code>s (actually <code>lie_subalgebras</code> ultimately, though this is irrelevant) and it seems to be far more convenient to work with a linear embedding than an actual <code>submodule</code>. So I had a poke around and it seems that there is no definition for linear embeddings. Have I missed something, or would this be a welcome addition to Mathlib?</p>



<a name="197325620"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Linear%20embeddings/near/197325620" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Linear.20embeddings.html#197325620">(May 12 2020 at 19:23)</a>:</h4>
<p>The definition / lemmas I have in mind are approximately:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">set_option</span> <span class="n">old_structure_cmd</span> <span class="n">true</span>
<span class="kn">structure</span> <span class="n">linear_embedding</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">M</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">)</span> <span class="o">(</span><span class="n">M₂</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">w</span><span class="o">)</span>
  <span class="o">[</span><span class="n">ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">M₂</span><span class="o">]</span> <span class="o">[</span><span class="n">module</span> <span class="n">R</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">module</span> <span class="n">R</span> <span class="n">M₂</span><span class="o">]</span>
  <span class="kn">extends</span> <span class="n">M</span> <span class="bp">→</span><span class="err">ₗ</span><span class="o">[</span><span class="n">R</span><span class="o">]</span> <span class="n">M₂</span><span class="o">,</span> <span class="n">M</span> <span class="err">↪</span> <span class="n">M₂</span>

<span class="kn">notation</span> <span class="n">M</span> <span class="bp">`</span> <span class="err">↪ₗ</span><span class="o">[</span><span class="bp">`</span><span class="o">:</span><span class="mi">25</span> <span class="n">R</span><span class="o">:</span><span class="mi">25</span> <span class="bp">`</span><span class="o">]</span> <span class="bp">`</span><span class="o">:</span><span class="mi">0</span> <span class="n">M₂</span><span class="o">:</span><span class="mi">0</span> <span class="o">:=</span> <span class="n">linear_embedding</span> <span class="n">R</span> <span class="n">M</span> <span class="n">M₂</span>

<span class="n">def</span> <span class="n">submodule</span><span class="bp">.</span><span class="n">embedding</span> <span class="o">(</span><span class="n">M&#39;</span> <span class="o">:</span> <span class="n">submodule</span> <span class="n">R</span> <span class="n">M</span><span class="o">)</span> <span class="o">:</span> <span class="n">M&#39;</span> <span class="err">↪ₗ</span><span class="o">[</span><span class="n">R</span><span class="o">]</span> <span class="n">M</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="kn">lemma</span> <span class="n">submodule</span><span class="bp">.</span><span class="n">embedding_range&#39;</span> <span class="o">(</span><span class="n">M&#39;</span> <span class="o">:</span> <span class="n">submodule</span> <span class="n">R</span> <span class="n">M</span><span class="o">)</span> <span class="o">:</span> <span class="n">M&#39;</span><span class="bp">.</span><span class="n">embedding</span><span class="bp">.</span><span class="n">to_linear_map</span><span class="bp">.</span><span class="n">range</span> <span class="bp">=</span> <span class="n">M&#39;</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="kn">lemma</span> <span class="n">submodule</span><span class="bp">.</span><span class="n">range_embedding</span> <span class="o">{</span><span class="n">M&#39;</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">}</span> <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">M&#39;</span><span class="o">]</span> <span class="o">[</span><span class="n">module</span> <span class="n">R</span> <span class="n">M&#39;</span><span class="o">]</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">M&#39;</span> <span class="err">↪ₗ</span><span class="o">[</span><span class="n">R</span><span class="o">]</span> <span class="n">M</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">∃</span> <span class="o">(</span><span class="n">e</span> <span class="o">:</span> <span class="n">M&#39;</span> <span class="err">≃ₗ</span><span class="o">[</span><span class="n">R</span><span class="o">]</span> <span class="n">f</span><span class="bp">.</span><span class="n">to_linear_map</span><span class="bp">.</span><span class="n">range</span><span class="o">),</span> <span class="n">f</span><span class="bp">.</span><span class="n">to_linear_map</span><span class="bp">.</span><span class="n">range</span><span class="bp">.</span><span class="n">embedding</span><span class="bp">.</span><span class="n">to_linear_map</span><span class="bp">.</span><span class="n">comp</span> <span class="n">e</span><span class="bp">.</span><span class="n">to_linear_map</span> <span class="bp">=</span> <span class="n">f</span> <span class="o">:=</span> <span class="n">sorry</span>
</code></pre></div>



<a name="197325767"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Linear%20embeddings/near/197325767" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Linear.20embeddings.html#197325767">(May 12 2020 at 19:24)</a>:</h4>
<p>(modulo tidy up / naming etc. ofc)</p>



<a name="197329837"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Linear%20embeddings/near/197329837" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Linear.20embeddings.html#197329837">(May 12 2020 at 19:57)</a>:</h4>
<p>Phone doesn't show the notation. Which symbol do you use?</p>



<a name="197329915"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Linear%20embeddings/near/197329915" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Linear.20embeddings.html#197329915">(May 12 2020 at 19:58)</a>:</h4>
<p>\hookrightarrow with the little l subscript.</p>



<a name="197329963"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Linear%20embeddings/near/197329963" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Linear.20embeddings.html#197329963">(May 12 2020 at 19:58)</a>:</h4>
<p>The arrow is the same as the one already defined for structureless embedding</p>



<a name="197330119"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Linear%20embeddings/near/197330119" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Linear.20embeddings.html#197330119">(May 12 2020 at 19:59)</a>:</h4>
<p>Lgtm.</p>



<a name="197330147"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Linear%20embeddings/near/197330147" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Linear.20embeddings.html#197330147">(May 12 2020 at 19:59)</a>:</h4>
<p>OK thanks, I'll try to put together a PR and see what feedback I get there.</p>



<a name="197345320"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Linear%20embeddings/near/197345320" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Linear.20embeddings.html#197345320">(May 12 2020 at 21:58)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/2668">https://github.com/leanprover-community/mathlib/pull/2668</a></p>



<a name="197364452"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Linear%20embeddings/near/197364452" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Linear.20embeddings.html#197364452">(May 13 2020 at 03:02)</a>:</h4>
<p><span class="user-mention" data-user-id="240862">@Oliver Nash</span> I completely agree that it is often a lot more useful to work with an embedding than a substructure. Good move!<br>
The downside of your new structure is that you have to reprove lots of basic coercion and simp-lemma stuff. And then again for "ring embeddings" and "group embeddings" and "lie algebra embeddings" etc... An alternative approach to just use a linear map + assumption that it is injective. Have you considered that?</p>



<a name="197370739"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Linear%20embeddings/near/197370739" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Linear.20embeddings.html#197370739">(May 13 2020 at 05:38)</a>:</h4>
<p>I wish we had a tactic that magically exports lemmas about a substructure while adjusting some types and coercions.</p>



<a name="197377930"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Linear%20embeddings/near/197377930" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Linear.20embeddings.html#197377930">(May 13 2020 at 07:45)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="112680">@Johan Commelin</span> you have answered my implicit question perfectly, and unbundling properties like injectivity / surjectivity certainly seems like a plausible place to draw the line.</p>



<a name="197378247"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Linear%20embeddings/near/197378247" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Linear.20embeddings.html#197378247">(May 13 2020 at 07:49)</a>:</h4>
<p>The dream would be <span class="user-mention" data-user-id="214703">@Yury G. Kudryashov</span> 's suggestion of automatically creating these lemmas. I don't see any reason why we couldn't do that. Is there a fundamental obstruction or is this just something that has not been important enough yet?</p>



<a name="197378271"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Linear%20embeddings/near/197378271" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Linear.20embeddings.html#197378271">(May 13 2020 at 07:49)</a>:</h4>
<p>Anyway,  I should have some time again in a day or so and I'll try to push ahead with morphisms + injectivity assumption instead. In the meantime I'll close that PR.</p>



<a name="197380078"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Linear%20embeddings/near/197380078" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Linear.20embeddings.html#197380078">(May 13 2020 at 08:10)</a>:</h4>
<p>I think the bottleneck is availability of tactic writing expertise*hours</p>



<a name="197380581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Linear%20embeddings/near/197380581" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Linear.20embeddings.html#197380581">(May 13 2020 at 08:16)</a>:</h4>
<p>Interesting. I currently have zero seconds experience writing tactics but I'd like to learn about it. Maybe in a few weeks when I get to a natural stopping point with the Lie algebra stuff I've been trying to set up, I'll see if I can at least learn enough about tactic writing to understand how challenging this would be.</p>



<a name="197380589"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Linear%20embeddings/near/197380589" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Linear.20embeddings.html#197380589">(May 13 2020 at 08:17)</a>:</h4>
<p>Anyway, I better get back to the day job.</p>



<a name="205281658"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Linear%20embeddings/near/205281658" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Linear.20embeddings.html#205281658">(Jul 28 2020 at 19:45)</a>:</h4>
<p>Is there some way to make something like this compile?</p>
<div class="codehilite"><pre><span></span><code><span class="kn">structure</span> <span class="n">embedding_of</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">Sort</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">has_coe_to_fun</span><span class="bp">.</span><span class="o">{</span><span class="n">u</span> <span class="n">v</span><span class="o">}</span> <span class="n">f</span><span class="o">]:=</span>
<span class="o">(</span><span class="n">to_fun</span> <span class="o">:</span> <span class="n">f</span><span class="o">)</span>
<span class="o">(</span><span class="n">inj&#39;</span>   <span class="o">:</span> <span class="n">function</span><span class="bp">.</span><span class="n">injective</span> <span class="err">⇑</span><span class="n">to_fun</span><span class="o">)</span>
</code></pre></div>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>