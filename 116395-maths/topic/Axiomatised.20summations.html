---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/Axiomatised.20summations.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html">Axiomatised summations</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="178665400"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178665400" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Abhimanyu Pallavi Sudhir <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178665400">(Oct 21 2019 at 15:18)</a>:</h4>
<p>Would "axiomatised" infinite sums be a useful addition to mathlib? </p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">real</span><span class="bp">.</span><span class="n">basic</span>

<span class="n">def</span> <span class="n">sum_add</span> <span class="o">(</span><span class="n">sum</span> <span class="o">:</span> <span class="o">(</span><span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">∀</span> <span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span> <span class="n">sum</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="n">a</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">b</span> <span class="n">n</span><span class="o">)</span> <span class="bp">=</span> <span class="n">sum</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">sum</span> <span class="n">b</span>
<span class="n">def</span> <span class="n">sum_smul</span> <span class="o">(</span><span class="n">sum</span> <span class="o">:</span> <span class="o">(</span><span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">∀</span> <span class="n">a</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span> <span class="n">sum</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="n">c</span> <span class="bp">*</span> <span class="n">a</span> <span class="n">n</span><span class="o">)</span> <span class="bp">=</span> <span class="n">c</span> <span class="bp">*</span> <span class="n">sum</span> <span class="n">a</span>
<span class="n">def</span> <span class="n">sum_shift</span> <span class="o">(</span><span class="n">sum</span> <span class="o">:</span> <span class="o">(</span><span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">∀</span> <span class="n">a</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span> <span class="n">sum</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="n">a</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span> <span class="n">sum</span> <span class="n">a</span> <span class="bp">-</span> <span class="n">a</span> <span class="mi">0</span>

<span class="n">def</span> <span class="n">sum_axioms</span> <span class="o">(</span><span class="n">sum</span> <span class="o">:</span> <span class="o">(</span><span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="n">sum_add</span> <span class="n">sum</span> <span class="bp">∧</span> <span class="n">sum_smul</span> <span class="n">sum</span> <span class="bp">∧</span> <span class="n">sum_shift</span> <span class="n">sum</span>

<span class="n">def</span> <span class="n">has_sum</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">∀</span> <span class="n">sum</span><span class="o">,</span> <span class="n">sum_axioms</span> <span class="n">sum</span> <span class="bp">→</span> <span class="bp">∀</span> <span class="n">t</span><span class="o">,</span> <span class="n">sum</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">t</span> <span class="bp">→</span> <span class="n">t</span> <span class="bp">=</span> <span class="n">s</span>

<span class="kn">theorem</span> <span class="n">has_sum_alt</span> <span class="o">:</span> <span class="n">has_sum</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="err">^</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="mi">1</span><span class="bp">/</span><span class="mi">2</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">intros</span> <span class="n">sum</span> <span class="n">axs</span> <span class="n">t</span> <span class="n">Ht</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">H2</span> <span class="o">:=</span> <span class="n">axs</span><span class="bp">.</span><span class="mi">2</span><span class="bp">.</span><span class="mi">1</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="err">^</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span><span class="o">),</span>
  <span class="k">have</span> <span class="n">H3</span> <span class="o">:=</span> <span class="n">axs</span><span class="bp">.</span><span class="mi">2</span><span class="bp">.</span><span class="mi">2</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="err">^</span> <span class="n">n</span><span class="o">),</span>
  <span class="n">change</span> <span class="n">sum</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="bp">_</span> <span class="err">^</span> <span class="n">n</span><span class="o">)</span> <span class="bp">=</span> <span class="bp">_</span> <span class="bp">-</span> <span class="mi">1</span> <span class="n">at</span> <span class="n">H3</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">H2</span><span class="o">,</span> <span class="n">Ht</span><span class="o">]</span> <span class="n">at</span> <span class="n">H3</span><span class="o">,</span>
  <span class="n">linarith</span><span class="o">,</span>
<span class="kn">end</span>

<span class="kn">theorem</span> <span class="n">has_sum_alt_id</span> <span class="o">:</span> <span class="n">has_sum</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="err">^</span> <span class="n">n</span> <span class="bp">*</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span><span class="bp">/</span><span class="mi">4</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">intros</span> <span class="n">sum</span> <span class="n">axs</span> <span class="n">t</span> <span class="n">Ht</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">H1</span> <span class="o">:=</span> <span class="n">axs</span><span class="bp">.</span><span class="mi">1</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="err">^</span> <span class="n">n</span> <span class="bp">*</span> <span class="err">↑</span><span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="err">^</span> <span class="n">n</span> <span class="bp">*</span> <span class="o">(</span><span class="err">↑</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)),</span>
  <span class="k">have</span> <span class="n">H2</span> <span class="o">:=</span> <span class="n">axs</span><span class="bp">.</span><span class="mi">2</span><span class="bp">.</span><span class="mi">1</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="err">^</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span><span class="o">),</span>
  <span class="k">have</span> <span class="n">H3</span> <span class="o">:=</span> <span class="n">axs</span><span class="bp">.</span><span class="mi">2</span><span class="bp">.</span><span class="mi">2</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="err">^</span> <span class="n">n</span> <span class="bp">*</span> <span class="n">n</span><span class="o">),</span>
  <span class="k">have</span> <span class="n">HA</span> <span class="o">:</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="err">^</span> <span class="n">n</span> <span class="bp">*</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">+</span> <span class="bp">-</span><span class="mi">1</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="err">^</span> <span class="n">n</span> <span class="bp">*</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>
  <span class="bp">=</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="bp">-</span><span class="mi">1</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="err">^</span> <span class="n">n</span><span class="o">)</span> <span class="o">:=</span>
    <span class="n">funext</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">mul_add</span><span class="o">,</span> <span class="n">mul_one</span><span class="o">,</span> <span class="err">←</span><span class="n">add_assoc</span><span class="o">,</span> <span class="n">neg_one_mul</span><span class="o">,</span>
      <span class="err">←</span><span class="n">neg_mul_eq_neg_mul</span><span class="o">,</span> <span class="n">add_neg_self</span><span class="o">,</span> <span class="n">zero_add</span><span class="o">]),</span>
  <span class="n">change</span> <span class="n">sum</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="err">^</span> <span class="n">n</span> <span class="bp">*</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span>
  <span class="bp">=</span> <span class="n">sum</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="o">(</span><span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="err">^</span> <span class="n">n</span> <span class="bp">*</span> <span class="n">n</span><span class="o">)</span> <span class="bp">-</span> <span class="mi">1</span> <span class="bp">*</span> <span class="mi">0</span> <span class="n">at</span> <span class="n">H3</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">mul_zero</span><span class="o">,</span> <span class="n">sub_zero</span><span class="o">,</span> <span class="n">Ht</span><span class="o">]</span> <span class="n">at</span> <span class="n">H3</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">HA</span><span class="o">,</span> <span class="n">Ht</span><span class="o">,</span> <span class="n">H3</span><span class="o">,</span> <span class="n">H2</span><span class="o">,</span> <span class="n">neg_one_mul</span><span class="o">,</span> <span class="n">neg_eq_iff_neg_eq</span><span class="o">,</span> <span class="n">eq_comm</span><span class="o">]</span> <span class="n">at</span> <span class="n">H1</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">HB</span> <span class="o">:=</span> <span class="n">has_sum_alt</span> <span class="n">sum</span> <span class="n">axs</span> <span class="bp">_</span> <span class="n">H1</span><span class="o">,</span>
  <span class="n">linarith</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>



<a name="178665560"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178665560" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178665560">(Oct 21 2019 at 15:20)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/blob/master/src/topology/algebra/infinite_sum.lean" target="_blank" title="https://github.com/leanprover-community/mathlib/blob/master/src/topology/algebra/infinite_sum.lean">https://github.com/leanprover-community/mathlib/blob/master/src/topology/algebra/infinite_sum.lean</a></p>



<a name="178665917"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178665917" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178665917">(Oct 21 2019 at 15:24)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">real</span><span class="bp">.</span><span class="n">basic</span>

<span class="n">def</span> <span class="n">sum_add</span> <span class="o">(</span><span class="n">sum</span> <span class="o">:</span> <span class="o">(</span><span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">∀</span> <span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span> <span class="n">sum</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="n">a</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">b</span> <span class="n">n</span><span class="o">)</span> <span class="bp">=</span> <span class="n">sum</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">sum</span> <span class="n">b</span>
<span class="n">def</span> <span class="n">sum_smul</span> <span class="o">(</span><span class="n">sum</span> <span class="o">:</span> <span class="o">(</span><span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">∀</span> <span class="n">a</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span> <span class="n">sum</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="n">c</span> <span class="bp">*</span> <span class="n">a</span> <span class="n">n</span><span class="o">)</span> <span class="bp">=</span> <span class="n">c</span> <span class="bp">*</span> <span class="n">sum</span> <span class="n">a</span>
<span class="n">def</span> <span class="n">sum_shift</span> <span class="o">(</span><span class="n">sum</span> <span class="o">:</span> <span class="o">(</span><span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">∀</span> <span class="n">a</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span> <span class="n">sum</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="n">a</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="bp">=</span> <span class="n">sum</span> <span class="n">a</span> <span class="bp">-</span> <span class="n">a</span> <span class="mi">0</span>

<span class="n">def</span> <span class="n">sum_axioms</span> <span class="o">(</span><span class="n">sum</span> <span class="o">:</span> <span class="o">(</span><span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="n">sum_add</span> <span class="n">sum</span> <span class="bp">∧</span> <span class="n">sum_smul</span> <span class="n">sum</span> <span class="bp">∧</span> <span class="n">sum_shift</span> <span class="n">sum</span>

<span class="n">def</span> <span class="n">has_sum</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">∀</span> <span class="n">sum</span><span class="o">,</span> <span class="n">sum_axioms</span> <span class="n">sum</span> <span class="bp">→</span> <span class="bp">∀</span> <span class="n">t</span><span class="o">,</span> <span class="n">sum</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">t</span> <span class="bp">→</span> <span class="n">t</span> <span class="bp">=</span> <span class="n">s</span>

<span class="kn">theorem</span> <span class="n">no_sum</span> <span class="o">(</span><span class="n">sum</span> <span class="o">:</span> <span class="o">(</span><span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">sum_axioms</span> <span class="n">sum</span><span class="o">)</span> <span class="o">:</span> <span class="n">false</span> <span class="o">:=</span>
<span class="n">ne_of_gt</span> <span class="o">(</span><span class="n">sub_lt_self</span> <span class="bp">_</span> <span class="o">(</span><span class="n">zero_lt_one</span> <span class="o">:</span> <span class="o">(</span><span class="mi">0</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span> <span class="bp">&lt;</span> <span class="mi">1</span><span class="o">))</span> <span class="o">(</span><span class="n">h</span><span class="bp">.</span><span class="mi">2</span><span class="bp">.</span><span class="mi">2</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="mi">1</span><span class="o">))</span>

<span class="kn">theorem</span> <span class="n">sum_is_anything</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span> <span class="n">has_sum</span> <span class="n">a</span> <span class="n">s</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="n">s</span> <span class="n">hs</span><span class="o">,</span> <span class="n">false</span><span class="bp">.</span><span class="n">elim</span> <span class="err">$</span> <span class="n">no_sum</span> <span class="n">s</span> <span class="n">hs</span>
</pre></div>



<a name="178666022"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178666022" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178666022">(Oct 21 2019 at 15:25)</a>:</h4>
<p>How does this relate to <code>tsum</code> and <code>has_sum</code> that are already in mathlib?</p>



<a name="178667352"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178667352" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178667352">(Oct 21 2019 at 15:40)</a>:</h4>
<p>Kenny explained the relation (unless <code>tsum</code> and <code>has_sum</code> can somehow be used to prove <code>false</code>).</p>



<a name="178669852"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178669852" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Abhimanyu Pallavi Sudhir <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178669852">(Oct 21 2019 at 16:03)</a>:</h4>
<blockquote>
<div class="codehilite"><pre><span></span><span class="bp">...</span>
<span class="kn">theorem</span> <span class="n">no_sum</span> <span class="o">(</span><span class="n">sum</span> <span class="o">:</span> <span class="o">(</span><span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">sum_axioms</span> <span class="n">sum</span><span class="o">)</span> <span class="o">:</span> <span class="n">false</span> <span class="o">:=</span>
<span class="n">ne_of_gt</span> <span class="o">(</span><span class="n">sub_lt_self</span> <span class="bp">_</span> <span class="o">(</span><span class="n">zero_lt_one</span> <span class="o">:</span> <span class="o">(</span><span class="mi">0</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span> <span class="bp">&lt;</span> <span class="mi">1</span><span class="o">))</span> <span class="o">(</span><span class="n">h</span><span class="bp">.</span><span class="mi">2</span><span class="bp">.</span><span class="mi">2</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="mi">1</span><span class="o">))</span>

<span class="kn">theorem</span> <span class="n">sum_is_anything</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span> <span class="n">has_sum</span> <span class="n">a</span> <span class="n">s</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="n">s</span> <span class="n">hs</span><span class="o">,</span> <span class="n">false</span><span class="bp">.</span><span class="n">elim</span> <span class="err">$</span> <span class="n">no_sum</span> <span class="n">s</span> <span class="n">hs</span>
</pre></div>


</blockquote>
<p>Damn it, I keep screwing this up. There's got to be a correct way to define it.</p>



<a name="178670566"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178670566" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Abhimanyu Pallavi Sudhir <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178670566">(Oct 21 2019 at 16:10)</a>:</h4>
<p>I have an idea. What if one defined axioms defining "summable spaces" as subspaces of <code>ℕ → ℝ</code> that were (1) vector spaces and (2) closed under shifts -- then such spaces could have a definable summations even though all of <code>ℕ → ℝ</code> does not.</p>



<a name="178670596"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178670596" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Abhimanyu Pallavi Sudhir <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178670596">(Oct 21 2019 at 16:10)</a>:</h4>
<p>No wait, that's useless.</p>



<a name="178670999"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178670999" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178670999">(Oct 21 2019 at 16:15)</a>:</h4>
<p>unfortunately this is a situation like measure theory: you can't have all sets be measurable</p>



<a name="178671117"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178671117" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Abhimanyu Pallavi Sudhir <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178671117">(Oct 21 2019 at 16:16)</a>:</h4>
<p>Yes, but what would be a reasonably useful definition of the "Borel sets" here? Somehow there are some series for which you can define sums without causing any contradictions.</p>



<a name="178671234"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178671234" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178671234">(Oct 21 2019 at 16:17)</a>:</h4>
<p>The ones that converge?</p>



<a name="178671249"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178671249" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178671249">(Oct 21 2019 at 16:17)</a>:</h4>
<p><a href="https://blog.wolfram.com/2014/08/06/the-abcd-of-divergent-series/" target="_blank" title="https://blog.wolfram.com/2014/08/06/the-abcd-of-divergent-series/">https://blog.wolfram.com/2014/08/06/the-abcd-of-divergent-series/</a></p>



<a name="178671314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178671314" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178671314">(Oct 21 2019 at 16:18)</a>:</h4>
<p>Again, why do you want to axiomatize this when we have it defined from first principles in mathlib?</p>



<a name="178671317"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178671317" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178671317">(Oct 21 2019 at 16:18)</a>:</h4>
<p>I guess you can pick a letter from A to D and then consider the space of the summable functions under the letter</p>



<a name="178671426"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178671426" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178671426">(Oct 21 2019 at 16:19)</a>:</h4>
<p>Abhi likes physics, he wants to do 1+2+3+4+...=-1/2 or whatever, right?</p>



<a name="178671520"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178671520" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Abhimanyu Pallavi Sudhir <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178671520">(Oct 21 2019 at 16:20)</a>:</h4>
<p>-1/12 isn't really possible with these axioms. But e.g. 1-2+3-4+...=1/4 is.</p>



<a name="178674321"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178674321" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Abhimanyu Pallavi Sudhir <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178674321">(Oct 21 2019 at 16:51)</a>:</h4>
<p>Perhaps this is better:</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">real</span><span class="bp">.</span><span class="n">basic</span>

<span class="n">def</span> <span class="n">sum_add</span> <span class="o">(</span><span class="n">sum</span> <span class="o">:</span> <span class="o">(</span><span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:=</span>
  <span class="bp">∀</span> <span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span> <span class="n">sum</span> <span class="n">a</span> <span class="n">s</span> <span class="bp">→</span> <span class="n">sum</span> <span class="n">b</span> <span class="n">t</span> <span class="bp">→</span> <span class="n">sum</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="n">a</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">b</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="bp">+</span> <span class="n">t</span><span class="o">)</span>
<span class="n">def</span> <span class="n">sum_smul</span> <span class="o">(</span><span class="n">sum</span> <span class="o">:</span> <span class="o">(</span><span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:=</span>
  <span class="bp">∀</span> <span class="n">a</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">s</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span> <span class="n">sum</span> <span class="n">a</span> <span class="n">s</span> <span class="bp">→</span> <span class="n">sum</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="n">c</span> <span class="bp">*</span> <span class="n">a</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="n">c</span> <span class="bp">*</span> <span class="n">s</span><span class="o">)</span>
<span class="n">def</span> <span class="n">sum_shift</span> <span class="o">(</span><span class="n">sum</span> <span class="o">:</span> <span class="o">(</span><span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:=</span>
  <span class="bp">∀</span> <span class="n">a</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">s</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span> <span class="n">sum</span> <span class="n">a</span> <span class="n">s</span> <span class="bp">→</span> <span class="n">sum</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="n">a</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="o">(</span><span class="n">s</span> <span class="bp">-</span> <span class="n">a</span> <span class="mi">0</span><span class="o">)</span>

<span class="n">def</span> <span class="n">sum_axioms</span> <span class="o">(</span><span class="n">has_sum</span> <span class="o">:</span> <span class="o">(</span><span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="n">sum_add</span> <span class="n">has_sum</span> <span class="bp">∧</span> <span class="n">sum_smul</span> <span class="n">has_sum</span> <span class="bp">∧</span> <span class="n">sum_shift</span> <span class="n">has_sum</span>

<span class="n">def</span> <span class="n">has_sum</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">∀</span> <span class="n">sum</span><span class="o">,</span> <span class="n">sum_axioms</span> <span class="n">sum</span> <span class="bp">→</span> <span class="bp">∀</span> <span class="n">t</span><span class="o">,</span> <span class="n">sum</span> <span class="n">a</span> <span class="n">t</span> <span class="bp">→</span> <span class="n">t</span> <span class="bp">=</span> <span class="n">s</span>
</pre></div>



<a name="178675171"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178675171" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Abhimanyu Pallavi Sudhir <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178675171">(Oct 21 2019 at 17:01)</a>:</h4>
<p>Oh wait, no it's not.</p>



<a name="178675264"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178675264" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178675264">(Oct 21 2019 at 17:02)</a>:</h4>
<p>1+1+1+1+1+... is never going to be summable to anything sensible using any convention, right?</p>



<a name="178675284"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178675284" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178675284">(Oct 21 2019 at 17:02)</a>:</h4>
<p>maybe ∞</p>



<a name="178675966"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178675966" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178675966">(Oct 21 2019 at 17:10)</a>:</h4>
<p>Apparently some physicists would say it's -1/2: <a href="https://en.wikipedia.org/wiki/1_%2B_1_%2B_1_%2B_1_%2B_%E2%8B%AF" target="_blank" title="https://en.wikipedia.org/wiki/1_%2B_1_%2B_1_%2B_1_%2B_%E2%8B%AF">https://en.wikipedia.org/wiki/1_%2B_1_%2B_1_%2B_1_%2B_%E2%8B%AF</a></p>



<a name="178676237"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178676237" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Abhimanyu Pallavi Sudhir <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178676237">(Oct 21 2019 at 17:13)</a>:</h4>
<blockquote>
<p>1+1+1+1+1+... is never going to be summable to anything sensible using any convention, right?</p>
</blockquote>
<p>Not with the axioms I defined, no. Contradicts stability.</p>



<a name="178676283"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178676283" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178676283">(Oct 21 2019 at 17:14)</a>:</h4>
<p>I feel like your thing works <span class="user-mention" data-user-id="130500">@Abhimanyu Pallavi Sudhir</span></p>



<a name="178676345"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178676345" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Abhimanyu Pallavi Sudhir <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178676345">(Oct 21 2019 at 17:15)</a>:</h4>
<p>Maybe. I'm playing with it.</p>



<a name="178677132"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178677132" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178677132">(Oct 21 2019 at 17:23)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">real</span><span class="bp">.</span><span class="n">basic</span>

<span class="n">def</span> <span class="n">sum_add</span> <span class="o">(</span><span class="n">sum</span> <span class="o">:</span> <span class="o">(</span><span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:=</span>
  <span class="bp">∀</span> <span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span> <span class="n">sum</span> <span class="n">a</span> <span class="n">s</span> <span class="bp">→</span> <span class="n">sum</span> <span class="n">b</span> <span class="n">t</span> <span class="bp">→</span> <span class="n">sum</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="n">a</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">b</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="bp">+</span> <span class="n">t</span><span class="o">)</span>
<span class="n">def</span> <span class="n">sum_smul</span> <span class="o">(</span><span class="n">sum</span> <span class="o">:</span> <span class="o">(</span><span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:=</span>
  <span class="bp">∀</span> <span class="n">a</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">s</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span> <span class="n">sum</span> <span class="n">a</span> <span class="n">s</span> <span class="bp">→</span> <span class="n">sum</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="n">c</span> <span class="bp">*</span> <span class="n">a</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="n">c</span> <span class="bp">*</span> <span class="n">s</span><span class="o">)</span>
<span class="n">def</span> <span class="n">sum_shift</span> <span class="o">(</span><span class="n">sum</span> <span class="o">:</span> <span class="o">(</span><span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:=</span>
  <span class="bp">∀</span> <span class="n">a</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">s</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span> <span class="n">sum</span> <span class="n">a</span> <span class="n">s</span> <span class="bp">→</span> <span class="n">sum</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="n">a</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))</span> <span class="o">(</span><span class="n">s</span> <span class="bp">-</span> <span class="n">a</span> <span class="mi">0</span><span class="o">)</span>

<span class="n">def</span> <span class="n">sum_axioms</span> <span class="o">(</span><span class="n">has_sum</span> <span class="o">:</span> <span class="o">(</span><span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="n">sum_add</span> <span class="n">has_sum</span> <span class="bp">∧</span> <span class="n">sum_smul</span> <span class="n">has_sum</span> <span class="bp">∧</span> <span class="n">sum_shift</span> <span class="n">has_sum</span>

<span class="n">def</span> <span class="n">has_sum</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">∀</span> <span class="n">sum</span><span class="o">,</span> <span class="n">sum_axioms</span> <span class="n">sum</span> <span class="bp">→</span> <span class="bp">∀</span> <span class="n">t</span><span class="o">,</span> <span class="n">sum</span> <span class="n">a</span> <span class="n">t</span> <span class="bp">→</span> <span class="n">t</span> <span class="bp">=</span> <span class="n">s</span>

<span class="kn">theorem</span> <span class="n">sum_const_one</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">has_sum</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span> <span class="n">s</span> <span class="o">:=</span>
<span class="k">assume</span> <span class="n">h</span> <span class="o">:</span> <span class="n">has_sum</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span> <span class="n">s</span><span class="o">,</span>
<span class="k">have</span> <span class="n">h1</span> <span class="o">:</span> <span class="bp">_</span> <span class="o">:=</span> <span class="n">h</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">a</span> <span class="n">t</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">n</span><span class="o">,</span> <span class="n">a</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">a</span> <span class="mi">0</span><span class="o">)</span>
  <span class="bp">⟨λ</span> <span class="n">a</span> <span class="n">b</span> <span class="n">t</span> <span class="n">u</span> <span class="n">ht</span> <span class="n">hu</span> <span class="n">n</span><span class="o">,</span> <span class="k">by</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">ht</span> <span class="n">n</span><span class="o">,</span> <span class="n">hu</span> <span class="n">n</span><span class="o">],</span>
  <span class="bp">λ</span> <span class="n">a</span> <span class="n">t</span> <span class="n">c</span> <span class="n">ht</span> <span class="n">n</span><span class="o">,</span> <span class="k">by</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">ht</span> <span class="n">n</span><span class="o">],</span>
  <span class="bp">λ</span> <span class="n">a</span> <span class="n">s</span> <span class="n">hs</span> <span class="n">n</span><span class="o">,</span> <span class="o">(</span><span class="n">hs</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span><span class="bp">.</span><span class="n">trans</span> <span class="o">(</span><span class="n">hs</span> <span class="mi">1</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span><span class="bp">⟩</span><span class="o">,</span>
<span class="k">have</span> <span class="n">h0s</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">=</span> <span class="n">s</span> <span class="o">:=</span> <span class="n">h1</span> <span class="bp">_</span> <span class="err">$</span> <span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="n">rfl</span><span class="o">,</span>
<span class="k">have</span> <span class="n">h1s</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">s</span> <span class="o">:=</span> <span class="n">h1</span> <span class="bp">_</span> <span class="err">$</span> <span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="n">rfl</span><span class="o">,</span>
<span class="n">zero_ne_one</span> <span class="err">$</span> <span class="n">h0s</span><span class="bp">.</span><span class="n">trans</span> <span class="n">h1s</span><span class="bp">.</span><span class="n">symm</span>
</pre></div>



<a name="178677146"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178677146" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178677146">(Oct 21 2019 at 17:23)</a>:</h4>
<p>so the constant sequence 1 is not summable</p>



<a name="178677161"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178677161" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178677161">(Oct 21 2019 at 17:23)</a>:</h4>
<p>and it's a (relatively) non-trivial theorem</p>



<a name="178677297"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178677297" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178677297">(Oct 21 2019 at 17:24)</a>:</h4>
<p>however I'm more concerned about the validity of:</p>
<div class="codehilite"><pre><span></span><span class="kn">theorem</span> <span class="n">sum_unique</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">hs</span> <span class="o">:</span> <span class="n">has_sum</span> <span class="n">a</span> <span class="n">s</span><span class="o">)</span> <span class="o">(</span><span class="n">ht</span> <span class="o">:</span> <span class="n">has_sum</span> <span class="n">a</span> <span class="n">t</span><span class="o">)</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">=</span> <span class="n">t</span> <span class="o">:=</span>
<span class="n">sorry</span>
</pre></div>



<a name="178677622"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178677622" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178677622">(Oct 21 2019 at 17:27)</a>:</h4>
<p>wait, this is troublesome:</p>
<div class="codehilite"><pre><span></span><span class="kn">theorem</span> <span class="n">sum_const</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">has_sum</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="n">c</span><span class="o">)</span> <span class="n">s</span> <span class="o">:=</span>
<span class="k">assume</span> <span class="n">h</span> <span class="o">:</span> <span class="n">has_sum</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="n">c</span><span class="o">)</span> <span class="n">s</span><span class="o">,</span>
<span class="k">have</span> <span class="n">h1</span> <span class="o">:</span> <span class="bp">_</span> <span class="o">:=</span> <span class="n">h</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">a</span> <span class="n">t</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">n</span><span class="o">,</span> <span class="n">a</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">a</span> <span class="mi">0</span><span class="o">)</span>
  <span class="bp">⟨λ</span> <span class="n">a</span> <span class="n">b</span> <span class="n">t</span> <span class="n">u</span> <span class="n">ht</span> <span class="n">hu</span> <span class="n">n</span><span class="o">,</span> <span class="k">by</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">ht</span> <span class="n">n</span><span class="o">,</span> <span class="n">hu</span> <span class="n">n</span><span class="o">],</span>
  <span class="bp">λ</span> <span class="n">a</span> <span class="n">t</span> <span class="n">c</span> <span class="n">ht</span> <span class="n">n</span><span class="o">,</span> <span class="k">by</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">ht</span> <span class="n">n</span><span class="o">],</span>
  <span class="bp">λ</span> <span class="n">a</span> <span class="n">s</span> <span class="n">hs</span> <span class="n">n</span><span class="o">,</span> <span class="o">(</span><span class="n">hs</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span><span class="bp">.</span><span class="n">trans</span> <span class="o">(</span><span class="n">hs</span> <span class="mi">1</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span><span class="bp">⟩</span><span class="o">,</span>
<span class="k">have</span> <span class="n">h0s</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">=</span> <span class="n">s</span> <span class="o">:=</span> <span class="n">h1</span> <span class="bp">_</span> <span class="err">$</span> <span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="n">rfl</span><span class="o">,</span>
<span class="k">have</span> <span class="n">h1s</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">s</span> <span class="o">:=</span> <span class="n">h1</span> <span class="bp">_</span> <span class="err">$</span> <span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="n">rfl</span><span class="o">,</span>
<span class="n">zero_ne_one</span> <span class="err">$</span> <span class="n">h0s</span><span class="bp">.</span><span class="n">trans</span> <span class="n">h1s</span><span class="bp">.</span><span class="n">symm</span>
</pre></div>



<a name="178677692"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178677692" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Abhimanyu Pallavi Sudhir <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178677692">(Oct 21 2019 at 17:28)</a>:</h4>
<blockquote>
<p>however I'm more concerned about the validity of:</p>
<div class="codehilite"><pre><span></span><span class="kn">theorem</span> <span class="n">sum_unique</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">hs</span> <span class="o">:</span> <span class="n">has_sum</span> <span class="n">a</span> <span class="n">s</span><span class="o">)</span> <span class="o">(</span><span class="n">ht</span> <span class="o">:</span> <span class="n">has_sum</span> <span class="n">a</span> <span class="n">t</span><span class="o">)</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">=</span> <span class="n">t</span> <span class="o">:=</span>
<span class="n">sorry</span>
</pre></div>


</blockquote>
<p>It's not true. If <code>a</code> has no sum, it has every sum. Which is why I said "oh wait it's not" earlier.</p>



<a name="178677824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178677824" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178677824">(Oct 21 2019 at 17:29)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">theorem</span> <span class="n">sum_is_nothing</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span> <span class="bp">¬</span><span class="n">has_sum</span> <span class="n">a</span> <span class="n">s</span> <span class="o">:=</span>
<span class="k">assume</span> <span class="n">h</span> <span class="o">:</span> <span class="n">has_sum</span> <span class="n">a</span> <span class="n">s</span><span class="o">,</span>
<span class="k">have</span> <span class="n">h1</span> <span class="o">:</span> <span class="bp">_</span> <span class="o">:=</span> <span class="n">h</span> <span class="o">(</span><span class="bp">λ</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">,</span> <span class="n">true</span><span class="o">)</span> <span class="o">(</span><span class="k">by</span> <span class="n">refine</span> <span class="bp">⟨λ</span> <span class="bp">_</span><span class="o">,</span> <span class="bp">_</span><span class="o">,</span> <span class="bp">λ</span> <span class="bp">_</span><span class="o">,</span> <span class="bp">_</span><span class="o">,</span> <span class="bp">λ</span> <span class="bp">_</span><span class="o">,</span> <span class="bp">_⟩;</span> <span class="n">intros</span><span class="bp">;</span> <span class="n">trivial</span><span class="o">),</span>
<span class="k">have</span> <span class="n">h0s</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">=</span> <span class="n">s</span> <span class="o">:=</span> <span class="n">h1</span> <span class="bp">_</span> <span class="n">trivial</span><span class="o">,</span>
<span class="k">have</span> <span class="n">h1s</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">s</span> <span class="o">:=</span> <span class="n">h1</span> <span class="bp">_</span> <span class="n">trivial</span><span class="o">,</span>
<span class="n">zero_ne_one</span> <span class="err">$</span> <span class="n">h0s</span><span class="bp">.</span><span class="n">trans</span> <span class="n">h1s</span><span class="bp">.</span><span class="n">symm</span>
</pre></div>



<a name="178677827"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178677827" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178677827">(Oct 21 2019 at 17:29)</a>:</h4>
<p>boom</p>



<a name="178677916"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178677916" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178677916">(Oct 21 2019 at 17:30)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">theorem</span> <span class="n">sum_unique</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">hs</span> <span class="o">:</span> <span class="n">has_sum</span> <span class="n">a</span> <span class="n">s</span><span class="o">)</span> <span class="o">(</span><span class="n">ht</span> <span class="o">:</span> <span class="n">has_sum</span> <span class="n">a</span> <span class="n">t</span><span class="o">)</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">=</span> <span class="n">t</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">sum_is_nothing</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">hs</span><span class="o">)</span><span class="bp">.</span><span class="n">elim</span>
</pre></div>



<a name="178677960"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178677960" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178677960">(Oct 21 2019 at 17:31)</a>:</h4>
<p><code>#lint</code> points out that you don't need the assumption <code>ht</code>.</p>



<a name="178678162"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178678162" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178678162">(Oct 21 2019 at 17:33)</a>:</h4>
<p>I'll even propose a fix for you:</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">real</span><span class="bp">.</span><span class="n">basic</span>

<span class="kn">structure</span> <span class="n">is_sum</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="o">(</span><span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">wd</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">a</span> <span class="n">s</span> <span class="n">t</span><span class="o">},</span> <span class="n">f</span> <span class="n">a</span> <span class="n">s</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">a</span> <span class="n">t</span> <span class="bp">→</span> <span class="n">s</span> <span class="bp">=</span> <span class="n">t</span><span class="o">)</span>
<span class="o">(</span><span class="n">sum_add</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="n">s</span> <span class="n">t</span><span class="o">},</span> <span class="n">f</span> <span class="n">a</span> <span class="n">s</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">b</span> <span class="n">t</span> <span class="bp">→</span> <span class="n">f</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="n">a</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">b</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="bp">+</span> <span class="n">t</span><span class="o">))</span>
<span class="o">(</span><span class="n">sum_smul</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">a</span> <span class="n">s</span> <span class="n">c</span><span class="o">},</span> <span class="n">f</span> <span class="n">a</span> <span class="n">s</span> <span class="bp">→</span> <span class="n">f</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="n">c</span> <span class="bp">*</span> <span class="n">a</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="n">c</span> <span class="bp">*</span> <span class="n">s</span><span class="o">))</span>
<span class="o">(</span><span class="n">sum_shift</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">a</span> <span class="n">s</span><span class="o">},</span> <span class="n">f</span> <span class="n">a</span> <span class="n">s</span> <span class="bp">→</span> <span class="n">f</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="n">a</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span> <span class="o">(</span><span class="n">s</span> <span class="bp">-</span> <span class="n">a</span> <span class="mi">0</span><span class="o">))</span>

<span class="n">def</span> <span class="n">has_sum</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">∀</span> <span class="n">f</span><span class="o">,</span> <span class="n">is_sum</span> <span class="n">f</span> <span class="bp">→</span> <span class="bp">∀</span> <span class="n">t</span><span class="o">,</span> <span class="n">f</span> <span class="n">a</span> <span class="n">t</span> <span class="bp">→</span> <span class="n">t</span> <span class="bp">=</span> <span class="n">s</span>
</pre></div>



<a name="178678193"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178678193" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178678193">(Oct 21 2019 at 17:33)</a>:</h4>
<p>let's see if this new <code>has_sum</code> is trivial</p>



<a name="178680218"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178680218" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178680218">(Oct 21 2019 at 17:53)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">real</span><span class="bp">.</span><span class="n">basic</span>

<span class="kn">structure</span> <span class="n">is_sum</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="o">(</span><span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">wd</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">a</span> <span class="n">s</span> <span class="n">t</span><span class="o">},</span> <span class="n">f</span> <span class="n">a</span> <span class="n">s</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">a</span> <span class="n">t</span> <span class="bp">→</span> <span class="n">s</span> <span class="bp">=</span> <span class="n">t</span><span class="o">)</span>
<span class="o">(</span><span class="n">sum_add</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="n">s</span> <span class="n">t</span><span class="o">},</span> <span class="n">f</span> <span class="n">a</span> <span class="n">s</span> <span class="bp">→</span> <span class="n">f</span> <span class="n">b</span> <span class="n">t</span> <span class="bp">→</span> <span class="n">f</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="n">a</span> <span class="n">n</span> <span class="bp">+</span> <span class="n">b</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="bp">+</span> <span class="n">t</span><span class="o">))</span>
<span class="o">(</span><span class="n">sum_smul</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">a</span> <span class="n">s</span><span class="o">},</span> <span class="n">f</span> <span class="n">a</span> <span class="n">s</span> <span class="bp">→</span> <span class="bp">∀</span> <span class="n">c</span><span class="o">,</span> <span class="n">f</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="n">c</span> <span class="bp">*</span> <span class="n">a</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="n">c</span> <span class="bp">*</span> <span class="n">s</span><span class="o">))</span>
<span class="o">(</span><span class="n">sum_shift</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">a</span> <span class="n">s</span><span class="o">},</span> <span class="n">f</span> <span class="n">a</span> <span class="n">s</span> <span class="bp">→</span> <span class="n">f</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="n">a</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span> <span class="o">(</span><span class="n">s</span> <span class="bp">-</span> <span class="n">a</span> <span class="mi">0</span><span class="o">))</span>

<span class="n">def</span> <span class="n">has_sum</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">∀</span> <span class="n">f</span><span class="o">,</span> <span class="n">is_sum</span> <span class="n">f</span> <span class="bp">→</span> <span class="bp">∀</span> <span class="n">t</span><span class="o">,</span> <span class="n">f</span> <span class="n">a</span> <span class="n">t</span> <span class="bp">→</span> <span class="n">t</span> <span class="bp">=</span> <span class="n">s</span>

<span class="kn">theorem</span> <span class="n">has_sum_const_iff</span> <span class="o">(</span><span class="n">c</span> <span class="n">s</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span> <span class="n">has_sum</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="n">c</span><span class="o">)</span> <span class="n">s</span> <span class="bp">↔</span> <span class="o">(</span><span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">→</span> <span class="n">s</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:=</span>
<span class="bp">⟨λ</span> <span class="n">hcs</span> <span class="n">hc</span><span class="o">,</span> <span class="n">eq</span><span class="bp">.</span><span class="n">symm</span> <span class="err">$</span> <span class="n">hcs</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">a</span> <span class="n">s</span><span class="o">,</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">n</span><span class="o">,</span> <span class="n">a</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span> <span class="bp">∧</span> <span class="n">s</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span>
    <span class="bp">⟨λ</span> <span class="n">a</span> <span class="n">s</span> <span class="n">t</span> <span class="n">hs</span> <span class="n">ht</span><span class="o">,</span> <span class="n">hs</span><span class="bp">.</span><span class="mi">2</span><span class="bp">.</span><span class="n">trans</span> <span class="n">ht</span><span class="bp">.</span><span class="mi">2</span><span class="bp">.</span><span class="n">symm</span><span class="o">,</span>
    <span class="bp">λ</span> <span class="n">a</span> <span class="n">b</span> <span class="n">s</span> <span class="n">t</span> <span class="n">hs</span> <span class="n">ht</span><span class="o">,</span> <span class="bp">⟨λ</span> <span class="n">n</span><span class="o">,</span> <span class="k">by</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">hs</span><span class="bp">.</span><span class="mi">1</span> <span class="n">n</span><span class="o">,</span> <span class="n">ht</span><span class="bp">.</span><span class="mi">1</span> <span class="n">n</span><span class="o">,</span> <span class="n">add_zero</span><span class="o">],</span> <span class="k">by</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">hs</span><span class="bp">.</span><span class="mi">2</span><span class="o">,</span> <span class="n">ht</span><span class="bp">.</span><span class="mi">2</span><span class="o">,</span> <span class="n">add_zero</span><span class="o">]</span><span class="bp">⟩</span><span class="o">,</span>
    <span class="bp">λ</span> <span class="n">a</span> <span class="n">s</span> <span class="n">hs</span> <span class="n">c</span><span class="o">,</span> <span class="bp">⟨λ</span> <span class="n">n</span><span class="o">,</span> <span class="k">by</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">hs</span><span class="bp">.</span><span class="mi">1</span> <span class="n">n</span><span class="o">,</span> <span class="n">mul_zero</span><span class="o">],</span> <span class="k">by</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">hs</span><span class="bp">.</span><span class="mi">2</span><span class="o">,</span> <span class="n">mul_zero</span><span class="o">]</span><span class="bp">⟩</span><span class="o">,</span>
    <span class="bp">λ</span> <span class="n">a</span> <span class="n">s</span> <span class="n">hs</span><span class="o">,</span> <span class="bp">⟨λ</span> <span class="n">n</span><span class="o">,</span> <span class="n">hs</span><span class="bp">.</span><span class="mi">1</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">),</span> <span class="k">by</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">hs</span><span class="bp">.</span><span class="mi">2</span><span class="o">,</span> <span class="n">hs</span><span class="bp">.</span><span class="mi">1</span> <span class="mi">0</span><span class="o">,</span> <span class="n">sub_zero</span><span class="o">]</span><span class="bp">⟩⟩</span>
  <span class="mi">0</span>
  <span class="bp">⟨λ</span> <span class="n">n</span><span class="o">,</span> <span class="n">hc</span><span class="o">,</span> <span class="n">rfl</span><span class="bp">⟩</span><span class="o">,</span>
<span class="bp">λ</span> <span class="n">hcs</span> <span class="n">f</span> <span class="n">hf</span> <span class="n">t</span> <span class="n">hft</span><span class="o">,</span>
<span class="k">have</span> <span class="n">htc</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">=</span> <span class="n">t</span> <span class="bp">-</span> <span class="n">c</span> <span class="o">:=</span> <span class="n">hf</span><span class="bp">.</span><span class="mi">1</span> <span class="n">hft</span> <span class="o">(</span><span class="n">hf</span><span class="bp">.</span><span class="mi">4</span> <span class="n">hft</span><span class="o">),</span>
<span class="k">have</span> <span class="n">hc0</span> <span class="o">:</span> <span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span> <span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="err">←</span> <span class="n">sub_sub_cancel</span> <span class="n">t</span> <span class="n">c</span><span class="o">,</span> <span class="err">←</span> <span class="n">htc</span><span class="o">,</span> <span class="n">sub_self</span><span class="o">],</span>
<span class="k">have</span> <span class="n">ht0</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span> <span class="k">from</span> <span class="n">hf</span><span class="bp">.</span><span class="mi">1</span> <span class="n">hft</span> <span class="err">$</span> <span class="k">by</span> <span class="n">convert</span> <span class="n">hf</span><span class="bp">.</span><span class="mi">3</span> <span class="n">hft</span> <span class="mi">0</span><span class="bp">;</span> <span class="n">simp</span> <span class="o">[</span><span class="n">hc0</span><span class="o">],</span>
<span class="n">ht0</span><span class="bp">.</span><span class="n">trans</span> <span class="o">(</span><span class="n">hcs</span> <span class="n">hc0</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span><span class="bp">⟩</span>
</pre></div>



<a name="178680224"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178680224" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178680224">(Oct 21 2019 at 17:53)</a>:</h4>
<p>boom it works</p>



<a name="178680244"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178680244" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178680244">(Oct 21 2019 at 17:53)</a>:</h4>
<p><span class="user-mention" data-user-id="130500">@Abhimanyu Pallavi Sudhir</span> there you go</p>



<a name="178680797"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178680797" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Abhimanyu Pallavi Sudhir <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178680797">(Oct 21 2019 at 17:58)</a>:</h4>
<p>Nice, thanks!</p>



<a name="178680865"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178680865" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178680865">(Oct 21 2019 at 17:59)</a>:</h4>
<p>I have another test:</p>



<a name="178680965"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178680965" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178680965">(Oct 21 2019 at 18:00)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">theorem</span> <span class="n">has_sum_test</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="bp">∃!</span> <span class="n">s</span><span class="o">,</span> <span class="n">has_sum</span> <span class="n">a</span> <span class="n">s</span><span class="o">)</span> <span class="bp">∨</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">s</span><span class="o">,</span> <span class="n">has_sum</span> <span class="n">a</span> <span class="n">s</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">sorry</span>
</pre></div>



<a name="178681471"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178681471" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178681471">(Oct 21 2019 at 18:05)</a>:</h4>
<p>I don't think I can prove it. Does anyone have a counterexample?</p>



<a name="178689372"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178689372" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Abhimanyu Pallavi Sudhir <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178689372">(Oct 21 2019 at 19:33)</a>:</h4>
<p>I can prove that.</p>
<div class="codehilite"><pre><span></span><span class="kn">theorem</span> <span class="n">sum_of_has_sum</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="n">has_sum</span> <span class="n">a</span> <span class="n">s</span><span class="o">)</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="o">(</span><span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">→</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span>
  <span class="o">(</span><span class="n">HS</span> <span class="o">:</span> <span class="n">is_sum</span> <span class="n">S</span><span class="o">)</span> <span class="o">(</span><span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">Ht</span> <span class="o">:</span> <span class="n">S</span> <span class="n">a</span> <span class="n">t</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">S</span> <span class="n">a</span> <span class="n">s</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">rwa</span> <span class="o">(</span><span class="n">H</span> <span class="n">S</span> <span class="n">HS</span> <span class="n">t</span> <span class="n">Ht</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span>

<span class="kn">theorem</span> <span class="n">has_sum_test&#39;</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">hst</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">≠</span> <span class="n">t</span><span class="o">)</span> <span class="o">:</span> <span class="n">has_sum</span> <span class="n">a</span> <span class="n">s</span> <span class="bp">→</span> <span class="n">has_sum</span> <span class="n">a</span> <span class="n">t</span> <span class="bp">→</span> <span class="bp">∀</span> <span class="n">s</span><span class="o">,</span> <span class="n">has_sum</span> <span class="n">a</span> <span class="n">s</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="n">hs</span> <span class="n">ht</span> <span class="n">u</span> <span class="n">S</span> <span class="n">HS</span> <span class="n">v</span> <span class="n">Hv</span><span class="o">,</span> <span class="n">false</span><span class="bp">.</span><span class="n">elim</span> <span class="o">(</span><span class="n">hst</span> <span class="o">(</span><span class="n">ht</span> <span class="n">S</span> <span class="n">HS</span> <span class="n">s</span> <span class="o">(</span><span class="n">sum_of_has_sum</span> <span class="n">a</span> <span class="n">s</span> <span class="n">hs</span> <span class="n">S</span> <span class="n">HS</span> <span class="n">v</span> <span class="n">Hv</span><span class="o">)))</span>
</pre></div>



<a name="178689417"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178689417" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178689417">(Oct 21 2019 at 19:33)</a>:</h4>
<p>good job, but you're still missing the existence</p>



<a name="178689482"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178689482" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Abhimanyu Pallavi Sudhir <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178689482">(Oct 21 2019 at 19:34)</a>:</h4>
<p>That part is just obvious, isn't it?</p>



<a name="178689497"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178689497" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178689497">(Oct 21 2019 at 19:34)</a>:</h4>
<p>why is it obvious?</p>



<a name="178689534"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178689534" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178689534">(Oct 21 2019 at 19:35)</a>:</h4>
<p>if the sequence is (1,0,0,0,...) then the only possible s is 1</p>



<a name="178689755"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178689755" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178689755">(Oct 21 2019 at 19:37)</a>:</h4>
<p>and it would take me too long to prove it (I would have to construct the summation operator on finitely supported sequences)</p>



<a name="178689902"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178689902" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Abhimanyu Pallavi Sudhir <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178689902">(Oct 21 2019 at 19:39)</a>:</h4>
<p>I'm not sure what you're saying. We just need to prove that every sequence <code>a</code> has a real number <code>s</code> such that <code>has_sum a s</code>, right?</p>



<a name="178690018"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178690018" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178690018">(Oct 21 2019 at 19:40)</a>:</h4>
<p>yes</p>



<a name="178690020"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178690020" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Abhimanyu Pallavi Sudhir <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178690020">(Oct 21 2019 at 19:40)</a>:</h4>
<p>Well, if there wasn't,  every real number would satisfy it from the definition of <code>has_sum</code>.</p>



<a name="178690034"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178690034" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Abhimanyu Pallavi Sudhir <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178690034">(Oct 21 2019 at 19:40)</a>:</h4>
<p>Maybe I'm confused. Let me try proving it.</p>



<a name="178691204"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178691204" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Abhimanyu Pallavi Sudhir <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178691204">(Oct 21 2019 at 19:51)</a>:</h4>
<p>Ok, yeah, it isn't obvious.</p>
<p>So a counter-example would be a sequence that allows multiple values of the sum without contradicting the axioms -- so then <em>nothing</em> could be its <code>has_sum</code>. </p>
<p>Isn't that undecidable by Godel?</p>



<a name="178701731"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178701731" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178701731">(Oct 21 2019 at 21:44)</a>:</h4>
<p>one cannot just apply Godel to every situation</p>



<a name="178713660"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178713660" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178713660">(Oct 22 2019 at 00:52)</a>:</h4>
<p>If one applies Godel to every situation, there will be situations where Godel will know something to be true but be unable to prove it (assuming Godel knows enough basic number theory)</p>



<a name="178713749"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178713749" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178713749">(Oct 22 2019 at 00:54)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> what do you think about this <code>has_sum</code> ordeal? my algebraic knowledge is not enough to classify all subspaces of R^N closed under the shift operator</p>



<a name="178713943"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178713943" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178713943">(Oct 22 2019 at 00:58)</a>:</h4>
<p>I thought that most summation methods were not shift-invariant anyways</p>



<a name="178714318"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178714318" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178714318">(Oct 22 2019 at 01:06)</a>:</h4>
<p>at the very least, one of these things should come bundled with a summability predicate. All divergent series methods have one</p>



<a name="178714431"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178714431" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178714431">(Oct 22 2019 at 01:09)</a>:</h4>
<p>You could define a "summation method" a la <a href="https://en.wikipedia.org/wiki/Divergent_series#Properties_of_summation_methods" target="_blank" title="https://en.wikipedia.org/wiki/Divergent_series#Properties_of_summation_methods">https://en.wikipedia.org/wiki/Divergent_series#Properties_of_summation_methods</a></p>



<a name="178740645"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178740645" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Abhimanyu Pallavi Sudhir <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178740645">(Oct 22 2019 at 10:10)</a>:</h4>
<p>I think <code>1/(n+1)</code> does not <code>has_sum</code>.</p>



<a name="178740698"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178740698" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Abhimanyu Pallavi Sudhir <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178740698">(Oct 22 2019 at 10:11)</a>:</h4>
<p>Because I cannot disprove that the "sum" of <code>1/(n+1)</code> equals any given real number.</p>



<a name="178740730"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178740730" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Abhimanyu Pallavi Sudhir <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178740730">(Oct 22 2019 at 10:11)</a>:</h4>
<p>But proving that no such disproof exists means proving the consistency of a system, right?</p>



<a name="178740817"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178740817" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Abhimanyu Pallavi Sudhir <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178740817">(Oct 22 2019 at 10:12)</a>:</h4>
<p>Specifically: the system consisting of the axioms and "sum of <code>1/n</code>equals<code>r</code>".</p>



<a name="178773183"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178773183" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jeremy Avigad <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178773183">(Oct 22 2019 at 16:42)</a>:</h4>
<p>I have just arrived late at this party. But it sounds like the theory of Banach limits is also relevant (<a href="https://en.wikipedia.org/wiki/Banach_limit" target="_blank" title="https://en.wikipedia.org/wiki/Banach_limit">https://en.wikipedia.org/wiki/Banach_limit</a>).</p>



<a name="178884724"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178884724" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Abhimanyu Pallavi Sudhir <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178884724">(Oct 23 2019 at 18:59)</a>:</h4>
<blockquote>
<p>Because I cannot disprove that the "sum" of <code>1/(n+1)</code> equals any given real number.</p>
</blockquote>
<p>I see -- I <em>can</em> prove that the sum of <code>λn, 1/(n+1)</code> can equal any given real number -- I just need to construct a sum operator on the smallest shift-invariant linear space of sequences containing the sequence <code>λn, 1/(n+1)</code></p>
<p>Picking a basis a 1, a 2,... where <code>a m := λ n, 1 / (m + n)</code>, it follows from basic linear algebra that defining the operator on this basis <code>S (a m) = x - (1 + 1/2 + ... + 1/(m-1))</code> defines a sum operator for some <code>x</code>. The key fact is that the <code>a i</code> actually forms a basis, which is straightforward in math, but painful in Lean.</p>



<a name="178884862"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178884862" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Abhimanyu Pallavi Sudhir <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178884862">(Oct 23 2019 at 19:00)</a>:</h4>
<p>So existence is false.</p>



<a name="178884993"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178884993" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178884993">(Oct 23 2019 at 19:02)</a>:</h4>
<p>why is <code>a i</code> linearly independent?</p>



<a name="178887365"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178887365" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Abhimanyu Pallavi Sudhir <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178887365">(Oct 23 2019 at 19:30)</a>:</h4>
<p>Isn't it?</p>



<a name="178887582"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178887582" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Abhimanyu Pallavi Sudhir <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178887582">(Oct 23 2019 at 19:33)</a>:</h4>
<p>If it isn't, there is some minimum <code>m</code> such that the <code>a i</code> up to that <code>m</code> are linearly dependent.</p>



<a name="178887733"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178887733" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Abhimanyu Pallavi Sudhir <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178887733">(Oct 23 2019 at 19:35)</a>:</h4>
<p>Which would produce an infinite system of linear equations:</p>
<div class="codehilite"><pre><span></span>    c1 + 1/2 c2 + ... + 1/m     cm = 0
1/2 c1 + 1/3 c2 + ... + 1/(m+1) cm = 0
1/3 c1 + 1/4 c2 + ... + 1/(m+2) cm = 0
...
</pre></div>



<a name="178887866"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178887866" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Abhimanyu Pallavi Sudhir <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178887866">(Oct 23 2019 at 19:36)</a>:</h4>
<p>In particular, </p>
<div class="codehilite"><pre><span></span>        c1 + 1/2     c2 + ... + 1/m     cm = 0
1/2     c1 + 1/3     c2 + ... + 1/(m+1) cm = 0
1/3     c1 + 1/4     c2 + ... + 1/(m+2) cm = 0
                          ...
1/(m+1) c1 + 1/(m+2) c2 + ... + 1/(2m)  cm = 0
</pre></div>



<a name="178888044"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178888044" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178888044">(Oct 23 2019 at 19:38)</a>:</h4>
<p>It is linearly independent, but I'm curious to see what proof you have in mind</p>



<a name="178888066"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178888066" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Abhimanyu Pallavi Sudhir <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178888066">(Oct 23 2019 at 19:38)</a>:</h4>
<p>I don't. I'm just thinking.</p>



<a name="178888099"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178888099" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Abhimanyu Pallavi Sudhir <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178888099">(Oct 23 2019 at 19:39)</a>:</h4>
<p>So perhaps one could work out the determinant of that system in general.</p>



<a name="178888253"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178888253" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Abhimanyu Pallavi Sudhir <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178888253">(Oct 23 2019 at 19:40)</a>:</h4>
<p>And if it's non-zero, we're done.</p>



<a name="178888342"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178888342" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Abhimanyu Pallavi Sudhir <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178888342">(Oct 23 2019 at 19:41)</a>:</h4>
<blockquote>
<p>It is linearly independent, but I'm curious to see what proof you have in mind</p>
</blockquote>
<p>What's the proof?</p>



<a name="178888345"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178888345" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178888345">(Oct 23 2019 at 19:41)</a>:</h4>
<p>If it was linearly dependent, then the sequence <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>a</mi><mi>n</mi></msub><mo>=</mo><mn>1</mn><mi mathvariant="normal">/</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">a_n = 1/n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord">/</span><span class="mord mathdefault">n</span></span></span></span> would be defined by a linear recurrence of some fixed length and then the associated generating function <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mo>∑</mo><mrow><mi>n</mi><mo>≥</mo><mn>1</mn></mrow></msub><msup><mi>x</mi><mi>n</mi></msup><mi mathvariant="normal">/</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">A(x) = \sum_{n \ge 1} x^n/n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">A</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.144889em;vertical-align:-0.39488900000000005em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139799999999992em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mrel mtight">≥</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.39488900000000005em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span><span class="mord">/</span><span class="mord mathdefault">n</span></span></span></span> would be a rational function. But it's not, it's <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>−</mo><mi>log</mi><mo>⁡</mo><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">-\log (1-x)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">−</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span>.</p>



<a name="178888522"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178888522" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Abhimanyu Pallavi Sudhir <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178888522">(Oct 23 2019 at 19:43)</a>:</h4>
<p>Ah, that's really neat.</p>



<a name="178889019"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178889019" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178889019">(Oct 23 2019 at 19:48)</a>:</h4>
<p>nice</p>



<a name="178889089"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178889089" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178889089">(Oct 23 2019 at 19:48)</a>:</h4>
<p>I'm pretty sure the determinant you were writing down is also known, but the name escapes me at the moment</p>



<a name="178889199"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178889199" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Koundinya Vajjha <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178889199">(Oct 23 2019 at 19:50)</a>:</h4>
<p>The hilbert matrix?</p>



<a name="178889266"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178889266" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Abhimanyu Pallavi Sudhir <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178889266">(Oct 23 2019 at 19:50)</a>:</h4>
<p>Yes!</p>



<a name="178889271"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178889271" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Koundinya Vajjha <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178889271">(Oct 23 2019 at 19:50)</a>:</h4>
<p><a href="https://en.wikipedia.org/wiki/Hilbert_matrix" target="_blank" title="https://en.wikipedia.org/wiki/Hilbert_matrix">https://en.wikipedia.org/wiki/Hilbert_matrix</a></p>



<a name="178889336"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178889336" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178889336">(Oct 23 2019 at 19:50)</a>:</h4>
<p>you guys are amazing</p>



<a name="178889499"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178889499" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Abhimanyu Pallavi Sudhir <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178889499">(Oct 23 2019 at 19:52)</a>:</h4>
<p>I think we saw the Hilbert matrix in M1GLA <span class="user-mention" data-user-id="110064">@Kenny Lau</span> -- at least if Richard Thomas taught the module for you too. We didn't calculate its determinant I think, but we did observe its invertibility.</p>



<a name="178889550"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178889550" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178889550">(Oct 23 2019 at 19:52)</a>:</h4>
<p>even if I saw it there's no way I would remember the name</p>



<a name="178889575"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178889575" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Koundinya Vajjha <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178889575">(Oct 23 2019 at 19:52)</a>:</h4>
<blockquote>
<p>If it was linearly dependent, then the sequence <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>a</mi><mi>n</mi></msub><mo>=</mo><mn>1</mn><mi mathvariant="normal">/</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">a_n = 1/n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord">/</span><span class="mord mathdefault">n</span></span></span></span> would be defined by a linear recurrence of some fixed length and then the associated generating function <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mo>∑</mo><mrow><mi>n</mi><mo>≥</mo><mn>1</mn></mrow></msub><msup><mi>x</mi><mi>n</mi></msup><mi mathvariant="normal">/</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">A(x) = \sum_{n \ge 1} x^n/n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">A</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.144889em;vertical-align:-0.39488900000000005em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139799999999992em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mrel mtight">≥</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.39488900000000005em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span><span class="mord">/</span><span class="mord mathdefault">n</span></span></span></span> would be a rational function. But it's not, it's <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>−</mo><mi>log</mi><mo>⁡</mo><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">-\log (1-x)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">−</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span>.</p>
</blockquote>
<p>This is a pretty cool proof.</p>



<a name="178890567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178890567" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Abhimanyu Pallavi Sudhir <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178890567">(Oct 23 2019 at 20:01)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> Would this make a good PLUS! problem?</p>



<a name="178895438"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Axiomatised%20summations/near/178895438" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Axiomatised.20summations.html#178895438">(Oct 23 2019 at 20:48)</a>:</h4>
<p>It might be massageable into a good PLUS problem</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>