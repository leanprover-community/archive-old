---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/.60rintro.60.20puzzle.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.60rintro.60.20puzzle.html">`rintro` puzzle</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="198974314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%60rintro%60%20puzzle/near/198974314" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.60rintro.60.20puzzle.html#198974314">(May 28 2020 at 01:31)</a>:</h4>
<p>I don't understand the behaviour of <code>rintro</code> here, and apparently <code>rintro?</code> doesn't either:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">complex</span><span class="bp">.</span><span class="n">basic</span>

<span class="kn">example</span> <span class="o">{</span><span class="n">z</span> <span class="n">w</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">}</span> <span class="o">:</span> <span class="o">(</span><span class="n">z</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">=</span> <span class="n">w</span> <span class="bp">→</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">w</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">rintro</span> <span class="bp">⟨⟨⟩</span><span class="o">,</span><span class="bp">⟨⟩</span><span class="o">,</span> <span class="n">H1</span><span class="o">,</span> <span class="n">H2</span><span class="o">,</span> <span class="n">H3</span><span class="o">,</span> <span class="bp">⟨⟩⟩</span><span class="o">,</span> <span class="c1">-- ?? I can put as many as I like</span>
  <span class="c">/-</span><span class="cm"></span>
<span class="cm">  1 goal</span>
<span class="cm">  z : ℝ,</span>
<span class="cm">  a : ↑z = ↑z -- where did a come from??</span>
<span class="cm">  ⊢ z = z</span>
<span class="cm">  -/</span>
  <span class="n">refl</span>
<span class="kn">end</span>

<span class="kn">example</span> <span class="o">{</span><span class="n">z</span> <span class="n">w</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">}</span> <span class="o">:</span> <span class="o">(</span><span class="n">z</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">=</span> <span class="n">w</span> <span class="bp">→</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">w</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">rintro</span><span class="err">?</span><span class="o">,</span> <span class="c1">-- Try this: rintro rfl</span>
  <span class="n">sorry</span>
<span class="kn">end</span>

<span class="kn">example</span> <span class="o">{</span><span class="n">z</span> <span class="n">w</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">}</span> <span class="o">:</span> <span class="o">(</span><span class="n">z</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">=</span> <span class="n">w</span> <span class="bp">→</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">w</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">rintro</span> <span class="n">rfl</span><span class="o">,</span> <span class="c1">-- subst tactic failed</span>
<span class="kn">end</span>
</code></pre></div>



<a name="198974432"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%60rintro%60%20puzzle/near/198974432" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.60rintro.60.20puzzle.html#198974432">(May 28 2020 at 01:33)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">example</span> <span class="o">{</span><span class="n">z</span> <span class="n">w</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">}</span> <span class="o">:</span> <span class="o">(</span><span class="n">z</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">)</span> <span class="bp">=</span> <span class="n">w</span> <span class="bp">→</span> <span class="n">z</span> <span class="bp">=</span> <span class="n">w</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">rintro</span> <span class="bp">⟨⟩</span><span class="o">,</span>
  <span class="n">refl</span> <span class="c1">-- a again</span>
<span class="kn">end</span>
</code></pre></div>



<a name="198975552"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%60rintro%60%20puzzle/near/198975552" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.60rintro.60.20puzzle.html#198975552">(May 28 2020 at 01:54)</a>:</h4>
<p>rcases will ignore any arguments to an inductive type past the number the constructor is expecting</p>



<a name="198975592"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%60rintro%60%20puzzle/near/198975592" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.60rintro.60.20puzzle.html#198975592">(May 28 2020 at 01:54)</a>:</h4>
<p>In this case the inductive type is <code>eq</code> and so anything beyond <code>⟨⟩</code> is ignored</p>



<a name="198975617"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%60rintro%60%20puzzle/near/198975617" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.60rintro.60.20puzzle.html#198975617">(May 28 2020 at 01:55)</a>:</h4>
<p>i.e. <code>⟨a⟩</code> or <code>⟨a,a⟩</code> or <code>⟨a|⟨a|_⟩,b⟩</code> are all the same</p>



<a name="198975775"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%60rintro%60%20puzzle/near/198975775" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.60rintro.60.20puzzle.html#198975775">(May 28 2020 at 01:58)</a>:</h4>
<p>As for the <code>a</code>, that's the default name of the variable in the implication (see: <code>a</code> bug) so <code>rintro</code> first does <code>intro a</code> and then <code>cases a</code>. However <code>cases</code> doesn't always clean up after itself and the equality <code>a</code>, now trivial, still hangs around. You can mostly ignore it since it had the intended effect - the goal is now <code>z = z</code></p>



<a name="198975826"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%60rintro%60%20puzzle/near/198975826" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.60rintro.60.20puzzle.html#198975826">(May 28 2020 at 01:59)</a>:</h4>
<p><code>subst</code> fails here because the equality is not of the form variable = term or term = variable</p>



<a name="198989311"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%60rintro%60%20puzzle/near/198989311" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.60rintro.60.20puzzle.html#198989311">(May 28 2020 at 07:08)</a>:</h4>
<p>The issue with <code>subst</code> is that it's what <code>rintro?</code> is telling me to do. I wouldn't expect these suggestions to fall when using eg <code>squeeze_simp</code> or <code>library_search</code></p>



<a name="198989441"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%60rintro%60%20puzzle/near/198989441" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.60rintro.60.20puzzle.html#198989441">(May 28 2020 at 07:11)</a>:</h4>
<p>I agree that <code>rintro?</code> should preferably suggest a <code>Try this: xyzzy</code> that doesn't give an error when you actually try it.</p>



<a name="198990481"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%60rintro%60%20puzzle/near/198990481" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.60rintro.60.20puzzle.html#198990481">(May 28 2020 at 07:27)</a>:</h4>
<p>I ran into something similar (where <code>rcases?</code> gave suggestions that didn't work) in <a href="https://github.com/leanprover-community/mathlib/issues/2794">#2794</a>.</p>



<a name="198991795"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%60rintro%60%20puzzle/near/198991795" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.60rintro.60.20puzzle.html#198991795">(May 28 2020 at 07:46)</a>:</h4>
<p>It might not always be possible. Would failing instead of providing an incorrect <code>Try this:</code> be acceptable in this situation?</p>



<a name="198991925"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%60rintro%60%20puzzle/near/198991925" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.60rintro.60.20puzzle.html#198991925">(May 28 2020 at 07:48)</a>:</h4>
<p>Could it be made more conservative? So that it backtracks and suggests a less deeply deconstructing pattern?</p>



<a name="198991992"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%60rintro%60%20puzzle/near/198991992" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.60rintro.60.20puzzle.html#198991992">(May 28 2020 at 07:49)</a>:</h4>
<p>that should work, although it won't work in <code>rcases</code> since it always does at least one case split</p>



<a name="198992014"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%60rintro%60%20puzzle/near/198992014" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.60rintro.60.20puzzle.html#198992014">(May 28 2020 at 07:49)</a>:</h4>
<p>there are also some case splits that are not representable by an rcases pattern</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>