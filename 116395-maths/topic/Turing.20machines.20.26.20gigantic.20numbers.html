---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/Turing.20machines.20.26.20gigantic.20numbers.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Turing.20machines.20.26.20gigantic.20numbers.html">Turing machines & gigantic numbers</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="261583879"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Turing%20machines%20%26%20gigantic%20numbers/near/261583879" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> DayDun <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Turing.20machines.20.26.20gigantic.20numbers.html#261583879">(Nov 16 2021 at 00:53)</a>:</h4>
<p>Hello <span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span>, I'm working on some personal proofs for busy beavers. I'm fairly new to lean so I'm asking for a bit of advice on how to best represent this in lean.</p>
<p>As a simplified rundown, the busy beaver game asks, given all halting turing machines with precisely <code>n</code> states, what is the largest number of ones we can print on the tape, or alternatively the maximum number of steps possibly taken before halting.</p>
<p>There doesn't appear to exist a classic turing machine in mathlib, only a slightly more general one under <code>computability.turing_machine.turing.TM0</code> which is a bit inconvenient to use for the proofs I'm constructing. Should I just implement my own type from scratch instead?</p>
<p>And since I'm going to be dealing with discrete instances of turing machines most of the time, should I stick to always representing symbols, states and possible turing machines as <code>finset</code>s? Using something like <code>finset.max'</code> on the set of possible turing machines to prove which machines maximizes certain properties.</p>
<p>Also these numbers grow incredibly large, reaching &gt; 10^36534, even &gt; 10^10^10^10^18705353 and beyond fairly quickly. So I suspect the default <code>nat</code> Peano numbers certainly won't suffice. What's the best way to deal with these kinds of numbers? Should I use <code>num</code> or some custom more compact representation of the numbers?</p>



<a name="261585594"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Turing%20machines%20%26%20gigantic%20numbers/near/261585594" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Turing.20machines.20.26.20gigantic.20numbers.html#261585594">(Nov 16 2021 at 01:14)</a>:</h4>
<p><code>nat</code> goes well past 10^10^10^10^18705353, so you should be fine. Just don't try to compute anything!</p>



<a name="261585623"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Turing%20machines%20%26%20gigantic%20numbers/near/261585623" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Turing.20machines.20.26.20gigantic.20numbers.html#261585623">(Nov 16 2021 at 01:15)</a>:</h4>
<ul>
<li>I would suggest you stick with using <code>TM0</code>, and specialize the types to meet your requirements. For the busy beaver problem, I think the usual idea is to take the alphabet to be <code>bool</code> and set of states to be <code>fin k</code>, and then the result of evaluation can be straightforwardly interpreted; the resulting constraint on <code>k</code> yields the busy beaver number.</li>
<li>Regarding the numbers growing quickly, this is not really a problem because <code>nat</code> is fundamentally an analysis tool. It doesn't really matter that the numbers get big unless you want to compute a particular busy beaver number, which is almost certainly impractical for n &gt; 3.</li>
</ul>



<a name="261585712"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Turing%20machines%20%26%20gigantic%20numbers/near/261585712" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Turing.20machines.20.26.20gigantic.20numbers.html#261585712">(Nov 16 2021 at 01:16)</a>:</h4>
<p>actually even n = 3 is a stretch, that's a lot of TM proofs. n = 2 can probably be done</p>



<a name="261585859"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Turing%20machines%20%26%20gigantic%20numbers/near/261585859" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Turing.20machines.20.26.20gigantic.20numbers.html#261585859">(Nov 16 2021 at 01:19)</a>:</h4>
<p>Could you be more specific about  "which is a bit inconvenient to use for the proofs I'm constructing"? It is designed to be used, after all, so I'm interested in what you need from it / what you would change</p>



<a name="261586946"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Turing%20machines%20%26%20gigantic%20numbers/near/261586946" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> DayDun <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Turing.20machines.20.26.20gigantic.20numbers.html#261586946">(Nov 16 2021 at 01:34)</a>:</h4>
<p>I of course don't plan on actually running a turing machine for 10^10^10^10^18705353 steps, but that doesn't mean we can't prove the value of these numbers. Clearly other people have been able to find machines that output numbers in these ranges, and prove the value or at least range of the number, I want to do the same, just in lean. Proving the value of n = 5, and maybe even 6, while it might require a significant amount of effort, should not be that unreasonable.</p>
<p>The reason <code>TM0</code> seems a bit inconvenient is that it is quite a bit more general than I need. I would have to add a bunch of constraints such that it only identically simulates classical turing machines, so it feels like I might as well spend that effort towards implementing my own simpler representation.</p>



<a name="261587109"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Turing%20machines%20%26%20gigantic%20numbers/near/261587109" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Turing.20machines.20.26.20gigantic.20numbers.html#261587109">(Nov 16 2021 at 01:38)</a>:</h4>
<p>You can write the number <code>10^10^10^10^18705353</code> in lean no problem. Especially if you are using some technique to not actually simulate the TM that long it's quite reasonable to work with it</p>



<a name="261587174"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Turing%20machines%20%26%20gigantic%20numbers/near/261587174" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Turing.20machines.20.26.20gigantic.20numbers.html#261587174">(Nov 16 2021 at 01:38)</a>:</h4>
<p>What constraints are you thinking of?</p>



<a name="261587569"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Turing%20machines%20%26%20gigantic%20numbers/near/261587569" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> DayDun <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Turing.20machines.20.26.20gigantic.20numbers.html#261587569">(Nov 16 2021 at 01:44)</a>:</h4>
<p>Well TM0 splits each state in two, allowing two different kinds of steps, one move and one write. I'd have to double the number of states, make sure the step function correctly alternates between moves and writes, and make sure when counting the number of steps taken to like divide by two or something.</p>



<a name="261587676"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Turing%20machines%20%26%20gigantic%20numbers/near/261587676" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Turing.20machines.20.26.20gigantic.20numbers.html#261587676">(Nov 16 2021 at 01:46)</a>:</h4>
<p>The model being used is pretty standard, the Post-Turing machine, where at each state you either do a move or a write (Turing's original formulation did both in one step, so this is a more restrictive model)</p>



<a name="261587787"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Turing%20machines%20%26%20gigantic%20numbers/near/261587787" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Turing.20machines.20.26.20gigantic.20numbers.html#261587787">(Nov 16 2021 at 01:48)</a>:</h4>
<p>Here's a simple definition of the busy beaver number for TM0:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">computability.turing_machine</span> <span class="n">tactic.derive_fintype</span>

<span class="n">open_locale</span> <span class="n">classical</span>
<span class="kn">namespace</span> <span class="n">turing</span>

<span class="kd">def</span> <span class="n">eval_with_steps</span> <span class="o">{</span><span class="n">σ</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">σ</span> <span class="bp">→</span> <span class="n">option</span> <span class="n">σ</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">σ</span><span class="o">)</span> <span class="o">:</span> <span class="n">part</span> <span class="o">(</span><span class="n">ℕ</span> <span class="bp">×</span> <span class="n">σ</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">eval</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">a</span><span class="o">,</span> <span class="o">(</span><span class="n">f</span> <span class="n">a.2</span><span class="o">)</span><span class="bp">.</span><span class="n">map</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">b</span><span class="o">,</span> <span class="o">(</span><span class="n">a.1</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">,</span> <span class="n">b</span><span class="o">)))</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">s</span><span class="o">)</span>

<span class="kn">namespace</span> <span class="n">TM0</span>
<span class="kd">variables</span> <span class="o">{</span><span class="bp">Γ</span> <span class="bp">Λ</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">inhabited</span> <span class="bp">Γ</span><span class="o">]</span> <span class="o">[</span><span class="n">inhabited</span> <span class="bp">Λ</span><span class="o">]</span>

<span class="kd">def</span> <span class="n">halting_time</span> <span class="o">(</span><span class="n">M</span> <span class="o">:</span> <span class="n">machine</span> <span class="bp">Γ</span> <span class="bp">Λ</span><span class="o">)</span> <span class="o">(</span><span class="n">l</span> <span class="o">:</span> <span class="n">list</span> <span class="bp">Γ</span><span class="o">)</span> <span class="o">:</span> <span class="n">part</span> <span class="n">ℕ</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">eval_with_steps</span> <span class="o">(</span><span class="n">step</span> <span class="n">M</span><span class="o">)</span> <span class="o">(</span><span class="n">init</span> <span class="n">l</span><span class="o">))</span><span class="bp">.</span><span class="n">map</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="n">n.1</span><span class="o">)</span>

<span class="kn">attribute</span> <span class="o">[</span><span class="n">derive</span> <span class="n">fintype</span><span class="o">]</span> <span class="n">turing.dir</span> <span class="n">stmt</span>
<span class="kd">noncomputable</span> <span class="kd">instance</span> <span class="n">machine.fintype</span> <span class="o">[</span><span class="n">fintype</span> <span class="bp">Γ</span><span class="o">]</span> <span class="o">[</span><span class="n">fintype</span> <span class="bp">Λ</span><span class="o">]</span> <span class="o">:</span>
  <span class="n">fintype</span> <span class="o">(</span><span class="n">machine</span> <span class="bp">Γ</span> <span class="bp">Λ</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">unfold</span> <span class="n">machine</span><span class="bp">;</span> <span class="n">apply_instance</span>

<span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">busy_beaver</span>
  <span class="o">(</span><span class="bp">Γ</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">inhabited</span> <span class="bp">Γ</span><span class="o">]</span> <span class="o">[</span><span class="n">fintype</span> <span class="bp">Γ</span><span class="o">]</span>
  <span class="o">(</span><span class="bp">Λ</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">inhabited</span> <span class="bp">Λ</span><span class="o">]</span> <span class="o">[</span><span class="n">fintype</span> <span class="bp">Λ</span><span class="o">]</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="o">:=</span>
<span class="n">finset.univ.sup</span> <span class="bp">$</span> <span class="bp">λ</span> <span class="n">M</span> <span class="o">:</span> <span class="n">machine</span> <span class="bp">Γ</span> <span class="bp">Λ</span><span class="o">,</span> <span class="o">(</span><span class="n">halting_time</span> <span class="n">M</span> <span class="o">[])</span><span class="bp">.</span><span class="n">to_option.get_or_else</span> <span class="mi">0</span>

<span class="kd">end</span> <span class="n">TM0</span>

<span class="c1">-- vvv  for once it actually says noncomputable for a good reason</span>
<span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">busy_beaver</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="o">:=</span>
<span class="k">if</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">0</span> <span class="k">then</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">TM0.busy_beaver</span> <span class="n">bool</span> <span class="o">(</span><span class="n">fin</span> <span class="o">(</span><span class="n">n</span><span class="bp">-</span><span class="mi">1</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span>

<span class="kd">end</span> <span class="n">turing</span>
</code></pre></div>



<a name="261587854"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Turing%20machines%20%26%20gigantic%20numbers/near/261587854" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> DayDun <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Turing.20machines.20.26.20gigantic.20numbers.html#261587854">(Nov 16 2021 at 01:49)</a>:</h4>
<p>has there been work on this already in lean?</p>



<a name="261587903"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Turing%20machines%20%26%20gigantic%20numbers/near/261587903" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Turing.20machines.20.26.20gigantic.20numbers.html#261587903">(Nov 16 2021 at 01:50)</a>:</h4>
<p>no, I just wrote this</p>



<a name="261587956"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Turing%20machines%20%26%20gigantic%20numbers/near/261587956" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Turing.20machines.20.26.20gigantic.20numbers.html#261587956">(Nov 16 2021 at 01:51)</a>:</h4>
<p>there isn't too much around TMs that has been PR'd to mathlib beyond what you can see in the <code>turing_machine.lean</code> file and a few other files in the directory</p>



<a name="261588341"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Turing%20machines%20%26%20gigantic%20numbers/near/261588341" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Turing.20machines.20.26.20gigantic.20numbers.html#261588341">(Nov 16 2021 at 01:57)</a>:</h4>
<p>And if you want a model that does both kinds of steps at once, it's a different computational model but not a particularly hard one to write:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">namespace</span> <span class="n">turing</span>
<span class="kn">namespace</span> <span class="n">TM0'</span>

<span class="kn">section</span>
<span class="kd">parameters</span> <span class="o">(</span><span class="bp">Γ</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">inhabited</span> <span class="bp">Γ</span><span class="o">]</span> <span class="c1">-- type of tape symbols</span>
<span class="kd">parameters</span> <span class="o">(</span><span class="bp">Λ</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">inhabited</span> <span class="bp">Λ</span><span class="o">]</span> <span class="c1">-- type of "labels" or TM states</span>

<span class="kd">def</span> <span class="n">stmt</span> <span class="o">:=</span> <span class="bp">Γ</span> <span class="bp">×</span> <span class="n">dir</span>

<span class="kd">instance</span> <span class="n">stmt.inhabited</span> <span class="o">:</span> <span class="n">inhabited</span> <span class="n">stmt</span> <span class="o">:=</span> <span class="o">⟨(</span><span class="n">default</span> <span class="n">_</span><span class="o">,</span> <span class="n">default</span> <span class="n">_</span><span class="o">)⟩</span>

<span class="kd">def</span> <span class="n">machine</span> <span class="o">:=</span> <span class="bp">Λ</span> <span class="bp">→</span> <span class="bp">Γ</span> <span class="bp">→</span> <span class="bp">Γ</span> <span class="bp">×</span> <span class="n">dir</span> <span class="bp">×</span> <span class="n">option</span> <span class="bp">Λ</span>

<span class="kd">instance</span> <span class="n">machine.inhabited</span> <span class="o">:</span> <span class="n">inhabited</span> <span class="n">machine</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">unfold</span> <span class="n">machine</span><span class="bp">;</span> <span class="n">apply_instance</span>

<span class="kd">structure</span> <span class="n">cfg</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">q</span> <span class="o">:</span> <span class="n">option</span> <span class="bp">Λ</span><span class="o">)</span>
<span class="o">(</span><span class="n">tape</span> <span class="o">:</span> <span class="n">tape</span> <span class="bp">Γ</span><span class="o">)</span>

<span class="kd">instance</span> <span class="n">cfg.inhabited</span> <span class="o">:</span> <span class="n">inhabited</span> <span class="n">cfg</span> <span class="o">:=</span> <span class="o">⟨⟨</span><span class="n">default</span> <span class="n">_</span><span class="o">,</span> <span class="n">default</span> <span class="n">_</span><span class="o">⟩⟩</span>

<span class="kd">parameters</span> <span class="o">{</span><span class="bp">Γ</span> <span class="bp">Λ</span><span class="o">}</span>
<span class="sd">/-- Execution semantics of the Turing machine. -/</span>
<span class="kd">def</span> <span class="n">step</span> <span class="o">(</span><span class="n">M</span> <span class="o">:</span> <span class="n">machine</span><span class="o">)</span> <span class="o">:</span> <span class="n">cfg</span> <span class="bp">→</span> <span class="n">option</span> <span class="n">cfg</span>
<span class="bp">|</span> <span class="o">⟨</span><span class="n">none</span><span class="o">,</span> <span class="n">T</span><span class="o">⟩</span> <span class="o">:=</span> <span class="n">none</span>
<span class="bp">|</span> <span class="o">⟨</span><span class="n">some</span> <span class="n">q</span><span class="o">,</span> <span class="n">T</span><span class="o">⟩</span> <span class="o">:=</span> <span class="k">let</span> <span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">d</span><span class="o">,</span> <span class="n">q'</span><span class="o">)</span> <span class="o">:=</span> <span class="n">M</span> <span class="n">q</span> <span class="n">T.1</span> <span class="k">in</span> <span class="n">some</span> <span class="o">⟨</span><span class="n">q'</span><span class="o">,</span> <span class="o">(</span><span class="n">T.write</span> <span class="n">a</span><span class="o">)</span><span class="bp">.</span><span class="n">move</span> <span class="n">d</span><span class="o">⟩</span>

<span class="kd">def</span> <span class="n">init</span> <span class="o">(</span><span class="n">l</span> <span class="o">:</span> <span class="n">list</span> <span class="bp">Γ</span><span class="o">)</span> <span class="o">:</span> <span class="n">cfg</span> <span class="o">:=</span>
<span class="o">⟨</span><span class="n">some</span> <span class="o">(</span><span class="n">default</span> <span class="bp">Λ</span><span class="o">),</span> <span class="n">tape.mk₁</span> <span class="n">l</span><span class="o">⟩</span>

<span class="kd">def</span> <span class="n">eval</span> <span class="o">(</span><span class="n">M</span> <span class="o">:</span> <span class="n">machine</span><span class="o">)</span> <span class="o">(</span><span class="n">l</span> <span class="o">:</span> <span class="n">list</span> <span class="bp">Γ</span><span class="o">)</span> <span class="o">:</span> <span class="n">part</span> <span class="o">(</span><span class="n">list_blank</span> <span class="bp">Γ</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">eval</span> <span class="o">(</span><span class="n">step</span> <span class="n">M</span><span class="o">)</span> <span class="o">(</span><span class="n">init</span> <span class="n">l</span><span class="o">))</span><span class="bp">.</span><span class="n">map</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">c</span><span class="o">,</span> <span class="n">c.tape.right₀</span><span class="o">)</span>

<span class="kd">end</span>

<span class="kd">end</span> <span class="n">TM0'</span>
<span class="kd">end</span> <span class="n">turing</span>
</code></pre></div>



<a name="261588445"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Turing%20machines%20%26%20gigantic%20numbers/near/261588445" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Turing.20machines.20.26.20gigantic.20numbers.html#261588445">(Nov 16 2021 at 01:59)</a>:</h4>
<p>I would suggest something like this if you are hoping to exactly replicate some busy beaver number from the textbook (because the exact numerical value of BB(n) depends on the precise model of computation, even though its broad behavior like growing faster than any computable function does not)</p>



<a name="261588946"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Turing%20machines%20%26%20gigantic%20numbers/near/261588946" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> DayDun <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Turing.20machines.20.26.20gigantic.20numbers.html#261588946">(Nov 16 2021 at 02:05)</a>:</h4>
<p>Alright, that looks like a pretty decent starting point. Thank you very much</p>



<a name="261589769"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Turing%20machines%20%26%20gigantic%20numbers/near/261589769" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Turing.20machines.20.26.20gigantic.20numbers.html#261589769">(Nov 16 2021 at 02:18)</a>:</h4>
<p>[Updated the post above to match the computational model defined at <a href="https://en.wikipedia.org/wiki/Busy_beaver">https://en.wikipedia.org/wiki/Busy_beaver</a> ]</p>



<a name="261590021"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Turing%20machines%20%26%20gigantic%20numbers/near/261590021" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> DayDun <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Turing.20machines.20.26.20gigantic.20numbers.html#261590021">(Nov 16 2021 at 02:23)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/116395-maths/topic/Turing.20machines.20.26.20gigantic.20numbers/near/261587787">said</a>:</p>
<blockquote>
<p>Here's a simple definition of the busy beaver number for TM0:</p>
<p><div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">computability.turing_machine</span> <span class="n">tactic.derive_fintype</span>

<span class="n">open_locale</span> <span class="n">classical</span>
<span class="kn">namespace</span> <span class="n">turing</span>

<span class="kd">def</span> <span class="n">eval_with_steps</span> <span class="o">{</span><span class="n">σ</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">σ</span> <span class="bp">→</span> <span class="n">option</span> <span class="n">σ</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">σ</span><span class="o">)</span> <span class="o">:</span> <span class="n">part</span> <span class="o">(</span><span class="n">ℕ</span> <span class="bp">×</span> <span class="n">σ</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">eval</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">a</span><span class="o">,</span> <span class="o">(</span><span class="n">f</span> <span class="n">a.2</span><span class="o">)</span><span class="bp">.</span><span class="n">map</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">b</span><span class="o">,</span> <span class="o">(</span><span class="n">a.1</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">,</span> <span class="n">b</span><span class="o">)))</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">s</span><span class="o">)</span>

<span class="kn">namespace</span> <span class="n">TM0</span>
<span class="kd">variables</span> <span class="o">{</span><span class="bp">Γ</span> <span class="bp">Λ</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">inhabited</span> <span class="bp">Γ</span><span class="o">]</span> <span class="o">[</span><span class="n">inhabited</span> <span class="bp">Λ</span><span class="o">]</span>

<span class="kd">def</span> <span class="n">halting_time</span> <span class="o">(</span><span class="n">M</span> <span class="o">:</span> <span class="n">machine</span> <span class="bp">Γ</span> <span class="bp">Λ</span><span class="o">)</span> <span class="o">(</span><span class="n">l</span> <span class="o">:</span> <span class="n">list</span> <span class="bp">Γ</span><span class="o">)</span> <span class="o">:</span> <span class="n">part</span> <span class="n">ℕ</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">eval_with_steps</span> <span class="o">(</span><span class="n">step</span> <span class="n">M</span><span class="o">)</span> <span class="o">(</span><span class="n">init</span> <span class="n">l</span><span class="o">))</span><span class="bp">.</span><span class="n">map</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="n">n.1</span><span class="o">)</span>

<span class="kn">attribute</span> <span class="o">[</span><span class="n">derive</span> <span class="n">fintype</span><span class="o">]</span> <span class="n">turing.dir</span> <span class="n">stmt</span>
<span class="kd">noncomputable</span> <span class="kd">instance</span> <span class="n">machine.fintype</span> <span class="o">[</span><span class="n">fintype</span> <span class="bp">Γ</span><span class="o">]</span> <span class="o">[</span><span class="n">fintype</span> <span class="bp">Λ</span><span class="o">]</span> <span class="o">:</span>
  <span class="n">fintype</span> <span class="o">(</span><span class="n">machine</span> <span class="bp">Γ</span> <span class="bp">Λ</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">unfold</span> <span class="n">machine</span><span class="bp">;</span> <span class="n">apply_instance</span>

<span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">busy_beaver</span>
  <span class="o">(</span><span class="bp">Γ</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">inhabited</span> <span class="bp">Γ</span><span class="o">]</span> <span class="o">[</span><span class="n">fintype</span> <span class="bp">Γ</span><span class="o">]</span>
  <span class="o">(</span><span class="bp">Λ</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">inhabited</span> <span class="bp">Λ</span><span class="o">]</span> <span class="o">[</span><span class="n">fintype</span> <span class="bp">Λ</span><span class="o">]</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="o">:=</span>
<span class="n">finset.univ.sup</span> <span class="bp">$</span> <span class="bp">λ</span> <span class="n">M</span> <span class="o">:</span> <span class="n">machine</span> <span class="bp">Γ</span> <span class="bp">Λ</span><span class="o">,</span> <span class="o">(</span><span class="n">halting_time</span> <span class="n">M</span> <span class="o">[])</span><span class="bp">.</span><span class="n">to_option.get_or_else</span> <span class="mi">0</span>

<span class="kd">end</span> <span class="n">TM0</span>

<span class="c1">-- vvv  for once it actually says noncomputable for a good reason</span>
<span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">busy_beaver</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="o">:=</span>
<span class="k">if</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">0</span> <span class="k">then</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">TM0.busy_beaver</span> <span class="n">bool</span> <span class="o">(</span><span class="n">fin</span> <span class="o">(</span><span class="n">n</span><span class="bp">-</span><span class="mi">1</span><span class="bp">+</span><span class="mi">1</span><span class="o">))</span>

<span class="kd">end</span> <span class="n">turing</span>
</code></pre></div><br>
</p>
</blockquote>
<p>is the symbols and states mixed up here? <code>machine</code> type is <code>Λ → Γ → option (Λ × stmt)</code></p>



<a name="261590149"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Turing%20machines%20%26%20gigantic%20numbers/near/261590149" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Turing.20machines.20.26.20gigantic.20numbers.html#261590149">(Nov 16 2021 at 02:25)</a>:</h4>
<p><code>busy_beaver</code> takes <code>Γ</code> first (the alphabet aka number of symbols on the tape) and then <code>Λ</code> (the label space aka number of states)</p>



<a name="261590239"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Turing%20machines%20%26%20gigantic%20numbers/near/261590239" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> DayDun <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Turing.20machines.20.26.20gigantic.20numbers.html#261590239">(Nov 16 2021 at 02:27)</a>:</h4>
<p>yes but isn't the arguments in the wrong order when passed to <code>machine</code>? It should take the label space first should it not?</p>



<a name="261590257"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Turing%20machines%20%26%20gigantic%20numbers/near/261590257" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Turing.20machines.20.26.20gigantic.20numbers.html#261590257">(Nov 16 2021 at 02:27)</a>:</h4>
<p>all the functions take arguments in that order, including <code>machine Γ Λ</code></p>



<a name="261590316"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Turing%20machines%20%26%20gigantic%20numbers/near/261590316" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Turing.20machines.20.26.20gigantic.20numbers.html#261590316">(Nov 16 2021 at 02:28)</a>:</h4>
<p>what you are pointing out is that <code>machine  Γ Λ</code> is defined to be a function which takes lambda first, but we aren't applying that function here</p>



<a name="261590359"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Turing%20machines%20%26%20gigantic%20numbers/near/261590359" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Turing.20machines.20.26.20gigantic.20numbers.html#261590359">(Nov 16 2021 at 02:29)</a>:</h4>
<p>This function is applied inside <code>TM0.step</code></p>



<a name="261590371"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Turing%20machines%20%26%20gigantic%20numbers/near/261590371" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> DayDun <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Turing.20machines.20.26.20gigantic.20numbers.html#261590371">(Nov 16 2021 at 02:29)</a>:</h4>
<p>oh right, implicit arguments. Didn't think of that</p>



<a name="261590429"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Turing%20machines%20%26%20gigantic%20numbers/near/261590429" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Turing.20machines.20.26.20gigantic.20numbers.html#261590429">(Nov 16 2021 at 02:30)</a>:</h4>
<p>the whole section uses <code>parameter</code> to hide the type arguments inside the section</p>



<a name="261590467"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Turing%20machines%20%26%20gigantic%20numbers/near/261590467" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> DayDun <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Turing.20machines.20.26.20gigantic.20numbers.html#261590467">(Nov 16 2021 at 02:31)</a>:</h4>
<p>yea</p>



<a name="261612337"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Turing%20machines%20%26%20gigantic%20numbers/near/261612337" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Turing.20machines.20.26.20gigantic.20numbers.html#261612337">(Nov 16 2021 at 08:57)</a>:</h4>
<p>For reference, we already used much bigger numbers in a proof. Szemerédi's regularity lemma involves a bound of the form 4^4^...^4.</p>



<a name="265485181"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Turing%20machines%20%26%20gigantic%20numbers/near/265485181" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Daniel Briggs <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Turing.20machines.20.26.20gigantic.20numbers.html#265485181">(Dec 19 2021 at 15:26)</a>:</h4>
<p>Hi! I'm interested in using Lean or Coq to help finish the Busy Beaver of 5. I'm using the quintuple formulation, the original formulation of Turing machines, used in Radó's original paper about the Busy Beaver and in Lin and Radó. I was coding up formal proofs in Java until they got too unwieldy at <a href="https://github.com/danbriggs/Turing">https://github.com/danbriggs/Turing</a> and I wrote up the current state of the problem at <a href="https://github.com/danbriggs/Turing/blob/master/paper/HNRs.pdf">https://github.com/danbriggs/Turing/blob/master/paper/HNRs.pdf</a></p>
<p>I just finished the Lean tutorial 00 through 09. Please message me or message here if you're interested in working on it!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>