---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/defining.20partial.20group.20actions.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/defining.20partial.20group.20actions.html">defining partial group actions</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="265695781"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/defining%20partial%20group%20actions/near/265695781" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/defining.20partial.20group.20actions.html#265695781">(Dec 21 2021 at 15:15)</a>:</h4>
<p>I'm trying to define partial group actions in lean (see pg. 5 of <a href="https://arxiv.org/pdf/1604.06393.pdf">https://arxiv.org/pdf/1604.06393.pdf</a> for a definition). This is what I have so far, but I'm stuck:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>
<span class="kn">import</span> <span class="n">order.filter.partial</span>
<span class="kn">import</span> <span class="n">algebra.support</span>

<span class="kd">noncomputable theory</span>
<span class="kn">open</span> <span class="n">set</span> <span class="n">filter</span> <span class="n">classical</span>
<span class="n">open_locale</span> <span class="n">classical</span> <span class="n">filter</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>

<span class="kd">class</span> <span class="n">partial_group_action</span> <span class="o">(</span><span class="n">G</span> <span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">X'</span> <span class="o">:</span> <span class="n">G</span> <span class="bp">→</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span>
<span class="o">(</span><span class="n">X'1</span> <span class="o">:</span> <span class="n">X'</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">univ</span><span class="o">)</span>
<span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">G</span><span class="o">),</span> <span class="n">X'</span> <span class="o">(</span><span class="n">g</span><span class="bp">⁻¹</span><span class="o">)</span> <span class="bp">→</span> <span class="n">X'</span> <span class="n">g</span><span class="o">)</span>
<span class="o">(</span><span class="n">α1</span> <span class="o">:</span> <span class="n">α</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">id</span><span class="o">)</span> <span class="bp">&lt;</span><span class="c1">-- Complains here because the types don't match.</span>
</code></pre></div>
<p>I'm not sure how to proceed here.</p>



<a name="265697215"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/defining%20partial%20group%20actions/near/265697215" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/defining.20partial.20group.20actions.html#265697215">(Dec 21 2021 at 15:25)</a>:</h4>
<p>I would unbundle the subset requirement from the type of <code>α</code>:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">class</span> <span class="n">partial_group_action</span> <span class="o">(</span><span class="n">G</span> <span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">X'</span> <span class="o">:</span> <span class="n">G</span> <span class="bp">→</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span>
<span class="o">(</span><span class="n">X'1</span> <span class="o">:</span> <span class="n">X'</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">univ</span><span class="o">)</span>
<span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">G</span><span class="o">),</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">X</span><span class="o">)</span>
<span class="o">(</span><span class="n">α_subset</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="bp">∈</span> <span class="n">X'</span> <span class="o">(</span><span class="n">g</span><span class="bp">⁻¹</span><span class="o">)),</span> <span class="n">α</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">X'</span> <span class="n">g</span><span class="o">)</span>
<span class="o">(</span><span class="n">α1</span> <span class="o">:</span> <span class="n">α</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">id</span><span class="o">)</span>
</code></pre></div>



<a name="265697444"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/defining%20partial%20group%20actions/near/265697444" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/defining.20partial.20group.20actions.html#265697444">(Dec 21 2021 at 15:26)</a>:</h4>
<p>I assume you mean <code>(α_subset : ∀ (g : G), x ∈ X' (g⁻¹) → α g x ∈ X' g)</code>?</p>



<a name="265697640"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/defining%20partial%20group%20actions/near/265697640" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/defining.20partial.20group.20actions.html#265697640">(Dec 21 2021 at 15:28)</a>:</h4>
<p>Not really? We need to introduce <code>x</code>, no?</p>



<a name="265697784"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/defining%20partial%20group%20actions/near/265697784" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/defining.20partial.20group.20actions.html#265697784">(Dec 21 2021 at 15:29)</a>:</h4>
<p>I think Anne's approach might work better in the long run, but one alternative is to do</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>
<span class="kn">import</span> <span class="n">order.filter.partial</span>
<span class="kn">import</span> <span class="n">algebra.support</span>

<span class="kd">noncomputable theory</span>
<span class="kn">open</span> <span class="n">set</span> <span class="n">filter</span> <span class="n">classical</span>
<span class="n">open_locale</span> <span class="n">classical</span> <span class="n">filter</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>

<span class="kd">class</span> <span class="n">partial_group_action</span> <span class="o">(</span><span class="n">G</span> <span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">X'</span> <span class="o">:</span> <span class="n">G</span> <span class="bp">→</span> <span class="n">set</span> <span class="n">X</span><span class="o">)</span>
<span class="o">(</span><span class="n">X'1</span> <span class="o">:</span> <span class="n">X'</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">univ</span><span class="o">)</span>
<span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">G</span><span class="o">),</span> <span class="n">X'</span> <span class="o">(</span><span class="n">g</span><span class="bp">⁻¹</span><span class="o">)</span> <span class="bp">→</span> <span class="n">X'</span> <span class="n">g</span><span class="o">)</span>
<span class="o">(</span><span class="n">α1</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span> <span class="n">α</span> <span class="mi">1</span> <span class="o">⟨</span><span class="n">t</span><span class="o">,</span> <span class="kd">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">X'1</span><span class="o">]⟩</span> <span class="bp">=</span> <span class="o">⟨</span><span class="n">t</span><span class="o">,</span> <span class="kd">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">X'1</span><span class="o">]⟩)</span> <span class="c1">-- Complains here because the types don't match.</span>
</code></pre></div>



<a name="265698539"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/defining%20partial%20group%20actions/near/265698539" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/defining.20partial.20group.20actions.html#265698539">(Dec 21 2021 at 15:36)</a>:</h4>
<p>Maybe have a look at <a href="https://github.com/leanprover-community/mathlib/pull/10497">#10497</a> for a similar case where I need to define homomorphisms which partially respect some condition.</p>



<a name="265698722"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/defining%20partial%20group%20actions/near/265698722" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/defining.20partial.20group.20actions.html#265698722">(Dec 21 2021 at 15:38)</a>:</h4>
<p>Maybe the simplest approach is to replace the α by a family of relations</p>



<a name="265700482"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/defining%20partial%20group%20actions/near/265700482" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/defining.20partial.20group.20actions.html#265700482">(Dec 21 2021 at 15:52)</a>:</h4>
<p>Does the following definition (or something similar) work?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>
<span class="kn">import</span> <span class="n">order.filter.partial</span>
<span class="kn">import</span> <span class="n">algebra.support</span>

<span class="kd">noncomputable theory</span>
<span class="kn">open</span> <span class="n">set</span> <span class="n">filter</span> <span class="n">classical</span>
<span class="n">open_locale</span> <span class="n">classical</span> <span class="n">filter</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>

<span class="kd">class</span> <span class="n">partial_group_action</span> <span class="o">(</span><span class="n">G</span> <span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">μ_def</span> <span class="o">:</span> <span class="n">G</span> <span class="bp">→</span> <span class="n">X</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span>
<span class="o">(</span><span class="n">μ</span> <span class="o">(</span><span class="n">g</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">μ_def</span> <span class="n">g</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="n">X</span><span class="o">)</span>
<span class="o">(</span><span class="n">μ_def_id</span> <span class="o">(</span><span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="n">μ_def</span> <span class="mi">1</span> <span class="n">x</span><span class="o">)</span>
<span class="o">(</span><span class="n">μ_def_inv</span> <span class="o">(</span><span class="n">g</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">μ_def</span> <span class="n">g</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="n">μ_def</span> <span class="n">g</span><span class="bp">⁻¹</span> <span class="n">x</span><span class="o">)</span>
<span class="o">(</span><span class="n">μ_id</span> <span class="o">(</span><span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="n">μ</span> <span class="mi">1</span> <span class="n">x</span> <span class="o">(</span><span class="n">μ_def_id</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="n">x</span><span class="o">)</span>
<span class="o">(</span><span class="n">μ_def_assoc</span> <span class="o">(</span><span class="n">g₁</span> <span class="n">g₂</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">μ_def</span> <span class="n">g₂</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">h'</span> <span class="o">:</span> <span class="n">μ_def</span> <span class="n">g₁</span> <span class="o">(</span><span class="n">μ</span> <span class="n">g₂</span> <span class="n">x</span> <span class="n">h</span><span class="o">))</span> <span class="o">:</span> <span class="n">μ_def</span> <span class="o">(</span><span class="n">g₁</span> <span class="bp">*</span> <span class="n">g₂</span><span class="o">)</span> <span class="n">x</span><span class="o">)</span>
<span class="o">(</span><span class="n">μ_assoc</span> <span class="o">(</span><span class="n">g₁</span> <span class="n">g₂</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">μ_def</span> <span class="n">g₂</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">h'</span> <span class="o">:</span> <span class="n">μ_def</span> <span class="n">g₁</span> <span class="o">(</span><span class="n">μ</span> <span class="n">g₂</span> <span class="n">x</span> <span class="n">h</span><span class="o">))</span> <span class="o">:</span>
  <span class="n">μ</span> <span class="n">g₁</span> <span class="o">(</span><span class="n">μ</span> <span class="n">g₂</span> <span class="n">x</span> <span class="n">h</span><span class="o">)</span> <span class="n">h'</span> <span class="bp">=</span> <span class="n">μ</span> <span class="o">(</span><span class="n">g₁</span> <span class="bp">*</span> <span class="n">g₂</span><span class="o">)</span> <span class="n">x</span> <span class="o">(</span><span class="n">μ_def_assoc</span> <span class="n">g₁</span> <span class="n">g₂</span> <span class="n">x</span> <span class="n">h</span> <span class="n">h'</span><span class="o">))</span>
</code></pre></div>



<a name="265700783"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/defining%20partial%20group%20actions/near/265700783" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/defining.20partial.20group.20actions.html#265700783">(Dec 21 2021 at 15:54)</a>:</h4>
<p>Maybe <code>μ_def_inv</code> isn't actually needed?</p>



<a name="265700813"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/defining%20partial%20group%20actions/near/265700813" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/defining.20partial.20group.20actions.html#265700813">(Dec 21 2021 at 15:54)</a>:</h4>
<p>Presumably one should start by defining a partial monoid action...</p>



<a name="265701089"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/defining%20partial%20group%20actions/near/265701089" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/defining.20partial.20group.20actions.html#265701089">(Dec 21 2021 at 15:57)</a>:</h4>
<p>Why the <span aria-label="oh no" class="emoji emoji-1f615" role="img" title="oh no">:oh_no:</span> ?</p>



<a name="265701127"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/defining%20partial%20group%20actions/near/265701127" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/defining.20partial.20group.20actions.html#265701127">(Dec 21 2021 at 15:57)</a>:</h4>
<p>That sounds like a long-winded way.</p>



<a name="265701131"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/defining%20partial%20group%20actions/near/265701131" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/defining.20partial.20group.20actions.html#265701131">(Dec 21 2021 at 15:57)</a>:</h4>
<p>I haven't seen a definition of partial monoid action.</p>



<a name="265701172"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/defining%20partial%20group%20actions/near/265701172" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/defining.20partial.20group.20actions.html#265701172">(Dec 21 2021 at 15:57)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">class</span> <span class="n">partial_monoid_action</span> <span class="o">(</span><span class="n">G</span> <span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">monoid</span> <span class="n">G</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">μ_def</span> <span class="o">:</span> <span class="n">G</span> <span class="bp">→</span> <span class="n">X</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span>
<span class="o">(</span><span class="n">μ</span> <span class="o">(</span><span class="n">g</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">μ_def</span> <span class="n">g</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="n">X</span><span class="o">)</span>
<span class="o">(</span><span class="n">μ_def_id</span> <span class="o">(</span><span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="n">μ_def</span> <span class="mi">1</span> <span class="n">x</span><span class="o">)</span>
<span class="o">(</span><span class="n">μ_id</span> <span class="o">(</span><span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="n">μ</span> <span class="mi">1</span> <span class="n">x</span> <span class="o">(</span><span class="n">μ_def_id</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="n">x</span><span class="o">)</span>
<span class="o">(</span><span class="n">μ_def_assoc</span> <span class="o">(</span><span class="n">g₁</span> <span class="n">g₂</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">μ_def</span> <span class="n">g₂</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">h'</span> <span class="o">:</span> <span class="n">μ_def</span> <span class="n">g₁</span> <span class="o">(</span><span class="n">μ</span> <span class="n">g₂</span> <span class="n">x</span> <span class="n">h</span><span class="o">))</span> <span class="o">:</span> <span class="n">μ_def</span> <span class="o">(</span><span class="n">g₁</span> <span class="bp">*</span> <span class="n">g₂</span><span class="o">)</span> <span class="n">x</span><span class="o">)</span>
<span class="o">(</span><span class="n">μ_assoc</span> <span class="o">(</span><span class="n">g₁</span> <span class="n">g₂</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">μ_def</span> <span class="n">g₂</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">h'</span> <span class="o">:</span> <span class="n">μ_def</span> <span class="n">g₁</span> <span class="o">(</span><span class="n">μ</span> <span class="n">g₂</span> <span class="n">x</span> <span class="n">h</span><span class="o">))</span> <span class="o">:</span>
  <span class="n">μ</span> <span class="n">g₁</span> <span class="o">(</span><span class="n">μ</span> <span class="n">g₂</span> <span class="n">x</span> <span class="n">h</span><span class="o">)</span> <span class="n">h'</span> <span class="bp">=</span> <span class="n">μ</span> <span class="o">(</span><span class="n">g₁</span> <span class="bp">*</span> <span class="n">g₂</span><span class="o">)</span> <span class="n">x</span> <span class="o">(</span><span class="n">μ_def_assoc</span> <span class="n">g₁</span> <span class="n">g₂</span> <span class="n">x</span> <span class="n">h</span> <span class="n">h'</span><span class="o">))</span>
</code></pre></div>



<a name="265701297"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/defining%20partial%20group%20actions/near/265701297" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/defining.20partial.20group.20actions.html#265701297">(Dec 21 2021 at 15:58)</a>:</h4>
<p>I'm just guessing that would be the right definition...</p>



<a name="265701377"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/defining%20partial%20group%20actions/near/265701377" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/defining.20partial.20group.20actions.html#265701377">(Dec 21 2021 at 15:59)</a>:</h4>
<p>Is there really no way we can recycle usual actions to make partial ones?</p>



<a name="265701410"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/defining%20partial%20group%20actions/near/265701410" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/defining.20partial.20group.20actions.html#265701410">(Dec 21 2021 at 15:59)</a>:</h4>
<p>I thought about it, but I can't think of a way to do it.</p>



<a name="265701694"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/defining%20partial%20group%20actions/near/265701694" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/defining.20partial.20group.20actions.html#265701694">(Dec 21 2021 at 16:01)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="o">(</span><span class="n">μ</span> <span class="o">(</span><span class="n">g</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">μ_def</span> <span class="n">g</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="n">X</span><span class="o">)</span>
</code></pre></div>
<p>I've never seen this kind of expression before. What's going on here?</p>



<a name="265701757"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/defining%20partial%20group%20actions/near/265701757" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/defining.20partial.20group.20actions.html#265701757">(Dec 21 2021 at 16:01)</a>:</h4>
<p>This is saying that the action of <code>g</code> on <code>x</code> will only be defined when <code>\mu_def g x</code> holds, and will be an element of <code>X</code>.</p>



<a name="265701912"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/defining%20partial%20group%20actions/near/265701912" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/defining.20partial.20group.20actions.html#265701912">(Dec 21 2021 at 16:03)</a>:</h4>
<p>It's simply not naming the hypothesis of type <code>g x</code> and putting stuff before the <code>:</code>.</p>



<a name="265702017"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/defining%20partial%20group%20actions/near/265702017" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/defining.20partial.20group.20actions.html#265702017">(Dec 21 2021 at 16:03)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="o">(</span><span class="n">α1</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span> <span class="n">α</span> <span class="mi">1</span> <span class="o">⟨</span><span class="n">t</span><span class="o">,</span> <span class="kd">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">X'1</span><span class="o">]⟩</span> <span class="bp">=</span> <span class="o">⟨</span><span class="n">t</span><span class="o">,</span> <span class="kd">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">X'1</span><span class="o">]⟩)</span>
</code></pre></div>
<p>This solves the problem I'm currently having. Is this not an OK approach?</p>



<a name="265702152"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/defining%20partial%20group%20actions/near/265702152" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/defining.20partial.20group.20actions.html#265702152">(Dec 21 2021 at 16:04)</a>:</h4>
<p>Here are all the types:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>
<span class="kn">import</span> <span class="n">order.filter.partial</span>
<span class="kn">import</span> <span class="n">algebra.support</span>

<span class="kd">noncomputable theory</span>
<span class="kn">open</span> <span class="n">set</span> <span class="n">filter</span> <span class="n">classical</span>
<span class="n">open_locale</span> <span class="n">classical</span> <span class="n">filter</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>

<span class="kd">class</span> <span class="n">partial_monoid_action</span> <span class="o">(</span><span class="n">G</span> <span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">monoid</span> <span class="n">G</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">μ_def</span> <span class="o">:</span> <span class="n">G</span> <span class="bp">→</span> <span class="n">X</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span>
<span class="o">(</span><span class="n">μ</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">μ_def</span> <span class="n">g</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="n">X</span><span class="o">)</span>
<span class="o">(</span><span class="n">μ_def_id</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">)</span> <span class="o">:</span> <span class="n">μ_def</span> <span class="mi">1</span> <span class="n">x</span><span class="o">)</span>
<span class="o">(</span><span class="n">μ_id</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">)</span> <span class="o">:</span> <span class="n">μ</span> <span class="mi">1</span> <span class="n">x</span> <span class="o">(</span><span class="n">μ_def_id</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="n">x</span><span class="o">)</span>
<span class="o">(</span><span class="n">μ_def_assoc</span> <span class="o">(</span><span class="n">g₁</span> <span class="n">g₂</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">μ_def</span> <span class="n">g₂</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">h'</span> <span class="o">:</span> <span class="n">μ_def</span> <span class="n">g₁</span> <span class="o">(</span><span class="n">μ</span> <span class="n">g₂</span> <span class="n">x</span> <span class="n">h</span><span class="o">))</span> <span class="o">:</span>
  <span class="n">μ_def</span> <span class="o">(</span><span class="n">g₁</span> <span class="bp">*</span> <span class="n">g₂</span><span class="o">)</span> <span class="n">x</span><span class="o">)</span>
<span class="o">(</span><span class="n">μ_assoc</span> <span class="o">(</span><span class="n">g₁</span> <span class="n">g₂</span> <span class="o">:</span> <span class="n">G</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">μ_def</span> <span class="n">g₂</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">h'</span> <span class="o">:</span> <span class="n">μ_def</span> <span class="n">g₁</span> <span class="o">(</span><span class="n">μ</span> <span class="n">g₂</span> <span class="n">x</span> <span class="n">h</span><span class="o">))</span> <span class="o">:</span>
  <span class="n">μ</span> <span class="n">g₁</span> <span class="o">(</span><span class="n">μ</span> <span class="n">g₂</span> <span class="n">x</span> <span class="n">h</span><span class="o">)</span> <span class="n">h'</span> <span class="bp">=</span> <span class="n">μ</span> <span class="o">(</span><span class="n">g₁</span> <span class="bp">*</span> <span class="n">g₂</span><span class="o">)</span> <span class="n">x</span> <span class="o">(</span><span class="n">μ_def_assoc</span> <span class="n">g₁</span> <span class="n">g₂</span> <span class="n">x</span> <span class="n">h</span> <span class="n">h'</span><span class="o">))</span>
</code></pre></div>



<a name="265702216"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/defining%20partial%20group%20actions/near/265702216" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/defining.20partial.20group.20actions.html#265702216">(Dec 21 2021 at 16:05)</a>:</h4>
<p>Ah, that makes it clear. Thanks.</p>



<a name="265702223"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/defining%20partial%20group%20actions/near/265702223" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/defining.20partial.20group.20actions.html#265702223">(Dec 21 2021 at 16:05)</a>:</h4>
<p><span class="user-mention silent" data-user-id="416322">Bernd Losert</span> <a href="#narrow/stream/116395-maths/topic/defining.20partial.20group.20actions/near/265702017">said</a>:</p>
<blockquote>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="o">(</span><span class="n">α1</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">t</span> <span class="o">:</span> <span class="n">X</span><span class="o">,</span> <span class="n">α</span> <span class="mi">1</span> <span class="o">⟨</span><span class="n">t</span><span class="o">,</span> <span class="kd">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">X'1</span><span class="o">]⟩</span> <span class="bp">=</span> <span class="o">⟨</span><span class="n">t</span><span class="o">,</span> <span class="kd">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">X'1</span><span class="o">]⟩)</span>
</code></pre></div>
<p>This solves the problem I'm currently having. Is this not an OK approach?</p>
</blockquote>
<p>You are working with subtypes with this approach, which can get annoying in the long run.</p>



<a name="265702287"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/defining%20partial%20group%20actions/near/265702287" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/defining.20partial.20group.20actions.html#265702287">(Dec 21 2021 at 16:05)</a>:</h4>
<p>But the partial action stuff relies on subsets everywhere. I can't really escape it.</p>



<a name="265702419"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/defining%20partial%20group%20actions/near/265702419" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/defining.20partial.20group.20actions.html#265702419">(Dec 21 2021 at 16:06)</a>:</h4>
<p>The subset <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>X</mi><mi>g</mi></msub></mrow><annotation encoding="application/x-tex">X_g</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span> you defined would  become <code>set_of (μ_def g)</code></p>



<a name="265702481"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/defining%20partial%20group%20actions/near/265702481" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/defining.20partial.20group.20actions.html#265702481">(Dec 21 2021 at 16:07)</a>:</h4>
<p>Yes.</p>



<a name="265702685"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/defining%20partial%20group%20actions/near/265702685" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/defining.20partial.20group.20actions.html#265702685">(Dec 21 2021 at 16:08)</a>:</h4>
<p>The issue with using sets is that terms of <code>X_g</code> are <em>not</em> terms of <code>X</code>, so if you start by using such subsets, you will always need to rely on coercions..</p>



<a name="265702852"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/defining%20partial%20group%20actions/near/265702852" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/defining.20partial.20group.20actions.html#265702852">(Dec 21 2021 at 16:10)</a>:</h4>
<p>I like your relation approach involving μ_def. I'll have to try it out.</p>



<a name="265702884"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/defining%20partial%20group%20actions/near/265702884" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/defining.20partial.20group.20actions.html#265702884">(Dec 21 2021 at 16:10)</a>:</h4>
<p>Ultimately, I need to define continuous versions of partial group actions and then I need to talk about convergent filters on the "domain" of the partial action.</p>



<a name="265702942"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/defining%20partial%20group%20actions/near/265702942" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/defining.20partial.20group.20actions.html#265702942">(Dec 21 2021 at 16:11)</a>:</h4>
<p>I see... Is there an analogue of the group chunk theorem for convergence spaces?</p>



<a name="265702945"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/defining%20partial%20group%20actions/near/265702945" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/defining.20partial.20group.20actions.html#265702945">(Dec 21 2021 at 16:11)</a>:</h4>
<p>I can't tell if using μ_def will be easier than dealing with subsets.</p>



<a name="265702997"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/defining%20partial%20group%20actions/near/265702997" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/defining.20partial.20group.20actions.html#265702997">(Dec 21 2021 at 16:11)</a>:</h4>
<p>A lot of the theory of partial group actions can be generalized to convergence spaces.</p>



<a name="265703092"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/defining%20partial%20group%20actions/near/265703092" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/defining.20partial.20group.20actions.html#265703092">(Dec 21 2021 at 16:12)</a>:</h4>
<p>I don't know what the "group chunk theorem" is.</p>



<a name="265703179"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/defining%20partial%20group%20actions/near/265703179" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/defining.20partial.20group.20actions.html#265703179">(Dec 21 2021 at 16:13)</a>:</h4>
<p>The context of this paper is probably the closest:<br>
<a href="https://projecteuclid.org/journals/illinois-journal-of-mathematics/volume-34/issue-1/Weils-group-chunk-theorem-A-topological-setting/10.1215/ijm/1255988498.full">https://projecteuclid.org/journals/illinois-journal-of-mathematics/volume-34/issue-1/Weils-group-chunk-theorem-A-topological-setting/10.1215/ijm/1255988498.full</a></p>



<a name="265703288"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/defining%20partial%20group%20actions/near/265703288" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/defining.20partial.20group.20actions.html#265703288">(Dec 21 2021 at 16:14)</a>:</h4>
<p>OK.</p>



<a name="265703536"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/defining%20partial%20group%20actions/near/265703536" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/defining.20partial.20group.20actions.html#265703536">(Dec 21 2021 at 16:16)</a>:</h4>
<p>The reason my suggestion is maybe bad is because while it works in this case you may well end up hitting other similar issues with <code>X' (g\inv * g * h)</code> not being the same type as <code>X' h</code> or other goals like this. Probably you can always  make the statements work in the same way assuming <code>x : X</code> and <code>hx : x \in X' g</code>, but as a general principle having the types of things depend on your variables that you are applying algebraic operations too causes headaches.</p>



<a name="265703708"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/defining%20partial%20group%20actions/near/265703708" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/defining.20partial.20group.20actions.html#265703708">(Dec 21 2021 at 16:17)</a>:</h4>
<p>Indeed. I'm already feeling the pain.</p>



<a name="265703787"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/defining%20partial%20group%20actions/near/265703787" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/defining.20partial.20group.20actions.html#265703787">(Dec 21 2021 at 16:18)</a>:</h4>
<p>Thanks everyone. I will go with the relation approach for now and see where it takes me.</p>



<a name="265704410"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/defining%20partial%20group%20actions/near/265704410" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/defining.20partial.20group.20actions.html#265704410">(Dec 21 2021 at 16:23)</a>:</h4>
<p>The approach I had in mind was something like</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.group</span>
<span class="kn">import</span> <span class="n">logic.relation</span>

<span class="kd">class</span> <span class="n">partial_group_action</span> <span class="o">(</span><span class="n">G</span> <span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">ρ</span> <span class="o">:</span> <span class="n">G</span> <span class="bp">→</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">X</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span>          <span class="c1">-- ρ g x y ↔ (α g x = y). X_{g⁻¹} = {x | ∃ y, ρ g x y}.</span>
<span class="o">(</span><span class="n">ρ_bij</span> <span class="o">(</span><span class="n">g</span><span class="o">)</span> <span class="o">:</span> <span class="n">relator.bi_unique</span> <span class="o">(</span><span class="n">ρ</span> <span class="n">g</span><span class="o">))</span>
<span class="o">(</span><span class="n">ρ_1</span> <span class="o">:</span> <span class="n">ρ</span> <span class="mi">1</span> <span class="bp">=</span> <span class="o">(</span><span class="bp">=</span><span class="o">))</span>
<span class="o">(</span><span class="n">ρ_mul</span> <span class="o">(</span><span class="n">g</span> <span class="n">h</span><span class="o">)</span> <span class="o">:</span> <span class="n">relation.comp</span> <span class="o">(</span><span class="n">ρ</span> <span class="n">g</span><span class="o">)</span> <span class="o">(</span><span class="n">ρ</span> <span class="n">h</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">ρ</span> <span class="o">(</span><span class="n">g</span> <span class="bp">*</span> <span class="n">h</span><span class="o">))</span>
<span class="o">(</span><span class="n">ρ_inv</span> <span class="o">(</span><span class="n">g</span><span class="o">)</span> <span class="o">:</span> <span class="n">flip</span> <span class="o">(</span><span class="n">ρ</span> <span class="n">g</span><span class="o">)</span> <span class="bp">=</span> <span class="n">ρ</span> <span class="o">(</span><span class="n">g</span><span class="bp">⁻¹</span><span class="o">))</span>
</code></pre></div>



<a name="265704577"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/defining%20partial%20group%20actions/near/265704577" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/defining.20partial.20group.20actions.html#265704577">(Dec 21 2021 at 16:24)</a>:</h4>
<p>though it's likely I have the <code>relation.comp</code> arguments backwards, and I didn't actually check that this is what the definition of a partial group action is, but I assume it ought to be</p>



<a name="265704670"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/defining%20partial%20group%20actions/near/265704670" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/defining.20partial.20group.20actions.html#265704670">(Dec 21 2021 at 16:25)</a>:</h4>
<p>The main disadvantage is you can't just apply <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span></span></span></span> as a function</p>



<a name="265704795"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/defining%20partial%20group%20actions/near/265704795" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/defining.20partial.20group.20actions.html#265704795">(Dec 21 2021 at 16:26)</a>:</h4>
<p>Adam's definition is basically the same as your original one except that instead of taking a single argument of type which is a subtype, the operation takes two separate arguments.</p>



<a name="265705353"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/defining%20partial%20group%20actions/near/265705353" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/defining.20partial.20group.20actions.html#265705353">(Dec 21 2021 at 16:31)</a>:</h4>
<blockquote>
<p>The main disadvantage is you can't just apply α as a function</p>
</blockquote>
<p>That's going to be troublesome since I want to map α to a filter. In fact, I am already going to run into a problem with Adam's definition since it requires of proof that the action is defined. There is also the problem that it's not uncurried.</p>



<a name="265707880"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/defining%20partial%20group%20actions/near/265707880" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/defining.20partial.20group.20actions.html#265707880">(Dec 21 2021 at 16:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/116395-maths/topic/defining.20partial.20group.20actions/near/265701377">said</a>:</p>
<blockquote>
<p>Is there really no way we can recycle usual actions to make partial ones?</p>
</blockquote>
<p>Maybe I can define actions on option X?</p>



<a name="265708106"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/defining%20partial%20group%20actions/near/265708106" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/defining.20partial.20group.20actions.html#265708106">(Dec 21 2021 at 16:53)</a>:</h4>
<p>Or <a href="https://leanprover-community.github.io/mathlib_docs/find/part">docs#part</a>, but I'm not sure that works.</p>



<a name="265708651"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/defining%20partial%20group%20actions/near/265708651" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bernd Losert <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/defining.20partial.20group.20actions.html#265708651">(Dec 21 2021 at 16:57)</a>:</h4>
<p>I think one problem with <code>part</code> that I'll have is mapping the action over a filter.</p>



<a name="265710146"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/defining%20partial%20group%20actions/near/265710146" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/defining.20partial.20group.20actions.html#265710146">(Dec 21 2021 at 17:10)</a>:</h4>
<p><span class="user-mention silent" data-user-id="416322">Bernd Losert</span> <a href="#narrow/stream/116395-maths/topic/defining.20partial.20group.20actions/near/265705353">said</a>:</p>
<blockquote>
<p>That's going to be troublesome since I want to map α to a filter.</p>
</blockquote>
<p>Mathematically this shouldn't be a problem (a relation can be viewed as a kind of span, and you can <code>comap</code> and then <code>map</code> across the legs of the span) but mathlib might not have good existing support for this operation.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>