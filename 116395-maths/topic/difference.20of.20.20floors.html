---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/difference.20of.20.20floors.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/difference.20of.20.20floors.html">difference of  floors</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="304043621"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/difference%20of%20%20floors/near/304043621" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/difference.20of.20.20floors.html#304043621">(Oct 14 2022 at 14:23)</a>:</h4>
<p>Any easier ways to get this? Or should I put this somewhere?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">floor_sub_floor_lt</span> <span class="o">(</span><span class="n">r</span> <span class="n">s</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span> <span class="bp">↑⌊</span><span class="n">r</span><span class="bp">⌋</span> <span class="bp">-</span> <span class="bp">↑⌊</span><span class="n">s</span><span class="bp">⌋</span> <span class="bp">&lt;</span> <span class="bp">|</span><span class="n">r</span> <span class="bp">-</span> <span class="n">s</span><span class="bp">|</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="k">calc</span> <span class="bp">↑⌊</span><span class="n">r</span><span class="bp">⌋</span> <span class="bp">-</span> <span class="bp">↑⌊</span><span class="n">s</span><span class="bp">⌋</span> <span class="bp">≤</span> <span class="n">r</span> <span class="bp">-</span> <span class="bp">↑⌊</span><span class="n">s</span><span class="bp">⌋</span>    <span class="o">:</span> <span class="n">sub_le_sub_right</span> <span class="o">(</span><span class="n">int.floor_le</span> <span class="n">r</span><span class="o">)</span> <span class="n">_</span>
                <span class="bp">...</span> <span class="bp">&lt;</span> <span class="n">r</span> <span class="bp">-</span> <span class="o">(</span><span class="n">s</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">)</span> <span class="o">:</span> <span class="kd">by</span> <span class="n">apply</span> <span class="n">sub_lt_sub_left</span><span class="bp">;</span> <span class="n">simp</span>
                <span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="n">r</span> <span class="bp">-</span> <span class="n">s</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">sub_add</span><span class="o">]</span>
                <span class="bp">...</span> <span class="bp">≤</span> <span class="bp">|</span><span class="n">r</span> <span class="bp">-</span> <span class="n">s</span><span class="bp">|</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:</span> <span class="n">add_le_add_right</span> <span class="o">(</span><span class="n">le_abs_self</span> <span class="o">(</span><span class="n">r</span> <span class="bp">-</span> <span class="n">s</span><span class="o">))</span> <span class="n">_</span>

<span class="kd">lemma</span> <span class="n">abs_floor_sub_floor_lt</span> <span class="o">(</span><span class="n">r</span> <span class="n">s</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span> <span class="bp">↑|⌊</span><span class="n">r</span><span class="bp">⌋</span> <span class="bp">-</span> <span class="bp">⌊</span><span class="n">s</span><span class="bp">⌋|</span> <span class="bp">&lt;</span> <span class="bp">|</span> <span class="n">r</span> <span class="bp">-</span> <span class="n">s</span> <span class="bp">|</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">int.cast_abs</span><span class="o">,</span> <span class="n">int.cast_sub</span><span class="o">,</span> <span class="n">abs_sub_lt_iff</span><span class="o">],</span> <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">apply</span> <span class="n">floor_sub_floor_lt</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="n">abs_sub_comm</span><span class="o">,</span> <span class="n">apply</span> <span class="n">floor_sub_floor_lt</span> <span class="o">},</span>
<span class="kd">end</span>
</code></pre></div>



<a name="304084696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/difference%20of%20%20floors/near/304084696" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/difference.20of.20.20floors.html#304084696">(Oct 14 2022 at 17:39)</a>:</h4>
<p>This might be an <a href="https://en.wikipedia.org/wiki/XY_problem">#xy</a> problem -- often when on paper I'd use the floor the Lean answer is to invoke the archimedean principle, or something ...</p>



<a name="304085017"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/difference%20of%20%20floors/near/304085017" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/difference.20of.20.20floors.html#304085017">(Oct 14 2022 at 17:41)</a>:</h4>
<p>I think you're just making it harder for yourself with this first calc block. Don't we have the <code>sub</code> version of <a href="https://leanprover-community.github.io/mathlib_docs/find/add_lt_add_of_le_of_lt">docs#add_lt_add_of_le_of_lt</a>?</p>



<a name="304085246"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/difference%20of%20%20floors/near/304085246" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/difference.20of.20.20floors.html#304085246">(Oct 14 2022 at 17:42)</a>:</h4>
<p>Also I suggest using <a href="https://leanprover-community.github.io/mathlib_docs/find/sub_lt_iff_lt_add">docs#sub_lt_iff_lt_add</a> to interleave rewriting and inequality steps one less time.</p>



<a name="304086043"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/difference%20of%20%20floors/near/304086043" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/difference.20of.20.20floors.html#304086043">(Oct 14 2022 at 17:47)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">floor_sub_floor_lt</span> <span class="o">(</span><span class="n">r</span> <span class="n">s</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span> <span class="bp">↑⌊</span><span class="n">r</span><span class="bp">⌋</span> <span class="bp">-</span> <span class="bp">↑⌊</span><span class="n">s</span><span class="bp">⌋</span> <span class="bp">&lt;</span> <span class="bp">|</span><span class="n">r</span> <span class="bp">-</span> <span class="n">s</span><span class="bp">|</span> <span class="bp">+</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">linarith</span> <span class="o">[</span><span class="n">int.floor_le</span> <span class="n">r</span><span class="o">,</span> <span class="n">int.sub_one_lt_floor</span> <span class="n">s</span><span class="o">,</span> <span class="n">le_abs_self</span> <span class="o">(</span><span class="n">r</span> <span class="bp">-</span> <span class="n">s</span><span class="o">)]</span>
</code></pre></div>



<a name="304438600"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/difference%20of%20%20floors/near/304438600" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/difference.20of.20.20floors.html#304438600">(Oct 17 2022 at 11:36)</a>:</h4>
<p>Thanks for the suggestions :)</p>



<a name="304438704"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/difference%20of%20%20floors/near/304438704" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/difference.20of.20.20floors.html#304438704">(Oct 17 2022 at 11:37)</a>:</h4>
<p><span class="user-mention silent" data-user-id="260507">Heather Macbeth</span> <a href="#narrow/stream/116395-maths/topic/difference.20of.20.20floors/near/304084696">said</a>:</p>
<blockquote>
<p>This might be an <a href="https://en.wikipedia.org/wiki/XY_problem">#xy</a> problem -- often when on paper I'd use the floor the Lean answer is to invoke the archimedean principle, or something ...</p>
</blockquote>
<p>This is more for a program verification context, where we really need <code>floor</code></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>