---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/with_bot.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html">with_bot</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="196812378"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196812378" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196812378">(May 07 2020 at 18:33)</a>:</h4>
<p>Hello, <br>
I'm reading a little the theory of degree in <code>data.polynomial</code> and there is a strange object : <code> with_bot \N</code> <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span> </p>
<p>Do you have an idea to deal with bot ?  For example !  </p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">order</span>
<span class="kn">open</span> <span class="n">with_bot</span>
<span class="kn">example</span>  <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">with_bot</span> <span class="bp">ℕ</span>  <span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">a</span><span class="bp">+</span><span class="mi">1</span> <span class="bp">≤</span> <span class="n">b</span><span class="bp">+</span><span class="mi">1</span> <span class="o">:=</span> <span class="k">begin</span>
    <span class="n">intros</span><span class="o">,</span>
<span class="kn">end</span>
</code></pre></div>



<a name="196813746"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196813746" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196813746">(May 07 2020 at 18:43)</a>:</h4>
<p>what is <code>bot+1</code> supposed to be in this statement?</p>



<a name="196813805"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196813805" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196813805">(May 07 2020 at 18:43)</a>:</h4>
<p>That's true as long as you are talking about nats, and nats embed in <code>with_bot nat</code></p>



<a name="196816320"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196816320" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196816320">(May 07 2020 at 19:02)</a>:</h4>
<p>Hello Mario, </p>
<p>For me  <code>bot + 1 =  bot </code>  so i each case it ok !  <br>
But i don't understand who to deal in lean ?   Is there is a file where this arithmetic property are state ?</p>



<a name="196816795"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196816795" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196816795">(May 07 2020 at 19:06)</a>:</h4>
<p>Just do cases on a and b?</p>



<a name="196818498"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196818498" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196818498">(May 07 2020 at 19:20)</a>:</h4>
<p>Yep i can cases ... but but but <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span> </p>
<div class="codehilite"><pre><span></span><code><span class="kn">example</span>  <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">with_bot</span> <span class="bp">ℕ</span>  <span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">a</span><span class="bp">+</span><span class="mi">1</span> <span class="bp">≤</span> <span class="n">b</span><span class="bp">+</span><span class="mi">1</span> <span class="o">:=</span> <span class="k">begin</span>
    <span class="n">rcases</span>  <span class="n">b</span><span class="o">,</span> <span class="n">intros</span><span class="o">,</span> <span class="n">rcases</span> <span class="n">a</span><span class="o">,</span> <span class="n">exact</span> <span class="n">le_refl</span> <span class="o">(</span><span class="n">none</span> <span class="bp">+</span><span class="mi">1</span><span class="o">),</span>
     <span class="n">rw</span> <span class="n">none_eq_bot</span>  <span class="n">at</span> <span class="bp">*</span><span class="o">,</span> <span class="n">rw</span> <span class="n">some_eq_coe</span> <span class="n">at</span> <span class="bp">*</span><span class="o">,</span><span class="n">rw</span>  <span class="n">le_bot_iff</span> <span class="n">at</span> <span class="n">a_1</span><span class="o">,</span>
     <span class="n">rw</span> <span class="n">a_1</span><span class="o">,</span> <span class="n">refine</span> <span class="n">le_refl</span> <span class="bp">_</span><span class="o">,</span>
     <span class="n">rcases</span> <span class="n">a</span><span class="o">,</span> <span class="n">rw</span> <span class="n">none_eq_bot</span>  <span class="n">at</span> <span class="bp">*</span><span class="o">,</span> <span class="n">rw</span> <span class="n">some_eq_coe</span> <span class="n">at</span> <span class="bp">*</span><span class="o">,</span>
     <span class="n">intros</span><span class="o">,</span> <span class="n">exact</span> <span class="n">bot_le</span><span class="o">,</span> <span class="n">rcases</span> <span class="n">a</span><span class="o">,</span> <span class="n">intros</span><span class="o">,</span>
     <span class="n">rw</span> <span class="n">some_eq_coe</span> <span class="n">at</span> <span class="bp">*</span><span class="o">,</span> <span class="n">erw</span> <span class="n">zero_add</span><span class="o">,</span>
   <span class="n">not</span> <span class="n">finish</span>
</code></pre></div>



<a name="196818556"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196818556" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196818556">(May 07 2020 at 19:21)</a>:</h4>
<p><span class="user-mention" data-user-id="270476">@orlando</span> Note that there is also <code>nat_degree</code>.</p>



<a name="196818568"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196818568" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196818568">(May 07 2020 at 19:21)</a>:</h4>
<p>They are the same, except for the zero polynomial</p>



<a name="196818965"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196818965" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196818965">(May 07 2020 at 19:24)</a>:</h4>
<p>Yep Johan, but a  try to use   the theorem   : in    <span class="tex-error">$$ \C $$</span> all polynomial of  <code>0 &lt; degree </code> have roots ... and i have   to deal i little with <code> degree</code>  <span aria-label="confused" class="emoji emoji-1f615" role="img" title="confused">:confused:</span></p>



<a name="196821297"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196821297" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196821297">(May 07 2020 at 19:44)</a>:</h4>
<p>I little better </p>
<div class="codehilite"><pre><span></span><code><span class="kn">example</span>  <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">with_bot</span> <span class="bp">ℕ</span>  <span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">a</span><span class="bp">+</span><span class="mi">1</span> <span class="bp">≤</span> <span class="n">b</span><span class="bp">+</span><span class="mi">1</span> <span class="o">:=</span> <span class="k">begin</span>
    <span class="n">intros</span><span class="o">,</span>
    <span class="n">rcases</span>  <span class="n">b</span><span class="o">,</span> <span class="n">intros</span><span class="o">,</span> <span class="n">rcases</span> <span class="n">a</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">le_refl</span> <span class="o">(</span><span class="n">none</span> <span class="bp">+</span><span class="mi">1</span><span class="o">),</span>
    <span class="n">erw</span>  <span class="n">le_bot_iff</span> <span class="n">at</span> <span class="n">a_1</span><span class="o">,</span> <span class="n">rw</span> <span class="n">a_1</span><span class="o">,</span>
    <span class="n">refine</span> <span class="n">le_refl</span> <span class="bp">_</span><span class="o">,</span>
    <span class="n">rcases</span> <span class="n">a</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">bot_le</span><span class="o">,</span>
    <span class="n">apply</span>  <span class="n">some_le_some</span><span class="bp">.</span><span class="n">mpr</span><span class="o">,</span> <span class="n">apply</span> <span class="n">add_le_add</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">some_le_some</span><span class="bp">.</span><span class="n">mp</span> <span class="n">a_1</span><span class="o">,</span> <span class="n">exact</span> <span class="n">le_refl</span> <span class="mi">1</span><span class="o">,</span>
<span class="kn">end</span>
</code></pre></div>



<a name="196821301"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196821301" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196821301">(May 07 2020 at 19:44)</a>:</h4>
<p><span class="user-mention" data-user-id="270476">@orlando</span> There is a lemma <code>degree_eq_nat_degree</code>, which is probably useful</p>



<a name="196821384"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196821384" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196821384">(May 07 2020 at 19:45)</a>:</h4>
<p>Of course it comes with the assumption that the polynomial is not zero</p>



<a name="196822402"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196822402" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196822402">(May 07 2020 at 19:54)</a>:</h4>
<p>perhaps it help me ! I'm trying to make caracteristic polynomial of a matrix. And i  have to proof that the degree of the polynomial is equal to the dimension of the matrix.</p>



<a name="196823659"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196823659" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196823659">(May 07 2020 at 20:05)</a>:</h4>
<p>where is this <code>+</code> even defined?</p>



<a name="196823757"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196823757" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196823757">(May 07 2020 at 20:06)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">instance</span> <span class="o">[</span><span class="n">add_semigroup</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span> <span class="n">add_semigroup</span> <span class="o">(</span><span class="n">with_bot</span> <span class="n">α</span><span class="o">)</span> <span class="o">:=</span> <span class="n">with_top</span><span class="bp">.</span><span class="n">add_semigroup</span>
</code></pre></div>



<a name="196823795"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196823795" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196823795">(May 07 2020 at 20:06)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">instance</span> <span class="o">[</span><span class="n">add_semigroup</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span> <span class="n">add_semigroup</span> <span class="o">(</span><span class="n">with_top</span> <span class="n">α</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">add</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">o₁</span> <span class="n">o₂</span><span class="o">,</span> <span class="n">o₁</span><span class="bp">.</span><span class="n">bind</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">a</span><span class="o">,</span> <span class="n">o₂</span><span class="bp">.</span><span class="n">map</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">b</span><span class="o">,</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)),</span>
  <span class="bp">..@</span><span class="n">additive</span><span class="bp">.</span><span class="n">add_semigroup</span> <span class="bp">_</span> <span class="err">$</span> <span class="bp">@</span><span class="n">with_zero</span><span class="bp">.</span><span class="n">semigroup</span> <span class="o">(</span><span class="n">multiplicative</span> <span class="n">α</span><span class="o">)</span> <span class="bp">_</span> <span class="o">}</span>
</code></pre></div>


<p>I blame Mario</p>



<a name="196823889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196823889" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196823889">(May 07 2020 at 20:07)</a>:</h4>
<p>I can't find <code>some x + some y = some (x+y)</code></p>



<a name="196823913"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196823913" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196823913">(May 07 2020 at 20:07)</a>:</h4>
<p><code>norm_cast</code> won't do it</p>



<a name="196824054"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196824054" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196824054">(May 07 2020 at 20:08)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">polynomial</span>

<span class="kn">open</span> <span class="n">with_bot</span>

<span class="bp">#</span><span class="kn">check</span> <span class="n">with_bot</span><span class="bp">.</span><span class="n">add_semigroup</span>

<span class="kn">example</span>  <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">with_bot</span> <span class="bp">ℕ</span>  <span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">a</span><span class="bp">+</span><span class="mi">1</span> <span class="bp">≤</span> <span class="n">b</span><span class="bp">+</span><span class="mi">1</span> <span class="o">:=</span> <span class="k">begin</span>
  <span class="n">intro</span> <span class="n">hab</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">a</span> <span class="k">with</span> <span class="n">a</span><span class="bp">;</span> <span class="n">cases</span> <span class="n">b</span> <span class="k">with</span> <span class="n">b</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">refine</span> <span class="n">le_refl</span> <span class="bp">_</span><span class="o">},</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="n">none_eq_bot</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">bot_add</span><span class="o">,</span>
    <span class="n">refine</span> <span class="n">bot_le</span><span class="o">},</span>
  <span class="o">{</span> <span class="n">exfalso</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">none_eq_bot</span> <span class="n">at</span> <span class="n">hab</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">le_bot_iff</span> <span class="n">at</span> <span class="n">hab</span><span class="o">,</span>
    <span class="n">cases</span> <span class="n">hab</span><span class="o">},</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="n">some_le_some</span> <span class="n">at</span> <span class="n">hab</span><span class="o">,</span>
    <span class="k">show</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">with_bot</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="bp">+</span> <span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">b</span> <span class="bp">+</span> <span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">),</span>
    <span class="n">sorry</span>
  <span class="o">},</span>
<span class="kn">end</span>
</code></pre></div>


<p>Everything else is easy</p>



<a name="196824218"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196824218" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196824218">(May 07 2020 at 20:10)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/116395-maths/topic/with_bot/near/196823757" title="#narrow/stream/116395-maths/topic/with_bot/near/196823757">said</a>:</p>
<blockquote>
<div class="codehilite"><pre><span></span><code><span class="kn">instance</span> <span class="o">[</span><span class="n">add_semigroup</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span> <span class="n">add_semigroup</span> <span class="o">(</span><span class="n">with_bot</span> <span class="n">α</span><span class="o">)</span> <span class="o">:=</span> <span class="n">with_top</span><span class="bp">.</span><span class="n">add_semigroup</span>
</code></pre></div>


</blockquote>
<p>okay thanks, then the proof is <code>add_le_add_right'</code>.</p>



<a name="196824252"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196824252" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196824252">(May 07 2020 at 20:10)</a>:</h4>
<p><span class="user-mention" data-user-id="270476">@orlando</span> because you don't format your code properly it's difficult for other people to read. You should use <code>{}</code> instead of having multiple goals open at once</p>



<a name="196824264"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196824264" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196824264">(May 07 2020 at 20:10)</a>:</h4>
<p>I don't know why <code>apply</code> can't apply this or why <code>library_search</code> can't find it though.</p>



<a name="196824526"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196824526" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196824526">(May 07 2020 at 20:13)</a>:</h4>
<p>Orlando is doing induction on a but the issue isn't going to go away: the other goal is</p>
<div class="codehilite"><pre><span></span><code><span class="n">b</span> <span class="n">a</span> <span class="o">:</span> <span class="bp">ℕ</span>
<span class="err">⊢</span> <span class="n">some</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">succ</span> <span class="n">a</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">some</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">some</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">succ</span> <span class="n">a</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">≤</span> <span class="n">some</span> <span class="n">b</span> <span class="bp">+</span> <span class="mi">1</span>
</code></pre></div>


<p>It all hinges on <code>some</code> being a monoid hom.</p>



<a name="196824563"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196824563" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196824563">(May 07 2020 at 20:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110032">Reid Barton</span> <a href="#narrow/stream/116395-maths/topic/with_bot/near/196824264" title="#narrow/stream/116395-maths/topic/with_bot/near/196824264">said</a>:</p>
<blockquote>
<p>I don't know why <code>apply</code> can't apply this</p>
</blockquote>
<p>Aha, because <code>le</code> is cleverly implemented as a forall/function.</p>



<a name="196824565"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196824565" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196824565">(May 07 2020 at 20:13)</a>:</h4>
<p>aah, <code>coe_add</code> isn't tagged with one of these <code>norm_cast</code> tags.</p>



<a name="196824614"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196824614" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196824614">(May 07 2020 at 20:14)</a>:</h4>
<p>Why are you mucking around with casts and stuff?</p>



<a name="196824662"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196824662" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196824662">(May 07 2020 at 20:14)</a>:</h4>
<p>because I couldn't find the algebraic class which with_bot nat was</p>



<a name="196824707"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196824707" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196824707">(May 07 2020 at 20:15)</a>:</h4>
<p>It's annoying how hard it is to find instances.</p>



<a name="196824740"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196824740" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196824740">(May 07 2020 at 20:15)</a>:</h4>
<p>but you're right, it's an <code>ordered_add_comm_monoid</code>.</p>



<a name="196824761"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196824761" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196824761">(May 07 2020 at 20:15)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">order</span>
<span class="kn">open</span> <span class="n">with_bot</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">with_bot</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">+</span> <span class="mi">1</span> <span class="bp">≤</span> <span class="n">b</span> <span class="bp">+</span><span class="mi">1</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">cases</span> <span class="n">a</span> <span class="k">with</span> <span class="n">a</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">exact</span> <span class="n">bot_le</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">rcases</span> <span class="n">H</span> <span class="n">a</span> <span class="n">rfl</span> <span class="k">with</span> <span class="bp">⟨</span><span class="n">n</span><span class="o">,</span> <span class="bp">⟨⟩</span><span class="o">,</span> <span class="n">han</span><span class="bp">⟩</span><span class="o">,</span>
    <span class="n">rintros</span> <span class="n">m</span> <span class="bp">⟨⟩</span><span class="o">,</span>
    <span class="n">exact</span> <span class="bp">⟨</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">,</span> <span class="n">rfl</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">succ_le_succ</span> <span class="n">han</span><span class="bp">⟩</span> <span class="o">}</span>
<span class="kn">end</span>
</code></pre></div>



<a name="196824820"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196824820" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196824820">(May 07 2020 at 20:16)</a>:</h4>
<p>my proof is shorter than kenny's <span aria-label="hole in one" class="emoji emoji-26f3" role="img" title="hole in one">:hole_in_one:</span></p>



<a name="196824861"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196824861" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196824861">(May 07 2020 at 20:16)</a>:</h4>
<p>oh</p>



<a name="196824918"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196824918" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196824918">(May 07 2020 at 20:17)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="n">with_bot</span><span class="bp">.</span><span class="n">coe_le</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="err">?</span><span class="o">}</span> <span class="o">[</span><span class="bp">_</span><span class="n">inst_1</span> <span class="o">:</span> <span class="n">partial_order</span> <span class="n">α</span><span class="o">]</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">{</span><span class="n">o</span> <span class="o">:</span> <span class="n">option</span> <span class="n">α</span><span class="o">},</span> <span class="n">b</span> <span class="err">∈</span> <span class="n">o</span> <span class="bp">→</span> <span class="o">(</span><span class="err">↑</span><span class="n">a</span> <span class="bp">≤</span> <span class="n">o</span> <span class="bp">↔</span> <span class="n">a</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">)</span>
</code></pre></div>


<p>gaargh</p>



<a name="196824959"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196824959" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196824959">(May 07 2020 at 20:17)</a>:</h4>
<p>that's not what <code>coe_le</code> is supposed to say</p>



<a name="196825078"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196825078" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196825078">(May 07 2020 at 20:18)</a>:</h4>
<p>proposition to make <code>\le</code> inductive</p>



<a name="196825143"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196825143" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196825143">(May 07 2020 at 20:19)</a>:</h4>
<p>Hopefully it goes better than when I tried to do that to <code>continuous</code>...</p>



<a name="196825470"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196825470" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196825470">(May 07 2020 at 20:22)</a>:</h4>
<p><span class="user-mention" data-user-id="110032">@Reid Barton</span>   ... <code> add_le_add_right' </code> <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span> <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span> <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="196825514"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196825514" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196825514">(May 07 2020 at 20:22)</a>:</h4>
<p>The trick is to realise that it's an <code>ordered_add_comm_monoid</code></p>



<a name="196825568"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196825568" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196825568">(May 07 2020 at 20:23)</a>:</h4>
<p>Yep Kevin ! That give property ! That good !</p>



<a name="196826643"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196826643" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196826643">(May 07 2020 at 20:33)</a>:</h4>
<p>I see. So somehow the correct way to proceed would have been to say to Lean "hey Lean, give me the complete list of instances on <code>with_bot nat</code> because I can't remember the axioms for half of them and so don't actually know if it's an ordered semigroup or even if Lean has ordered semigroups"</p>



<a name="196826737"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196826737" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196826737">(May 07 2020 at 20:34)</a>:</h4>
<p>Well, ideally <code>library_search</code> would have simply worked but probably it ran into the apply bug</p>



<a name="196826764"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196826764" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196826764">(May 07 2020 at 20:34)</a>:</h4>
<p>But otherwise, yes that would be nice to have.</p>



<a name="196827084"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196827084" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196827084">(May 07 2020 at 20:37)</a>:</h4>
<p><code> libraty_search </code> and <code>suggest </code> are nice tactic !!!</p>



<a name="196827220"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196827220" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196827220">(May 07 2020 at 20:39)</a>:</h4>
<p>"and then tell me all the lemmas which apply to that object". I see. That's what <code>library_search</code>is supposed to do?</p>



<a name="196827589"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196827589" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196827589">(May 07 2020 at 20:42)</a>:</h4>
<p>In 10 years lean will work on his own, we will just have to watch him prove theorems <span aria-label="grinning face with smiling eyes" class="emoji emoji-1f601" role="img" title="grinning face with smiling eyes">:grinning_face_with_smiling_eyes:</span></p>



<a name="196835021"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196835021" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196835021">(May 07 2020 at 21:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/116395-maths/topic/with_bot/near/196826643" title="#narrow/stream/116395-maths/topic/with_bot/near/196826643">said</a>:</p>
<blockquote>
<p>I see. So somehow the correct way to proceed would have been to say to Lean "hey Lean, give me the complete list of instances on <code>with_bot nat</code> because I can't remember the axioms for half of them and so don't actually know if it's an ordered semigroup or even if Lean has ordered semigroups"</p>
</blockquote>
<div class="codehilite"><pre><span></span><code><span class="kn">namespace</span> <span class="n">tactic</span>

<span class="n">meta</span> <span class="n">def</span> <span class="n">env_fold</span> <span class="o">{</span><span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">declaration</span> <span class="bp">→</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">tactic</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">tactic</span> <span class="n">α</span> <span class="o">:=</span>
<span class="n">get_env</span> <span class="bp">&gt;&gt;=</span> <span class="bp">λ</span> <span class="n">e</span> <span class="n">s</span><span class="o">,</span> <span class="n">e</span><span class="bp">.</span><span class="n">fold</span> <span class="o">((</span><span class="n">return</span> <span class="n">a</span> <span class="o">:</span> <span class="n">tactic</span> <span class="bp">_</span><span class="o">)</span> <span class="n">s</span><span class="o">)</span> <span class="err">$</span> <span class="bp">λ</span> <span class="n">d</span> <span class="n">t</span><span class="o">,</span>
  <span class="n">interaction_monad</span><span class="bp">.</span><span class="n">result</span><span class="bp">.</span><span class="n">cases_on</span> <span class="n">t</span> <span class="o">(</span><span class="n">f</span> <span class="n">d</span><span class="o">)</span> <span class="n">result</span><span class="bp">.</span><span class="n">exception</span>

<span class="bp">#</span><span class="kn">print</span> <span class="n">interaction_monad</span><span class="bp">.</span><span class="n">monad</span>

<span class="n">meta</span> <span class="n">def</span> <span class="n">get_all_classes</span> <span class="o">:</span> <span class="n">tactic</span> <span class="o">(</span><span class="n">list</span> <span class="n">name</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">list</span><span class="bp">.</span><span class="n">reverse</span> <span class="bp">&lt;</span><span class="err">$</span><span class="bp">&gt;</span> <span class="n">env_fold</span> <span class="o">[]</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">d</span> <span class="n">l</span><span class="o">,</span>
  <span class="n">mcond</span> <span class="o">(</span><span class="n">is_class</span> <span class="o">(</span><span class="n">expr</span><span class="bp">.</span><span class="n">const</span> <span class="n">d</span><span class="bp">.</span><span class="n">to_name</span> <span class="o">(</span><span class="n">level</span><span class="bp">.</span><span class="n">param</span> <span class="bp">&lt;</span><span class="err">$</span><span class="bp">&gt;</span> <span class="n">d</span><span class="bp">.</span><span class="n">univ_params</span><span class="o">)))</span>
    <span class="o">(</span><span class="n">return</span> <span class="o">(</span><span class="n">d</span><span class="bp">.</span><span class="n">to_name</span> <span class="bp">::</span> <span class="n">l</span><span class="o">))</span> <span class="o">(</span><span class="n">return</span> <span class="n">l</span><span class="o">))</span>

<span class="n">meta</span> <span class="n">def</span> <span class="n">list_instances</span> <span class="o">(</span><span class="n">e</span> <span class="o">:</span> <span class="n">expr</span><span class="o">)</span> <span class="o">:</span> <span class="n">tactic</span> <span class="o">(</span><span class="n">list</span> <span class="n">expr</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">get_all_classes</span> <span class="bp">&gt;&gt;=</span> <span class="n">list</span><span class="bp">.</span><span class="n">mfoldr</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span> <span class="n">l</span><span class="o">,</span>
  <span class="o">(</span><span class="n">do</span> <span class="n">e&#39;</span> <span class="err">←</span> <span class="n">mk_app</span> <span class="n">n</span> <span class="o">[</span><span class="n">e</span><span class="o">],</span>
    <span class="n">mk_instance</span> <span class="n">e&#39;</span> <span class="bp">&gt;&gt;</span> <span class="n">return</span> <span class="o">(</span><span class="n">e&#39;</span> <span class="bp">::</span> <span class="n">l</span><span class="o">))</span> <span class="bp">&lt;|&gt;</span>
  <span class="n">return</span> <span class="n">l</span><span class="o">)</span> <span class="o">[]</span> <span class="bp">.</span>

<span class="kn">open</span> <span class="n">interactive</span> <span class="n">interactive</span><span class="bp">.</span><span class="n">types</span>
<span class="n">meta</span> <span class="n">def</span> <span class="n">interactive</span><span class="bp">.</span><span class="n">list_instances</span> <span class="o">(</span><span class="n">e</span> <span class="o">:</span> <span class="n">parse</span> <span class="n">texpr</span><span class="o">)</span> <span class="o">:</span> <span class="n">tactic</span> <span class="n">unit</span> <span class="o">:=</span>
<span class="n">to_expr</span> <span class="n">e</span> <span class="bp">&gt;&gt;=</span> <span class="n">list_instances</span> <span class="bp">&gt;&gt;=</span> <span class="n">list</span><span class="bp">.</span><span class="n">mmap&#39;</span> <span class="n">trace</span>

<span class="n">run_cmd</span> <span class="n">list_instances</span> <span class="bp">`</span><span class="o">(</span><span class="bp">ℕ</span><span class="o">)</span> <span class="bp">&gt;&gt;=</span> <span class="n">trace</span>

<span class="kn">example</span> <span class="o">:</span> <span class="n">true</span> <span class="o">:=</span> <span class="k">by</span> <span class="o">{</span><span class="n">list_instances</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="n">trivial</span><span class="o">}</span>

<span class="kn">end</span> <span class="n">tactic</span>
</code></pre></div>



<a name="196835028"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196835028" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196835028">(May 07 2020 at 21:52)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="n">add_semigroup</span> <span class="bp">ℕ</span>
<span class="n">has_sub</span> <span class="bp">ℕ</span>
<span class="n">inhabited</span> <span class="bp">ℕ</span>
<span class="n">add_monoid</span> <span class="bp">ℕ</span>
<span class="n">has_well_founded</span> <span class="bp">ℕ</span>
<span class="n">semigroup</span> <span class="bp">ℕ</span>
<span class="n">has_lt</span> <span class="bp">ℕ</span>
<span class="n">has_to_tactic_format</span> <span class="bp">ℕ</span>
<span class="n">decidable_linear_ordered_cancel_add_comm_monoid</span> <span class="bp">ℕ</span>
<span class="n">has_to_format</span> <span class="bp">ℕ</span>
<span class="n">has_one</span> <span class="bp">ℕ</span>
<span class="n">monoid</span> <span class="bp">ℕ</span>
<span class="n">preorder</span> <span class="bp">ℕ</span>
<span class="n">add_comm_monoid</span> <span class="bp">ℕ</span>
<span class="n">add_comm_semigroup</span> <span class="bp">ℕ</span>
<span class="n">has_zero</span> <span class="bp">ℕ</span>
<span class="n">has_mod</span> <span class="bp">ℕ</span>
<span class="n">comm_semigroup</span> <span class="bp">ℕ</span>
<span class="n">zero_ne_one_class</span> <span class="bp">ℕ</span>
<span class="n">has_sizeof</span> <span class="bp">ℕ</span>
<span class="n">reflected</span> <span class="bp">ℕ</span>
<span class="n">has_le</span> <span class="bp">ℕ</span>
<span class="n">has_repr</span> <span class="bp">ℕ</span>
<span class="n">comm_monoid</span> <span class="bp">ℕ</span>
<span class="n">nonempty</span> <span class="bp">ℕ</span>
<span class="n">linear_order</span> <span class="bp">ℕ</span>
<span class="n">distrib</span> <span class="bp">ℕ</span>
<span class="n">has_to_string</span> <span class="bp">ℕ</span>
<span class="n">add_right_cancel_semigroup</span> <span class="bp">ℕ</span>
<span class="n">ordered_semiring</span> <span class="bp">ℕ</span>
<span class="n">decidable_linear_order</span> <span class="bp">ℕ</span>
<span class="n">has_add</span> <span class="bp">ℕ</span>
<span class="n">mul_zero_class</span> <span class="bp">ℕ</span>
<span class="n">has_dvd</span> <span class="bp">ℕ</span>
<span class="n">semiring</span> <span class="bp">ℕ</span>
<span class="n">has_mul</span> <span class="bp">ℕ</span>
<span class="n">has_div</span> <span class="bp">ℕ</span>
<span class="n">add_left_cancel_semigroup</span> <span class="bp">ℕ</span>
<span class="n">decidable_linear_ordered_semiring</span> <span class="bp">ℕ</span>
<span class="n">linear_ordered_semiring</span> <span class="bp">ℕ</span>
<span class="n">ordered_cancel_add_comm_monoid</span> <span class="bp">ℕ</span>
<span class="n">comm_semiring</span> <span class="bp">ℕ</span>
<span class="n">partial_order</span> <span class="bp">ℕ</span>
</code></pre></div>



<a name="196835270"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196835270" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196835270">(May 07 2020 at 21:55)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">example</span> <span class="o">:</span> <span class="n">true</span> <span class="o">:=</span> <span class="k">by</span> <span class="o">{</span><span class="n">list_instances</span> <span class="o">(</span><span class="n">with_bot</span> <span class="bp">ℕ</span><span class="o">),</span> <span class="n">trivial</span><span class="o">}</span>
<span class="c1">-- add_semigroup (with_bot ℕ)</span>
<span class="c1">-- inhabited (with_bot ℕ)</span>
<span class="c1">-- semilattice_sup_bot (with_bot ℕ)</span>
<span class="c1">-- add_monoid (with_bot ℕ)</span>
<span class="c1">-- has_well_founded (with_bot ℕ)</span>
<span class="c1">-- has_lt (with_bot ℕ)</span>
<span class="c1">-- has_to_tactic_format (with_bot ℕ)</span>
<span class="c1">-- lattice (with_bot ℕ)</span>
<span class="c1">-- has_sup (with_bot ℕ)</span>
<span class="c1">-- ordered_add_comm_monoid (with_bot ℕ)</span>
<span class="c1">-- has_to_format (with_bot ℕ)</span>
<span class="c1">-- has_one (with_bot ℕ)</span>
<span class="c1">-- distrib_lattice (with_bot ℕ)</span>
<span class="c1">-- preorder (with_bot ℕ)</span>
<span class="c1">-- add_comm_monoid (with_bot ℕ)</span>
<span class="c1">-- add_comm_semigroup (with_bot ℕ)</span>
<span class="c1">-- has_zero (with_bot ℕ)</span>
<span class="c1">-- has_bot (with_bot ℕ)</span>
<span class="c1">-- has_sizeof (with_bot ℕ)</span>
<span class="c1">-- semilattice_inf (with_bot ℕ)</span>
<span class="c1">-- reflected (with_bot ℕ)</span>
<span class="c1">-- has_le (with_bot ℕ)</span>
<span class="c1">-- nonempty (with_bot ℕ)</span>
<span class="c1">-- linear_order (with_bot ℕ)</span>
<span class="c1">-- decidable_linear_order (with_bot ℕ)</span>
<span class="c1">-- semilattice_inf_bot (with_bot ℕ)</span>
<span class="c1">-- has_add (with_bot ℕ)</span>
<span class="c1">-- semilattice_sup (with_bot ℕ)</span>
<span class="c1">-- has_inf (with_bot ℕ)</span>
<span class="c1">-- order_bot (with_bot ℕ)</span>
<span class="c1">-- partial_order (with_bot ℕ)</span>
</code></pre></div>



<a name="196840461"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196840461" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196840461">(May 07 2020 at 22:54)</a>:</h4>
<p>Oh this was the thing that was called ordered_comm_monoid which confused the perfectoid project? How come there's no ordered_monoid?</p>



<a name="196855342"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196855342" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196855342">(May 08 2020 at 03:48)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> In mathlib/core what used to be called an <code>ordered_monoid</code> is now called <code>ordered_add_monoid</code>. Once <code>norm_num</code> is out of core, we can refactor everything and also have (multiplicative) <code>ordered_monoid</code>s.<br>
Of course we could have them now, but not with all the nice <code>to_additive</code> machinery. That's why the <code>norm_num</code> PR is important.</p>



<a name="196855434"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196855434" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196855434">(May 08 2020 at 03:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110032">Reid Barton</span> <a href="#narrow/stream/116395-maths/topic/with_bot/near/196824707" title="#narrow/stream/116395-maths/topic/with_bot/near/196824707">said</a>:</p>
<blockquote>
<p>It's annoying how hard it is to find instances.</p>
</blockquote>
<p>With the new widget stuff by <span class="user-mention" data-user-id="121918">@Edward Ayers</span> this will hopefully be a lot easier soon. It's really ironic that the goal window has all this information (in principle), but is only showing us a really nice <code>pp</code> version. And if you ask for the raw stuff, that's what you get. A brutal flood of <span aria-label="poop" class="emoji emoji-1f4a9" role="img" title="poop">:poop:</span>  (-;</p>
<p>Anyway, in the mean time: what about a command <code>#find_instance</code> that just like <code>#simp</code> uses variables that have been declared in the context, so that you can do things like</p>
<div class="codehilite"><pre><span></span><code><span class="bp">#</span><span class="n">find_instance</span> <span class="o">:</span> <span class="n">add_comm_monoid</span> <span class="o">(</span><span class="n">with_bot</span> <span class="n">nat</span><span class="o">)</span>

<span class="kn">variables</span> <span class="o">(</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">X</span><span class="o">]</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">Y</span><span class="o">]</span>

<span class="bp">#</span><span class="n">find_instance</span> <span class="o">:</span> <span class="n">fintype</span> <span class="o">(</span><span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">)</span>
</code></pre></div>


<p>etc...</p>



<a name="196960343"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196960343" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196960343">(May 08 2020 at 23:05)</a>:</h4>
<p>Hello, just to understand the mecanism of coersion. Is there is a quick way to do that ? </p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">cast_bot&#39;</span>   <span class="o">(</span><span class="n">a</span>  <span class="o">:</span> <span class="bp">ℕ</span> <span class="o">)</span> <span class="o">:</span>  <span class="n">nat</span><span class="bp">.</span><span class="n">cast</span> <span class="o">(</span><span class="n">a</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span> <span class="n">a</span><span class="o">:</span> <span class="n">with_bot</span> <span class="bp">ℕ</span> <span class="o">)</span> <span class="o">:=</span>   <span class="err">???</span>
</code></pre></div>



<a name="196961450"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196961450" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196961450">(May 08 2020 at 23:24)</a>:</h4>
<p>If you had used the notation for <code>nat.cast</code> I think <code>simp</code> would solve it. Otherwise, I think it would have to be done by induction on <code>a</code> if it isn't in the library.</p>



<a name="196961546"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196961546" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196961546">(May 08 2020 at 23:26)</a>:</h4>
<p>There's two coercion from nat to <code>with_bot nat</code>, and you should usually just use the higher priority <code>with_bot</code> coercion. Most of the necessary lemmas are in the <code>with_bot</code> namespace.</p>



<a name="196963421"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196963421" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196963421">(May 09 2020 at 00:04)</a>:</h4>
<p>Ok for the two coersion, so the definition is <code> with_bot</code> not <code>nat.cast </code> !    Thx !</p>



<a name="196978005"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196978005" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196978005">(May 09 2020 at 07:16)</a>:</h4>
<p>I think the trick is to find out which one is used in the library and then to always use that one, and to always use it in the exact syntactic form which is in the library, because if you don't then <code>simp</code> will not work</p>



<a name="196978641"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196978641" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196978641">(May 09 2020 at 07:37)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span>  : In theory, i understand ! But i practice i have some difficulty  for example at the last proof  i can't finish the proof without a conversion  <code> int.cast vs bot_cast </code>.  </p>
<p>The tactic state before <code> cast_with_bot </code> is </p>
<div class="codehilite"><pre><span></span><code><span class="mi">1</span> <span class="n">goal</span>
<span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="bp">_</span><span class="n">inst_1</span> <span class="o">:</span> <span class="n">nonzero_comm_ring</span> <span class="n">R</span><span class="o">,</span>
<span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">,</span>
<span class="bp">_</span><span class="n">inst_2</span> <span class="o">:</span> <span class="n">fintype</span> <span class="n">A</span><span class="o">,</span>
<span class="bp">_</span><span class="n">inst_3</span> <span class="o">:</span> <span class="n">decidable_eq</span> <span class="n">A</span><span class="o">,</span>
<span class="n">s</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">A</span><span class="o">,</span>
<span class="n">φ</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">polynomial</span> <span class="n">R</span><span class="o">,</span>
<span class="n">hyp</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">ℓ</span> <span class="o">:</span> <span class="n">A</span><span class="o">),</span> <span class="n">degree</span> <span class="o">(</span><span class="n">φ</span> <span class="n">ℓ</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">1</span><span class="o">,</span>
<span class="n">hyp_lc</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">ℓ</span> <span class="o">:</span> <span class="n">A</span><span class="o">),</span> <span class="n">monic</span> <span class="o">(</span><span class="n">φ</span> <span class="n">ℓ</span><span class="o">),</span>
<span class="err">⊢</span> <span class="err">↑</span><span class="o">(</span><span class="n">card</span> <span class="n">s</span><span class="o">)</span> <span class="bp">=</span> <span class="err">↑</span><span class="o">(</span><span class="n">card</span> <span class="n">s</span><span class="o">)</span>   <span class="c1">----- AHHAHAHAHAHAHAHAH  :upside_down:</span>
</code></pre></div>


<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">polynomial</span>
<span class="kn">open</span> <span class="n">finset</span> <span class="n">polynomial</span> <span class="n">with_bot</span>
<span class="n">universes</span> <span class="n">u</span> <span class="n">v</span>
<span class="kn">variables</span>
          <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}[</span><span class="n">nonzero_comm_ring</span> <span class="n">R</span><span class="o">]</span>
          <span class="o">{</span><span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">}</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">A</span><span class="o">][</span><span class="n">decidable_eq</span> <span class="n">A</span><span class="o">]</span>
<span class="kn">lemma</span> <span class="n">prod_monic</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">A</span><span class="o">)(</span><span class="n">φ</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">polynomial</span> <span class="n">R</span><span class="o">)</span>  <span class="o">(</span><span class="n">hyp</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span> <span class="o">:</span> <span class="n">A</span><span class="o">,</span> <span class="n">monic</span> <span class="o">(</span><span class="n">φ</span> <span class="n">a</span><span class="o">))</span> <span class="o">:</span>
                <span class="n">monic</span> <span class="o">(</span><span class="n">finset</span><span class="bp">.</span><span class="n">prod</span> <span class="n">s</span>  <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span> <span class="o">:</span> <span class="n">A</span><span class="o">,</span> <span class="n">φ</span> <span class="n">x</span><span class="o">))</span>  <span class="o">:=</span>
 <span class="k">begin</span>
    <span class="n">apply</span> <span class="o">(</span><span class="n">finset</span><span class="bp">.</span><span class="n">induction_on</span> <span class="n">s</span><span class="o">),</span> <span class="o">{</span>
      <span class="n">erw</span> <span class="n">prod_empty</span> <span class="n">at</span>  <span class="bp">*</span><span class="o">,</span>
      <span class="n">exact</span> <span class="n">leading_coeff_C</span> <span class="bp">_</span><span class="o">,</span>
    <span class="o">},</span>
    <span class="o">{</span>
        <span class="n">intros</span> <span class="n">ℓ</span>  <span class="n">s</span> <span class="n">hyp&#39;</span> <span class="n">hyp_rec</span><span class="o">,</span>
        <span class="n">rw</span> <span class="n">finset</span><span class="bp">.</span><span class="n">prod_insert</span> <span class="o">(</span><span class="k">by</span> <span class="n">assumption</span><span class="o">),</span>
       <span class="n">exact</span> <span class="n">monic_mul</span> <span class="o">(</span><span class="n">hyp</span> <span class="n">ℓ</span><span class="o">)</span>  <span class="n">hyp_rec</span><span class="o">,</span>
    <span class="o">},</span>
 <span class="kn">end</span>
<span class="kn">lemma</span> <span class="n">degree_prod_monic</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">A</span><span class="o">)(</span><span class="n">φ</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">polynomial</span> <span class="n">R</span><span class="o">)</span>
<span class="o">(</span><span class="n">hyp_lc</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">ℓ</span> <span class="o">:</span> <span class="n">A</span><span class="o">,</span> <span class="n">monic</span> <span class="o">(</span><span class="n">φ</span> <span class="n">ℓ</span> <span class="o">))</span> <span class="o">:</span>
  <span class="n">degree</span> <span class="o">(</span><span class="n">finset</span><span class="bp">.</span><span class="n">prod</span> <span class="n">s</span>  <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span> <span class="o">:</span> <span class="n">A</span><span class="o">,</span> <span class="n">φ</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>  <span class="n">finset</span><span class="bp">.</span><span class="n">sum</span> <span class="n">s</span> <span class="o">(</span> <span class="bp">λ</span> <span class="n">x</span> <span class="o">:</span> <span class="n">A</span><span class="o">,</span> <span class="n">degree</span> <span class="o">(</span><span class="n">φ</span> <span class="n">x</span><span class="o">))</span> <span class="o">:=</span>
  <span class="k">begin</span>
        <span class="n">apply</span> <span class="o">(</span><span class="n">finset</span><span class="bp">.</span><span class="n">induction_on</span> <span class="n">s</span><span class="o">),</span> <span class="o">{</span>
          <span class="n">rw</span> <span class="n">prod_empty</span><span class="o">,</span>
          <span class="n">exact</span> <span class="n">degree_C</span> <span class="o">(</span><span class="n">one_ne_zero</span><span class="o">),</span>
    <span class="o">},</span>
    <span class="o">{</span>
        <span class="n">intros</span> <span class="n">ℓ</span>  <span class="n">s</span> <span class="n">hyp&#39;</span> <span class="n">hyp_rec</span><span class="o">,</span>
        <span class="n">rw</span> <span class="n">finset</span><span class="bp">.</span><span class="n">prod_insert</span> <span class="o">(</span><span class="k">by</span> <span class="n">assumption</span><span class="o">),</span>
        <span class="n">rw</span> <span class="n">finset</span><span class="bp">.</span><span class="n">sum_insert</span> <span class="o">(</span><span class="k">by</span> <span class="n">assumption</span><span class="o">),</span>
        <span class="n">rw</span> <span class="err">←</span> <span class="n">hyp_rec</span><span class="o">,</span>
        <span class="n">apply</span> <span class="n">degree_mul_eq&#39;</span><span class="o">,</span>
        <span class="n">conv_lhs</span> <span class="o">{</span>
            <span class="n">rw</span>  <span class="n">monic</span><span class="bp">.</span><span class="n">def</span><span class="bp">.</span><span class="n">mp</span> <span class="o">(</span><span class="n">hyp_lc</span> <span class="n">ℓ</span><span class="o">),</span> <span class="n">rw</span> <span class="n">one_mul</span><span class="o">,</span>
            <span class="n">rw</span>  <span class="n">monic</span><span class="bp">.</span><span class="n">def</span><span class="bp">.</span><span class="n">mp</span> <span class="o">(</span><span class="n">prod_monic</span> <span class="n">s</span> <span class="n">φ</span> <span class="n">hyp_lc</span><span class="o">),</span>
        <span class="o">},</span>
        <span class="n">exact</span> <span class="n">one_ne_zero</span><span class="o">,</span>
    <span class="o">},</span>
  <span class="kn">end</span>

<span class="kn">theorem</span> <span class="n">cast_with_bot</span>   <span class="o">(</span><span class="n">a</span>  <span class="o">:</span> <span class="bp">ℕ</span> <span class="o">)</span> <span class="o">:</span>  <span class="n">nat</span><span class="bp">.</span><span class="n">cast</span> <span class="o">(</span><span class="n">a</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">a</span><span class="o">:</span> <span class="n">with_bot</span> <span class="bp">ℕ</span> <span class="o">)</span> <span class="o">:=</span> <span class="k">begin</span>
    <span class="n">apply</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">rec_on</span> <span class="n">a</span><span class="o">),</span>  <span class="o">{</span>
        <span class="n">exact</span> <span class="n">rfl</span><span class="o">,</span>
    <span class="o">},</span>
    <span class="n">intros</span> <span class="n">ℓ</span>  <span class="n">hyp_rec</span><span class="o">,</span>
    <span class="n">change</span> <span class="bp">_</span> <span class="bp">=</span> <span class="err">↑</span><span class="n">ℓ</span> <span class="bp">+</span> <span class="err">↑</span><span class="mi">1</span><span class="o">,</span>
    <span class="n">erw</span> <span class="err">←</span> <span class="n">hyp_rec</span><span class="o">,</span> <span class="n">exact</span> <span class="n">rfl</span><span class="o">,</span>
<span class="kn">end</span>
<span class="kn">lemma</span> <span class="n">coeff_prod_nat&#39;</span>  <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">A</span><span class="o">)(</span><span class="n">φ</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">polynomial</span> <span class="n">R</span><span class="o">)(</span><span class="n">hyp</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">ℓ</span> <span class="o">:</span> <span class="n">A</span><span class="o">,</span> <span class="n">degree</span><span class="o">(</span><span class="n">φ</span> <span class="n">ℓ</span> <span class="o">)</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">)</span>
<span class="o">(</span><span class="n">hyp_lc</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">ℓ</span> <span class="o">:</span> <span class="n">A</span><span class="o">,</span> <span class="n">monic</span><span class="o">(</span><span class="n">φ</span> <span class="n">ℓ</span><span class="o">)</span> <span class="o">)</span> <span class="o">:</span>   <span class="c1">-- monic !</span>
  <span class="n">degree</span> <span class="o">(</span><span class="n">finset</span><span class="bp">.</span><span class="n">prod</span> <span class="n">s</span>  <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span> <span class="o">:</span> <span class="n">A</span><span class="o">,</span> <span class="n">φ</span> <span class="n">x</span><span class="o">))</span> <span class="bp">=</span>  <span class="n">card</span> <span class="n">s</span> <span class="o">:=</span>
 <span class="k">begin</span>
    <span class="n">rw</span> <span class="n">degree_prod_monic</span> <span class="n">s</span> <span class="n">φ</span>  <span class="n">hyp_lc</span><span class="o">,</span>
    <span class="n">conv_lhs</span><span class="o">{</span>
        <span class="n">apply_congr</span><span class="o">,</span> <span class="n">skip</span><span class="o">,</span>
        <span class="n">rw</span> <span class="n">hyp</span> <span class="n">x</span><span class="o">,</span>
    <span class="o">},</span>
    <span class="n">rw</span> <span class="n">finset</span><span class="bp">.</span><span class="n">sum_const</span><span class="o">,</span>  <span class="n">rw</span> <span class="n">add_monoid</span><span class="bp">.</span><span class="n">smul_one</span><span class="o">,</span>
                                            <span class="c1">---- here i have to use nat.cast = with_bot coe  HERE</span>
      <span class="n">refine</span> <span class="n">cast_with_bot</span>  <span class="bp">_</span> <span class="o">,</span>
<span class="kn">end</span>
</code></pre></div>



<a name="196978749"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196978749" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196978749">(May 09 2020 at 07:40)</a>:</h4>
<p>Maybe sometimes it is unavoidable?</p>



<a name="196978788"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196978788" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196978788">(May 09 2020 at 07:41)</a>:</h4>
<p>Maybe there is a missing <code>simp</code> lemma though?</p>



<a name="196978842"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196978842" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196978842">(May 09 2020 at 07:42)</a>:</h4>
<p>I am not an expert in <code>simp</code> but maybe one should expect <code>norm_cast</code> to solve this. Unfortunately I just regard <code>norm_cast</code> as magic</p>



<a name="196978847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196978847" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196978847">(May 09 2020 at 07:43)</a>:</h4>
<p>i try all the <code> simp hint library_search and suggest </code>  before understanding that the first coersion is <code>nat.cast</code> and the second <code>bot_cast </code></p>



<a name="196978858"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196978858" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196978858">(May 09 2020 at 07:43)</a>:</h4>
<p>So I don't know whether <code>norm_cast</code> should be taught to solve this or whether it is not its job</p>



<a name="196978860"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196978860" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196978860">(May 09 2020 at 07:43)</a>:</h4>
<p><code> hint </code> give me a command<code>unfold_coes </code> <span aria-label="grinning face with smiling eyes" class="emoji emoji-1f601" role="img" title="grinning face with smiling eyes">:grinning_face_with_smiling_eyes:</span></p>



<a name="196978862"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196978862" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196978862">(May 09 2020 at 07:43)</a>:</h4>
<p>there should be a theorem that says they are the same</p>



<a name="196978903"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196978903" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196978903">(May 09 2020 at 07:44)</a>:</h4>
<p>But should the user be required to know its name?</p>



<a name="196978908"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196978908" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196978908">(May 09 2020 at 07:44)</a>:</h4>
<p>first the theorem, then the fancy</p>



<a name="196978911"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196978911" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196978911">(May 09 2020 at 07:44)</a>:</h4>
<p>Because I am always confused about whether it's cast or coe, and which namespace it's in</p>



<a name="196978912"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196978912" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196978912">(May 09 2020 at 07:44)</a>:</h4>
<p>are we sure the theorem even exists?</p>



<a name="196978922"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196978922" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196978922">(May 09 2020 at 07:45)</a>:</h4>
<p>because if it doesn't I won't expect the tactics to find the proof</p>



<a name="196978933"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196978933" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196978933">(May 09 2020 at 07:45)</a>:</h4>
<p>I don't know enough about <code>simp</code> to know how to even state the lemma</p>



<a name="196978988"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196978988" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196978988">(May 09 2020 at 07:46)</a>:</h4>
<p>I don't know exactly what the lemma is here, something about with_bot?</p>



<a name="196978989"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196978989" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196978989">(May 09 2020 at 07:46)</a>:</h4>
<p>i don't see  <code> nat.coe = bot_coe </code> theorem in mathlib</p>



<a name="196978994"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196978994" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196978994">(May 09 2020 at 07:47)</a>:</h4>
<p>does that even typecheck?</p>



<a name="196978996"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196978996" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196978996">(May 09 2020 at 07:47)</a>:</h4>
<p>This is all part of the CS machinery which I don't have much of an understanding of. I am not even 100% sure that <code>norm_cast</code> should do it, but I guess that would be my instinct</p>



<a name="196978997"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196978997" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196978997">(May 09 2020 at 07:47)</a>:</h4>
<p>what are the types</p>



<a name="196979000"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196979000" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196979000">(May 09 2020 at 07:47)</a>:</h4>
<p>And I wouldn't know how to make it do it if it didn't</p>



<a name="196979004"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196979004" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196979004">(May 09 2020 at 07:47)</a>:</h4>
<p>there is a mathematical part of this to be dealt with before the tactics can take over</p>



<a name="196979007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196979007" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196979007">(May 09 2020 at 07:48)</a>:</h4>
<p>This is ok </p>
<div class="codehilite"><pre><span></span><code><span class="kn">theorem</span> <span class="n">cast_with_bot</span>   <span class="o">(</span><span class="n">a</span>  <span class="o">:</span> <span class="bp">ℕ</span> <span class="o">)</span> <span class="o">:</span>  <span class="n">nat</span><span class="bp">.</span><span class="n">cast</span> <span class="o">(</span><span class="n">a</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">a</span><span class="o">:</span> <span class="n">with_bot</span> <span class="bp">ℕ</span> <span class="o">)</span> <span class="o">:=</span> <span class="k">begin</span>
    <span class="n">apply</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">rec_on</span> <span class="n">a</span><span class="o">),</span>  <span class="o">{</span>
        <span class="n">exact</span> <span class="n">rfl</span><span class="o">,</span>
    <span class="o">},</span>
    <span class="n">intros</span> <span class="n">ℓ</span>  <span class="n">hyp_rec</span><span class="o">,</span>
    <span class="n">change</span> <span class="bp">_</span> <span class="bp">=</span> <span class="err">↑</span><span class="n">ℓ</span> <span class="bp">+</span> <span class="err">↑</span><span class="mi">1</span><span class="o">,</span>
    <span class="n">erw</span> <span class="err">←</span> <span class="n">hyp_rec</span><span class="o">,</span> <span class="n">exact</span> <span class="n">rfl</span><span class="o">,</span>
<span class="kn">end</span>
</code></pre></div>



<a name="196979045"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196979045" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196979045">(May 09 2020 at 07:48)</a>:</h4>
<p>just over nat though?</p>



<a name="196980139"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196980139" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196980139">(May 09 2020 at 08:17)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/2636" title="https://github.com/leanprover-community/mathlib/issues/2636">#2636</a></p>



<a name="196980196"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/196980196" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#196980196">(May 09 2020 at 08:18)</a>:</h4>
<p>It's apparently not eligible for any kind of <code>*_cast</code> tactic, but it can be a simp lemma</p>



<a name="197004119"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/197004119" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#197004119">(May 09 2020 at 18:07)</a>:</h4>
<p>Youppi : i finish the first part of <a href="https://github.com/Or7ando/group_representation/tree/master/caracteristique_pol" title="https://github.com/Or7ando/group_representation/tree/master/caracteristique_pol">caracteristic polynomial</a>  <span aria-label="grinning face with smiling eyes" class="emoji emoji-1f601" role="img" title="grinning face with smiling eyes">:grinning_face_with_smiling_eyes:</span></p>
<div class="codehilite"><pre><span></span><code> <span class="kn">theorem</span>  <span class="o">(</span><span class="n">hyp</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">fintype</span><span class="bp">.</span><span class="n">card</span> <span class="n">A</span>  <span class="o">):</span>  <span class="bp">∀</span> <span class="n">M</span> <span class="o">:</span> <span class="n">matrix</span> <span class="n">A</span> <span class="n">A</span> <span class="n">ℂ</span> <span class="o">,</span>  <span class="bp">∃</span> <span class="n">t</span> <span class="o">:</span> <span class="n">ℂ</span><span class="o">,</span> <span class="n">det</span> <span class="o">(</span> <span class="n">M</span> <span class="bp">+</span> <span class="n">t</span> <span class="err">•</span><span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">matrix</span> <span class="n">A</span> <span class="n">A</span> <span class="n">ℂ</span> <span class="o">))</span> <span class="bp">=</span> <span class="mi">0</span>
</code></pre></div>



<a name="197004186"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/197004186" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#197004186">(May 09 2020 at 18:08)</a>:</h4>
<p>Congratulations!</p>



<a name="197004209"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/197004209" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#197004209">(May 09 2020 at 18:08)</a>:</h4>
<p>So now we know that eigenvalues exist (-;</p>



<a name="197004226"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/197004226" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#197004226">(May 09 2020 at 18:09)</a>:</h4>
<p>What is the determinant of a 0x0 matrix?</p>



<a name="197004267"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/197004267" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#197004267">(May 09 2020 at 18:09)</a>:</h4>
<p>I guess it's 1</p>



<a name="197004358"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/197004358" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#197004358">(May 09 2020 at 18:10)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/116395-maths/topic/with_bot/near/197004209" title="#narrow/stream/116395-maths/topic/with_bot/near/197004209">said</a>:</p>
<blockquote>
<p>So now we know that eigenvalues exist (-;</p>
</blockquote>
<p>we don't know that C is alg. closed</p>



<a name="197004365"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/197004365" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#197004365">(May 09 2020 at 18:10)</a>:</h4>
<p>We do</p>



<a name="197004377"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/197004377" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#197004377">(May 09 2020 at 18:10)</a>:</h4>
<p>Chris did that ages ago</p>



<a name="197004378"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/197004378" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#197004378">(May 09 2020 at 18:10)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/116395-maths/topic/with_bot/near/197004267" title="#narrow/stream/116395-maths/topic/with_bot/near/197004267">said</a>:</p>
<blockquote>
<p>I guess it's 1</p>
</blockquote>
<p>yes</p>



<a name="197004385"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/197004385" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#197004385">(May 09 2020 at 18:11)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/116395-maths/topic/with_bot/near/197004377" title="#narrow/stream/116395-maths/topic/with_bot/near/197004377">said</a>:</p>
<blockquote>
<p>Chris did that ages ago</p>
</blockquote>
<p>wait what</p>



<a name="197004409"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/197004409" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#197004409">(May 09 2020 at 18:11)</a>:</h4>
<p>We don't have algebraic closures, but we do know what an algebraically closed field is</p>



<a name="197004421"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/197004421" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#197004421">(May 09 2020 at 18:11)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span>   hum : it's a sum over the permutation of empty set ... so  a sum with one term ! so it's one  i think !</p>



<a name="197004427"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/197004427" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#197004427">(May 09 2020 at 18:11)</a>:</h4>
<p>Maybe we don't have a type class <code>[algebraically_closed K]</code>, but we have FTA</p>



<a name="197004470"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/197004470" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#197004470">(May 09 2020 at 18:12)</a>:</h4>
<p><span class="user-mention" data-user-id="270476">@orlando</span> Does your proof work for arbitrary alg closed fields?</p>



<a name="197004476"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/197004476" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#197004476">(May 09 2020 at 18:12)</a>:</h4>
<p>If so, we quickly need to add that typeclass</p>



<a name="197004508"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/197004508" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#197004508">(May 09 2020 at 18:13)</a>:</h4>
<p>The theorem FTA i s in the file : The theorem  is in the file  <code> analysis.complex.polynomial </code></p>



<a name="197004587"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/197004587" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#197004587">(May 09 2020 at 18:14)</a>:</h4>
<p>Yes a think it's ok  for all algebraicly closed field</p>



<a name="197004598"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/197004598" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#197004598">(May 09 2020 at 18:14)</a>:</h4>
<p>what was the proof?</p>



<a name="197004611"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/197004611" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#197004611">(May 09 2020 at 18:14)</a>:</h4>
<p>Of what?</p>



<a name="197004620"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/197004620" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#197004620">(May 09 2020 at 18:14)</a>:</h4>
<p><span class="user-mention" data-user-id="270476">@orlando</span> Are you planning to PR this?</p>



<a name="197004671"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/197004671" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#197004671">(May 09 2020 at 18:15)</a>:</h4>
<p>of FTA</p>



<a name="197004687"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/197004687" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#197004687">(May 09 2020 at 18:15)</a>:</h4>
<p><span class="user-mention" data-user-id="110044">@Chris Hughes</span> <span aria-label="up" class="emoji emoji-2b06" role="img" title="up">:up:</span></p>



<a name="197004712"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/197004712" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#197004712">(May 09 2020 at 18:16)</a>:</h4>
<p>Congratulations!!</p>



<a name="197004797"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/197004797" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#197004797">(May 09 2020 at 18:17)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span>  : i have to simplify ! It's very complicated with the sum and the product of the determinant.  </p>
<p>Thx <span class="user-mention" data-user-id="246273">@Bhavik Mehta</span>  <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span></p>



<a name="197004798"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/197004798" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Chris Hughes <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#197004798">(May 09 2020 at 18:17)</a>:</h4>
<p>I think there's even a link to the proof I used in the file. I did it well over a year ago.</p>



<a name="197004804"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/197004804" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#197004804">(May 09 2020 at 18:17)</a>:</h4>
<p>yeah you linked to <a href="https://ncatlab.org/nlab/show/fundamental+theorem+of+algebra#classical_fta_via_advanced_calculus" title="https://ncatlab.org/nlab/show/fundamental+theorem+of+algebra#classical_fta_via_advanced_calculus">https://ncatlab.org/nlab/show/fundamental+theorem+of+algebra#classical_fta_via_advanced_calculus</a></p>



<a name="197004824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/197004824" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#197004824">(May 09 2020 at 18:17)</a>:</h4>
<p>aha, you proof the open mapping theorem specifically for polynomials</p>



<a name="197004866"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/197004866" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#197004866">(May 09 2020 at 18:18)</a>:</h4>
<p>which does not require complex analysis</p>



<a name="197004870"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/197004870" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#197004870">(May 09 2020 at 18:18)</a>:</h4>
<p>therefore the minimum (which exists by O analysis) must be 0</p>



<a name="197005126"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/197005126" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#197005126">(May 09 2020 at 18:22)</a>:</h4>
<p><span class="user-mention" data-user-id="270476">@orlando</span> I strongly encourage you to PR this</p>



<a name="197005292"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/197005292" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#197005292">(May 09 2020 at 18:25)</a>:</h4>
<p><code>theorem jenesaispas</code>, nice (-;<br>
It will need some cleaning up and unfrenchyfying <span aria-label="rofl" class="emoji emoji-1f923" role="img" title="rofl">:rofl:</span></p>



<a name="197005765"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/197005765" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#197005765">(May 09 2020 at 18:34)</a>:</h4>
<p>Shouldn't that be <code>theorem je_ne_sais_pas</code>?</p>



<a name="197005788"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/197005788" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#197005788">(May 09 2020 at 18:35)</a>:</h4>
<p>Je ne sais pas...</p>



<a name="197005914"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/197005914" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#197005914">(May 09 2020 at 18:39)</a>:</h4>
<p>I have no idea of  name at the end <span aria-label="joy" class="emoji emoji-1f602" role="img" title="joy">:joy:</span></p>



<a name="197011223"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/197011223" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#197011223">(May 09 2020 at 20:28)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/116395-maths/topic/with_bot/near/197004209" title="#narrow/stream/116395-maths/topic/with_bot/near/197004209">said</a>:</p>
<blockquote>
<p>So now we know that eigenvalues exist (-;</p>
</blockquote>
<p>Isn't it sad to use determinants for that?</p>



<a name="197011285"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/197011285" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#197011285">(May 09 2020 at 20:29)</a>:</h4>
<p>Congratulations to Orlando anway!</p>



<a name="197011399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/197011399" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#197011399">(May 09 2020 at 20:30)</a>:</h4>
<p>Now you can start a very important part of your initiation to Lean. Turning this mess into a merged mathlib PR will teach you at least as much Lean as what you learned up to now.</p>



<a name="197012015"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/197012015" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#197012015">(May 09 2020 at 20:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110031">Patrick Massot</span> <a href="#narrow/stream/116395-maths/topic/with_bot/near/197011399" title="#narrow/stream/116395-maths/topic/with_bot/near/197011399">said</a>:</p>
<blockquote>
<p>Now you can start a very important part of your initiation to Lean. Turning this mess into a merged mathlib PR will teach you at least as much Lean as what you learned up to now.</p>
</blockquote>
<p>I couldn't agree with this more!</p>



<a name="197013154"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/197013154" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#197013154">(May 09 2020 at 21:13)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span>  : There is a long way to go to understand lean and mathlib. I have been using lean for two months and even if I have made progress, I am not really comfortable with it! Always a feeling of not understanding how it works. But that fun and i have time <span aria-label="grinning face with smiling eyes" class="emoji emoji-1f601" role="img" title="grinning face with smiling eyes">:grinning_face_with_smiling_eyes:</span></p>



<a name="197016159"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_bot/near/197016159" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_bot.html#197016159">(May 09 2020 at 22:06)</a>:</h4>
<p>My first PR was the complex numbers and it got changed a huge amount before it was accepted. It's a very interesting experience!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>