---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/Locally.20convex.20spaces.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Locally.20convex.20spaces.html">Locally convex spaces</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="263476089"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Locally%20convex%20spaces/near/263476089" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Locally.20convex.20spaces.html#263476089">(Dec 02 2021 at 17:55)</a>:</h4>
<p>Hi, I looked a bit at the seminorm stuff and it seems to me that there should be all the ingredients needed to define lcs and prove that the geometric definition is equivalent to the analytic (seminorms) one. Is there anyone actively working on this or are there any known issues with implementing this?</p>



<a name="263477608"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Locally%20convex%20spaces/near/263477608" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ya√´l Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Locally.20convex.20spaces.html#263477608">(Dec 02 2021 at 18:06)</a>:</h4>
<p>This is on my todo list. <span class="user-mention" data-user-id="246273">@Bhavik Mehta</span>  and I defined the Minkowski functional recently, I'm currently defining several kinds of convexity (star, strict), I'll be refactoring affine spaces over December, and at some point between all this I was planning to do locally convex spaces.</p>



<a name="263477708"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Locally%20convex%20spaces/near/263477708" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ya√´l Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Locally.20convex.20spaces.html#263477708">(Dec 02 2021 at 18:07)</a>:</h4>
<p>But you're welcome to try it if you want. There's no obstruction in view.</p>



<a name="263614774"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Locally%20convex%20spaces/near/263614774" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Locally.20convex.20spaces.html#263614774">(Dec 03 2021 at 17:54)</a>:</h4>
<p>I would like to implement the seminorms -&gt; locally convex space direction, this should be quite easy (mathematically its trivial), but I have to find my way around the topology part of mathlib, so it might take me some time.</p>



<a name="263630584"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Locally%20convex%20spaces/near/263630584" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ya√´l Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Locally.20convex.20spaces.html#263630584">(Dec 03 2021 at 20:02)</a>:</h4>
<p>Okay! I will let you do it then. Please tell me which branch you're working on and feel free to ask for help.</p>



<a name="263769155"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Locally%20convex%20spaces/near/263769155" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Locally.20convex.20spaces.html#263769155">(Dec 05 2021 at 13:45)</a>:</h4>
<p>Should I create a new structure for spaces with a family of seminorms? It looks a bit weird, because I have only one field <code>seminorms : Œπ ‚Üí seminorm ùïú E</code>.</p>



<a name="263769330"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Locally%20convex%20spaces/near/263769330" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Locally.20convex.20spaces.html#263769330">(Dec 05 2021 at 13:48)</a>:</h4>
<p>I haven't pushed my branch to github yet, because it is extremely messy and probably nothing in it is of any use (except for me learning lean)</p>



<a name="263772026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Locally%20convex%20spaces/near/263772026" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ya√´l Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Locally.20convex.20spaces.html#263772026">(Dec 05 2021 at 14:54)</a>:</h4>
<p>This is a bad definition because several indexed families can correspond to the same space.</p>



<a name="263772058"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Locally%20convex%20spaces/near/263772058" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ya√´l Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Locally.20convex.20spaces.html#263772058">(Dec 05 2021 at 14:56)</a>:</h4>
<p>This characterization as a family of seminorms should rather be a constructor + eventually a definition (a destructor)</p>



<a name="263775181"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Locally%20convex%20spaces/near/263775181" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Locally.20convex.20spaces.html#263775181">(Dec 05 2021 at 16:05)</a>:</h4>
<p>I know the choice of seminorms is not unique, the issue I have is that I have no idea for what I have to write the instance of <code>has_continuous_add</code>.  I have</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">seminorm_subbasis</span> <span class="o">(</span><span class="n">P</span> <span class="o">:</span> <span class="n">Œπ</span> <span class="bp">‚Üí</span> <span class="n">seminorm</span> <span class="bp">ùïú</span> <span class="n">E</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">set</span> <span class="n">E</span><span class="o">)</span>
  <span class="o">:=</span> <span class="n">Union</span> <span class="bp">$</span> <span class="bp">Œª</span> <span class="n">x</span><span class="o">,</span> <span class="n">Union</span> <span class="bp">$</span> <span class="bp">Œª</span> <span class="n">i</span><span class="o">,</span> <span class="n">Union</span> <span class="bp">$</span> <span class="bp">Œª</span> <span class="n">r</span><span class="o">,</span> <span class="n">set_of</span> <span class="o">(</span><span class="bp">Œª</span> <span class="n">y</span><span class="o">,</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">ball</span> <span class="o">(</span><span class="n">P</span> <span class="n">i</span><span class="o">)</span> <span class="n">x</span> <span class="n">r</span><span class="o">)</span>

<span class="kd">def</span> <span class="n">seminorm_topology</span> <span class="o">(</span><span class="n">P</span> <span class="o">:</span> <span class="n">Œπ</span> <span class="bp">‚Üí</span> <span class="n">seminorm</span> <span class="bp">ùïú</span> <span class="n">E</span><span class="o">)</span> <span class="o">:</span> <span class="n">topological_space</span> <span class="n">E</span>
  <span class="o">:=</span> <span class="n">topological_space.generate_from</span> <span class="o">(</span><span class="n">seminorm_subbasis</span> <span class="n">P</span><span class="o">)</span>
</code></pre></div>
<p>and I wanted to write something like</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="o">:</span> <span class="n">has_continuous_add</span> <span class="o">(</span><span class="n">seminorm_topology</span> <span class="n">P</span><span class="o">)</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div>
<p>but that does not work.</p>



<a name="263775407"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Locally%20convex%20spaces/near/263775407" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Locally.20convex.20spaces.html#263775407">(Dec 05 2021 at 16:10)</a>:</h4>
<p>What's the error?</p>



<a name="263775494"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Locally%20convex%20spaces/near/263775494" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Locally.20convex.20spaces.html#263775494">(Dec 05 2021 at 16:13)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">type</span> <span class="n">mismatch</span> <span class="n">at</span> <span class="n">application</span>
  <span class="n">has_continuous_add</span> <span class="o">(</span><span class="n">seminorm_topology</span> <span class="n">P</span><span class="o">)</span>
<span class="n">term</span>
  <span class="n">seminorm_topology</span> <span class="n">P</span>
<span class="n">has</span> <span class="n">type</span>
  <span class="n">topological_space</span> <span class="n">E</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_2</span>
<span class="n">but</span> <span class="n">is</span> <span class="n">expected</span> <span class="n">to</span> <span class="k">have</span> <span class="n">type</span>
  <span class="kt">Type</span> <span class="bp">?</span> <span class="o">:</span> <span class="kt">Type</span> <span class="o">(</span><span class="bp">?+</span><span class="mi">1</span><span class="o">)</span>
</code></pre></div>
<p>and something about failing to synthesizing <code>topological_space ?m_1</code></p>



<a name="263775580"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Locally%20convex%20spaces/near/263775580" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Locally.20convex.20spaces.html#263775580">(Dec 05 2021 at 16:15)</a>:</h4>
<p>Right, so that's telling you that <code>has_cpntinuous_add</code> is expecting a type, which probably needs to have a topological space and has_add instance, and instead you have it a term of type <code>topological_space E</code></p>



<a name="263775782"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Locally%20convex%20spaces/near/263775782" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Locally.20convex.20spaces.html#263775782">(Dec 05 2021 at 16:20)</a>:</h4>
<p>So should I do this?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="o">:</span> <span class="n">topological_space</span> <span class="o">(</span><span class="n">E</span><span class="o">)</span> <span class="o">:=</span> <span class="n">seminorm_topology</span> <span class="n">P</span>
<span class="kd">instance</span> <span class="o">:</span> <span class="n">has_continuous_add</span> <span class="o">(</span><span class="n">E</span><span class="o">)</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div>
<p>This type-checks, but I am not sure whether it is the right thing</p>



<a name="263775846"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Locally%20convex%20spaces/near/263775846" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Locally.20convex.20spaces.html#263775846">(Dec 05 2021 at 16:21)</a>:</h4>
<p>I think you probably would need an alias for E which has P as a variable. Otherwise typeclass search wouldn't be able to know about P just from E</p>



<a name="263775930"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Locally%20convex%20spaces/near/263775930" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Locally.20convex.20spaces.html#263775930">(Dec 05 2021 at 16:22)</a>:</h4>
<p>Also I would recommend using the Inf of topological spaces in your def</p>



<a name="263775955"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Locally%20convex%20spaces/near/263775955" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Locally.20convex.20spaces.html#263775955">(Dec 05 2021 at 16:23)</a>:</h4>
<p>Let me sketch some code for you...</p>



<a name="263776235"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Locally%20convex%20spaces/near/263776235" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Locally.20convex.20spaces.html#263776235">(Dec 05 2021 at 16:29)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">analysis.seminorm</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">k</span> <span class="n">E</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">normed_field</span> <span class="n">k</span><span class="o">]</span> <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">E</span><span class="o">]</span> <span class="o">[</span><span class="n">module</span> <span class="n">k</span> <span class="n">E</span><span class="o">]</span>

<span class="kd">def</span> <span class="n">seminorm.topological_space</span> <span class="o">(</span><span class="n">e</span> <span class="o">:</span> <span class="n">seminorm</span> <span class="n">k</span> <span class="n">E</span><span class="o">)</span> <span class="o">:</span> <span class="n">topological_space</span> <span class="n">E</span> <span class="o">:=</span> <span class="gr">sorry</span>

<span class="kd">@[derive [add_comm_group]</span><span class="o">]</span>
<span class="kd">def</span> <span class="n">name_me</span> <span class="o">{</span><span class="n">Œπ</span><span class="o">}</span> <span class="o">(</span><span class="n">P</span> <span class="o">:</span> <span class="n">Œπ</span> <span class="bp">‚Üí</span> <span class="n">seminorm</span> <span class="n">k</span> <span class="n">E</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span> <span class="o">:=</span> <span class="n">E</span>

<span class="kd">instance</span> <span class="o">{</span><span class="n">Œπ</span><span class="o">}</span> <span class="o">(</span><span class="n">P</span> <span class="o">:</span> <span class="n">Œπ</span> <span class="bp">‚Üí</span> <span class="n">seminorm</span> <span class="n">k</span> <span class="n">E</span><span class="o">)</span> <span class="o">:</span> <span class="n">module</span> <span class="n">k</span> <span class="o">(</span><span class="n">name_me</span> <span class="n">P</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="o">{</span> <span class="n">delta</span> <span class="n">name_me</span><span class="o">,</span> <span class="n">apply_instance</span> <span class="o">}</span>

<span class="kd">instance</span> <span class="o">{</span><span class="n">Œπ</span><span class="o">}</span> <span class="o">{</span><span class="n">P</span> <span class="o">:</span> <span class="n">Œπ</span> <span class="bp">‚Üí</span> <span class="n">seminorm</span> <span class="n">k</span> <span class="n">E</span><span class="o">}</span> <span class="o">:</span> <span class="n">topological_space</span> <span class="o">(</span><span class="n">name_me</span> <span class="n">P</span><span class="o">)</span> <span class="o">:=</span>
<span class="bp">‚®Ö</span> <span class="n">i</span><span class="o">,</span> <span class="o">(</span><span class="n">P</span> <span class="n">i</span><span class="o">)</span><span class="bp">.</span><span class="n">topological_space</span>

<span class="kd">instance</span> <span class="o">{</span><span class="n">Œπ</span><span class="o">}</span> <span class="o">{</span><span class="n">P</span> <span class="o">:</span> <span class="n">Œπ</span> <span class="bp">‚Üí</span> <span class="n">seminorm</span> <span class="n">k</span> <span class="n">E</span><span class="o">}</span> <span class="o">:</span> <span class="n">has_continuous_add</span> <span class="o">(</span><span class="n">name_me</span> <span class="n">P</span><span class="o">)</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div>



<a name="263776296"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Locally%20convex%20spaces/near/263776296" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Locally.20convex.20spaces.html#263776296">(Dec 05 2021 at 16:30)</a>:</h4>
<p>We may even have <code>seminorm.topological_space</code> in mathlib, I'm not sure.</p>



<a name="263776353"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Locally%20convex%20spaces/near/263776353" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Locally.20convex.20spaces.html#263776353">(Dec 05 2021 at 16:32)</a>:</h4>
<p>It might be confusing that the thing mathlib calls a <code>topological_space</code> is actually a topology (and likewise what it calls a <code>group</code> is actually a group structure, etc.)</p>



<a name="263776414"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Locally%20convex%20spaces/near/263776414" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Locally.20convex.20spaces.html#263776414">(Dec 05 2021 at 16:33)</a>:</h4>
<p>(I am assuming that the infimum of the topologies is what you intend in your definition, but I'm not completely sure.)</p>



<a name="263776591"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Locally%20convex%20spaces/near/263776591" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Locally.20convex.20spaces.html#263776591">(Dec 05 2021 at 16:36)</a>:</h4>
<p>Actually, I think it should be okay, given what you wrote for <code>seminorm_subbasis</code> above.</p>



<a name="263776745"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Locally%20convex%20spaces/near/263776745" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ya√´l Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Locally.20convex.20spaces.html#263776745">(Dec 05 2021 at 16:40)</a>:</h4>
<p>I think <code>locally_convex_space</code> should carry a topology and a proof it agrees with the seminorms-induced one, simiar to how <code>metric_space</code> works.</p>



<a name="263776987"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Locally%20convex%20spaces/near/263776987" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Locally.20convex.20spaces.html#263776987">(Dec 05 2021 at 16:44)</a>:</h4>
<p>Yeah, that's probably the best approach</p>



<a name="263808430"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Locally%20convex%20spaces/near/263808430" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Locally.20convex.20spaces.html#263808430">(Dec 06 2021 at 04:46)</a>:</h4>
<p>I think that <code>locally_convex_space E</code> should be either a <code>Prop</code>-valued mixin <code>nhds_basis_convex : ‚àÄ (x : E), (ùìù x).has_basis (Œª s, s ‚àà ùìù  x ‚àß convex ‚Ñù s)</code>, or extend <code>topological_space E</code>, <code>module ‚Ñù E</code>, <code>topological_group E</code>, <code>has_continuous_smul ‚Ñù E</code>, and add <code>nhds_basis_convex</code> to the list of axioms.</p>



<a name="263808517"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Locally%20convex%20spaces/near/263808517" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Locally.20convex.20spaces.html#263808517">(Dec 06 2021 at 04:48)</a>:</h4>
<p>There should be a type tag as proposed by <span class="user-mention" data-user-id="243562">@Adam Topaz</span> above for a space with topology generated by a family of seminorms.</p>



<a name="263808541"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Locally%20convex%20spaces/near/263808541" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Locally.20convex.20spaces.html#263808541">(Dec 06 2021 at 04:49)</a>:</h4>
<p>But the main definition should be "geometric" and should not carry additional data.</p>



<a name="263814105"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Locally%20convex%20spaces/near/263814105" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Locally.20convex.20spaces.html#263814105">(Dec 06 2021 at 06:57)</a>:</h4>
<p>Is there a way to do Adam's approach, but using the seminormed spaces from <code>analysis/normed_space</code> in a way that we get the tvs structure for free? It seems to me that all the abstract topological stuff is already in there.</p>



<a name="263824194"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Locally%20convex%20spaces/near/263824194" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Locally.20convex.20spaces.html#263824194">(Dec 06 2021 at 09:17)</a>:</h4>
<p>Currently we have 2 unrelated formalizations of a seminorm: <a href="https://leanprover-community.github.io/mathlib_docs/find/semi_normed_space">docs#semi_normed_space</a> and <a href="https://leanprover-community.github.io/mathlib_docs/find/seminorm">docs#seminorm</a>.</p>



<a name="263824335"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Locally%20convex%20spaces/near/263824335" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Locally.20convex.20spaces.html#263824335">(Dec 06 2021 at 09:18)</a>:</h4>
<p>The former version assumes that the topological space structure is exactly the one generated by the seminorm.</p>



<a name="263824496"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Locally%20convex%20spaces/near/263824496" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Locally.20convex.20spaces.html#263824496">(Dec 06 2021 at 09:20)</a>:</h4>
<p>There is <a href="https://leanprover-community.github.io/mathlib_docs/find/semi_normed_group.of_core">docs#semi_normed_group.of_core</a> that constructs a <code>semi_normed_group</code> from <code>semi_normed_group.core</code>.</p>



<a name="263824777"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Locally%20convex%20spaces/near/263824777" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Locally.20convex.20spaces.html#263824777">(Dec 06 2021 at 09:23)</a>:</h4>
<p>Given a family of seminorms, you can define a <code>toplogical_space</code> structure for each <code>seminorm</code> using something like <code>by letI := seminormed_group.of_core S.to_core; apply_instance</code>, where <code>seminorm.to_core</code> converts a <code>seminorm</code> to a <code>semi_normed_group.core</code>.</p>



<a name="263824935"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Locally%20convex%20spaces/near/263824935" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Locally.20convex.20spaces.html#263824935">(Dec 06 2021 at 09:25)</a>:</h4>
<p>This way you get <code>seminorm.topological_space</code> in Adam's code above.</p>



<a name="263825274"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Locally%20convex%20spaces/near/263825274" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Locally.20convex.20spaces.html#263825274">(Dec 06 2021 at 09:28)</a>:</h4>
<p>I think that we should have 2 type tags:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">seminorm.domain</span> <span class="o">{</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">seminorm</span> <span class="bp">ùïú</span> <span class="n">X</span><span class="o">)</span> <span class="o">:=</span> <span class="n">X</span>

<span class="kd">instance</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">seminorm</span> <span class="bp">ùïú</span> <span class="n">X</span><span class="o">)</span> <span class="o">:</span> <span class="n">semi_normed_group</span> <span class="n">s.domain</span> <span class="o">:=</span>
<span class="n">semi_normed_group.of_core</span> <span class="n">s.to_core</span>

<span class="kn">protected</span> <span class="kd">def</span> <span class="n">seminorm.uniform_space</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">seminorm</span> <span class="bp">ùïú</span> <span class="n">X</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">uniform_space</span> <span class="n">X</span> <span class="o">:=</span>
<span class="o">(</span><span class="kd">by</span> <span class="n">apply_instance</span> <span class="o">:</span> <span class="n">uniform_space</span> <span class="n">s.domain</span><span class="o">)</span>

<span class="kd">instance</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">seminorm</span> <span class="bp">ùïú</span> <span class="n">X</span><span class="o">)</span> <span class="o">:</span> <span class="n">semi_normed_space</span> <span class="bp">ùïú</span> <span class="n">s.domain</span> <span class="o">:=</span>
<span class="gr">sorry</span>
</code></pre></div>



<a name="263825318"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Locally%20convex%20spaces/near/263825318" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Locally.20convex.20spaces.html#263825318">(Dec 06 2021 at 09:29)</a>:</h4>
<p>Then we should have another type tag for a group with a family of seminorms.</p>



<a name="263825826"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Locally%20convex%20spaces/near/263825826" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Locally.20convex.20spaces.html#263825826">(Dec 06 2021 at 09:34)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">with_seminorms</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">Œπ</span> <span class="bp">‚Üí</span> <span class="n">seminorm</span> <span class="bp">ùïú</span> <span class="n">X</span><span class="o">)</span> <span class="o">:=</span> <span class="n">X</span>

<span class="kd">instance</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">Œπ</span> <span class="bp">‚Üí</span> <span class="n">seminorm</span> <span class="bp">ùïú</span> <span class="n">X</span><span class="o">)</span> <span class="o">:</span> <span class="n">uniform_space</span> <span class="o">(</span><span class="n">with_seminorms</span> <span class="n">s</span><span class="o">)</span> <span class="o">:=</span>
<span class="bp">‚®Ö</span> <span class="n">i</span><span class="o">,</span> <span class="o">(</span><span class="n">s</span> <span class="n">i</span><span class="o">)</span><span class="bp">.</span><span class="n">uniform_space</span>
</code></pre></div>



<a name="263825922"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Locally%20convex%20spaces/near/263825922" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Locally.20convex.20spaces.html#263825922">(Dec 06 2021 at 09:35)</a>:</h4>
<p>Due to <a href="https://leanprover-community.github.io/mathlib_docs/find/uniform_space.to_topological_space_infi">docs#uniform_space.to_topological_space_infi</a>, you'll get <code>(with_seminorms.uniform_space s).to_topological_space = ‚®Ö i, (s i).uniform_space.to_topological_space</code>.</p>



<a name="263825923"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Locally%20convex%20spaces/near/263825923" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ya√´l Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Locally.20convex.20spaces.html#263825923">(Dec 06 2021 at 09:35)</a>:</h4>
<p><code>with_seminorms s</code>, you mean?</p>



<a name="264472730"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Locally%20convex%20spaces/near/264472730" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Locally.20convex.20spaces.html#264472730">(Dec 10 2021 at 16:36)</a>:</h4>
<p>I have lots of other (math) stuff to do, so I cannot do any lean until christmas. so if anyone wants to do what Yury has written, feel free.</p>



<a name="264486157"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Locally%20convex%20spaces/near/264486157" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ya√´l Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Locally.20convex.20spaces.html#264486157">(Dec 10 2021 at 18:13)</a>:</h4>
<p>I'll tell you if ever I take over</p>



<a name="265618820"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Locally%20convex%20spaces/near/265618820" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Locally.20convex.20spaces.html#265618820">(Dec 20 2021 at 21:40)</a>:</h4>
<p>(deleted, I am too stupid to tell {} from () )</p>



<a name="265625780"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Locally%20convex%20spaces/near/265625780" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Locally.20convex.20spaces.html#265625780">(Dec 20 2021 at 22:56)</a>:</h4>
<p>Does this look sensible? <a href="https://github.com/leanprover-community/mathlib/blob/mcdoll/lcspaces/src/analysis/locally_convex.lean">https://github.com/leanprover-community/mathlib/blob/mcdoll/lcspaces/src/analysis/locally_convex.lean</a></p>



<a name="265626597"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Locally%20convex%20spaces/near/265626597" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Locally.20convex.20spaces.html#265626597">(Dec 20 2021 at 23:05)</a>:</h4>
<p>oh I don't need the instance for module</p>



<a name="265627115"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Locally%20convex%20spaces/near/265627115" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Locally.20convex.20spaces.html#265627115">(Dec 20 2021 at 23:12)</a>:</h4>
<p>You can also cut the <code>add_comm_group</code> instance by using <code>derive</code>:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">@[derive add_comm_group]</span> <span class="kd">def</span> <span class="n">seminorm.domain</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">seminorm</span> <span class="bp">ùïú</span> <span class="n">E</span><span class="o">)</span> <span class="o">:=</span> <span class="n">E</span>
</code></pre></div>



<a name="265627518"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Locally%20convex%20spaces/near/265627518" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Locally.20convex.20spaces.html#265627518">(Dec 20 2021 at 23:17)</a>:</h4>
<p>In fact, you can equip it with the module instance at the same time:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">@[derive [add_comm_group, module ùïú]</span><span class="o">]</span> <span class="kd">def</span> <span class="n">seminorm.domain</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">seminorm</span> <span class="bp">ùïú</span> <span class="n">E</span><span class="o">)</span> <span class="o">:=</span> <span class="n">E</span>
</code></pre></div>
<p>and then when the time comes to put the seminormed space instance on, you don't need to mention the module structure at all:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">seminorm</span> <span class="bp">ùïú</span> <span class="n">E</span><span class="o">)</span> <span class="o">:</span> <span class="n">semi_normed_space</span> <span class="bp">ùïú</span> <span class="n">s.domain</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">norm_smul_le</span> <span class="o">:=</span> <span class="n">s.smul_le</span> <span class="o">}</span>
</code></pre></div>



<a name="265681164"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Locally%20convex%20spaces/near/265681164" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Locally.20convex.20spaces.html#265681164">(Dec 21 2021 at 12:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="214703">Yury G. Kudryashov</span> <a href="#narrow/stream/116395-maths/topic/Locally.20convex.20spaces/near/263825922">said</a>:</p>
<blockquote>
<p>Due to <a href="https://leanprover-community.github.io/mathlib_docs/find/uniform_space.to_topological_space_infi">docs#uniform_space.to_topological_space_infi</a>, you'll get <code>(with_seminorms.uniform_space s).to_topological_space = ‚®Ö i, (s i).uniform_space.to_topological_space</code>.</p>
</blockquote>
<p>The link is dead and I could not find the correct lemma.</p>



<a name="265681316"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Locally%20convex%20spaces/near/265681316" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Locally.20convex.20spaces.html#265681316">(Dec 21 2021 at 12:50)</a>:</h4>
<p>ah it is this <a href="https://leanprover-community.github.io/mathlib_docs/topology/uniform_space/basic.html#to_topological_space_infi">https://leanprover-community.github.io/mathlib_docs/topology/uniform_space/basic.html#to_topological_space_infi</a></p>



<a name="265697951"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Locally%20convex%20spaces/near/265697951" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Locally.20convex.20spaces.html#265697951">(Dec 21 2021 at 15:30)</a>:</h4>
<p>We should move this lemma to the <code>uniform_space</code> namespace.</p>



<a name="265749145"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Locally%20convex%20spaces/near/265749145" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Locally.20convex.20spaces.html#265749145">(Dec 21 2021 at 23:55)</a>:</h4>
<p>I made a little bit of progress: I got everything from the discussion above to work, but now I am failing at showing that addition is continuous. I guess that I am not supposed to prove this by hand, but use some very general statement using the infinimum of the topologies. The only helpful thing I found was the stuff in <code>topology.algebra.filter_basis</code>, but I guess this would create a second topology which is not defeq to the one we already have.</p>



<a name="266254697"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Locally%20convex%20spaces/near/266254697" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Moritz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Locally.20convex.20spaces.html#266254697">(Dec 28 2021 at 12:15)</a>:</h4>
<p>I managed to define the topological group structure for <code>with_seminorms s</code>: <a href="https://github.com/leanprover-community/mathlib/blob/mcdoll/lcspaces/src/analysis/locally_convex.lean">https://github.com/leanprover-community/mathlib/blob/mcdoll/lcspaces/src/analysis/locally_convex.lean</a> maybe someone can take a look and tell me whether this is reasonable.</p>



<a name="268117949"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Locally%20convex%20spaces/near/268117949" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ya√´l Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Locally.20convex.20spaces.html#268117949">(Jan 15 2022 at 10:10)</a>:</h4>
<p><span class="user-mention" data-user-id="412682">@Moritz Doll</span>, do have a look at <a href="https://github.com/leanprover-community/mathlib/pull/7288">#7288</a> so that we don't duplicate work.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>