---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html">Friday afternoon puzzle -- 37 ∈ 37?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="217417614"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217417614" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217417614">(Nov 20 2020 at 15:46)</a>:</h4>
<p>At Xena yesterday I was too quick with my use of <code>use</code>, accidentally using <code>37</code> for a set of reals. But it worked! Shing noted that <code>set \R</code> now has zero, one and add, so numerals work. This reminds me a bit of ZFC, where the corresponding result is false. Puzzle: is it true in Lean?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>

<span class="kn">namespace</span> <span class="n">foo</span>

<span class="c1">-- all these work fine</span>
<span class="kd">instance</span> <span class="o">:</span> <span class="n">has_zero</span> <span class="o">(</span><span class="n">set</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">apply_instance</span>
<span class="kd">instance</span> <span class="o">:</span> <span class="n">has_one</span> <span class="o">(</span><span class="n">set</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">apply_instance</span>
<span class="kd">instance</span> <span class="o">:</span> <span class="n">has_add</span> <span class="o">(</span><span class="n">set</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">apply_instance</span>
<span class="c1">-- so numerals work too</span>

<span class="kd">end</span> <span class="n">foo</span>

<span class="kd">example</span> <span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">a</span> <span class="bp">∈</span> <span class="n">b</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">use</span> <span class="mi">37</span><span class="o">,</span>
  <span class="n">use</span> <span class="mi">37</span><span class="o">,</span>
  <span class="c1">-- ⊢ 37 ∈ 37</span>
  <span class="n">sorry</span>
<span class="kd">end</span>
</code></pre></div>



<a name="217418357"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217418357" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217418357">(Nov 20 2020 at 15:51)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/set.singleton_one">docs#set.singleton_one</a> also looks scarily non-well-founded.</p>



<a name="217418582"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217418582" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217418582">(Nov 20 2020 at 15:53)</a>:</h4>
<p>Maybe it would make sense to put basically this whole file in a <code>locale</code>?</p>



<a name="217418641"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217418641" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217418641">(Nov 20 2020 at 15:53)</a>:</h4>
<p>e.g. <code>open_locale pointwise</code> to get these instances</p>



<a name="217418942"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217418942" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217418942">(Nov 20 2020 at 15:55)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">silly</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">∈</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">induction</span> <span class="n">n</span><span class="o">,</span>
  <span class="n">simp</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">nat.succ_eq_add_one</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">set.add_mem_add</span><span class="o">,</span>
  <span class="n">convert</span> <span class="n">n_ih</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">set.one_mem_one</span><span class="o">,</span>
<span class="kd">end</span>

<span class="kd">example</span> <span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">a</span> <span class="bp">∈</span> <span class="n">b</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">use</span> <span class="mi">37</span><span class="o">,</span>
  <span class="n">use</span> <span class="mi">37</span><span class="o">,</span>
  <span class="n">convert</span> <span class="n">silly</span> <span class="mi">37</span><span class="o">,</span>
  <span class="n">simp</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="217418997"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217418997" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217418997">(Nov 20 2020 at 15:55)</a>:</h4>
<p>Also, tidy proves it...</p>



<a name="217419098"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217419098" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217419098">(Nov 20 2020 at 15:56)</a>:</h4>
<p>here is the proof tidy finds:</p>
<p>use 37,<br>
  use 37,<br>
  fsplit, work_on_goal 1 { simp at *, fsplit, work_on_goal 0 { fsplit, work_on_goal 1 { simp at *, fsplit, work_on_goal 0 { fsplit, work_on_goal 1 { simp at *, fsplit, work_on_goal 0 { fsplit, work_on_goal 1 { simp at *, fsplit, work_on_goal 0 { fsplit, work_on_goal 1 { simp at *, fsplit, work_on_goal 0 { fsplit, work_on_goal 1 { simp at *, fsplit, work_on_goal 0 { fsplit, work_on_goal 1 { simp at *, fsplit, work_on_goal 0 { refl }, refl } }, fsplit, work_on_goal 1 { fsplit, work_on_goal 0 { fsplit, work_on_goal 1 { simp at *, fsplit, work_on_goal 0 { refl }, refl } }, refl } } }, fsplit, work_on_goal 1 { fsplit, work_on_goal 0 { fsplit, work_on_goal 1 { simp at *, fsplit, work_on_goal 0 { fsplit, work_on_goal 1 { simp at *, fsplit, work_on_goal 0 { refl }, refl } }, fsplit, work_on_goal 1 { fsplit, work_on_goal 0 { fsplit, work_on_goal 1 { simp at *, fsplit, work_on_goal 0 { refl }, refl } }, refl } } }, refl } } }, refl } }, fsplit, work_on_goal 1 { fsplit, work_on_goal 0 { fsplit, work_on_goal 1 { simp at *, fsplit, work_on_goal 0 { fsplit, work_on_goal 1 { simp at *, fsplit, work_on_goal 0 { fsplit, work_on_goal 1 { simp at *, fsplit, work_on_goal 0 { fsplit, work_on_goal 1 { simp at *, fsplit, work_on_goal 0 { refl }, refl } }, fsplit, work_on_goal 1 { fsplit, work_on_goal 0 { fsplit, work_on_goal 1 { simp at *, fsplit, work_on_goal 0 { refl }, refl } }, refl } } }, fsplit, work_on_goal 1 { fsplit, work_on_goal 0 { fsplit, work_on_goal 1 { simp at *, fsplit, work_on_goal 0 { fsplit, work_on_goal 1 { simp at *, fsplit, work_on_goal 0 { refl }, refl } }, fsplit, work_on_goal 1 { fsplit, work_on_goal 0 { fsplit, work_on_goal 1 { simp at *, fsplit, work_on_goal 0 { refl }, refl } }, refl } } }, refl } } }, refl } }, refl } } }, fsplit, work_on_goal 1 { fsplit, work_on_goal 0 { fsplit, work_on_goal 1 { simp at *, fsplit, work_on_goal 0 { fsplit, work_on_goal 1 { simp at *, fsplit, work_on_goal 0 { fsplit, work_on_goal 1 { simp at *, fsplit, work_on_goal 0 { fsplit, work_on_goal 1 { simp at *, fsplit, work_on_goal 0 { fsplit, work_on_goal 1 { simp at *, fsplit, work_on_goal 0 { refl }, refl } }, fsplit, work_on_goal 1 { fsplit, work_on_goal 0 { fsplit, work_on_goal 1 { simp at *, fsplit, work_on_goal 0 { refl }, refl } }, refl } } }, fsplit, work_on_goal 1 { fsplit, work_on_goal 0 { fsplit, work_on_goal 1 { simp at *, fsplit, work_on_goal 0 { fsplit, work_on_goal 1 { simp at *, fsplit, work_on_goal 0 { refl }, refl } }, fsplit, work_on_goal 1 { fsplit, work_on_goal 0 { fsplit, work_on_goal 1 { simp at *, fsplit, work_on_goal 0 { refl }, refl } }, refl } } }, refl } } }, refl } }, fsplit, work_on_goal 1 { fsplit, work_on_goal 0 { fsplit, work_on_goal 1 { simp at *, fsplit, work_on_goal 0 { fsplit, work_on_goal 1 { simp at *, fsplit, work_on_goal 0 { fsplit, work_on_goal 1 { simp at *, fsplit, work_on_goal 0 { fsplit, work_on_goal 1 { simp at *, fsplit, work_on_goal 0 { refl }, refl } }, fsplit, work_on_goal 1 { fsplit, work_on_goal 0 { fsplit, work_on_goal 1 { simp at *, fsplit, work_on_goal 0 { refl }, refl } }, refl } } }, fsplit, work_on_goal 1 { fsplit, work_on_goal 0 { fsplit, work_on_goal 1 { simp at *, fsplit, work_on_goal 0 { fsplit, work_on_goal 1 { simp at *, fsplit, work_on_goal 0 { refl }, refl } }, fsplit, work_on_goal 1 { fsplit, work_on_goal 0 { fsplit, work_on_goal 1 { simp at *, fsplit, work_on_goal 0 { refl }, refl } }, refl } } }, refl } } }, refl } }, refl } } }, refl } } }, refl },</p>



<a name="217419134"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217419134" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217419134">(Nov 20 2020 at 15:56)</a>:</h4>
<p>In ZFC, <code>37 ∈ 38</code>...</p>



<a name="217419243"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217419243" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217419243">(Nov 20 2020 at 15:57)</a>:</h4>
<p>or, without following the misleading second <code>use</code>:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">a</span> <span class="bp">∈</span> <span class="n">b</span> <span class="o">:=</span> <span class="o">⟨</span><span class="mi">37</span><span class="o">,</span> <span class="n">_</span><span class="o">,</span> <span class="kd">by</span> <span class="n">solve_by_elim</span><span class="o">⟩</span>
</code></pre></div>



<a name="217419250"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217419250" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217419250">(Nov 20 2020 at 15:57)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">∈</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">induction</span> <span class="n">n</span> <span class="k">with</span> <span class="n">n</span> <span class="n">hn</span> <span class="n">ih</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">nat.cast_zero</span><span class="o">,</span> <span class="n">set.mem_zero</span><span class="o">]</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">exact</span> <span class="o">⟨</span><span class="n">n</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="kd">by</span> <span class="n">simpa</span> <span class="n">using</span> <span class="n">hn</span><span class="o">⟩,}</span>
<span class="kd">end</span>
</code></pre></div>



<a name="217419372"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217419372" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217419372">(Nov 20 2020 at 15:58)</a>:</h4>
<p>I didn't really expect anything beyond entertainment to come from this post, but actually maybe Reid has a point. I remember <span class="user-mention" data-user-id="110049">@Mario Carneiro</span>  being a bit concerned about defining addition on <code>set A</code> too (A something with +)</p>



<a name="217420439"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217420439" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217420439">(Nov 20 2020 at 16:04)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">mem_bit0</span> <span class="o">[</span><span class="n">has_add</span> <span class="n">α</span><span class="o">]</span> <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">}</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">∈</span> <span class="n">s</span><span class="o">)</span> <span class="o">:</span> <span class="n">bit0</span> <span class="n">a</span> <span class="bp">∈</span> <span class="n">bit0</span> <span class="n">s</span> <span class="o">:=</span>
<span class="o">⟨</span><span class="n">a</span><span class="o">,</span> <span class="n">a</span><span class="o">,</span> <span class="n">h</span><span class="o">,</span> <span class="n">h</span><span class="o">,</span> <span class="n">rfl</span><span class="o">⟩</span>

<span class="kd">lemma</span> <span class="n">mem_bit1</span> <span class="o">[</span><span class="n">has_one</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">has_add</span> <span class="n">α</span><span class="o">]</span> <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">}</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">∈</span> <span class="n">s</span><span class="o">)</span> <span class="o">:</span> <span class="n">bit1</span> <span class="n">a</span> <span class="bp">∈</span> <span class="n">bit1</span> <span class="n">s</span> <span class="o">:=</span>
<span class="o">⟨</span><span class="n">bit0</span> <span class="n">a</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="n">mem_bit0</span> <span class="n">h</span><span class="o">,</span> <span class="n">one_mem_one</span><span class="o">,</span> <span class="n">rfl</span><span class="o">⟩</span>

<span class="kd">example</span> <span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">a</span> <span class="bp">∈</span> <span class="n">b</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">use</span> <span class="o">[</span><span class="mi">37</span><span class="o">,</span> <span class="mi">37</span><span class="o">],</span>
  <span class="n">solve_by_elim</span> <span class="n">only</span> <span class="o">[</span><span class="n">mem_bit1</span><span class="o">,</span> <span class="n">mem_bit0</span><span class="o">,</span> <span class="n">one_mem_one</span><span class="o">,</span> <span class="n">zero_mem_zero</span><span class="o">]</span> <span class="o">{</span><span class="n">max_depth</span> <span class="o">:=</span> <span class="mi">6</span><span class="o">}</span>
<span class="kd">end</span>
</code></pre></div>



<a name="217420828"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217420828" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217420828">(Nov 20 2020 at 16:07)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">a</span> <span class="bp">∈</span> <span class="n">b</span> <span class="o">:=</span> <span class="o">⟨</span><span class="mi">37</span><span class="o">,</span> <span class="n">_</span><span class="o">,</span> <span class="n">rfl</span><span class="o">⟩</span>
</code></pre></div>
<p>(practicing minimizing skills)</p>



<a name="217420848"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217420848" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217420848">(Nov 20 2020 at 16:07)</a>:</h4>
<p>I just wanted to post that one</p>



<a name="217420872"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217420872" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217420872">(Nov 20 2020 at 16:07)</a>:</h4>
<p><span class="user-mention" data-user-id="321459">@Damiano Testa</span> Yeah, you're getting scary</p>



<a name="217421033"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217421033" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217421033">(Nov 20 2020 at 16:08)</a>:</h4>
<p>spoiler alert:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℕ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">{</span><span class="n">n</span><span class="o">}</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">induction</span> <span class="n">n</span> <span class="k">with</span> <span class="n">n</span> <span class="n">hn</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">exact</span> <span class="n">set.singleton_zero</span> <span class="o">},</span>
  <span class="n">simp</span> <span class="o">[</span><span class="n">hn</span><span class="o">],</span>
<span class="kd">end</span>
</code></pre></div>



<a name="217424486"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217424486" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217424486">(Nov 20 2020 at 16:31)</a>:</h4>
<p>Amusing as this is, I agree with Reid that the pointwise instances on set should be hidden in a locale.</p>



<a name="217424920"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217424920" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217424920">(Nov 20 2020 at 16:34)</a>:</h4>
<p>IIRC Mario's objection was that one could imagine a scenario where one has a local definition of addition on subsets of X (e.g. when making them a boolean ring, when you might want + to mean xor), and then you'd have problems if X accidentally also had an addition.</p>



<a name="217426634"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217426634" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217426634">(Nov 20 2020 at 16:43)</a>:</h4>
<p>With a view towards further developments, the boolean structure on subsets often shows up in explicit representations of 2-torsion points on hyperelliptic curves.  In such cases, the underlying set X could very well be a field.  Would that be an issue?</p>



<a name="217426787"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217426787" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217426787">(Nov 20 2020 at 16:44)</a>:</h4>
<p>(in the example of hyperelliptic curves, the 2-torsion points might be subsets of ramification points, or rather 2-set partitions of the ramification points)</p>



<a name="217427376"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217427376" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217427376">(Nov 20 2020 at 16:48)</a>:</h4>
<p>If we end up <em>not</em> moving these, should we add <span class="user-mention" data-user-id="112680">@Johan Commelin</span>'s bit0 lemmas as <code>norm_cast</code>?</p>



<a name="217430327"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217430327" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217430327">(Nov 20 2020 at 17:08)</a>:</h4>
<p>Johann's lemmas do not mention <code>coe</code>, so they can't be <code>norm_cast</code>.  But an <code>↔</code> version should be simp.</p>



<a name="217431473"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217431473" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217431473">(Nov 20 2020 at 17:17)</a>:</h4>
<p>To add to the silliness of the Friday afternoon: <span class="user-mention" data-user-id="112680">@Johan Commelin</span> 's first lemma can be proved as follows:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">mem_bit0</span> <span class="o">[</span><span class="n">has_add</span> <span class="n">α</span><span class="o">]</span> <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">}</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">∈</span> <span class="n">s</span><span class="o">)</span> <span class="o">:</span> <span class="n">bit0</span> <span class="n">a</span> <span class="bp">∈</span> <span class="n">bit0</span> <span class="n">s</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">repeat</span> <span class="o">{</span> <span class="n">fconstructor</span><span class="o">,</span> <span class="n">exact</span> <span class="o">‹</span><span class="n">_</span><span class="o">›,</span> <span class="o">},</span>
  <span class="n">fconstructor</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>
<p>For me, it is the first time that <code>fconstructor</code> closes a goal, I think.</p>



<a name="217434817"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217434817" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217434817">(Nov 20 2020 at 17:42)</a>:</h4>
<p>See if you can get <code>split</code> to close a goal :-)</p>



<a name="217435469"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217435469" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217435469">(Nov 20 2020 at 17:47)</a>:</h4>
<p>Ahaha!  I was wondering whether I was more surprised by <code>fconstructor</code> or  <code>split</code> and went for <code>fconstructor</code>!</p>



<a name="217435813"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217435813" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217435813">(Nov 20 2020 at 17:50)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110043">Gabriel Ebner</span> <a href="#narrow/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F/near/217430327">said</a>:</p>
<blockquote>
<p>Johann's lemmas do not mention <code>coe</code>, so they can't be <code>norm_cast</code>.  But an <code>↔</code> version should be simp.</p>
</blockquote>
<p>Sadly, the <code>iff</code> version isn't true. For example <code>bit0 2 \mem bit0 {1,3}</code></p>



<a name="217443765"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217443765" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217443765">(Nov 20 2020 at 18:56)</a>:</h4>
<p>I'd never really internalised this {1}=1 thing but I was just working on valuations this evening and proving lemmas about trivial valuations. I noticed this was missing:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">subgroup.closure_eq_bot_iff</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">group</span> <span class="n">G</span><span class="o">]</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">G</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">closure</span> <span class="n">S</span> <span class="bp">=</span> <span class="bp">⊥</span> <span class="bp">↔</span> <span class="n">S</span> <span class="bp">⊆</span> <span class="o">{</span><span class="mi">1</span><span class="o">}</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">sorry</span>
<span class="kd">end</span>
</code></pre></div>
<p>so I tried <code>simp</code> and it changed the RHS to <code>S ⊆ 1</code>. Meh :-/</p>



<a name="217455473"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217455473" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217455473">(Nov 20 2020 at 20:33)</a>:</h4>
<p>I was surprised to see that <code>0 = {0}</code> in that definition. I would have guessed <code>0 = empty</code></p>



<a name="217455565"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217455565" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217455565">(Nov 20 2020 at 20:34)</a>:</h4>
<p>which for me is enough to suggest that these should not be simp normal form, because they are not universal enough</p>



<a name="217455714"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217455714" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217455714">(Nov 20 2020 at 20:36)</a>:</h4>
<p>as for <code>1 : set A</code> I just have no idea what that should mean. It could mean <code>univ</code> if you treat <code>set A</code> as a boolean algebra and notate the top and bottom with 0 and 1. (We don't, but some books do and this would be a source of confusion)</p>



<a name="217493616"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217493616" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217493616">(Nov 21 2020 at 09:35)</a>:</h4>
<p>Sorry for beating to death this thread, but I got hung up on the <code>tidy</code> proof and while trying to make sense of it, I realized that Lean either subtracts 1 or divides by 2, when the number is even (see below).  Why is that?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">a</span> <span class="bp">∈</span> <span class="n">b</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">refine</span> <span class="o">⟨</span><span class="mi">37</span><span class="o">,</span> <span class="mi">37</span><span class="o">,</span> <span class="n">_</span><span class="o">⟩,</span>
  <span class="n">refine</span> <span class="o">⟨</span><span class="mi">36</span><span class="o">,</span> <span class="o">⟨</span><span class="mi">1</span><span class="o">,</span> <span class="n">_</span><span class="o">⟩⟩,</span>  <span class="c1">--here Lean subtracts 1</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">eq_self_iff_true</span><span class="o">,</span> <span class="n">and_true</span><span class="o">,</span> <span class="n">set.mem_one</span><span class="o">,</span> <span class="n">eq_self_iff_true</span><span class="o">,</span> <span class="n">and_true</span><span class="o">],</span>
  <span class="n">refine</span> <span class="o">⟨</span><span class="mi">18</span><span class="o">,</span> <span class="o">⟨</span><span class="mi">18</span><span class="o">,</span> <span class="n">_</span><span class="o">⟩⟩,</span>  <span class="c1">--here Lean divides by 2</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">eq_self_iff_true</span><span class="o">,</span> <span class="n">and_true</span><span class="o">,</span> <span class="n">and_self</span><span class="o">],</span>
  <span class="n">refine</span> <span class="o">⟨</span><span class="mi">9</span><span class="o">,</span> <span class="o">⟨</span><span class="mi">9</span><span class="o">,</span> <span class="n">_</span><span class="o">⟩⟩,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">eq_self_iff_true</span><span class="o">,</span> <span class="n">and_true</span><span class="o">,</span> <span class="n">and_self</span><span class="o">],</span>
  <span class="n">refine</span> <span class="o">⟨</span><span class="mi">8</span><span class="o">,</span> <span class="o">⟨</span><span class="mi">1</span><span class="o">,</span> <span class="n">_</span><span class="o">⟩⟩,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">eq_self_iff_true</span><span class="o">,</span> <span class="n">and_true</span><span class="o">,</span> <span class="n">set.mem_one</span><span class="o">,</span> <span class="n">eq_self_iff_true</span><span class="o">,</span> <span class="n">and_true</span><span class="o">],</span>
  <span class="n">refine</span> <span class="o">⟨</span><span class="mi">4</span><span class="o">,</span> <span class="o">⟨</span><span class="mi">4</span><span class="o">,</span> <span class="n">_</span><span class="o">⟩⟩,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">eq_self_iff_true</span><span class="o">,</span> <span class="n">and_true</span><span class="o">,</span> <span class="n">and_self</span><span class="o">],</span>
  <span class="n">refine</span> <span class="o">⟨</span><span class="mi">2</span><span class="o">,</span> <span class="o">⟨</span><span class="mi">2</span><span class="o">,</span> <span class="n">_</span><span class="o">⟩⟩,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">eq_self_iff_true</span><span class="o">,</span> <span class="n">and_true</span><span class="o">,</span> <span class="n">and_self</span><span class="o">],</span>
  <span class="n">refine</span> <span class="o">⟨</span><span class="mi">1</span><span class="o">,</span> <span class="o">⟨</span><span class="mi">1</span><span class="o">,</span> <span class="n">_</span><span class="o">⟩⟩,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">eq_self_iff_true</span><span class="o">,</span> <span class="n">and_true</span><span class="o">,</span> <span class="n">and_self</span><span class="o">],</span>
  <span class="n">exact</span> <span class="n">set.mem_one.mpr</span> <span class="n">rfl</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>
<p>I would have imagined that Lean would have subtracted 1 all the way.</p>



<a name="217493688"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217493688" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217493688">(Nov 21 2020 at 09:37)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">set_option</span> <span class="n">pp.numerals</span> <span class="n">false</span>

<span class="k">#check</span> <span class="mi">37</span> <span class="c1">-- bit1 (bit0 (bit1 (bit0 (bit0 has_one.one)))) : ℕ</span>
</code></pre></div>
<p>Lean stores numerals internally as binary.</p>



<a name="217493732"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217493732" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217493732">(Nov 21 2020 at 09:38)</a>:</h4>
<p>Ah!  So this proof is a more clunky version of Johan's, right?  Thanks for the explanation!</p>



<a name="217493756"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217493756" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217493756">(Nov 21 2020 at 09:39)</a>:</h4>
<p>Btw, Lean tells me </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="k">#check</span> <span class="mi">37</span>  <span class="c1">-- 37 : ℕ</span>
</code></pre></div>
<p>I do not see the binaries...</p>



<a name="217493764"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217493764" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217493764">(Nov 21 2020 at 09:39)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">:</span> <span class="mi">1000000000</span> <span class="bp">+</span> <span class="mi">1000000000</span> <span class="bp">=</span> <span class="mi">2000000000</span> <span class="o">:=</span> <span class="n">rfl</span> <span class="c1">-- works</span>
<span class="kd">example</span> <span class="o">:</span> <span class="mi">1000000</span> <span class="bp">+</span> <span class="mi">2000000</span> <span class="bp">=</span> <span class="mi">3000000</span> <span class="o">:=</span> <span class="n">rfl</span> <span class="c1">-- times out</span>
</code></pre></div>
<p>I was surprised the first time I saw this.</p>



<a name="217493812"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217493812" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217493812">(Nov 21 2020 at 09:40)</a>:</h4>
<p><span class="user-mention silent" data-user-id="321459">Damiano Testa</span> <a href="#narrow/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F/near/217493756">said</a>:</p>
<blockquote>
<p>Btw, Lean tells me </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="k">#check</span> <span class="mi">37</span>  <span class="c1">-- 37 : ℕ</span>
</code></pre></div>
<p>I do not see the binaries...</p>
</blockquote>
<p>That's because you didn't do what I did.</p>



<a name="217493832"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217493832" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217493832">(Nov 21 2020 at 09:41)</a>:</h4>
<p>Sorry, I missed the first line of your code... <span aria-label="face palm" class="emoji emoji-1f926" role="img" title="face palm">:face_palm:</span></p>



<a name="217493836"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217493836" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217493836">(Nov 21 2020 at 09:41)</a>:</h4>
<p>The <code>pp.</code> options just control what the pretty printer outputs (the infoview).</p>



<a name="217493845"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217493845" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217493845">(Nov 21 2020 at 09:41)</a>:</h4>
<p>The elaborator turns <code>37</code> into some internal representation, and the pretty printer turns it back into the 37.</p>



<a name="217493894"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217493894" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217493894">(Nov 21 2020 at 09:42)</a>:</h4>
<p>Thanks for the explanation!</p>



<a name="217493956"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217493956" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217493956">(Nov 21 2020 at 09:44)</a>:</h4>
<p>I think that at some point in my Lean education someone told me about <code>set_option pp.all true</code>, which means "print out what Lean is really thinking", and the realisation that I could do this suddenly taught me a lot about what was going on internally. Sometimes you think "Lean why are you so slow", but then when you turn on <code>pp.all</code> you discover that it is manipulating gigantic terms.</p>



<a name="217493972"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217493972" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217493972">(Nov 21 2020 at 09:45)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">set_option</span> <span class="n">pp.all</span> <span class="n">true</span>

<span class="kd">example</span> <span class="o">:</span> <span class="mi">37</span> <span class="bp">=</span> <span class="mi">37</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">sorry</span>
<span class="kd">end</span>
</code></pre></div>



<a name="217493973"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217493973" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217493973">(Nov 21 2020 at 09:45)</a>:</h4>
<p>I had a similar realization when I found out about <code>show_term</code> and started using it on all the lines of my code!</p>



<a name="217493977"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217493977" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217493977">(Nov 21 2020 at 09:45)</a>:</h4>
<p>I will explore <code>set_option pp.all true</code> now!</p>



<a name="217493978"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217493978" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217493978">(Nov 21 2020 at 09:45)</a>:</h4>
<p>Try it in the middle of a commutative algebra proof and you might get a bit of a shock!</p>



<a name="217494043"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217494043" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217494043">(Nov 21 2020 at 09:47)</a>:</h4>
<p>Already I can see that I no longer have to guess how many <code>_</code> I have to use in a <code>refine ⟨_, _, ...⟩</code> expression!</p>



<a name="217494047"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217494047" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217494047">(Nov 21 2020 at 09:47)</a>:</h4>
<p>PS re <code>pp.all</code> -- the infoview actually makes things a bit worse here. In the old days when we just had text output, the <code>pp.all</code>output was really nicely formatted. </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">set_option</span> <span class="n">pp.all</span> <span class="n">true</span>

<span class="kd">example</span> <span class="o">:</span> <span class="mi">37</span> <span class="bp">=</span> <span class="mi">37</span> <span class="o">:=</span>
<span class="kd">begin</span>

<span class="kd">end</span>
</code></pre></div>
<p>The error here has really nice spacing (especially if you make the infoview window big).</p>



<a name="217494107"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217494107" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217494107">(Nov 21 2020 at 09:49)</a>:</h4>
<p>This <code>set_option</code> really seems to clarify lots of things that were obscure in the "digested" view on the right</p>



<a name="217494154"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217494154" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217494154">(Nov 21 2020 at 09:50)</a>:</h4>
<p>Try <code>#help options</code> .</p>



<a name="217494156"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217494156" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217494156">(Nov 21 2020 at 09:50)</a>:</h4>
<p>I now need to look back at all the code that I wrote, turning this on!</p>



<a name="217494166"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217494166" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217494166">(Nov 21 2020 at 09:51)</a>:</h4>
<p>Those give you all the options you can play with. I have never used 95% of them :-) Many are just for people debugging Lean.</p>



<a name="217494172"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217494172" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217494172">(Nov 21 2020 at 09:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F/near/217494154">said</a>:</p>
<blockquote>
<p>Try <code>#help options</code> .</p>
</blockquote>
<p>This means that I can do <code>set_option</code> and then any one of the things that this outputs, right?</p>



<a name="217494176"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217494176" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217494176">(Nov 21 2020 at 09:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F/near/217494166">said</a>:</p>
<blockquote>
<p>Those give you all the options you can play with. I have never used 95% of them :-) Many are just for people debugging Lean.</p>
</blockquote>
<p>Ok, thanks!</p>



<a name="217494184"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217494184" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217494184">(Nov 21 2020 at 09:51)</a>:</h4>
<p>Right. But for the mathematician end user, most of these are not helpful.</p>



<a name="217494226"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217494226" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217494226">(Nov 21 2020 at 09:52)</a>:</h4>
<p>Things like <code>pp.all</code> help a huge amount when you can't close <code>x = x</code> with <code>rfl</code> though. You can find out yourself exactly what went wrong.</p>



<a name="217494232"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217494232" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217494232">(Nov 21 2020 at 09:53)</a>:</h4>
<p>If you see that one side has an <code>_inst_1</code> in and the other side an <code>_inst_5</code> that's when you realise that you have two abelian group structures on something.</p>



<a name="217494252"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217494252" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217494252">(Nov 21 2020 at 09:53)</a>:</h4>
<p>Yes, I can see exactly where this would have helped with the <code>order_dual</code> stuff</p>



<a name="217494297"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217494297" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217494297">(Nov 21 2020 at 09:54)</a>:</h4>
<p>When lean is computing <code>max</code> and I have no idea if it means max or min!</p>



<a name="217494298"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217494298" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217494298">(Nov 21 2020 at 09:54)</a>:</h4>
<p>Oh yeah, then you would have been able to see exactly what was going on. I'm sorry I didn't look at that issue more carefully.</p>



<a name="217494310"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217494310" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217494310">(Nov 21 2020 at 09:55)</a>:</h4>
<p>Do not worry: this way I used alone <code>convert refl _</code> for the first time!</p>



<a name="217494354"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217494354" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217494354">(Nov 21 2020 at 09:56)</a>:</h4>
<p>My feeling is that this sort of thing might be solved best by making stuff <code>irreducible</code>. But I didn't think too carefully. If <code>order_dual X = X</code> then that's fine, but then if some tactic manages to actually _change_ <code>order_dual X</code> back to <code>X</code> then that's when you're in trouble.</p>



<a name="217494474"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217494474" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217494474">(Nov 21 2020 at 09:59)</a>:</h4>
<p>When I was working with valuations and groups with 0, we would be working with <code>with_zero X</code> and sometimes this would magically change to <code>option X</code> because <code>with_zero X</code> is defined to be <code>option X</code> but of course you want it to always stay as <code>with_zero X</code> to remind both you and Lean that it's <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi><mo>∪</mo><mo stretchy="false">{</mo><mn>0</mn><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">X\cup\{0\}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∪</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">0</span><span class="mclose">}</span></span></span></span> rather than <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span></span> plus some arbitrary extra thing. But sometimes a tactic like <code>simp</code> might change <code>with_zero X</code> to <code>option X</code> and suddenly things are confusing (especially if you are also using <code>with_bot</code> or <code>with_top</code> or whatever). I fixed this by making <code>with_zero</code> irreducible and then things were much better, but also a bunch of proofs broke so I had to fix them :-)</p>



<a name="217494579"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217494579" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217494579">(Nov 21 2020 at 10:01)</a>:</h4>
<p>When I will have some time, I will look into <code>irreducible</code>: what you describe seems very relevant!</p>



<a name="217494590"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217494590" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217494590">(Nov 21 2020 at 10:01)</a>:</h4>
<p>But once we'd got things working again, stuff was better because Lean wasn't doing this incorrect unfolding. </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">order_dual</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">:=</span> <span class="n">α</span>
</code></pre></div>
<p>This definition is fine, but the problem is that when later on Lean is trying to guess what a type is, the elaborator might guess wrong, and think you mean alpha instead of order_dual alpha. Because they are definitionally equal, an <code>order_dual X</code> might accidentally turn back into an <code>X</code> and now all of a sudden max = min and things become impossible to work with. Marking <code>order_dual</code> irreducible will stop this happening.</p>



<a name="217494727"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217494727" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217494727">(Nov 21 2020 at 10:04)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>

<span class="k">#print</span> <span class="n">order_dual</span> <span class="c1">-- def order_dual :</span>

<span class="k">#print</span> <span class="n">with_zero</span> <span class="c1">-- @[irreducible] def with_zero : ...</span>
</code></pre></div>
<p><code>order_dual</code> isn't irreducible. It was only relatively recently we realised that this sort of thing could really help. The reals weren't irreducible for a while, and then occasionally Lean would think "I know, let's consider this real as an equivalence class of Cauchy sequences of rationals", which is 100% never what you want to do. Probably more things should be irreducible -- it guides Lean in the right direction.</p>



<a name="217494809"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217494809" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217494809">(Nov 21 2020 at 10:06)</a>:</h4>
<p>The idea is that you make the definition, make the API with it not irreducible (so e.g. you can prove transitivity of <code>&lt;</code> on <code>order_dual X</code> from transitivity of <code>&gt;</code> on <code>X</code>) and then make it irreducible at the end of the file. Then in other files making API, you temporarily make it semireducible so you can do these tricks again if you need them.</p>



<a name="217494835"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217494835" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217494835">(Nov 21 2020 at 10:07)</a>:</h4>
<p>But end users shouldn't be needing to unfold it, they should have all the lemmas they need from the API, and should be imagining <code>order_dual X</code> as in some sense being a completely different object to <code>X</code> -- even the map from <code>X</code> to <code>order_dual X</code> should have a name which isn't <code>id</code>.</p>



<a name="217494838"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217494838" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217494838">(Nov 21 2020 at 10:07)</a>:</h4>
<p>Ok, I am not at the computer right now, but will look into this as soon as I am!  Thanks!</p>



<a name="217494844"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217494844" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217494844">(Nov 21 2020 at 10:07)</a>:</h4>
<p>(because <code>id</code> won't work any more if <code>order_dual</code> is irreducible). This is the price you pay, but it makes you write more principled code.</p>



<a name="217494885"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217494885" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217494885">(Nov 21 2020 at 10:08)</a>:</h4>
<p>Yes, what you describe is very close to what I experienced!</p>



<a name="217498102"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217498102" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217498102">(Nov 21 2020 at 11:38)</a>:</h4>
<p>Damiano, note that <code>pp.all</code> is much less needed now that we have info view widgets. The advantage of widgets is you can choose what to display instead of getting overwhelmed by <code>pp.all</code>. If you don't understand what I mean then you can post a <a href="https://leanprover-community.github.io/mwe.html">#mwe</a> where you feel <code>pp.all</code> helps you and I'll explain how to get the same information from widgets.</p>



<a name="217498517"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217498517" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217498517">(Nov 21 2020 at 11:51)</a>:</h4>
<p>I think it's easier to do diffing on a type mismatch with pp.all than with the goal view</p>



<a name="217498570"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217498570" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217498570">(Nov 21 2020 at 11:52)</a>:</h4>
<p>it's also easier to post a pp.all expression in zulip</p>



<a name="217498575"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217498575" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217498575">(Nov 21 2020 at 11:52)</a>:</h4>
<p>particularly if you don't know what you are looking for</p>



<a name="217499245"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217499245" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217499245">(Nov 21 2020 at 12:10)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.pointwise</span>

<span class="kd">example</span> <span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">a</span> <span class="bp">∈</span> <span class="n">b</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">refine</span> <span class="o">⟨</span><span class="mi">37</span><span class="o">,</span> <span class="mi">37</span><span class="o">,</span> <span class="n">_</span><span class="o">⟩,</span>
  <span class="k">have</span> <span class="n">h1</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">∈</span> <span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:=</span> <span class="n">rfl</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">h2</span> <span class="o">:</span> <span class="mi">2</span> <span class="bp">∈</span> <span class="o">(</span><span class="mi">2</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:=</span> <span class="o">⟨</span><span class="mi">1</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="n">h1</span><span class="o">,</span> <span class="n">h1</span><span class="o">,</span> <span class="n">rfl</span><span class="o">⟩,</span>
  <span class="k">have</span> <span class="n">h4</span> <span class="o">:</span> <span class="mi">4</span> <span class="bp">∈</span> <span class="o">(</span><span class="mi">4</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:=</span> <span class="o">⟨</span><span class="mi">2</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="n">h2</span><span class="o">,</span> <span class="n">h2</span><span class="o">,</span> <span class="n">rfl</span><span class="o">⟩,</span>
  <span class="k">have</span> <span class="n">h8</span> <span class="o">:</span> <span class="mi">8</span> <span class="bp">∈</span> <span class="o">(</span><span class="mi">8</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:=</span> <span class="o">⟨</span><span class="mi">4</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="n">h4</span><span class="o">,</span> <span class="n">h4</span><span class="o">,</span> <span class="n">rfl</span><span class="o">⟩,</span>
  <span class="k">have</span> <span class="n">h9</span> <span class="o">:</span> <span class="mi">9</span> <span class="bp">∈</span> <span class="o">(</span><span class="mi">9</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:=</span> <span class="o">⟨</span><span class="mi">8</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="n">h8</span><span class="o">,</span> <span class="n">h1</span><span class="o">,</span> <span class="n">rfl</span><span class="o">⟩,</span>
  <span class="k">have</span> <span class="n">h18</span> <span class="o">:</span> <span class="mi">18</span> <span class="bp">∈</span> <span class="o">(</span><span class="mi">18</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:=</span> <span class="o">⟨</span><span class="mi">9</span><span class="o">,</span> <span class="mi">9</span><span class="o">,</span> <span class="n">h9</span><span class="o">,</span> <span class="n">h9</span><span class="o">,</span> <span class="n">rfl</span><span class="o">⟩,</span>
  <span class="k">have</span> <span class="n">h36</span> <span class="o">:</span> <span class="mi">36</span> <span class="bp">∈</span> <span class="o">(</span><span class="mi">36</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:=</span> <span class="o">⟨</span><span class="mi">18</span><span class="o">,</span> <span class="mi">18</span><span class="o">,</span> <span class="n">h18</span><span class="o">,</span> <span class="n">h18</span><span class="o">,</span> <span class="n">rfl</span><span class="o">⟩,</span>
  <span class="k">have</span> <span class="n">h37</span> <span class="o">:</span> <span class="mi">37</span> <span class="bp">∈</span> <span class="o">(</span><span class="mi">37</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:=</span> <span class="o">⟨</span><span class="mi">36</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="n">h36</span><span class="o">,</span> <span class="n">h1</span><span class="o">,</span> <span class="n">rfl</span><span class="o">⟩,</span>
  <span class="n">exact</span> <span class="n">h37</span>
<span class="kd">end</span>
</code></pre></div>



<a name="217503661"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217503661" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217503661">(Nov 21 2020 at 14:19)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.pointwise</span>

<span class="kd">example</span> <span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">a</span> <span class="bp">∈</span> <span class="n">b</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">refine</span> <span class="o">⟨</span><span class="mi">37</span><span class="o">,</span> <span class="mi">37</span><span class="o">,</span> <span class="n">_</span><span class="o">⟩,</span>
  <span class="n">simp_rw</span> <span class="o">[</span><span class="n">bit1</span><span class="o">,</span> <span class="n">bit0</span><span class="o">,</span> <span class="bp">←</span> <span class="n">set.singleton_one</span><span class="o">,</span> <span class="n">set.singleton_add_singleton</span><span class="o">,</span> <span class="n">set.mem_singleton</span><span class="o">]</span>
<span class="kd">end</span>
</code></pre></div>



<a name="217503734"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217503734" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217503734">(Nov 21 2020 at 14:20)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.pointwise</span>

<span class="kd">meta</span> <span class="kd">def</span> <span class="n">foo</span> <span class="o">:</span> <span class="n">tactic</span> <span class="n">unit</span> <span class="o">:=</span>
<span class="bp">`</span><span class="o">[{</span><span class="n">apply</span> <span class="n">set.add_mem_add</span><span class="bp">;</span> <span class="n">foo</span><span class="o">}</span> <span class="bp">&lt;|&gt;</span> <span class="n">exact</span> <span class="n">set.one_mem_one</span><span class="o">]</span>

<span class="kd">example</span> <span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">set</span> <span class="n">ℕ</span><span class="o">),</span> <span class="n">a</span> <span class="bp">∈</span> <span class="n">b</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">refine</span> <span class="o">⟨</span><span class="mi">37</span><span class="o">,</span> <span class="mi">37</span><span class="o">,</span> <span class="n">_</span><span class="o">⟩,</span>
  <span class="n">foo</span>
<span class="kd">end</span>
</code></pre></div>



<a name="217505966"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217505966" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217505966">(Nov 21 2020 at 15:27)</a>:</h4>
<p>Sorry for the silly questions, but what are widgets?</p>



<a name="217506145"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217506145" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217506145">(Nov 21 2020 at 15:32)</a>:</h4>
<p>Also... does <code>37 ∈ 37</code> mean that sets in lean are not well founded  or am I missing something obvious?</p>



<a name="217506217"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217506217" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217506217">(Nov 21 2020 at 15:34)</a>:</h4>
<p>It's not <code>37 ∈ 37</code>, it's <code>37 ∈ \uparrow 37</code>, right?</p>



<a name="217506222"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217506222" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217506222">(Nov 21 2020 at 15:35)</a>:</h4>
<p>The two <img alt=":37:" class="emoji" src="https://zulip-avatars.s3.amazonaws.com/3121/emoji/images/18469.png" title="37"> s mean different things</p>



<a name="217506224"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217506224" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217506224">(Nov 21 2020 at 15:35)</a>:</h4>
<p>Ah OK, that's reassuring :D</p>



<a name="217506802"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217506802" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217506802">(Nov 21 2020 at 15:51)</a>:</h4>
<p>Any type which has a <code>0</code>, a <code>1</code> and an <code>+</code> automatically gets a <code>37</code>. In this case this was unintentional, and the joke was to work out what this set actually was. Turns out it's <code>{37}</code>.</p>



<a name="217506959"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217506959" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217506959">(Nov 21 2020 at 15:55)</a>:</h4>
<p>I see, <code>set ℕ</code> is a monoid with <code>1</code>, it makes sense.</p>



<a name="217516030"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Friday%20afternoon%20puzzle%20--%2037%20%E2%88%88%2037%3F/near/217516030" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F.html#217516030">(Nov 21 2020 at 19:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="130384">Riccardo Brasca</span> <a href="#narrow/stream/116395-maths/topic/Friday.20afternoon.20puzzle.20--.2037.20.E2.88.88.2037.3F/near/217505966">said</a>:</p>
<blockquote>
<p>Sorry for the silly questions, but what are widgets?</p>
</blockquote>
<p>Widgets are a way of viewing arbitrary html in the goal view due to <span class="user-mention" data-user-id="121918">@Edward Ayers</span>. In vscode this is what allows us to click terms in the goal view and repeatedly click on subterms and go to definition, and gives the nice highlighting of subterms.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>