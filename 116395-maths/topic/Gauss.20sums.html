---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/Gauss.20sums.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Gauss.20sums.html">Gauss sums</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="290844370"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Gauss%20sums/near/290844370" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Gauss.20sums.html#290844370">(Jul 26 2022 at 03:02)</a>:</h4>
<p>I am now adding Gauss sums: <a href="https://github.com/leanprover-community/mathlib/pull/15684">#15684</a><br>
<span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> <span class="user-mention" data-user-id="130384">@Riccardo Brasca</span> <span class="user-mention" data-user-id="112680">@Johan Commelin</span> <br>
The next step will be to use these results to prove a (generalized version of) Quadratic Reciprocity for quadratic characters of finite fields and for the Legendre Symbol.</p>



<a name="290979369"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Gauss%20sums/near/290979369" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Gauss.20sums.html#290979369">(Jul 27 2022 at 02:12)</a>:</h4>
<p>Based on <span class="user-mention" data-user-id="112680">@Johan Commelin</span> 's suggestion, I have added a <code>comm_group</code> instance for <code>add_char R R'</code> (when <code>R</code> is a <code>add-comm_group</code> and R' is a <code>comm_monoid</code> -- perhaps this should be in mathlib more generally: <code>G \to* M</code> is a commutative group when <code>G</code> is one and <code>M</code> is a commutative monoid, since you can do the inversion on the domain side), which allows to write <code>ψ⁻¹</code> instead of <code>mul_shift ψ (- 1)</code> in one of the main results on Gauss sums.</p>



<a name="291007599"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Gauss%20sums/near/291007599" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Gauss.20sums.html#291007599">(Jul 27 2022 at 09:12)</a>:</h4>
<p>Are you talking about <a href="https://leanprover-community.github.io/mathlib_docs/find/monoid_hom.comm_group">docs#monoid_hom.comm_group</a> ?</p>



<a name="291071130"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Gauss%20sums/near/291071130" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Gauss.20sums.html#291071130">(Jul 27 2022 at 16:15)</a>:</h4>
<p>No. In the situtation I'm talking about, the <em>domain</em> is a (commutative) group, but the <em>target</em> is only a (commutative) monoid.</p>



<a name="291083057"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Gauss%20sums/near/291083057" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Gauss.20sums.html#291083057">(Jul 27 2022 at 17:40)</a>:</h4>
<p>So you can define the inverse of <code>f : G → M</code> as <code>λ x, f x⁻¹</code>. But I guess that supplying an instance for this could lead to a problematic diamond when the target is a group, since we then get two different definitions of the inverse that are likely not defeq.</p>



<a name="291083184"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Gauss%20sums/near/291083184" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Gauss.20sums.html#291083184">(Jul 27 2022 at 17:41)</a>:</h4>
<p>Yes unfortunately that would be relying on <code>f x⁻¹ = (f x)⁻¹</code> being defeq, which it is not.</p>



<a name="291113999"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Gauss%20sums/near/291113999" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Gauss.20sums.html#291113999">(Jul 27 2022 at 21:39)</a>:</h4>
<p><span class="user-mention" data-user-id="310045">@Eric Wieser</span> See above.</p>



<a name="291114426"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Gauss%20sums/near/291114426" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Gauss.20sums.html#291114426">(Jul 27 2022 at 21:43)</a>:</h4>
<p>Apologies for repeating a variant of this discussion in the PR. I think the easy way out here is to make <code>add_char</code> semireducible (ie not reducible as the abbreviation keyword makes it), so that we can choose to have this new instance without the old one at all</p>



<a name="291114646"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Gauss%20sums/near/291114646" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Gauss.20sums.html#291114646">(Jul 27 2022 at 21:45)</a>:</h4>
<p>I assume this would then require to sort of copy over the <code>comm_monoid</code> instance? Or does <code>apply_instance</code> find it also when <code>add_char</code> is semireducible?</p>



<a name="291115050"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Gauss%20sums/near/291115050" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Gauss.20sums.html#291115050">(Jul 27 2022 at 21:50)</a>:</h4>
<p>You would indeed have to copy things across</p>



<a name="291115088"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Gauss%20sums/near/291115088" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Gauss.20sums.html#291115088">(Jul 27 2022 at 21:50)</a>:</h4>
<p>I'll give it a try. I'll ask here if I run into problems.</p>



<a name="291115119"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Gauss%20sums/near/291115119" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Gauss.20sums.html#291115119">(Jul 27 2022 at 21:51)</a>:</h4>
<p>Something like</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="o">:</span> <span class="n">monoid</span> <span class="o">(</span><span class="n">add_char</span> <span class="n">R</span> <span class="n">R'</span><span class="o">)</span> <span class="o">:=</span> <span class="n">monoid_hom.monoid</span>
</code></pre></div>
<p>Should work</p>



<a name="291115337"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Gauss%20sums/near/291115337" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Gauss.20sums.html#291115337">(Jul 27 2022 at 21:53)</a>:</h4>
<p>(I have made some changes to <code>algebra.big_operators.fin</code> (suggested by Johan), and now I'm building mathlib to see if anything breaks. This is going to take a while; before continuing, I'll wait until it's done.)</p>



<a name="291128535"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Gauss%20sums/near/291128535" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Gauss.20sums.html#291128535">(Jul 28 2022 at 00:42)</a>:</h4>
<p>Can't you do <code>@[derive [comm_monoid, ...]] def add_char : ...</code>?</p>



<a name="291131972"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Gauss%20sums/near/291131972" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Gauss.20sums.html#291131972">(Jul 28 2022 at 01:53)</a>:</h4>
<p>No, since at this point, <code>R</code> is just an <code>add_monoid</code> and <code>R'</code> is a monoid. To get a <code>monoid</code> structure on the homomorphisms, the target needs to be commutative.</p>



<a name="291133322"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Gauss%20sums/near/291133322" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Gauss.20sums.html#291133322">(Jul 28 2022 at 02:21)</a>:</h4>
<p>The first problem I have is that Lean doesn't know how to interpret an <code>add_char</code> as a function. What do I need to put in <code>@[derive [???]] def add_char ...</code> to get the correct instance for this? (I tried <code>has_coe_to_fun</code> and <code>fun_like</code>, but this doesn't seem to work.)</p>



<a name="291134313"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Gauss%20sums/near/291134313" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Gauss.20sums.html#291134313">(Jul 28 2022 at 02:40)</a>:</h4>
<p>I now have the following.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">@[derive [comm_monoid, inhabited]</span><span class="o">]</span> <span class="kd">def</span> <span class="n">add_char</span> <span class="o">:</span> <span class="kt">Type</span> <span class="o">(</span><span class="n">max</span> <span class="n">u</span> <span class="n">v</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="n">multiplicative</span> <span class="n">R</span><span class="o">)</span> <span class="bp">→*</span> <span class="n">R'</span>

<span class="kd">instance</span> <span class="o">:</span> <span class="n">has_coe_to_fun</span> <span class="o">(</span><span class="n">add_char</span> <span class="n">R</span> <span class="n">R'</span><span class="o">)</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="o">(</span><span class="n">multiplicative</span> <span class="n">R</span> <span class="bp">→</span> <span class="n">R'</span><span class="o">))</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">dsimp</span> <span class="n">only</span> <span class="o">[</span><span class="n">add_char</span><span class="o">],</span>
  <span class="n">apply_instance</span><span class="o">,</span>
<span class="kd">end</span>

<span class="kd">instance</span> <span class="n">add_char.monoid_hom_class</span> <span class="o">:</span> <span class="n">monoid_hom_class</span> <span class="o">(</span><span class="n">add_char</span> <span class="n">R</span> <span class="n">R'</span><span class="o">)</span> <span class="o">(</span><span class="n">multiplicative</span> <span class="n">R</span><span class="o">)</span> <span class="n">R'</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">dsimp</span> <span class="n">only</span> <span class="o">[</span><span class="n">add_char</span><span class="o">],</span>
  <span class="n">apply_instance</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>
<p>which seems to be working. But I wonder whether this could be done more elegantly...</p>



<a name="291135992"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Gauss%20sums/near/291135992" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Gauss.20sums.html#291135992">(Jul 28 2022 at 03:13)</a>:</h4>
<p><span class="user-mention" data-user-id="479359">@Michael Stoll</span> If with "elegantly" you mean "shorter", you can write <code>show_term { apply_instance }</code> which will tell you how to turn the proofs into 1-line term-mode constructions.</p>



<a name="291136089"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Gauss%20sums/near/291136089" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Gauss.20sums.html#291136089">(Jul 28 2022 at 03:15)</a>:</h4>
<p>I was more thinking of including the latter two in the <code>@[derive ...]</code> thing.</p>



<a name="291136139"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Gauss%20sums/near/291136139" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Gauss.20sums.html#291136139">(Jul 28 2022 at 03:15)</a>:</h4>
<p>But as you said, those instances aren't true in the full generality, right?</p>



<a name="291136186"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Gauss%20sums/near/291136186" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Gauss.20sums.html#291136186">(Jul 28 2022 at 03:16)</a>:</h4>
<p>I'm a bit surprised that you are deriving <code>comm_monoid</code>...</p>



<a name="291136193"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Gauss%20sums/near/291136193" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Gauss.20sums.html#291136193">(Jul 28 2022 at 03:16)</a>:</h4>
<p>I have changed the target requirement from <code>monoid</code> to <code>comm_monoid</code> <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="291136213"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Gauss%20sums/near/291136213" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Gauss.20sums.html#291136213">(Jul 28 2022 at 03:17)</a>:</h4>
<p>(I doubt that the added generality (with <code>[monoid R']</code>) would be that useful...)</p>



<a name="291137641"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Gauss%20sums/near/291137641" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Gauss.20sums.html#291137641">(Jul 28 2022 at 03:45)</a>:</h4>
<p>It seems <code>derive</code> currently doesn't work with classes with non-class arguments, like <code>M</code> and <code>N</code> in <a href="https://leanprover-community.github.io/mathlib_docs/find/monoid_hom_class">docs#monoid_hom_class</a>. Theoretically there could be multiple <code>monoid_hom_class</code> instances on the same type with different <code>M</code> and <code>N</code>.</p>



<a name="291139834"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Gauss%20sums/near/291139834" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Gauss.20sums.html#291139834">(Jul 28 2022 at 04:23)</a>:</h4>
<p>I have replaced the proofs of the two instances by one-liners (following <span class="user-mention" data-user-id="112680">@Johan Commelin</span> 's suggestion). I hope the new state of affairs is sufficiently satisfactory now. (Building mathlib will take a while, since a lot depends on <code>algebra.big_operators.fin</code>.)</p>



<a name="291151184"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Gauss%20sums/near/291151184" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Gauss.20sums.html#291151184">(Jul 28 2022 at 07:52)</a>:</h4>
<p>One example where things aren't commutative is exponentiation from a lie algebra to a lie group eg matrix exponentiation</p>



<a name="291228888"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Gauss%20sums/near/291228888" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Gauss.20sums.html#291228888">(Jul 28 2022 at 17:54)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/116395-maths/topic/Gauss.20sums/near/291151184">said</a>:</p>
<blockquote>
<p>One example where things aren't commutative is exponentiation from a lie algebra to a lie group eg matrix exponentiation</p>
</blockquote>
<p>I think it is better to wait for <code>add_monoid_to_monoid_hom</code> for this.<br>
<code>add_char</code> is really meant for characters on additive groups (of rings) with values in commutative rings.<br>
Once <code>add_monoid_to_monoid_hom</code> is available, there is no need whatsoever to use <code>add_char</code> outside the setting it is intended for.</p>



<a name="291230662"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Gauss%20sums/near/291230662" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Gauss.20sums.html#291230662">(Jul 28 2022 at 18:09)</a>:</h4>
<blockquote>
<p>One example where things aren't commutative is exponentiation from a lie algebra to a lie group eg matrix exponentiation</p>
</blockquote>
<p>Hmm that sends zsmul to zpow but definitely isn't a homomorphism in the noncommutative case; we have the Baker–Campbell–Hausdorff formula. It sends <code>add</code> to <code>mul</code> if the bracket of the two elements is zero, though.</p>



<a name="291231356"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Gauss%20sums/near/291231356" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Gauss.20sums.html#291231356">(Jul 28 2022 at 18:14)</a>:</h4>
<p>Aah yes of course! So this exponentiation doesn't fit into the picture at all.</p>



<a name="291240250"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Gauss%20sums/near/291240250" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Gauss.20sums.html#291240250">(Jul 28 2022 at 19:28)</a>:</h4>
<p>It does when the Lie group is the group of points of an abelian variety over some local field. (Which is something that comes up in the context of Chabauty's method...)</p>



<a name="291240348"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Gauss%20sums/near/291240348" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Gauss.20sums.html#291240348">(Jul 28 2022 at 19:29)</a>:</h4>
<p>(But in this case, you write the group usually additively, so it's perhaps a moot point in the context of this discussion.)</p>



<a name="291243944"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Gauss%20sums/near/291243944" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Gauss.20sums.html#291243944">(Jul 28 2022 at 19:58)</a>:</h4>
<p>Michael I have been confused for years now about when mathematicians are interested in maps which change <code>*</code> to <code>+</code>. For elliptic curves we've used + as the group law. When Huber sets up valuation theory to do adic spaces he uses multiplicative monoids as a target rather than additive ones, so his valuations send <code>*</code> to <code>*</code>. Another interesting example is Hilbert 90; group cohomology group law will be + so there's something funny going on with <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>H</mi><mn>1</mn></msup><mo stretchy="false">(</mo><mi>G</mi><mi>a</mi><mi>l</mi><mo stretchy="false">(</mo><mi>L</mi><mi mathvariant="normal">/</mi><mi>K</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><msup><mi>L</mi><mo>×</mo></msup><mo stretchy="false">)</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">H^1(Gal(L/K),L^\times)=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">G</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mopen">(</span><span class="mord mathnormal">L</span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7713em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">×</span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>; however this generalises to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>H</mi><mn>1</mn></msup><mo stretchy="false">(</mo><mi>G</mi><mi>a</mi><mi>l</mi><mo stretchy="false">(</mo><mi>L</mi><mi mathvariant="normal">/</mi><mi>K</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>G</mi><msub><mi>L</mi><mi>n</mi></msub><mo stretchy="false">(</mo><mi>L</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">H^1(Gal(L/K),GL_n(L))={1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">G</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mopen">(</span><span class="mord mathnormal">L</span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">G</span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">L</span><span class="mclose">))</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord"><span class="mord">1</span></span></span></span></span> as a pointed set and I'm now wondering whether Hilbert 90 should be reinterpreted as claiming that a pointed set is trivial :-/ I had this exp and log map between Lie algebras and Lie groups in my mind as something else I didn't understand for a while but it's only today that Junyan has pointed out that I was wrong about this. I think tropicalisation of rings is another place where this comes up, but this is something I know next to nothing about.</p>



<a name="291245714"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Gauss%20sums/near/291245714" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Gauss.20sums.html#291245714">(Jul 28 2022 at 20:12)</a>:</h4>
<p>I'm not sure I can think if many examples of homomorphisms between additively and multiplicatively written monoids in a non-commutative setting. After all, there is the convention that additive notation should only be used when the operation is commutative. So in most cases, the multiplicative monoid that shows up will be commutative, too.</p>



<a name="291267787"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Gauss%20sums/near/291267787" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Gauss.20sums.html#291267787">(Jul 28 2022 at 23:51)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> <span class="user-mention" data-user-id="310045">@Eric Wieser</span> <span class="user-mention" data-user-id="224323">@Junyan Xu</span>  I would think that <a href="https://github.com/leanprover-community/mathlib/pull/15684">#15684</a> should be fine now.</p>



<a name="291432838"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Gauss%20sums/near/291432838" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Gauss.20sums.html#291432838">(Jul 30 2022 at 14:47)</a>:</h4>
<p><span class="user-mention" data-user-id="224323">@Junyan Xu</span> suggested to make the private lemmas <code>gauss_sum_mul_aux₁</code> and <code>gauss_sum_mul_aux₂</code> public.<br>
My feeling was that at least <code>gauss_sum_mul_aux₁</code> is maybe too specfic to be useful outside the proof of <code>gauss_sum_mul_gauss_sum_eq_card</code>. The other one, <code>gauss_sum_mul_aux₂</code>, could be more useful. If it is made public, it should probably go into <code>add_character.lean</code> (and get a more descriptive name like <code>add_char.sum_mul</code>) , since it only involves an additive character.<br>
Opinions? <span class="user-mention" data-user-id="112680">@Johan Commelin</span> <span class="user-mention" data-user-id="310045">@Eric Wieser</span> <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> <span class="user-mention" data-user-id="130384">@Riccardo Brasca</span></p>



<a name="291434270"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Gauss%20sums/near/291434270" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Gauss.20sums.html#291434270">(Jul 30 2022 at 15:13)</a>:</h4>
<p>I am still on holiday, I will have a look before next weekend <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="291450500"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Gauss%20sums/near/291450500" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Gauss.20sums.html#291450500">(Jul 30 2022 at 20:56)</a>:</h4>
<p>I'm generally of the opinion that private lemmas don't really serve a useful purpose. Iirc: They aren't lookable up in the docs (for someone reading the proof) and they make it so that someone who copy pastes your proof to a new file will immediately have a broken proof. If we want to guide users to the most interesting results in a file we should do it with big docstrings and a list of the main results in the file header. So even if a lemma is only useful in a specific situation we can just give it a name that won't cause clashes and leave it public</p>



<a name="291453643"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Gauss%20sums/near/291453643" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Gauss.20sums.html#291453643">(Jul 30 2022 at 22:13)</a>:</h4>
<p>Disagree. Sometimes private lemmas are completely subsumed by the result they're used in. Sometimes they break established API conventions as a necessary evil. Sometimes they're so specific and unrelated to the rest of the file that it serves no purpose making it public, and it would only make the docs more confusing.</p>



<a name="291453646"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Gauss%20sums/near/291453646" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Gauss.20sums.html#291453646">(Jul 30 2022 at 22:13)</a>:</h4>
<p>That said, if you're even considering that a private lemma might be useful, that's an indication that it shouldn't have been made private to begin with.</p>



<a name="291453714"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Gauss%20sums/near/291453714" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Gauss.20sums.html#291453714">(Jul 30 2022 at 22:14)</a>:</h4>
<p>I find that programmers will always find a way to have private functions even in languages where there's no such functionality. Think of all the wasted underscores in languages like Python or C. Let's not give them the chance to do this in Lean.</p>



<a name="291523669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Gauss%20sums/near/291523669" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Gauss.20sums.html#291523669">(Aug 01 2022 at 01:38)</a>:</h4>
<p>I have made what used to be <code>gauss_sum_mul_aux₂</code> public and moved it to <code>add_character.lean</code> as <code>add_char.sum_mul_shift</code>.<br>
I have left the other lemma (now <code>gauss_sum_mul_aux</code>) private for now, but I'd be interested in more input on this.</p>



<a name="291523765"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Gauss%20sums/near/291523765" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Gauss.20sums.html#291523765">(Aug 01 2022 at 01:41)</a>:</h4>
<p><span class="user-mention" data-user-id="224323">@Junyan Xu</span> has shortened some of the proofs quite a bit and made the code quite a bit more efficient.<br>
So I hope the PR can be merged now.</p>



<a name="291659987"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Gauss%20sums/near/291659987" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Gauss.20sums.html#291659987">(Aug 02 2022 at 03:19)</a>:</h4>
<p>If there is nothing more to be done, then perhaps sombody can push <a href="https://github.com/leanprover-community/mathlib/pull/15684">#15684</a> onto the merge queue? <span class="user-mention" data-user-id="112680">@Johan Commelin</span></p>



<a name="292231902"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Gauss%20sums/near/292231902" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Gauss.20sums.html#292231902">(Aug 06 2022 at 04:13)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/15888">#15888</a> provides the next step on the way of proving QR using Gauss sums. It adds results to <code>number_theory.legendre_symbol.quadratic_char</code> that give the values of a quadratic character at <code>2</code>, <code>-2</code> and odd primes.<br>
(The next and last step will be to use these for the Legendre symbol.)</p>



<a name="292269957"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Gauss%20sums/near/292269957" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Gauss.20sums.html#292269957">(Aug 06 2022 at 17:40)</a>:</h4>
<p>I'll be on a long trip home from Park City, but it would be nice if people could have a look while I'm offline.<br>
<span class="user-mention" data-user-id="112680">@Johan Commelin</span> <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> <span class="user-mention" data-user-id="224323">@Junyan Xu</span></p>



<a name="292378119"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Gauss%20sums/near/292378119" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Gauss.20sums.html#292378119">(Aug 08 2022 at 09:21)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> Most of the names in <code>number_theory/legendre_symbol/quadratic_char.lean</code> begin with <code>quadratic_char_</code>. Should they go into the root namespace, rater than <code>char.</code>?</p>



<a name="292379186"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Gauss%20sums/near/292379186" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Gauss.20sums.html#292379186">(Aug 08 2022 at 09:33)</a>:</h4>
<p>As a rule of thumb, I think the fully-qualified name should try not to repeat itself.</p>



<a name="292384334"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Gauss%20sums/near/292384334" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Gauss.20sums.html#292384334">(Aug 08 2022 at 10:29)</a>:</h4>
<p>OK, then I'll move the <code>quadratic_char_</code> names to the root namespace and the <code>is_square_neg_one</code> and similar ones to the <code>finite_field</code> namespace.</p>



<a name="292592383"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Gauss%20sums/near/292592383" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Gauss.20sums.html#292592383">(Aug 09 2022 at 14:47)</a>:</h4>
<p>Can <a href="https://github.com/leanprover-community/mathlib/pull/15888">#15888</a> go on the merge queue now? <span class="user-mention" data-user-id="112680">@Johan Commelin</span>  <span class="user-mention" data-user-id="130384">@Riccardo Brasca</span></p>



<a name="292605740"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Gauss%20sums/near/292605740" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Gauss.20sums.html#292605740">(Aug 09 2022 at 15:56)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span>  Thanks!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>