---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/use.3F.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/use.3F.html">use?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="214675694"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/use%3F/near/214675694" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashvni Narayanan <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/use.3F.html#214675694">(Oct 27 2020 at 09:18)</a>:</h4>
<p>I am trying to prove</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">?</span><span class="n">m_1</span> <span class="bp">∈</span> <span class="n">submodule.comap</span> <span class="o">(</span><span class="n">localization_map.lin_coe</span> <span class="o">(</span><span class="n">fraction_ring.of</span> <span class="n">A</span><span class="o">))</span> <span class="n">I.val</span>
</code></pre></div>

<p>and I have</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">g'</span><span class="o">:</span> <span class="n">y</span> <span class="bp">∈</span> <span class="n">submodule.comap</span> <span class="o">(</span><span class="n">localization_map.lin_coe</span> <span class="o">(</span><span class="n">fraction_ring.of</span> <span class="n">A</span><span class="o">))</span> <span class="n">I.val</span>
</code></pre></div>

<p>where <code>?m_1</code> must be of type A, and <code>y</code> is of type A. However, none of <code>exact</code>, <code>refine</code>, <code>assumption</code> or <code>use</code> work. </p>
<p>Any help is appreciated. Thank you!</p>



<a name="214675752"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/use%3F/near/214675752" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/use.3F.html#214675752">(Oct 27 2020 at 09:19)</a>:</h4>
<p>Try <code>convert g'</code></p>



<a name="214675875"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/use%3F/near/214675875" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashvni Narayanan <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/use.3F.html#214675875">(Oct 27 2020 at 09:20)</a>:</h4>
<p>Doesn't work :(</p>



<a name="214675891"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/use%3F/near/214675891" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/use.3F.html#214675891">(Oct 27 2020 at 09:20)</a>:</h4>
<p>Does it fail or result in new goals?</p>



<a name="214675908"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/use%3F/near/214675908" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashvni Narayanan <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/use.3F.html#214675908">(Oct 27 2020 at 09:20)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">invalid</span> <span class="n">type</span> <span class="n">ascription</span><span class="o">,</span> <span class="n">term</span> <span class="n">has</span> <span class="n">type</span>
  <span class="bp">?</span><span class="n">m_1</span>
<span class="n">but</span> <span class="n">is</span> <span class="n">expected</span> <span class="n">to</span> <span class="k">have</span> <span class="n">type</span>
  <span class="bp">?</span><span class="n">m_1</span> <span class="bp">∈</span> <span class="n">submodule.comap</span> <span class="o">(</span><span class="n">localization_map.lin_coe</span> <span class="o">(</span><span class="n">fraction_ring.of</span> <span class="n">A</span><span class="o">))</span> <span class="n">I.val</span>
</code></pre></div>



<a name="214675954"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/use%3F/near/214675954" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashvni Narayanan <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/use.3F.html#214675954">(Oct 27 2020 at 09:21)</a>:</h4>
<p>Well the next goal is to prove that <code>?m_1 : A</code>.</p>



<a name="214675966"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/use%3F/near/214675966" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/use.3F.html#214675966">(Oct 27 2020 at 09:21)</a>:</h4>
<p>Hmm, could you post a <a href="https://leanprover-community.github.io/mwe.html">#mwe</a>? It looks like Lean is getting confused earlier on.</p>



<a name="214676234"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/use%3F/near/214676234" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashvni Narayanan <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/use.3F.html#214676234">(Oct 27 2020 at 09:24)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/blob/d008b1c22ad3f20f61915a66f95a64615709d07f/src/ring_theory/dedekind_domain.lean#L286">https://github.com/leanprover-community/mathlib/blob/d008b1c22ad3f20f61915a66f95a64615709d07f/src/ring_theory/dedekind_domain.lean#L286</a></p>



<a name="214676257"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/use%3F/near/214676257" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashvni Narayanan <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/use.3F.html#214676257">(Oct 27 2020 at 09:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="250372">Ashvni Narayanan</span> <a href="#narrow/stream/116395-maths/topic/use.3F/near/214676234">said</a>:</p>
<blockquote>
<p><a href="https://github.com/leanprover-community/mathlib/blob/d008b1c22ad3f20f61915a66f95a64615709d07f/src/ring_theory/dedekind_domain.lean#L286">https://github.com/leanprover-community/mathlib/blob/d008b1c22ad3f20f61915a66f95a64615709d07f/src/ring_theory/dedekind_domain.lean#L286</a></p>
</blockquote>
<p>Does this help? If not, I'll make an mwe.</p>



<a name="214676405"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/use%3F/near/214676405" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/use.3F.html#214676405">(Oct 27 2020 at 09:26)</a>:</h4>
<p>That should be enough, thanks! One moment please...</p>



<a name="214676784"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/use%3F/near/214676784" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/use.3F.html#214676784">(Oct 27 2020 at 09:30)</a>:</h4>
<p>Aha, the problem seems to be this: you define <code>y</code> in one subgoal, but it should be used in another subgoal.</p>



<a name="214676937"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/use%3F/near/214676937" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/use.3F.html#214676937">(Oct 27 2020 at 09:32)</a>:</h4>
<p>(I'm guessing you did this because you got errors when writing <code>cases (g : ∃ (x : localization (non_zero_divisors A)), x ∈ I)</code>?</p>



<a name="214676942"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/use%3F/near/214676942" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashvni Narayanan <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/use.3F.html#214676942">(Oct 27 2020 at 09:32)</a>:</h4>
<p>I did try <code>rotate</code>, but that ended up giving me other issues with using <code>cases</code>, hence I did not proceed..</p>



<a name="214676963"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/use%3F/near/214676963" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashvni Narayanan <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/use.3F.html#214676963">(Oct 27 2020 at 09:32)</a>:</h4>
<p><span class="user-mention silent" data-user-id="238446">Anne Baanen</span> <a href="#narrow/stream/116395-maths/topic/use.3F/near/214676937">said</a>:</p>
<blockquote>
<p>(I'm guessing you did this because you got errors when writing <code>cases (g : ∃ (x : localization (non_zero_divisors A)), x ∈ I)</code>?</p>
</blockquote>
<p>Haha yes exactly</p>



<a name="214677305"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/use%3F/near/214677305" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/use.3F.html#214677305">(Oct 27 2020 at 09:36)</a>:</h4>
<p>Hmm, I don't know to fix the proof because I'm not quite sure what you're trying to prove here actually. Your goal <code>↥(submodule.comap (localization_map.lin_coe (fraction_ring.of A)) I.val)</code> means "we can compute an element of the ideal" (let's just call it <code>J</code>), but surely we have <code>0 \in J</code>?</p>



<a name="214677543"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/use%3F/near/214677543" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashvni Narayanan <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/use.3F.html#214677543">(Oct 27 2020 at 09:39)</a>:</h4>
<p>What I actually want to prove is that if we have a fractional ideal I, and I \leq 1, then (the preimage of) I must be an ideal of A.</p>



<a name="214677693"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/use%3F/near/214677693" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/use.3F.html#214677693">(Oct 27 2020 at 09:40)</a>:</h4>
<p>Ah, this turns out to be called <code>submodule.comap</code>, as in the function you used to construct your goal :)</p>



<a name="214677873"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/use%3F/near/214677873" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/use.3F.html#214677873">(Oct 27 2020 at 09:42)</a>:</h4>
<p>(In fact, this holds for all fractional ideals: everything outside of <code>A</code> is just discarded by <code>comap</code>.)</p>



<a name="214678226"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/use%3F/near/214678226" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashvni Narayanan <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/use.3F.html#214678226">(Oct 27 2020 at 09:46)</a>:</h4>
<p>Ah I see, hence the I \le 1 is not needed!</p>



<a name="214678259"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/use%3F/near/214678259" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashvni Narayanan <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/use.3F.html#214678259">(Oct 27 2020 at 09:46)</a>:</h4>
<p>Apologies for this, and thank you for your help! :)</p>



<a name="214678313"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/use%3F/near/214678313" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/use.3F.html#214678313">(Oct 27 2020 at 09:47)</a>:</h4>
<p>You're welcome!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>