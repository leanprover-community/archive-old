---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/Induction.20on.20subsets.20of.20a.20finset.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Induction.20on.20subsets.20of.20a.20finset.html">Induction on subsets of a finset</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="217570612"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Induction%20on%20subsets%20of%20a%20finset/near/217570612" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Browning <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Induction.20on.20subsets.20of.20a.20finset.html#217570612">(Nov 22 2020 at 21:18)</a>:</h4>
<p>Is there a way to do induction on subsets of a finset? Something like:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">induction_on'</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">α</span><span class="o">]</span>
  <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">h₁</span> <span class="o">:</span> <span class="n">p</span> <span class="bp">∅</span><span class="o">)</span> <span class="o">(</span><span class="n">h₂</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">a</span> <span class="bp">∈</span> <span class="n">S</span><span class="o">}</span> <span class="o">{</span><span class="n">s</span> <span class="bp">⊆</span> <span class="n">S</span><span class="o">},</span> <span class="n">a</span> <span class="bp">∉</span> <span class="n">s</span> <span class="bp">→</span> <span class="n">p</span> <span class="n">s</span> <span class="bp">→</span> <span class="n">p</span> <span class="o">(</span><span class="n">insert</span> <span class="n">a</span> <span class="n">s</span><span class="o">))</span> <span class="o">:</span> <span class="n">p</span> <span class="n">S</span> <span class="o">:=</span>
</code></pre></div>



<a name="217573629"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Induction%20on%20subsets%20of%20a%20finset/near/217573629" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Induction.20on.20subsets.20of.20a.20finset.html#217573629">(Nov 22 2020 at 22:29)</a>:</h4>
<p>This works:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>

<span class="kd">theorem</span> <span class="n">induction_on'</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">α</span><span class="o">]</span>
  <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">h₁</span> <span class="o">:</span> <span class="n">p</span> <span class="bp">∅</span><span class="o">)</span> <span class="o">(</span><span class="n">h₂</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">a</span> <span class="bp">∈</span> <span class="n">S</span><span class="o">}</span> <span class="o">{</span><span class="n">s</span> <span class="bp">⊆</span> <span class="n">S</span><span class="o">},</span> <span class="n">a</span> <span class="bp">∉</span> <span class="n">s</span> <span class="bp">→</span> <span class="n">p</span> <span class="n">s</span> <span class="bp">→</span> <span class="n">p</span> <span class="o">(</span><span class="n">insert</span> <span class="n">a</span> <span class="n">s</span><span class="o">))</span> <span class="o">:</span> <span class="n">p</span> <span class="n">S</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">let</span> <span class="n">q</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">T</span><span class="o">,</span> <span class="n">T</span> <span class="bp">⊆</span> <span class="n">S</span> <span class="bp">→</span> <span class="n">p</span> <span class="n">T</span><span class="o">,</span>
  <span class="k">suffices</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">T</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">α</span><span class="o">,</span> <span class="n">q</span> <span class="n">T</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">this</span> <span class="n">S</span> <span class="o">(</span><span class="kd">by</span> <span class="n">refl</span><span class="o">),</span>
  <span class="k">have</span> <span class="n">hq₁</span> <span class="o">:</span> <span class="n">q</span> <span class="bp">∅</span><span class="o">,</span>
    <span class="n">rintro</span> <span class="bp">-</span><span class="o">,</span> <span class="n">exact</span> <span class="n">h₁</span><span class="o">,</span>
  <span class="n">refine</span> <span class="n">finset.induction</span> <span class="n">hq₁</span> <span class="n">_</span><span class="o">,</span>
  <span class="n">intros</span> <span class="n">a</span> <span class="n">s</span> <span class="n">has</span> <span class="n">hqs</span><span class="o">,</span>
  <span class="n">rintro</span> <span class="n">hs</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">h₂</span> <span class="n">has</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">apply</span> <span class="n">hqs</span><span class="o">,</span>
    <span class="n">refine</span> <span class="n">finset.subset.trans</span> <span class="n">_</span> <span class="n">hs</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">finset.subset_insert</span> <span class="n">a</span> <span class="n">s</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">apply</span> <span class="n">hs</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">finset.mem_insert_self</span> <span class="n">a</span> <span class="n">s</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">refine</span> <span class="n">finset.subset.trans</span> <span class="n">_</span> <span class="n">hs</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">finset.subset_insert</span> <span class="n">a</span> <span class="n">s</span><span class="o">}</span>
<span class="kd">end</span>
</code></pre></div>
<p>and I'm sure it can be golfed. The idea is to beef <code>p</code> up into a predicate <code>q</code> which is true for all finsets and then prove it by the finset induction lemma in mathlib. Might be worth a PR if you can tidy up the proof a bit?</p>



<a name="217573897"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Induction%20on%20subsets%20of%20a%20finset/near/217573897" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Browning <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Induction.20on.20subsets.20of.20a.20finset.html#217573897">(Nov 22 2020 at 22:35)</a>:</h4>
<p>that seems like a decent way to do it. I was trying to do it by working on <code>finset (subtype (λ x, x ∈ S))</code>, but it wasn't pretty</p>



<a name="217573950"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Induction%20on%20subsets%20of%20a%20finset/near/217573950" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Induction.20on.20subsets.20of.20a.20finset.html#217573950">(Nov 22 2020 at 22:36)</a>:</h4>
<p>An analogous question came up recently (Eric, Reid and I were talking about some induction principle for submodules) and the same sort of idea worked there, that's why I went for it first on this occasion.</p>



<a name="217574029"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Induction%20on%20subsets%20of%20a%20finset/near/217574029" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Induction.20on.20subsets.20of.20a.20finset.html#217574029">(Nov 22 2020 at 22:38)</a>:</h4>
<p>I have really got into the habit of using <code>apply</code> to take shortcuts (why use <code>refine h _ _</code> when you can just <code>apply h</code>?) but actually I am now coming back to <code>refine</code>. Lean's unifier works best if it knows exactly what goal it is supposed to be proving. If you turn the <code>apply</code>s into <code>refine</code>s by inserting the appropriate <code>_</code>s then you will be able to compress this a bunch.</p>



<a name="217574341"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Induction%20on%20subsets%20of%20a%20finset/near/217574341" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Browning <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Induction.20on.20subsets.20of.20a.20finset.html#217574341">(Nov 22 2020 at 22:46)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">induction_on'</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">α</span><span class="o">]</span>
  <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">h₁</span> <span class="o">:</span> <span class="n">p</span> <span class="bp">∅</span><span class="o">)</span> <span class="o">(</span><span class="n">h₂</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">a</span> <span class="bp">∈</span> <span class="n">S</span><span class="o">}</span> <span class="o">{</span><span class="n">s</span> <span class="bp">⊆</span> <span class="n">S</span><span class="o">},</span> <span class="n">a</span> <span class="bp">∉</span> <span class="n">s</span> <span class="bp">→</span> <span class="n">p</span> <span class="n">s</span> <span class="bp">→</span> <span class="n">p</span> <span class="o">(</span><span class="n">insert</span> <span class="n">a</span> <span class="n">s</span><span class="o">))</span> <span class="o">:</span> <span class="n">p</span> <span class="n">S</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">let</span> <span class="n">q</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">T</span><span class="o">,</span> <span class="n">T</span> <span class="bp">⊆</span> <span class="n">S</span> <span class="bp">→</span> <span class="n">p</span> <span class="n">T</span><span class="o">,</span>
  <span class="k">suffices</span> <span class="o">:</span> <span class="n">q</span> <span class="n">S</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">exact</span> <span class="n">this</span> <span class="o">(</span><span class="n">finset.subset.refl</span> <span class="n">S</span><span class="o">)</span> <span class="o">},</span>
  <span class="n">apply</span> <span class="n">finset.induction_on</span> <span class="n">S</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">exact</span> <span class="bp">λ</span> <span class="n">_</span><span class="o">,</span> <span class="n">h₁</span> <span class="o">},</span>
  <span class="n">intros</span> <span class="n">a</span> <span class="n">s</span> <span class="n">has</span> <span class="n">hqs</span> <span class="n">hs</span><span class="o">,</span>
  <span class="n">refine</span> <span class="n">h₂</span> <span class="n">has</span> <span class="o">(</span><span class="n">hqs</span> <span class="o">(</span><span class="n">finset.insert_subset.1</span> <span class="n">hs</span><span class="o">)</span><span class="bp">.</span><span class="mi">2</span><span class="o">),</span>
  <span class="o">{</span> <span class="n">exact</span> <span class="o">(</span><span class="n">finset.insert_subset.1</span> <span class="n">hs</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">exact</span> <span class="o">(</span><span class="n">finset.insert_subset.1</span> <span class="n">hs</span><span class="o">)</span><span class="bp">.</span><span class="mi">2</span><span class="o">,</span> <span class="o">}</span>
<span class="kd">end</span>
</code></pre></div>



<a name="217574369"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Induction%20on%20subsets%20of%20a%20finset/near/217574369" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Browning <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Induction.20on.20subsets.20of.20a.20finset.html#217574369">(Nov 22 2020 at 22:47)</a>:</h4>
<p>should I PR it?</p>



<a name="217574371"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Induction%20on%20subsets%20of%20a%20finset/near/217574371" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Induction.20on.20subsets.20of.20a.20finset.html#217574371">(Nov 22 2020 at 22:47)</a>:</h4>
<p>I think you can combine the suffices and the let</p>



<a name="217574416"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Induction%20on%20subsets%20of%20a%20finset/near/217574416" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Induction.20on.20subsets.20of.20a.20finset.html#217574416">(Nov 22 2020 at 22:48)</a>:</h4>
<p>The similar lemma Kevin is referring to is <a href="https://leanprover-community.github.io/mathlib_docs/find/submonoid.closure_induction'">docs#submonoid.closure_induction'</a></p>



<a name="217574597"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Induction%20on%20subsets%20of%20a%20finset/near/217574597" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Browning <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Induction.20on.20subsets.20of.20a.20finset.html#217574597">(Nov 22 2020 at 22:53)</a>:</h4>
<p>Before I PR, what's preferable for mathlib: The above tactic mode proof of this term mode proof?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">induction_on'</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">α</span><span class="o">]</span>
  <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">h₁</span> <span class="o">:</span> <span class="n">p</span> <span class="bp">∅</span><span class="o">)</span> <span class="o">(</span><span class="n">h₂</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">a</span> <span class="bp">∈</span> <span class="n">S</span><span class="o">}</span> <span class="o">{</span><span class="n">s</span> <span class="bp">⊆</span> <span class="n">S</span><span class="o">},</span> <span class="n">a</span> <span class="bp">∉</span> <span class="n">s</span> <span class="bp">→</span> <span class="n">p</span> <span class="n">s</span> <span class="bp">→</span> <span class="n">p</span> <span class="o">(</span><span class="n">insert</span> <span class="n">a</span> <span class="n">s</span><span class="o">))</span> <span class="o">:</span> <span class="n">p</span> <span class="n">S</span> <span class="o">:=</span>
<span class="bp">@</span><span class="n">finset.induction_on</span> <span class="n">α</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">T</span><span class="o">,</span> <span class="n">T</span> <span class="bp">⊆</span> <span class="n">S</span> <span class="bp">→</span> <span class="n">p</span> <span class="n">T</span><span class="o">)</span> <span class="n">_</span> <span class="n">S</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">_</span><span class="o">,</span> <span class="n">h₁</span><span class="o">)</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">a</span> <span class="n">s</span> <span class="n">has</span> <span class="n">hqs</span> <span class="n">hs</span><span class="o">,</span>
  <span class="o">(</span><span class="bp">@</span><span class="n">h₂</span> <span class="n">a</span> <span class="o">(</span><span class="n">finset.insert_subset.1</span> <span class="n">hs</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span> <span class="n">s</span> <span class="o">(</span><span class="n">finset.insert_subset.1</span> <span class="n">hs</span><span class="o">)</span><span class="bp">.</span><span class="mi">2</span>
  <span class="n">has</span> <span class="o">(</span><span class="n">hqs</span> <span class="o">(</span><span class="n">finset.insert_subset.1</span> <span class="n">hs</span><span class="o">)</span><span class="bp">.</span><span class="mi">2</span><span class="o">)))</span> <span class="o">(</span><span class="n">finset.subset.refl</span> <span class="n">S</span><span class="o">)</span>
</code></pre></div>



<a name="217574769"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Induction%20on%20subsets%20of%20a%20finset/near/217574769" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Induction.20on.20subsets.20of.20a.20finset.html#217574769">(Nov 22 2020 at 22:57)</a>:</h4>
<p><code>finset</code> was mostly written by Mario and I can guess what he'd prefer, from <code>induction</code>:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">@[elab_as_eliminator]</span>
<span class="kn">protected</span> <span class="kd">theorem</span> <span class="n">induction</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">α</span><span class="o">]</span>
  <span class="o">(</span><span class="n">h₁</span> <span class="o">:</span> <span class="n">p</span> <span class="bp">∅</span><span class="o">)</span> <span class="o">(</span><span class="n">h₂</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">⦃</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">⦄</span> <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">α</span><span class="o">},</span> <span class="n">a</span> <span class="bp">∉</span> <span class="n">s</span> <span class="bp">→</span> <span class="n">p</span> <span class="n">s</span> <span class="bp">→</span> <span class="n">p</span> <span class="o">(</span><span class="n">insert</span> <span class="n">a</span> <span class="n">s</span><span class="o">))</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">s</span><span class="o">,</span> <span class="n">p</span> <span class="n">s</span>
<span class="bp">|</span> <span class="o">⟨</span><span class="n">s</span><span class="o">,</span> <span class="n">nd</span><span class="o">⟩</span> <span class="o">:=</span> <span class="n">multiset.induction_on</span> <span class="n">s</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">_</span><span class="o">,</span> <span class="n">h₁</span><span class="o">)</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">a</span> <span class="n">s</span> <span class="n">IH</span> <span class="n">nd</span><span class="o">,</span> <span class="kd">begin</span>
    <span class="n">cases</span> <span class="n">nodup_cons.1</span> <span class="n">nd</span> <span class="k">with</span> <span class="n">m</span> <span class="n">nd'</span><span class="o">,</span>
    <span class="n">rw</span> <span class="o">[</span><span class="bp">←</span> <span class="o">(</span><span class="n">eq_of_veq</span> <span class="n">_</span> <span class="o">:</span> <span class="n">insert</span> <span class="n">a</span> <span class="o">(</span><span class="n">finset.mk</span> <span class="n">s</span> <span class="n">_</span><span class="o">)</span> <span class="bp">=</span> <span class="o">⟨</span><span class="n">a</span> <span class="o">::</span><span class="bp">ₘ</span> <span class="n">s</span><span class="o">,</span> <span class="n">nd</span><span class="o">⟩)],</span>
    <span class="o">{</span> <span class="n">exact</span> <span class="n">h₂</span> <span class="o">(</span><span class="kd">by</span> <span class="n">exact</span> <span class="n">m</span><span class="o">)</span> <span class="o">(</span><span class="n">IH</span> <span class="n">nd'</span><span class="o">)</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="n">insert_val</span><span class="o">,</span> <span class="n">ndinsert_of_not_mem</span> <span class="n">m</span><span class="o">]</span> <span class="o">}</span>
  <span class="kd">end</span><span class="o">)</span> <span class="n">nd</span>
</code></pre></div>



<a name="217574840"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Induction%20on%20subsets%20of%20a%20finset/near/217574840" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Induction.20on.20subsets.20of.20a.20finset.html#217574840">(Nov 22 2020 at 22:58)</a>:</h4>
<p>Oh actually that is mostly tactic mode :-) But I'd say the term mode proof. It's not like that there's anything mathematically complex going on. Why not <code>set_option profiler true</code> and see if the term mode version is faster?</p>



<a name="217574842"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Induction%20on%20subsets%20of%20a%20finset/near/217574842" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Induction.20on.20subsets.20of.20a.20finset.html#217574842">(Nov 22 2020 at 22:58)</a>:</h4>
<p>You can golf it a bit more by pattern matching <code>finset.insert_subset.1 hs</code></p>



<a name="217574881"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Induction%20on%20subsets%20of%20a%20finset/near/217574881" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Browning <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Induction.20on.20subsets.20of.20a.20finset.html#217574881">(Nov 22 2020 at 23:00)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/116395-maths/topic/Induction.20on.20subsets.20of.20a.20finset/near/217574842">said</a>:</p>
<blockquote>
<p>You can golf it a bit more by pattern matching <code>finset.insert_subset.1 hs</code></p>
</blockquote>
<p>I can't quite see how to do it. What's the trick?</p>



<a name="217574946"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Induction%20on%20subsets%20of%20a%20finset/near/217574946" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Induction.20on.20subsets.20of.20a.20finset.html#217574946">(Nov 22 2020 at 23:00)</a>:</h4>
<div class="codehilite" data-code-language="Text only"><pre><span></span><code>elaboration of induction_on'_tactic took 32.1ms
elaboration of induction_on'_term took 4.68ms
</code></pre></div>
<p>A huge difference, in some sense.</p>



<a name="217574967"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Induction%20on%20subsets%20of%20a%20finset/near/217574967" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Induction.20on.20subsets.20of.20a.20finset.html#217574967">(Nov 22 2020 at 23:01)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">induction_on'</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">α</span><span class="o">]</span>
  <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">h₁</span> <span class="o">:</span> <span class="n">p</span> <span class="bp">∅</span><span class="o">)</span> <span class="o">(</span><span class="n">h₂</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">a</span> <span class="bp">∈</span> <span class="n">S</span><span class="o">}</span> <span class="o">{</span><span class="n">s</span> <span class="bp">⊆</span> <span class="n">S</span><span class="o">},</span> <span class="n">a</span> <span class="bp">∉</span> <span class="n">s</span> <span class="bp">→</span> <span class="n">p</span> <span class="n">s</span> <span class="bp">→</span> <span class="n">p</span> <span class="o">(</span><span class="n">insert</span> <span class="n">a</span> <span class="n">s</span><span class="o">))</span> <span class="o">:</span> <span class="n">p</span> <span class="n">S</span> <span class="o">:=</span>
<span class="bp">@</span><span class="n">finset.induction_on</span> <span class="n">α</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">T</span><span class="o">,</span> <span class="n">T</span> <span class="bp">⊆</span> <span class="n">S</span> <span class="bp">→</span> <span class="n">p</span> <span class="n">T</span><span class="o">)</span> <span class="n">_</span> <span class="n">S</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">_</span><span class="o">,</span> <span class="n">h₁</span><span class="o">)</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">a</span> <span class="n">s</span> <span class="n">has</span> <span class="n">hqs</span> <span class="n">hs</span><span class="o">,</span>
  <span class="k">let</span> <span class="o">⟨</span><span class="n">hS</span><span class="o">,</span> <span class="n">sS</span><span class="o">⟩</span> <span class="o">:=</span> <span class="n">finset.insert_subset.1</span> <span class="n">hs</span> <span class="k">in</span> <span class="bp">@</span><span class="n">h₂</span> <span class="n">a</span> <span class="n">hS</span> <span class="n">s</span> <span class="n">sS</span> <span class="n">has</span> <span class="o">(</span><span class="n">hqs</span> <span class="n">sS</span><span class="o">))</span> <span class="o">(</span><span class="n">finset.subset.refl</span> <span class="n">S</span><span class="o">)</span>
</code></pre></div>



<a name="217575071"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Induction%20on%20subsets%20of%20a%20finset/near/217575071" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Induction.20on.20subsets.20of.20a.20finset.html#217575071">(Nov 22 2020 at 23:03)</a>:</h4>
<p>I would also change the implicit binders a bit:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">induction_on'</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">}</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">α</span><span class="o">]</span>
  <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">h₁</span> <span class="o">:</span> <span class="n">p</span> <span class="bp">∅</span><span class="o">)</span> <span class="o">(</span><span class="n">h₂</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">a</span> <span class="n">s</span><span class="o">},</span> <span class="n">a</span> <span class="bp">∈</span> <span class="n">S</span> <span class="bp">→</span> <span class="n">s</span> <span class="bp">⊆</span> <span class="n">S</span> <span class="bp">→</span> <span class="n">a</span> <span class="bp">∉</span> <span class="n">s</span> <span class="bp">→</span> <span class="n">p</span> <span class="n">s</span> <span class="bp">→</span> <span class="n">p</span> <span class="o">(</span><span class="n">insert</span> <span class="n">a</span> <span class="n">s</span><span class="o">))</span> <span class="o">:</span> <span class="n">p</span> <span class="n">S</span> <span class="o">:=</span>
<span class="bp">@</span><span class="n">finset.induction_on</span> <span class="n">α</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">T</span><span class="o">,</span> <span class="n">T</span> <span class="bp">⊆</span> <span class="n">S</span> <span class="bp">→</span> <span class="n">p</span> <span class="n">T</span><span class="o">)</span> <span class="n">_</span> <span class="n">S</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">_</span><span class="o">,</span> <span class="n">h₁</span><span class="o">)</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">a</span> <span class="n">s</span> <span class="n">has</span> <span class="n">hqs</span> <span class="n">hs</span><span class="o">,</span>
  <span class="k">let</span> <span class="o">⟨</span><span class="n">hS</span><span class="o">,</span> <span class="n">sS</span><span class="o">⟩</span> <span class="o">:=</span> <span class="n">finset.insert_subset.1</span> <span class="n">hs</span> <span class="k">in</span> <span class="n">h₂</span> <span class="n">hS</span> <span class="n">sS</span> <span class="n">has</span> <span class="o">(</span><span class="n">hqs</span> <span class="n">sS</span><span class="o">))</span> <span class="o">(</span><span class="n">finset.subset.refl</span> <span class="n">S</span><span class="o">)</span>
</code></pre></div>



<a name="217575081"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Induction%20on%20subsets%20of%20a%20finset/near/217575081" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Induction.20on.20subsets.20of.20a.20finset.html#217575081">(Nov 22 2020 at 23:03)</a>:</h4>
<p>See? It was an easy two-liner after all :P</p>



<a name="217575167"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Induction%20on%20subsets%20of%20a%20finset/near/217575167" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Induction.20on.20subsets.20of.20a.20finset.html#217575167">(Nov 22 2020 at 23:05)</a>:</h4>
<p>Length of proof is disconcertingly similar to length of statement.</p>



<a name="217575219"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Induction%20on%20subsets%20of%20a%20finset/near/217575219" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Induction.20on.20subsets.20of.20a.20finset.html#217575219">(Nov 22 2020 at 23:06)</a>:</h4>
<p>I wonder what percentage of mathlib theorems are longer than their proofs</p>



<a name="217575256"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Induction%20on%20subsets%20of%20a%20finset/near/217575256" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Induction.20on.20subsets.20of.20a.20finset.html#217575256">(Nov 22 2020 at 23:07)</a>:</h4>
<p>More interesting would to see how the answers changed as you move further down the heirarchy. IIRC most of the proofs in data.complex.basic are <code>by ext; simp</code> whereas most of the proofs in <code>discrete_valuation_ring</code> are 10 line tactic proofs.</p>



<a name="217575301"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Induction%20on%20subsets%20of%20a%20finset/near/217575301" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Browning <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Induction.20on.20subsets.20of.20a.20finset.html#217575301">(Nov 22 2020 at 23:08)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/5087">#5087</a></p>



<a name="217575322"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Induction%20on%20subsets%20of%20a%20finset/near/217575322" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Induction.20on.20subsets.20of.20a.20finset.html#217575322">(Nov 22 2020 at 23:09)</a>:</h4>
<p>I was looking through old branches of mine today and I found <a href="https://github.com/leanprover-community/mathlib/compare/complex-tidyup#diff-83b09052d14afe3d83c572b16c9cc307a6360889b3a9d8a71525f6260786dc23">this</a>; golfing <code>data.complex.basic</code>. I never PR'ed it because I wasn't sure there was much point :-)</p>



<a name="217575384"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Induction%20on%20subsets%20of%20a%20finset/near/217575384" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Browning <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Induction.20on.20subsets.20of.20a.20finset.html#217575384">(Nov 22 2020 at 23:10)</a>:</h4>
<p>was this back when you were working on the complex number game?</p>



<a name="217575481"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Induction%20on%20subsets%20of%20a%20finset/near/217575481" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Induction.20on.20subsets.20of.20a.20finset.html#217575481">(Nov 22 2020 at 23:13)</a>:</h4>
<p>lol Eric and I had the same thought whilst reviewing :-)</p>



<a name="217575559"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Induction%20on%20subsets%20of%20a%20finset/near/217575559" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Induction.20on.20subsets.20of.20a.20finset.html#217575559">(Nov 22 2020 at 23:15)</a>:</h4>
<p>My only experience with <code>recursor</code> is it not working for the case I cared about and no one responding to my <a href="https://leanprover-community.github.io/mwe.html">#mwe</a> showing the failure...</p>



<a name="217576885"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Induction%20on%20subsets%20of%20a%20finset/near/217576885" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Induction.20on.20subsets.20of.20a.20finset.html#217576885">(Nov 22 2020 at 23:47)</a>:</h4>
<p>there will be this issue that you won't be able to touch the goal while proving the induction hypothesis if you have <code>classical.dec</code> as local instance</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>