---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/Fintype.20as.20measurable.20spaces.3F.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Fintype.20as.20measurable.20spaces.3F.html">Fintype as measurable spaces?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="204628153"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Fintype%20as%20measurable%20spaces%3F/near/204628153" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Frédéric Dupuis <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Fintype.20as.20measurable.20spaces.3F.html#204628153">(Jul 22 2020 at 03:53)</a>:</h4>
<p>Is there a reason why fintypes are not automatically declared as measurables spaces? I.e. would adding something like</p>
<div class="codehilite"><pre><span></span><code><span class="kn">instance</span> <span class="n">fintype</span><span class="bp">.</span><span class="n">is_measurable_space</span> <span class="o">{</span><span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">β</span><span class="o">]</span> <span class="o">:</span> <span class="n">measurable_space</span> <span class="n">β</span> <span class="o">:=</span> <span class="err">⊤</span>
</code></pre></div>


<p>to <code>measure_theory/measurable_space.lean</code> make sense or is there a subtle issue I'm missing?</p>



<a name="204631561"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Fintype%20as%20measurable%20spaces%3F/near/204631561" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Fintype.20as.20measurable.20spaces.3F.html#204631561">(Jul 22 2020 at 05:29)</a>:</h4>
<p>We try to be cautious about adding unconstrained typeclasses, because they add a lot of work in the typeclass search. (Instances which only fire when certain structure appears are fine.)</p>



<a name="204631567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Fintype%20as%20measurable%20spaces%3F/near/204631567" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Fintype.20as.20measurable.20spaces.3F.html#204631567">(Jul 22 2020 at 05:29)</a>:</h4>
<p>I'm not sure if that was a consideration here.</p>



<a name="204631573"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Fintype%20as%20measurable%20spaces%3F/near/204631573" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Fintype.20as.20measurable.20spaces.3F.html#204631573">(Jul 22 2020 at 05:29)</a>:</h4>
<p>It's also possible that no one has wanted this instance enough yet.</p>



<a name="204632052"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Fintype%20as%20measurable%20spaces%3F/near/204632052" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Fintype.20as.20measurable.20spaces.3F.html#204632052">(Jul 22 2020 at 05:40)</a>:</h4>
<p>What does <code>\top</code> mean here? This should be simply the counting measure, right?</p>



<a name="204632062"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Fintype%20as%20measurable%20spaces%3F/near/204632062" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Fintype.20as.20measurable.20spaces.3F.html#204632062">(Jul 22 2020 at 05:41)</a>:</h4>
<p>But what if I want to count the elements of my fintype with different weights?</p>



<a name="204632120"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Fintype%20as%20measurable%20spaces%3F/near/204632120" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Fintype.20as.20measurable.20spaces.3F.html#204632120">(Jul 22 2020 at 05:42)</a>:</h4>
<p>Maybe the library actually supports that nowadays. Having one measure inferred by typeclass inference, but also have others around explicitly.</p>



<a name="204632809"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Fintype%20as%20measurable%20spaces%3F/near/204632809" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Fintype.20as.20measurable.20spaces.3F.html#204632809">(Jul 22 2020 at 05:59)</a>:</h4>
<p><code>measurable_space</code> is about a fixed sigma-algebra, not a measure.</p>



<a name="204632819"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Fintype%20as%20measurable%20spaces%3F/near/204632819" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Fintype.20as.20measurable.20spaces.3F.html#204632819">(Jul 22 2020 at 05:59)</a>:</h4>
<p>Currently integrals take <code>measure</code> argument.</p>



<a name="204632825"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Fintype%20as%20measurable%20spaces%3F/near/204632825" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Fintype.20as.20measurable.20spaces.3F.html#204632825">(Jul 22 2020 at 05:59)</a>:</h4>
<p>So you can have, e.g., <code>counting.with_density f</code>.</p>



<a name="204632904"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Fintype%20as%20measurable%20spaces%3F/near/204632904" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Fintype.20as.20measurable.20spaces.3F.html#204632904">(Jul 22 2020 at 06:01)</a>:</h4>
<p>I mean <code>∫ x, f x ∂(count.with_density g)</code></p>



<a name="204632932"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Fintype%20as%20measurable%20spaces%3F/near/204632932" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Fintype.20as.20measurable.20spaces.3F.html#204632932">(Jul 22 2020 at 06:01)</a>:</h4>
<p>And <code>\top</code> for <code>measurable_space</code> means "every set is measurable", like <code>\bot</code> for <code>topological_space</code>.</p>



<a name="204633069"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Fintype%20as%20measurable%20spaces%3F/near/204633069" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Fintype.20as.20measurable.20spaces.3F.html#204633069">(Jul 22 2020 at 06:04)</a>:</h4>
<p>Aaah right. I was being confused. So that instance definitely makes sense</p>



<a name="204672908"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Fintype%20as%20measurable%20spaces%3F/near/204672908" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Frédéric Dupuis <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Fintype.20as.20measurable.20spaces.3F.html#204672908">(Jul 22 2020 at 14:28)</a>:</h4>
<p>Yes, basically this would go alongside these:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">instance</span> <span class="o">:</span> <span class="n">measurable_space</span> <span class="n">empty</span> <span class="o">:=</span> <span class="err">⊤</span>
<span class="kn">instance</span> <span class="o">:</span> <span class="n">measurable_space</span> <span class="n">unit</span> <span class="o">:=</span> <span class="err">⊤</span>
<span class="kn">instance</span> <span class="o">:</span> <span class="n">measurable_space</span> <span class="n">bool</span> <span class="o">:=</span> <span class="err">⊤</span>
<span class="kn">instance</span> <span class="o">:</span> <span class="n">measurable_space</span> <span class="bp">ℕ</span> <span class="o">:=</span> <span class="err">⊤</span>
<span class="kn">instance</span> <span class="o">:</span> <span class="n">measurable_space</span> <span class="bp">ℤ</span> <span class="o">:=</span> <span class="err">⊤</span>
<span class="kn">instance</span> <span class="o">:</span> <span class="n">measurable_space</span> <span class="n">ℚ</span> <span class="o">:=</span> <span class="err">⊤</span>
</code></pre></div>


<p>I was interested in this because I was thinking of doing some probability theory, and in the discrete case it would be really inconvenient to have to explicitly specify that things are measurable all the time.</p>



<a name="204758699"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Fintype%20as%20measurable%20spaces%3F/near/204758699" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Fintype.20as.20measurable.20spaces.3F.html#204758699">(Jul 23 2020 at 04:03)</a>:</h4>
<p>I think that we should have a typeclass for "all sets are measurable".</p>



<a name="204758707"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Fintype%20as%20measurable%20spaces%3F/near/204758707" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Fintype.20as.20measurable.20spaces.3F.html#204758707">(Jul 23 2020 at 04:03)</a>:</h4>
<p>Like <a href="https://leanprover-community.github.io/mathlib_docs/find/discrete_topology/src">src#discrete_topology</a></p>



<a name="204758760"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Fintype%20as%20measurable%20spaces%3F/near/204758760" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Fintype.20as.20measurable.20spaces.3F.html#204758760">(Jul 23 2020 at 04:04)</a>:</h4>
<p>Note that some facts from probability theory work for any measure with <code>μ univ = 1</code>.</p>



<a name="204758784"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Fintype%20as%20measurable%20spaces%3F/near/204758784" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Fintype.20as.20measurable.20spaces.3F.html#204758784">(Jul 23 2020 at 04:05)</a>:</h4>
<p>Please don't assume <code>[fintype]</code> everywhere.</p>



<a name="204758916"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Fintype%20as%20measurable%20spaces%3F/near/204758916" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Fintype.20as.20measurable.20spaces.3F.html#204758916">(Jul 23 2020 at 04:08)</a>:</h4>
<p>I think that we should have at least the following typeclasses (possibly under different names):</p>
<ol>
<li><code>probability_measure (μ : measure α) := (meas_univ_1 : μ univ = 1)</code>;</li>
<li><code>finite_measure (μ : measure α) := (meas_univ_fin : μ univ &lt; \top)</code>;</li>
<li><code>no_atoms_measure (μ : measure α) := (meas_singleton : ∀ x, μ {x} = 0)</code>;</li>
</ol>
<p><span class="user-mention" data-user-id="110050">@Sebastien Gouezel</span> what else comes to your mind?</p>



<a name="204855935"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Fintype%20as%20measurable%20spaces%3F/near/204855935" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Frédéric Dupuis <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Fintype.20as.20measurable.20spaces.3F.html#204855935">(Jul 23 2020 at 21:32)</a>:</h4>
<p>Yes, assuming <code>[fintype]</code> everywhere is precisely what I wanted to avoid: I want to work on the general case while making sure that the results can then be used comfortably in the discrete case. Those typeclasses sound good.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>