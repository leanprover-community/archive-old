---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/fastest.20approach.20to.20proving.20equation.20iffs.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/fastest.20approach.20to.20proving.20equation.20iffs.html">fastest approach to proving equation iffs</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="231842658"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fastest%20approach%20to%20proving%20equation%20iffs/near/231842658" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Belisarius Cawl <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/fastest.20approach.20to.20proving.20equation.20iffs.html#231842658">(Mar 25 2021 at 17:27)</a>:</h4>
<p>I want to prove the following:</p>
<p>(EDIT: mwe + backticks)</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.real.basic</span>
<span class="kn">import</span> <span class="n">tactic.suggest</span>
<span class="kn">import</span> <span class="n">analysis.special_functions.pow</span>
<span class="kn">import</span> <span class="n">tactic.rewrite_search.frontend</span>


<span class="kd">lemma</span> <span class="n">delta_A</span>
  <span class="o">(</span><span class="n">A</span> <span class="n">T</span> <span class="bp">Δ</span><span class="n">A</span> <span class="bp">Δ</span><span class="n">T</span> <span class="n">a</span> <span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span>
  <span class="o">(</span><span class="n">posA</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">)</span>
  <span class="o">(</span><span class="n">posT</span> <span class="o">:</span> <span class="n">T</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">)</span>
  <span class="o">(</span><span class="n">posA'</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">+</span> <span class="bp">Δ</span><span class="n">A</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">)</span>
  <span class="o">(</span><span class="n">posT'</span> <span class="o">:</span> <span class="n">T</span> <span class="bp">+</span> <span class="bp">Δ</span><span class="n">T</span> <span class="bp">&gt;</span> <span class="mi">0</span><span class="o">)</span>
  <span class="o">(</span><span class="n">mina</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">a</span><span class="o">)</span>
  <span class="o">(</span><span class="n">mint</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">t</span><span class="o">)</span>
  <span class="o">(</span><span class="n">maxa</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&lt;</span> <span class="mi">1</span><span class="o">)</span>
  <span class="o">(</span><span class="n">maxt</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">&lt;</span> <span class="mi">1</span><span class="o">)</span>
   <span class="o">:</span>
   <span class="n">A</span><span class="bp">^</span><span class="n">a</span> <span class="bp">*</span> <span class="n">T</span><span class="bp">^</span><span class="n">t</span>  <span class="bp">=</span> <span class="o">(</span><span class="n">A</span> <span class="bp">+</span> <span class="bp">Δ</span><span class="n">A</span><span class="o">)</span><span class="bp">^</span><span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">T</span> <span class="bp">+</span> <span class="bp">Δ</span><span class="n">T</span><span class="o">)</span><span class="bp">^</span><span class="n">t</span>
   <span class="bp">↔</span>
   <span class="bp">Δ</span><span class="n">A</span> <span class="bp">=</span> <span class="n">A</span> <span class="bp">*</span> <span class="o">((</span><span class="n">T</span><span class="bp">/</span><span class="o">(</span><span class="n">T</span><span class="bp">+Δ</span><span class="n">T</span><span class="o">))</span> <span class="bp">^</span> <span class="o">(</span><span class="n">t</span><span class="bp">/</span><span class="n">a</span><span class="o">)</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">)</span>

  <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rewrite_search</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>
<p>how would be the best way to go about this? rewrite_search says "search failed: all vertices explored". Also I feel I have to tell LEAN about the assumptions somehow - in the numbers game I would use cases but not sure what it does with reals.</p>
<p>(I guess I could manually invoke all the lemmas but doubt this is the fastest approach)</p>



<a name="231842902"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fastest%20approach%20to%20proving%20equation%20iffs/near/231842902" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/fastest.20approach.20to.20proving.20equation.20iffs.html#231842902">(Mar 25 2021 at 17:28)</a>:</h4>
<p>right now that's pretty easy to prove because maxt is a false assumption. Why not set this up as a <a href="https://leanprover-community.github.io/mwe.html">#mwe</a> and post code in triple backticks?</p>



<a name="231843379"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fastest%20approach%20to%20proving%20equation%20iffs/near/231843379" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Belisarius Cawl <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/fastest.20approach.20to.20proving.20equation.20iffs.html#231843379">(Mar 25 2021 at 17:31)</a>:</h4>
<p>ah, right. Typo, also did not know about the mwe rule. brb.</p>



<a name="231843387"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fastest%20approach%20to%20proving%20equation%20iffs/near/231843387" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/fastest.20approach.20to.20proving.20equation.20iffs.html#231843387">(Mar 25 2021 at 17:31)</a>:</h4>
<p>I'm not sure your goal is true even if you fix the maxt issue -- if Delta A is large and negative then you're going to be taking the a'th power of a negative number, which will give meaningless results.</p>



<a name="231843533"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fastest%20approach%20to%20proving%20equation%20iffs/near/231843533" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Belisarius Cawl <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/fastest.20approach.20to.20proving.20equation.20iffs.html#231843533">(Mar 25 2021 at 17:32)</a>:</h4>
<p>another oversight, thanks</p>



<a name="231843615"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fastest%20approach%20to%20proving%20equation%20iffs/near/231843615" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/fastest.20approach.20to.20proving.20equation.20iffs.html#231843615">(Mar 25 2021 at 17:32)</a>:</h4>
<p>Once you've got it straight, the way to do it would be to rewrite lemmas which will use assumptions as input hypotheses.</p>



<a name="231864539"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fastest%20approach%20to%20proving%20equation%20iffs/near/231864539" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/fastest.20approach.20to.20proving.20equation.20iffs.html#231864539">(Mar 25 2021 at 19:43)</a>:</h4>
<p>Here is a way to do it . The first two lemmas should probably be added to mathlib.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.real.basic</span>
<span class="kn">import</span> <span class="n">tactic.suggest</span>
<span class="kn">import</span> <span class="n">analysis.special_functions.pow</span>
<span class="kn">import</span> <span class="n">tactic.rewrite_search.frontend</span>

<span class="kd">lemma</span> <span class="n">real.rpow_inj_on</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">}</span> <span class="o">(</span><span class="n">ha</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">set.inj_on</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">set.Ici</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="k">assume</span> <span class="n">x</span> <span class="n">hx</span> <span class="n">y</span> <span class="n">hy</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">dsimp</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">A</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">z</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">z</span> <span class="bp">→</span> <span class="n">z</span> <span class="bp">=</span> <span class="o">(</span><span class="n">z</span> <span class="bp">^</span> <span class="n">a</span><span class="o">)</span> <span class="bp">^</span> <span class="o">(</span><span class="n">a</span> <span class="bp">⁻¹</span><span class="o">)</span> <span class="o">:=</span>
    <span class="bp">λ</span> <span class="n">z</span> <span class="n">hz</span><span class="o">,</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="bp">←</span> <span class="n">real.rpow_mul</span> <span class="n">hz</span><span class="o">,</span> <span class="n">mul_inv_cancel</span> <span class="n">ha</span><span class="o">,</span> <span class="n">real.rpow_one</span><span class="o">],</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">A</span> <span class="n">x</span> <span class="n">hx</span><span class="o">,</span> <span class="n">A</span> <span class="n">y</span> <span class="n">hy</span><span class="o">,</span> <span class="n">h</span><span class="o">],</span>
<span class="kd">end</span>

<span class="kd">lemma</span> <span class="n">real.rpow_eq_rpow_iff</span> <span class="o">{</span><span class="n">a</span> <span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">}</span> <span class="o">(</span><span class="n">ha</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">hx</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">hy</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">y</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">x</span> <span class="bp">^</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">y</span> <span class="bp">^</span> <span class="n">a</span> <span class="bp">↔</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">y</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">real.rpow_inj_on</span> <span class="n">ha</span><span class="o">)</span><span class="bp">.</span><span class="n">eq_iff</span> <span class="n">hx</span> <span class="n">hy</span>

<span class="kd">lemma</span> <span class="n">delta_A</span>
  <span class="o">(</span><span class="n">A</span> <span class="n">T</span> <span class="bp">Δ</span><span class="n">A</span> <span class="bp">Δ</span><span class="n">T</span> <span class="n">a</span> <span class="n">t</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span>
  <span class="o">(</span><span class="n">posA</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">A</span><span class="o">)</span>
  <span class="o">(</span><span class="n">posT</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">T</span><span class="o">)</span>
  <span class="o">(</span><span class="n">posA'</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">A</span> <span class="bp">+</span> <span class="bp">Δ</span><span class="n">A</span><span class="o">)</span>
  <span class="o">(</span><span class="n">posT'</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">T</span> <span class="bp">+</span> <span class="bp">Δ</span><span class="n">T</span><span class="o">)</span>
  <span class="o">(</span><span class="n">mina</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">a</span><span class="o">)</span>
  <span class="o">(</span><span class="n">mint</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">t</span><span class="o">)</span>
  <span class="o">(</span><span class="n">maxa</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">&lt;</span> <span class="mi">1</span><span class="o">)</span>
  <span class="o">(</span><span class="n">maxt</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">&lt;</span> <span class="mi">1</span><span class="o">)</span>
   <span class="o">:</span>
   <span class="n">A</span><span class="bp">^</span><span class="n">a</span> <span class="bp">*</span> <span class="n">T</span><span class="bp">^</span><span class="n">t</span>  <span class="bp">=</span> <span class="o">(</span><span class="n">A</span> <span class="bp">+</span> <span class="bp">Δ</span><span class="n">A</span><span class="o">)</span><span class="bp">^</span><span class="n">a</span> <span class="bp">*</span> <span class="o">(</span><span class="n">T</span> <span class="bp">+</span> <span class="bp">Δ</span><span class="n">T</span><span class="o">)</span><span class="bp">^</span><span class="n">t</span>
   <span class="bp">↔</span>
   <span class="bp">Δ</span><span class="n">A</span> <span class="bp">=</span> <span class="n">A</span> <span class="bp">*</span> <span class="o">((</span><span class="n">T</span><span class="bp">/</span><span class="o">(</span><span class="n">T</span><span class="bp">+Δ</span><span class="n">T</span><span class="o">))</span> <span class="bp">^</span> <span class="o">(</span><span class="n">t</span><span class="bp">/</span><span class="n">a</span><span class="o">)</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">)</span>

  <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="c1">-- first, get rid of the denominators in the second equation</span>
  <span class="n">rw</span> <span class="n">real.div_rpow</span> <span class="n">posT.le</span> <span class="n">posT'.le</span><span class="o">,</span>
  <span class="k">have</span> <span class="o">:</span> <span class="o">(</span><span class="n">T</span> <span class="bp">+</span> <span class="bp">Δ</span><span class="n">T</span><span class="o">)</span><span class="bp">^</span><span class="o">(</span><span class="n">t</span><span class="bp">/</span><span class="n">a</span><span class="o">)</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">,</span>
    <span class="kd">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">posT'.ne'</span><span class="o">,</span> <span class="n">real.rpow_eq_zero_iff_of_nonneg</span> <span class="n">posT'.le</span><span class="o">],</span>
  <span class="n">field_simp</span> <span class="n">only</span><span class="o">,</span>
  <span class="n">conv_rhs</span> <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="bp">←</span> <span class="n">sub_eq_zero_iff_eq</span><span class="o">]</span> <span class="o">},</span>
  <span class="c1">-- then, remove the power `a` in the first equation</span>
  <span class="k">have</span> <span class="n">H</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">z</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">},</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">z</span> <span class="bp">→</span> <span class="n">z</span> <span class="bp">^</span> <span class="n">t</span> <span class="bp">=</span> <span class="o">(</span><span class="n">z</span> <span class="bp">^</span> <span class="o">(</span><span class="n">t</span><span class="bp">/</span><span class="n">a</span><span class="o">))</span><span class="bp">^</span><span class="n">a</span><span class="o">,</span>
  <span class="o">{</span> <span class="k">assume</span> <span class="n">z</span> <span class="n">hz</span><span class="o">,</span> <span class="n">rw</span> <span class="bp">←</span> <span class="n">real.rpow_mul</span> <span class="n">hz.le</span><span class="o">,</span> <span class="n">simp</span> <span class="o">[</span><span class="n">mina.ne'</span><span class="o">]</span> <span class="o">},</span>
  <span class="k">have</span> <span class="n">H'</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">z</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">},</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">z</span> <span class="bp">→</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">z</span> <span class="bp">^</span> <span class="o">(</span><span class="n">t</span><span class="bp">/</span><span class="n">a</span><span class="o">),</span>
  <span class="o">{</span> <span class="k">assume</span> <span class="n">z</span> <span class="n">hz</span><span class="o">,</span> <span class="n">exact</span> <span class="n">real.rpow_nonneg_of_nonneg</span> <span class="n">hz.le</span> <span class="n">_</span> <span class="o">},</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">H</span> <span class="n">posT</span><span class="o">,</span> <span class="n">H</span> <span class="n">posT'</span><span class="o">,</span> <span class="bp">←</span> <span class="n">real.mul_rpow</span> <span class="n">posA.le</span> <span class="o">(</span><span class="n">H'</span> <span class="n">posT</span><span class="o">),</span> <span class="bp">←</span> <span class="n">real.mul_rpow</span> <span class="n">posA'.le</span> <span class="o">(</span><span class="n">H'</span> <span class="n">posT'</span><span class="o">),</span>
    <span class="n">real.rpow_eq_rpow_iff</span> <span class="n">mina.ne'</span> <span class="o">(</span><span class="n">mul_nonneg</span> <span class="n">posA.le</span> <span class="o">(</span><span class="n">H'</span> <span class="n">posT</span><span class="o">))</span>
      <span class="o">(</span><span class="n">mul_nonneg</span> <span class="n">posA'.le</span> <span class="o">(</span><span class="n">H'</span> <span class="n">posT'</span><span class="o">)),</span> <span class="n">eq_comm</span><span class="o">,</span> <span class="bp">←</span> <span class="n">sub_eq_zero_iff_eq</span><span class="o">],</span>
  <span class="c1">-- check that we have brought both equations to the same form</span>
  <span class="n">congr'</span> <span class="mi">2</span><span class="o">,</span>
  <span class="n">ring</span><span class="o">,</span>
<span class="kd">end</span>

<span class="bp">#</span><span class="n">lint</span>
</code></pre></div>



<a name="231864853"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fastest%20approach%20to%20proving%20equation%20iffs/near/231864853" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/fastest.20approach.20to.20proving.20equation.20iffs.html#231864853">(Mar 25 2021 at 19:45)</a>:</h4>
<p>As you can see, this is pretty painful. What I do is massage the two equations to make them the same up to algebraic manipulations, and then ask <code>ring</code> to check that indeed I have got to the same expressions. To massage the first one, I cancel out the exponent <code>a</code> using the lemma <code>real.rpow_eq_rpow_iff</code> that I prove above. To massage the second one, I remove the denominators by calling <code>field_simp</code> (but first I need to check that the denominator is nonzero).</p>



<a name="231865224"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fastest%20approach%20to%20proving%20equation%20iffs/near/231865224" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/fastest.20approach.20to.20proving.20equation.20iffs.html#231865224">(Mar 25 2021 at 19:47)</a>:</h4>
<p>Note that the call to <code>lint</code> at the end is to let you see which assumptions of your lemmas I ended up not using. Also, many of your assumptions that are strict inequalities can be weakened to large inequalities without harm. Note that you formulated your inequalities like <code>A &gt; 0</code>, but instead you should use <code>0 &lt; A</code> (which is mathematically the same, but most of our lemmas are designed to work with the second form, so it is good practice to only use this one).</p>



<a name="231926044"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fastest%20approach%20to%20proving%20equation%20iffs/near/231926044" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Belisarius Cawl <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/fastest.20approach.20to.20proving.20equation.20iffs.html#231926044">(Mar 26 2021 at 07:50)</a>:</h4>
<p>Just saw it thanks to you pointing it out in the other thread. Thanks again - there is a lot to unpack. Having a look now.</p>



<a name="231930396"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fastest%20approach%20to%20proving%20equation%20iffs/near/231930396" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Belisarius Cawl <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/fastest.20approach.20to.20proving.20equation.20iffs.html#231930396">(Mar 26 2021 at 08:38)</a>:</h4>
<p>ok - I think I managed to understand the first two lemmas (I like the approach by the way), except for the following:<br>
the lemma real.rpow_inj_on shows that exponentiation is injective on set.Ici 0 which I understand to be the strictly positive numbers - but what about negative exponents?</p>
<p>LEAN accepts lemma real.rpow_eq_rpow_iff too which I think it should not (EDIT because real.rpow_inj_on talks only about positive exponents). Where is my error?</p>



<a name="231930630"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fastest%20approach%20to%20proving%20equation%20iffs/near/231930630" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/fastest.20approach.20to.20proving.20equation.20iffs.html#231930630">(Mar 26 2021 at 08:40)</a>:</h4>
<p>Why do you think it shouldn't work?</p>



<a name="231931336"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fastest%20approach%20to%20proving%20equation%20iffs/near/231931336" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Belisarius Cawl <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/fastest.20approach.20to.20proving.20equation.20iffs.html#231931336">(Mar 26 2021 at 08:48)</a>:</h4>
<p>well because the first lemma only talks about positive exponents but a can be negative too, no?</p>



<a name="231931540"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fastest%20approach%20to%20proving%20equation%20iffs/near/231931540" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/fastest.20approach.20to.20proving.20equation.20iffs.html#231931540">(Mar 26 2021 at 08:50)</a>:</h4>
<p>This one?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">real.rpow_inj_on</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">}</span> <span class="o">(</span><span class="n">ha</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">set.inj_on</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">),</span> <span class="n">x</span> <span class="bp">^</span> <span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">set.Ici</span> <span class="mi">0</span><span class="o">)</span>
</code></pre></div>
<p>That talks about non-zero exponents and non-negative base</p>



<a name="231931549"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fastest%20approach%20to%20proving%20equation%20iffs/near/231931549" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/fastest.20approach.20to.20proving.20equation.20iffs.html#231931549">(Mar 26 2021 at 08:50)</a>:</h4>
<p>The first lemma talks about nonzero exponents (that's what the assumption <code>ha</code> says). The <code>Ici 0</code> is the set on which the function is injective.</p>



<a name="231932339"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fastest%20approach%20to%20proving%20equation%20iffs/near/231932339" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Belisarius Cawl <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/fastest.20approach.20to.20proving.20equation.20iffs.html#231932339">(Mar 26 2021 at 08:58)</a>:</h4>
<p>aah I think I get it. The <code>Ici 0</code> is the codomain. Was assuming it to be the domain.</p>



<a name="231932453"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fastest%20approach%20to%20proving%20equation%20iffs/near/231932453" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/fastest.20approach.20to.20proving.20equation.20iffs.html#231932453">(Mar 26 2021 at 08:59)</a>:</h4>
<p>No, it is the domain, but of the function <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>↦</mo><msup><mi>x</mi><mi>a</mi></msup></mrow><annotation encoding="application/x-tex">x \mapsto x^a</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.522em;vertical-align:-0.011em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">↦</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.664392em;vertical-align:0em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">a</span></span></span></span></span></span></span></span></span></span></span>. I.e., we are requiring <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span> to be nonnegative, but this doesn't say anything about <code>a</code> (which is just required to be nonzero).</p>



<a name="231932609"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fastest%20approach%20to%20proving%20equation%20iffs/near/231932609" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Belisarius Cawl <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/fastest.20approach.20to.20proving.20equation.20iffs.html#231932609">(Mar 26 2021 at 09:00)</a>:</h4>
<p>Right. That was my error. Thanks!</p>



<a name="231962079"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/fastest%20approach%20to%20proving%20equation%20iffs/near/231962079" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/fastest.20approach.20to.20proving.20equation.20iffs.html#231962079">(Mar 26 2021 at 13:18)</a>:</h4>
<p>There's a (long and most likely golfable) proof that <code>rpow</code> with an odd natural exponent is strictly monotonic on all the reals in <a href="#narrow/stream/113489-new-members/topic/Cube.20root.20of.20cubic.20is.20id.3F/near/223005490">this thread</a>. It'd be good for someone to PR a bunch of lemmas from that thread too.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>