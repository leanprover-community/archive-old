---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/ideal.2Equotient.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideal.2Equotient.html">ideal.quotient</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="263921741"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideal.quotient/near/263921741" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideal.2Equotient.html#263921741">(Dec 06 2021 at 20:42)</a>:</h4>
<p><span class="user-mention" data-user-id="238446">@Anne Baanen</span> or someone else who's paying attention, is <code>ideal.quotient</code> supposed to be not there any more in master? I have some ring which has an extremely long name, and I have <code>Q := (ideal.span {a | ∃ b, a = f b}).quotient</code> and this doesn't work any more. Do I now have to write down the full name of the ring?</p>



<a name="263921871"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideal.quotient/near/263921871" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideal.2Equotient.html#263921871">(Dec 06 2021 at 20:43)</a>:</h4>
<p>Does <code>_ / (ideal.span ...)</code> work?</p>



<a name="263921947"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideal.quotient/near/263921947" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideal.2Equotient.html#263921947">(Dec 06 2021 at 20:44)</a>:</h4>
<p>Yes! :D I just had that idea as you posted</p>



<a name="263921952"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideal.quotient/near/263921952" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideal.2Equotient.html#263921952">(Dec 06 2021 at 20:44)</a>:</h4>
<p>It's now an instance <code>ideal.has_quotient</code> of <code>has_quotient</code>.</p>



<a name="263921982"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideal.quotient/near/263921982" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideal.2Equotient.html#263921982">(Dec 06 2021 at 20:45)</a>:</h4>
<p>Type <code>\bigsolidus</code> or <code>\quot</code> or <code>\/</code> to type that <code>/</code> (and make sure you have an up-to-date VScode extension)</p>



<a name="263922035"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideal.quotient/near/263922035" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideal.2Equotient.html#263922035">(Dec 06 2021 at 20:45)</a>:</h4>
<p>Right, but do you think <code>I.quotient</code> is better than <code>_ / I</code>? Anyway. Oh, I used <code>\quot</code> for the quotient symbol ;-)</p>



<a name="263922155"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideal.quotient/near/263922155" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideal.2Equotient.html#263922155">(Dec 06 2021 at 20:46)</a>:</h4>
<p><code>I,quotient</code>??</p>



<a name="263922201"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideal.quotient/near/263922201" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideal.2Equotient.html#263922201">(Dec 06 2021 at 20:46)</a>:</h4>
<p>Sorry, mistyped. <code>I.quotient</code>.</p>



<a name="263922214"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideal.quotient/near/263922214" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideal.2Equotient.html#263922214">(Dec 06 2021 at 20:46)</a>:</h4>
<p><code>R / I</code> looks way better to me</p>



<a name="263922308"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideal.quotient/near/263922308" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideal.2Equotient.html#263922308">(Dec 06 2021 at 20:47)</a>:</h4>
<p>But in this situation I'm in (trying to debug this blasted timeout which the Imperial algebraic number theorists are running into) I am never ever going to be mentioning any of the explicit R's showing up ;-)</p>



<a name="263922453"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideal.quotient/near/263922453" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideal.2Equotient.html#263922453">(Dec 06 2021 at 20:49)</a>:</h4>
<p>Kevin have you tried the following approach?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">field_theory.is_alg_closed.algebraic_closure</span>

<span class="kd">universe</span> <span class="n">u</span>
<span class="kd">theorem</span> <span class="n">exists_algebraic_closure</span> <span class="o">(</span><span class="n">K</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">[</span><span class="n">field</span> <span class="n">K</span><span class="o">]</span> <span class="o">:</span>
  <span class="bp">∃</span> <span class="o">(</span><span class="n">L</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">[</span><span class="n">field</span> <span class="n">L</span><span class="o">],</span> <span class="kd">by</span> <span class="n">resetI</span><span class="bp">;</span> <span class="n">exact</span> <span class="bp">∃</span> <span class="o">[</span><span class="n">algebra</span> <span class="n">K</span> <span class="n">L</span><span class="o">],</span> <span class="kd">by</span> <span class="n">resetI</span><span class="bp">;</span> <span class="n">exact</span> <span class="n">is_alg_closure</span> <span class="n">K</span> <span class="n">L</span>  <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">use</span> <span class="o">[</span><span class="n">algebraic_closure</span> <span class="n">K</span><span class="o">,</span> <span class="n">infer_instance</span><span class="o">,</span> <span class="n">infer_instance</span><span class="o">],</span>
  <span class="n">exact</span> <span class="n">algebraic_closure.is_alg_closure</span> <span class="n">K</span><span class="o">,</span>
<span class="kd">end</span>

<span class="kd">def</span> <span class="n">algebraic_closure'</span> <span class="o">(</span><span class="n">K</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">[</span><span class="n">field</span> <span class="n">K</span><span class="o">]</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">exists_algebraic_closure</span> <span class="n">K</span><span class="o">)</span><span class="bp">.</span><span class="n">some</span>

<span class="kd">noncomputable</span> <span class="kd">instance</span> <span class="o">{</span><span class="n">K</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">field</span> <span class="n">K</span><span class="o">]</span> <span class="o">:</span> <span class="n">field</span> <span class="o">(</span><span class="n">algebraic_closure'</span> <span class="n">K</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">exists_algebraic_closure</span> <span class="n">K</span><span class="o">)</span><span class="bp">.</span><span class="n">some_spec.some</span>

<span class="kd">noncomputable</span> <span class="kd">instance</span> <span class="o">{</span><span class="n">K</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">field</span> <span class="n">K</span><span class="o">]</span> <span class="o">:</span> <span class="n">algebra</span> <span class="n">K</span> <span class="o">(</span><span class="n">algebraic_closure'</span> <span class="n">K</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">exists_algebraic_closure</span> <span class="n">K</span><span class="o">)</span><span class="bp">.</span><span class="n">some_spec.some_spec.some</span>

<span class="kd">instance</span> <span class="o">{</span><span class="n">K</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">field</span> <span class="n">K</span><span class="o">]</span> <span class="o">:</span> <span class="n">is_alg_closure</span> <span class="n">K</span> <span class="o">(</span><span class="n">algebraic_closure'</span> <span class="n">K</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">exists_algebraic_closure</span> <span class="n">K</span><span class="o">)</span><span class="bp">.</span><span class="n">some_spec.some_spec.some_spec</span>
</code></pre></div>



<a name="263922478"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideal.quotient/near/263922478" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideal.2Equotient.html#263922478">(Dec 06 2021 at 20:49)</a>:</h4>
<p>I assume your timeouts are with algebraic closures again?</p>



<a name="263922562"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideal.quotient/near/263922562" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideal.2Equotient.html#263922562">(Dec 06 2021 at 20:50)</a>:</h4>
<p>The issue isn't finding the workarounds, it's finding the underlying problem.</p>



<a name="263922615"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideal.quotient/near/263922615" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideal.2Equotient.html#263922615">(Dec 06 2021 at 20:50)</a>:</h4>
<p>Oh, I thought that we realized the issue is that lean thinks something is computable when it's not....</p>



<a name="263922660"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideal.quotient/near/263922660" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideal.2Equotient.html#263922660">(Dec 06 2021 at 20:51)</a>:</h4>
<p>Right, but if I want to get Gabriel to fix it then I need to get an example which doesn't depend on mathlib.</p>



<a name="263922676"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideal.quotient/near/263922676" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideal.2Equotient.html#263922676">(Dec 06 2021 at 20:51)</a>:</h4>
<p>fair point</p>



<a name="263924354"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideal.quotient/near/263924354" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideal.2Equotient.html#263924354">(Dec 06 2021 at 21:04)</a>:</h4>
<p>But I've passed the trick onto Amelia anyway :-) I guess what I am slightly worried about is that these workarounds are just kicking the problem down the road and it'll be back to bite us later.</p>



<a name="263924468"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideal.quotient/near/263924468" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideal.2Equotient.html#263924468">(Dec 06 2021 at 21:04)</a>:</h4>
<p>I think the above is how <code>algebraic_closure</code> should be defined anyway.</p>



<a name="263924529"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideal.quotient/near/263924529" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideal.2Equotient.html#263924529">(Dec 06 2021 at 21:05)</a>:</h4>
<p>I was hoping </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">noncomputable</span> <span class="kd">instance</span> <span class="n">nonempty.has_zero</span> <span class="o">{</span><span class="n">α</span><span class="o">}</span> <span class="o">[</span><span class="n">nonempty</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span> <span class="n">has_zero</span> <span class="n">α</span> <span class="o">:=</span>
<span class="n">has_zero.mk</span> <span class="bp">$</span> <span class="n">classical.choice</span> <span class="o">‹</span><span class="n">_</span><span class="o">›</span>

<span class="kd">noncomputable</span> <span class="kd">instance</span> <span class="n">nonempty.has_one</span> <span class="o">{</span><span class="n">α</span><span class="o">}</span> <span class="o">[</span><span class="n">nonempty</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span> <span class="n">has_one</span> <span class="n">α</span> <span class="o">:=</span>
<span class="n">has_one.mk</span> <span class="bp">$</span> <span class="n">classical.choice</span> <span class="o">‹</span><span class="n">_</span><span class="o">›</span>

<span class="kd">noncomputable</span> <span class="kd">instance</span> <span class="n">nonempty.has_add</span> <span class="o">{</span><span class="n">α</span><span class="o">}</span> <span class="o">[</span><span class="n">nonempty</span> <span class="o">(</span><span class="n">α</span> <span class="bp">→</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span><span class="o">)]</span> <span class="o">:</span> <span class="n">has_add</span> <span class="n">α</span> <span class="o">:=</span>
<span class="n">has_add.mk</span> <span class="bp">$</span> <span class="n">classical.choice</span> <span class="bp">$</span> <span class="n">infer_instance</span>

<span class="kd">def</span> <span class="n">bar</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">nonempty</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">nonempty</span> <span class="o">(</span><span class="n">α</span> <span class="bp">→</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span><span class="o">)]</span> <span class="o">:=</span> <span class="o">{</span> <span class="n">t</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">//</span> <span class="bp">∃</span> <span class="n">u</span> <span class="o">:</span> <span class="n">α</span><span class="o">,</span> <span class="n">u</span> <span class="bp">=</span> <span class="mi">10</span> <span class="o">}</span>

<span class="kd">def</span> <span class="n">baz</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">nonempty</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">nonempty</span> <span class="o">(</span><span class="n">α</span> <span class="bp">→</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span><span class="o">)]</span> <span class="o">:</span> <span class="n">bar</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">t</span><span class="o">,</span> <span class="n">t.1</span>
</code></pre></div>
<p>would reproduce the timeout, but, alas, this just works.</p>



<a name="263926003"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideal.quotient/near/263926003" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideal.2Equotient.html#263926003">(Dec 06 2021 at 21:18)</a>:</h4>
<p>The noncomputable issue that I remember is when an equation compiler has two match statements, and only the latter one of them is noncomputable. The compiler doesn't know that it itself is noncomputable until the whole term is compiled, and checking whether any of the terms it uses are noncomputable might lead to a deep check that times out. I might remember wrong.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>