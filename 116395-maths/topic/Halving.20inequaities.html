---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/Halving.20inequaities.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Halving.20inequaities.html">Halving inequaities</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="310429324"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Halving%20inequaities/near/310429324" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Halving.20inequaities.html#310429324">(Nov 16 2022 at 15:00)</a>:</h4>
<p>Am I wrong or are the following inequalities missing?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">nat.le_half_of_le_of_half_lt_sub</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">/</span> <span class="mi">2</span> <span class="bp">&lt;</span> <span class="n">a</span> <span class="bp">-</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≤</span> <span class="n">a</span> <span class="bp">/</span> <span class="mi">2</span>
</code></pre></div>
<p>and</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">nat.ge_half_of_sub_le_half</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">-</span> <span class="n">b</span> <span class="bp">≤</span> <span class="n">a</span> <span class="bp">/</span> <span class="mi">2</span><span class="o">)</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≥</span> <span class="n">a</span> <span class="bp">/</span> <span class="mi">2</span>
</code></pre></div>



<a name="310430168"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Halving%20inequaities/near/310430168" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Halving.20inequaities.html#310430168">(Nov 16 2022 at 15:04)</a>:</h4>
<p>Do you really want to use <code>/</code> and <code>-</code> for natural numbers?</p>



<a name="310430245"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Halving%20inequaities/near/310430245" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Halving.20inequaities.html#310430245">(Nov 16 2022 at 15:04)</a>:</h4>
<p>I mean, I don't even know if these are true (too lazy to check <span aria-label="grinning face with smiling eyes" class="emoji emoji-1f601" role="img" title="grinning face with smiling eyes">:grinning_face_with_smiling_eyes:</span> )</p>



<a name="310432250"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Halving%20inequaities/near/310432250" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Halving.20inequaities.html#310432250">(Nov 16 2022 at 15:15)</a>:</h4>
<p>"want" is a bit of a stretch but I have to <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="310457429"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Halving%20inequaities/near/310457429" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Halving.20inequaities.html#310457429">(Nov 16 2022 at 17:11)</a>:</h4>
<p>What does <code>slim_check</code> think about them?</p>



<a name="310457556"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Halving%20inequaities/near/310457556" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Halving.20inequaities.html#310457556">(Nov 16 2022 at 17:11)</a>:</h4>
<p>By the way, no <code>ge</code> lemmas should be in mathlib, always write inequalities as le.</p>



<a name="310457799"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Halving%20inequaities/near/310457799" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Halving.20inequaities.html#310457799">(Nov 16 2022 at 17:12)</a>:</h4>
<p>I was incidentally just checking it with <code>slim_check</code></p>



<a name="310457871"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Halving%20inequaities/near/310457871" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Halving.20inequaities.html#310457871">(Nov 16 2022 at 17:13)</a>:</h4>
<p>they seem to be ok</p>



<a name="310460760"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Halving%20inequaities/near/310460760" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Halving.20inequaities.html#310460760">(Nov 16 2022 at 17:28)</a>:</h4>
<p>Here's the first one:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">nat.le_half_of_half_lt_sub</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">/</span> <span class="mi">2</span> <span class="bp">&lt;</span> <span class="n">a</span> <span class="bp">-</span> <span class="n">b</span><span class="o">)</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">≤</span> <span class="n">a</span> <span class="bp">/</span> <span class="mi">2</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="n">nat.le_div_iff_mul_le</span> <span class="n">two_pos</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">nat.div_lt_iff_lt_mul</span> <span class="n">two_pos</span><span class="o">,</span> <span class="n">nat.mul_sub_right_distrib</span><span class="o">,</span> <span class="n">lt_tsub_iff_right</span><span class="o">]</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">linarith</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="310463190"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Halving%20inequaities/near/310463190" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Halving.20inequaities.html#310463190">(Nov 16 2022 at 17:41)</a>:</h4>
<p>and the second:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">nat.half_le_of_sub_le_half</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">-</span> <span class="n">b</span> <span class="bp">≤</span> <span class="n">a</span> <span class="bp">/</span> <span class="mi">2</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">/</span> <span class="mi">2</span> <span class="bp">≤</span> <span class="n">b</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">nat.le_div_iff_mul_le</span> <span class="n">two_pos</span><span class="o">,</span> <span class="n">nat.mul_sub_right_distrib</span><span class="o">,</span> <span class="n">tsub_le_iff_right</span><span class="o">,</span>
    <span class="n">mul_two</span><span class="o">,</span> <span class="n">add_le_add_iff_left</span><span class="o">]</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="bp">←</span> <span class="n">nat.mul_div_left</span> <span class="n">b</span> <span class="n">two_pos</span><span class="o">],</span>
  <span class="n">exact</span> <span class="n">nat.div_le_div_right</span> <span class="n">h</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="310475026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Halving%20inequaities/near/310475026" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Halving.20inequaities.html#310475026">(Nov 16 2022 at 18:45)</a>:</h4>
<p>I miss <code>omega</code>...</p>



<a name="310503710"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Halving%20inequaities/near/310503710" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Halving.20inequaities.html#310503710">(Nov 16 2022 at 21:21)</a>:</h4>
<p>Why not write it in Lean 4 Alex!</p>



<a name="310513244"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Halving%20inequaities/near/310513244" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Halving.20inequaities.html#310513244">(Nov 16 2022 at 22:29)</a>:</h4>
<p><span class="user-mention" data-user-id="306601">@Kyle Miller</span> Oh wow, thats much shorter than my solution</p>



<a name="310513539"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Halving%20inequaities/near/310513539" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Halving.20inequaities.html#310513539">(Nov 16 2022 at 22:31)</a>:</h4>
<p><span class="user-mention" data-user-id="127136">@Alex J. Best</span> What's <code>omega</code>?</p>



<a name="310513750"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Halving%20inequaities/near/310513750" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Halving.20inequaities.html#310513750">(Nov 16 2022 at 22:33)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/tactics.html#omega">tactic#omega</a></p>



<a name="310513961"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Halving%20inequaities/near/310513961" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Halving.20inequaities.html#310513961">(Nov 16 2022 at 22:35)</a>:</h4>
<p>... and is it broken?</p>



<a name="310514162"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Halving%20inequaities/near/310514162" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Halving.20inequaities.html#310514162">(Nov 16 2022 at 22:36)</a>:</h4>
<p>It got banned from mathlib, for unreasonable behaviour.</p>



<a name="310514419"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Halving%20inequaities/near/310514419" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ruben Van de Velde <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Halving.20inequaities.html#310514419">(Nov 16 2022 at 22:39)</a>:</h4>
<p>I thought mostly for it not being maintained and probably not ported to lean4 any time soon, but maybe both :)</p>



<a name="310515814"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Halving%20inequaities/near/310515814" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Halving.20inequaities.html#310515814">(Nov 16 2022 at 22:51)</a>:</h4>
<p><span class="user-mention" data-user-id="306601">@Kyle Miller</span> Is it okay if I PR those lemmas together with</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">zmod.val_min_abs_neg_of_ne_half</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">}</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">zmod</span> <span class="n">n</span><span class="o">}</span> <span class="o">(</span><span class="n">ha</span> <span class="o">:</span> <span class="n">a.val</span> <span class="bp">≠</span> <span class="n">n</span> <span class="bp">/</span> <span class="mi">2</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">-</span><span class="n">a</span><span class="o">)</span><span class="bp">.</span><span class="n">val_min_abs</span> <span class="bp">=</span> <span class="bp">-</span><span class="n">a.val_min_abs</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">cases</span> <span class="n">n</span><span class="o">,</span> <span class="n">refl</span><span class="o">,</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">zmod.val_min_abs_def_pos</span><span class="o">,</span> <span class="n">zmod.neg_val</span><span class="o">],</span>
  <span class="n">split_ifs</span> <span class="k">with</span> <span class="n">h</span> <span class="n">h'</span> <span class="n">h''</span> <span class="n">h''</span> <span class="n">h'</span> <span class="n">h''</span> <span class="n">h''</span><span class="bp">;</span>
    <span class="n">try</span> <span class="o">{</span> <span class="n">subst</span> <span class="n">h</span><span class="o">,</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">zmod.nat_cast_self</span><span class="o">,</span> <span class="n">nat.cast_succ</span><span class="o">,</span> <span class="n">zero_sub</span><span class="o">,</span> <span class="n">neg_add_rev</span><span class="o">,</span>
       <span class="n">zmod.val_zero</span><span class="o">,</span> <span class="n">neg_zero'</span><span class="o">,</span> <span class="n">neg_neg</span><span class="o">,</span> <span class="n">zero_le'</span><span class="o">,</span> <span class="n">not_true</span><span class="o">,</span> <span class="n">ne.def</span><span class="o">]</span> <span class="n">at</span> <span class="bp">*</span><span class="o">}</span><span class="bp">;</span> <span class="n">try</span> <span class="o">{</span> <span class="n">contradiction</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">exfalso</span><span class="o">,</span> <span class="n">apply</span> <span class="n">not_le.mpr</span> <span class="o">(</span><span class="n">lt_of_le_of_ne</span> <span class="n">h''</span> <span class="n">ha</span><span class="o">)</span> <span class="o">(</span><span class="n">nat.half_le_of_sub_le_half</span> <span class="n">h'</span><span class="o">)</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="n">neg_sub</span><span class="o">,</span> <span class="n">nat.cast_sub</span><span class="o">],</span> <span class="n">apply</span> <span class="n">le_of_lt</span> <span class="o">(</span><span class="n">zmod.val_lt</span> <span class="n">a</span><span class="o">)</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="n">nat.cast_sub</span> <span class="o">(</span><span class="n">le_of_lt</span> <span class="o">(</span><span class="n">zmod.val_lt</span> <span class="n">a</span><span class="o">))],</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">sub_sub_cancel_left</span><span class="o">]</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">exfalso</span><span class="o">,</span> <span class="n">clear</span> <span class="n">ha</span><span class="o">,</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">not_le</span><span class="o">]</span> <span class="n">at</span> <span class="n">h'</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">h''</span> <span class="o">(</span><span class="n">nat.le_half_of_half_lt_sub</span> <span class="n">h'</span><span class="o">)</span> <span class="o">}</span>
<span class="kd">end</span>
</code></pre></div>



<a name="310515977"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Halving%20inequaities/near/310515977" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Halving.20inequaities.html#310515977">(Nov 16 2022 at 22:52)</a>:</h4>
<p>We weirdly only have <code>zmod.nat_abs_val_min_abs_neg</code> right now</p>



<a name="310516351"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Halving%20inequaities/near/310516351" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Halving.20inequaities.html#310516351">(Nov 16 2022 at 22:55)</a>:</h4>
<p>Ah I guess the whole definition is tailored to the Eisenstein lemmas</p>



<a name="310586008"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Halving%20inequaities/near/310586008" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Halving.20inequaities.html#310586008">(Nov 17 2022 at 10:58)</a>:</h4>
<p><span class="user-mention" data-user-id="110789">@Jakob von Raumer</span> Feel free to take the two lemmas as your own! They seem potentially useful to have around.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>