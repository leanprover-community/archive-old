---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/nonsingleton.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html">nonsingleton</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="202865366"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202865366" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202865366">(Jul 04 2020 at 09:23)</a>:</h4>
<p>In <a href="https://github.com/leanprover-community/mathlib/issues/3283">#3283</a>, the need for a typeclass expressing that a vector space is not trivial shows up. 4 possible solutions given by  <span class="user-mention" data-user-id="214703">@Yury G. Kudryashov</span>, who also suggests it should be discussed on Zulip:</p>
<ul>
<li>(a) add a typeclass "has at least two elements"; </li>
<li>(b) use [fact (0 &lt; ...)] and let the user declare a local instance fact ....</li>
<li>(a'): modify nonzero to say ∃ x, x ≠ 0 instead of 0 ≠ 1. In a monoid_with_zero this is equivalent to the old typeclass but makes more sense for vector spaces </li>
<li>(a'') introduce nonsingleton : ∃ x y, x ≠ y and use it instead of nonzero in algebra/group_with_zero.</li>
</ul>



<a name="202865411"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202865411" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202865411">(Jul 04 2020 at 09:24)</a>:</h4>
<p>For what it's worth, I vote for (a'') (and I'm ready to give it a try if there is a consensus)</p>



<a name="202865656"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202865656" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202865656">(Jul 04 2020 at 09:32)</a>:</h4>
<p>The link should be <a href="https://github.com/leanprover-community/mathlib/issues/3282">#3282</a></p>



<a name="202865664"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202865664" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202865664">(Jul 04 2020 at 09:33)</a>:</h4>
<p><code>nonzero</code> (i.e. containing an element other than 0) is an important concept in ring theory -- for example integral domains and fields are non-zero, in analogy with 1 not being a prime. For rings it's equivalent to 0 \ne 1.</p>
<p>But I am confused why the zero ring isn't a normed algebra. When I was working with p-adic normed algebras I allowed the zero ring.</p>



<a name="202865667"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202865667" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202865667">(Jul 04 2020 at 09:33)</a>:</h4>
<p>How do you suggest to name the type class in a''? It can't be <code>nonzero</code>, and this will obfuscate all the algebraic applications.</p>



<a name="202865704"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202865704" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202865704">(Jul 04 2020 at 09:34)</a>:</h4>
<p><code>superdoubleton</code></p>



<a name="202865708"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202865708" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202865708">(Jul 04 2020 at 09:34)</a>:</h4>
<p>Do you have other application in minds (where nonzero wouldn't be a good name)?</p>



<a name="202865710"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202865710" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202865710">(Jul 04 2020 at 09:34)</a>:</h4>
<p>I would like to hear why the idea is important for nonzero vector spaces.</p>



<a name="202865719"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202865719" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202865719">(Jul 04 2020 at 09:35)</a>:</h4>
<p>Even if you do, I think I still prefer to use a' for algebra and add another type class for the other applications.</p>



<a name="202865897"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202865897" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202865897">(Jul 04 2020 at 09:40)</a>:</h4>
<p>I'm going to suggest that your definition of normed algebra is wrong if it doesn't allow the zero algebra. I've just looked at how I set this up in the p-adic setting. If K is a normed field (the norm is real-valued and |1| = 1) then a normed K-algebra was for me a ring A equipped with a ring homomophism K -&gt; A and a real-valued norm, satisfying |1|&lt;=1, |x| = 0 iff x = 0, |ab|&lt;=|a||b|, and |ka|=|k||a|, and a triangle inequality.</p>



<a name="202865914"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202865914" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202865914">(Jul 04 2020 at 09:41)</a>:</h4>
<p>The axioms imply that either |1|=0 and A=0, or |1|=1 and then the map K-&gt;A is injective and the norm on A extends the norm on K</p>



<a name="202865915"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202865915" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202865915">(Jul 04 2020 at 09:41)</a>:</h4>
<p>In particular it looks like I have gone out of my way to allow A=0</p>



<a name="202865955"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202865955" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202865955">(Jul 04 2020 at 09:42)</a>:</h4>
<p>I'm pretty sure I didn't invent this stuff myself, I'll dig out a source</p>



<a name="202865956"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202865956" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202865956">(Jul 04 2020 at 09:42)</a>:</h4>
<p>The question is then: how painful would it be to go this road. Clearly on paper you can just pretend everything holds because the algebra you are currently caring about is obviously non-zero.</p>



<a name="202865972"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202865972" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202865972">(Jul 04 2020 at 09:43)</a>:</h4>
<p>Google says the answer should be in Théories spectrales: Chapitre 1</p>



<a name="202866164"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202866164" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202866164">(Jul 04 2020 at 09:49)</a>:</h4>
<p>I've traced my definition back to Bosch-Guenzer-Remmert (written in the 80s), which assumes commutative and nonarchimedean (|a+b|&lt;=max{|a|,|b|}). Maybe things are different in the noncommutative or archimedean (|a+b|&lt;=|a|+|b|) case? But in nonarchimedean geometry it is crucial that zero normed algebras are allowed; we want the empty set to be affinoid and so we need a normed algebra with no maximal ideals. <br>
<a href="/user_uploads/3121/Sawe9nTT18roy_dXq5bAsvU8/bgr.png">bgr.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/Sawe9nTT18roy_dXq5bAsvU8/bgr.png" title="bgr.png"><img src="/user_uploads/3121/Sawe9nTT18roy_dXq5bAsvU8/bgr.png"></a></div>



<a name="202866166"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202866166" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202866166">(Jul 04 2020 at 09:49)</a>:</h4>
<p>I quite like the semantics of <code>a'</code>, but I'm sure that I could get used to <code>a''</code> as well.</p>



<a name="202866302"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202866302" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202866302">(Jul 04 2020 at 09:53)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> Théories spectrales refers to TG IX p37 def 9 for the definition</p>



<a name="202866362"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202866362" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202866362">(Jul 04 2020 at 09:54)</a>:</h4>
<p><a href="/user_uploads/3121/3qIAi0XJOoQStEW5oJLRaFUw/tg.png">tg.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/3qIAi0XJOoQStEW5oJLRaFUw/tg.png" title="tg.png"><img src="/user_uploads/3121/3qIAi0XJOoQStEW5oJLRaFUw/tg.png"></a></div>



<a name="202866376"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202866376" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202866376">(Jul 04 2020 at 09:55)</a>:</h4>
<p>No condition at all on norm of 1 then.</p>



<a name="202866423"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202866423" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202866423">(Jul 04 2020 at 09:56)</a>:</h4>
<p>But we're now mixing two discussions, right? The correct definition of normed algebra is orthogonal to how we want to say "this vector space is non-trivial"</p>



<a name="202866427"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202866427" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202866427">(Jul 04 2020 at 09:56)</a>:</h4>
<p>And I'm sure that we will want to say "non-trivial" quite often.</p>



<a name="202866430"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202866430" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202866430">(Jul 04 2020 at 09:57)</a>:</h4>
<p>I am challenging this notion, that's all</p>



<a name="202866433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202866433" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202866433">(Jul 04 2020 at 09:57)</a>:</h4>
<p>It's not, because this is the only example so far when we need this class.</p>



<a name="202866435"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202866435" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202866435">(Jul 04 2020 at 09:57)</a>:</h4>
<p>Aah, ok</p>



<a name="202866438"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202866438" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202866438">(Jul 04 2020 at 09:57)</a>:</h4>
<p>We have got this far without having to say non-trivial for anything other than classes with a 0 and a 1</p>



<a name="202866483"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202866483" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202866483">(Jul 04 2020 at 09:58)</a>:</h4>
<p>I'm going on a hike, I'll see if I can cook up something in the mean time. See you!</p>



<a name="202866551"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202866551" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202866551">(Jul 04 2020 at 10:00)</a>:</h4>
<p>The reason this is relevant is that it helps us to distinguish between (a) and (a')</p>



<a name="202866553"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202866553" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202866553">(Jul 04 2020 at 10:00)</a>:</h4>
<p>Having nontrivial vector spaces shows up for many statements. Browsing randomly mathlib, I find</p>
<div class="codehilite"><pre><span></span><code><span class="kn">theorem</span> <span class="n">interior_closed_ball&#39;</span> <span class="o">[</span><span class="n">normed_space</span> <span class="n">ℝ</span> <span class="n">E</span><span class="o">]</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">E</span><span class="o">)</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">(</span><span class="n">hE</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">z</span> <span class="o">:</span> <span class="n">E</span><span class="o">,</span> <span class="n">z</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">interior</span> <span class="o">(</span><span class="n">closed_ball</span> <span class="n">x</span> <span class="n">r</span><span class="o">)</span> <span class="bp">=</span> <span class="n">ball</span> <span class="n">x</span> <span class="n">r</span>
</code></pre></div>


<p>or</p>
<div class="codehilite"><pre><span></span><code><span class="c">/-</span><span class="cm">- If a space is non-trivial, then the norm of the identity equals `1`. -/</span>
<span class="kn">lemma</span> <span class="n">norm_id</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">x</span> <span class="o">:</span> <span class="n">E</span><span class="o">,</span> <span class="n">x</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="err">∥</span><span class="n">id</span> <span class="err">𝕜</span> <span class="n">E</span><span class="err">∥</span> <span class="bp">=</span> <span class="mi">1</span> <span class="o">:=</span>
</code></pre></div>


<p>or</p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">norm_pos</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">x</span> <span class="o">:</span> <span class="n">E</span><span class="o">,</span> <span class="n">x</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="err">∥</span><span class="o">(</span><span class="n">e</span> <span class="o">:</span> <span class="n">E</span> <span class="bp">→</span><span class="n">L</span><span class="o">[</span><span class="err">𝕜</span><span class="o">]</span> <span class="n">F</span><span class="o">)</span><span class="err">∥</span> <span class="o">:=</span>
</code></pre></div>


<p>So, independently of the application to normed algebras, it is probably a good think to have.</p>



<a name="202866563"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202866563" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202866563">(Jul 04 2020 at 10:01)</a>:</h4>
<p><code>interior_closed_ball'</code> -- is this not true for the zero space?</p>



<a name="202866564"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202866564" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202866564">(Jul 04 2020 at 10:01)</a>:</h4>
<p>Good. What about an example where we need to different elements in a type and none of them is 0?</p>



<a name="202866614"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202866614" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202866614">(Jul 04 2020 at 10:02)</a>:</h4>
<p>Kevin think of r = 0</p>



<a name="202866623"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202866623" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202866623">(Jul 04 2020 at 10:03)</a>:</h4>
<p>This is a silly version of the lemma, hence the '. But I guess it's still used somewhere.</p>



<a name="202866633"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202866633" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202866633">(Jul 04 2020 at 10:03)</a>:</h4>
<p>I'm fine with a' or a''. With a slight preference for <code>nonsingleton</code>because it would apply potentially to non-algebraic situations. I say potentially because I don't have an example at hand, but I can't exclude it would show up some day for someone.</p>



<a name="202866692"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202866692" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202866692">(Jul 04 2020 at 10:04)</a>:</h4>
<p>I say we can still add a class if the need ever arise, and keep readability of what we already have.</p>



<a name="202866701"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202866701" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202866701">(Jul 04 2020 at 10:04)</a>:</h4>
<p>I would also prefer <code>a''</code> over <code>a'</code>, simply because <code>a'</code> is too specific for no good reason.  However the name <code>nonsingleton</code> is a bit misleading, as it is not <code>¬ singleton</code>.</p>



<a name="202866714"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202866714" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202866714">(Jul 04 2020 at 10:05)</a>:</h4>
<p>But stuff like <code>norm_id</code> -- this is a corollary of "|1| = 1 if A is nonzero" (with A=End(E)), but if <code>norm_id</code> is useful then it's evidence that we need the class.</p>



<a name="202866761"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202866761" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202866761">(Jul 04 2020 at 10:06)</a>:</h4>
<p><code>nontrivial</code>? (just half-joking)</p>



<a name="202866767"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202866767" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202866767">(Jul 04 2020 at 10:06)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110031">Patrick Massot</span> <a href="#narrow/stream/116395-maths/topic/nonsingleton/near/202866614">said</a>:</p>
<blockquote>
<p>Kevin think of r = 0</p>
</blockquote>
<p>Are there any applications of this lemma where r&lt;=0? Isn't r&gt;0 easier to prove than E!=0? But this is secondary.</p>



<a name="202866776"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202866776" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202866776">(Jul 04 2020 at 10:06)</a>:</h4>
<p>That's why I say it's silly.</p>



<a name="202866794"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202866794" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202866794">(Jul 04 2020 at 10:07)</a>:</h4>
<p>Yes, this one is silly, but <code>norm_id</code> is not.</p>



<a name="202866808"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202866808" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202866808">(Jul 04 2020 at 10:07)</a>:</h4>
<p>So the question has become something like: do we want a <code>nonsubsingleton</code> class or just a <code>has-something-other-than-zero [extends has_zero]</code> class.</p>



<a name="202866859"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202866859" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202866859">(Jul 04 2020 at 10:08)</a>:</h4>
<p>And note this lemma is only used once, to prove the silly analogue for frontier, which itself is never used.</p>



<a name="202866878"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202866878" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202866878">(Jul 04 2020 at 10:09)</a>:</h4>
<p>Right. The argument against is that more typeclasses mean more noise, and do we need it? On the other hand this seems like a rarely used typeclass which I guess can't do much harm</p>



<a name="202866924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202866924" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202866924">(Jul 04 2020 at 10:10)</a>:</h4>
<p>Even with this semiconservative approach, does it mean we'll need a lemma saying that if a ring is nonzero in this vague sense then <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo mathvariant="normal">≠</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">1 \neq 0</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mrel"><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="rlap"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="inner"><span class="mrel"></span></span><span class="fix"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span> and then keep invoking this lemma in all proofs that currently used the existing nonzero class?</p>



<a name="202866936"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202866936" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202866936">(Jul 04 2020 at 10:10)</a>:</h4>
<p>That would mean much more noise than having two classes.</p>



<a name="202866949"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202866949" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202866949">(Jul 04 2020 at 10:11)</a>:</h4>
<p>Oh wow, I didn't realize we already had a <code>nonzero</code> class.  Then I'd vote to just remove the gratuitous <code>has_zero</code> and <code>has_one</code> arguments there.</p>



<a name="202867018"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202867018" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202867018">(Jul 04 2020 at 10:13)</a>:</h4>
<p><span class="user-mention" data-user-id="110043">@Gabriel Ebner</span> this <code>nonzero</code> class is used a lot in the algebra heirarchy, for rings (and now more generally for <code>monoid_with_zero</code>. In a ring, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>≠</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">0\not=1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="rlap"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="inner"><span class="mrel"></span></span><span class="fix"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span></span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> is equivalent to the ring being non-zero, which is an important concept in ring theory. Patrick is suggesting that ripping out the nonzero class and replacing it with a more general class just means that then we'll have 1000 applications of the lemma saying that in a non-zero ring we must have <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>≠</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">0\not=1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="rlap"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="inner"><span class="mrel"></span></span><span class="fix"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span></span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> (which is the thing which is actually used).</p>



<a name="202867082"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202867082" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202867082">(Jul 04 2020 at 10:15)</a>:</h4>
<p>We have</p>
<div class="codehilite"><pre><span></span><code><span class="c">/-</span><span class="cm">- Proves that a semiring that contains at least two distinct elements is nonzero. -/</span>
<span class="kn">theorem</span> <span class="n">nonzero</span><span class="bp">.</span><span class="n">of_ne</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">α</span><span class="o">]</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">≠</span> <span class="n">y</span><span class="o">)</span> <span class="o">:</span> <span class="n">nonzero</span> <span class="n">α</span> <span class="o">:=</span>
</code></pre></div>


<p>but it is only used once. <code>nonzero</code> is used literally hundreds of times in mathlib.</p>



<a name="202867084"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202867084" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202867084">(Jul 04 2020 at 10:15)</a>:</h4>
<p>Right, but the new lemma can be called <code>zero_ne_one</code> and just have different type-class arguments than the current one.  This shouldn't break much.</p>



<a name="202867085"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202867085" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202867085">(Jul 04 2020 at 10:15)</a>:</h4>
<p>What about a class <code>nonsubsingleton</code>, an abbreviation <code>nonzero</code>, and a lemma saying that in  a <code>ring, nonzero</code>, one has <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo mathvariant="normal">≠</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">0 \ne 1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mrel"><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="rlap"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="inner"><span class="mrel"></span></span><span class="fix"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>.</p>



<a name="202867091"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202867091" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202867091">(Jul 04 2020 at 10:15)</a>:</h4>
<p>Gabriel just beat me to it.</p>



<a name="202867131"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202867131" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202867131">(Jul 04 2020 at 10:16)</a>:</h4>
<p>This is really obfuscation by gratuitous over-engineering.</p>



<a name="202867135"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202867135" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202867135">(Jul 04 2020 at 10:16)</a>:</h4>
<p>I thought that was mathlib's motto!</p>



<a name="202867138"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202867138" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202867138">(Jul 04 2020 at 10:16)</a>:</h4>
<p>Usually we try to do it only when there are at least one application of the general thing.</p>



<a name="202867144"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202867144" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202867144">(Jul 04 2020 at 10:17)</a>:</h4>
<p>"Why can't we prove the derivative of x^2 is 2x?" "because we didn't do the Bochner integral yet"</p>



<a name="202867147"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202867147" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202867147">(Jul 04 2020 at 10:17)</a>:</h4>
<p>I think Sébastien posted three applications of the general thing.</p>



<a name="202867148"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202867148" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202867148">(Jul 04 2020 at 10:17)</a>:</h4>
<p>However I need to go, and I don't care so much.</p>



<a name="202867151"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202867151" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202867151">(Jul 04 2020 at 10:17)</a>:</h4>
<p>No, he posted application of the intermediate idea.</p>



<a name="202867153"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202867153" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202867153">(Jul 04 2020 at 10:17)</a>:</h4>
<p>The one that still mention 0</p>



<a name="202867155"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202867155" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202867155">(Jul 04 2020 at 10:18)</a>:</h4>
<p>and I don't know enough about typeclasses to contribute any more</p>



<a name="202867193"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202867193" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202867193">(Jul 04 2020 at 10:18)</a>:</h4>
<p>and would allow to keep the exact same readable name <code>nonzero</code></p>



<a name="202867199"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202867199" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202867199">(Jul 04 2020 at 10:18)</a>:</h4>
<p>I really want to have this for vector spaces, but I don't care to have this in full generality.</p>



<a name="202867202"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202867202" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202867202">(Jul 04 2020 at 10:18)</a>:</h4>
<p>That one is clearly a good idea, and allows to keep lemmas <code>zero_ne_one</code> with the exact same statement.</p>



<a name="202867208"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202867208" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202867208">(Jul 04 2020 at 10:19)</a>:</h4>
<p>I don't care about the name at all.  I'm fine with calling it <code>nonzero</code> even though there is no zero anywhere.  But having a class for <code>∃ x, x ≠ 0</code> is just introducing a dependency on <code>0</code> for no reason at all.</p>



<a name="202867213"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202867213" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202867213">(Jul 04 2020 at 10:19)</a>:</h4>
<p>So, here are the two proposals. Please vote here, and I'll try to implement the one that get the most votes.</p>



<a name="202867217"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202867217" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202867217">(Jul 04 2020 at 10:19)</a>:</h4>
<p>Calling it <code>nonzero</code> without having zero seems a bit confusing to me.</p>



<a name="202867261"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202867261" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202867261">(Jul 04 2020 at 10:20)</a>:</h4>
<p>A class <code>nonzero</code> extending <code>has_zero</code>, and requiring the existence of an element different from <code>0</code>.</p>



<a name="202867267"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202867267" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202867267">(Jul 04 2020 at 10:21)</a>:</h4>
<p>Or, a class <code>nonsubsingleton</code>, requiring two different elements, and an abbreviation called <code>nonzero</code> and requiring the typeclass <code>has_zero</code>.</p>



<a name="202867789"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202867789" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202867789">(Jul 04 2020 at 10:37)</a>:</h4>
<p>Here's a statement I wrote recently (<code>normed_space/hahn_banach</code>), which would benefit from one of the new typeclasses.</p>
<div class="codehilite"><pre><span></span><code><span class="kn">theorem</span> <span class="n">exists_dual_vector&#39;</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="mi">0</span> <span class="bp">&lt;</span> <span class="n">vector_space</span><span class="bp">.</span><span class="n">dim</span> <span class="n">ℝ</span> <span class="n">E</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">E</span><span class="o">)</span> <span class="o">:</span>
  <span class="bp">∃</span> <span class="n">g</span> <span class="o">:</span> <span class="n">E</span> <span class="bp">→</span><span class="n">L</span><span class="o">[</span><span class="n">ℝ</span><span class="o">]</span> <span class="n">ℝ</span><span class="o">,</span> <span class="err">∥</span><span class="n">g</span><span class="err">∥</span> <span class="bp">=</span> <span class="mi">1</span> <span class="bp">∧</span> <span class="n">g</span> <span class="n">x</span> <span class="bp">=</span> <span class="err">∥</span><span class="n">x</span><span class="err">∥</span>
</code></pre></div>


<p>On the other hand, I did not use this lemma for anything!</p>



<a name="202868395"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202868395" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202868395">(Jul 04 2020 at 10:54)</a>:</h4>
<p>Another example that does not mention <code>0</code> (<del>though the assumption looks suspicious</del>):</p>
<div class="codehilite"><pre><span></span><code><span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">adjugate_zero</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">&lt;</span> <span class="n">fintype</span><span class="bp">.</span><span class="n">card</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="n">adjugate</span> <span class="o">(</span><span class="mi">0</span> <span class="o">:</span> <span class="n">matrix</span> <span class="n">n</span> <span class="n">n</span> <span class="n">α</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
</code></pre></div>



<a name="202868496"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202868496" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202868496">(Jul 04 2020 at 10:57)</a>:</h4>
<p>Another vote for <code>nonsubsingleton</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">sign_surjective</span> <span class="o">(</span><span class="n">hα</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">&lt;</span> <span class="n">fintype</span><span class="bp">.</span><span class="n">card</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">function</span><span class="bp">.</span><span class="n">surjective</span> <span class="o">(</span><span class="n">sign</span> <span class="o">:</span> <span class="n">perm</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">units</span> <span class="bp">ℤ</span><span class="o">)</span>
</code></pre></div>



<a name="202868680"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202868680" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202868680">(Jul 04 2020 at 11:01)</a>:</h4>
<p>I actually prefer the <code>1 &lt; fintype.card α</code> in that example</p>



<a name="202868757"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202868757" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202868757">(Jul 04 2020 at 11:03)</a>:</h4>
<p>also, just because a theorem has this hypothesis doesn't mean it should be inferred by typeclass inference</p>



<a name="202868810"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202868810" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202868810">(Jul 04 2020 at 11:04)</a>:</h4>
<p>so far the only one that actually needs it to be a class is the original example with nonzero vector spaces, as well as the various kinds of nonzero rings</p>



<a name="202869043"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202869043" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202869043">(Jul 04 2020 at 11:11)</a>:</h4>
<p>And these all have zeros</p>



<a name="202869106"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202869106" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202869106">(Jul 04 2020 at 11:13)</a>:</h4>
<p>No, the <code>adjugate_zero</code> example does not have a zero.</p>



<a name="202869497"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202869497" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202869497">(Jul 04 2020 at 11:24)</a>:</h4>
<p>I want to say that, although I still think <code>nonzero</code> makes more sense, I do see that Gabriel seem to find this important. I think that Gabriel (or any other maintainer or very active contributor) can have two votes if he feels strongly about something.</p>



<a name="202869519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202869519" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202869519">(Jul 04 2020 at 11:25)</a>:</h4>
<p>(The number 2 or the voting thing shouldn't be taken too literally here, I hope the idea is clear)</p>



<a name="202869558"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202869558" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202869558">(Jul 04 2020 at 11:26)</a>:</h4>
<p>And lunch is calling</p>



<a name="202869750"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202869750" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202869750">(Jul 04 2020 at 11:32)</a>:</h4>
<p>I'm not asking for extra votes.  <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span>  But I'm a bit perplexed that we're adding an unused argument to <code>nonzero</code> here.  There is something to be said for requiring both 0 and 1, because we can then get <code>0 ≠ 1</code> without any extra assumptions.  But all other variants are exactly equivalent to "cardinality greater than 1" (the choice of 0 being completely irrelevant).</p>



<a name="202869770"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202869770" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202869770">(Jul 04 2020 at 11:33)</a>:</h4>
<p>There is also a small technical argument to be made for dropping the unused argument: the terms become smaller, and it make the type-class cache more effective (because otherwise we'd need to do type-class search for the different <code>has_zero</code> instances used).</p>



<a name="202869829"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202869829" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202869829">(Jul 04 2020 at 11:35)</a>:</h4>
<p>I also hope that "<em>extending</em> <code>has_zero</code>" is a typo, and what Sébastien actually meant is <code>class nonzero (α) [has_zero α] : Prop</code>.  Otherwise you get two incompatible <code>has_zero</code> instances in <code>[ring α] [nonzero α]</code>.</p>



<a name="202870313"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202870313" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202870313">(Jul 04 2020 at 11:50)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110043">Gabriel Ebner</span> <a href="#narrow/stream/116395-maths/topic/nonsingleton/near/202869829">said</a>:</p>
<blockquote>
<p>I also hope that "<em>extending</em> <code>has_zero</code>" is a typo, and what Sébastien actually meant is <code>class nonzero (α) [has_zero α] : Prop</code>.  </p>
</blockquote>
<p>Yes, sure!</p>



<a name="202875477"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202875477" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jasmin Blanchette <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202875477">(Jul 04 2020 at 14:13)</a>:</h4>
<p>Are people who have trouble installing <code>mathlib</code> allowed to count? Anyway, I'm also against overengineering.</p>



<a name="202875785"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202875785" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202875785">(Jul 04 2020 at 14:21)</a>:</h4>
<p>Ah I'm happy that Jasmin agrees with me, there is really no point in overengineering this by adding extra unused arguments.</p>



<a name="202877227"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202877227" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202877227">(Jul 04 2020 at 14:56)</a>:</h4>
<p>I'm back from my hike: examples that I came up with are "simple Lie algebra" and "simple representation". In both cases there is a <code>0</code> (but not a <code>1</code>), and really the <code>{0}</code> spaces is "too simple to be simple". Those would be natural candidates for <code>a'</code> or <code>a''</code>.</p>



<a name="202877235"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202877235" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202877235">(Jul 04 2020 at 14:56)</a>:</h4>
<p>I would be happy with <code>a''</code> if we can find a reasonable name for it.</p>



<a name="202877242"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202877242" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202877242">(Jul 04 2020 at 14:57)</a>:</h4>
<p><code>nonsubsingleton</code> seems to long and obfuscated, to me.</p>



<a name="202879395"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202879395" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202879395">(Jul 04 2020 at 15:50)</a>:</h4>
<p>What about <code>has_ne</code>?</p>



<a name="202879633"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202879633" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202879633">(Jul 04 2020 at 15:56)</a>:</h4>
<blockquote>
<p>The Walpiri, for example, only has words for “one”, “two”, and “many”</p>
</blockquote>
<p>How about <code>subsingleton</code>, <code>unique</code>, and <code>many</code>?</p>
<p><span aria-label="stuck out tongue wink" class="emoji emoji-1f61c" role="img" title="stuck out tongue wink">:stuck_out_tongue_wink:</span> <span aria-label="rolling on the floor laughing" class="emoji emoji-1f923" role="img" title="rolling on the floor laughing">:rolling_on_the_floor_laughing:</span></p>



<a name="202892737"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202892737" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202892737">(Jul 04 2020 at 21:46)</a>:</h4>
<p>or <code>subsingleton</code>, <code>singleton</code>, <code>supersingleton</code> <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span></p>



<a name="202897438"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202897438" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202897438">(Jul 05 2020 at 00:23)</a>:</h4>
<p>I feel the basic class should state <code>∃x y : α, x ≠ y</code>. I think we should call this class already <code>nonzero</code> or <code>nontrivial</code>, and just use this class directly when talking about rings/vector spaces (and then there will be a theorem stating that if you have enough structure (semiring?) <code>zero_ne_one : 0 ≠ 1</code> assuming this type class.</p>
<p>At some point we'll probably want to use a type class on groups saying that the group is nontrivial, right? It would be nice to use the same class then.</p>
<p>Then again, I don't feel strongly about this.</p>



<a name="202897720"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202897720" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202897720">(Jul 05 2020 at 00:33)</a>:</h4>
<p>Initially I thought the "x ne y" option was unnecessarily indirect, but I've been convinced by the later suggestions. It seems uniformity comes at little cost, as we can continue using zero_ne_one where we need it.</p>



<a name="202977324"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202977324" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202977324">(Jul 06 2020 at 11:25)</a>:</h4>
<p>PR at <a href="https://github.com/leanprover-community/mathlib/issues/3296">#3296</a>.</p>
<p>I need some help with the linter. With the declarations</p>
<div class="codehilite"><pre><span></span><code><span class="n">class</span> <span class="n">nontrivial</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">exists_pair_ne</span> <span class="o">:</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="n">x</span> <span class="bp">≠</span> <span class="n">y</span><span class="o">)</span>

<span class="kn">structure</span> <span class="n">is_integral_domain</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">[</span><span class="n">ring</span> <span class="n">R</span><span class="o">]</span> <span class="kn">extends</span> <span class="n">nontrivial</span> <span class="n">R</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">mul_comm</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">R</span><span class="o">),</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span> <span class="bp">*</span> <span class="n">x</span><span class="o">)</span>
<span class="o">(</span><span class="n">eq_zero_or_eq_zero_of_mul_eq_zero</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">R</span><span class="o">,</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">y</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">→</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span> <span class="bp">∨</span> <span class="n">y</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span>
</code></pre></div>


<p>the linter complains</p>
<div class="codehilite"><pre><span></span><code><span class="c">/-</span><span class="cm"> The `def_lemma` linter reports: -/</span>
<span class="c">/-</span><span class="cm"> INCORRECT DEF/LEMMA: -/</span>
<span class="c1">-- algebra/ring.lean</span>
<span class="bp">#</span><span class="kn">print</span> <span class="n">is_integral_domain</span><span class="bp">.</span><span class="n">to_nontrivial</span> <span class="c">/-</span><span class="cm"> is a def, should be a lemma/theorem -/</span>

<span class="c">/-</span><span class="cm"> The `doc_blame` linter reports: -/</span>
<span class="c">/-</span><span class="cm"> DEFINITIONS ARE MISSING DOCUMENTATION STRINGS: -/</span>
<span class="c1">-- algebra/ring.lean</span>
<span class="bp">#</span><span class="kn">print</span> <span class="n">is_integral_domain</span><span class="bp">.</span><span class="n">to_nontrivial</span> <span class="c">/-</span><span class="cm"> def missing doc string -/</span>
</code></pre></div>


<p>Is there something to be fixed on the linter or Lean side, or should I just silence the linter?</p>



<a name="202977615"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202977615" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202977615">(Jul 06 2020 at 11:30)</a>:</h4>
<p>For the second you can add lines like</p>
<div class="codehilite"><pre><span></span><code><span class="c">/-</span><span class="cm">- An integral domain as a non-trivial Type. -/</span>
<span class="n">add_decl_doc</span> <span class="n">is_integral_domain</span><span class="bp">.</span><span class="n">to_nontrivial</span>
</code></pre></div>



<a name="202977698"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202977698" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202977698">(Jul 06 2020 at 11:32)</a>:</h4>
<p>Sure. The problem is that is shouldn't be a def, so it shouldn't need documentation, but Lean generates a def anyway.</p>



<a name="202977738"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202977738" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202977738">(Jul 06 2020 at 11:33)</a>:</h4>
<p>And even if it where a def, I don't really see the point in asking for doc in a structure extension.</p>



<a name="202977852"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202977852" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202977852">(Jul 06 2020 at 11:35)</a>:</h4>
<p>This is <code>old_structure_cmd</code>, right?  There are some known issues there where the linter doesn't recognize the coercions to the parent.  The officially blessed solution is to <code>attribute [nolint]</code> them.</p>



<a name="202978116"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202978116" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202978116">(Jul 06 2020 at 11:39)</a>:</h4>
<p>ok, done. Thanks!</p>



<a name="202978654"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202978654" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202978654">(Jul 06 2020 at 11:48)</a>:</h4>
<p>Summary of the PR: I introduced a class <code>nontrivial</code> saying that a type has at least two elements, created a basic API, and used it instead of nonzero everywhere. It went pretty well (most changes were straightforward), although it was a little bit painful since the PR touches 63 files. I imagine this PR could conflict very quickly with everything...</p>



<a name="202980340"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202980340" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202980340">(Jul 06 2020 at 12:08)</a>:</h4>
<p><span class="user-mention" data-user-id="110050">@Sebastien Gouezel</span> Thank you so much for doing this!</p>



<a name="202980394"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202980394" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202980394">(Jul 06 2020 at 12:09)</a>:</h4>
<p>I would be happy with merging this right now. (I left one comments, but it asks for a lemma that can easily be added later without letting this acquire conflicts.)</p>



<a name="202980478"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202980478" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202980478">(Jul 06 2020 at 12:10)</a>:</h4>
<p>Ooh, I see that Gabriel also left some comments.</p>



<a name="202984507"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202984507" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202984507">(Jul 06 2020 at 12:56)</a>:</h4>
<p><span class="user-mention" data-user-id="110043">@Gabriel Ebner</span> Shall we merge this? Or would you rather have your comments dealt with first?</p>



<a name="202984548"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202984548" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Gabriel Ebner <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202984548">(Jul 06 2020 at 12:56)</a>:</h4>
<p>My comments are not regressions, we/I can fix them in a follow-up PR.</p>



<a name="202985463"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/nonsingleton/near/202985463" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/nonsingleton.html#202985463">(Jul 06 2020 at 13:04)</a>:</h4>
<p>Right, I agree. So I've kicked it on the queue.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>