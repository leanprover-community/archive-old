---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/Surreal.20numbers.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html">Surreal numbers</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="234187533"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/234187533" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#234187533">(Apr 12 2021 at 16:17)</a>:</h4>
<p>Hi,</p>
<p>I'm trying to play around with some surreal numbers in Lean and am looking at the TODO's in the <a href="https://leanprover-community.github.io/mathlib_docs/set_theory/surreal.html">library</a>.</p>
<p>The first TODO says to construct a proof of <code>numeric n</code> which is a term of type <code>pgame n \to Prop</code> where  <code>n : \nat</code>. </p>
<p>Amazingly, Lean is able to coerce <code>n : \nat</code> to <code>n : pgame</code>.  I searched the code for a definition of this coercion but only found <code>pgame.has_zero</code> and <code>pgame.has_one</code>. How is this coercion happening? </p>
<p>Thanks,</p>



<a name="234187657"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/234187657" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#234187657">(Apr 12 2021 at 16:18)</a>:</h4>
<p>If you have <code>0</code> and <code>1</code> (which you found), then you only need <code>+</code> to get the coercion.</p>



<a name="234188095"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/234188095" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#234188095">(Apr 12 2021 at 16:20)</a>:</h4>
<p>Oh, I see, so Lean is automatically defining <code>n.succ : pgame</code> as <code>n : pgame + 1 : pgame</code><br>
This is really efficient! Thanks!</p>



<a name="234234077"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/234234077" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#234234077">(Apr 12 2021 at 21:27)</a>:</h4>
<p>I think that actually it <em>defines</em> <code>bit0 n : pgame</code> to be <code>(n : pgame) + (n : pgame)</code> and <code>bit1 n : pgame</code> to be <code>(bit0 n : pgame) + (1 : pgame)</code> which could in theory be different ;-)</p>



<a name="234234651"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/234234651" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#234234651">(Apr 12 2021 at 21:33)</a>:</h4>
<p>As far as I remember, there isn't a clear proof that <code>pgame.short_add</code> is properly commutative and associative.</p>



<a name="234239883"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/234239883" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#234239883">(Apr 12 2021 at 22:26)</a>:</h4>
<p>I tried just hacking my way through to see what the definitions look like for some small cases and the definition becomes unrecognizable at <code>n=2</code>.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">set_theory.surreal</span>
<span class="kn">open</span> <span class="n">pgame</span>

<span class="kd">theorem</span> <span class="n">numeric_zero'</span> <span class="o">:</span> <span class="n">numeric</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="kd">begin</span>
<span class="n">split</span><span class="o">,</span>
<span class="n">repeat</span> <span class="o">{</span><span class="n">simp</span><span class="o">},</span>
<span class="kd">end</span>

<span class="kd">theorem</span> <span class="n">numeric_one'</span> <span class="o">:</span> <span class="n">numeric</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="kd">begin</span>
<span class="n">split</span><span class="o">,</span>
<span class="n">repeat</span> <span class="o">{</span><span class="n">simp</span><span class="o">},</span>
<span class="n">apply</span> <span class="n">numeric_zero'</span><span class="o">,</span>
<span class="kd">end</span>

<span class="kd">theorem</span> <span class="n">numeric_two'</span> <span class="o">:</span> <span class="n">numeric</span> <span class="mi">2</span> <span class="o">:=</span>
<span class="kd">begin</span>
<span class="n">split</span><span class="o">,</span>
<span class="c1">-- goal is unrecognizable</span>
<span class="kd">end</span>

<span class="kd">theorem</span> <span class="n">numeric_nat</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">numeric</span> <span class="n">n</span> <span class="o">:=</span>
<span class="kd">begin</span>
<span class="c1">-- don't even know how to start</span>
<span class="kd">end</span>
</code></pre></div>
<p>How does one work with this kind of definition? My guess is to first prove things about <code>numeric n</code> and show that it can be rewritten in a simplified form but I'm having trouble just unfolding the definition of <a href="https://github.com/leanprover-community/mathlib/blob/2af01474e4b46fb62bcefa0701b1fb96a4c57841/src/set_theory/pgame.lean#L661">add</a>.</p>



<a name="234240126"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/234240126" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#234240126">(Apr 12 2021 at 22:28)</a>:</h4>
<p>For example, in "math", I believe 2 is simply {1|} (and possibly few other numbers in the left and right sets) but I'm not able to see how <code>numeric 2</code> reduces to this.</p>



<a name="234240207"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/234240207" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#234240207">(Apr 12 2021 at 22:29)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/numeric.add/src">src#numeric.add</a></p>



<a name="234240329"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/234240329" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#234240329">(Apr 12 2021 at 22:30)</a>:</h4>
<p>I mean <a href="https://leanprover-community.github.io/mathlib_docs/find/pgame.numeric_add/src">src#pgame.numeric_add</a></p>



<a name="234240340"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/234240340" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#234240340">(Apr 12 2021 at 22:30)</a>:</h4>
<p><code>oy</code> indeed</p>



<a name="234240372"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/234240372" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#234240372">(Apr 12 2021 at 22:31)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="c1">-- TODO prove</span>
<span class="c1">-- theorem numeric_nat (n : ℕ) : numeric n := sorry</span>
</code></pre></div>
<p>from the source <span aria-label="scared" class="emoji emoji-1f628" role="img" title="scared">:scared:</span></p>



<a name="234240585"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/234240585" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#234240585">(Apr 12 2021 at 22:33)</a>:</h4>
<p>Oh wow! Thank you so much!!<br>
I totally missed this. I'll spend some time trying to understand the proof.</p>



<a name="234243582"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/234243582" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#234243582">(Apr 12 2021 at 23:07)</a>:</h4>
<p>The proof of <code>numeric_nat</code> follows in just a few lines from <code>numeric_zero</code>, <code>numeric_one</code>, and <code>numeric_add</code>, just by inducting on <code>n</code>. I'm not sure why it wasn't done previously.</p>



<a name="234244395"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/234244395" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#234244395">(Apr 12 2021 at 23:15)</a>:</h4>
<div class="spoiler-block"><div class="spoiler-header">
</div><div class="spoiler-content" aria-hidden="true">
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">numeric_nat</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">numeric</span> <span class="n">n</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">induction</span> <span class="n">n</span> <span class="k">with</span> <span class="n">n</span> <span class="n">ih</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">exact</span> <span class="n">numeric_zero</span><span class="o">,</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="n">nat.succ_eq_add_one</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">numeric_add</span> <span class="n">ih</span> <span class="n">numeric_one</span><span class="o">,</span> <span class="o">},</span>
<span class="kd">end</span>
<span class="kd">theorem</span> <span class="n">numeric_omega</span> <span class="o">:</span> <span class="n">numeric</span> <span class="n">omega</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">refine</span> <span class="o">⟨</span><span class="n">_</span><span class="o">,</span> <span class="n">_</span><span class="o">,</span> <span class="n">_</span><span class="o">⟩,</span>
  <span class="o">{</span> <span class="n">rintro</span> <span class="bp">-</span> <span class="o">⟨⟩,</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">rintro</span> <span class="o">⟨</span><span class="n">n</span><span class="o">⟩,</span>
    <span class="n">apply</span> <span class="n">numeric_nat</span><span class="o">,</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">rintro</span> <span class="o">⟨⟩,</span> <span class="o">},</span>
<span class="kd">end</span>
</code></pre></div>
</div></div>



<a name="234244419"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/234244419" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#234244419">(Apr 12 2021 at 23:15)</a>:</h4>
<p>(Spoiler also contains <code>numeric_omega</code>.)</p>



<a name="234245464"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/234245464" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#234245464">(Apr 12 2021 at 23:26)</a>:</h4>
<p>Thanks! I thought so too. I had missed this <code>numeric_add</code> lemma.</p>



<a name="234245515"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/234245515" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#234245515">(Apr 12 2021 at 23:27)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/116395-maths/topic/Surreal.20numbers/near/234234077">said</a>:</p>
<blockquote>
<p>I think that actually it <em>defines</em> <code>bit0 n : pgame</code> to be <code>(n : pgame) + (n : pgame)</code> and <code>bit1 n : pgame</code> to be <code>(bit0 n : pgame) + (1 : pgame)</code> which could in theory be different ;-)</p>
</blockquote>
<p>What does <code>bit0</code> mean mathematically? It seems to be doubling the number but that can't be right :o</p>



<a name="234245640"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/234245640" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#234245640">(Apr 12 2021 at 23:29)</a>:</h4>
<p>That's exactly what it's doing</p>



<a name="234245773"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/234245773" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#234245773">(Apr 12 2021 at 23:30)</a>:</h4>
<p>You can imagine the binary encoding of a number like 13 : 1101. In Lean, it would be:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">set_option</span> <span class="n">pp.numerals</span> <span class="n">false</span>

<span class="k">#check</span> <span class="mi">13</span> <span class="c1">-- bit1 (bit0 (bit1 has_one.one)) : ℕ</span>
</code></pre></div>



<a name="234245810"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/234245810" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#234245810">(Apr 12 2021 at 23:30)</a>:</h4>
<p>which, read from left to right, is exactly <code>1 0 1 1</code></p>



<a name="234245851"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/234245851" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#234245851">(Apr 12 2021 at 23:31)</a>:</h4>
<p>It's just a more efficient encoding than the unary <code>13 = 1 + 1 + ... + 1</code></p>



<a name="234246249"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/234246249" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#234246249">(Apr 12 2021 at 23:35)</a>:</h4>
<p>Interesting!!</p>
<p>So internally natural numbers are computed using "binary" induction and not "unary" induction. Nice!</p>



<a name="234246832"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/234246832" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#234246832">(Apr 12 2021 at 23:42)</a>:</h4>
<p>(I'll leave my spoiler tag above starred, and perhaps PR it one day, but if you get there first that would be great! :-)</p>



<a name="234248465"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/234248465" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#234248465">(Apr 13 2021 at 00:02)</a>:</h4>
<p>Not natural numbers. Anything that is notated by numerical digits</p>



<a name="234332422"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/234332422" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#234332422">(Apr 13 2021 at 14:13)</a>:</h4>
<p>Just for the record here's one more solution</p>
<div class="spoiler-block"><div class="spoiler-header">
<p>Spoiler (numeric_nat numeric_omega)</p>
</div><div class="spoiler-content" aria-hidden="true">
<p>import set_theory.surreal<br>
open pgame</p>
<p>theorem numeric_nat (n : ℕ) : numeric n :=<br>
begin<br>
induction n with n hn,<br>
apply numeric_zero,<br>
apply numeric_add hn numeric_one,<br>
end</p>
<p>theorem numeric_omega : numeric omega :=<br>
⟨by rintros ⟨ ⟩ ⟨ ⟩, λ i, by simp [numeric_nat i.down] , by simp only [forall_pempty]⟩</p>
<p>#check numeric_nat<br>
#check numeric_omega</p>
</div></div>
<p>I'll try to get it in the library.</p>



<a name="234334515"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/234334515" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#234334515">(Apr 13 2021 at 14:25)</a>:</h4>
<p>Looks good, PR away. (Indenting inside <code>begin ... end</code> blocks! :-)</p>



<a name="234334581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/234334581" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#234334581">(Apr 13 2021 at 14:26)</a>:</h4>
<p>(Also, in spoiler tags, you can put another <code>```lean</code> block inside to get formatting.</p>



<a name="234344571"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/234344571" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#234344571">(Apr 13 2021 at 15:10)</a>:</h4>
<p>Done.  I'll also try to clear the other TODO's in the file.</p>
<p>Would it be a good idea to add some lemmas about simplifying surreal numbers coming from natural numbers, like <code>n \equiv {n - 1 | } </code>?  and the "simplicity rule"?</p>



<a name="234345719"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/234345719" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#234345719">(Apr 13 2021 at 15:15)</a>:</h4>
<p>Since surreal has instances for has_zero, has_one, and has_add, nats can automatically be cast to surreal</p>



<a name="234345994"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/234345994" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#234345994">(Apr 13 2021 at 15:16)</a>:</h4>
<p>You might want to prove commutativity of the addition defined on surreal.</p>



<a name="234346055"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/234346055" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#234346055">(Apr 13 2021 at 15:16)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/nat.cast">docs#nat.cast</a></p>



<a name="234346432"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/234346432" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#234346432">(Apr 13 2021 at 15:18)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/nat.cast_add">docs#nat.cast_add</a> is the proof, basically, for the question you asked</p>



<a name="234694758"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/234694758" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#234694758">(Apr 15 2021 at 15:10)</a>:</h4>
<p>I'm slowly working on proving  properties about the addition of surreal numbers. <br>
Is there a nicer way to write the following code:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">set_theory.surreal</span>

<span class="kn">namespace</span> <span class="n">surreal</span>

<span class="kd">theorem</span> <span class="n">zero_add</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="o">:</span> <span class="n">surreal</span><span class="o">,</span> <span class="mi">0</span> <span class="bp">+</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rintros</span> <span class="o">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">ox</span><span class="o">⟩,</span>
  <span class="n">apply</span> <span class="n">quotient.sound</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">pgame.zero_add_equiv</span><span class="o">,</span>
<span class="kd">end</span>

<span class="kd">theorem</span> <span class="n">add_zero</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="o">:</span> <span class="n">surreal</span><span class="o">,</span> <span class="n">x</span> <span class="bp">+</span> <span class="mi">0</span> <span class="bp">=</span> <span class="n">x</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rintros</span> <span class="o">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">ox</span><span class="o">⟩,</span>
  <span class="n">apply</span> <span class="n">quotient.sound</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">pgame.add_zero_equiv</span><span class="o">,</span>
<span class="kd">end</span>

<span class="kd">instance</span> <span class="o">:</span> <span class="n">add_monoid</span> <span class="n">surreal</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">add</span> <span class="o">:=</span> <span class="n">add</span><span class="o">,</span>
  <span class="n">add_assoc</span> <span class="o">:=</span> <span class="n">add_assoc</span><span class="o">,</span>
  <span class="n">zero</span> <span class="o">:=</span> <span class="mi">0</span><span class="o">,</span>
  <span class="n">zero_add</span> <span class="o">:=</span> <span class="n">zero_add</span><span class="o">,</span>
  <span class="n">add_zero</span> <span class="o">:=</span> <span class="n">add_zero</span> <span class="o">}</span>

<span class="kd">end</span> <span class="n">surreal</span>
</code></pre></div>
<p>Weirdly I'm not able to merge the two <code>apply</code>s.  </p>
<p>Thanks,</p>



<a name="234695347"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/234695347" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#234695347">(Apr 15 2021 at 15:12)</a>:</h4>
<p>First change <code>apply</code> to refine:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">zero_add</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="o">:</span> <span class="n">surreal</span><span class="o">,</span> <span class="mi">0</span> <span class="bp">+</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rintros</span> <span class="o">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">ox</span><span class="o">⟩,</span>
  <span class="n">refine</span> <span class="n">quotient.sound</span> <span class="n">_</span><span class="o">,</span>
  <span class="n">refine</span> <span class="n">pgame.zero_add_equiv</span> <span class="n">_</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>
<p>and then it's easy:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">zero_add</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="o">:</span> <span class="n">surreal</span><span class="o">,</span> <span class="mi">0</span> <span class="bp">+</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rintros</span> <span class="o">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">ox</span><span class="o">⟩,</span>
  <span class="n">exact</span> <span class="n">quotient.sound</span> <span class="o">(</span><span class="n">pgame.zero_add_equiv</span> <span class="n">_</span><span class="o">),</span>
<span class="kd">end</span>
</code></pre></div>



<a name="234695795"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/234695795" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#234695795">(Apr 15 2021 at 15:14)</a>:</h4>
<p>Oh I see, I was missing that <code>_</code> at the end. <br>
Thanks!</p>



<a name="234697190"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/234697190" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#234697190">(Apr 15 2021 at 15:22)</a>:</h4>
<p>You might find that</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">zero_add</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="o">:</span> <span class="n">surreal</span><span class="o">,</span> <span class="mi">0</span> <span class="bp">+</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rintros</span> <span class="o">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">ox</span><span class="o">⟩,</span>
  <span class="n">exact</span> <span class="n">quotient.sound</span> <span class="o">(</span><span class="n">pgame.zero_add_equiv</span> <span class="n">_</span><span class="o">),</span>
<span class="kd">end</span>
</code></pre></div>
<p>golfs further to</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">zero_add</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="o">:</span> <span class="n">surreal</span><span class="o">,</span> <span class="mi">0</span> <span class="bp">+</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span>
<span class="bp">|</span> <span class="o">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">ox</span><span class="o">⟩</span> <span class="o">:=</span> <span class="n">quotient.sound</span> <span class="o">(</span><span class="n">pgame.zero_add_equiv</span> <span class="n">_</span><span class="o">)</span>
</code></pre></div>



<a name="234698518"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/234698518" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#234698518">(Apr 15 2021 at 15:30)</a>:</h4>
<p>This works too:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">section</span>

<span class="c1">-- otherwise the elaborator gets in our way</span>
<span class="kn">local</span> <span class="kn">attribute</span> <span class="o">[</span><span class="n">elab_with_expected_type</span><span class="o">]</span> <span class="n">quotient.ind</span>

<span class="kd">instance</span> <span class="o">:</span> <span class="n">add_monoid</span> <span class="n">surreal</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">add</span> <span class="o">:=</span> <span class="n">add</span><span class="o">,</span>
  <span class="n">add_assoc</span> <span class="o">:=</span> <span class="n">add_assoc</span><span class="o">,</span>
  <span class="n">zero</span> <span class="o">:=</span> <span class="mi">0</span><span class="o">,</span>
  <span class="n">zero_add</span> <span class="o">:=</span> <span class="n">quotient.ind</span> <span class="bp">$</span> <span class="bp">λ</span> <span class="n">a</span><span class="o">,</span> <span class="n">quotient.sound</span> <span class="bp">$</span> <span class="n">pgame.zero_add_equiv</span> <span class="n">_</span><span class="o">,</span>
  <span class="n">add_zero</span> <span class="o">:=</span> <span class="n">quotient.ind</span> <span class="bp">$</span> <span class="bp">λ</span> <span class="n">a</span><span class="o">,</span> <span class="n">quotient.sound</span> <span class="bp">$</span> <span class="n">pgame.add_zero_equiv</span> <span class="n">_</span> <span class="o">}</span>

<span class="kd">end</span>
</code></pre></div>



<a name="234700426"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/234700426" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#234700426">(Apr 15 2021 at 15:39)</a>:</h4>
<p>Thanks, I was trying something like <code>λ ⟨x, ox⟩, ...</code> but that did not work.<br>
I guess Lean is better at pattern matching <code>| ⟨x, ox⟩ := ...</code>.</p>



<a name="234700730"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/234700730" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#234700730">(Apr 15 2021 at 15:41)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/116395-maths/topic/Surreal.20numbers/near/234697190">said</a>:</p>
<blockquote>
<p>You might find that</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">zero_add</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="o">:</span> <span class="n">surreal</span><span class="o">,</span> <span class="mi">0</span> <span class="bp">+</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">rintros</span> <span class="o">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">ox</span><span class="o">⟩,</span>
  <span class="n">exact</span> <span class="n">quotient.sound</span> <span class="o">(</span><span class="n">pgame.zero_add_equiv</span> <span class="n">_</span><span class="o">),</span>
<span class="kd">end</span>
</code></pre></div>
<p>golfs further to</p>
<p><div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">zero_add</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="o">:</span> <span class="n">surreal</span><span class="o">,</span> <span class="mi">0</span> <span class="bp">+</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span>
<span class="bp">|</span> <span class="o">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">ox</span><span class="o">⟩</span> <span class="o">:=</span> <span class="n">quotient.sound</span> <span class="o">(</span><span class="n">pgame.zero_add_equiv</span> <span class="n">_</span><span class="o">)</span>
</code></pre></div><br>
</p>
</blockquote>
<p>I just tried this one out and Lean is throwing a type mismatch error for <code>quotient.sound</code></p>



<a name="234700918"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/234700918" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#234700918">(Apr 15 2021 at 15:42)</a>:</h4>
<p>I'm guessing it is not able to infer the setoid type.</p>



<a name="234701172"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/234701172" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#234701172">(Apr 15 2021 at 15:43)</a>:</h4>
<p>You can try using <code>quot.sound</code> and <code>quot.ind</code> instead, which do not try to infer the setoid on their own.</p>



<a name="234701341"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/234701341" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#234701341">(Apr 15 2021 at 15:44)</a>:</h4>
<p>Interesting! Thanks,</p>



<a name="235213851"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/235213851" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#235213851">(Apr 19 2021 at 16:56)</a>:</h4>
<p>Here's a construction of <code>ordered_add_comm_group</code> instance for surreal numbers:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">set_theory.surreal</span>
<span class="kn">open</span> <span class="n">pgame</span>
<span class="kn">namespace</span> <span class="n">surreal</span>

<span class="kd">def</span> <span class="n">neg</span> <span class="o">:</span> <span class="n">surreal</span> <span class="bp">→</span> <span class="n">surreal</span> <span class="o">:=</span>
<span class="n">surreal.lift</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span> <span class="n">ox</span><span class="o">,</span> <span class="bp">⟦</span><span class="o">⟨</span><span class="bp">-</span><span class="n">x</span><span class="o">,</span> <span class="n">pgame.numeric_neg</span> <span class="n">ox</span><span class="o">⟩</span><span class="bp">⟧</span><span class="o">)</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span> <span class="n">_</span> <span class="n">a</span><span class="o">,</span> <span class="n">quotient.sound</span> <span class="o">(</span><span class="n">pgame.neg_congr</span> <span class="n">a</span><span class="o">))</span>

<span class="kd">instance</span> <span class="o">:</span> <span class="n">ordered_add_comm_group</span> <span class="n">surreal</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">add</span>               <span class="o">:=</span> <span class="n">surreal.add</span><span class="o">,</span>
  <span class="n">add_assoc</span>         <span class="o">:=</span> <span class="n">surreal.add_assoc</span><span class="o">,</span>
  <span class="n">zero</span>              <span class="o">:=</span> <span class="mi">0</span><span class="o">,</span>
  <span class="n">zero_add</span>          <span class="o">:=</span> <span class="kd">by</span> <span class="o">{</span> <span class="n">rintros</span> <span class="o">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">ox</span><span class="o">⟩,</span> <span class="n">exact</span> <span class="n">quotient.sound</span> <span class="o">(</span><span class="n">pgame.zero_add_equiv</span> <span class="n">_</span><span class="o">)</span> <span class="o">},</span>
  <span class="n">add_zero</span>          <span class="o">:=</span> <span class="kd">by</span> <span class="o">{</span> <span class="n">rintros</span> <span class="o">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">ox</span><span class="o">⟩,</span> <span class="n">exact</span> <span class="n">quotient.sound</span> <span class="o">(</span><span class="n">pgame.add_zero_equiv</span> <span class="n">_</span><span class="o">)</span> <span class="o">},</span>
  <span class="n">neg</span>               <span class="o">:=</span> <span class="n">surreal.neg</span><span class="o">,</span>
  <span class="n">sub</span>               <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">surreal.neg</span> <span class="n">y</span><span class="o">,</span>
  <span class="n">sub_eq_add_neg</span>    <span class="o">:=</span> <span class="kd">by</span> <span class="n">try_refl_tac</span><span class="o">,</span>
  <span class="n">add_left_neg</span>      <span class="o">:=</span> <span class="kd">by</span> <span class="o">{</span> <span class="n">rintros</span> <span class="o">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">ox</span><span class="o">⟩,</span> <span class="n">exact</span> <span class="n">quotient.sound</span> <span class="n">pgame.add_left_neg_equiv</span> <span class="o">},</span>
  <span class="n">add_comm</span>          <span class="o">:=</span> <span class="kd">by</span> <span class="o">{</span> <span class="n">rintros</span> <span class="o">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">ox</span><span class="o">⟩</span> <span class="o">⟨</span><span class="n">y</span><span class="o">,</span> <span class="n">oy</span><span class="o">⟩,</span> <span class="n">exact</span> <span class="n">quotient.sound</span> <span class="n">pgame.add_comm_equiv</span> <span class="o">},</span>
  <span class="n">le</span>                <span class="o">:=</span> <span class="n">surreal.le</span><span class="o">,</span>
  <span class="n">lt</span>                <span class="o">:=</span> <span class="n">surreal.lt</span><span class="o">,</span>
  <span class="n">le_refl</span>           <span class="o">:=</span> <span class="kd">by</span> <span class="o">{</span> <span class="n">rintros</span> <span class="o">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">ox</span><span class="o">⟩,</span> <span class="n">refl</span> <span class="o">},</span>
  <span class="n">le_trans</span>          <span class="o">:=</span> <span class="kd">by</span> <span class="o">{</span> <span class="n">rintros</span> <span class="o">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">ox</span><span class="o">⟩</span> <span class="o">⟨</span><span class="n">y</span><span class="o">,</span> <span class="n">oy</span><span class="o">⟩</span> <span class="o">⟨</span><span class="n">z</span><span class="o">,</span> <span class="n">oz</span><span class="o">⟩,</span> <span class="n">exact</span> <span class="n">pgame.le_trans</span> <span class="o">},</span>
  <span class="n">lt_iff_le_not_le</span>  <span class="o">:=</span> <span class="kd">by</span> <span class="o">{</span> <span class="n">rintros</span> <span class="o">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">ox</span><span class="o">⟩</span> <span class="o">⟨</span><span class="n">y</span><span class="o">,</span> <span class="n">oy</span><span class="o">⟩,</span> <span class="n">exact</span> <span class="n">pgame.lt_iff_le_not_le</span> <span class="n">ox</span> <span class="n">oy</span> <span class="o">},</span>
  <span class="n">le_antisymm</span>       <span class="o">:=</span> <span class="kd">by</span> <span class="o">{</span> <span class="n">rintros</span> <span class="o">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">ox</span><span class="o">⟩</span> <span class="o">⟨</span><span class="n">y</span><span class="o">,</span> <span class="n">oy</span><span class="o">⟩</span> <span class="n">h₁</span> <span class="n">h₂</span><span class="o">,</span> <span class="n">exact</span> <span class="n">quotient.sound</span> <span class="o">⟨</span><span class="n">h₁</span><span class="o">,</span> <span class="n">h₂</span><span class="o">⟩</span> <span class="o">},</span>
  <span class="n">add_le_add_left</span>   <span class="o">:=</span> <span class="kd">by</span> <span class="o">{</span> <span class="n">rintros</span> <span class="o">⟨</span><span class="n">x</span><span class="o">,</span> <span class="n">ox</span><span class="o">⟩</span> <span class="o">⟨</span><span class="n">y</span><span class="o">,</span> <span class="n">oy</span><span class="o">⟩</span> <span class="n">hx</span> <span class="o">⟨</span><span class="n">z</span><span class="o">,</span> <span class="n">oz</span><span class="o">⟩,</span> <span class="n">exact</span> <span class="n">pgame.add_le_add_left</span> <span class="n">hx</span> <span class="o">}</span> <span class="o">}</span>

<span class="kd">end</span> <span class="n">surreal</span>
</code></pre></div>
<p>Is there any way I can improve the code?</p>



<a name="235215202"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/235215202" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#235215202">(Apr 19 2021 at 17:05)</a>:</h4>
<p>The next <a href="https://github.com/leanprover-community/mathlib/blob/6f0c4fb3364a69a1a29800c7d92f1901551f37f0/src/set_theory/surreal.lean#L370">TODO</a> in the surreal.lean file is the construction of a homomorphism <code>surreal → game</code> but I don't know what <code>game</code> is. </p>
<p>So, I'm instead thinking of constructing the "dyadic rationals" as surreal numbers.</p>



<a name="235216275"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/235216275" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#235216275">(Apr 19 2021 at 17:13)</a>:</h4>
<p>There's no point defining <code>sub</code> there like that, it will use that definition for you automatically.</p>



<a name="235216431"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/235216431" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#235216431">(Apr 19 2021 at 17:14)</a>:</h4>
<p>However, it might be worth doing if you defined it as <code>⟦⟨x-y, pgame.numeric_sub ox oy⟩⟧</code> instead</p>



<a name="235216439"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/235216439" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#235216439">(Apr 19 2021 at 17:14)</a>:</h4>
<p>Which is more work, but unfolds more nicely</p>



<a name="235216706"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/235216706" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#235216706">(Apr 19 2021 at 17:16)</a>:</h4>
<p>I'd recommend you make a PR with what you have anyway</p>



<a name="235218141"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/235218141" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#235218141">(Apr 19 2021 at 17:27)</a>:</h4>
<p>Thanks! Will push this to mathlib soon. <br>
I also didn't like just using the <code>sub</code> definition from some instance in the library but I couldn't figure out how to get Lean to infer it automatically.</p>



<a name="235218352"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/235218352" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#235218352">(Apr 19 2021 at 17:29)</a>:</h4>
<p>Regarding dyadic rationals, I think a good intermediate step is to define and prove the basic properties of the <code>midpoint</code> function, which I think is the main driver behind the dyadic rational construction</p>



<a name="235218443"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/235218443" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#235218443">(Apr 19 2021 at 17:30)</a>:</h4>
<p>(maybe there are conditions on the inputs, I forget the details)</p>



<a name="235218678"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/235218678" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#235218678">(Apr 19 2021 at 17:31)</a>:</h4>
<p>It's awfully convenient to have <code>x - y = x + -y</code> be defeq. I wouldn't redefine it unless it expands to something crazy with the default definition</p>



<a name="235237122"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/235237122" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#235237122">(Apr 19 2021 at 19:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/116395-maths/topic/Surreal.20numbers/near/235218352">said</a>:</p>
<blockquote>
<p>Regarding dyadic rationals, I think a good intermediate step is to define and prove the basic properties of the <code>midpoint</code> function, which I think is the main driver behind the dyadic rational construction</p>
</blockquote>
<p>Do you have a specific property in mind? I think it is true that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mi mathvariant="normal">/</mi><msup><mn>2</mn><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></msup><mo>=</mo><mo stretchy="false">{</mo><mn>0</mn><mi mathvariant="normal">∣</mi><mn>1</mn><mi mathvariant="normal">/</mi><msup><mn>2</mn><mi>n</mi></msup><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex"> 1/2^{n+1} = \{ 0 | 1/2^n \} </annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord">/</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">0</span><span class="mord">∣</span><span class="mord">1</span><span class="mord">/</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="mclose">}</span></span></span></span>. More generally, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>x</mi><mo>+</mo><mi>y</mi><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mn>2</mn><mo>=</mo><mo stretchy="false">{</mo><mi>x</mi><mi mathvariant="normal">∣</mi><mi>y</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex"> (x + y)/2 = \{ x | y \} </annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mord">/</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathnormal">x</span><span class="mord">∣</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">}</span></span></span></span> works  when <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span> and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span> are <em>adjacent numbers created on the same day</em>.</p>
<p>I can try and  figure out what this might look like formally.</p>



<a name="235251503"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/235251503" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#235251503">(Apr 19 2021 at 21:15)</a>:</h4>
<p>Right, that latter property is the one I'm talking about. You have to prove that that number is in fact <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mo>:</mo><mo>=</mo><mo stretchy="false">(</mo><mi>x</mi><mo>+</mo><mi>y</mi><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">m:=(x+y)/2</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mord">/</span><span class="mord">2</span></span></span></span>, for example by proving that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mo>+</mo><mi>m</mi><mo>=</mo><mi>x</mi><mo>+</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">m+m=x+y</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span></p>



<a name="235251533"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/235251533" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#235251533">(Apr 19 2021 at 21:15)</a>:</h4>
<p>"created on the same day" also sounds a bit finicky</p>



<a name="235251630"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/235251630" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#235251630">(Apr 19 2021 at 21:16)</a>:</h4>
<p>Is it possible to say anything interesting about <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><mi>x</mi><mo>∣</mo><mi>y</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{x\mid y\}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">}</span></span></span></span> when <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span> and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span> are just random surreals?</p>



<a name="235251692"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/235251692" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#235251692">(Apr 19 2021 at 21:17)</a>:</h4>
<p>Also, you said "more generally" but the first statement doesn't follow from the second since 0 is born on day 0</p>



<a name="235255693"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/235255693" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#235255693">(Apr 19 2021 at 21:53)</a>:</h4>
<p>Oh right, 0 isn't born on the same day! <br>
I'll take a look at Conway and try to work out the exact mathematical statement.</p>



<a name="235256559"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/235256559" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#235256559">(Apr 19 2021 at 22:01)</a>:</h4>
<p>So I believe the correct mathematical statement is this: if <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>…</mo><mo separator="true">,</mo><msub><mi>x</mi><mrow><mo>−</mo><mi>i</mi></mrow></msub><mo separator="true">,</mo><msub><mi>x</mi><mrow><mo>−</mo><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msub><mi>x</mi><mrow><mo>−</mo><mn>1</mn></mrow></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>0</mn></msub><mo>=</mo><mn>0</mn><mo separator="true">,</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msub><mi>x</mi><mi>i</mi></msub><mo>…</mo></mrow><annotation encoding="application/x-tex"> \dots, x_{-i}, x_{-i + 1}, \dots, x_{-1}, x_0 = 0, x_1, \dots, x_i \dots </annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mathnormal mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">…</span></span></span></span> are the numbers created <em>by</em> day <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> then the  <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><msub><mi>x</mi><mi>i</mi></msub><mi mathvariant="normal">∣</mi><msub><mi>x</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{ x_i | x_{i + 1} \}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">∣</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mclose">}</span></span></span></span> is the midpoint of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex"> x_i </annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">x_{i+1}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.638891em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span>. But this fails for arbitrary <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><msub><mi>x</mi><mi>i</mi></msub><mi mathvariant="normal">∣</mi><msub><mi>x</mi><mi>j</mi></msub><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex"> \{x_i | x_j \} </annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mopen">{</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">∣</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mclose">}</span></span></span></span>.</p>



<a name="235256807"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/235256807" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#235256807">(Apr 19 2021 at 22:03)</a>:</h4>
<p>On shortcut is to just prove that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><mn>0</mn><mi mathvariant="normal">∣</mi><mn>1</mn><mi mathvariant="normal">/</mi><msup><mn>2</mn><mi>n</mi></msup><mo stretchy="false">}</mo><mo>+</mo><mo stretchy="false">{</mo><mn>0</mn><mi mathvariant="normal">∣</mi><mn>1</mn><mi mathvariant="normal">/</mi><msup><mn>2</mn><mi>n</mi></msup><mo stretchy="false">}</mo><mo>=</mo><mn>1</mn><mi mathvariant="normal">/</mi><msup><mn>2</mn><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex"> \{0 | 1/2^n \} + \{0 | 1/2 ^ n \} = 1/2^{n-1} </annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">0</span><span class="mord">∣</span><span class="mord">1</span><span class="mord">/</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="mclose">}</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">0</span><span class="mord">∣</span><span class="mord">1</span><span class="mord">/</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="mclose">}</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord">/</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span>. And define <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mi mathvariant="normal">/</mi><msup><mn>2</mn><mi>n</mi></msup></mrow><annotation encoding="application/x-tex"> m / 2^n </annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">m</span><span class="mord">/</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span> as <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mi mathvariant="normal">/</mi><msup><mn>2</mn><mi>n</mi></msup><mo>+</mo><mo>⋯</mo><mo>+</mo><mn>1</mn><mi mathvariant="normal">/</mi><msup><mn>2</mn><mi>n</mi></msup></mrow><annotation encoding="application/x-tex"> 1/2^n + \dots  + 1/2^n </annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord">/</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord">/</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span>. This will not require the concept of "days".</p>



<a name="235257096"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/235257096" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#235257096">(Apr 19 2021 at 22:06)</a>:</h4>
<p>Do we know that the surreals are a field?</p>



<a name="235257134"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/235257134" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#235257134">(Apr 19 2021 at 22:06)</a>:</h4>
<p>I'm guessing no, but if not then a lot of shortcuts like that won't work</p>



<a name="235257200"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/235257200" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#235257200">(Apr 19 2021 at 22:07)</a>:</h4>
<p>Also, what's the proof sketch? The lean version of the definition is pretty different from the set theory definition</p>



<a name="235257425"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/235257425" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#235257425">(Apr 19 2021 at 22:09)</a>:</h4>
<p>There is a definition of inverse in the library for pgames: <a href="https://github.com/leanprover-community/mathlib/blob/0dfac6ebc9cbb286afb013ccfd7c7478a11ba1e5/src/set_theory/surreal.lean#L106">https://github.com/leanprover-community/mathlib/blob/0dfac6ebc9cbb286afb013ccfd7c7478a11ba1e5/src/set_theory/surreal.lean#L106</a></p>
<p>It might be possible to define the field instance for surreal using this.</p>



<a name="235257813"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/235257813" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#235257813">(Apr 19 2021 at 22:13)</a>:</h4>
<p>Oh, it's not even proved to be numeric</p>



<a name="235257831"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/235257831" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#235257831">(Apr 19 2021 at 22:13)</a>:</h4>
<p>that should be fairly easy</p>



<a name="235257919"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/235257919" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#235257919">(Apr 19 2021 at 22:14)</a>:</h4>
<p>I lifted those definitions straight off wikipedia. I don't think they came with proofs attached</p>



<a name="235258004"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/235258004" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#235258004">(Apr 19 2021 at 22:15)</a>:</h4>
<p>Oh cool, let me try this out first then. Thanks!</p>



<a name="235258112"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/235258112" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#235258112">(Apr 19 2021 at 22:16)</a>:</h4>
<p>Looking at those expressions, I think commutativity of addition and the other ring axioms should be "straightforward"</p>



<a name="235258920"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/235258920" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#235258920">(Apr 19 2021 at 22:24)</a>:</h4>
<p>I think the correct statement regarding midpoints is that if you have a surreal number <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>=</mo><mo stretchy="false">{</mo><mi>L</mi><mo>∣</mo><mi>R</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">x=\{L\mid R\}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mclose">}</span></span></span></span> such that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>sup</mi><mo>⁡</mo><mi>L</mi><mo>&lt;</mo><mi>inf</mi><mo>⁡</mo><mi>R</mi></mrow><annotation encoding="application/x-tex">\sup L &lt; \inf R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mop">sup</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mop">in<span style="margin-right:0.07778em;">f</span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span> (let's say they are real numbers, and in the easy case the max/min are attained), then <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>=</mo><mo stretchy="false">(</mo><mi>sup</mi><mo>⁡</mo><mi>L</mi><mo>+</mo><mi>inf</mi><mo>⁡</mo><mi>R</mi><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">x=(\sup L+\inf R)/2</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mop">sup</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop">in<span style="margin-right:0.07778em;">f</span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mclose">)</span><span class="mord">/</span><span class="mord">2</span></span></span></span></p>



<a name="235259139"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/235259139" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#235259139">(Apr 19 2021 at 22:26)</a>:</h4>
<p>Oh no that's not right, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><mn>2</mn><mo>∣</mo><mn>5</mn><mo stretchy="false">}</mo><mo>=</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">\{2\mid 5\}=3</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">5</span><span class="mclose">}</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span></span></span></span> is mentioned on wikipedia</p>



<a name="235260561"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/235260561" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#235260561">(Apr 19 2021 at 22:39)</a>:</h4>
<p>Oh, <code>pgame</code> already has <code>add_comm</code> proved, it just needs to be packed up</p>



<a name="235260577"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/235260577" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#235260577">(Apr 19 2021 at 22:39)</a>:</h4>
<p>don't see anything about the other field operations though</p>



<a name="235356173"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/235356173" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#235356173">(Apr 20 2021 at 14:51)</a>:</h4>
<p>Right, I'll work on proving things about <code>mul</code> first.</p>



<a name="235598278"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/235598278" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#235598278">(Apr 21 2021 at 23:34)</a>:</h4>
<p>I spent hours (unsuccessfully) trying to prove <code>x * 0 = 0 </code> for <code>pgame</code>s by hand only to discover this:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">set_theory.surreal</span>
<span class="kd">universes</span> <span class="n">u</span>

<span class="kn">namespace</span> <span class="n">pgame</span>

<span class="kd">def</span> <span class="n">mul_zero_relabelling</span> <span class="o">:</span>
  <span class="bp">Π</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">pgame.</span><span class="o">{</span><span class="n">u</span><span class="o">}),</span> <span class="n">relabelling</span> <span class="o">(</span><span class="n">x</span> <span class="bp">*</span> <span class="mi">0</span><span class="o">)</span> <span class="mi">0</span>
  <span class="o">:=</span> <span class="kd">by</span> <span class="o">{</span><span class="n">rintros</span> <span class="o">⟨⟩,</span> <span class="n">tidy</span><span class="o">}</span>

<span class="kd">end</span> <span class="n">pgame</span>
</code></pre></div>
<p>This is insane! How is <code>tidy</code> so powerful? Is this a valid proof? It almost feels like I'm cheating somehow.</p>



<a name="235598354"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/235598354" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#235598354">(Apr 21 2021 at 23:35)</a>:</h4>
<p>If you run <code>tidy?</code> instead, it will tell you what tactics it did.</p>



<a name="235598569"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/235598569" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#235598569">(Apr 21 2021 at 23:38)</a>:</h4>
<p>This is the suggestion: </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">fsplit</span><span class="o">,</span> <span class="n">work_on_goal</span> <span class="mi">0</span> <span class="o">{</span> <span class="n">dsimp</span> <span class="n">at</span> <span class="bp">*</span><span class="o">,</span> <span class="n">fsplit</span><span class="o">,</span> <span class="n">work_on_goal</span> <span class="mi">0</span> <span class="o">{</span> <span class="n">intros</span> <span class="n">ᾰ</span><span class="o">,</span> <span class="n">cases</span> <span class="n">ᾰ</span><span class="o">,</span> <span class="n">work_on_goal</span> <span class="mi">0</span> <span class="o">{</span> <span class="n">cases</span> <span class="n">ᾰ</span><span class="o">,</span> <span class="n">cases</span> <span class="n">ᾰ_snd</span> <span class="o">},</span> <span class="n">cases</span> <span class="n">ᾰ</span><span class="o">,</span> <span class="n">cases</span> <span class="n">ᾰ_snd</span> <span class="o">},</span> <span class="n">work_on_goal</span> <span class="mi">0</span> <span class="o">{</span> <span class="n">intros</span> <span class="n">ᾰ</span><span class="o">,</span> <span class="n">cases</span> <span class="n">ᾰ</span> <span class="o">},</span> <span class="n">work_on_goal</span> <span class="mi">0</span> <span class="o">{</span> <span class="n">intros</span> <span class="n">x</span><span class="o">,</span> <span class="n">cases</span> <span class="n">x</span><span class="o">,</span> <span class="n">work_on_goal</span> <span class="mi">0</span> <span class="o">{</span> <span class="n">cases</span> <span class="n">x</span><span class="o">,</span> <span class="n">cases</span> <span class="n">x_snd</span> <span class="o">},</span> <span class="n">cases</span> <span class="n">x</span><span class="o">,</span> <span class="n">cases</span> <span class="n">x_snd</span> <span class="o">},</span> <span class="n">intros</span> <span class="n">x</span><span class="o">,</span> <span class="n">cases</span> <span class="n">x</span> <span class="o">},</span> <span class="n">work_on_goal</span> <span class="mi">0</span> <span class="o">{</span> <span class="n">dsimp</span> <span class="n">at</span> <span class="bp">*</span><span class="o">,</span> <span class="n">fsplit</span><span class="o">,</span> <span class="n">work_on_goal</span> <span class="mi">0</span> <span class="o">{</span> <span class="n">intros</span> <span class="n">ᾰ</span><span class="o">,</span> <span class="n">cases</span> <span class="n">ᾰ</span><span class="o">,</span> <span class="n">work_on_goal</span> <span class="mi">0</span> <span class="o">{</span> <span class="n">cases</span> <span class="n">ᾰ</span><span class="o">,</span> <span class="n">cases</span> <span class="n">ᾰ_snd</span> <span class="o">},</span> <span class="n">cases</span> <span class="n">ᾰ</span><span class="o">,</span> <span class="n">cases</span> <span class="n">ᾰ_snd</span> <span class="o">},</span> <span class="n">work_on_goal</span> <span class="mi">0</span> <span class="o">{</span> <span class="n">intros</span> <span class="n">ᾰ</span><span class="o">,</span> <span class="n">cases</span> <span class="n">ᾰ</span> <span class="o">},</span> <span class="n">work_on_goal</span> <span class="mi">0</span> <span class="o">{</span> <span class="n">intros</span> <span class="n">x</span><span class="o">,</span> <span class="n">cases</span> <span class="n">x</span><span class="o">,</span> <span class="n">work_on_goal</span> <span class="mi">0</span> <span class="o">{</span> <span class="n">cases</span> <span class="n">x</span><span class="o">,</span> <span class="n">cases</span> <span class="n">x_snd</span> <span class="o">},</span> <span class="n">cases</span> <span class="n">x</span><span class="o">,</span> <span class="n">cases</span> <span class="n">x_snd</span> <span class="o">},</span> <span class="n">intros</span> <span class="n">x</span><span class="o">,</span> <span class="n">cases</span> <span class="n">x</span> <span class="o">},</span> <span class="n">work_on_goal</span> <span class="mi">0</span> <span class="o">{</span> <span class="n">intros</span> <span class="n">i</span><span class="o">,</span> <span class="n">cases</span> <span class="n">i</span><span class="o">,</span> <span class="n">work_on_goal</span> <span class="mi">0</span> <span class="o">{</span> <span class="n">cases</span> <span class="n">i</span><span class="o">,</span> <span class="n">cases</span> <span class="n">i_snd</span> <span class="o">},</span> <span class="n">cases</span> <span class="n">i</span><span class="o">,</span> <span class="n">cases</span> <span class="n">i_snd</span> <span class="o">},</span> <span class="n">intros</span> <span class="n">j</span><span class="o">,</span> <span class="n">cases</span> <span class="n">j</span>
</code></pre></div>
<p><span aria-label="dizzy" class="emoji emoji-1f635" role="img" title="dizzy">:dizzy:</span></p>



<a name="235598588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/235598588" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#235598588">(Apr 21 2021 at 23:38)</a>:</h4>
<p>yeah was just about to post that, lol</p>



<a name="235598592"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/235598592" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#235598592">(Apr 21 2021 at 23:38)</a>:</h4>
<p><code>finish</code> is also good</p>



<a name="235598619"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/235598619" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#235598619">(Apr 21 2021 at 23:39)</a>:</h4>
<p>(although in this case it completely fails)</p>



<a name="235598858"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/235598858" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#235598858">(Apr 21 2021 at 23:42)</a>:</h4>
<p><code>tidy</code> ftw <span aria-label="sunglasses" class="emoji emoji-1f60e" role="img" title="sunglasses">:sunglasses:</span></p>



<a name="235602340"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/235602340" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#235602340">(Apr 22 2021 at 00:24)</a>:</h4>
<p>Even though that's a fairly large tactic script coming out of <code>tidy</code>, I would bet it's straightforward to hand-edit down to something much smaller, even before you understand what it is doing. Very often it runs <code>cases</code> unnecessarily (or "too early"), and this is a large part of why it is slow. Also very often it calls <code>dsimp</code> unnecessarily.</p>



<a name="235602474"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/235602474" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#235602474">(Apr 22 2021 at 00:26)</a>:</h4>
<p>The first step of mindlessly golfing a <code>tidy</code> proof is to add newlines and indentation, so you have a hope. :-)</p>



<a name="235626149"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/235626149" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#235626149">(Apr 22 2021 at 06:28)</a>:</h4>
<p>It looks to me like for the most part it's taking terms apart, with a bit of <code>simp</code> thrown in. If it's slow to run you might want to replace with the output of <code>tidy?</code> and then start aggressively using <code>rintro</code> and <code>rcases</code>.</p>
<p>Yeah I've seen both <code>tidy</code> and <code>nlinarith</code> do things they should never be able to do</p>



<a name="235861979"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/235861979" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#235861979">(Apr 23 2021 at 15:33)</a>:</h4>
<p>I did manage to simplify it quite a bit, and in the process discovered <code>rintros?</code>:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">set_theory.surreal</span>
<span class="kn">open</span> <span class="n">pgame</span>
<span class="kn">namespace</span> <span class="n">pgame</span>

<span class="sd">/-- `x * 0` has exactly the same moves as `0`. -/</span>
<span class="kd">theorem</span> <span class="n">mul_zero_relabelling</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">pgame</span><span class="o">),</span> <span class="n">relabelling</span> <span class="o">(</span><span class="n">x</span> <span class="bp">*</span> <span class="mi">0</span><span class="o">)</span> <span class="mi">0</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">mk</span> <span class="n">xl</span> <span class="n">xr</span> <span class="n">xL</span> <span class="n">xR</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">⟨</span><span class="kd">by</span> <span class="n">fsplit</span><span class="bp">;</span> <span class="n">rintro</span> <span class="o">(⟨</span><span class="n">_</span><span class="o">,</span> <span class="o">⟨⟩⟩</span> <span class="bp">|</span> <span class="o">⟨</span><span class="n">_</span><span class="o">,</span> <span class="o">⟨⟩⟩),</span>
 <span class="kd">by</span> <span class="n">fsplit</span><span class="bp">;</span> <span class="n">rintro</span> <span class="o">(⟨</span><span class="n">_</span><span class="o">,</span> <span class="o">⟨⟩⟩</span> <span class="bp">|</span> <span class="o">⟨</span><span class="n">_</span><span class="o">,</span> <span class="o">⟨⟩⟩),</span>
 <span class="kd">by</span> <span class="n">rintro</span> <span class="o">(⟨</span><span class="n">_</span><span class="o">,</span> <span class="o">⟨⟩⟩</span> <span class="bp">|</span> <span class="o">⟨</span><span class="n">_</span><span class="o">,</span> <span class="o">⟨⟩⟩),</span>
 <span class="kd">by</span> <span class="n">rintro</span> <span class="o">⟨⟩⟩</span>

<span class="sd">/-- `0 * x` has exactly the same moves as `0`. -/</span>
<span class="kd">theorem</span> <span class="n">zero_mul_relabelling</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">pgame</span><span class="o">),</span> <span class="n">relabelling</span> <span class="o">(</span><span class="mi">0</span> <span class="bp">*</span> <span class="n">x</span><span class="o">)</span> <span class="mi">0</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">mk</span> <span class="n">xl</span> <span class="n">xr</span> <span class="n">xL</span> <span class="n">xR</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">⟨</span><span class="kd">by</span> <span class="n">fsplit</span><span class="bp">;</span> <span class="n">rintro</span> <span class="o">(⟨⟨⟩,</span> <span class="n">_</span><span class="o">⟩</span> <span class="bp">|</span> <span class="o">⟨⟨⟩,</span> <span class="n">_</span><span class="o">⟩),</span>
 <span class="kd">by</span> <span class="n">fsplit</span><span class="bp">;</span> <span class="n">rintro</span> <span class="o">(⟨⟨⟩,</span> <span class="n">_</span><span class="o">⟩</span> <span class="bp">|</span> <span class="o">⟨⟨⟩,</span> <span class="n">_</span><span class="o">⟩),</span>
 <span class="kd">by</span> <span class="n">rintro</span> <span class="o">(⟨⟨⟩,</span><span class="n">_</span><span class="o">⟩</span> <span class="bp">|</span> <span class="o">⟨⟨⟩,</span><span class="n">_</span><span class="o">⟩),</span>
 <span class="kd">by</span> <span class="n">rintro</span> <span class="o">⟨⟩⟩</span>

<span class="kd">end</span> <span class="n">pgame</span>
</code></pre></div>



<a name="236078558"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236078558" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236078558">(Apr 25 2021 at 16:55)</a>:</h4>
<p>I'm trying to prove basic properties about the multiplication of surreal numbers. <br>
I have several proofs written out completely but all of the need the following lemmas, which I'm having trouble proving:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">set_theory.surreal</span>
<span class="kn">open</span> <span class="n">pgame</span>

<span class="kd">def</span> <span class="n">neg_congr_relabelling</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">pgame</span><span class="o">}</span>
  <span class="o">(</span><span class="n">h₁</span> <span class="o">:</span> <span class="n">x.relabelling</span> <span class="n">y</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="bp">-</span><span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">relabelling</span> <span class="o">(</span><span class="bp">-</span><span class="n">y</span><span class="o">)</span> <span class="o">:=</span>
<span class="gr">sorry</span>

<span class="kd">def</span> <span class="n">add_congr_relabelling</span> <span class="o">{</span><span class="n">w</span> <span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="o">:</span> <span class="n">pgame</span><span class="o">}</span>
  <span class="o">(</span><span class="n">h₁</span> <span class="o">:</span> <span class="n">w.relabelling</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">h₂</span> <span class="o">:</span> <span class="n">y.relabelling</span> <span class="n">z</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">w</span> <span class="bp">+</span> <span class="n">y</span><span class="o">)</span><span class="bp">.</span><span class="n">relabelling</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">z</span><span class="o">)</span> <span class="o">:=</span>
<span class="gr">sorry</span>
</code></pre></div>
<p>I can try induction on the various variables but that seems like the wrong way to prove these.<br>
Morally, these should be defined recursively but I'm not accustomed to writing recursion in Lean. </p>
<p>Any suggestions? <br>
Thanks,</p>



<a name="236079472"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236079472" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236079472">(Apr 25 2021 at 17:08)</a>:</h4>
<p>Here's a proof for the first one. The recursion pattern is borrowed from <code>relabelling.symm</code></p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">neg_congr_relabelling</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">pgame</span><span class="o">},</span> <span class="n">x.relabelling</span> <span class="n">y</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">-</span><span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">relabelling</span> <span class="o">(</span><span class="bp">-</span><span class="n">y</span><span class="o">)</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">mk</span> <span class="n">xl</span> <span class="n">xr</span> <span class="n">xL</span> <span class="n">xR</span><span class="o">)</span> <span class="o">(</span><span class="n">mk</span> <span class="n">yl</span> <span class="n">yr</span> <span class="n">yL</span> <span class="n">yR</span><span class="o">)</span> <span class="o">⟨</span><span class="n">L_equiv</span><span class="o">,</span> <span class="n">R_equiv</span><span class="o">,</span> <span class="n">L_relabelling</span><span class="o">,</span> <span class="n">R_relabelling</span><span class="o">⟩</span> <span class="o">:=</span>
  <span class="o">⟨</span><span class="n">R_equiv</span><span class="o">,</span> <span class="n">L_equiv</span><span class="o">,</span>
    <span class="bp">λ</span> <span class="n">i</span><span class="o">,</span> <span class="n">neg_congr_relabelling</span> <span class="o">(</span><span class="kd">by</span> <span class="n">simpa</span> <span class="n">using</span> <span class="n">R_relabelling</span> <span class="o">(</span><span class="n">R_equiv</span> <span class="n">i</span><span class="o">)),</span>
    <span class="bp">λ</span> <span class="n">i</span><span class="o">,</span> <span class="n">neg_congr_relabelling</span> <span class="o">(</span><span class="kd">by</span> <span class="n">simpa</span> <span class="n">using</span> <span class="n">L_relabelling</span> <span class="o">(</span><span class="n">L_equiv.symm</span> <span class="n">i</span><span class="o">))⟩</span>
</code></pre></div>



<a name="236177302"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236177302" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236177302">(Apr 26 2021 at 13:52)</a>:</h4>
<p>Thanks!</p>
<p>I've managed to get a proof for <code>surreal.mul_comm</code></p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">set_theory.surreal</span>
<span class="kn">open</span> <span class="n">pgame</span>
<span class="kn">namespace</span> <span class="n">pgame</span>

<span class="sd">/-- An explicit description of the moves for Left in `x * y`. -/</span>
<span class="kd">def</span> <span class="n">left_moves_mul</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">pgame</span><span class="o">}</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="bp">*</span> <span class="n">y</span><span class="o">)</span><span class="bp">.</span><span class="n">left_moves</span>
  <span class="bp">≃</span> <span class="n">x.left_moves</span> <span class="bp">×</span> <span class="n">y.left_moves</span> <span class="bp">⊕</span> <span class="n">x.right_moves</span> <span class="bp">×</span> <span class="n">y.right_moves</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="o">{</span> <span class="n">cases</span> <span class="n">x</span><span class="o">,</span> <span class="n">cases</span> <span class="n">y</span><span class="o">,</span> <span class="n">refl</span><span class="o">,</span> <span class="o">}</span>

<span class="sd">/-- An explicit description of the moves for Right in `x * y`. -/</span>
<span class="kd">def</span> <span class="n">right_moves_mul</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">pgame</span><span class="o">}</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="bp">*</span> <span class="n">y</span><span class="o">)</span><span class="bp">.</span><span class="n">right_moves</span>
  <span class="bp">≃</span> <span class="n">x.left_moves</span> <span class="bp">×</span> <span class="n">y.right_moves</span> <span class="bp">⊕</span> <span class="n">x.right_moves</span> <span class="bp">×</span> <span class="n">y.left_moves</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="o">{</span> <span class="n">cases</span> <span class="n">x</span><span class="o">,</span> <span class="n">cases</span> <span class="n">y</span><span class="o">,</span> <span class="n">refl</span><span class="o">,</span> <span class="o">}</span>

<span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">mk_mul_move_left_inl</span> <span class="o">{</span><span class="n">xl</span> <span class="n">xr</span> <span class="n">yl</span> <span class="n">yr</span><span class="o">}</span> <span class="o">{</span><span class="n">xL</span> <span class="n">xR</span> <span class="n">yL</span> <span class="n">yR</span><span class="o">}</span> <span class="o">{</span><span class="n">i</span> <span class="n">j</span><span class="o">}</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">mk</span> <span class="n">xl</span> <span class="n">xr</span> <span class="n">xL</span> <span class="n">xR</span> <span class="bp">*</span> <span class="n">mk</span> <span class="n">yl</span> <span class="n">yr</span> <span class="n">yL</span> <span class="n">yR</span><span class="o">)</span><span class="bp">.</span><span class="n">move_left</span> <span class="o">(</span><span class="n">sum.inl</span> <span class="o">(</span><span class="n">i</span><span class="o">,</span><span class="n">j</span><span class="o">))</span>
  <span class="bp">=</span> <span class="o">(</span><span class="n">mk</span> <span class="n">xl</span> <span class="n">xr</span> <span class="n">xL</span> <span class="n">xR</span><span class="o">)</span><span class="bp">.</span><span class="n">move_left</span> <span class="n">i</span> <span class="bp">*</span> <span class="o">(</span><span class="n">mk</span> <span class="n">yl</span> <span class="n">yr</span> <span class="n">yL</span> <span class="n">yR</span><span class="o">)</span>
    <span class="bp">+</span> <span class="o">(</span><span class="n">mk</span> <span class="n">xl</span> <span class="n">xr</span> <span class="n">xL</span> <span class="n">xR</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">mk</span> <span class="n">yl</span> <span class="n">yr</span> <span class="n">yL</span> <span class="n">yR</span><span class="o">)</span><span class="bp">.</span><span class="n">move_left</span> <span class="n">j</span>
    <span class="bp">-</span> <span class="o">(</span><span class="n">mk</span> <span class="n">xl</span> <span class="n">xr</span> <span class="n">xL</span> <span class="n">xR</span><span class="o">)</span><span class="bp">.</span><span class="n">move_left</span> <span class="n">i</span> <span class="bp">*</span> <span class="o">(</span><span class="n">mk</span> <span class="n">yl</span> <span class="n">yr</span> <span class="n">yL</span> <span class="n">yR</span><span class="o">)</span><span class="bp">.</span><span class="n">move_left</span> <span class="n">j</span>
<span class="o">:=</span> <span class="n">rfl</span>

<span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">mul_move_left_inl</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">pgame</span><span class="o">}</span> <span class="o">{</span><span class="n">i</span> <span class="n">j</span><span class="o">}</span> <span class="o">:</span>
   <span class="o">(</span><span class="n">x</span> <span class="bp">*</span> <span class="n">y</span><span class="o">)</span><span class="bp">.</span><span class="n">move_left</span> <span class="o">((</span><span class="bp">@</span><span class="n">left_moves_mul</span> <span class="n">x</span> <span class="n">y</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span> <span class="o">(</span><span class="n">sum.inl</span> <span class="o">(</span><span class="n">i</span><span class="o">,</span><span class="n">j</span><span class="o">)))</span>
   <span class="bp">=</span> <span class="n">x.move_left</span> <span class="n">i</span> <span class="bp">*</span> <span class="n">y</span> <span class="bp">+</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">y.move_left</span> <span class="n">j</span> <span class="bp">-</span> <span class="n">x.move_left</span> <span class="n">i</span> <span class="bp">*</span> <span class="n">y.move_left</span> <span class="n">j</span>
<span class="o">:=</span> <span class="kd">by</span> <span class="o">{</span><span class="n">cases</span> <span class="n">x</span><span class="o">,</span> <span class="n">cases</span> <span class="n">y</span><span class="o">,</span> <span class="n">refl</span><span class="o">}</span>

<span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">mk_mul_move_left_inr</span> <span class="o">{</span><span class="n">xl</span> <span class="n">xr</span> <span class="n">yl</span> <span class="n">yr</span><span class="o">}</span> <span class="o">{</span><span class="n">xL</span> <span class="n">xR</span> <span class="n">yL</span> <span class="n">yR</span><span class="o">}</span> <span class="o">{</span><span class="n">i</span> <span class="n">j</span><span class="o">}</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">mk</span> <span class="n">xl</span> <span class="n">xr</span> <span class="n">xL</span> <span class="n">xR</span> <span class="bp">*</span> <span class="n">mk</span> <span class="n">yl</span> <span class="n">yr</span> <span class="n">yL</span> <span class="n">yR</span><span class="o">)</span><span class="bp">.</span><span class="n">move_left</span> <span class="o">(</span><span class="n">sum.inr</span> <span class="o">(</span><span class="n">i</span><span class="o">,</span><span class="n">j</span><span class="o">))</span>
  <span class="bp">=</span> <span class="o">(</span><span class="n">mk</span> <span class="n">xl</span> <span class="n">xr</span> <span class="n">xL</span> <span class="n">xR</span><span class="o">)</span><span class="bp">.</span><span class="n">move_right</span> <span class="n">i</span> <span class="bp">*</span> <span class="o">(</span><span class="n">mk</span> <span class="n">yl</span> <span class="n">yr</span> <span class="n">yL</span> <span class="n">yR</span><span class="o">)</span>
    <span class="bp">+</span> <span class="o">(</span><span class="n">mk</span> <span class="n">xl</span> <span class="n">xr</span> <span class="n">xL</span> <span class="n">xR</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">mk</span> <span class="n">yl</span> <span class="n">yr</span> <span class="n">yL</span> <span class="n">yR</span><span class="o">)</span><span class="bp">.</span><span class="n">move_right</span> <span class="n">j</span>
    <span class="bp">-</span> <span class="o">(</span><span class="n">mk</span> <span class="n">xl</span> <span class="n">xr</span> <span class="n">xL</span> <span class="n">xR</span><span class="o">)</span><span class="bp">.</span><span class="n">move_right</span> <span class="n">i</span> <span class="bp">*</span> <span class="o">(</span><span class="n">mk</span> <span class="n">yl</span> <span class="n">yr</span> <span class="n">yL</span> <span class="n">yR</span><span class="o">)</span><span class="bp">.</span><span class="n">move_right</span> <span class="n">j</span>
<span class="o">:=</span> <span class="n">rfl</span>

<span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">mul_move_left_inr</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">pgame</span><span class="o">}</span> <span class="o">{</span><span class="n">i</span> <span class="n">j</span><span class="o">}</span> <span class="o">:</span>
   <span class="o">(</span><span class="n">x</span> <span class="bp">*</span> <span class="n">y</span><span class="o">)</span><span class="bp">.</span><span class="n">move_left</span> <span class="o">((</span><span class="bp">@</span><span class="n">left_moves_mul</span> <span class="n">x</span> <span class="n">y</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span> <span class="o">(</span><span class="n">sum.inr</span> <span class="o">(</span><span class="n">i</span><span class="o">,</span><span class="n">j</span><span class="o">)))</span>
   <span class="bp">=</span> <span class="n">x.move_right</span> <span class="n">i</span> <span class="bp">*</span> <span class="n">y</span> <span class="bp">+</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">y.move_right</span> <span class="n">j</span> <span class="bp">-</span> <span class="n">x.move_right</span> <span class="n">i</span> <span class="bp">*</span> <span class="n">y.move_right</span> <span class="n">j</span>
<span class="o">:=</span> <span class="kd">by</span> <span class="o">{</span><span class="n">cases</span> <span class="n">x</span><span class="o">,</span> <span class="n">cases</span> <span class="n">y</span><span class="o">,</span> <span class="n">refl</span><span class="o">}</span>

<span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">mk_mul_move_right_inl</span> <span class="o">{</span><span class="n">xl</span> <span class="n">xr</span> <span class="n">yl</span> <span class="n">yr</span><span class="o">}</span> <span class="o">{</span><span class="n">xL</span> <span class="n">xR</span> <span class="n">yL</span> <span class="n">yR</span><span class="o">}</span> <span class="o">{</span><span class="n">i</span> <span class="n">j</span><span class="o">}</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">mk</span> <span class="n">xl</span> <span class="n">xr</span> <span class="n">xL</span> <span class="n">xR</span> <span class="bp">*</span> <span class="n">mk</span> <span class="n">yl</span> <span class="n">yr</span> <span class="n">yL</span> <span class="n">yR</span><span class="o">)</span><span class="bp">.</span><span class="n">move_right</span> <span class="o">(</span><span class="n">sum.inl</span> <span class="o">(</span><span class="n">i</span><span class="o">,</span><span class="n">j</span><span class="o">))</span>
  <span class="bp">=</span> <span class="o">(</span><span class="n">mk</span> <span class="n">xl</span> <span class="n">xr</span> <span class="n">xL</span> <span class="n">xR</span><span class="o">)</span><span class="bp">.</span><span class="n">move_left</span> <span class="n">i</span> <span class="bp">*</span> <span class="o">(</span><span class="n">mk</span> <span class="n">yl</span> <span class="n">yr</span> <span class="n">yL</span> <span class="n">yR</span><span class="o">)</span>
    <span class="bp">+</span> <span class="o">(</span><span class="n">mk</span> <span class="n">xl</span> <span class="n">xr</span> <span class="n">xL</span> <span class="n">xR</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">mk</span> <span class="n">yl</span> <span class="n">yr</span> <span class="n">yL</span> <span class="n">yR</span><span class="o">)</span><span class="bp">.</span><span class="n">move_right</span> <span class="n">j</span>
    <span class="bp">-</span> <span class="o">(</span><span class="n">mk</span> <span class="n">xl</span> <span class="n">xr</span> <span class="n">xL</span> <span class="n">xR</span><span class="o">)</span><span class="bp">.</span><span class="n">move_left</span> <span class="n">i</span> <span class="bp">*</span> <span class="o">(</span><span class="n">mk</span> <span class="n">yl</span> <span class="n">yr</span> <span class="n">yL</span> <span class="n">yR</span><span class="o">)</span><span class="bp">.</span><span class="n">move_right</span> <span class="n">j</span>
<span class="o">:=</span> <span class="n">rfl</span>

<span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">mul_move_right_inl</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">pgame</span><span class="o">}</span> <span class="o">{</span><span class="n">i</span> <span class="n">j</span><span class="o">}</span> <span class="o">:</span>
   <span class="o">(</span><span class="n">x</span> <span class="bp">*</span> <span class="n">y</span><span class="o">)</span><span class="bp">.</span><span class="n">move_right</span> <span class="o">((</span><span class="bp">@</span><span class="n">right_moves_mul</span> <span class="n">x</span> <span class="n">y</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span> <span class="o">(</span><span class="n">sum.inr</span> <span class="o">(</span><span class="n">i</span><span class="o">,</span> <span class="n">j</span><span class="o">)))</span>
   <span class="bp">=</span> <span class="n">x.move_right</span> <span class="n">i</span> <span class="bp">*</span> <span class="n">y</span> <span class="bp">+</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">y.move_left</span> <span class="n">j</span> <span class="bp">-</span> <span class="n">x.move_right</span> <span class="n">i</span> <span class="bp">*</span> <span class="n">y.move_left</span> <span class="n">j</span>
<span class="o">:=</span> <span class="kd">by</span> <span class="o">{</span><span class="n">cases</span> <span class="n">x</span><span class="o">,</span> <span class="n">cases</span> <span class="n">y</span><span class="o">,</span> <span class="n">refl</span><span class="o">}</span>

<span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">mk_mul_move_right_inr</span> <span class="o">{</span><span class="n">xl</span> <span class="n">xr</span> <span class="n">yl</span> <span class="n">yr</span><span class="o">}</span> <span class="o">{</span><span class="n">xL</span> <span class="n">xR</span> <span class="n">yL</span> <span class="n">yR</span><span class="o">}</span> <span class="o">{</span><span class="n">i</span> <span class="n">j</span><span class="o">}</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">mk</span> <span class="n">xl</span> <span class="n">xr</span> <span class="n">xL</span> <span class="n">xR</span> <span class="bp">*</span> <span class="n">mk</span> <span class="n">yl</span> <span class="n">yr</span> <span class="n">yL</span> <span class="n">yR</span><span class="o">)</span><span class="bp">.</span><span class="n">move_right</span> <span class="o">(</span><span class="n">sum.inr</span> <span class="o">(</span><span class="n">i</span><span class="o">,</span><span class="n">j</span><span class="o">))</span>
  <span class="bp">=</span> <span class="o">(</span><span class="n">mk</span> <span class="n">xl</span> <span class="n">xr</span> <span class="n">xL</span> <span class="n">xR</span><span class="o">)</span><span class="bp">.</span><span class="n">move_right</span> <span class="n">i</span> <span class="bp">*</span> <span class="o">(</span><span class="n">mk</span> <span class="n">yl</span> <span class="n">yr</span> <span class="n">yL</span> <span class="n">yR</span><span class="o">)</span>
    <span class="bp">+</span> <span class="o">(</span><span class="n">mk</span> <span class="n">xl</span> <span class="n">xr</span> <span class="n">xL</span> <span class="n">xR</span><span class="o">)</span> <span class="bp">*</span> <span class="o">(</span><span class="n">mk</span> <span class="n">yl</span> <span class="n">yr</span> <span class="n">yL</span> <span class="n">yR</span><span class="o">)</span><span class="bp">.</span><span class="n">move_left</span> <span class="n">j</span>
    <span class="bp">-</span> <span class="o">(</span><span class="n">mk</span> <span class="n">xl</span> <span class="n">xr</span> <span class="n">xL</span> <span class="n">xR</span><span class="o">)</span><span class="bp">.</span><span class="n">move_right</span> <span class="n">i</span> <span class="bp">*</span> <span class="o">(</span><span class="n">mk</span> <span class="n">yl</span> <span class="n">yr</span> <span class="n">yL</span> <span class="n">yR</span><span class="o">)</span><span class="bp">.</span><span class="n">move_left</span> <span class="n">j</span>
<span class="o">:=</span> <span class="n">rfl</span>

<span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">mul_move_right_inr</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">pgame</span><span class="o">}</span> <span class="o">{</span><span class="n">i</span> <span class="n">j</span><span class="o">}</span> <span class="o">:</span>
   <span class="o">(</span><span class="n">x</span> <span class="bp">*</span> <span class="n">y</span><span class="o">)</span><span class="bp">.</span><span class="n">move_right</span> <span class="o">((</span><span class="bp">@</span><span class="n">right_moves_mul</span> <span class="n">x</span> <span class="n">y</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span> <span class="o">(</span><span class="n">sum.inr</span> <span class="o">(</span><span class="n">i</span><span class="o">,</span><span class="n">j</span><span class="o">)))</span>
   <span class="bp">=</span> <span class="n">x.move_right</span> <span class="n">i</span> <span class="bp">*</span> <span class="n">y</span> <span class="bp">+</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">y.move_left</span> <span class="n">j</span> <span class="bp">-</span> <span class="n">x.move_right</span> <span class="n">i</span> <span class="bp">*</span> <span class="n">y.move_left</span> <span class="n">j</span>
<span class="o">:=</span> <span class="kd">by</span> <span class="o">{</span><span class="n">cases</span> <span class="n">x</span><span class="o">,</span> <span class="n">cases</span> <span class="n">y</span><span class="o">,</span> <span class="n">refl</span><span class="o">}</span>

<span class="sd">/-- If `w` has the same moves as `x` and `y` has the same moves as `z`,</span>
<span class="sd">    then `w + y` has the same moves as `x + z`. -/</span>
<span class="kd">def</span> <span class="n">add_congr_relabelling</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">w</span> <span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="o">:</span> <span class="n">pgame</span><span class="o">},</span>
<span class="n">w.relabelling</span> <span class="n">x</span> <span class="bp">→</span> <span class="n">y.relabelling</span> <span class="n">z</span> <span class="bp">→</span> <span class="o">(</span><span class="n">w</span> <span class="bp">+</span> <span class="n">y</span><span class="o">)</span><span class="bp">.</span><span class="n">relabelling</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">z</span><span class="o">)</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">mk</span> <span class="n">wl</span> <span class="n">wr</span> <span class="n">wL</span> <span class="n">wR</span><span class="o">)</span> <span class="o">(</span><span class="n">mk</span> <span class="n">xl</span> <span class="n">xr</span> <span class="n">xL</span> <span class="n">xR</span><span class="o">)</span> <span class="o">(</span><span class="n">mk</span> <span class="n">yl</span> <span class="n">yr</span> <span class="n">yL</span> <span class="n">yR</span><span class="o">)</span> <span class="o">(</span><span class="n">mk</span> <span class="n">zl</span> <span class="n">zr</span> <span class="n">zL</span> <span class="n">zR</span><span class="o">)</span>
  <span class="o">⟨</span><span class="n">L_equiv₁</span><span class="o">,</span> <span class="n">R_equiv₁</span><span class="o">,</span> <span class="n">L_relabelling₁</span><span class="o">,</span> <span class="n">R_relabelling₁</span><span class="o">⟩</span>
  <span class="o">⟨</span><span class="n">L_equiv₂</span><span class="o">,</span> <span class="n">R_equiv₂</span><span class="o">,</span> <span class="n">L_relabelling₂</span><span class="o">,</span> <span class="n">R_relabelling₂</span><span class="o">⟩</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">refine</span> <span class="o">⟨</span><span class="n">_</span><span class="o">,</span><span class="n">_</span><span class="o">,</span><span class="n">_</span><span class="o">,</span><span class="n">_</span><span class="o">⟩,</span>
  <span class="o">{</span> <span class="n">fsplit</span><span class="o">,</span> <span class="c1">-- left moves</span>
    <span class="o">{</span> <span class="n">rintro</span> <span class="o">(</span><span class="n">i</span><span class="bp">|</span><span class="n">j</span><span class="o">),</span>
      <span class="o">{</span> <span class="n">exact</span> <span class="n">sum.inl</span> <span class="o">(</span><span class="n">L_equiv₁</span> <span class="n">i</span><span class="o">)</span> <span class="o">},</span>
      <span class="o">{</span> <span class="n">exact</span> <span class="n">sum.inr</span> <span class="o">(</span><span class="n">L_equiv₂</span> <span class="n">j</span><span class="o">)</span> <span class="o">}},</span>
    <span class="o">{</span> <span class="n">rintro</span> <span class="o">(</span><span class="n">i</span><span class="bp">|</span><span class="n">j</span><span class="o">),</span>
      <span class="o">{</span> <span class="n">exact</span> <span class="n">sum.inl</span> <span class="o">(</span><span class="n">L_equiv₁.symm</span> <span class="n">i</span><span class="o">)</span> <span class="o">},</span>
      <span class="o">{</span> <span class="n">exact</span> <span class="n">sum.inr</span> <span class="o">(</span><span class="n">L_equiv₂.symm</span> <span class="n">j</span><span class="o">)</span> <span class="o">}},</span>
    <span class="o">{</span> <span class="n">rintro</span> <span class="o">(</span><span class="n">_</span><span class="bp">|</span><span class="n">_</span><span class="o">)</span><span class="bp">;</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">equiv.symm_apply_apply</span><span class="o">]</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">rintro</span> <span class="o">(</span><span class="n">_</span><span class="bp">|</span><span class="n">_</span><span class="o">)</span><span class="bp">;</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">equiv.apply_symm_apply</span><span class="o">]</span> <span class="o">}},</span>
  <span class="o">{</span> <span class="n">fsplit</span><span class="o">,</span> <span class="c1">-- right moves</span>
    <span class="o">{</span> <span class="n">rintro</span> <span class="o">(</span><span class="n">i</span><span class="bp">|</span><span class="n">j</span><span class="o">),</span>
      <span class="o">{</span> <span class="n">exact</span> <span class="n">sum.inl</span> <span class="o">(</span><span class="n">R_equiv₁</span> <span class="n">i</span><span class="o">)</span> <span class="o">},</span>
      <span class="o">{</span> <span class="n">exact</span> <span class="n">sum.inr</span> <span class="o">(</span><span class="n">R_equiv₂</span> <span class="n">j</span><span class="o">)</span> <span class="o">}},</span>
    <span class="o">{</span> <span class="n">rintro</span> <span class="o">(</span><span class="n">i</span><span class="bp">|</span><span class="n">j</span><span class="o">),</span>
      <span class="o">{</span> <span class="n">exact</span> <span class="n">sum.inl</span> <span class="o">(</span><span class="n">R_equiv₁.symm</span> <span class="n">i</span><span class="o">)</span> <span class="o">},</span>
      <span class="o">{</span> <span class="n">exact</span> <span class="n">sum.inr</span> <span class="o">(</span><span class="n">R_equiv₂.symm</span> <span class="n">j</span><span class="o">)</span> <span class="o">}},</span>
    <span class="o">{</span> <span class="n">rintro</span> <span class="o">(</span><span class="n">_</span><span class="bp">|</span><span class="n">_</span><span class="o">)</span><span class="bp">;</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">equiv.symm_apply_apply</span><span class="o">]</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">rintro</span> <span class="o">(</span><span class="n">_</span><span class="bp">|</span><span class="n">_</span><span class="o">)</span><span class="bp">;</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">equiv.apply_symm_apply</span><span class="o">]</span> <span class="o">}},</span>
  <span class="o">{</span> <span class="n">rintro</span> <span class="o">(</span><span class="n">i</span><span class="bp">|</span><span class="n">j</span><span class="o">),</span> <span class="c1">-- move left</span>
    <span class="o">{</span> <span class="n">exact</span> <span class="n">add_congr_relabelling</span>
        <span class="o">(</span><span class="n">L_relabelling₁</span> <span class="n">i</span><span class="o">)</span>
        <span class="o">(⟨</span><span class="n">L_equiv₂</span><span class="o">,</span> <span class="n">R_equiv₂</span><span class="o">,</span> <span class="n">L_relabelling₂</span><span class="o">,</span> <span class="n">R_relabelling₂</span><span class="o">⟩)</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">exact</span> <span class="n">add_congr_relabelling</span>
        <span class="o">(⟨</span><span class="n">L_equiv₁</span><span class="o">,</span> <span class="n">R_equiv₁</span><span class="o">,</span> <span class="n">L_relabelling₁</span><span class="o">,</span> <span class="n">R_relabelling₁</span><span class="o">⟩)</span>
        <span class="o">(</span><span class="n">L_relabelling₂</span> <span class="n">j</span><span class="o">)</span> <span class="o">}},</span>
  <span class="o">{</span> <span class="n">rintro</span> <span class="o">(</span><span class="n">i</span><span class="bp">|</span><span class="n">j</span><span class="o">),</span> <span class="c1">-- move right</span>
    <span class="o">{</span> <span class="n">exact</span> <span class="n">add_congr_relabelling</span>
        <span class="o">(</span><span class="n">R_relabelling₁</span> <span class="n">i</span><span class="o">)</span>
        <span class="o">(⟨</span><span class="n">L_equiv₂</span><span class="o">,</span> <span class="n">R_equiv₂</span><span class="o">,</span> <span class="n">L_relabelling₂</span><span class="o">,</span> <span class="n">R_relabelling₂</span><span class="o">⟩)</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">exact</span> <span class="n">add_congr_relabelling</span>
        <span class="o">(⟨</span><span class="n">L_equiv₁</span><span class="o">,</span> <span class="n">R_equiv₁</span><span class="o">,</span> <span class="n">L_relabelling₁</span><span class="o">,</span> <span class="n">R_relabelling₁</span><span class="o">⟩)</span>
        <span class="o">(</span><span class="n">R_relabelling₂</span> <span class="n">j</span><span class="o">)</span> <span class="o">}},</span>
<span class="kd">end</span>
<span class="n">using_well_founded</span> <span class="o">{</span> <span class="n">dec_tac</span> <span class="o">:=</span> <span class="n">pgame_wf_tac</span> <span class="o">}</span>

<span class="sd">/-- If `x` has the same moves as `y`, then `-x` has the sames moves as `-y`. -/</span>
<span class="kd">def</span> <span class="n">neg_congr_relabelling</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">pgame</span><span class="o">},</span> <span class="n">x.relabelling</span> <span class="n">y</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">-</span><span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">relabelling</span> <span class="o">(</span><span class="bp">-</span><span class="n">y</span><span class="o">)</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">mk</span> <span class="n">xl</span> <span class="n">xr</span> <span class="n">xL</span> <span class="n">xR</span><span class="o">)</span> <span class="o">(</span><span class="n">mk</span> <span class="n">yl</span> <span class="n">yr</span> <span class="n">yL</span> <span class="n">yR</span><span class="o">)</span> <span class="o">⟨</span><span class="n">L_equiv</span><span class="o">,</span> <span class="n">R_equiv</span><span class="o">,</span> <span class="n">L_relabelling</span><span class="o">,</span> <span class="n">R_relabelling</span><span class="o">⟩</span> <span class="o">:=</span>
  <span class="o">⟨</span><span class="n">R_equiv</span><span class="o">,</span> <span class="n">L_equiv</span><span class="o">,</span>
    <span class="bp">λ</span> <span class="n">i</span><span class="o">,</span> <span class="n">neg_congr_relabelling</span> <span class="o">(</span><span class="kd">by</span> <span class="n">simpa</span> <span class="n">using</span> <span class="n">R_relabelling</span> <span class="o">(</span><span class="n">R_equiv</span> <span class="n">i</span><span class="o">)),</span>
    <span class="bp">λ</span> <span class="n">i</span><span class="o">,</span> <span class="n">neg_congr_relabelling</span> <span class="o">(</span><span class="kd">by</span> <span class="n">simpa</span> <span class="n">using</span> <span class="n">L_relabelling</span> <span class="o">(</span><span class="n">L_equiv.symm</span> <span class="n">i</span><span class="o">))⟩</span>

<span class="sd">/-- If `w` has the same moves as `x` and `y` has the same moves as `z`,</span>
<span class="sd">then `w - y` has the same moves as `x - z`. -/</span>
<span class="kd">theorem</span> <span class="n">sub_congr_relabelling</span> <span class="o">{</span><span class="n">w</span> <span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="o">:</span> <span class="n">pgame</span><span class="o">}</span>
  <span class="o">(</span><span class="n">h₁</span> <span class="o">:</span> <span class="n">w.relabelling</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">h₂</span> <span class="o">:</span> <span class="n">y.relabelling</span> <span class="n">z</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">w</span> <span class="bp">-</span> <span class="n">y</span><span class="o">)</span><span class="bp">.</span><span class="n">relabelling</span> <span class="o">(</span><span class="n">x</span> <span class="bp">-</span> <span class="n">z</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">add_congr_relabelling</span> <span class="n">h₁</span> <span class="o">(</span><span class="n">neg_congr_relabelling</span> <span class="n">h₂</span><span class="o">)</span>

<span class="sd">/-- If `a` has the same moves as `x`, `b` has the same moves as `y`,</span>
<span class="sd">and `c` has the same moves as `z`, then `a + b - c` has the same moves as `y + x - z`. -/</span>
<span class="kd">lemma</span> <span class="n">add_sub_comm</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="o">:</span> <span class="n">pgame</span><span class="o">}</span>
  <span class="o">(</span><span class="n">h₁</span> <span class="o">:</span> <span class="n">a.relabelling</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">h₂</span> <span class="o">:</span> <span class="n">b.relabelling</span> <span class="n">y</span><span class="o">)</span> <span class="o">(</span><span class="n">h₃</span> <span class="o">:</span> <span class="n">c.relabelling</span> <span class="n">z</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">-</span> <span class="n">c</span><span class="o">)</span><span class="bp">.</span><span class="n">relabelling</span> <span class="o">(</span><span class="n">y</span> <span class="bp">+</span> <span class="n">x</span> <span class="bp">-</span> <span class="n">z</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">sub_congr_relabelling</span>
  <span class="o">(</span><span class="n">relabelling.trans</span>
    <span class="o">(</span><span class="n">add_comm_relabelling</span> <span class="n">a</span> <span class="n">b</span><span class="o">)</span>
    <span class="o">(</span><span class="n">add_congr_relabelling</span> <span class="n">h₂</span> <span class="n">h₁</span><span class="o">))</span> <span class="n">h₃</span>

<span class="sd">/-- `x * y` has exactly the same moves as `y * x`. -/</span>
<span class="kd">theorem</span> <span class="n">mul_comm_relabelling</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">pgame</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="bp">*</span> <span class="n">y</span><span class="o">)</span><span class="bp">.</span><span class="n">relabelling</span> <span class="o">(</span><span class="n">y</span> <span class="bp">*</span> <span class="n">x</span><span class="o">):=</span>
<span class="kd">begin</span>
  <span class="n">induction</span> <span class="n">x</span> <span class="k">with</span> <span class="n">xl</span> <span class="n">xr</span> <span class="n">xL</span> <span class="n">xR</span> <span class="n">I1</span> <span class="n">I2</span> <span class="n">generalizing</span> <span class="n">y</span><span class="o">,</span>
  <span class="n">induction</span> <span class="n">y</span> <span class="k">with</span> <span class="n">yl</span> <span class="n">yr</span> <span class="n">yL</span> <span class="n">yR</span> <span class="n">J1</span> <span class="n">J2</span><span class="o">,</span>
  <span class="n">refine</span> <span class="o">⟨</span><span class="n">_</span><span class="o">,</span><span class="n">_</span><span class="o">,</span><span class="n">_</span><span class="o">,</span><span class="n">_</span><span class="o">⟩,</span>
  <span class="o">{</span> <span class="n">fsplit</span><span class="bp">;</span> <span class="n">rintro</span> <span class="o">(⟨</span><span class="n">i</span><span class="o">,</span> <span class="n">j</span><span class="o">⟩</span> <span class="bp">|</span> <span class="o">⟨</span><span class="n">i</span><span class="o">,</span> <span class="n">j</span><span class="o">⟩)</span><span class="bp">;</span>
    <span class="n">exact</span> <span class="n">sum.inl</span> <span class="o">(</span><span class="n">j</span><span class="o">,</span><span class="n">i</span><span class="o">)</span> <span class="bp">&lt;|&gt;</span> <span class="n">exact</span> <span class="n">sum.inr</span> <span class="o">(</span><span class="n">j</span><span class="o">,</span><span class="n">i</span><span class="o">)</span> <span class="bp">&lt;|&gt;</span> <span class="n">refl</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">fsplit</span><span class="bp">;</span> <span class="n">rintro</span> <span class="o">(⟨</span><span class="n">i</span><span class="o">,</span> <span class="n">j</span><span class="o">⟩</span> <span class="bp">|</span> <span class="o">⟨</span><span class="n">i</span><span class="o">,</span> <span class="n">j</span><span class="o">⟩)</span><span class="bp">;</span>
    <span class="n">exact</span> <span class="n">sum.inl</span> <span class="o">(</span><span class="n">j</span><span class="o">,</span><span class="n">i</span><span class="o">)</span> <span class="bp">&lt;|&gt;</span> <span class="n">exact</span> <span class="n">sum.inr</span> <span class="o">(</span><span class="n">j</span><span class="o">,</span><span class="n">i</span><span class="o">)</span> <span class="bp">&lt;|&gt;</span> <span class="n">refl</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">rintro</span> <span class="o">(⟨</span><span class="n">i</span><span class="o">,</span> <span class="n">j</span><span class="o">⟩</span> <span class="bp">|</span> <span class="o">⟨</span><span class="n">i</span><span class="o">,</span> <span class="n">j</span><span class="o">⟩),</span>
    <span class="o">{</span> <span class="n">exact</span> <span class="n">add_sub_comm</span> <span class="o">(</span><span class="n">I1</span> <span class="n">i</span> <span class="o">(</span><span class="n">mk</span> <span class="n">yl</span> <span class="n">yr</span> <span class="n">yL</span> <span class="n">yR</span><span class="o">))</span> <span class="o">(</span><span class="n">J1</span> <span class="n">j</span><span class="o">)</span> <span class="o">(</span><span class="n">I1</span> <span class="n">i</span> <span class="o">(</span><span class="n">yL</span> <span class="n">j</span><span class="o">))</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">exact</span> <span class="n">add_sub_comm</span> <span class="o">(</span><span class="n">I2</span> <span class="n">i</span> <span class="o">(</span><span class="n">mk</span> <span class="n">yl</span> <span class="n">yr</span> <span class="n">yL</span> <span class="n">yR</span><span class="o">))</span> <span class="o">(</span><span class="n">J2</span> <span class="n">j</span><span class="o">)</span> <span class="o">(</span><span class="n">I2</span> <span class="n">i</span> <span class="o">(</span><span class="n">yR</span> <span class="n">j</span><span class="o">))</span> <span class="o">}},</span>
  <span class="o">{</span> <span class="n">rintro</span> <span class="o">(⟨</span><span class="n">i</span><span class="o">,</span> <span class="n">j</span><span class="o">⟩</span> <span class="bp">|</span> <span class="o">⟨</span><span class="n">i</span><span class="o">,</span> <span class="n">j</span><span class="o">⟩),</span>
    <span class="o">{</span> <span class="n">exact</span> <span class="n">add_sub_comm</span> <span class="o">(</span><span class="n">I2</span> <span class="n">j</span> <span class="o">(</span><span class="n">mk</span> <span class="n">yl</span> <span class="n">yr</span> <span class="n">yL</span> <span class="n">yR</span><span class="o">))</span> <span class="o">(</span><span class="n">J1</span> <span class="n">i</span><span class="o">)</span> <span class="o">(</span><span class="n">I2</span> <span class="n">j</span> <span class="o">(</span><span class="n">yL</span> <span class="n">i</span><span class="o">))</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">exact</span> <span class="n">add_sub_comm</span> <span class="o">(</span><span class="n">I1</span> <span class="n">j</span> <span class="o">(</span><span class="n">mk</span> <span class="n">yl</span> <span class="n">yr</span> <span class="n">yL</span> <span class="n">yR</span><span class="o">))</span> <span class="o">(</span><span class="n">J2</span> <span class="n">i</span><span class="o">)</span> <span class="o">(</span><span class="n">I1</span> <span class="n">j</span> <span class="o">(</span><span class="n">yR</span> <span class="n">i</span><span class="o">))</span> <span class="o">}}</span>
<span class="kd">end</span>

<span class="sd">/-- `x * y` is equivalent to `y * x`. -/</span>
<span class="kd">theorem</span> <span class="n">mul_comm_equiv</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">pgame</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="bp">*</span> <span class="n">y</span><span class="o">)</span><span class="bp">.</span><span class="n">equiv</span> <span class="o">(</span><span class="n">y</span> <span class="bp">*</span> <span class="n">x</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">equiv_of_relabelling</span> <span class="o">(</span><span class="n">mul_comm_relabelling</span> <span class="n">x</span> <span class="n">y</span><span class="o">)</span>

<span class="sd">/-- `x * 0` has exactly the same moves as `0`. -/</span>
<span class="kd">theorem</span> <span class="n">mul_zero_relabelling</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">pgame</span><span class="o">),</span> <span class="n">relabelling</span> <span class="o">(</span><span class="n">x</span> <span class="bp">*</span> <span class="mi">0</span><span class="o">)</span> <span class="mi">0</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">mk</span> <span class="n">xl</span> <span class="n">xr</span> <span class="n">xL</span> <span class="n">xR</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">⟨</span><span class="kd">by</span> <span class="n">fsplit</span><span class="bp">;</span> <span class="n">rintro</span> <span class="o">(⟨</span><span class="n">_</span><span class="o">,⟨⟩⟩</span> <span class="bp">|</span> <span class="o">⟨</span><span class="n">_</span><span class="o">,⟨⟩⟩),</span>
 <span class="kd">by</span> <span class="n">fsplit</span><span class="bp">;</span> <span class="n">rintro</span> <span class="o">(⟨</span><span class="n">_</span><span class="o">,⟨⟩⟩</span> <span class="bp">|</span> <span class="o">⟨</span><span class="n">_</span><span class="o">,⟨⟩⟩),</span>
 <span class="kd">by</span> <span class="n">rintro</span> <span class="o">(⟨</span><span class="n">_</span><span class="o">,⟨⟩⟩</span> <span class="bp">|</span> <span class="o">⟨</span><span class="n">_</span><span class="o">,⟨⟩⟩),</span>
 <span class="kd">by</span> <span class="n">rintro</span> <span class="o">⟨⟩⟩</span>

<span class="sd">/-- `x * 0` is equivalent to `0`. -/</span>
<span class="kd">theorem</span> <span class="n">mul_zero_equiv</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">pgame</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">x</span> <span class="bp">*</span> <span class="mi">0</span><span class="o">)</span><span class="bp">.</span><span class="n">equiv</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="n">equiv_of_relabelling</span> <span class="o">(</span><span class="n">mul_zero_relabelling</span> <span class="n">x</span><span class="o">)</span>

<span class="sd">/-- `0 * x` has exactly the same moves as `0`. -/</span>
<span class="kd">theorem</span> <span class="n">zero_mul_relabelling</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">pgame</span><span class="o">),</span> <span class="n">relabelling</span> <span class="o">(</span><span class="mi">0</span> <span class="bp">*</span> <span class="n">x</span><span class="o">)</span> <span class="mi">0</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">mk</span> <span class="n">xl</span> <span class="n">xr</span> <span class="n">xL</span> <span class="n">xR</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">⟨</span><span class="kd">by</span> <span class="n">fsplit</span><span class="bp">;</span> <span class="n">rintro</span> <span class="o">(⟨⟨⟩,</span><span class="n">_</span><span class="o">⟩</span> <span class="bp">|</span> <span class="o">⟨⟨⟩,</span><span class="n">_</span><span class="o">⟩),</span>
 <span class="kd">by</span> <span class="n">fsplit</span><span class="bp">;</span> <span class="n">rintro</span> <span class="o">(⟨⟨⟩,</span><span class="n">_</span><span class="o">⟩</span> <span class="bp">|</span> <span class="o">⟨⟨⟩,</span><span class="n">_</span><span class="o">⟩),</span>
 <span class="kd">by</span> <span class="n">rintro</span> <span class="o">(⟨⟨⟩,</span><span class="n">_</span><span class="o">⟩</span> <span class="bp">|</span> <span class="o">⟨⟨⟩,</span><span class="n">_</span><span class="o">⟩),</span>
 <span class="kd">by</span> <span class="n">rintro</span> <span class="o">⟨⟩⟩</span>

<span class="sd">/-- `0 * x` is equivalent to `0`. -/</span>
<span class="kd">theorem</span> <span class="n">zero_mul_equiv</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">pgame</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="mi">0</span> <span class="bp">*</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">equiv</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="n">equiv_of_relabelling</span> <span class="o">(</span><span class="n">zero_mul_relabelling</span> <span class="n">x</span><span class="o">)</span>

<span class="kd">end</span> <span class="n">pgame</span>
</code></pre></div>



<a name="236177866"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236177866" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236177866">(Apr 26 2021 at 13:56)</a>:</h4>
<p>That is some very elegant-looking code! I hope you're PR'ing this stuff!</p>



<a name="236178604"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236178604" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236178604">(Apr 26 2021 at 14:00)</a>:</h4>
<p>Thanks! :) </p>
<p>I'll try to optimize the code a bit  and PR it away.</p>



<a name="236178703"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236178703" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236178703">(Apr 26 2021 at 14:01)</a>:</h4>
<p>Would you recommend opening up a single PR for the entire thing?</p>



<a name="236178946"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236178946" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236178946">(Apr 26 2021 at 14:03)</a>:</h4>
<p>If by "entire thing" you mean that medium-length code block above, definitely</p>



<a name="236179037"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236179037" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236179037">(Apr 26 2021 at 14:03)</a>:</h4>
<p>if you mean "Everything you intend to do on surreal numbers after that" too, then probably not!</p>



<a name="236179228"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236179228" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236179228">(Apr 26 2021 at 14:04)</a>:</h4>
<p>It's tempting to rename <code>equiv_of_relabelling</code> to <code>relabelling.equiv</code>, and then you can probably just remove the <code>zero_mul_equiv</code> etc lemmas as they become <code>(zero_mul_relabelling x).equiv</code></p>



<a name="236179776"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236179776" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236179776">(Apr 26 2021 at 14:07)</a>:</h4>
<p>Great, I'll do that. </p>
<p>There are quite a few other <code>_equiv</code> lemmas in pgame and surreal that are like that. Will need to change that as well.</p>



<a name="236181989"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236181989" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236181989">(Apr 26 2021 at 14:21)</a>:</h4>
<p>That might make sense to do as a standalone "chore" or "refactor" PR</p>



<a name="236182010"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236182010" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236182010">(Apr 26 2021 at 14:21)</a>:</h4>
<p>If you're looking for an excuse to split your PR in two :)</p>



<a name="236191962"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236191962" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236191962">(Apr 26 2021 at 15:11)</a>:</h4>
<p>It should be fine. Those theorems are never used anywhere :P</p>



<a name="236282195"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236282195" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236282195">(Apr 27 2021 at 04:33)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/116395-maths/topic/Surreal.20numbers/near/236179228">said</a>:</p>
<blockquote>
<p>It's tempting to rename <code>equiv_of_relabelling</code> to <code>relabelling.equiv</code>, and then you can probably just remove the <code>zero_mul_equiv</code> etc lemmas as they become <code>(zero_mul_relabelling x).equiv</code></p>
</blockquote>
<p>This is turning out to be more complicated than I first thought. I'll follow your suggestion of opening a separate PR for refactoring.</p>



<a name="236555994"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236555994" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236555994">(Apr 28 2021 at 18:30)</a>:</h4>
<p>TIL: For pgames, it turns out that <code>a*(b+c)</code> is not a relabelling of <code>a*b + a*c</code>. You get a term <code>x - x</code> on one side and <code>0</code> on the other.</p>



<a name="236595460"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236595460" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236595460">(Apr 28 2021 at 23:23)</a>:</h4>
<p>Given multiplication only really works on surreals, not on games, you expect it to break at some point. But it's nice to know this is where it starts, I didn't know that at all!</p>



<a name="236596739"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236596739" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236596739">(Apr 28 2021 at 23:36)</a>:</h4>
<p>Is it worth PRing the statement that no such relabeling exists?</p>



<a name="236597298"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236597298" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236597298">(Apr 28 2021 at 23:44)</a>:</h4>
<p>Meh, not really.</p>



<a name="236602567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236602567" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236602567">(Apr 29 2021 at 00:49)</a>:</h4>
<p>I too discovered this completely accidentally. Just the number of terms on the two sides do not agree.</p>



<a name="236602580"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236602580" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236602580">(Apr 29 2021 at 00:49)</a>:</h4>
<p>My current hope is to define the following: </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">inductive</span> <span class="n">weak_relabelling</span> <span class="o">:</span> <span class="n">pgame.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="bp">→</span> <span class="n">pgame.</span><span class="o">{</span><span class="n">u</span><span class="o">}</span> <span class="bp">→</span> <span class="kt">Type</span> <span class="o">(</span><span class="n">u</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span>
<span class="bp">|</span> <span class="n">mk</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">pgame</span><span class="o">}</span> <span class="o">(</span><span class="n">L</span> <span class="o">:</span> <span class="n">x.left_moves</span> <span class="bp">≃</span> <span class="n">y.left_moves</span><span class="o">)</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="n">x.right_moves</span> <span class="bp">≃</span> <span class="n">y.right_moves</span><span class="o">),</span>
         <span class="o">(</span><span class="bp">∀</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">x.left_moves</span><span class="o">),</span> <span class="o">(</span><span class="n">x.move_left</span> <span class="n">i</span><span class="o">)</span><span class="bp">.</span><span class="n">equiv</span> <span class="o">(</span><span class="n">y.move_left</span> <span class="o">(</span><span class="n">L</span> <span class="n">i</span><span class="o">)))</span> <span class="bp">→</span>
         <span class="o">(</span><span class="bp">∀</span> <span class="o">(</span><span class="n">j</span> <span class="o">:</span> <span class="n">y.right_moves</span><span class="o">),</span> <span class="o">(</span><span class="n">x.move_right</span> <span class="o">(</span><span class="n">R.symm</span> <span class="n">j</span><span class="o">))</span><span class="bp">.</span><span class="n">equiv</span> <span class="o">(</span><span class="n">y.move_right</span> <span class="n">j</span><span class="o">))</span> <span class="bp">→</span>
       <span class="n">weak_relabelling</span> <span class="n">x</span> <span class="n">y</span>
</code></pre></div>



<a name="236602646"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236602646" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236602646">(Apr 29 2021 at 00:50)</a>:</h4>
<p>and hope that <code>weak_relabelling</code> implies <code>equiv</code>.</p>



<a name="236602738"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236602738" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236602738">(Apr 29 2021 at 00:51)</a>:</h4>
<p>I think this should provide <code>mul_comm_weak_relabelling</code> for pgames too, not just surreals.</p>



<a name="236607368"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236607368" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236607368">(Apr 29 2021 at 01:54)</a>:</h4>
<p>Isn't this just the same as <code>equiv</code>?</p>



<a name="236607381"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236607381" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236607381">(Apr 29 2021 at 01:55)</a>:</h4>
<p>why not prove <code>equiv</code> directly?</p>



<a name="236607414"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236607414" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236607414">(Apr 29 2021 at 01:55)</a>:</h4>
<p>(specifically, rather than a new inductive that should be a lemma about <code>equiv</code>)</p>



<a name="236610893"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236610893" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236610893">(Apr 29 2021 at 02:45)</a>:</h4>
<p>For <code>equiv</code> we'll need to show that <code>a*(b+c) \le a*b + a*c</code> and <code>a*b + a*c \le a*(b+c)</code>.</p>



<a name="236610912"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236610912" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236610912">(Apr 29 2021 at 02:45)</a>:</h4>
<p>I'm not entirely sure how to do either tbh</p>



<a name="236615334"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236615334" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236615334">(Apr 29 2021 at 03:55)</a>:</h4>
<p>Mario is suggesting that you prove</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">foo</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">pgame</span><span class="o">}</span> <span class="o">(</span><span class="n">L</span> <span class="o">:</span> <span class="n">x.left_moves</span> <span class="bp">≃</span> <span class="n">y.left_moves</span><span class="o">)</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="n">x.right_moves</span> <span class="bp">≃</span> <span class="n">y.right_moves</span><span class="o">),</span>
         <span class="o">(</span><span class="bp">∀</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">x.left_moves</span><span class="o">),</span> <span class="o">(</span><span class="n">x.move_left</span> <span class="n">i</span><span class="o">)</span><span class="bp">.</span><span class="n">equiv</span> <span class="o">(</span><span class="n">y.move_left</span> <span class="o">(</span><span class="n">L</span> <span class="n">i</span><span class="o">)))</span> <span class="bp">→</span>
         <span class="o">(</span><span class="bp">∀</span> <span class="o">(</span><span class="n">j</span> <span class="o">:</span> <span class="n">y.right_moves</span><span class="o">),</span> <span class="o">(</span><span class="n">x.move_right</span> <span class="o">(</span><span class="n">R.symm</span> <span class="n">j</span><span class="o">))</span><span class="bp">.</span><span class="n">equiv</span> <span class="o">(</span><span class="n">y.move_right</span> <span class="n">j</span><span class="o">)),</span>
       <span class="n">x.equiv</span> <span class="n">y</span>
</code></pre></div>



<a name="236619507"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236619507" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236619507">(Apr 29 2021 at 05:01)</a>:</h4>
<p>I see, so instead of an inductive type do a lemma. Sounds good!</p>



<a name="236619624"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236619624" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236619624">(Apr 29 2021 at 05:02)</a>:</h4>
<p>By the way, if you are wondering how to prove the lemma, note that this is exactly the inductive step in the proof of <code>equiv_of_relabelling</code></p>



<a name="236619834"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236619834" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236619834">(Apr 29 2021 at 05:05)</a>:</h4>
<p>Awesome, thanks!!</p>



<a name="236856512"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236856512" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236856512">(Apr 30 2021 at 15:45)</a>:</h4>
<p>Any suggestions for proving this:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">set_theory.pgame</span>

<span class="kn">local</span> <span class="kd">infix</span> <span class="bp">`</span> <span class="bp">≈</span> <span class="bp">`</span> <span class="o">:=</span> <span class="n">pgame.equiv</span>

<span class="kd">lemma</span> <span class="n">aux</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="n">e</span> <span class="o">:</span> <span class="n">pgame</span><span class="o">}</span> <span class="o">:</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="bp">+</span> <span class="o">(</span><span class="n">c</span> <span class="bp">+</span> <span class="n">d</span><span class="o">)</span> <span class="bp">-</span> <span class="o">(</span><span class="n">e</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="bp">≈</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">c</span> <span class="bp">-</span> <span class="n">e</span> <span class="bp">+</span> <span class="n">d</span> <span class="o">:=</span>
<span class="gr">sorry</span>
</code></pre></div>
<p>?<br>
This is the last lemma I need for proving <code>left_distrib_equiv</code>.</p>



<a name="236856653"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236856653" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236856653">(Apr 30 2021 at 15:46)</a>:</h4>
<p>do you have the additive group lemmas?</p>



<a name="236856778"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236856778" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236856778">(Apr 30 2021 at 15:47)</a>:</h4>
<p>you shouldn't need to resort to relabellings all the time</p>



<a name="236858439"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236858439" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236858439">(Apr 30 2021 at 15:59)</a>:</h4>
<p>I'm having trouble because the <code>equiv</code> instead of <code>=</code>.</p>



<a name="236858559"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236858559" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236858559">(Apr 30 2021 at 16:00)</a>:</h4>
<p>There is an instance of <code>add_comm_group</code> for <code>surreal</code> but nothing for <code>pgames</code>.</p>



<a name="236858597"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236858597" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236858597">(Apr 30 2021 at 16:00)</a>:</h4>
<p>If only there were a quotient you could use...</p>



<a name="236858629"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236858629" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236858629">(Apr 30 2021 at 16:00)</a>:</h4>
<p>Q: why do you care about pgame?</p>



<a name="236858811"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236858811" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236858811">(Apr 30 2021 at 16:01)</a>:</h4>
<p>Right now <code>mul</code> is not defined for <code>surreals</code></p>



<a name="236858887"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236858887" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236858887">(Apr 30 2021 at 16:02)</a>:</h4>
<p>it respects the quotient, doesn't it?</p>



<a name="236858929"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236858929" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236858929">(Apr 30 2021 at 16:02)</a>:</h4>
<p>also this lemma doesn't use mul</p>



<a name="236859075"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236859075" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236859075">(Apr 30 2021 at 16:03)</a>:</h4>
<p>Ah, I need this as an intermediate step for proving <code>a * (b + c) = a * b + a * c</code></p>



<a name="236859121"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236859121" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236859121">(Apr 30 2021 at 16:03)</a>:</h4>
<p>i meant equiv for pgames</p>



<a name="236859183"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236859183" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236859183">(Apr 30 2021 at 16:03)</a>:</h4>
<p>I am saying, forget about pgames except as an implementation detail of surreal</p>



<a name="236859244"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236859244" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236859244">(Apr 30 2021 at 16:04)</a>:</h4>
<p>lift mul to surreal</p>



<a name="236859256"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236859256" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236859256">(Apr 30 2021 at 16:04)</a>:</h4>
<p>Yeah, there is a missing piece <code>numeric_mul</code> for descending <code>mul</code> to <code>surreal</code></p>



<a name="236859291"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236859291" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236859291">(Apr 30 2021 at 16:04)</a>:</h4>
<p>I'll try to prove that directly</p>



<a name="236859357"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236859357" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236859357">(Apr 30 2021 at 16:04)</a>:</h4>
<p>Thanks!</p>



<a name="236859442"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236859442" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236859442">(Apr 30 2021 at 16:05)</a>:</h4>
<p>There may be a use for the quotient of pgame by equiv, without the numeric part</p>



<a name="236859483"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236859483" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236859483">(Apr 30 2021 at 16:05)</a>:</h4>
<p>that would be the easiest way to prove the theorem you mention</p>



<a name="236859603"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236859603" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236859603">(Apr 30 2021 at 16:06)</a>:</h4>
<p>I'm not sure what the benefit of restricting to numeric is, I guess some laws don't hold</p>



<a name="236859649"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236859649" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236859649">(Apr 30 2021 at 16:06)</a>:</h4>
<p>Ah interesting, I think Conway calls them pseudo-numbers</p>



<a name="236859778"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236859778" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236859778">(Apr 30 2021 at 16:07)</a>:</h4>
<p>Yeah, I can totally do that and all the proofs will simplify a lot!</p>



<a name="236859863"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236859863" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236859863">(Apr 30 2021 at 16:08)</a>:</h4>
<p>Would it then make sense to change the definition of <code>surreals</code> as a subtype of <code>pseudo-numbers</code>?</p>



<a name="236859960"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236859960" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236859960">(Apr 30 2021 at 16:08)</a>:</h4>
<p>ah, <code>pgame.star</code> is a witness to the failure of partial ordering</p>



<a name="236860071"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236860071" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236860071">(Apr 30 2021 at 16:09)</a>:</h4>
<p>Right, they have the ring structure but not the order or field structures</p>



<a name="236860738"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236860738" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236860738">(Apr 30 2021 at 16:14)</a>:</h4>
<p>Oops, this already exists</p>



<a name="236860756"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236860756" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236860756">(Apr 30 2021 at 16:14)</a>:</h4>
<p>that's <code>game</code></p>



<a name="236861805"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236861805" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236861805">(Apr 30 2021 at 16:21)</a>:</h4>
<p>Great, I'll check that out and figure out how to connect it back to surreal numbers.</p>



<a name="236861907"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236861907" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236861907">(Apr 30 2021 at 16:22)</a>:</h4>
<p>Actually there is a complication, because I think that <code>pgame.numeric</code> does not respect the equivalence relation. You can take as the subtype the assertion that some pgame in the equivalence class is numeric, but then functions that are lifted have to sometimes be evaluated on non-numeric pgames</p>



<a name="236862123"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236862123" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236862123">(Apr 30 2021 at 16:23)</a>:</h4>
<p>Alternatively, you can just leave the definition as is and construct an injection <code>surreal -&gt; game</code> so that you can prove theorems about surreal by injecting them into <code>game</code></p>



<a name="236863676"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236863676" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236863676">(Apr 30 2021 at 16:34)</a>:</h4>
<p>Creating <code>surreal -&gt; game</code> is a more natural thing to do. But I still need to define <code>mul</code> on surreals.</p>



<a name="236863859"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236863859" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236863859">(Apr 30 2021 at 16:35)</a>:</h4>
<p>I suspect that it should not be too difficult</p>



<a name="236863894"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236863894" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236863894">(Apr 30 2021 at 16:35)</a>:</h4>
<p>Here is a proof of your lemma using <code>game</code></p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">set_theory.game</span> <span class="n">tactic.abel</span>

<span class="kn">local</span> <span class="kd">infix</span> <span class="bp">`</span> <span class="bp">≈</span> <span class="bp">`</span> <span class="o">:=</span> <span class="n">pgame.equiv</span>

<span class="kd">lemma</span> <span class="n">aux</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="n">e</span> <span class="o">:</span> <span class="n">pgame</span><span class="o">}</span> <span class="o">:</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="bp">+</span> <span class="o">(</span><span class="n">c</span> <span class="bp">+</span> <span class="n">d</span><span class="o">)</span> <span class="bp">-</span> <span class="o">(</span><span class="n">e</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="bp">≈</span> <span class="n">a</span> <span class="bp">+</span> <span class="n">c</span> <span class="bp">-</span> <span class="n">e</span> <span class="bp">+</span> <span class="n">d</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">letI</span> <span class="o">:=</span> <span class="n">pgame.setoid</span><span class="o">,</span>
  <span class="n">apply</span> <span class="bp">@</span><span class="n">quotient.exact</span> <span class="n">pgame</span><span class="o">,</span>
  <span class="n">change</span> <span class="o">(</span><span class="bp">⟦</span><span class="n">a</span><span class="bp">⟧</span> <span class="bp">+</span> <span class="bp">⟦</span><span class="n">b</span><span class="bp">⟧</span> <span class="bp">+</span> <span class="o">(</span><span class="bp">⟦</span><span class="n">c</span><span class="bp">⟧</span> <span class="bp">+</span> <span class="bp">⟦</span><span class="n">d</span><span class="bp">⟧</span><span class="o">)</span> <span class="bp">-</span> <span class="o">(</span><span class="bp">⟦</span><span class="n">e</span><span class="bp">⟧</span> <span class="bp">+</span> <span class="bp">⟦</span><span class="n">b</span><span class="bp">⟧</span><span class="o">)</span> <span class="o">:</span> <span class="n">game</span><span class="o">)</span> <span class="bp">=</span> <span class="bp">⟦</span><span class="n">a</span><span class="bp">⟧</span> <span class="bp">+</span> <span class="bp">⟦</span><span class="n">c</span><span class="bp">⟧</span> <span class="bp">+</span> <span class="bp">-⟦</span><span class="n">e</span><span class="bp">⟧</span> <span class="bp">+</span> <span class="bp">⟦</span><span class="n">d</span><span class="bp">⟧</span><span class="o">,</span>
  <span class="n">abel</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="236864003"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236864003" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236864003">(Apr 30 2021 at 16:36)</a>:</h4>
<p>Awesome, thanks so much!</p>



<a name="236864237"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236864237" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236864237">(Apr 30 2021 at 16:38)</a>:</h4>
<p>No need for <code>letI</code>, just <code>apply @quotient.exact' pgame</code></p>



<a name="236864422"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236864422" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236864422">(Apr 30 2021 at 16:39)</a>:</h4>
<p>actually just deleting the letI is enough</p>



<a name="236864462"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236864462" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236864462">(Apr 30 2021 at 16:39)</a>:</h4>
<p>because this is actually the official setoid on pgame</p>



<a name="236864931"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236864931" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236864931">(Apr 30 2021 at 16:42)</a>:</h4>
<p>This trick of jumping to <code>games</code> looks really useful. I can probably use it to simplify a lot of other nasty proofs in <code>surreal.lean</code>.</p>



<a name="236939373"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/236939373" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#236939373">(May 01 2021 at 05:19)</a>:</h4>
<p>When I added <code>import set_theory.game</code> to <code>surreal.lean</code> I started getting type mismatch errors. </p>
<p>For example here : <a href="https://github.com/leanprover-community/mathlib/blob/6b6366b351f3e3c242e620aa0c39a4dc1eca8c10/src/set_theory/surreal.lean#L408">https://github.com/leanprover-community/mathlib/blob/6b6366b351f3e3c242e620aa0c39a4dc1eca8c10/src/set_theory/surreal.lean#L408</a> (on branch surreal_mul_distrib)<br>
I am getting the following error:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">type</span> <span class="n">mismatch</span> <span class="n">at</span> <span class="n">application</span>
  <span class="n">has_add.add</span> <span class="n">w</span>
<span class="n">term</span>
  <span class="n">w</span>
<span class="n">has</span> <span class="n">type</span>
  <span class="n">pgame</span> <span class="o">:</span> <span class="kt">Type</span> <span class="o">(</span><span class="n">u</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span>
<span class="n">but</span> <span class="n">is</span> <span class="n">expected</span> <span class="n">to</span> <span class="k">have</span> <span class="n">type</span>
  <span class="n">game</span> <span class="o">:</span> <span class="kt">Type</span> <span class="o">(</span><span class="bp">?+</span><span class="mi">1</span><span class="o">)</span>
<span class="n">state</span><span class="o">:</span>
<span class="n">w</span> <span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="o">:</span> <span class="n">pgame</span><span class="o">,</span>
<span class="n">ow</span> <span class="o">:</span> <span class="n">w.numeric</span><span class="o">,</span>
<span class="n">ox</span> <span class="o">:</span> <span class="n">x.numeric</span><span class="o">,</span>
<span class="n">oy</span> <span class="o">:</span> <span class="n">y.numeric</span><span class="o">,</span>
<span class="n">oz</span> <span class="o">:</span> <span class="n">z.numeric</span><span class="o">,</span>
<span class="n">ix</span> <span class="o">:</span> <span class="n">x.left_moves</span><span class="o">,</span>
<span class="n">hix</span> <span class="o">:</span> <span class="n">w</span> <span class="bp">≤</span> <span class="n">x.move_left</span> <span class="n">ix</span><span class="o">,</span>
<span class="n">iz</span> <span class="o">:</span> <span class="n">z.left_moves</span><span class="o">,</span>
<span class="n">hiz</span> <span class="o">:</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">z.move_left</span> <span class="n">iz</span>
<span class="bp">⊢</span> <span class="n">w</span> <span class="bp">+</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">x.move_left</span> <span class="n">ix</span> <span class="bp">+</span> <span class="n">z</span>
</code></pre></div>
<p>Lean is interpreting <code>has_add.add</code> as the addition of <code>game</code>s instead of <code>pgame</code>s. <br>
The <code>\le</code> also broke in a few places but I was able to fix it using <code>pgame.le_refl</code>. </p>
<p>Any suggestions on how to resolve this? Thanks,</p>



<a name="272003669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/272003669" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mike Shulman <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#272003669">(Feb 15 2022 at 16:57)</a>:</h4>
<p>What is the status of multiplication of surreal numbers in mathlib?  In the documentation <a href="https://leanprover-community.github.io/mathlib_docs/set_theory/surreal/basic.html">here</a> I see</p>
<blockquote>
<p>The definition of multiplication for surreal numbers is surprisingly difficult and is currently missing in the library...This will make for a fun and challenging project.</p>
</blockquote>
<p>but it sounds from the discussion above as though some progress was made?  I have a student who might be interested in contributing to this if it is still open.</p>



<a name="272017194"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/272017194" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#272017194">(Feb 15 2022 at 18:27)</a>:</h4>
<p><span class="user-mention" data-user-id="245078">@Apurva Nakade</span> ?</p>



<a name="272018618"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/272018618" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#272018618">(Feb 15 2022 at 18:37)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="381187">@Mike Shulman</span> , I gave up on trying to prove that product of numbers is a number because the proofs got too long and my local machine could not handle them! I don't think anyone is working on this right now. It <em>should</em> make for a nice project but the theorems in Conway's book are not enough and one would need to come up with smart ways to simplify the proof.</p>



<a name="272018961"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/272018961" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#272018961">(Feb 15 2022 at 18:40)</a>:</h4>
<p>Once you have this, the later proofs would simplify greatly, especially the theorems in <a href="https://leanprover-community.github.io/mathlib_docs/find/surreal.dyadic">docs#surreal.dyadic</a> so it would be amazing if your students can make it work.</p>



<a name="272019540"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/272019540" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Apurva Nakade <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#272019540">(Feb 15 2022 at 18:44)</a>:</h4>
<p>Theorem 3.8 <a href="http://www.cs.cmu.edu/afs/cs/academic/class/15859-s05/www/lecture-notes/comb-games-notes.pdf">here</a> is the one I tried formalizing.</p>



<a name="272020336"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/272020336" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mike Shulman <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#272020336">(Feb 15 2022 at 18:50)</a>:</h4>
<p>Thanks!</p>



<a name="272173821"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/272173821" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#272173821">(Feb 16 2022 at 20:28)</a>:</h4>
<p>Hi, as it happens, I was sending an email to Mario Carneiro just today with essentially the same question that <span class="user-mention" data-user-id="381187">@Mike Shulman</span> asked: I also have a student who would be interested in working on this for her Master's thesis.<br>
Since I am responsible for the proof of Theorem 3.8 in the paper linked to by <span class="user-mention" data-user-id="245078">@Apurva Nakade</span> (even though I did this quite some time ago), I would hope that I can provide enough help to my student to get the proof (or a variant of it) formalized.<br>
On the other hand, I would not want to sort of "steal" the topic from <span class="user-mention" data-user-id="381187">@Mike Shulman</span> , who asked before me. So I'm not sure how to proceed from here...</p>



<a name="272193065"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/272193065" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mike Shulman <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#272193065">(Feb 16 2022 at 23:13)</a>:</h4>
<p>I will PM you.</p>



<a name="279974047"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/279974047" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#279974047">(Apr 24 2022 at 10:14)</a>:</h4>
<p>Hi, I'm working on this!</p>



<a name="279974068"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/279974068" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#279974068">(Apr 24 2022 at 10:15)</a>:</h4>
<p>I believe to have found a way to complete the proof of multiplication well definedness in a way that is actually nice to work with</p>



<a name="279974078"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/279974078" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#279974078">(Apr 24 2022 at 10:15)</a>:</h4>
<p>I'm only like 80% sure that this works</p>



<a name="279974146"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/279974146" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#279974146">(Apr 24 2022 at 10:17)</a>:</h4>
<p>The precise statement you prove is this <a href="/user_uploads/3121/WOoUaxmZc26xe7adN8fF4Hli/370964201478553600.png">370964201478553600.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/WOoUaxmZc26xe7adN8fF4Hli/370964201478553600.png" title="370964201478553600.png"><img src="/user_uploads/3121/WOoUaxmZc26xe7adN8fF4Hli/370964201478553600.png"></a></div>



<a name="279974194"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/279974194" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#279974194">(Apr 24 2022 at 10:18)</a>:</h4>
<p>And the way you prove this is by proving that for any game g, if x + y + z is a relabelling of g, then that statement is true</p>



<a name="279974204"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/279974204" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#279974204">(Apr 24 2022 at 10:18)</a>:</h4>
<p>You induct on g using the <code>subsequent</code> relation</p>



<a name="279974277"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/279974277" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#279974277">(Apr 24 2022 at 10:20)</a>:</h4>
<p>I'll try actually writing the proof down later today or tomorrow, wish me luck!</p>



<a name="279974504"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/279974504" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#279974504">(Apr 24 2022 at 10:26)</a>:</h4>
<p>Oh, and this works since you just get the inductive hypothesis with subsequent and reordered arguments, which means that the sum ends up a relabelling of some subsequent game</p>



<a name="279991101"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/279991101" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#279991101">(Apr 24 2022 at 17:43)</a>:</h4>
<p>Update: the exact induction I posted doesn't work, but I got something pretty similar that seems very promising. I'll be posting my progress on the <code>surreal_mul</code> branch.</p>



<a name="280001347"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/280001347" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#280001347">(Apr 24 2022 at 21:42)</a>:</h4>
<p>(<a href="https://github.com/leanprover-community/mathlib/tree/surreal_mul">branch#surreal_mul</a>)</p>



<a name="280527684"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/280527684" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#280527684">(Apr 28 2022 at 17:23)</a>:</h4>
<p>Great news everyone! I believe I finally nailed the induction hypothesis</p>



<a name="280527693"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/280527693" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#280527693">(Apr 28 2022 at 17:23)</a>:</h4>
<p>I've updated the branch</p>



<a name="280527717"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/280527717" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#280527717">(Apr 28 2022 at 17:23)</a>:</h4>
<p>If we prove <code>mul_args.result</code>, the result follows</p>



<a name="280527743"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/280527743" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#280527743">(Apr 28 2022 at 17:23)</a>:</h4>
<p>And that itself can be proven by well foundedness on the relation I defined on that type</p>



<a name="280527766"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/280527766" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#280527766">(Apr 28 2022 at 17:23)</a>:</h4>
<p>I'll continue sketching the proof in the following days</p>



<a name="281094687"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281094687" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281094687">(May 03 2022 at 23:55)</a>:</h4>
<p>I've run into a problem I did not expect to run into</p>



<a name="281094701"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281094701" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281094701">(May 03 2022 at 23:55)</a>:</h4>
<p>I think <code>mathlib</code> may have the wrong definition of <code>&lt;</code> on games?</p>



<a name="281094824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281094824" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281094824">(May 03 2022 at 23:57)</a>:</h4>
<p>ONAG doesn't seem to define <code>&lt;</code>, but it does define <code>≰</code>, which is already really weird, given that in mathlib, <code>x &lt; y</code> is equivalent to <code>¬ y ≤ x</code></p>



<a name="281094924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281094924" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281094924">(May 03 2022 at 23:58)</a>:</h4>
<p><a href="https://arxiv.org/pdf/math/0410026v2.pdf">This other PDF</a> I found does define <code>&lt;</code>, but it defines <code>x &lt; y</code> as <code>x ≤ y ∧ ¬ y ≤ x</code></p>



<a name="281094945"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281094945" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281094945">(May 03 2022 at 23:58)</a>:</h4>
<p>Which is the definition that would hold if <code>&lt;</code> came from a <code>partial_order</code>, but <code>mathlib</code> makes it clear that those two definitions conflict?</p>



<a name="281095007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281095007" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281095007">(May 03 2022 at 23:59)</a>:</h4>
<p>So, what's the deal here? Was the choice of defining <code>x &lt; y</code> as <code>¬ y ≤ x</code> intentional?</p>



<a name="281095021"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281095021" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281095021">(May 03 2022 at 23:59)</a>:</h4>
<p>Or was it some accident we've perpetrated that has somehow not broken anything yet?</p>



<a name="281095242"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281095242" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281095242">(May 04 2022 at 00:01)</a>:</h4>
<p><span class="user-mention silent" data-user-id="459227">Violeta Hernández</span> <a href="#narrow/stream/116395-maths/topic/Surreal.20numbers/near/281094824">said</a>:</p>
<blockquote>
<p>given that in mathlib, <code>x &lt; y</code> is equivalent to <code>¬ y ≤ x</code></p>
</blockquote>
<p>Are you talking about <code>game</code> in particular?</p>



<a name="281095325"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281095325" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281095325">(May 04 2022 at 00:02)</a>:</h4>
<p>Oh yeah, I should have mentioned that</p>



<a name="281095330"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281095330" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281095330">(May 04 2022 at 00:02)</a>:</h4>
<p>I'm talking about both <code>pgame</code> and <code>game</code></p>



<a name="281095602"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281095602" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281095602">(May 04 2022 at 00:06)</a>:</h4>
<p>Yeah, there is something very wrong</p>



<a name="281095617"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281095617" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281095617">(May 04 2022 at 00:06)</a>:</h4>
<p>Every source I've looked says that <code>0 &lt; G</code> means that Left can enforce a win in <code>G</code> no matter who starts</p>



<a name="281095632"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281095632" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281095632">(May 04 2022 at 00:06)</a>:</h4>
<p>And analogously for <code>G &lt; 0</code></p>



<a name="281095651"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281095651" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281095651">(May 04 2022 at 00:07)</a>:</h4>
<p>This conflicts directly with <a href="https://leanprover-community.github.io/mathlib_docs/set_theory/game/pgame.html#pgame.star_lt_zero"><code>pgame.star_lt_zero</code></a></p>



<a name="281095739"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281095739" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281095739">(May 04 2022 at 00:08)</a>:</h4>
<p>It looks intentional for sure but I agree it seems strange.</p>



<a name="281095919"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281095919" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281095919">(May 04 2022 at 00:10)</a>:</h4>
<p>This seems to go all the way back to <a href="https://github.com/leanprover-community/mathlib/commit/b41277c70937d8cd46639bbef674e656e8e397dd">https://github.com/leanprover-community/mathlib/commit/b41277c70937d8cd46639bbef674e656e8e397dd</a></p>



<a name="281095957"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281095957" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281095957">(May 04 2022 at 00:11)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> what's your justification for this?</p>



<a name="281096073"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281096073" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281096073">(May 04 2022 at 00:13)</a>:</h4>
<p>I would even go so far as to say it is wrong, given that the module docstring says the theory is based on ONAG.</p>



<a name="281096327"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281096327" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281096327">(May 04 2022 at 00:16)</a>:</h4>
<p>Yeah, I'm increasingly convinced that this is flat out wrong</p>



<a name="281096367"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281096367" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281096367">(May 04 2022 at 00:17)</a>:</h4>
<p>My theory is this: the easiest way to define <code>≤</code> was to define both it and its negation simultaneously via Conway induction, and it was decided that the negation was going to be called <code>&lt;</code> for convenience</p>



<a name="281096446"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281096446" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281096446">(May 04 2022 at 00:18)</a>:</h4>
<p>I think this predates me: the stuff on <code>pgame</code> was adapted from existing material on <code>surreal</code>, and I just followed how that had been done. (I think? I'm very open to the possibility I misremember things, and did things badly wrong. :-)</p>



<a name="281096524"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281096524" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281096524">(May 04 2022 at 00:19)</a>:</h4>
<p>Is the fix just to rename <code>&lt;</code> on <code>pgame</code> to <code>≰</code>?</p>



<a name="281096596"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281096596" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281096596">(May 04 2022 at 00:20)</a>:</h4>
<p>I'm not sure anything is "wrong", just a terribly misleading symbol is being used. :-)</p>



<a name="281096620"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281096620" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281096620">(May 04 2022 at 00:20)</a>:</h4>
<p>Well, it's not just that</p>



<a name="281096639"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281096639" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281096639">(May 04 2022 at 00:20)</a>:</h4>
<p>If we're going to do that, we're also going to have to rename a bunch of theorems, refactor others, etc.</p>



<a name="281096657"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281096657" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281096657">(May 04 2022 at 00:20)</a>:</h4>
<p>And we're also going to have to add the correct API for the correct <code>&lt;</code></p>



<a name="281096662"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281096662" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281096662">(May 04 2022 at 00:20)</a>:</h4>
<p>By the way, I dug a bit deeper and I found <a href="https://github.com/leanprover-community/mathlib/commit/901178e2084d7d4a97bc2ddef68135eb124aa130">https://github.com/leanprover-community/mathlib/commit/901178e2084d7d4a97bc2ddef68135eb124aa130</a></p>



<a name="281096676"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281096676" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281096676">(May 04 2022 at 00:21)</a>:</h4>
<p>So it seems like this goes back to <span class="user-mention" data-user-id="110049">@Mario Carneiro</span></p>



<a name="281096762"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281096762" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281096762">(May 04 2022 at 00:22)</a>:</h4>
<p>I guess the definition of <code>&lt;</code> was generalized from <code>surreal</code> (where it is correct) to <code>game</code> (where it is not)</p>



<a name="281096765"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281096765" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281096765">(May 04 2022 at 00:22)</a>:</h4>
<p>I don't understand though when you say "it's not just that", however: isn't the only problem that we should have used a different symbol than <code>&lt;</code>? After replacing the symbols and appropriately updating declaration names, there's no discrepancy from ONAG, right?</p>



<a name="281096805"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281096805" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281096805">(May 04 2022 at 00:23)</a>:</h4>
<p>And nothing currently in <code>pgame.lean</code> has anything to say about "the real <code>&lt;</code>" used in other references?</p>



<a name="281096880"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281096880" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281096880">(May 04 2022 at 00:24)</a>:</h4>
<p>What I mean is, even if there's not really any maths to fix (Lean won't let us prove false things, that's kind of the point), there's a lot of API that needs to be tweaked</p>



<a name="281096951"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281096951" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281096951">(May 04 2022 at 00:25)</a>:</h4>
<p>(Sorry, above I suggested we just need to replace all the use of <code>&lt;</code> with <code>≰</code>, but that's obviously literally wrong, because the order of arguments needs to flip.)</p>



<a name="281096968"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281096968" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281096968">(May 04 2022 at 00:25)</a>:</h4>
<p>But yes, I agree this is worth fixing.</p>



<a name="281097010"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281097010" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281097010">(May 04 2022 at 00:26)</a>:</h4>
<p>I'll get to this in a few hours</p>



<a name="281097207"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281097207" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281097207">(May 04 2022 at 00:29)</a>:</h4>
<p>Ah! So <code>game</code> really ought to be a <code>preorder</code>, just as literally anything else in the library. I was really confused so as to why <code>&lt;</code> on games ought to escape the rule.</p>



<a name="281099083"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281099083" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281099083">(May 04 2022 at 00:59)</a>:</h4>
<p>In fact, a <code>partial_order</code></p>



<a name="281099171"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281099171" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281099171">(May 04 2022 at 01:00)</a>:</h4>
<p>And what's more, an <code>ordered_add_comm_group</code></p>



<a name="281104089"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281104089" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281104089">(May 04 2022 at 02:35)</a>:</h4>
<p><a href="/user_uploads/3121/4XG7Tn6Z5H-AysICrrOiNrqR/image.png">image.png</a> <br>
<a href="/user_uploads/3121/Xb2TWTQVF9Z5CZp_9sVxRPNx/image.png">image.png</a> <br>
Here are the notations from <em>Winning Ways</em> (p.29, p.32, 2nd edition)</p>
<div class="message_inline_image"><a href="/user_uploads/3121/4XG7Tn6Z5H-AysICrrOiNrqR/image.png" title="image.png"><img src="/user_uploads/3121/4XG7Tn6Z5H-AysICrrOiNrqR/image.png"></a></div><div class="message_inline_image"><a href="/user_uploads/3121/Xb2TWTQVF9Z5CZp_9sVxRPNx/image.png" title="image.png"><img src="/user_uploads/3121/Xb2TWTQVF9Z5CZp_9sVxRPNx/image.png"></a></div><p>The same notations are on <em>ONAG</em> (1976), p.73, p.78:<br>
<a href="/user_uploads/3121/2hK8Jx3ftRcGd8BcqgRa4DUl/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/2hK8Jx3ftRcGd8BcqgRa4DUl/image.png" title="image.png"><img src="/user_uploads/3121/2hK8Jx3ftRcGd8BcqgRa4DUl/image.png"></a></div>



<a name="281104287"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281104287" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281104287">(May 04 2022 at 02:38)</a>:</h4>
<p>So &lt; should be ⧏ (<code>⧏</code>)<br>
Vertical bar beside right triangle: ⧐<br>
Unicode hexadecimal: 0x29d0<br>
Left triangle beside vertical bar: ⧏<br>
Unicode hexadecimal: 0x29cf<br>
In block: Miscellaneous Mathematical Symbols-B</p>



<a name="281105495"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281105495" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281105495">(May 04 2022 at 03:01)</a>:</h4>
<p><span class="user-mention silent" data-user-id="459227">Violeta Hernández</span> <a href="#narrow/stream/116395-maths/topic/Surreal.20numbers/near/281099083">said</a>:</p>
<blockquote>
<p>In fact, a <code>partial_order</code></p>
</blockquote>
<p>Didn't you <a href="#narrow/stream/116395-maths/topic/Well-founded.20recursion.20for.20pgames/near/280986918">just claim</a> <code>game</code> isn't a <code>partial_order</code>? (I think it is.)</p>



<a name="281127062"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281127062" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281127062">(May 04 2022 at 08:51)</a>:</h4>
<p>Precisely. Currently <code>game</code> is not a partial order when you use <a href="https://leanprover-community.github.io/mathlib_docs/find/game.has_lt">docs#game.has_lt</a>. The question is whether we should make <a href="https://leanprover-community.github.io/mathlib_docs/find/game.partial_order">docs#game.partial_order</a> an instance and use the <code>&lt;</code> from there.</p>



<a name="281137910"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281137910" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281137910">(May 04 2022 at 10:48)</a>:</h4>
<p>I had raised precisely this point (that <code>&lt;</code> on games in mathlib is not compatible with <code>&lt;</code> as defined by Conway &amp;Co) in private communication with <span class="user-mention" data-user-id="110049">@Mario Carneiro</span> a while ago. I'd be strongly in favor of changing the mathlib definition to be compatible with the literature.</p>



<a name="281138071"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281138071" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281138071">(May 04 2022 at 10:50)</a>:</h4>
<p>The notation is used on wikipedia; I believe this is where I got it from</p>



<a name="281138084"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281138084" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281138084">(May 04 2022 at 10:50)</a>:</h4>
<p>not on games, on surreals</p>



<a name="281138093"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281138093" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281138093">(May 04 2022 at 10:50)</a>:</h4>
<p>BTW, it was mostly me who developed the proof of Theorem 3.8 in Schleicher-Stoll (trying to make Conway's somewhat vague arguments precise).<br>
It is nice to see that this proof apparently can be formalized (and simplified in the process)!</p>



<a name="281138311"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281138311" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281138311">(May 04 2022 at 10:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/116395-maths/topic/Surreal.20numbers/near/281138084">said</a>:</p>
<blockquote>
<p>not on games, on surreals</p>
</blockquote>
<p>This is the point: On surreals, <code>&lt;</code> and <code>&lt;|</code> are the same, since numbers are never fuzzy to each other.</p>



<a name="281138341"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281138341" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281138341">(May 04 2022 at 10:53)</a>:</h4>
<p>But for games, there is the possibility that two games are incomparable ("fuzzy").</p>



<a name="281138469"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281138469" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281138469">(May 04 2022 at 10:55)</a>:</h4>
<p>I believe that the definition currently called <code>&lt;</code> is important and plays a central role in the theory, but it is not obvious to me that this relation corresponds to <code>&lt;</code> or <code>&lt;|</code> and it would be good to have some literature evidence of such</p>



<a name="281139183"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281139183" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281139183">(May 04 2022 at 11:03)</a>:</h4>
<p>By <a href="https://leanprover-community.github.io/mathlib_docs/find/game.not_le">docs#game.not_le</a>, for games, the current definition implies that <code>x &lt; y</code> is the same as <code>¬y ≤ x</code>.<br>
However (as was pointed out in this thread above), ONAG defines <code>x &lt;| y</code> as <code>¬y ≤ x</code>(on page 78) and <code>x &lt; y</code> as <code>x ≤ y ∧ ¬y ≤ x</code>. (BTW, Conway defines <code>&lt;</code> the same way for (surreal) numbers (on page 4), but it eventually turns out that <code>≤</code> defines a linear order on numbers.)</p>



<a name="281139306"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281139306" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281139306">(May 04 2022 at 11:05)</a>:</h4>
<p>Oooh, this is why the literature on games was so confusing to me. I never realized that <code>x &lt;| y</code> just meant <code>¬ y ≤ x</code>.</p>



<a name="281139448"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281139448" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281139448">(May 04 2022 at 11:06)</a>:</h4>
<p>(One motivation for Dierk Schleicher and myself to write our paper was that we felt that the order (first numbers, then games) in ONAG has the logic backwards, beacuse numbers are really special games...)</p>



<a name="281139455"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281139455" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281139455">(May 04 2022 at 11:06)</a>:</h4>
<p>Should we even define <code>&lt;|</code>? <code>game</code> is a partial order among many others and I can't justify the fact that it gets to have a symbol that would make sense everywhere else but isn't used.</p>



<a name="281139541"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281139541" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281139541">(May 04 2022 at 11:07)</a>:</h4>
<p>The mutually recursive definition of <code>&lt;|</code> and <code>&lt;=</code> gives them equal status, even though they are provably negations of each other</p>



<a name="281139614"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281139614" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281139614">(May 04 2022 at 11:08)</a>:</h4>
<p>I think that is an argument that they should exist as definitions; for the notation I don't have much of an opinion</p>



<a name="281139711"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281139711" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281139711">(May 04 2022 at 11:09)</a>:</h4>
<p>It may make sense to also define <code>||</code>, to have all four possibilities and their combinations...</p>



<a name="281139767"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281139767" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281139767">(May 04 2022 at 11:10)</a>:</h4>
<p>Sure, but do we want to use <code>&lt;|</code> <em>after</em> bootstrapping <code>≤</code>? is your argument that we should do this because <code>(≤)ᶜ</code> doesn't have the recursive properties of <code>&lt;|</code>? (but do we use those recursive properties anywhere?)</p>



<a name="281139793"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281139793" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281139793">(May 04 2022 at 11:10)</a>:</h4>
<p>note that <code>&lt;|</code> is actually taken IIRC for some silly definition on option that is never used</p>



<a name="281139853"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281139853" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281139853">(May 04 2022 at 11:11)</a>:</h4>
<p>But there is<br>
<span class="user-mention silent" data-user-id="224323">Junyan Xu</span> <a href="#narrow/stream/116395-maths/topic/Surreal.20numbers/near/281104287">said</a>:</p>
<blockquote>
<p>So &lt; should be ⧏ (<code>⧏</code>)<br>
Vertical bar beside right triangle: ⧐<br>
Unicode hexadecimal: 0x29d0<br>
Left triangle beside vertical bar: ⧏<br>
Unicode hexadecimal: 0x29cf<br>
In block: Miscellaneous Mathematical Symbols-B</p>
</blockquote>



<a name="281139876"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281139876" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281139876">(May 04 2022 at 11:11)</a>:</h4>
<p><a href="https://github.com/leanprover-community/lean/blob/f722a688012753f6adbd57e3df7499d498d82945/library/init/data/option/basic.lean#L42-L43">https://github.com/leanprover-community/lean/blob/f722a688012753f6adbd57e3df7499d498d82945/library/init/data/option/basic.lean#L42-L43</a> &lt;-- someone should PR remove these</p>



<a name="281139990"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281139990" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281139990">(May 04 2022 at 11:13)</a>:</h4>
<p>Never used in mathlib, afaict</p>



<a name="281140124"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281140124" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281140124">(May 04 2022 at 11:14)</a>:</h4>
<p>I saw someone use <code>lhoare</code> once but it's just <code>get_or_else</code> with reversed argument order</p>



<a name="281140229"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281140229" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281140229">(May 04 2022 at 11:15)</a>:</h4>
<p>In any case I think these surreal/game notations would be localized so the option definitions don't matter</p>



<a name="281140496"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281140496" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281140496">(May 04 2022 at 11:18)</a>:</h4>
<p>What does <code>lhoare</code> stand for?</p>



<a name="281140692"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281140692" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281140692">(May 04 2022 at 11:20)</a>:</h4>
<p>Could also use <code>≰</code> (not less than or equal, U+2270, ≰) as notation, although my font makes a meal of it</p>



<a name="281140721"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281140721" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281140721">(May 04 2022 at 11:21)</a>:</h4>
<p>Presumably "left/right operator" in Hoare logic or something like that (<a href="https://en.wikipedia.org/wiki/Hoare_logic">https://en.wikipedia.org/wiki/Hoare_logic</a>)</p>



<a name="281141154"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281141154" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281141154">(May 04 2022 at 11:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/116395-maths/topic/Surreal.20numbers/near/281139767">said</a>:</p>
<blockquote>
<p>Sure, but do we want to use <code>&lt;|</code> <em>after</em> bootstrapping <code>≤</code>? is your argument that we should do this because <code>(≤)ᶜ</code> doesn't have the recursive properties of <code>&lt;|</code>? (but do we use those recursive properties anywhere?)</p>
</blockquote>
<p><code>⧏</code> (and <code>⧐</code>) are used in various statements and proofs in ONAG, so they would be useful to have if we want to stay close to the standard reference.</p>



<a name="281141346"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281141346" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281141346">(May 04 2022 at 11:27)</a>:</h4>
<p>If we end up really using this as a separate definition/symbol, it should</p>
<ul>
<li>be available from <code>has_le</code>, instead of being specialized to <code>game</code></li>
<li>have a suggestive notation, to make it clear that it's just the negation of <code>≤</code></li>
</ul>



<a name="281141385"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281141385" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281141385">(May 04 2022 at 11:27)</a>:</h4>
<p>After all, we do have <a href="https://leanprover-community.github.io/mathlib_docs/find/ne">docs#ne</a> as a separate definition with notation <code>≠</code>.</p>



<a name="281141494"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281141494" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281141494">(May 04 2022 at 11:28)</a>:</h4>
<p>It seems to me that the main argument for having a separate definition instead of just separate notation is that it allows dot notation.</p>



<a name="281142524"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281142524" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281142524">(May 04 2022 at 11:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/116395-maths/topic/Surreal.20numbers/near/281140496">said</a>:</p>
<blockquote>
<p>What does <code>lhoare</code> stand for?</p>
</blockquote>
<p>like Johan I believe the names come from "left/right + [Tony] Hoare", but these are not operators I recognize from hoare logic</p>



<a name="281142733"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281142733" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281142733">(May 04 2022 at 11:41)</a>:</h4>
<p>unfortunately the <a href="https://github.com/leanprover-community/lean/commit/52221cdbd1cd0cff2a8c4830ab83a0b5dc1334b7">originating commit</a> doesn't give any clue as to the origin or intent behind the definitions</p>



<a name="281148992"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281148992" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281148992">(May 04 2022 at 12:43)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/116395-maths/topic/Surreal.20numbers/near/281139876">said</a>:</p>
<blockquote>
<p><a href="https://github.com/leanprover-community/lean/blob/f722a688012753f6adbd57e3df7499d498d82945/library/init/data/option/basic.lean#L42-L43">https://github.com/leanprover-community/lean/blob/f722a688012753f6adbd57e3df7499d498d82945/library/init/data/option/basic.lean#L42-L43</a> &lt;-- someone should PR remove these</p>
</blockquote>
<p>You CS people can have them, we want fancy unicode for games, not ASCII art.</p>



<a name="281165722"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281165722" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281165722">(May 04 2022 at 14:44)</a>:</h4>
<p><span class="user-mention" data-user-id="479359">@Michael Stoll</span> the simplification I had found relied on a property that was true for mathlib <code>&lt;</code> but not actually correct for the true <code>&lt;</code></p>



<a name="281165778"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281165778" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281165778">(May 04 2022 at 14:45)</a>:</h4>
<p>So other than restate depth in terms of birthdays and merge P2 with P4, it's almost the same argument</p>



<a name="281166036"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281166036" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281166036">(May 04 2022 at 14:46)</a>:</h4>
<p>I personally prefer the not less or equal symbol here, I find it much more straightforward (and I believe this is what Conway uses in ONAG)</p>



<a name="281166115"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281166115" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281166115">(May 04 2022 at 14:47)</a>:</h4>
<p>That said I'm not convinced that it's worth having as a separate relation, rather than just writing down <code>\neg x \le y</code></p>



<a name="281168000"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281168000" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281168000">(May 04 2022 at 14:59)</a>:</h4>
<p>I also agree with Yaël that if we're going to make it a separate relation, it shouldn't be localized to games</p>



<a name="281168092"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281168092" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281168092">(May 04 2022 at 14:59)</a>:</h4>
<p>I imagine many of the theorems for \notle in games are still true on preorders</p>



<a name="281168119"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281168119" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Michael Stoll <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281168119">(May 04 2022 at 15:00)</a>:</h4>
<p><span class="user-mention silent" data-user-id="459227">Violeta Hernández</span> <a href="#narrow/stream/116395-maths/topic/Surreal.20numbers/near/281165778">said</a>:</p>
<blockquote>
<p>So other than restate depth in terms of birthdays and merge P2 with P4, it's almost the same argument</p>
</blockquote>
<p>OK, thanks for the clarification. The main thing is that the proof is correct (which I have to admit I was only 99% certain about).</p>



<a name="281193807"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281193807" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281193807">(May 04 2022 at 17:52)</a>:</h4>
<p>I wonder how useful it is to have these lemmas on <code>¬ x ≤ y</code></p>



<a name="281193847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281193847" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281193847">(May 04 2022 at 17:52)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">@[simp]</span> <span class="kd">theorem</span> <span class="n">mk_le_mk</span> <span class="o">{</span><span class="n">xl</span> <span class="n">xr</span> <span class="n">xL</span> <span class="n">xR</span> <span class="n">yl</span> <span class="n">yr</span> <span class="n">yL</span> <span class="n">yR</span><span class="o">}</span> <span class="o">:</span>
  <span class="o">(⟨</span><span class="n">xl</span><span class="o">,</span> <span class="n">xr</span><span class="o">,</span> <span class="n">xL</span><span class="o">,</span> <span class="n">xR</span><span class="o">⟩</span> <span class="o">:</span> <span class="n">pgame</span><span class="o">)</span> <span class="bp">≤</span> <span class="o">⟨</span><span class="n">yl</span><span class="o">,</span> <span class="n">yr</span><span class="o">,</span> <span class="n">yL</span><span class="o">,</span> <span class="n">yR</span><span class="o">⟩</span> <span class="bp">↔</span>
  <span class="o">(</span><span class="bp">∀</span> <span class="n">i</span><span class="o">,</span> <span class="bp">¬</span> <span class="n">mk</span> <span class="n">yl</span> <span class="n">yr</span> <span class="n">yL</span> <span class="n">yR</span> <span class="bp">≤</span> <span class="n">xL</span> <span class="n">i</span><span class="o">)</span> <span class="bp">∧</span>
  <span class="o">(</span><span class="bp">∀</span> <span class="n">j</span><span class="o">,</span> <span class="bp">¬</span> <span class="n">yR</span> <span class="n">j</span> <span class="bp">≤</span> <span class="n">mk</span> <span class="n">xl</span> <span class="n">xr</span> <span class="n">xL</span> <span class="n">xR</span><span class="o">)</span> <span class="o">:=</span>
<span class="gr">sorry</span>

<span class="kd">@[simp]</span> <span class="kd">theorem</span> <span class="n">mk_not_le_mk</span> <span class="o">{</span><span class="n">xl</span> <span class="n">xr</span> <span class="n">xL</span> <span class="n">xR</span> <span class="n">yl</span> <span class="n">yr</span> <span class="n">yL</span> <span class="n">yR</span><span class="o">}</span> <span class="o">:</span>
  <span class="bp">¬</span> <span class="n">mk</span> <span class="n">yl</span> <span class="n">yr</span> <span class="n">yL</span> <span class="n">yR</span> <span class="bp">≤</span> <span class="n">mk</span> <span class="n">xl</span> <span class="n">xr</span> <span class="n">xL</span> <span class="n">xR</span> <span class="bp">↔</span>
  <span class="o">(</span><span class="bp">∃</span> <span class="n">i</span><span class="o">,</span> <span class="n">mk</span> <span class="n">xl</span> <span class="n">xr</span> <span class="n">xL</span> <span class="n">xR</span> <span class="bp">≤</span> <span class="n">yL</span> <span class="n">i</span><span class="o">)</span> <span class="bp">∨</span>
  <span class="o">(</span><span class="bp">∃</span> <span class="n">j</span><span class="o">,</span> <span class="n">xR</span> <span class="n">j</span> <span class="bp">≤</span> <span class="n">mk</span> <span class="n">yl</span> <span class="n">yr</span> <span class="n">yL</span> <span class="n">yR</span><span class="o">)</span> <span class="o">:=</span>
<span class="gr">sorry</span>
</code></pre></div>



<a name="281193879"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281193879" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281193879">(May 04 2022 at 17:52)</a>:</h4>
<p>They were previously lemmas on <code>&lt;</code> which made sense to have, but now?</p>



<a name="281193921"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281193921" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281193921">(May 04 2022 at 17:53)</a>:</h4>
<p>those kind of lemmas will not play as well with <code>simp</code></p>



<a name="281193943"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281193943" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281193943">(May 04 2022 at 17:53)</a>:</h4>
<p>Hmm, you're right</p>



<a name="281194011"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281194011" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281194011">(May 04 2022 at 17:53)</a>:</h4>
<p>I'm wondering if we should have the former at all</p>



<a name="281194071"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281194071" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281194071">(May 04 2022 at 17:54)</a>:</h4>
<p>?</p>



<a name="281194098"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281194098" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281194098">(May 04 2022 at 17:54)</a>:</h4>
<p>*latter</p>



<a name="281194114"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281194114" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281194114">(May 04 2022 at 17:54)</a>:</h4>
<p>Those are the definition of <code>&lt;=</code> and <code>&lt;|</code>, of course we want them</p>



<a name="281194169"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281194169" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281194169">(May 04 2022 at 17:54)</a>:</h4>
<p>and they make good simp lemmas too</p>



<a name="281194265"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281194265" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281194265">(May 04 2022 at 17:55)</a>:</h4>
<p>That's only assuming that we actually have notation for <code>&lt;|</code>, and I'm skeptical of this being a good idea</p>



<a name="281194303"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281194303" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281194303">(May 04 2022 at 17:55)</a>:</h4>
<p>if there was no such notation it would still be exactly as written, just without the notation</p>



<a name="281194443"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281194443" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281194443">(May 04 2022 at 17:56)</a>:</h4>
<p>True, but surely it would be easier to just use <code>mk_le_mk</code> and, if needed, <code>push_neg</code>?</p>



<a name="281194713"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281194713" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281194713">(May 04 2022 at 17:58)</a>:</h4>
<p>What's more, this isn't even the form that <code>push_neg</code> gives for the lemma</p>



<a name="281194722"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281194722" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281194722">(May 04 2022 at 17:58)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">@[simp]</span> <span class="kd">theorem</span> <span class="n">mk_not_le_mk</span> <span class="o">{</span><span class="n">xl</span> <span class="n">xr</span> <span class="n">xL</span> <span class="n">xR</span> <span class="n">yl</span> <span class="n">yr</span> <span class="n">yL</span> <span class="n">yR</span><span class="o">}</span> <span class="o">:</span>
  <span class="bp">¬</span> <span class="n">mk</span> <span class="n">yl</span> <span class="n">yr</span> <span class="n">yL</span> <span class="n">yR</span> <span class="bp">≤</span> <span class="n">mk</span> <span class="n">xl</span> <span class="n">xr</span> <span class="n">xL</span> <span class="n">xR</span> <span class="bp">↔</span>
  <span class="o">(</span><span class="bp">∀</span> <span class="n">i</span><span class="o">,</span> <span class="bp">¬</span> <span class="n">mk</span> <span class="n">xl</span> <span class="n">xr</span> <span class="n">xL</span> <span class="n">xR</span> <span class="bp">≤</span> <span class="n">yL</span> <span class="n">i</span><span class="o">)</span> <span class="bp">→</span>
  <span class="o">(</span><span class="bp">∃</span> <span class="n">j</span><span class="o">,</span> <span class="n">xR</span> <span class="n">j</span> <span class="bp">≤</span> <span class="n">mk</span> <span class="n">yl</span> <span class="n">yr</span> <span class="n">yL</span> <span class="n">yR</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="o">{</span> <span class="n">rw</span> <span class="n">mk_le_mk</span><span class="o">,</span> <span class="n">push_neg</span><span class="o">,</span> <span class="n">refl</span> <span class="o">}</span>
</code></pre></div>



<a name="281194755"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281194755" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281194755">(May 04 2022 at 17:58)</a>:</h4>
<p>That's not a good form at all</p>



<a name="281194866"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281194866" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281194866">(May 04 2022 at 17:59)</a>:</h4>
<p>I'm not a fan of gratuitous push_neg. These kind of theorems don't really need LEM and the proofs are shorter that way too</p>



<a name="281194998"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281194998" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281194998">(May 04 2022 at 18:00)</a>:</h4>
<p>I know most people don't care but I occasionally clean up LEM usage in fundamental logic lemmas where possible</p>



<a name="281195262"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281195262" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281195262">(May 04 2022 at 18:01)</a>:</h4>
<p>The negations here just confuse the tactics by making one variation look "more complex" than the other, leading to lots of symmetry breaking</p>



<a name="281195328"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281195328" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281195328">(May 04 2022 at 18:01)</a>:</h4>
<p>That might be a case for actually having a <code>\notle</code> relation on games</p>



<a name="281195567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281195567" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281195567">(May 04 2022 at 18:03)</a>:</h4>
<p>I have a slight preference for <code>x &lt;| y</code> over <code>y \notle x</code> because it puts the variables in the right order</p>



<a name="281195595"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281195595" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281195595">(May 04 2022 at 18:03)</a>:</h4>
<p>...in fact I think it has to be in that order for the recursive definition to work</p>



<a name="281195699"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281195699" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281195699">(May 04 2022 at 18:04)</a>:</h4>
<p>because <code>(x &lt;| y, x &lt;= y)</code> is what is defined by recursion</p>



<a name="281195760"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281195760" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281195760">(May 04 2022 at 18:04)</a>:</h4>
<p>Right</p>



<a name="281195828"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281195828" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281195828">(May 04 2022 at 18:05)</a>:</h4>
<p>Still, what kind of annoys me is that we'd be dealing with a really basic relation and have almost no API for it</p>



<a name="281195854"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281195854" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281195854">(May 04 2022 at 18:05)</a>:</h4>
<p>why no API?</p>



<a name="281195978"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281195978" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281195978">(May 04 2022 at 18:06)</a>:</h4>
<p>I mean, that thing I mentioned earlier, that most of the basic results on <code>&lt;|</code> should in fact be basic results of <code>\notle</code> on preorders</p>



<a name="281196010"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281196010" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281196010">(May 04 2022 at 18:06)</a>:</h4>
<p>I'm not quite sure how we could leverage this</p>



<a name="281196173"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281196173" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281196173">(May 04 2022 at 18:07)</a>:</h4>
<p>We don't have a typeclass for converse-le-preorders so I wouldn't worry about it</p>



<a name="281196324"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281196324" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281196324">(May 04 2022 at 18:08)</a>:</h4>
<p>Also, another question</p>



<a name="281196337"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281196337" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281196337">(May 04 2022 at 18:08)</a>:</h4>
<p>How should the lemmas about <code>&lt;|</code> be called?</p>



<a name="281196387"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281196387" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281196387">(May 04 2022 at 18:08)</a>:</h4>
<p><code>lf</code> = less-fuzzy?</p>



<a name="281196549"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281196549" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281196549">(May 04 2022 at 18:09)</a>:</h4>
<p>I like that</p>



<a name="281197027"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281197027" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281197027">(May 04 2022 at 18:12)</a>:</h4>
<p>...no, I don't know, I still kinda agree with Yaël that it's silly to define this new symbol for games and nothing else, despite it making sense on any preorder</p>



<a name="281197152"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281197152" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281197152">(May 04 2022 at 18:13)</a>:</h4>
<p>Sure, that's a potential refactor to consider once there is more than 1 example</p>



<a name="281197282"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281197282" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281197282">(May 04 2022 at 18:14)</a>:</h4>
<p>it would be quite a lot of work and <code>lf</code> would not be nearly as good a name</p>



<a name="281197287"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281197287" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281197287">(May 04 2022 at 18:14)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/116395-maths/topic/Surreal.20numbers/near/281139541">said</a>:</p>
<blockquote>
<p>The mutually recursive definition of <code>&lt;|</code> and <code>&lt;=</code> gives them equal status, even though they are provably negations of each other</p>
</blockquote>
<p>I don't agree with this. I think that our simultaneous definition of these symbols is more of an inductive hack. If we really wanted to, we could have defined <code>≤</code> using the standard ZFC definition and just prove that the relation on pairs where entries can be swapped as long as at least one entry decreases is well-founded</p>



<a name="281197299"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281197299" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281197299">(May 04 2022 at 18:14)</a>:</h4>
<p>It's just easier not to do that</p>



<a name="281197487"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281197487" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281197487">(May 04 2022 at 18:15)</a>:</h4>
<p>I disagree, I would say that <code>x &lt;| y</code> and <code>~(y &lt;= x)</code> are not intensionally equal in the same way that <code>a + b</code> and <code>b + a</code> are not intensionally equal</p>



<a name="281197579"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281197579" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281197579">(May 04 2022 at 18:16)</a>:</h4>
<p>it is a <em>theorem</em>, proven by induction, that they coincide</p>



<a name="281197720"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281197720" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281197720">(May 04 2022 at 18:17)</a>:</h4>
<p>The refactor I am talking about for <code>preorder</code> would be to add another field <code>notle</code> and a proof <code>x \notle y &lt;-&gt; ~(x &lt;= y)</code>, to be able to change the defeq of the <code>notle</code> relation beyond the default one</p>



<a name="281197821"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281197821" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281197821">(May 04 2022 at 18:18)</a>:</h4>
<p>Why would it need to be a field of <code>preorder</code>? We don't do this for <code>\ge</code></p>



<a name="281197851"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281197851" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281197851">(May 04 2022 at 18:18)</a>:</h4>
<p>because it is changing the defeq</p>



<a name="281197908"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281197908" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281197908">(May 04 2022 at 18:19)</a>:</h4>
<p>This would be pretty easy to circumvent though</p>



<a name="281197926"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281197926" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281197926">(May 04 2022 at 18:19)</a>:</h4>
<p>We could do it for <code>ge</code> as well, if we had more than 0 examples where we want the defeqs to differ</p>



<a name="281198112"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281198112" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281198112">(May 04 2022 at 18:20)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">le_not_ge</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">pgame</span><span class="o">),</span> <span class="kt">Prop</span> <span class="bp">×</span> <span class="kt">Prop</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">mk</span> <span class="n">xl</span> <span class="n">xr</span> <span class="n">xL</span> <span class="n">xR</span><span class="o">)</span> <span class="o">(</span><span class="n">mk</span> <span class="n">yl</span> <span class="n">yr</span> <span class="n">yL</span> <span class="n">yR</span><span class="o">)</span> <span class="o">:=</span>
  <span class="c1">-- the orderings of the clauses here are carefully chosen so that</span>
  <span class="c1">--   and.left/or.inl refer to moves by Left, and</span>
  <span class="c1">--   and.right/or.inr refer to moves by Right.</span>
<span class="o">((</span><span class="bp">∀</span> <span class="n">i</span> <span class="o">:</span> <span class="n">xl</span><span class="o">,</span> <span class="o">(</span><span class="n">le_not_ge</span> <span class="o">(</span><span class="n">xL</span> <span class="n">i</span><span class="o">)</span> <span class="o">⟨</span><span class="n">yl</span><span class="o">,</span> <span class="n">yr</span><span class="o">,</span> <span class="n">yL</span><span class="o">,</span> <span class="n">yR</span><span class="o">⟩)</span><span class="bp">.</span><span class="mi">2</span><span class="o">)</span> <span class="bp">∧</span>
  <span class="o">(</span><span class="bp">∀</span> <span class="n">j</span> <span class="o">:</span> <span class="n">yr</span><span class="o">,</span> <span class="o">(</span><span class="n">le_not_ge</span> <span class="o">⟨</span><span class="n">xl</span><span class="o">,</span> <span class="n">xr</span><span class="o">,</span> <span class="n">xL</span><span class="o">,</span> <span class="n">xR</span><span class="o">⟩</span> <span class="o">(</span><span class="n">yR</span> <span class="n">j</span><span class="o">))</span><span class="bp">.</span><span class="mi">2</span><span class="o">),</span>
<span class="o">(</span><span class="bp">∃</span> <span class="n">i</span> <span class="o">:</span> <span class="n">yl</span><span class="o">,</span> <span class="o">(</span><span class="n">le_not_ge</span> <span class="o">⟨</span><span class="n">xl</span><span class="o">,</span> <span class="n">xr</span><span class="o">,</span> <span class="n">xL</span><span class="o">,</span> <span class="n">xR</span><span class="o">⟩</span> <span class="o">(</span><span class="n">yL</span> <span class="n">i</span><span class="o">))</span><span class="bp">.</span><span class="mi">1</span><span class="o">)</span> <span class="bp">∨</span>
  <span class="o">(</span><span class="bp">∃</span> <span class="n">j</span> <span class="o">:</span> <span class="n">xr</span><span class="o">,</span> <span class="o">(</span><span class="n">le_not_ge</span> <span class="o">(</span><span class="n">xR</span> <span class="n">j</span><span class="o">)</span> <span class="o">⟨</span><span class="n">yl</span><span class="o">,</span> <span class="n">yr</span><span class="o">,</span> <span class="n">yL</span><span class="o">,</span> <span class="n">yR</span><span class="o">⟩)</span><span class="bp">.</span><span class="mi">1</span><span class="o">))</span>
<span class="n">using_well_founded</span> <span class="o">{</span> <span class="n">dec_tac</span> <span class="o">:=</span> <span class="n">pgame_wf_tac</span> <span class="o">}</span>

<span class="kd">instance</span> <span class="o">:</span> <span class="n">has_le</span> <span class="n">pgame</span> <span class="o">:=</span> <span class="o">⟨</span><span class="bp">λ</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="o">(</span><span class="n">le_not_ge</span> <span class="n">x</span> <span class="n">y</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span><span class="o">⟩</span>
<span class="kd">instance</span> <span class="o">:</span> <span class="n">has_lt</span> <span class="n">pgame</span> <span class="o">:=</span> <span class="o">⟨</span><span class="bp">λ</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">∧</span> <span class="bp">¬</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">x</span><span class="o">⟩</span>

<span class="c1">-- We need a few auxiliary theorems before proving that `(le_not_ge x y).2 ↔ ¬ y ≤ x`.</span>

<span class="kn">private</span> <span class="kd">theorem</span> <span class="n">mk_le_mk_aux</span> <span class="o">{</span><span class="n">xl</span> <span class="n">xr</span> <span class="n">xL</span> <span class="n">xR</span> <span class="n">yl</span> <span class="n">yr</span> <span class="n">yL</span> <span class="n">yR</span><span class="o">}</span> <span class="o">:</span>
  <span class="n">mk</span> <span class="n">xl</span> <span class="n">xr</span> <span class="n">xL</span> <span class="n">xR</span> <span class="bp">≤</span> <span class="n">mk</span> <span class="n">yl</span> <span class="n">yr</span> <span class="n">yL</span> <span class="n">yR</span> <span class="bp">↔</span>
  <span class="o">(</span><span class="bp">∀</span> <span class="n">i</span><span class="o">,</span> <span class="o">(</span><span class="n">le_not_ge</span> <span class="o">(</span><span class="n">xL</span> <span class="n">i</span><span class="o">)</span> <span class="o">(</span><span class="n">mk</span> <span class="n">yl</span> <span class="n">yr</span> <span class="n">yL</span> <span class="n">yR</span><span class="o">))</span><span class="bp">.</span><span class="mi">2</span><span class="o">)</span> <span class="bp">∧</span>
  <span class="o">(</span><span class="bp">∀</span> <span class="n">j</span><span class="o">,</span> <span class="o">(</span><span class="n">le_not_ge</span> <span class="o">(</span><span class="n">mk</span> <span class="n">xl</span> <span class="n">xr</span> <span class="n">xL</span> <span class="n">xR</span><span class="o">)</span> <span class="o">(</span><span class="n">yR</span> <span class="n">j</span><span class="o">))</span><span class="bp">.</span><span class="mi">2</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">show</span> <span class="o">(</span><span class="n">le_not_ge</span> <span class="n">_</span> <span class="n">_</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span> <span class="bp">↔</span> <span class="n">_</span><span class="o">,</span> <span class="kd">by</span> <span class="n">rw</span> <span class="n">le_not_ge</span>

<span class="kn">private</span> <span class="kd">theorem</span> <span class="n">mk_not_le_mk_aux</span> <span class="o">{</span><span class="n">xl</span> <span class="n">xr</span> <span class="n">xL</span> <span class="n">xR</span> <span class="n">yl</span> <span class="n">yr</span> <span class="n">yL</span> <span class="n">yR</span><span class="o">}</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">le_not_ge</span> <span class="o">(</span><span class="n">mk</span> <span class="n">xl</span> <span class="n">xr</span> <span class="n">xL</span> <span class="n">xR</span><span class="o">)</span> <span class="o">(</span><span class="n">mk</span> <span class="n">yl</span> <span class="n">yr</span> <span class="n">yL</span> <span class="n">yR</span><span class="o">))</span><span class="bp">.</span><span class="mi">2</span> <span class="bp">↔</span>
  <span class="o">(</span><span class="bp">∃</span> <span class="n">i</span><span class="o">,</span> <span class="n">mk</span> <span class="n">xl</span> <span class="n">xr</span> <span class="n">xL</span> <span class="n">xR</span> <span class="bp">≤</span> <span class="n">yL</span> <span class="n">i</span><span class="o">)</span> <span class="bp">∨</span>
  <span class="o">(</span><span class="bp">∃</span> <span class="n">j</span><span class="o">,</span> <span class="n">xR</span> <span class="n">j</span> <span class="bp">≤</span> <span class="n">mk</span> <span class="n">yl</span> <span class="n">yr</span> <span class="n">yL</span> <span class="n">yR</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">show</span> <span class="o">(</span><span class="n">le_not_ge</span> <span class="n">_</span> <span class="n">_</span><span class="o">)</span><span class="bp">.</span><span class="mi">2</span> <span class="bp">↔</span> <span class="n">_</span><span class="o">,</span> <span class="kd">by</span> <span class="o">{</span> <span class="n">rw</span> <span class="n">le_not_ge</span><span class="o">,</span> <span class="n">refl</span> <span class="o">}</span>

<span class="kn">private</span> <span class="kd">theorem</span> <span class="n">le_not_ge_iff_aux</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">pgame</span><span class="o">}</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">x</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">↔</span> <span class="bp">¬</span> <span class="o">(</span><span class="n">le_not_ge</span> <span class="n">y</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="mi">2</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">((</span><span class="n">le_not_ge</span> <span class="n">x</span> <span class="n">y</span><span class="o">)</span><span class="bp">.</span><span class="mi">2</span> <span class="bp">↔</span> <span class="bp">¬</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">x</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">induction</span> <span class="n">x</span> <span class="k">with</span> <span class="n">xl</span> <span class="n">xr</span> <span class="n">xL</span> <span class="n">xR</span> <span class="n">IHxl</span> <span class="n">IHxr</span> <span class="n">generalizing</span> <span class="n">y</span><span class="o">,</span>
  <span class="n">induction</span> <span class="n">y</span> <span class="k">with</span> <span class="n">yl</span> <span class="n">yr</span> <span class="n">yL</span> <span class="n">yR</span> <span class="n">IHyl</span> <span class="n">IHyr</span><span class="o">,</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">mk_le_mk_aux</span><span class="o">,</span> <span class="n">mk_not_le_mk_aux</span><span class="o">,</span>
    <span class="n">not_and_distrib</span><span class="o">,</span> <span class="n">not_or_distrib</span><span class="o">,</span> <span class="n">not_forall</span><span class="o">,</span> <span class="n">not_exists</span><span class="o">,</span>
    <span class="n">and_comm</span><span class="o">,</span> <span class="n">or_comm</span><span class="o">,</span> <span class="n">IHxl</span><span class="o">,</span> <span class="n">IHxr</span><span class="o">,</span> <span class="n">IHyl</span><span class="o">,</span> <span class="n">IHyr</span><span class="o">,</span> <span class="n">iff_self</span><span class="o">,</span> <span class="n">and_self</span><span class="o">]</span>
<span class="kd">end</span>

<span class="kn">private</span> <span class="kd">theorem</span> <span class="n">le_not_ge_iff</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">pgame</span><span class="o">}</span> <span class="o">:</span> <span class="o">(</span><span class="n">le_not_ge</span> <span class="n">x</span> <span class="n">y</span><span class="o">)</span><span class="bp">.</span><span class="mi">2</span> <span class="bp">↔</span> <span class="bp">¬</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">x</span> <span class="o">:=</span>
<span class="n">le_not_ge_iff_aux.2</span>

<span class="kd">@[simp]</span> <span class="kd">theorem</span> <span class="n">mk_le_mk</span> <span class="o">{</span><span class="n">xl</span> <span class="n">xr</span> <span class="n">xL</span> <span class="n">xR</span> <span class="n">yl</span> <span class="n">yr</span> <span class="n">yL</span> <span class="n">yR</span><span class="o">}</span> <span class="o">:</span>
  <span class="n">mk</span> <span class="n">xl</span> <span class="n">xr</span> <span class="n">xL</span> <span class="n">xR</span> <span class="bp">≤</span> <span class="n">mk</span> <span class="n">yl</span> <span class="n">yr</span> <span class="n">yL</span> <span class="n">yR</span> <span class="bp">↔</span>
  <span class="o">(</span><span class="bp">∀</span> <span class="n">i</span><span class="o">,</span> <span class="bp">¬</span> <span class="n">mk</span> <span class="n">yl</span> <span class="n">yr</span> <span class="n">yL</span> <span class="n">yR</span> <span class="bp">≤</span> <span class="n">xL</span> <span class="n">i</span><span class="o">)</span> <span class="bp">∧</span>
  <span class="o">(</span><span class="bp">∀</span> <span class="n">j</span><span class="o">,</span> <span class="bp">¬</span> <span class="n">yR</span> <span class="n">j</span> <span class="bp">≤</span> <span class="n">mk</span> <span class="n">xl</span> <span class="n">xr</span> <span class="n">xL</span> <span class="n">xR</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">simp_rw</span> <span class="o">[</span><span class="n">mk_le_mk_aux</span><span class="o">,</span> <span class="n">le_not_ge_iff</span><span class="o">]</span>

<span class="kd">theorem</span> <span class="n">mk_not_le_mk</span> <span class="o">{</span><span class="n">xl</span> <span class="n">xr</span> <span class="n">xL</span> <span class="n">xR</span> <span class="n">yl</span> <span class="n">yr</span> <span class="n">yL</span> <span class="n">yR</span><span class="o">}</span> <span class="o">:</span>
  <span class="bp">¬</span> <span class="n">mk</span> <span class="n">yl</span> <span class="n">yr</span> <span class="n">yL</span> <span class="n">yR</span> <span class="bp">≤</span> <span class="n">mk</span> <span class="n">xl</span> <span class="n">xr</span> <span class="n">xL</span> <span class="n">xR</span> <span class="bp">↔</span>
  <span class="o">(</span><span class="bp">∃</span> <span class="n">i</span><span class="o">,</span> <span class="n">mk</span> <span class="n">xl</span> <span class="n">xr</span> <span class="n">xL</span> <span class="n">xR</span> <span class="bp">≤</span> <span class="n">yL</span> <span class="n">i</span><span class="o">)</span> <span class="bp">∨</span>
  <span class="o">(</span><span class="bp">∃</span> <span class="n">j</span><span class="o">,</span> <span class="n">xR</span> <span class="n">j</span> <span class="bp">≤</span> <span class="o">⟨</span><span class="n">yl</span><span class="o">,</span> <span class="n">yr</span><span class="o">,</span> <span class="n">yL</span><span class="o">,</span> <span class="n">yR</span><span class="o">⟩)</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="bp">←</span><span class="n">le_not_ge_iff</span><span class="o">,</span> <span class="n">mk_not_le_mk_aux</span><span class="o">]</span>
</code></pre></div>



<a name="281198169"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281198169" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281198169">(May 04 2022 at 18:20)</a>:</h4>
<p>Once you have those last two theorems, there's not really a need to invoke <code>le_not_ge</code> ever again</p>



<a name="281198222"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281198222" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281198222">(May 04 2022 at 18:21)</a>:</h4>
<p>So I don't think it's worth adding a new field to <code>preorder</code> for this</p>



<a name="281198247"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281198247" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281198247">(May 04 2022 at 18:21)</a>:</h4>
<p>I don't either</p>



<a name="281198299"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281198299" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281198299">(May 04 2022 at 18:21)</a>:</h4>
<p>I think that <em><code>pgame</code> specifically</em> should have a notle definition</p>



<a name="281198422"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281198422" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281198422">(May 04 2022 at 18:22)</a>:</h4>
<p>Hmm... I think I'll take your compromise</p>



<a name="281198456"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281198456" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281198456">(May 04 2022 at 18:22)</a>:</h4>
<p>If there's ever another instance where we want this separate <code>\notle</code> definition, then we can take whatever theorems about it we prove here, and generalize those to preorders</p>



<a name="281198488"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281198488" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281198488">(May 04 2022 at 18:23)</a>:</h4>
<p>Until then, I'll just make it a definition on <code>pgame</code> specifically</p>



<a name="281198499"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281198499" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281198499">(May 04 2022 at 18:23)</a>:</h4>
<p>using the <code>le_not_ge_iff</code> lemma you can pretty easily eliminate <code>&lt;|</code> in any theorem statements if you don't want to see it</p>



<a name="281198555"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281198555" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281198555">(May 04 2022 at 18:23)</a>:</h4>
<p>Oh and one last thing, what symbol are we going to use then?</p>



<a name="281198582"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281198582" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281198582">(May 04 2022 at 18:24)</a>:</h4>
<p>and pretty much the only theorems of interest for these converse-le-preorders are cyclic permutations of <code>le_trans</code></p>



<a name="281198666"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281198666" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281198666">(May 04 2022 at 18:24)</a>:</h4>
<p>We could use <code>&lt;|</code> or <code>⧏</code> or <code>◁</code></p>



<a name="281198743"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281198743" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281198743">(May 04 2022 at 18:25)</a>:</h4>
<p>I think Kevin wants to veto <code>&lt;|</code></p>



<a name="281198827"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281198827" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281198827">(May 04 2022 at 18:26)</a>:</h4>
<p>I'm not a fan either</p>



<a name="281198893"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281198893" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281198893">(May 04 2022 at 18:26)</a>:</h4>
<p>If we want to stick as closely as possible to Conway, we should be using <code>⧏</code></p>



<a name="281198914"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281198914" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281198914">(May 04 2022 at 18:26)</a>:</h4>
<p>(it looks kinda cramped in my font, though)</p>



<a name="281198916"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281198916" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281198916">(May 04 2022 at 18:26)</a>:</h4>
<p>lgtm</p>



<a name="281198977"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281198977" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281198977">(May 04 2022 at 18:26)</a>:</h4>
<p>it lines up in my lean font, it's a bit short on zulip</p>



<a name="281199031"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281199031" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281199031">(May 04 2022 at 18:27)</a>:</h4>
<p>Alright then</p>



<a name="281199035"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281199035" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281199035">(May 04 2022 at 18:27)</a>:</h4>
<p>I'll get refactoring</p>



<a name="281199052"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281199052" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281199052">(May 04 2022 at 18:27)</a>:</h4>
<p>If we're just going to change <code>&lt;</code> to <code>⧏</code>, then not that many things should be different by the end of this</p>



<a name="281199166"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281199166" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281199166">(May 04 2022 at 18:28)</a>:</h4>
<p>Oh, one last thing!</p>



<a name="281199189"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281199189" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281199189">(May 04 2022 at 18:28)</a>:</h4>
<p>The <code>&lt;</code> error seems to have propagated to one other file</p>



<a name="281199193"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281199193" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281199193">(May 04 2022 at 18:28)</a>:</h4>
<p><code>winner.lean</code></p>



<a name="281199217"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281199217" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281199217">(May 04 2022 at 18:28)</a>:</h4>
<p>what error?</p>



<a name="281199237"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281199237" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281199237">(May 04 2022 at 18:29)</a>:</h4>
<p><a href="/user_uploads/3121/bfdwDaKGNIleD5owN3T-uKRt/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/bfdwDaKGNIleD5owN3T-uKRt/image.png" title="image.png"><img src="/user_uploads/3121/bfdwDaKGNIleD5owN3T-uKRt/image.png"></a></div>



<a name="281199259"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281199259" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281199259">(May 04 2022 at 18:29)</a>:</h4>
<p>These two should just be <code>0 &lt; G</code> and <code>G &lt; 0</code> respectively</p>



<a name="281199280"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281199280" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281199280">(May 04 2022 at 18:29)</a>:</h4>
<p>And to me it seems like it isn't worth having a separate definition for that?</p>



<a name="281199329"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281199329" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281199329">(May 04 2022 at 18:29)</a>:</h4>
<p>The new definition of <code>lt</code> is this already, right?</p>



<a name="281199403"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281199403" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281199403">(May 04 2022 at 18:30)</a>:</h4>
<p><code>x &lt; y &lt;-&gt; x &lt;| y /\ x &lt;= y</code></p>



<a name="281199504"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281199504" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281199504">(May 04 2022 at 18:30)</a>:</h4>
<p>if so I agree this doesn't need separate definition, we don't have <code>pos</code> on preorders</p>



<a name="281199575"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281199575" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281199575">(May 04 2022 at 18:31)</a>:</h4>
<p>Alright then</p>



<a name="281199628"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281199628" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281199628">(May 04 2022 at 18:31)</a>:</h4>
<p>For the moment I'll just replace <code>&lt;</code> with <code>⧏</code> in those files, but I'll probably refactor those afterwards</p>



<a name="281199672"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281199672" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281199672">(May 04 2022 at 18:32)</a>:</h4>
<p>it might be worth stuffing the documentation about "left wins" and "right wins" in terms of positive and negative somewhere though, that's not very obvious</p>



<a name="281199874"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281199874" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281199874">(May 04 2022 at 18:33)</a>:</h4>
<p>Ah, this is a more technical issue, but how do you define a new symbol in Lean?</p>



<a name="281199918"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281199918" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281199918">(May 04 2022 at 18:33)</a>:</h4>
<p>I tried </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">local</span> <span class="kd">infix</span> <span class="bp">`</span> <span class="bp">⧏</span> <span class="bp">`</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span> <span class="n">y</span><span class="o">,</span> <span class="o">(</span><span class="n">le_lf</span> <span class="n">x</span> <span class="n">y</span><span class="o">)</span><span class="bp">.</span><span class="mi">2</span>
</code></pre></div>
<p>and it tells me something about a missing <code>precedence</code> command</p>



<a name="281200013"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281200013" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281200013">(May 04 2022 at 18:34)</a>:</h4>
<p>put a <code>:50</code> or something after the backticks</p>



<a name="281200058"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281200058" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281200058">(May 04 2022 at 18:34)</a>:</h4>
<p>it should probably line up with the numbers from <code>#print &lt;</code></p>



<a name="281200188"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281200188" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281200188">(May 04 2022 at 18:35)</a>:</h4>
<p>There goes, thanks!</p>



<a name="281200669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281200669" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281200669">(May 04 2022 at 18:39)</a>:</h4>
<p>Should I also introduce <code>⧐</code> with a <code>simp</code> lemma <code>x ⧐ y ↔ y ⧏ x</code> or is that not worth it?</p>



<a name="281201317"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281201317" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281201317">(May 04 2022 at 18:43)</a>:</h4>
<p>let's do our best to pretend <code>gt</code> doesn't exist</p>



<a name="281201320"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281201320" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281201320">(May 04 2022 at 18:43)</a>:</h4>
<p>Yeah, I don't think it's worth it either</p>



<a name="281201982"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281201982" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281201982">(May 04 2022 at 18:47)</a>:</h4>
<p>Just to be sure, </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">@[simp]</span> <span class="kd">theorem</span> <span class="n">not_le</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">pgame</span><span class="o">}</span> <span class="o">:</span> <span class="bp">¬</span> <span class="n">x</span> <span class="bp">≤</span> <span class="n">y</span> <span class="bp">↔</span> <span class="n">y</span> <span class="bp">⧏</span> <span class="n">x</span> <span class="o">:=</span> <span class="n">not_le_lf.1</span>
<span class="kd">@[simp]</span> <span class="kd">theorem</span> <span class="n">not_lf</span> <span class="o">{</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">pgame</span><span class="o">}</span> <span class="o">:</span> <span class="bp">¬</span> <span class="n">x</span> <span class="bp">⧏</span> <span class="n">y</span> <span class="bp">↔</span> <span class="n">y</span> <span class="bp">≤</span> <span class="n">x</span> <span class="o">:=</span> <span class="n">not_le_lf.2</span>
</code></pre></div>
<p>both of these should be <code>simp</code>, right?</p>



<a name="281206982"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281206982" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281206982">(May 04 2022 at 19:27)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/set_theory/game/pgame.html#pgame.right_response">https://leanprover-community.github.io/mathlib_docs/set_theory/game/pgame.html#pgame.right_response</a></p>



<a name="281206992"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281206992" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281206992">(May 04 2022 at 19:27)</a>:</h4>
<p>Do we really need this? Seems pretty useless to me</p>



<a name="281207107"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281207107" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281207107">(May 04 2022 at 19:28)</a>:</h4>
<p>I guess it's a way to prove that x ≤ 0 actually means that Right wins as the second player?</p>



<a name="281211198"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281211198" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281211198">(May 04 2022 at 19:56)</a>:</h4>
<p>I don't see any obvious way to do so, it's more or less true by definition</p>



<a name="281219290"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281219290" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281219290">(May 04 2022 at 21:04)</a>:</h4>
<p>Yeah, that's my thought too</p>



<a name="281222866"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281222866" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281222866">(May 04 2022 at 21:37)</a>:</h4>
<p>There's currently a <code>covariant_class_swap_add_lt</code> instance on <code>pgame</code></p>



<a name="281222911"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281222911" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281222911">(May 04 2022 at 21:37)</a>:</h4>
<p>Would it be worth it changing it into a <code>covariant_class_swap_add_lf</code> instance? I don't know if there's any API for covariant relations other than <code>&lt;</code> or <code>≤</code></p>



<a name="281222982"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281222982" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281222982">(May 04 2022 at 21:37)</a>:</h4>
<p>No there is not.</p>



<a name="281223678"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281223678" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281223678">(May 04 2022 at 21:44)</a>:</h4>
<p>Could that API exist in the future, though? Surely it would just be a matter of not enforcing <code>has_lt</code> or <code>has_le</code> in those theorems</p>



<a name="281224934"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281224934" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281224934">(May 04 2022 at 21:54)</a>:</h4>
<p>In fact, I'll in some form need the covariantness of <code>\lf</code> to prove that of <code>&lt;</code></p>



<a name="281224945"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281224945" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281224945">(May 04 2022 at 21:54)</a>:</h4>
<p>Since <code>&lt;</code> is equivalent to <code>\le</code> and <code>\lf</code></p>



<a name="281224963"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281224963" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281224963">(May 04 2022 at 21:55)</a>:</h4>
<p>Maybe it could be a theorem instead of an instance for now?</p>



<a name="281225147"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281225147" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281225147">(May 04 2022 at 21:56)</a>:</h4>
<p>Yes, there's no point in making an instance to use it exactly once.</p>



<a name="281226444"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281226444" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281226444">(May 04 2022 at 22:06)</a>:</h4>
<p>I mean, it would be nice to have auto-generated <code>add_lf_add</code> and all those other lemmas, but I guess I can prove them myself for now</p>



<a name="281230772"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281230772" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281230772">(May 04 2022 at 22:47)</a>:</h4>
<p>Question</p>



<a name="281230782"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281230782" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281230782">(May 04 2022 at 22:47)</a>:</h4>
<p>How can I use <code>⧏</code> for both <code>pgame</code> and <code>game</code>?</p>



<a name="281230801"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281230801" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281230801">(May 04 2022 at 22:47)</a>:</h4>
<p>Having a <code>local infix</code> is only letting me define it once</p>



<a name="281230921"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281230921" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281230921">(May 04 2022 at 22:49)</a>:</h4>
<p>Are you sure? You can overload notation.</p>



<a name="281230935"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281230935" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281230935">(May 04 2022 at 22:49)</a>:</h4>
<p>not local notation</p>



<a name="281230970"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281230970" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281230970">(May 04 2022 at 22:49)</a>:</h4>
<p>I would just not import the notation or use a subscript</p>



<a name="281232437"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281232437" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281232437">(May 04 2022 at 23:03)</a>:</h4>
<p>I feel like this whole file should just go<br>
<a href="https://leanprover-community.github.io/mathlib_docs/set_theory/game/winner.html">https://leanprover-community.github.io/mathlib_docs/set_theory/game/winner.html</a></p>



<a name="281232447"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281232447" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281232447">(May 04 2022 at 23:03)</a>:</h4>
<p>The main definitions are literally just <code>&lt;</code>, <code>&gt;</code>, <code>||</code>, and <code>≈</code></p>



<a name="281232453"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281232453" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281232453">(May 04 2022 at 23:03)</a>:</h4>
<p>We really do not need new names for these relations</p>



<a name="281232760"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281232760" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281232760">(May 04 2022 at 23:07)</a>:</h4>
<p>I know that it's very bad practice to do more than one big thing in a PR, but if I could just delete that file right now, it would make my <code>lt</code> refactor a smidge easier</p>



<a name="281232787"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281232787" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281232787">(May 04 2022 at 23:07)</a>:</h4>
<p>I have no attachment to it. Presumably it is still a leaf node? We may want to have a meta discussion, separated from this subject matter, about removing old leaf nodes.</p>



<a name="281232796"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281232796" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281232796">(May 04 2022 at 23:07)</a>:</h4>
<p>A single other file depends on it</p>



<a name="281232800"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281232800" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281232800">(May 04 2022 at 23:08)</a>:</h4>
<p><code>nim.lean</code></p>



<a name="281232817"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281232817" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281232817">(May 04 2022 at 23:08)</a>:</h4>
<p>Sorry. I think for this refactor you've got to bring it along.</p>



<a name="281232846"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281232846" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281232846">(May 04 2022 at 23:08)</a>:</h4>
<p>:(</p>



<a name="281232864"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281232864" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281232864">(May 04 2022 at 23:08)</a>:</h4>
<p>Or propose it first.</p>



<a name="281232877"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281232877" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281232877">(May 04 2022 at 23:08)</a>:</h4>
<p>It doesn't make sense to kill it without the refactor</p>



<a name="281232889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281232889" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281232889">(May 04 2022 at 23:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="459227">Violeta Hernández</span> <a href="#narrow/stream/116395-maths/topic/Surreal.20numbers/near/281232447">said</a>:</p>
<blockquote>
<p>The main definitions are literally just <code>&lt;</code>, <code>&gt;</code>, <code>||</code>, and <code>≈</code></p>
</blockquote>
<p>This is only true with the correct definitions of <code>&lt;</code> and <code>&gt;</code></p>



<a name="281232940"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281232940" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281232940">(May 04 2022 at 23:09)</a>:</h4>
<p>for this PR it should not be hard to replace them with <code>left_wins G := 0 &lt; G</code> etc and give one line proofs of all the theorems. This will make the deletion an easy sell</p>



<a name="281232945"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281232945" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281232945">(May 04 2022 at 23:09)</a>:</h4>
<p>Oh, I see. Okay, let's nuke it.</p>



<a name="281233035"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281233035" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281233035">(May 04 2022 at 23:10)</a>:</h4>
<p>in particular, if they <em>aren't</em> one line proofs then you might be missing an API theorem</p>



<a name="281233039"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281233039" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281233039">(May 04 2022 at 23:10)</a>:</h4>
<p>Although mario's suggestion is probably even better. :-)</p>



<a name="281233070"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281233070" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281233070">(May 04 2022 at 23:10)</a>:</h4>
<p>I am currently missing the <code>||</code> relation</p>



<a name="281233096"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281233096" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281233096">(May 04 2022 at 23:11)</a>:</h4>
<p>I don't know if I should define it now that I defined <code>⧏</code>, or if that should come in a subsequent PR</p>



<a name="281233135"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281233135" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281233135">(May 04 2022 at 23:11)</a>:</h4>
<p>I think it makes sense to add, if only to have a place to hang all these winner/loser docs</p>



<a name="281233826"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281233826" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281233826">(May 04 2022 at 23:19)</a>:</h4>
<p>Yeah Fox won't be mad if you remove this file. The point was Sprague-Grundy. If you can keep Spraguuuuuuuue-Grundy compiling, cool.</p>



<a name="281236794"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281236794" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281236794">(May 04 2022 at 23:58)</a>:</h4>
<p>As a matter of fact, I got the entire file to one line proofs</p>



<a name="281236810"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281236810" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281236810">(May 04 2022 at 23:58)</a>:</h4>
<p>Often more like 20 character proofs, haha</p>



<a name="281237362"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281237362" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281237362">(May 05 2022 at 00:04)</a>:</h4>
<p>Parallel to: ∥<br>
Unicode hexadecimal: 0x2225<br>
In block: Mathematical Operators</p>
<p>Double vertical line: ‖<br>
Unicode hexadecimal: 0x2016<br>
In block: General Punctuation</p>
<p>Musical symbol double barline: 𝄁<br>
Unicode hexadecimal: 0x1d101<br>
In block: Musical Symbols</p>
<p>The second looks best on my machine in VSCode. (I'm using <a href="https://shapecatcher.com/">https://shapecatcher.com/</a>)</p>
<p>wow the first is slanted on my phone but vertical on laptop!</p>



<a name="281242947"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281242947" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281242947">(May 05 2022 at 01:46)</a>:</h4>
<p>I feel like the first one might be the one we want? It's the mathematical operator after all</p>



<a name="281243569"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281243569" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281243569">(May 05 2022 at 01:58)</a>:</h4>
<p>the first one is used in mathlib already, for vector norm</p>



<a name="281243585"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281243585" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281243585">(May 05 2022 at 01:59)</a>:</h4>
<p>...and the second one means fintype cardinality apparently</p>



<a name="281243654"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281243654" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281243654">(May 05 2022 at 02:00)</a>:</h4>
<p>probably it's fine to reuse the symbol</p>



<a name="281243726"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281243726" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281243726">(May 05 2022 at 02:01)</a>:</h4>
<p>actually you should not reuse the vector norm symbol, it's not localized (it's a notation typeclass)</p>



<a name="281243778"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281243778" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281243778">(May 05 2022 at 02:02)</a>:</h4>
<p>what about a symbol like )( ?</p>



<a name="281244269"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281244269" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281244269">(May 05 2022 at 02:11)</a>:</h4>
<p>I don't think the second one (‖) is declared as a notation? <a href="https://github.com/leanprover-community/mathlib/blob/f8c303eac93bd0f48dd4c9a98b8f5772af6be0c1/src/data/fintype/basic.lean#L1239">Here</a> indeed it's used to refer to cardinality, but that's definitely not standard.</p>



<a name="281244414"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281244414" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281244414">(May 05 2022 at 02:14)</a>:</h4>
<p>it's declared as a local notation in several files</p>



<a name="281244426"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281244426" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281244426">(May 05 2022 at 02:14)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/blob/0038a0436f689d37fd3ad00d69d617c338ae6028/src/data/fintype/card_embedding.lean#L17">https://github.com/leanprover-community/mathlib/blob/0038a0436f689d37fd3ad00d69d617c338ae6028/src/data/fintype/card_embedding.lean#L17</a></p>



<a name="281245128"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281245128" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281245128">(May 05 2022 at 02:27)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/13963">https://github.com/leanprover-community/mathlib/pull/13963</a></p>



<a name="281251798"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281251798" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281251798">(May 05 2022 at 04:45)</a>:</h4>
<p>I've got to say, I don't like the characterisation that we've had the incorrect definition. We've had a perfectly correct definition for a notion that usually has different notation. (And worse, that in some references the notation we used meant something else, although this was not the case for the cited reference.)</p>
<p>I absolutely agree it warrants fixing, but 1) I'm a bit annoyed as I feel like I'm being told my work on <code>pgame</code> was "wrong" (I agree the way I did things was ... not great), and 2) people may decide to misleadingly point at this as an example of a formalised library getting a definition wrong, and both of those are easily avoidable, I hope.</p>



<a name="281252543"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281252543" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281252543">(May 05 2022 at 05:00)</a>:</h4>
<p>In support of Scott's comment, as an outsider to the topic, I was puzzled at the beginning about what it meant that a definition was "wrong".  It took me a while to realize that it meant that it did not align with some other arbitrary choice of definition whose notation looked the same.</p>



<a name="281252811"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281252811" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281252811">(May 05 2022 at 05:05)</a>:</h4>
<p>I'd say it's worse than that, I couldn't find any source with the previous definition</p>



<a name="281252825"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281252825" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281252825">(May 05 2022 at 05:05)</a>:</h4>
<p>Though perhaps it might be better to say, we used one symbol when we should have used another</p>



<a name="281252902"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281252902" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281252902">(May 05 2022 at 05:06)</a>:</h4>
<p>What do you mean? The previous definition is exactly <code>⧏</code>, but with the symbol <code>&lt;</code> instead of <code>⧏</code>.</p>



<a name="281252923"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281252923" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281252923">(May 05 2022 at 05:06)</a>:</h4>
<p>e.g. it exactly matches the definition in ONAG, using the symbol <code>&lt;</code> for his <code>≰</code>.</p>



<a name="281253372"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281253372" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281253372">(May 05 2022 at 05:15)</a>:</h4>
<p>Yeah, that</p>



<a name="281253418"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281253418" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281253418">(May 05 2022 at 05:16)</a>:</h4>
<p>We used the wrong symbol, and thought we were deducing results about one symbol when in reality we were deducing results about the other</p>



<a name="281253628"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281253628" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281253628">(May 05 2022 at 05:20)</a>:</h4>
<p>(Sorry, maybe I'm just having a bad day. :-) I'm very glad this is fixed now: certainly your PR is a massive improvement and I'm embarrassed to have not understood this myself earlier.)</p>



<a name="281258933"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281258933" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281258933">(May 05 2022 at 06:51)</a>:</h4>
<p>Re notation: the reason I'm anti <code>&lt;|</code> is that specifically within the mathematician community people have said to me how much easier lean code is to read than code in other provers, and this seems like a perfect place to reinforce this: "oh look they use exactly the same symbol as in the literature".</p>



<a name="281301832"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281301832" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281301832">(May 05 2022 at 13:54)</a>:</h4>
<p>Oh don't worry, I didn't understand this either until I spoke with someone that did know about this and they kept telling me how I was wrong about my inequalities</p>



<a name="281301871"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/281301871" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#281301871">(May 05 2022 at 13:54)</a>:</h4>
<p>I've learned a lot about games with this refactor</p>



<a name="284966493"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/284966493" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#284966493">(Jun 04 2022 at 08:25)</a>:</h4>
<p><span class="user-mention" data-user-id="479359">@Michael Stoll</span> <span class="user-mention" data-user-id="459227">@Violeta Hernández</span> <br>
Good news! <a href="https://github.com/leanprover-community/mathlib/compare/surreal_mul_symm'?expand=1#diff-cfb19983c79209e00ac093e670e2db956ca48e00238011a5854479250cbaec67R318">Surreals now form a <code>linear_ordered_comm_ring</code></a> without <code>sorry</code>!</p>



<a name="284966501"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/284966501" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#284966501">(Jun 04 2022 at 08:25)</a>:</h4>
<p>Woooo!</p>



<a name="284966558"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/284966558" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#284966558">(Jun 04 2022 at 08:26)</a>:</h4>
<p>I'm unfortunately spread thin by finals at the moment, so I don't know when I'll have time to review this thoroughly. Might be until Wednesday...</p>



<a name="284991715"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/284991715" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#284991715">(Jun 04 2022 at 17:54)</a>:</h4>
<p>I'm puzzled by the module docstring saying "<a href="https://github.com/leanprover-community/mathlib/blob/aa7d90bcf730db3bcbe73c23ec2d738268d8fde0/src/set_theory/surreal/basic.lean#L20">the surreals form a complete ordered field</a>". I don't think they form a <a href="https://leanprover-community.github.io/mathlib_docs/find/conditionally_complete_linear_order">docs#conditionally_complete_linear_order</a>, because for any increasing sequence with an upper bound, the surreal number with the sequence as left options and the upper bound as the unique right option is still an upper bound but smaller than the given upper bound, so there's no least upper bound. Git traces back to <a href="https://github.com/leanprover-community/mathlib/pull/1274">#1274</a> by <span class="user-mention" data-user-id="110087">@Scott Morrison</span>.</p>



<a name="284992722"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/284992722" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#284992722">(Jun 04 2022 at 18:16)</a>:</h4>
<p>All complete ordered fields are isomorphic to R, no?</p>



<a name="284993872"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/284993872" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#284993872">(Jun 04 2022 at 18:44)</a>:</h4>
<p>Archimedean?</p>



<a name="284994114"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/284994114" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#284994114">(Jun 04 2022 at 18:51)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/3292">#3292</a></p>



<a name="284994131"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/284994131" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#284994131">(Jun 04 2022 at 18:51)</a>:</h4>
<p>(I'm working on it, the head PR is currently <a href="https://github.com/leanprover-community/mathlib/pull/14307">#14307</a>)</p>



<a name="284994682"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/284994682" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#284994682">(Jun 04 2022 at 19:03)</a>:</h4>
<p>It doesn't seem to require it from the sources I see, I guess completeness implies archimedean</p>



<a name="284994694"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/284994694" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#284994694">(Jun 04 2022 at 19:03)</a>:</h4>
<p>(with order, ofc, else p-adics are a counterexample)</p>



<a name="284995183"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/284995183" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Stevens <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#284995183">(Jun 04 2022 at 19:14)</a>:</h4>
<p>Yes - see <a href="https://mathoverflow.net/questions/362991/who-first-characterized-the-real-numbers-as-the-unique-complete-ordered-field">https://mathoverflow.net/questions/362991/who-first-characterized-the-real-numbers-as-the-unique-complete-ordered-field</a>; to paraphrase, if not Archimedean then the set of naturals is bounded above so has a least upper bound; but any upper bound of the natural numbers is not a least upper bound because you can subtract 1 from it.</p>



<a name="284996443"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/284996443" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#284996443">(Jun 04 2022 at 19:41)</a>:</h4>
<p>I think there's the possibility that this is a complete ordered field on a technicality, just like the ordinals are a lattice on a technicality</p>



<a name="284996450"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/284996450" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#284996450">(Jun 04 2022 at 19:41)</a>:</h4>
<p>i.e. every <strong>small</strong> (read ZFC) set of surreals has an infimum and supremum</p>



<a name="284996457"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/284996457" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#284996457">(Jun 04 2022 at 19:41)</a>:</h4>
<p>Even then, unless I misunderstand something, that docstring shouldn't be there</p>



<a name="284997410"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/284997410" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#284997410">(Jun 04 2022 at 20:02)</a>:</h4>
<p>Ah yes, Archimedean is implied by the rest of the hypotheses: thanks for the link!</p>



<a name="285000577"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/285000577" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#285000577">(Jun 04 2022 at 21:21)</a>:</h4>
<p>The surreals are most certainly not archimedean. The confusion is imprecision in the language -- "complete" can mean more than one thing. <a href="https://en.wikipedia.org/wiki/Real_number#%22The_complete_ordered_field%22">Wikipedia</a> says something about the issue.</p>



<a name="285001065"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/285001065" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Stuart Presnell <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#285001065">(Jun 04 2022 at 21:34)</a>:</h4>
<p>As discussed here: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/reals.20are.20unique.20complete.20ordered.20field.html#131161921">https://leanprover-community.github.io/archive/stream/116395-maths/topic/reals.20are.20unique.20complete.20ordered.20field.html#131161921</a></p>



<a name="285004050"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/285004050" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Stevens <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#285004050">(Jun 04 2022 at 22:57)</a>:</h4>
<p>As a tenuously-related aside which I'm only making because I can never resist the opportunity to plug this paper, Real Analysis In Reverse (<a href="https://arxiv.org/pdf/1204.4483.pdf">https://arxiv.org/pdf/1204.4483.pdf</a>) uses the surreals (or more precisely those with birthday less than $\omega_1$) to prove that "nested bounded closed intervals have nonempty intersection" does not imply "Dedekind complete" in the presence of the other ordered field axioms. It also warns that "It’s easy for students to appeal to the Archimedean Property without realizing they are doing so, especially because concrete examples of non-Archimedean ordered fields are unfamiliar to them."</p>



<a name="285014690"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/285014690" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#285014690">(Jun 05 2022 at 03:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="459227">Violeta Hernández</span> <a href="#narrow/stream/116395-maths/topic/Surreal.20numbers/near/284996443">said</a>:</p>
<blockquote>
<p>I think there's the possibility that this is a complete ordered field on a technicality, just like the ordinals are a lattice on a technicality</p>
</blockquote>
<p>Surreals are <em>not</em> a complete ordered field on a technicality, namely that they aren't a set and a field is a set</p>



<a name="285014793"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/285014793" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#285014793">(Jun 05 2022 at 03:33)</a>:</h4>
<p>If you are in a setting (like lean) where the totality of surreals can be discussed, then they are a field but not they are still not complete because there are (proper) subclasses of the surreals which have no supremum</p>



<a name="285014844"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/285014844" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#285014844">(Jun 05 2022 at 03:34)</a>:</h4>
<p>it is only if you allow the field itself to be proper but not the subsets considered in the definition of <code>Inf</code> that they appear "complete"</p>



<a name="285014924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/285014924" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#285014924">(Jun 05 2022 at 03:36)</a>:</h4>
<p>Similarly, the ordinals are a lattice but not a complete lattice unless you bastardize the definition in some way</p>



<a name="285015054"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/285015054" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#285015054">(Jun 05 2022 at 03:39)</a>:</h4>
<blockquote>
<p>it is only if you allow the field itself to be proper but not the subsets considered in the definition of Inf that they appear "complete"</p>
</blockquote>
<p><code>ordinal</code> and <code>cardinal</code> are (large) complete linear orders in this sense; the instances <a href="https://leanprover-community.github.io/mathlib_docs/find/ordinal.conditionally_complete_linear_order_bot">docs#ordinal.conditionally_complete_linear_order_bot</a> and <a href="https://leanprover-community.github.io/mathlib_docs/find/cardinal.conditionally_complete_linear_order_bot">docs#cardinal.conditionally_complete_linear_order_bot</a> say that any (possibly large) subsets with an upper bound has a least upper bound, and separately we know that any small subset has an upper bound.</p>
<p>In surreals, any small subset still has an upper bound (just take all elements of the subset as left options), but my argument above shows it has a least upper bound iff it has a maximal element, so surreals aren't even a <a href="https://leanprover-community.github.io/mathlib_docs/find/conditionally_complete_linear_order">docs#conditionally_complete_linear_order</a>.</p>



<a name="285015203"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/285015203" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#285015203">(Jun 05 2022 at 03:42)</a>:</h4>
<p>This conditional completeness looks the same as <a href="https://en.wikipedia.org/wiki/Real_number#Axiomatic_approach">Dedekind completeness in Wikipedia</a>.</p>



<a name="285015239"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/285015239" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#285015239">(Jun 05 2022 at 03:43)</a>:</h4>
<p>I am undetermined whether surreals still can be complete in the uniform space sense (it hasn't become my second nature to unpack definitions via filters), but I feel it's not (even without uniqueness, as in the mathlib definition <a href="https://leanprover-community.github.io/mathlib_docs/find/complete_space">docs#complete_space</a>).</p>



<a name="285015368"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/285015368" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#285015368">(Jun 05 2022 at 03:46)</a>:</h4>
<p>A good example of a set without a supremum in surreals is the naturals</p>



<a name="285015373"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/285015373" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#285015373">(Jun 05 2022 at 03:46)</a>:</h4>
<p>If x is an upper bound, so is x - 1</p>



<a name="285015530"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/285015530" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#285015530">(Jun 05 2022 at 03:51)</a>:</h4>
<p>Yeah, and my argument gives {0,1,2, ... | x} is also an upper bound: it's a surreal because all left options are smaller than the unique right option x, because 0,1,2,... is strictly increasing, so an upper bound must be a strict upper bound (with &lt; instead of ≤; same holds for any subset without maximal element). And any surreal is greater than all its left options, so it's an upper bound. Any surreal is less than all its right options, so it's smaller than x.</p>



<a name="285015572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/285015572" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#285015572">(Jun 05 2022 at 03:52)</a>:</h4>
<p><del>{0,1,2, ... | x} might be exactly equal to x - 1 ...</del> No, not necessarily.</p>



<a name="285019843"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/285019843" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#285019843">(Jun 05 2022 at 05:56)</a>:</h4>
<p>This discussion has clarified a lot of uneasiness that I always had about which common assumptions characterise the reals up to order isomorphism!  I'm also happy that Archimedean plays a role in this and that "complete" also has several meanings!</p>



<a name="285026568"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/285026568" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#285026568">(Jun 05 2022 at 09:09)</a>:</h4>
<p>An example "one level down" of the size issue which Mario was flagging would be that if you only believed in finite sets, but could imagine the rationals existed as some kind of "class" (each element in it can be described using finite sets, and you don't attempt to describe all the elements of Q at once in your language but use predicates instead) then Q is "complete" for you because every nonempty subset of Q is finite in your world and hence has a least upper bound.</p>



<a name="285049064"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/285049064" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#285049064">(Jun 05 2022 at 18:26)</a>:</h4>
<p>It seems well-known that <a href="https://en.wikipedia.org/wiki/Surreal_number#Gaps_and_continuity">the surreals contain gaps</a>, so morally they shouldn't be complete in any sense, and indeed it's also not complete as a uniform space (Cauchy completeness, with uniform structure from the topological group structure with the order topology). This is stated in the abstract of <a href="https://arxiv.org/abs/1307.7392v3">https://arxiv.org/abs/1307.7392v3</a>, and p.18 onwards shows any Cauchy sequence indexed by the class of all ordinals either converge to a surreal or to a Type Ia gap. The mathlib definition <a href="https://leanprover-community.github.io/mathlib_docs/find/complete_space">docs#complete_space</a> requires that every Cauchy filter converges to some surreal, which <a href="https://math.stackexchange.com/a/104814/12932">is equivalent to that every Cauchy net (possibly indexed by a proper class) converges</a>, so surreals aren't a complete_space by the mathlib definition. </p>
<p>However, if we restrict to Cauchy nets indexed by sets, these do converge, because they are all eventually constant! For any net <em>f</em> that is not eventually constant and <em>i</em> an element of the indexing set, <em>{|f j - f k|}_{j,k ≥ i}</em> contains a positive surreal <em>ε_i</em>, and the surreal <em>ε = {0 | ε_i for all i in indexing set}</em> is positive and smaller than all <em>ε_i</em>, i.e. for any <em>i</em>, there are some <em>j, k ≥ i</em> such that <em>|f j - f k| &gt; ε_i &gt; ε</em>, so <em>f</em> is not Cauchy. Therefore, we can say the surreals are "small-complete" in the uniform space sense (similar to the "conditional" completeness of ordinals and cardinals, and reminiscent of <a href="https://ncatlab.org/nlab/show/complete+category#definition">small-completeness in category theory</a>.</p>



<a name="285156717"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/285156717" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#285156717">(Jun 06 2022 at 19:10)</a>:</h4>
<p>Alright, I've got some time to spare!</p>



<a name="285157438"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/285157438" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#285157438">(Jun 06 2022 at 19:15)</a>:</h4>
<p>First question, what's up with <code>mul_option</code>? Seems like a very ad-hoc definition and its lemmas are even worse</p>



<a name="285157913"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/285157913" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#285157913">(Jun 06 2022 at 19:18)</a>:</h4>
<p>Another complaint I want to get out of the way quickly: I don't think we should borrow the notation from the paper so literally. For someone just reading through <code>mathlib</code>, it's going to seem very out of place that we use <code>P1</code>, <code>P2</code>, and <code>P4</code> as the names of our prepositions (instead of <code>P3</code> for the last one), and <code>thm8</code> isn't going to make any sense either.</p>



<a name="285158023"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/285158023" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#285158023">(Jun 06 2022 at 19:19)</a>:</h4>
<p>Oh wait, you do use <code>P3</code> too, nevermind then</p>



<a name="285158696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/285158696" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#285158696">(Jun 06 2022 at 19:24)</a>:</h4>
<p>Minor remark, I don't think you use <code>abel</code> in the hydra file</p>



<a name="285158747"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/285158747" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#285158747">(Jun 06 2022 at 19:24)</a>:</h4>
<p>I'll PR the minor and uncontroversial changes from that file now, so that the final diff is smaller</p>



<a name="285159795"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/285159795" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#285159795">(Jun 06 2022 at 19:32)</a>:</h4>
<p>Reading through more of the PR, I think I see what purpose <code>mul_option</code> plays. I guess it can stay, but it should either be made into a private, auxiliary definition, or if it has any potential of being useful outside of the surreal multiplication proof, it should have a good docstring explaining how that is</p>



<a name="285159950"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/285159950" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#285159950">(Jun 06 2022 at 19:33)</a>:</h4>
<p>I think the <code>left_moves_mul_iff</code> and <code>right_moves_mul_iff</code> lemmas should be made into induction principles rather than equivalences, kind of how I did on <a href="https://github.com/leanprover-community/mathlib/pull/14345">#14345</a>. Also, it would be nice if the theorem names made reference to the fact you're working with games and not pre-games.</p>



<a name="285160138"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/285160138" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#285160138">(Jun 06 2022 at 19:35)</a>:</h4>
<p>I don't think there's a need for <code>le_of_forall_lt</code>. The lemmas <code>le_of_forall_lf</code> and <code>lt.lf</code> should get you there much more easily.</p>



<a name="285160381"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/285160381" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#285160381">(Jun 06 2022 at 19:37)</a>:</h4>
<p>I wonder if <code>is_option_neg</code> would be better stated as <code>: is_option (-x) (-y) ↔ is_option x y</code>. What's the general strategy for these lemmas on negations where you can write it both ways? Surely the rest of mathlib has some tips here</p>



<a name="285160512"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/285160512" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#285160512">(Jun 06 2022 at 19:38)</a>:</h4>
<p>I think your proposal of making <code>numeric</code> into a set should be its own separate PR. I'll give you the chance to do it, unless you want me to do it for you</p>



<a name="285160742"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/285160742" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#285160742">(Jun 06 2022 at 19:40)</a>:</h4>
<p>Minor typo: "because we needs show P1, P2..."</p>



<a name="285160949"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/285160949" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#285160949">(Jun 06 2022 at 19:42)</a>:</h4>
<p>Thanks for taking a look! I just pushed further cleanup including docstring for mul_option. I'll address other comments later tonight if you haven't figured them out by then.</p>



<a name="285161057"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/285161057" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#285161057">(Jun 06 2022 at 19:43)</a>:</h4>
<p>I was just about to say, the rest of the PR looks very very clean. It's amazing you managed to organize such a complicated statement in such a clean way!</p>



<a name="285182037"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/285182037" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#285182037">(Jun 06 2022 at 22:38)</a>:</h4>
<blockquote>
<p>Another complaint I want to get out of the way quickly: I don't think we should borrow the notation from the paper so literally. For someone just reading through mathlib, it's going to seem very out of place that we use P1, P2, and P4 as the names of our prepositions (instead of P3 for the last one), and thm8 isn't going to make any sense either.</p>
</blockquote>
<p>With a detailed section docstring, I guess this should be okay? When working on a hard proof, you don't want to write very long names that are fully descriptive. Enclosing these lemmas/defs not supposed to be used elsewhere in a arcane namespace is enough to prevent clashing with these short names. Final results ready for consumption are extracted to the <code>numeric</code> namespace, like <code>mul_pos</code> (basically P3), <code>mul_congr_left</code> (P2), and <code>mul</code> (P1).</p>
<blockquote>
<p>I don't think there's a need for le_of_forall_lt. The lemmas le_of_forall_lf and lt.lf should get you there much more easily.</p>
</blockquote>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/le_of_forall_lt">docs#le_of_forall_lt</a> already exists and takes the extraneous <code>numeric</code> hypotheses, so I'm just removing those hypotheses and move it to <code>game/pgame</code>.</p>
<blockquote>
<p>I wonder if is_option_neg would be better stated as : <code>is_option (-x) (-y) ↔ is_option x y</code>.</p>
</blockquote>
<p>It seems it's easier to use this way. You might experiment with the other way and see what it takes to fix everything. When making decisions about forms of lemmas (e.g. whether to take quotient into <code>game</code> or not, e.g. in P2), I chose the form that makes the most proofs the shortest.</p>
<blockquote>
<p>I think your proposal of making <code>numeric</code> into a set should be its own separate PR. I'll give you the chance to do it, unless you want me to do it for you</p>
</blockquote>
<p>It's already done in this branch. If uncontroversial (I assume), might just go into mathlib with the same PR.</p>
<p>Regarding <code>mul_option</code>, it would be easier to show <code>left/right_moves_mul_iff</code> if we first prove the lemmas that the left options of the second kind/right options of both kinds are equivalent to (possibly negation of) <code>mul_option</code>s.</p>



<a name="285184835"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/285184835" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#285184835">(Jun 06 2022 at 23:08)</a>:</h4>
<p>Alright, you've sold me on the P1 and such names, after all these are just auxiliary constructions</p>



<a name="285184853"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/285184853" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#285184853">(Jun 06 2022 at 23:08)</a>:</h4>
<p>I still think <code>thm8</code> is a bad namespace name</p>



<a name="285184885"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/285184885" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#285184885">(Jun 06 2022 at 23:09)</a>:</h4>
<p>Why not something more descriptive like <code>surreal_mul</code>? Not like we're going to use this namespace much anyways</p>



<a name="285185011"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/285185011" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#285185011">(Jun 06 2022 at 23:11)</a>:</h4>
<p>As for <code>le_of_forall_lt</code>, I remember why I added it now. It makes working with surreals a tad easier. The lemma can and should stay, I'll move and golf it later today</p>



<a name="285185158"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/285185158" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#285185158">(Jun 06 2022 at 23:12)</a>:</h4>
<p>I do still think <code>numeric</code> turning into a set should be a separate PR, since it has a very different aim and scope to the rest of this</p>



<a name="285185232"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/285185232" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#285185232">(Jun 06 2022 at 23:13)</a>:</h4>
<p>And for <code>mul_option</code>, can you describe what the idea is? Want to make sure we're on the same track here</p>



<a name="285186626"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/285186626" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#285186626">(Jun 06 2022 at 23:34)</a>:</h4>
<p><code>mul_option</code> is  what makes the main idea (of exploiting symmetry) possible; because all left/right options of the surreal product are of the same form, whenever we want to prove a statement about those options, we can do it uniformly, by applying the same lemma. For example, the proof of P1 consists of <a href="https://github.com/leanprover-community/mathlib/blob/e083869144e73001f82be042085da209e0c001cd/src/set_theory/surreal/basic.lean#L457-L461">four applications of <code>mul_option_lt</code></a>, the proof of P2 consists of <a href="https://github.com/leanprover-community/mathlib/blob/e083869144e73001f82be042085da209e0c001cd/src/set_theory/surreal/basic.lean#L549-L554">four applications of <code>mul_option_lt_mul_of_equiv</code></a>, and the proof of P4 also requires <a href="https://github.com/leanprover-community/mathlib/blob/e083869144e73001f82be042085da209e0c001cd/src/set_theory/surreal/basic.lean#L618-L619">four statements of the form <code>mul_options_lt_mul</code></a>.<br>
I envision that <code>mul_option</code> might also be used to golf some existing proofs.</p>
<p>Will be back in 1.5-2 hours.</p>



<a name="285196082"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/285196082" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#285196082">(Jun 07 2022 at 02:21)</a>:</h4>
<p>Alright I've renamed <code>thm8</code> to <code>surreal_mul</code> ... and opened <a href="https://github.com/leanprover-community/mathlib/pull/14585">#14585</a> from <a href="https://github.com/leanprover-community/mathlib/tree/surreal_set">branch#surreal_set</a> (it also does some other stuff now).</p>



<a name="289231496"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/289231496" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#289231496">(Jul 11 2022 at 18:29)</a>:</h4>
<p>I'll attempt to redefine <code>mul</code> in terms of <code>mul_option</code>, see if that makes anything simpler</p>



<a name="289231620"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/289231620" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#289231620">(Jul 11 2022 at 18:30)</a>:</h4>
<p>I imagine we'll have to <code>unfold</code> it to prove all the basic theorems, but it simplifies the surreal multiplication proof, then it should be a net gain</p>



<a name="289231825"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Surreal%20numbers/near/289231825" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Surreal.20numbers.html#289231825">(Jul 11 2022 at 18:32)</a>:</h4>
<p>By the way, I've taken many of the todos and improvements in your branch and PR'd them separately</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>