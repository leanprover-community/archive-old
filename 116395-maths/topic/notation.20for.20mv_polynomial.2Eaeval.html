---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/notation.20for.20mv_polynomial.2Eaeval.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/notation.20for.20mv_polynomial.2Eaeval.html">notation for mv_polynomial.aeval</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="204553041"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/notation%20for%20mv_polynomial.aeval/near/204553041" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/notation.20for.20mv_polynomial.2Eaeval.html#204553041">(Jul 21 2020 at 14:19)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> has complained about the notation for <code>aeval</code>, evaluating a <code>mv_polynomial</code> in an algebra. <code>aeval v f</code> is morally just <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>v</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(v)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mclose">)</span></span></span></span>. What do people think about introducing localized notation for this? And are there analogous notations in mathlib that I'm not aware of? One proposal, <code>f áµƒ v:= aeval v f</code></p>



<a name="204555228"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/notation%20for%20mv_polynomial.aeval/near/204555228" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/notation.20for.20mv_polynomial.2Eaeval.html#204555228">(Jul 21 2020 at 14:38)</a>:</h4>
<p>I suppose a coercion to an algebra hom is out of the question? I guess we don't know the target...</p>



<a name="204555320"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/notation%20for%20mv_polynomial.aeval/near/204555320" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/notation.20for.20mv_polynomial.2Eaeval.html#204555320">(Jul 21 2020 at 14:39)</a>:</h4>
<p>What's wrong with <code>f(v)</code>? Is that overloaded? Can we do that in Lean 4?</p>



<a name="204557001"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/notation%20for%20mv_polynomial.aeval/near/204557001" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/notation.20for.20mv_polynomial.2Eaeval.html#204557001">(Jul 21 2020 at 14:51)</a>:</h4>
<p>Naively adding a <code>coe_to_fn</code> instance seems to loop. I'm a little skeptical about getting that to work.</p>



<a name="204557051"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/notation%20for%20mv_polynomial.aeval/near/204557051" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/notation.20for.20mv_polynomial.2Eaeval.html#204557051">(Jul 21 2020 at 14:51)</a>:</h4>
<p><code>f(v)</code> is overloaded with normal function application, it would need to be handled by a coercion.</p>



<a name="204557249"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/notation%20for%20mv_polynomial.aeval/near/204557249" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/notation.20for.20mv_polynomial.2Eaeval.html#204557249">(Jul 21 2020 at 14:52)</a>:</h4>
<p>Can you coerce to a dependent function?</p>



<a name="204558983"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/notation%20for%20mv_polynomial.aeval/near/204558983" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/notation.20for.20mv_polynomial.2Eaeval.html#204558983">(Jul 21 2020 at 15:04)</a>:</h4>
<p>In principle yes, in this case I'm not sure how to do it without instance loops.</p>



<a name="204560135"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/notation%20for%20mv_polynomial.aeval/near/204560135" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/notation.20for.20mv_polynomial.2Eaeval.html#204560135">(Jul 21 2020 at 15:12)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/116395-maths/topic/notation.20for.20mv_polynomial.2Eaeval/near/204555228">said</a>:</p>
<blockquote>
<p>I suppose a coercion to an algebra hom is out of the question? I guess we don't know the target...</p>
</blockquote>
<p><code>aeval v</code> is an algebra hom (right now, in mathlib).</p>



<a name="204560190"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/notation%20for%20mv_polynomial.aeval/near/204560190" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/notation.20for.20mv_polynomial.2Eaeval.html#204560190">(Jul 21 2020 at 15:13)</a>:</h4>
<p>But <code>aeval</code> is an ugly combo of ascii characters, and in <code>aeval v f</code> the order of <code>f</code> and <code>v</code> is backwards from <code>f(v)</code>.</p>



<a name="204560858"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/notation%20for%20mv_polynomial.aeval/near/204560858" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/notation.20for.20mv_polynomial.2Eaeval.html#204560858">(Jul 21 2020 at 15:18)</a>:</h4>
<p><code>coe_to_fn</code> sounds problematic since we already have a <code>coe_to_fn</code> on <code>finsupp</code> that applies (which would give the coefficients), and <code>polynomial</code> is not irreducible</p>



<a name="204561187"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/notation%20for%20mv_polynomial.aeval/near/204561187" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/notation.20for.20mv_polynomial.2Eaeval.html#204561187">(Jul 21 2020 at 15:20)</a>:</h4>
<p>Even worse there's elaboration order fun, since it can't figure out from the polynomial what ring it's supposed to be an algebra over. I think this makes the <code>coe_to_fn</code> instance impossible and a <code>has_coe</code> instance still loops, it doesn't pick up the ring from the target type.</p>



<a name="204561776"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/notation%20for%20mv_polynomial.aeval/near/204561776" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/notation.20for.20mv_polynomial.2Eaeval.html#204561776">(Jul 21 2020 at 15:23)</a>:</h4>
<p>Oh yeah, that makes it even worse.</p>



<a name="204561918"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/notation%20for%20mv_polynomial.aeval/near/204561918" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/notation.20for.20mv_polynomial.2Eaeval.html#204561918">(Jul 21 2020 at 15:24)</a>:</h4>
<p>Do we need an <code>eval</code> apart from <code>aeval</code> anyway? There will always be an instance for <code>[algebra R R]</code>, and any <code>algebra_map</code> arising from it will be <code>simp</code>ed away hopefully.</p>



<a name="204562133"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/notation%20for%20mv_polynomial.aeval/near/204562133" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/notation.20for.20mv_polynomial.2Eaeval.html#204562133">(Jul 21 2020 at 15:26)</a>:</h4>
<p>So we could delete <code>eval</code> (but not the lemmas?) and rename <code>aeval</code> to <code>eval</code>. If we don't add notation, that should clean up the situation.</p>



<a name="204564640"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/notation%20for%20mv_polynomial.aeval/near/204564640" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/notation.20for.20mv_polynomial.2Eaeval.html#204564640">(Jul 21 2020 at 15:44)</a>:</h4>
<p>A quick hack indicates yes: we can just get rid of <code>eval</code> and rename <code>aeval</code> to <code>eval</code>. But there is some painful refactoring to do in that case...</p>



<a name="204564819"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/notation%20for%20mv_polynomial.aeval/near/204564819" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/notation.20for.20mv_polynomial.2Eaeval.html#204564819">(Jul 21 2020 at 15:45)</a>:</h4>
<p>Hah, I was just typing. It sounds plausible but it's a huge refactor.</p>



<a name="204565304"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/notation%20for%20mv_polynomial.aeval/near/204565304" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/notation.20for.20mv_polynomial.2Eaeval.html#204565304">(Jul 21 2020 at 15:49)</a>:</h4>
<p>Ah, a first snag: we explicitly want <code>R</code> to be noncommutative <a href="https://github.com/leanprover-community/mathlib/blob/master/src/data/polynomial/algebra_map.lean#L237">here</a>, but an <code>R</code>-algebra requires <code>R</code> to be commutative.</p>



<a name="204566699"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/notation%20for%20mv_polynomial.aeval/near/204566699" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/notation.20for.20mv_polynomial.2Eaeval.html#204566699">(Jul 21 2020 at 16:01)</a>:</h4>
<p>Yup... )-;</p>



<a name="204566961"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/notation%20for%20mv_polynomial.aeval/near/204566961" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/notation.20for.20mv_polynomial.2Eaeval.html#204566961">(Jul 21 2020 at 16:03)</a>:</h4>
<p>I put my experiment <a href="https://github.com/Vierkantor/mathlib/tree/aeval_to_eval">online here</a> for anyone who wants to continue.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>