---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/set.2Efinite.2Efintype.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Efinite.2Efintype.html">set.finite.fintype</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="186803197"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.finite.fintype/near/186803197" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Efinite.2Efintype.html#186803197">(Jan 28 2020 at 17:05)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">set</span><span class="bp">.</span><span class="n">finite</span>

<span class="kn">open</span> <span class="n">set</span>

<span class="c">/-</span><span class="cm"> From data.set.finite:</span>

<span class="cm">noncomputable instance finite.fintype {s : set α} (h : finite s) : fintype s :=</span>
<span class="cm">classical.choice h</span>

<span class="cm">-/</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">hs</span> <span class="o">:</span> <span class="n">finite</span> <span class="n">s</span><span class="o">)</span> <span class="o">:</span> <span class="n">fintype</span> <span class="n">s</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">apply_instance</span>
<span class="c">/-</span><span class="cm"></span>
<span class="cm">tactic.mk_instance failed to generate instance for</span>
<span class="cm">  fintype ↥s</span>
<span class="cm">state:</span>
<span class="cm">α : Type ?,</span>
<span class="cm">s : set α,</span>
<span class="cm">hs : finite s</span>
<span class="cm">⊢ fintype ↥s</span>
<span class="cm">-/</span>

<span class="n">noncomputable</span> <span class="kn">example</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">hs</span> <span class="o">:</span> <span class="n">finite</span> <span class="n">s</span><span class="o">)</span> <span class="o">:</span> <span class="n">fintype</span> <span class="n">s</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">apply_instance</span> <span class="c1">-- same error</span>

<span class="n">noncomputable</span> <span class="n">theory</span>
<span class="n">open_locale</span> <span class="n">classical</span>
<span class="n">local</span> <span class="n">attribute</span> <span class="o">[</span><span class="kn">instance</span><span class="o">,</span> <span class="n">priority</span> <span class="mi">10000</span><span class="o">]</span> <span class="n">set</span><span class="bp">.</span><span class="n">finite</span><span class="bp">.</span><span class="n">fintype</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">hs</span> <span class="o">:</span> <span class="n">finite</span> <span class="n">s</span><span class="o">)</span> <span class="o">:</span> <span class="n">fintype</span> <span class="n">s</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">apply_instance</span> <span class="c1">-- same error</span>
</pre></div>


<p>The instance <code>finite s -&gt; fintype s</code> -- I can't ever get it to fire. I just changed <code>instance</code> to <code>def</code> in mathlib and recompiled, and it seems to compile fine (I haven't finished yet but it's been running for a while). Should it be a <code>def</code>?</p>



<a name="186804089"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.finite.fintype/near/186804089" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Efinite.2Efintype.html#186804089">(Jan 28 2020 at 17:15)</a>:</h4>
<p>I think it should</p>



<a name="186844188"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.finite.fintype/near/186844188" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Efinite.2Efintype.html#186844188">(Jan 29 2020 at 00:06)</a>:</h4>
<p>We could detect this with a linter, right? <code>hs</code> is not a type class argument (and <code>finite</code> is not even a class--does this matter?) and nothing depends on <code>hs</code> so there is no way it could ever be inferred, either.</p>



<a name="186844358"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.finite.fintype/near/186844358" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Efinite.2Efintype.html#186844358">(Jan 29 2020 at 00:09)</a>:</h4>
<p>I like the idea of checking this with a linter. It can definitely be done</p>



<a name="186844437"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.finite.fintype/near/186844437" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Efinite.2Efintype.html#186844437">(Jan 29 2020 at 00:10)</a>:</h4>
<p>it does matter that <code>finite</code> is not a class</p>



<a name="186844575"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.finite.fintype/near/186844575" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Efinite.2Efintype.html#186844575">(Jan 29 2020 at 00:13)</a>:</h4>
<p>The simplest way to make the linter work is to create a replica of the instance type and try to prove it by <code>apply_instance</code></p>



<a name="186844691"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.finite.fintype/near/186844691" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Efinite.2Efintype.html#186844691">(Jan 29 2020 at 00:15)</a>:</h4>
<p>this might have false negatives for "transitivity" instances like <code>foo A B -&gt; foo B C -&gt; foo A C</code> (which should be discouraged)</p>



<a name="249575346"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.finite.fintype/near/249575346" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolás Ojeda Bär <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Efinite.2Efintype.html#249575346">(Aug 16 2021 at 11:16)</a>:</h4>
<p>I don't underestand the following error (something to do with universes?). Any ideas?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.set.finite</span>

<span class="kd">universe</span> <span class="n">u</span>

<span class="kd">def</span> <span class="n">foo</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">hs</span> <span class="o">:</span> <span class="n">set.finite</span> <span class="n">s</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="o">:=</span>
<span class="n">fintype.card</span> <span class="o">(</span><span class="n">set.finite.fintype</span> <span class="n">hs</span><span class="o">)</span>
<span class="c">/-</span><span class="cm"></span>
<span class="cm">type mismatch at application</span>
<span class="cm">  fintype.card hs.fintype</span>
<span class="cm">term</span>
<span class="cm">  hs.fintype</span>
<span class="cm">has type</span>
<span class="cm">  fintype ↥s : Type u</span>
<span class="cm">but is expected to have type</span>
<span class="cm">  Type ? : Type (?+1)</span>
<span class="cm">-/</span>
</code></pre></div>



<a name="249575392"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.finite.fintype/near/249575392" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Efinite.2Efintype.html#249575392">(Aug 16 2021 at 11:17)</a>:</h4>
<p><code>hs</code> is a proof that a set is finite. <code>fintype.card</code> wants the type itself, not a proof that it is finite.</p>



<a name="249575414"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.finite.fintype/near/249575414" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Efinite.2Efintype.html#249575414">(Aug 16 2021 at 11:17)</a>:</h4>
<p>The function you're looking for already exists and is called <del>something like</del> nat.card</p>



<a name="249575469"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.finite.fintype/near/249575469" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Efinite.2Efintype.html#249575469">(Aug 16 2021 at 11:18)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/nat.card">docs#nat.card</a> is about types not sets,  but that doesn't really matter.</p>



<a name="249575519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.finite.fintype/near/249575519" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Efinite.2Efintype.html#249575519">(Aug 16 2021 at 11:19)</a>:</h4>
<p>I guess this might be illustrative:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">foo</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">hs</span> <span class="o">:</span> <span class="n">set.finite</span> <span class="n">s</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="o">:=</span>
<span class="bp">@</span><span class="n">fintype.card</span> <span class="n">_</span> <span class="n">hs.fintype</span>
</code></pre></div>



<a name="249575615"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.finite.fintype/near/249575615" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Efinite.2Efintype.html#249575615">(Aug 16 2021 at 11:21)</a>:</h4>
<p>So welcome to type theory. If X is a type then the type of subsets of X is called <code>set X</code> and a term <code>S : set X</code> is a <em>term</em> not a type. In particular you can't in theory talk about <code>x : S</code> to mean "x is in S", you need to do <code>x : X</code> and then <code>hxS : x ∈ S</code>.</p>



<a name="249575755"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.finite.fintype/near/249575755" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Efinite.2Efintype.html#249575755">(Aug 16 2021 at 11:23)</a>:</h4>
<p><code>fintype</code> is a typeclass on types meaning "this type is finite". <code>set.finite</code> is a function on terms meaning "this set is finite". That weird <code>↥</code> arrow in your error message is an automatically inserted coercion meaning "I know it's a term, but I'm promoting it to a type because that's the only way to make this make sense".</p>



<a name="249575921"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.finite.fintype/near/249575921" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Efinite.2Efintype.html#249575921">(Aug 16 2021 at 11:25)</a>:</h4>
<p>Note also Oliver's trick of <code>hs.fintype</code> being notation for <code>set.finite.fintype hs</code> because <code>hs</code> has type <code>set.finite ...</code> -- this trick is called dot notation. I'm just mentioning these things because I know you're just starting in Lean -- sorry if you figured them all out already!</p>



<a name="249576112"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.finite.fintype/near/249576112" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Efinite.2Efintype.html#249576112">(Aug 16 2021 at 11:27)</a>:</h4>
<p>Conscious that <span class="user-mention" data-user-id="243843">@Nicolás Ojeda Bär</span> is newish I'd like to offer reassurance that things get easier and formalisation quickly becomes huge fun. At the beginning it can feel annoying that there seem to be obstacles everywhere but in time the problems evaporate.</p>



<a name="249576234"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.finite.fintype/near/249576234" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolás Ojeda Bär <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Efinite.2Efintype.html#249576234">(Aug 16 2021 at 11:29)</a>:</h4>
<p>Thanks for the explanations <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> , they <em>are</em> useful!</p>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/116395-maths/topic/set.2Efinite.2Efintype/near/249575392">said</a>:</p>
<blockquote>
<p><code>hs</code> is a proof that a set is finite. <code>fintype.card</code> wants the type itself, not a proof that it is finite.</p>
</blockquote>
<p>But I <em>am</em> passing a type, right? That's what <code>set.finite.fintype</code> is supposed to produce... However it only works if I the <code>noncomputable</code> annotation (with the explicit <code>_</code> placeholder), as suggested by Oliver:</p>
<p><span class="user-mention silent" data-user-id="240862">Oliver Nash</span> <a href="#narrow/stream/116395-maths/topic/set.2Efinite.2Efintype/near/249575519">said</a>:</p>
<blockquote>
<p>noncomputable def foo (α : Type u) (s : set α) (hs : set.finite s) : ℕ :=<br>
@fintype.card _ hs.fintype</p>
</blockquote>
<p>Is there a simple explanation why it doesn't typecheck if I don't add the <code>noncomputable</code> annotation (and the explicit <code>_</code>) ?</p>



<a name="249576295"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.finite.fintype/near/249576295" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Efinite.2Efintype.html#249576295">(Aug 16 2021 at 11:29)</a>:</h4>
<p>Totally agree with Oliver. Yesterday I rewrote some of <span class="user-mention silent" data-user-id="402311">Henry Swanson</span>'s derangements PR and I really surprised myself by knowing how to deal with all the subtyping and coercions mess to actually get to the point. I really thought "No way 2021 May's Yaël could have done that".</p>



<a name="249576390"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.finite.fintype/near/249576390" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Efinite.2Efintype.html#249576390">(Aug 16 2021 at 11:30)</a>:</h4>
<p>Noncomputability is inherited from <code>set.finite.fintype</code></p>



<a name="249576436"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.finite.fintype/near/249576436" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Efinite.2Efintype.html#249576436">(Aug 16 2021 at 11:31)</a>:</h4>
<p><span class="user-mention" data-user-id="243843">@Nicolás Ojeda Bär</span> Consider this:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.set.finite</span>

<span class="kd">universe</span> <span class="n">u</span>

<span class="k">#check</span> <span class="n">fintype.card</span> <span class="c1">-- Output: fintype.card : Π (α : Type u_1) [_inst_1 : fintype α], ℕ</span>
</code></pre></div>
<p>This says that fintype.card is a function taking two arguments, called α and _inst_1 above. The second one is optional but by prefixing fintype.card with an @ sign I opted to provide it manually. I then left out the first argument (indicated by _) since its value can be inferred from the type of the second argument.</p>



<a name="249576484"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.finite.fintype/near/249576484" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Efinite.2Efintype.html#249576484">(Aug 16 2021 at 11:31)</a>:</h4>
<p><code>set.finite</code> means "There exists a finset whose elements are the same as my set, but I don't know which" (roughly) while <code>fintype</code> means "Here's a finset and a proof that it contains all the stuff in my type"</p>



<a name="249576582"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.finite.fintype/near/249576582" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Efinite.2Efintype.html#249576582">(Aug 16 2021 at 11:32)</a>:</h4>
<p>That's the difference between <strong>knowing there exists</strong> an object that satisfies some conditions and actually <strong>having</strong> such an object.</p>



<a name="249576614"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.finite.fintype/near/249576614" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Efinite.2Efintype.html#249576614">(Aug 16 2021 at 11:33)</a>:</h4>
<p>The noncomputability of <a href="https://leanprover-community.github.io/mathlib_docs/find/set.finite.fintype">docs#set.finite.fintype</a> is deliberate : if you want computable finiteness, use <code>[fintype ↥s]</code> instead of <code>(h : s.finite)</code></p>



<a name="249576620"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.finite.fintype/near/249576620" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Efinite.2Efintype.html#249576620">(Aug 16 2021 at 11:33)</a>:</h4>
<p>(deleted)</p>



<a name="249576745"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.finite.fintype/near/249576745" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Efinite.2Efintype.html#249576745">(Aug 16 2021 at 11:34)</a>:</h4>
<p><span class="user-mention silent" data-user-id="243843">Nicolás Ojeda Bär</span> <a href="#narrow/stream/116395-maths/topic/set.2Efinite.2Efintype/near/249576234">said</a>:</p>
<blockquote>
<p>But I <em>am</em> passing a type, right? That's what <code>set.finite.fintype</code> is supposed to produce... </p>
</blockquote>
<p><code>set.finite.fintype hs</code> is a proof that the type <code>↥s</code> is finite, so it's a term not a type.</p>



<a name="249576844"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.finite.fintype/near/249576844" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Efinite.2Efintype.html#249576844">(Aug 16 2021 at 11:35)</a>:</h4>
<p>Passing the type would look like this:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">foo</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">hs</span> <span class="o">:</span> <span class="n">set.finite</span> <span class="n">s</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="o">:=</span>
<span class="n">fintype.card</span> <span class="bp">↥</span><span class="n">s</span>
</code></pre></div>



<a name="249576867"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.finite.fintype/near/249576867" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Efinite.2Efintype.html#249576867">(Aug 16 2021 at 11:36)</a>:</h4>
<p>But that fails because it cannot find the typeclass (i.e., the optional argument <code>hs.fintype</code>) which needs to be built from <code>hs</code>.</p>



<a name="249576924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.finite.fintype/near/249576924" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Efinite.2Efintype.html#249576924">(Aug 16 2021 at 11:36)</a>:</h4>
<p>There's also the added confusion that <code>fintype</code> was written with constructive mathematics in mind, so a term of type <code>fintype X</code> is not even a proof, it's actually data (but it's still a term, not a type).</p>



<a name="249577132"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.finite.fintype/near/249577132" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolás Ojeda Bär <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Efinite.2Efintype.html#249577132">(Aug 16 2021 at 11:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="240862">Oliver Nash</span> <a href="#narrow/stream/116395-maths/topic/set.2Efinite.2Efintype/near/249576867">said</a>:</p>
<blockquote>
<p>(But that fails because it cannot find the typeclass, which needs to be built from <code>hs</code>.)</p>
</blockquote>
<p>Thanks, that clears up (one of) my confusions, I had gotten the implicit argument to <code>fintype.card</code> mixed up.</p>



<a name="249577342"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.finite.fintype/near/249577342" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Efinite.2Efintype.html#249577342">(Aug 16 2021 at 11:40)</a>:</h4>
<p>There are two times where Lean will automatically fill in function inputs for you -- the <code>{}</code> system, where Lean figures out any inputs to functions marked with squiggly brackets using unification, and the <code>[]</code> system, where Lean figures out these inputs by looking at a big database called "the current contents of the typeclass system"</p>



<a name="249577393"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.finite.fintype/near/249577393" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Efinite.2Efintype.html#249577393">(Aug 16 2021 at 11:41)</a>:</h4>
<p>Right, so there are three types of arguments:</p>
<ol>
<li>Explicit, for which we use round brackets <code>()</code></li>
<li>Typeclass, for which we use square brackets <code>[]</code></li>
<li>Implicit, for which we use curly brackets <code>{}</code></li>
</ol>



<a name="249577399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.finite.fintype/near/249577399" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Efinite.2Efintype.html#249577399">(Aug 16 2021 at 11:41)</a>:</h4>
<p>You can override both systems with this <code>@</code> trick, which means that you have to input all inputs manually (but then you can skip some and hope that Lean can figure them out)</p>



<a name="249577440"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.finite.fintype/near/249577440" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolás Ojeda Bär <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Efinite.2Efintype.html#249577440">(Aug 16 2021 at 11:41)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/116395-maths/topic/set.2Efinite.2Efintype/near/249576924">said</a>:</p>
<blockquote>
<p>There's also the added confusion that <code>fintype</code> was written with constructive mathematics in mind, so a term of type <code>fintype X</code> is not even a proof, it's actually data (but it's still a term, not a type).</p>
</blockquote>
<p>Yes, I was indeed mixed up in my previous comment about it being a type, I see it now. Thanks!</p>



<a name="249577508"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.finite.fintype/near/249577508" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Efinite.2Efintype.html#249577508">(Aug 16 2021 at 11:42)</a>:</h4>
<p>And semi-implicit ⦃⦄ <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span></p>



<a name="249577532"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.finite.fintype/near/249577532" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Efinite.2Efintype.html#249577532">(Aug 16 2021 at 11:42)</a>:</h4>
<p>I don't know if that's the official name for it.</p>



<a name="249577538"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.finite.fintype/near/249577538" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Efinite.2Efintype.html#249577538">(Aug 16 2021 at 11:42)</a>:</h4>
<p>I think those are being removed in Lean 4, so it's best not to talk about them ;-)</p>



<a name="249577556"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.finite.fintype/near/249577556" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Efinite.2Efintype.html#249577556">(Aug 16 2021 at 11:43)</a>:</h4>
<p>Oh nooo, I liked them. But apparently I was the only one.</p>



<a name="249579393"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.finite.fintype/near/249579393" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Renshaw <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Efinite.2Efintype.html#249579393">(Aug 16 2021 at 12:03)</a>:</h4>
<p>It looks to me like they've been recently added to Lean4 : <a href="https://github.com/leanprover/lean4/commit/4cd7e359dfbfd56cca7f4a70d502ed159a61aa3e">https://github.com/leanprover/lean4/commit/4cd7e359dfbfd56cca7f4a70d502ed159a61aa3e</a></p>



<a name="249591150"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.finite.fintype/near/249591150" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Efinite.2Efintype.html#249591150">(Aug 16 2021 at 13:52)</a>:</h4>
<p>The def everyone wants here is finset.card, and the value is (hs : set.finite).to_finset.card</p>



<a name="249591221"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.finite.fintype/near/249591221" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Efinite.2Efintype.html#249591221">(Aug 16 2021 at 13:53)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/set.finite.to_finset">docs#set.finite.to_finset</a></p>



<a name="249599659"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.finite.fintype/near/249599659" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Efinite.2Efintype.html#249599659">(Aug 16 2021 at 14:58)</a>:</h4>
<p><a href="https://xkcd.com/927/">https://xkcd.com/927/</a></p>



<a name="249599767"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/set.finite.fintype/near/249599767" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/set.2Efinite.2Efintype.html#249599767">(Aug 16 2021 at 14:59)</a>:</h4>
<p>I am not sure that mathematicians ever want finset or fintype, we're just conditioned to use them by the constructivists.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>