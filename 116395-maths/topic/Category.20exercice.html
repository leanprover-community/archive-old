---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/Category.20exercice.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html">Category exercice</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="191121982"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191121982" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191121982">(Mar 19 2020 at 14:37)</a>:</h4>
<p>Hello, it is not a question but a  I suggest a little exercise to learn a little category theory, if somebody want to play <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span> </p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">functor_category</span>
<span class="kn">open</span> <span class="n">category_theory</span>
<span class="kn">open</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">category</span>
<span class="n">universes</span> <span class="n">v₁</span> <span class="n">v₂</span> <span class="n">u₁</span> <span class="n">u₂</span>

<span class="kn">variables</span> <span class="o">{</span><span class="n">C</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u₁</span><span class="o">}</span> <span class="o">[</span><span class="err">𝒞</span> <span class="o">:</span> <span class="n">category</span><span class="bp">.</span><span class="o">{</span><span class="n">v₁</span><span class="o">}</span> <span class="n">C</span><span class="o">]</span> <span class="o">{</span><span class="n">D</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u₂</span><span class="o">}</span> <span class="o">[</span><span class="err">𝒟</span> <span class="o">:</span> <span class="n">category</span><span class="bp">.</span><span class="o">{</span><span class="n">v₂</span><span class="o">}</span> <span class="n">D</span><span class="o">]</span>
<span class="n">include</span> <span class="err">𝒞</span> <span class="err">𝒟</span>

<span class="kn">variables</span> <span class="o">(</span><span class="n">X</span> <span class="n">Y</span> <span class="n">U</span> <span class="n">V</span><span class="o">:</span> <span class="n">C</span><span class="o">)</span>
<span class="kn">variables</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="err">⟶</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">V</span> <span class="err">⟶</span> <span class="n">U</span><span class="o">)(</span><span class="n">h</span> <span class="o">:</span> <span class="n">Y</span> <span class="err">⟶</span> <span class="n">V</span><span class="o">)</span>
<span class="kn">variables</span> <span class="o">(</span><span class="n">F</span> <span class="n">G</span>  <span class="o">:</span> <span class="n">C</span> <span class="err">⥤</span> <span class="n">D</span><span class="o">)</span>
<span class="kn">variables</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="n">F</span> <span class="err">⟶</span> <span class="n">G</span><span class="o">)</span>

<span class="c">/-</span><span class="cm"> The diagram coming from g and α</span>
<span class="cm">    F(f)        F(h)       F(g)</span>
<span class="cm">F X ---&gt; F Y  ---&gt;  F V   ----&gt; F U</span>
<span class="cm"> |        |           |          |</span>
<span class="cm"> |α(X)    |α(Y)       | α (v)    |  α (U)</span>
<span class="cm"> v        v           v          v</span>
<span class="cm">G X ---&gt; G Y ----&gt;    G(V) ---- G(U)</span>
<span class="cm">    G(f)       G(h)         G(g)</span>
<span class="cm">commutes.</span>
<span class="cm">-/</span>
<span class="kn">example</span> <span class="o">:</span> <span class="n">F</span><span class="bp">.</span><span class="n">map</span> <span class="n">f</span> <span class="err">≫</span>  <span class="n">α</span><span class="bp">.</span><span class="n">app</span> <span class="n">Y</span> <span class="err">≫</span> <span class="n">G</span><span class="bp">.</span><span class="n">map</span> <span class="n">h</span> <span class="err">≫</span>  <span class="n">G</span><span class="bp">.</span><span class="n">map</span> <span class="n">g</span>   <span class="bp">=</span>  <span class="n">F</span><span class="bp">.</span><span class="n">map</span> <span class="n">f</span> <span class="err">≫</span> <span class="n">F</span><span class="bp">.</span><span class="n">map</span> <span class="n">h</span> <span class="err">≫</span> <span class="n">α</span><span class="bp">.</span><span class="n">app</span> <span class="n">V</span>  <span class="err">≫</span> <span class="n">G</span><span class="bp">.</span><span class="n">map</span> <span class="n">g</span> <span class="o">:=</span> <span class="k">begin</span> <span class="n">simp</span><span class="o">,</span> <span class="kn">end</span>  <span class="c1">--- :)</span>
</pre></div>



<a name="191123006"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191123006" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191123006">(Mar 19 2020 at 14:44)</a>:</h4>
<p>Does <code>simp</code> work for you?</p>



<a name="191123149"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191123149" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191123149">(Mar 19 2020 at 14:45)</a>:</h4>
<p>no !!!</p>



<a name="191123459"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191123459" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191123459">(Mar 19 2020 at 14:47)</a>:</h4>
<p>Did you see the <a href="https://observablehq.com/@bryangingechen/github-lean-file-viewer?url=%22https%3A%2F%2Fgithub.com%2Fleanprover-community%2Fmathlib%2Fblob%2Fmaster%2Fdocs%2Ftutorial%2Fcategory_theory%2Fintro.lean%22#docs" target="_blank" title="https://observablehq.com/@bryangingechen/github-lean-file-viewer?url=%22https%3A%2F%2Fgithub.com%2Fleanprover-community%2Fmathlib%2Fblob%2Fmaster%2Fdocs%2Ftutorial%2Fcategory_theory%2Fintro.lean%22#docs">intro</a> file for category theory? Maybe a bunch of rewrites does it</p>



<a name="191123638"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191123638" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191123638">(Mar 19 2020 at 14:48)</a>:</h4>
<p>I need to do some step ! </p>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">:</span> <span class="n">F</span><span class="bp">.</span><span class="n">map</span> <span class="n">f</span> <span class="err">≫</span>  <span class="n">α</span><span class="bp">.</span><span class="n">app</span> <span class="n">Y</span> <span class="err">≫</span> <span class="n">G</span><span class="bp">.</span><span class="n">map</span> <span class="n">h</span> <span class="err">≫</span>  <span class="n">G</span><span class="bp">.</span><span class="n">map</span> <span class="n">g</span>   <span class="bp">=</span>  <span class="n">F</span><span class="bp">.</span><span class="n">map</span> <span class="n">f</span> <span class="err">≫</span> <span class="n">F</span><span class="bp">.</span><span class="n">map</span> <span class="n">h</span> <span class="err">≫</span> <span class="n">α</span><span class="bp">.</span><span class="n">app</span> <span class="n">V</span>  <span class="err">≫</span> <span class="n">G</span><span class="bp">.</span><span class="n">map</span> <span class="n">g</span> <span class="o">:=</span>  <span class="k">begin</span>
    <span class="n">rw</span> <span class="err">←</span> <span class="n">G</span><span class="bp">.</span><span class="n">map_comp</span> <span class="n">h</span> <span class="n">g</span><span class="o">,</span>
    <span class="n">rw</span> <span class="err">←</span> <span class="n">α</span><span class="bp">.</span><span class="n">naturality</span> <span class="o">(</span><span class="n">h</span> <span class="err">≫</span> <span class="n">g</span><span class="o">),</span>
    <span class="n">simp</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>



<a name="191123841"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191123841" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191123841">(Mar 19 2020 at 14:49)</a>:</h4>
<p>We don't have these naturality squares as simp lemmas because it's not clear in which direction you want to rewrite.</p>



<a name="191123981"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191123981" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191123981">(Mar 19 2020 at 14:50)</a>:</h4>
<p>Kevin,  Yes i read the intro (it's good text !!!) , and i make this exercice to manipulate i little !</p>



<a name="191123999"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191123999" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191123999">(Mar 19 2020 at 14:50)</a>:</h4>
<p>It might be better to just pick a direction (arbitrarily?) as the simp-direction though</p>



<a name="191124013"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191124013" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191124013">(Mar 19 2020 at 14:50)</a>:</h4>
<p>but any schoolkid could prove this by rewriting</p>



<a name="191124040"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191124040" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191124040">(Mar 19 2020 at 14:51)</a>:</h4>
<p>so where's the tactic?</p>



<a name="191124179"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191124179" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191124179">(Mar 19 2020 at 14:51)</a>:</h4>
<p><code>rewrite_search</code>?</p>



<a name="191124266"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191124266" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191124266">(Mar 19 2020 at 14:52)</a>:</h4>
<p>unknown identifier? :-(</p>



<a name="191124296"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191124296" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191124296">(Mar 19 2020 at 14:52)</a>:</h4>
<p>I don't know, I've thought about having some robust tactic for this kind of equational reasoning in category theory, like a <code>ring</code> for categories, but it hasn't been a pressing concern</p>



<a name="191124321"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191124321" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191124321">(Mar 19 2020 at 14:52)</a>:</h4>
<p>same !</p>



<a name="191124343"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191124343" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191124343">(Mar 19 2020 at 14:52)</a>:</h4>
<p><span class="user-mention" data-user-id="270476">@orlando</span> the tactic which should solve this goal is still being written</p>



<a name="191124424"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191124424" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191124424">(Mar 19 2020 at 14:53)</a>:</h4>
<p>I don't know to what extent it exists yet</p>



<a name="191124446"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191124446" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191124446">(Mar 19 2020 at 14:53)</a>:</h4>
<p>myaybe it half-exists?</p>



<a name="191125010"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191125010" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191125010">(Mar 19 2020 at 14:57)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">:</span> <span class="n">F</span><span class="bp">.</span><span class="n">map</span> <span class="n">f</span> <span class="err">≫</span>  <span class="n">α</span><span class="bp">.</span><span class="n">app</span> <span class="n">Y</span> <span class="err">≫</span> <span class="n">G</span><span class="bp">.</span><span class="n">map</span> <span class="n">h</span> <span class="err">≫</span>  <span class="n">G</span><span class="bp">.</span><span class="n">map</span> <span class="n">g</span>   <span class="bp">=</span>  <span class="n">F</span><span class="bp">.</span><span class="n">map</span> <span class="n">f</span> <span class="err">≫</span> <span class="n">F</span><span class="bp">.</span><span class="n">map</span> <span class="n">h</span> <span class="err">≫</span> <span class="n">α</span><span class="bp">.</span><span class="n">app</span> <span class="n">V</span>  <span class="err">≫</span> <span class="n">G</span><span class="bp">.</span><span class="n">map</span> <span class="n">g</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">congr&#39;</span> <span class="mi">1</span><span class="o">,</span>
  <span class="n">rw</span> <span class="err">←</span><span class="n">assoc</span><span class="o">,</span>
  <span class="n">rw</span> <span class="err">←</span><span class="n">assoc</span><span class="o">,</span>
  <span class="n">congr&#39;</span> <span class="mi">1</span><span class="o">,</span>
  <span class="n">rw</span> <span class="err">←</span><span class="n">nat_trans</span><span class="bp">.</span><span class="n">naturality</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>



<a name="191125094"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191125094" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191125094">(Mar 19 2020 at 14:57)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">:</span> <span class="n">F</span><span class="bp">.</span><span class="n">map</span> <span class="n">f</span> <span class="err">≫</span>  <span class="n">α</span><span class="bp">.</span><span class="n">app</span> <span class="n">Y</span> <span class="err">≫</span> <span class="n">G</span><span class="bp">.</span><span class="n">map</span> <span class="n">h</span> <span class="err">≫</span>  <span class="n">G</span><span class="bp">.</span><span class="n">map</span> <span class="n">g</span>   <span class="bp">=</span>  <span class="n">F</span><span class="bp">.</span><span class="n">map</span> <span class="n">f</span> <span class="err">≫</span> <span class="n">F</span><span class="bp">.</span><span class="n">map</span> <span class="n">h</span> <span class="err">≫</span> <span class="n">α</span><span class="bp">.</span><span class="n">app</span> <span class="n">V</span>  <span class="err">≫</span> <span class="n">G</span><span class="bp">.</span><span class="n">map</span> <span class="n">g</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">apply</span> <span class="n">congr_arg</span><span class="o">,</span>
  <span class="n">rw</span> <span class="err">←</span><span class="n">assoc</span><span class="o">,</span>
  <span class="n">rw</span> <span class="err">←</span><span class="n">assoc</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">congr_fun</span><span class="o">,</span>
  <span class="n">rw</span> <span class="err">←</span><span class="n">nat_trans</span><span class="bp">.</span><span class="n">naturality</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>



<a name="191125394"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191125394" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191125394">(Mar 19 2020 at 14:59)</a>:</h4>
<p>oh nice : congr' 1,</p>



<a name="191126824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191126824" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191126824">(Mar 19 2020 at 15:09)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/blob/d2d8cf2e62629ad3f7eb1e15d3ba7ae2e770c7a3/src/algebra/category/Module/monoidal.lean#L212" target="_blank" title="https://github.com/leanprover-community/mathlib/blob/d2d8cf2e62629ad3f7eb1e15d3ba7ae2e770c7a3/src/algebra/category/Module/monoidal.lean#L212">here</a> is the sorry I'm working on, I'm also trying to learn category theory</p>



<a name="191133293"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191133293" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191133293">(Mar 19 2020 at 15:54)</a>:</h4>
<p><span class="user-mention" data-user-id="270476">@orlando</span> when I get to a computer again I'll write your tactic :-)</p>



<a name="191141791"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191141791" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191141791">(Mar 19 2020 at 16:51)</a>:</h4>
<p>the proof was <code>rfl</code> by the way :-)</p>



<a name="191142015"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191142015" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191142015">(Mar 19 2020 at 16:53)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span>  : I try to read your file : i have a determinist timeout with " tidy " i don't know tidy, what is it ?</p>



<a name="191142117"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191142117" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191142117">(Mar 19 2020 at 16:53)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> wrote it, I don't understand it -- for me it is just like all the other tactics which sometimes solve a goal and sometimes don't.</p>



<a name="191142222"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191142222" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191142222">(Mar 19 2020 at 16:54)</a>:</h4>
<p>I only just learnt what <code>rewrite_search</code> did today after Reid's comment above.</p>



<a name="191142309"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191142309" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191142309">(Mar 19 2020 at 16:55)</a>:</h4>
<p><code>tidy</code>, more or less, attempts to solve goals by "decomposing into pieces" and then using simp lemma. When it does work, you can ask it to report what it did by writing <code>tidy?</code></p>



<a name="191142358"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191142358" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191142358">(Mar 19 2020 at 16:55)</a>:</h4>
<p>Often it is a some sequence of <code>intros</code>, <code>ext</code>, <code>dsimp</code>, and <code>simp</code>, but sometimes manages some more exotic steps.</p>



<a name="191142403"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191142403" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191142403">(Mar 19 2020 at 16:55)</a>:</h4>
<p>It essentially contains a list of tactics to try, and it keeps trying tactics from that list until nothing makes further progress.</p>



<a name="191142480"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191142480" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191142480">(Mar 19 2020 at 16:56)</a>:</h4>
<p>In particular, it has potentially unbounded run time. And sometimes it does very dumb things.</p>



<a name="191142519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191142519" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191142519">(Mar 19 2020 at 16:56)</a>:</h4>
<p>(But once you get the hang of when it does work, it works great.)</p>



<a name="191142631"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191142631" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191142631">(Mar 19 2020 at 16:57)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/116395-maths/topic/Category.20exercice/near/191142222" title="#narrow/stream/116395-maths/topic/Category.20exercice/near/191142222">said</a>:</p>
<blockquote>
<p>I only just learnt what <code>rewrite_search</code> did today after Reid's comment above.</p>
</blockquote>
<p>Note that <code>rewrite_search</code> doesn't exist in mathlib... We started attempting to PR it, but got bogged down.</p>



<a name="191142648"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191142648" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191142648">(Mar 19 2020 at 16:57)</a>:</h4>
<p>It is awesome. :-)</p>



<a name="191142891"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191142891" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191142891">(Mar 19 2020 at 16:58)</a>:</h4>
<p>And the notion of : Module.of ? I thinck it's a tool to "categorify " ?</p>



<a name="191144014"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191144014" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191144014">(Mar 19 2020 at 17:06)</a>:</h4>
<p>It's a tool to "bundle" the underlying type of a module together with the module structure.</p>



<a name="191144065"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191144065" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191144065">(Mar 19 2020 at 17:06)</a>:</h4>
<p>As a side effect, it becomes an object of the category of modules.</p>



<a name="191144319"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191144319" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191144319">(Mar 19 2020 at 17:08)</a>:</h4>
<p><span class="user-mention" data-user-id="270476">@orlando</span>  you already know that the usual way to do rings in Lean is <code>variables (R : Type) [comm_ring R]</code>. But there is also a category of rings, where you just put <code>R : Ring</code>. These are two different ways of storing the same data in the computer, and this <code>of</code> thing moves from one to the other.</p>



<a name="191144614"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191144614" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191144614">(Mar 19 2020 at 17:10)</a>:</h4>
<p>It is an implementation issue which is not interesting to mathematicians but becomes important if you want to do this stuff seriously.</p>



<a name="191158743"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191158743" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191158743">(Mar 19 2020 at 18:48)</a>:</h4>
<p>There is something wrong with my tactic :-(</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">functor_category</span>
<span class="kn">open</span> <span class="n">category_theory</span>
<span class="kn">open</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">category</span>
<span class="n">universes</span> <span class="n">v₁</span> <span class="n">v₂</span> <span class="n">u₁</span> <span class="n">u₂</span>

<span class="kn">variables</span> <span class="o">{</span><span class="n">C</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u₁</span><span class="o">}</span> <span class="o">[</span><span class="err">𝒞</span> <span class="o">:</span> <span class="n">category</span><span class="bp">.</span><span class="o">{</span><span class="n">v₁</span><span class="o">}</span> <span class="n">C</span><span class="o">]</span> <span class="o">{</span><span class="n">D</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u₂</span><span class="o">}</span> <span class="o">[</span><span class="err">𝒟</span> <span class="o">:</span> <span class="n">category</span><span class="bp">.</span><span class="o">{</span><span class="n">v₂</span><span class="o">}</span> <span class="n">D</span><span class="o">]</span>
<span class="n">include</span> <span class="err">𝒞</span> <span class="err">𝒟</span>

<span class="kn">variables</span> <span class="o">(</span><span class="n">X</span> <span class="n">Y</span> <span class="n">U</span> <span class="n">V</span><span class="o">:</span> <span class="n">C</span><span class="o">)</span>
<span class="kn">variables</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="err">⟶</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">V</span> <span class="err">⟶</span> <span class="n">U</span><span class="o">)(</span><span class="n">h</span> <span class="o">:</span> <span class="n">Y</span> <span class="err">⟶</span> <span class="n">V</span><span class="o">)</span>
<span class="kn">variables</span> <span class="o">(</span><span class="n">F</span> <span class="n">G</span>  <span class="o">:</span> <span class="n">C</span> <span class="err">⥤</span> <span class="n">D</span><span class="o">)</span>
<span class="kn">variables</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="n">F</span> <span class="err">⟶</span> <span class="n">G</span><span class="o">)</span>

<span class="c">/-</span><span class="cm"> The diagram coming from g and α</span>
<span class="cm">    F(f)        F(h)       F(g)</span>
<span class="cm">F X ---&gt; F Y  ---&gt;  F V   ----&gt; F U</span>
<span class="cm"> |        |           |          |</span>
<span class="cm"> |α(X)    |α(Y)       | α (v)    |  α (U)</span>
<span class="cm"> v        v           v          v</span>
<span class="cm">G X ---&gt; G Y ----&gt;    G(V) ---- G(U)</span>
<span class="cm">    G(f)       G(h)         G(g)</span>
<span class="cm">commutes.</span>
<span class="cm">-/</span>

<span class="n">meta</span> <span class="n">def</span> <span class="n">poor_mans_rewrite_search</span> <span class="o">:</span> <span class="n">tactic</span> <span class="n">unit</span> <span class="o">:=</span> <span class="n">do</span>
<span class="bp">`</span><span class="o">[</span><span class="n">iterate</span> <span class="mi">5</span>
    <span class="o">{</span> <span class="n">repeat</span> <span class="o">{</span><span class="n">rw</span> <span class="n">assoc</span><span class="o">},</span>
      <span class="n">try</span> <span class="o">{</span><span class="n">rw</span> <span class="n">nat_trans</span><span class="bp">.</span><span class="n">naturality</span><span class="o">},</span>
      <span class="n">try</span> <span class="o">{</span><span class="n">simp</span><span class="o">},</span>
      <span class="n">repeat</span> <span class="o">{</span><span class="n">rw</span> <span class="err">←</span><span class="n">assoc</span><span class="o">},</span>
      <span class="n">try</span> <span class="o">{</span><span class="n">rw</span> <span class="n">nat_trans</span><span class="bp">.</span><span class="n">naturality</span><span class="o">},</span>
      <span class="n">try</span> <span class="o">{</span><span class="n">simp</span><span class="o">}</span>
    <span class="o">}]</span>
<span class="kn">example</span> <span class="o">:</span>
  <span class="n">F</span><span class="bp">.</span><span class="n">map</span> <span class="n">f</span> <span class="err">≫</span>  <span class="n">α</span><span class="bp">.</span><span class="n">app</span> <span class="n">Y</span> <span class="err">≫</span> <span class="n">G</span><span class="bp">.</span><span class="n">map</span> <span class="n">h</span> <span class="err">≫</span>  <span class="n">G</span><span class="bp">.</span><span class="n">map</span> <span class="n">g</span> <span class="bp">=</span>
    <span class="n">F</span><span class="bp">.</span><span class="n">map</span> <span class="n">f</span> <span class="err">≫</span> <span class="n">F</span><span class="bp">.</span><span class="n">map</span> <span class="n">h</span> <span class="err">≫</span> <span class="n">α</span><span class="bp">.</span><span class="n">app</span> <span class="n">V</span>  <span class="err">≫</span> <span class="n">G</span><span class="bp">.</span><span class="n">map</span> <span class="n">g</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">poor_mans_rewrite_search</span><span class="o">,</span> <span class="c1">-- fails</span>
<span class="kn">end</span>
</pre></div>



<a name="191158860"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191158860" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191158860">(Mar 19 2020 at 18:49)</a>:</h4>
<p>this</p>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">:</span>
  <span class="n">F</span><span class="bp">.</span><span class="n">map</span> <span class="n">f</span> <span class="err">≫</span>  <span class="n">α</span><span class="bp">.</span><span class="n">app</span> <span class="n">Y</span> <span class="err">≫</span> <span class="n">G</span><span class="bp">.</span><span class="n">map</span> <span class="n">h</span> <span class="err">≫</span>  <span class="n">G</span><span class="bp">.</span><span class="n">map</span> <span class="n">g</span> <span class="bp">=</span>
    <span class="n">F</span><span class="bp">.</span><span class="n">map</span> <span class="n">f</span> <span class="err">≫</span> <span class="n">F</span><span class="bp">.</span><span class="n">map</span> <span class="n">h</span> <span class="err">≫</span> <span class="n">α</span><span class="bp">.</span><span class="n">app</span> <span class="n">V</span>  <span class="err">≫</span> <span class="n">G</span><span class="bp">.</span><span class="n">map</span> <span class="n">g</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">iterate</span> <span class="mi">5</span>
    <span class="o">{</span> <span class="n">repeat</span> <span class="o">{</span><span class="n">rw</span> <span class="n">assoc</span><span class="o">},</span>
      <span class="n">try</span> <span class="o">{</span><span class="n">rw</span> <span class="n">nat_trans</span><span class="bp">.</span><span class="n">naturality</span><span class="o">},</span>
      <span class="n">try</span> <span class="o">{</span><span class="n">simp</span><span class="o">},</span>
      <span class="n">repeat</span> <span class="o">{</span><span class="n">rw</span> <span class="err">←</span><span class="n">assoc</span><span class="o">},</span>
      <span class="n">try</span> <span class="o">{</span><span class="n">rw</span> <span class="n">nat_trans</span><span class="bp">.</span><span class="n">naturality</span><span class="o">},</span>
      <span class="n">try</span> <span class="o">{</span><span class="n">simp</span><span class="o">}</span>
    <span class="o">}</span>
<span class="kn">end</span>
</pre></div>


<p>works fine (and the same tactic should solve other goals of this nature)</p>



<a name="191159129"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191159129" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191159129">(Mar 19 2020 at 18:51)</a>:</h4>
<p>It solves this:</p>
<div class="codehilite"><pre><span></span>  <span class="n">α</span><span class="bp">.</span><span class="n">app</span> <span class="n">X</span> <span class="err">≫</span>  <span class="n">G</span><span class="bp">.</span><span class="n">map</span> <span class="n">f</span> <span class="err">≫</span> <span class="n">G</span><span class="bp">.</span><span class="n">map</span> <span class="n">h</span> <span class="err">≫</span>  <span class="n">G</span><span class="bp">.</span><span class="n">map</span> <span class="n">g</span> <span class="bp">=</span>
    <span class="n">F</span><span class="bp">.</span><span class="n">map</span> <span class="n">f</span> <span class="err">≫</span> <span class="n">F</span><span class="bp">.</span><span class="n">map</span> <span class="n">h</span> <span class="err">≫</span> <span class="n">F</span><span class="bp">.</span><span class="n">map</span> <span class="n">g</span>  <span class="err">≫</span> <span class="n">α</span><span class="bp">.</span><span class="n">app</span> <span class="n">U</span> <span class="o">:=</span>
</pre></div>



<a name="191159276"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191159276" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191159276">(Mar 19 2020 at 18:52)</a>:</h4>
<p>and even this: </p>
<div class="codehilite"><pre><span></span>  <span class="n">α</span><span class="bp">.</span><span class="n">app</span> <span class="n">X</span> <span class="err">≫</span>  <span class="n">G</span><span class="bp">.</span><span class="n">map</span> <span class="n">f</span> <span class="err">≫</span> <span class="mi">𝟙</span> <span class="o">(</span><span class="n">G</span><span class="bp">.</span><span class="n">obj</span> <span class="n">Y</span><span class="o">)</span> <span class="err">≫</span> <span class="n">G</span><span class="bp">.</span><span class="n">map</span> <span class="n">h</span> <span class="err">≫</span>  <span class="n">G</span><span class="bp">.</span><span class="n">map</span> <span class="n">g</span> <span class="bp">=</span>
    <span class="n">F</span><span class="bp">.</span><span class="n">map</span> <span class="n">f</span> <span class="err">≫</span> <span class="n">F</span><span class="bp">.</span><span class="n">map</span> <span class="n">h</span> <span class="err">≫</span> <span class="n">F</span><span class="bp">.</span><span class="n">map</span> <span class="n">g</span>  <span class="err">≫</span> <span class="n">α</span><span class="bp">.</span><span class="n">app</span> <span class="n">U</span> <span class="o">:=</span>
</pre></div>



<a name="191160135"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191160135" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191160135">(Mar 19 2020 at 19:00)</a>:</h4>
<p>That nice !!! Why hte meta programming fails</p>



<a name="191160189"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191160189" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191160189">(Mar 19 2020 at 19:00)</a>:</h4>
<p>yeah but it would be good to make it into a tactic and I can't work out how :-/</p>



<a name="191160523"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191160523" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191160523">(Mar 19 2020 at 19:03)</a>:</h4>
<p>Thanks to Chris Hughes who pointed out that it's the <code>include</code> that is causing the problem. You have to move the meta def before the include.</p>



<a name="191160543"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191160543" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191160543">(Mar 19 2020 at 19:03)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">functor_category</span>
<span class="kn">open</span> <span class="n">category_theory</span>
<span class="kn">open</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">category</span>
<span class="n">universes</span> <span class="n">v₁</span> <span class="n">v₂</span> <span class="n">u₁</span> <span class="n">u₂</span>

<span class="n">meta</span> <span class="n">def</span> <span class="n">poor_mans_rewrite_search</span> <span class="o">:</span> <span class="n">tactic</span> <span class="n">unit</span> <span class="o">:=</span> <span class="n">do</span>
<span class="bp">`</span><span class="o">[</span><span class="n">iterate</span> <span class="mi">5</span>
    <span class="o">{</span> <span class="n">repeat</span> <span class="o">{</span><span class="n">rw</span> <span class="n">assoc</span><span class="o">},</span>
      <span class="n">try</span> <span class="o">{</span><span class="n">rw</span> <span class="n">nat_trans</span><span class="bp">.</span><span class="n">naturality</span><span class="o">},</span>
      <span class="n">try</span> <span class="o">{</span><span class="n">simp</span><span class="o">},</span>
      <span class="n">repeat</span> <span class="o">{</span><span class="n">rw</span> <span class="err">←</span><span class="n">assoc</span><span class="o">},</span>
      <span class="n">try</span> <span class="o">{</span><span class="n">rw</span> <span class="n">nat_trans</span><span class="bp">.</span><span class="n">naturality</span><span class="o">},</span>
      <span class="n">try</span> <span class="o">{</span><span class="n">simp</span><span class="o">}</span>
    <span class="o">}]</span>

<span class="kn">variables</span> <span class="o">{</span><span class="n">C</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u₁</span><span class="o">}</span> <span class="o">[</span><span class="err">𝒞</span> <span class="o">:</span> <span class="n">category</span><span class="bp">.</span><span class="o">{</span><span class="n">v₁</span><span class="o">}</span> <span class="n">C</span><span class="o">]</span> <span class="o">{</span><span class="n">D</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u₂</span><span class="o">}</span> <span class="o">[</span><span class="err">𝒟</span> <span class="o">:</span> <span class="n">category</span><span class="bp">.</span><span class="o">{</span><span class="n">v₂</span><span class="o">}</span> <span class="n">D</span><span class="o">]</span>
<span class="n">include</span> <span class="err">𝒞</span> <span class="err">𝒟</span>

<span class="kn">variables</span> <span class="o">(</span><span class="n">X</span> <span class="n">Y</span> <span class="n">U</span> <span class="n">V</span><span class="o">:</span> <span class="n">C</span><span class="o">)</span>
<span class="kn">variables</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="err">⟶</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">V</span> <span class="err">⟶</span> <span class="n">U</span><span class="o">)(</span><span class="n">h</span> <span class="o">:</span> <span class="n">Y</span> <span class="err">⟶</span> <span class="n">V</span><span class="o">)</span>
<span class="kn">variables</span> <span class="o">(</span><span class="n">F</span> <span class="n">G</span>  <span class="o">:</span> <span class="n">C</span> <span class="err">⥤</span> <span class="n">D</span><span class="o">)</span>
<span class="kn">variables</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="n">F</span> <span class="err">⟶</span> <span class="n">G</span><span class="o">)</span>

<span class="c">/-</span><span class="cm"> The diagram coming from g and α</span>
<span class="cm">    F(f)        F(h)       F(g)</span>
<span class="cm">F X ---&gt; F Y  ---&gt;  F V   ----&gt; F U</span>
<span class="cm"> |        |           |          |</span>
<span class="cm"> |α(X)    |α(Y)       | α (v)    |  α (U)</span>
<span class="cm"> v        v           v          v</span>
<span class="cm">G X ---&gt; G Y ----&gt;    G(V) ---- G(U)</span>
<span class="cm">    G(f)       G(h)         G(g)</span>
<span class="cm">commutes.</span>
<span class="cm">-/</span>

<span class="kn">example</span> <span class="o">:</span>
  <span class="n">α</span><span class="bp">.</span><span class="n">app</span> <span class="n">X</span> <span class="err">≫</span>  <span class="n">G</span><span class="bp">.</span><span class="n">map</span> <span class="n">f</span> <span class="err">≫</span> <span class="mi">𝟙</span> <span class="o">(</span><span class="n">G</span><span class="bp">.</span><span class="n">obj</span> <span class="n">Y</span><span class="o">)</span> <span class="err">≫</span> <span class="n">G</span><span class="bp">.</span><span class="n">map</span> <span class="n">h</span> <span class="err">≫</span>  <span class="n">G</span><span class="bp">.</span><span class="n">map</span> <span class="n">g</span> <span class="bp">=</span>
    <span class="n">F</span><span class="bp">.</span><span class="n">map</span> <span class="n">f</span> <span class="err">≫</span> <span class="n">F</span><span class="bp">.</span><span class="n">map</span> <span class="n">h</span> <span class="err">≫</span> <span class="n">F</span><span class="bp">.</span><span class="n">map</span> <span class="n">g</span>  <span class="err">≫</span> <span class="n">α</span><span class="bp">.</span><span class="n">app</span> <span class="n">U</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">poor_mans_rewrite_search</span> <span class="c1">-- works :-)</span>
<span class="kn">end</span>
</pre></div>



<a name="191160606"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191160606" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191160606">(Mar 19 2020 at 19:04)</a>:</h4>
<p>He also suggested a better tactic, which I'll write next</p>



<a name="191162292"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191162292" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191162292">(Mar 19 2020 at 19:17)</a>:</h4>
<p>you could also <code>omit</code> inside a section if you don't want to move it</p>



<a name="191163448"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191163448" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191163448">(Mar 19 2020 at 19:26)</a>:</h4>
<p>You should also try the <code>conv_lhs { slice 3 4, ... }</code> idiom for dealing with associativity. This <code>slice</code> tactic could do with some work, but it mostly works. It rearranges brackets for you and zooms in to the "3rd through 4th" morphisms in a chain.</p>



<a name="191163636"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191163636" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191163636">(Mar 19 2020 at 19:28)</a>:</h4>
<p>Here's Chris' suggestion:</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">comp_right_app</span> <span class="o">{</span><span class="n">W</span> <span class="o">:</span> <span class="n">D</span><span class="o">}</span> <span class="o">{</span><span class="n">j</span> <span class="o">:</span> <span class="n">G</span><span class="bp">.</span><span class="n">obj</span> <span class="n">V</span> <span class="err">⟶</span> <span class="n">W</span><span class="o">}</span> <span class="o">:</span>
  <span class="n">F</span><span class="bp">.</span><span class="n">map</span> <span class="n">h</span> <span class="err">≫</span> <span class="o">(</span><span class="n">α</span><span class="bp">.</span><span class="n">app</span> <span class="n">V</span><span class="o">)</span> <span class="err">≫</span> <span class="n">j</span> <span class="bp">=</span>
  <span class="n">α</span><span class="bp">.</span><span class="n">app</span> <span class="n">Y</span> <span class="err">≫</span> <span class="o">(</span><span class="n">G</span><span class="bp">.</span><span class="n">map</span> <span class="n">h</span><span class="o">)</span> <span class="err">≫</span> <span class="n">j</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">rw</span> <span class="err">←</span><span class="n">assoc</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">nat_trans</span><span class="bp">.</span><span class="n">naturality</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">assoc</span>
<span class="kn">end</span>

<span class="n">omit</span> <span class="err">𝒞</span> <span class="err">𝒟</span>

<span class="n">meta</span> <span class="n">def</span> <span class="n">poor_mans_rewrite_search</span> <span class="o">:</span> <span class="n">tactic</span> <span class="n">unit</span> <span class="o">:=</span> <span class="n">do</span>
<span class="bp">`</span><span class="o">[{</span> <span class="n">repeat</span> <span class="o">{</span><span class="n">rw</span> <span class="n">assoc</span><span class="o">},</span>
    <span class="n">try</span> <span class="o">{</span><span class="n">simp</span><span class="o">},</span>
    <span class="n">repeat</span> <span class="o">{</span><span class="n">rw</span> <span class="n">comp_right_app</span><span class="o">},</span>
    <span class="n">repeat</span> <span class="o">{</span><span class="n">rw</span> <span class="n">nat_trans</span><span class="bp">.</span><span class="n">naturality</span><span class="o">},</span>
  <span class="o">}]</span>

<span class="n">include</span> <span class="err">𝒞</span> <span class="err">𝒟</span>

<span class="kn">example</span> <span class="o">:</span>
  <span class="n">α</span><span class="bp">.</span><span class="n">app</span> <span class="n">X</span> <span class="err">≫</span>  <span class="n">G</span><span class="bp">.</span><span class="n">map</span> <span class="n">f</span> <span class="err">≫</span> <span class="mi">𝟙</span> <span class="o">(</span><span class="n">G</span><span class="bp">.</span><span class="n">obj</span> <span class="n">Y</span><span class="o">)</span> <span class="err">≫</span> <span class="n">G</span><span class="bp">.</span><span class="n">map</span> <span class="n">h</span> <span class="err">≫</span>  <span class="n">G</span><span class="bp">.</span><span class="n">map</span> <span class="n">g</span> <span class="bp">=</span>
    <span class="n">F</span><span class="bp">.</span><span class="n">map</span> <span class="n">f</span> <span class="err">≫</span> <span class="n">F</span><span class="bp">.</span><span class="n">map</span> <span class="n">h</span> <span class="err">≫</span> <span class="n">F</span><span class="bp">.</span><span class="n">map</span> <span class="n">g</span>  <span class="err">≫</span> <span class="n">α</span><span class="bp">.</span><span class="n">app</span> <span class="n">U</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">poor_mans_rewrite_search</span>
<span class="kn">end</span>
</pre></div>



<a name="191163682"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191163682" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191163682">(Mar 19 2020 at 19:28)</a>:</h4>
<p>Like mul_left_comm but for natural transformations</p>



<a name="191166505"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191166505" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191166505">(Mar 19 2020 at 19:52)</a>:</h4>
<p>Doesn't <code>comp_right_app</code> already exist by the <code>reassoc</code> machinery?</p>



<a name="191167804"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191167804" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191167804">(Mar 19 2020 at 20:02)</a>:</h4>
<p>Maybe, I don't know anything about any machinery. I was just trying to make a simple tactic which solved goals like this.</p>



<a name="191276255"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191276255" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191276255">(Mar 20 2020 at 17:36)</a>:</h4>
<p>It turns out <code>comp_right_app</code> didn't exist, but should have and does now, see <a href="https://github.com/leanprover-community/mathlib/issues/2200" target="_blank" title="https://github.com/leanprover-community/mathlib/issues/2200">#2200</a>. <code>by simp</code> now suffices.</p>



<a name="191277399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Category%20exercice/near/191277399" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Category.20exercice.html#191277399">(Mar 20 2020 at 17:44)</a>:</h4>
<p>Oh nice! <span class="user-mention" data-user-id="270476">@orlando</span> you found a hole in the library!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>