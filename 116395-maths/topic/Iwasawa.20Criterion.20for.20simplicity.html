---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/Iwasawa.20Criterion.20for.20simplicity.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Iwasawa.20Criterion.20for.20simplicity.html">Iwasawa Criterion for simplicity</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="260870177"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Iwasawa%20Criterion%20for%20simplicity/near/260870177" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Antoine Chambert-Loir <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Iwasawa.20Criterion.20for.20simplicity.html#260870177">(Nov 09 2021 at 22:16)</a>:</h4>
<p>I just finished the Lean proof of the Iwasawa criterion for simplicity. <br>
Ultimately, I will add the applications to the simplicity of the alternating group and of PSL(n,K). <br>
(I do not know whether the latter will require a lot of stuff or not, I am not sure it is already proved that SL(n,K)<br>
is generated by transvections.)</p>
<p>The file is a bit long (500 lines), but it incorporates some definitions and ad hoc lemmas which may have simpler proofs,<br>
organized in a few sections.<br>
How should I do a pull request ? Try to guess in which files each lemma could go ?<br>
Or send a big file and wait for reviews ?<br>
Also, the names of the lemmas might need to be adjusted.</p>



<a name="260877303"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Iwasawa%20Criterion%20for%20simplicity/near/260877303" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Iwasawa.20Criterion.20for.20simplicity.html#260877303">(Nov 09 2021 at 23:19)</a>:</h4>
<p><span class="user-mention silent" data-user-id="130609">Antoine Chambert-Loir</span> <a href="#narrow/stream/116395-maths/topic/Iwasawa.20Criterion.20for.20simplicity/near/260870177">said</a>:</p>
<blockquote>
<p>The file is a bit long (500 lines), but it incorporates some definitions and ad hoc lemmas which may have simpler proofs,<br>
organized in a few sections.<br>
How should I do a pull request ? Try to guess in which files each lemma could go ?<br>
Or send a big file and wait for reviews ?<br>
Also, the names of the lemmas might need to be adjusted.</p>
</blockquote>
<p>In general, the advice is to make lemmas available as soon as possible, i.e. in the file with the fewest transitive imports. However if you can't find an obvious candidate, I'd like to encourage you to make a new file - I like working with short files. And if you are unsure, it's fine to leave the lemmas in the original file, especially if you note such cases with a comment.</p>



<a name="260877521"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Iwasawa%20Criterion%20for%20simplicity/near/260877521" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Iwasawa.20Criterion.20for.20simplicity.html#260877521">(Nov 09 2021 at 23:22)</a>:</h4>
<p>More important than making the code look nice is making the code available at all! So in case of doubt, please don't hesitate to create the PR as it is now, and the experienced users can help you with any issues that come up.</p>



<a name="260879189"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Iwasawa%20Criterion%20for%20simplicity/near/260879189" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Antoine Chambert-Loir <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Iwasawa.20Criterion.20for.20simplicity.html#260879189">(Nov 09 2021 at 23:43)</a>:</h4>
<p>Done! see <a href="https://github.com/leanprover-community/mathlib/issues/10253">#10253</a></p>



<a name="260944675"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Iwasawa%20Criterion%20for%20simplicity/near/260944675" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Iwasawa.20Criterion.20for.20simplicity.html#260944675">(Nov 10 2021 at 04:30)</a>:</h4>
<p>Congratulations! I left two first comments. We'll try to give a detailed review later this week.</p>



<a name="260952732"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Iwasawa%20Criterion%20for%20simplicity/near/260952732" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Iwasawa.20Criterion.20for.20simplicity.html#260952732">(Nov 10 2021 at 07:06)</a>:</h4>
<p><span class="user-mention silent" data-user-id="130609">Antoine Chambert-Loir</span> <a href="#narrow/stream/116395-maths/topic/Iwasawa.20Criterion.20for.20simplicity/near/260870177">said</a>:</p>
<blockquote>
<p>(I do not know whether the latter will require a lot of stuff or not, I am not sure it is already proved that SL(n,K)<br>
is generated by transvections.)</p>
</blockquote>
<p>We already have that <code>GL (n, K)</code> is generated by transvections and diagonal matrices, see <a href="https://leanprover-community.github.io/mathlib_docs/find/matrix.diagonal_transvection_induction_of_det_ne_zero">docs#matrix.diagonal_transvection_induction_of_det_ne_zero</a>. From this the <code>SL (n, K)</code> case should not be too painful (essentially do <code>2 x 2</code> matrices to replace iteratively the diagonal terms by <code>1</code>).</p>



<a name="260966548"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Iwasawa%20Criterion%20for%20simplicity/near/260966548" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Antoine Chambert-Loir <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Iwasawa.20Criterion.20for.20simplicity.html#260966548">(Nov 10 2021 at 09:50)</a>:</h4>
<p>Thanks for your comments <span class="user-mention" data-user-id="110050">@Sebastien Gouezel</span> and <span class="user-mention" data-user-id="112680">@Johan Commelin</span> .<br>
To implement the second remark of Johan, it seems that I need, if <code>X</code>is a type and <code>n:ℕ</code>,  to define a type representing the subtype of <code>X^n</code> representing <code>n</code>-tuples with distinct entries in the type <code>X</code> — and to endow it with its natural action of <code>G</code> if <code>X</code>has an action of <code>G</code>(<code>mul_action G X</code>) . What is the standard way to code this ? <code>(s :fin n → X) (inj: injective s)</code> ?</p>



<a name="260974675"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Iwasawa%20Criterion%20for%20simplicity/near/260974675" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Iwasawa.20Criterion.20for.20simplicity.html#260974675">(Nov 10 2021 at 11:10)</a>:</h4>
<p><span class="user-mention" data-user-id="130609">@Antoine Chambert-Loir</span> Ooh, I was thinking of formalizing the definition you wrote in the module docstring:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="c1">-- The action is *primitive* if it is transitive, and if all stabilizers G_x are maximal subgroups.</span>
</code></pre></div>



<a name="260974713"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Iwasawa%20Criterion%20for%20simplicity/near/260974713" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Iwasawa.20Criterion.20for.20simplicity.html#260974713">(Nov 10 2021 at 11:11)</a>:</h4>
<p>Is that not the kind of thing that you are using in the lemmas that of <code>primitive</code> in their name?</p>



<a name="260975576"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Iwasawa%20Criterion%20for%20simplicity/near/260975576" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Iwasawa.20Criterion.20for.20simplicity.html#260975576">(Nov 10 2021 at 11:20)</a>:</h4>
<p>You can us function.embedding (fin n) X to bundle the injectivity</p>



<a name="261014521"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Iwasawa%20Criterion%20for%20simplicity/near/261014521" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Antoine Chambert-Loir <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Iwasawa.20Criterion.20for.20simplicity.html#261014521">(Nov 10 2021 at 16:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/116395-maths/topic/Iwasawa.20Criterion.20for.20simplicity/near/260974675">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="130609">Antoine Chambert-Loir</span> Ooh, I was thinking of formalizing the definition you wrote in the module docstring:</p>
<p><div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="c1">-- The action is *primitive* if it is transitive, and if all stabilizers G_x are maximal subgroups.</span>
</code></pre></div><br>
</p>
</blockquote>
<p>The file already includes </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">variables</span> <span class="o">(</span><span class="n">G</span> <span class="n">X</span><span class="o">)</span>
<span class="kd">structure</span> <span class="n">is_primitive</span>
<span class="kd">extends</span> <span class="n">is_transitive</span> <span class="n">G</span> <span class="n">X</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">has_maximal_stabilizers</span><span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span><span class="o">:</span><span class="n">X</span><span class="o">,</span> <span class="o">(</span><span class="n">stabilizer</span> <span class="n">G</span> <span class="n">x</span><span class="o">)</span><span class="bp">.</span><span class="n">is_maximal</span><span class="o">)</span>
</code></pre></div>
<p>Isn't it sufficient then ?</p>



<a name="261049511"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Iwasawa%20Criterion%20for%20simplicity/near/261049511" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Iwasawa.20Criterion.20for.20simplicity.html#261049511">(Nov 10 2021 at 20:23)</a>:</h4>
<p><span class="user-mention" data-user-id="130609">@Antoine Chambert-Loir</span> ooh, sorry I hadn't seen that. So why are you not using that definition in those lemmas? Maybe I haven't thought enough about the maths. But the names of the lemmas suggest you want to talk about a primitive action. But the statement doesn't use <code>is_primitive</code>.</p>



<a name="261050156"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Iwasawa%20Criterion%20for%20simplicity/near/261050156" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Antoine Chambert-Loir <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Iwasawa.20Criterion.20for.20simplicity.html#261050156">(Nov 10 2021 at 20:29)</a>:</h4>
<p>Don't I use it ? I'm completely puzzled…</p>



<a name="261050275"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Iwasawa%20Criterion%20for%20simplicity/near/261050275" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Iwasawa.20Criterion.20for.20simplicity.html#261050275">(Nov 10 2021 at 20:29)</a>:</h4>
<p>Sorry, maybe I'm just blind. Let me look at your code again.</p>



<a name="261050423"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Iwasawa%20Criterion%20for%20simplicity/near/261050423" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Iwasawa.20Criterion.20for.20simplicity.html#261050423">(Nov 10 2021 at 20:30)</a>:</h4>
<p><span class="user-mention" data-user-id="130609">@Antoine Chambert-Loir</span> My apologies for all the noise. I was probably still asleep when I wrote that comment.</p>



<a name="261050449"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Iwasawa%20Criterion%20for%20simplicity/near/261050449" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Iwasawa.20Criterion.20for.20simplicity.html#261050449">(Nov 10 2021 at 20:31)</a>:</h4>
<p>Please ignore my second remark.</p>



<a name="261050633"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Iwasawa%20Criterion%20for%20simplicity/near/261050633" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Iwasawa.20Criterion.20for.20simplicity.html#261050633">(Nov 10 2021 at 20:32)</a>:</h4>
<p>To make up for the bad review. Let me try to do a better one now.</p>



<a name="261050859"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Iwasawa%20Criterion%20for%20simplicity/near/261050859" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Antoine Chambert-Loir <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Iwasawa.20Criterion.20for.20simplicity.html#261050859">(Nov 10 2021 at 20:34)</a>:</h4>
<p>No worry… You cannot guess how pleasant I find to realize that people thousand miles away are looking, commenting at one's work, providing help, making suggestions of improvements…</p>



<a name="261051878"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Iwasawa%20Criterion%20for%20simplicity/near/261051878" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Iwasawa.20Criterion.20for.20simplicity.html#261051878">(Nov 10 2021 at 20:43)</a>:</h4>
<p>Ok, I left several more comments. Hopefully less stupid this time.</p>



<a name="300660999"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Iwasawa%20Criterion%20for%20simplicity/near/300660999" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Antoine Chambert-Loir <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Iwasawa.20Criterion.20for.20simplicity.html#300660999">(Sep 25 2022 at 15:06)</a>:</h4>
<p>Just to let you know that 2 weeks ago, I (almost) completed the formal proof that the alternating group is simple using the Iwasawa criterion for simplicity. This is really a long proof, because it requires to prove that some subgroups of the alternating group are maximal subgroups, and in turn that result follows from a 1871 theorem of Jordan (that a primitive subgroup of $S_n$ that contains a 3-cycle contains the alternating group). All of this is in <a href="https://github.com/leanprover-community/mathlib/tree/acl_Wielandt">branch#acl_Wielandt</a>.</p>
<p>Actually, there is one case missing, when $n=6$, because in that case, the relevant subgroup of $A_6$, $A_6 \cap (S_3\times S_3)$, is not maximal. To use that method, I wish to consider double transpositions, but first I need to prove that the double transpositions (and identity) form a commutative subgroup of $A_4$ —This is the “Kleiner Vierergruppe”. </p>
<p>By hand, this is clear, but it looked annoying to try to formalize these arguments, so I imagined another way. <br>
You can observe that these elements (identity and double transpositions) are the only elements of $A_4$ whose order is a power of $2$;<br>
so once you know there are of them, they will fill any Sylow subgroup of $A_4$ hence they would constitute the unique 2-Sylow subgroup of $A_4$.</p>
<p>Lean easily tells you that there are 3 elements with cycle type [2,2], via #eval, but it is a bit slow and I don't know how to use such a computation in a formal proof.<br>
So I embarked in computing the number of permutations in a given conjugacy class in the general symmetric/alternating group. <br>
(This is almost done but will take a few weeks.)</p>



<a name="316394058"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Iwasawa%20Criterion%20for%20simplicity/near/316394058" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Antoine Chambert-Loir <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Iwasawa.20Criterion.20for.20simplicity.html#316394058">(Dec 17 2022 at 02:44)</a>:</h4>
<p>A few more weeks meant 3 months, <br>
but I finally accomplished what I started to 14 months ago!</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="sd">/-- If α has at least 5 elements,</span>
<span class="sd">then the only nontrivial normal sugroup of (perm α) is the alternating_group. -/</span>
<span class="kd">theorem</span> <span class="n">alternating_group.normal_subgroups</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">α</span><span class="o">]</span>
  <span class="o">(</span><span class="n">hα</span> <span class="o">:</span> <span class="mi">5</span> <span class="bp">≤</span> <span class="n">fintype.card</span> <span class="n">α</span><span class="o">)</span>
  <span class="o">{</span><span class="n">N</span> <span class="o">:</span> <span class="n">subgroup</span> <span class="o">(</span><span class="n">alternating_group</span> <span class="n">α</span><span class="o">)}</span> <span class="o">(</span><span class="n">hnN</span> <span class="o">:</span> <span class="n">N.normal</span><span class="o">)</span> <span class="o">(</span><span class="n">ntN</span> <span class="o">:</span> <span class="n">nontrivial</span> <span class="n">N</span><span class="o">)</span> <span class="o">:</span> <span class="n">N</span> <span class="bp">=</span> <span class="bp">⊤</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">by_cases</span> <span class="n">hα'</span> <span class="o">:</span> <span class="n">fintype.card</span> <span class="n">α</span> <span class="bp">=</span> <span class="mi">6</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">apply</span> <span class="n">alternating_group.normal_subgroups_8</span> <span class="n">hα</span> <span class="n">_</span> <span class="n">hnN</span> <span class="n">ntN</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">hα'</span><span class="o">,</span> <span class="n">norm_num</span><span class="o">,</span> <span class="o">},</span>
  <span class="n">exact</span> <span class="n">alternating_group.normal_subgroups_6</span> <span class="n">hα</span> <span class="n">hα'</span> <span class="n">hnN</span> <span class="n">ntN</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="316420758"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Iwasawa%20Criterion%20for%20simplicity/near/316420758" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Iwasawa.20Criterion.20for.20simplicity.html#316420758">(Dec 17 2022 at 09:05)</a>:</h4>
<p>The docstring seems to be about the symmetric group but the lemma says that the alternating group is simple?</p>



<a name="316466708"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Iwasawa%20Criterion%20for%20simplicity/near/316466708" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Antoine Chambert-Loir <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Iwasawa.20Criterion.20for.20simplicity.html#316466708">(Dec 17 2022 at 14:29)</a>:</h4>
<p>“Just to check that some people are actually reading…”</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>