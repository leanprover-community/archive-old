---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/with_top.20.5CZ.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_top.20.5CZ.html">with_top \Z</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="202994097"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_top%20%5CZ/near/202994097" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashvni Narayanan <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_top.20.5CZ.html#202994097">(Jul 06 2020 at 14:07)</a>:</h4>
<p>I want to show something like this:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">with_top</span><span class="bp">.</span><span class="n">has_inf</span> <span class="o">:</span> <span class="n">has_Inf</span> <span class="o">(</span><span class="n">with_top</span> <span class="bp">ℤ</span><span class="o">)</span><span class="bp">≥</span><span class="o">(</span><span class="mi">0</span> <span class="o">:</span> <span class="n">with_top</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:=</span>
</code></pre></div>


<p>No matter how I rephrase it, I get a </p>
<div class="codehilite"><pre><span></span><code><span class="n">failed</span> <span class="n">to</span> <span class="n">synthesize</span> <span class="n">type</span> <span class="n">class</span> <span class="kn">instance</span> <span class="n">for</span>
</code></pre></div>


<p>error.<br>
Any help is appreciated, thank you!</p>



<a name="202994651"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_top%20%5CZ/near/202994651" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_top.20.5CZ.html#202994651">(Jul 06 2020 at 14:12)</a>:</h4>
<p><code>has_Inf (with_top ℤ)</code> is a proposition asserting that an operator <code>Inf</code> is defined on the subsets of <code>with_top ℤ</code>. So, Lean gets that you want to compare a proposition with the number <code>0</code>, and it doesn't understand what you mean.</p>



<a name="202995477"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_top%20%5CZ/near/202995477" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_top.20.5CZ.html#202995477">(Jul 06 2020 at 14:18)</a>:</h4>
<p>Are you are trying to define a <code>has_Inf</code> instance on <code>{ x : with_top \Z // x \ge 0}</code>?</p>



<a name="202995601"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_top%20%5CZ/near/202995601" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_top.20.5CZ.html#202995601">(Jul 06 2020 at 14:19)</a>:</h4>
<p>Note that <code>{ x : with_top \Z // x \ge 0}</code> is isomorphic to <code>enat</code>.</p>



<a name="202996139"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_top%20%5CZ/near/202996139" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashvni Narayanan <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_top.20.5CZ.html#202996139">(Jul 06 2020 at 14:23)</a>:</h4>
<p>I am actually looking at a subset of has_top \Z \geq 0 : </p>
<div class="codehilite"><pre><span></span><code><span class="n">S</span> <span class="o">:</span> <span class="n">ideal</span> <span class="err">↥</span><span class="o">(</span><span class="n">val_ring</span> <span class="n">K</span><span class="o">),</span>
<span class="n">P</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">with_top</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:=</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">with_top</span> <span class="bp">ℤ</span> <span class="bp">|</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="err">↥</span><span class="o">(</span><span class="n">val_ring</span> <span class="n">K</span><span class="o">))</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">S</span><span class="o">),</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">v</span> <span class="err">↑</span><span class="n">x</span><span class="o">}</span>
</code></pre></div>


<p>and I want to show </p>
<div class="codehilite"><pre><span></span><code><span class="n">K</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">,</span>
<span class="bp">_</span><span class="n">inst_6</span> <span class="o">:</span> <span class="n">field</span> <span class="n">K</span><span class="o">,</span>
<span class="bp">_</span><span class="n">inst_7</span> <span class="o">:</span> <span class="n">discrete_valuation_field</span> <span class="n">K</span><span class="o">,</span>
<span class="n">S</span> <span class="o">:</span> <span class="n">ideal</span> <span class="err">↥</span><span class="o">(</span><span class="n">val_ring</span> <span class="n">K</span><span class="o">),</span>
<span class="n">P</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">with_top</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:=</span> <span class="o">{</span><span class="n">a</span> <span class="o">:</span> <span class="n">with_top</span> <span class="bp">ℤ</span> <span class="bp">|</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="err">↥</span><span class="o">(</span><span class="n">val_ring</span> <span class="n">K</span><span class="o">))</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">S</span><span class="o">),</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">v</span> <span class="err">↑</span><span class="n">x</span><span class="o">},</span>
<span class="n">f</span> <span class="o">:</span> <span class="n">bdd_below</span> <span class="n">P</span>
<span class="err">⊢</span> <span class="n">has_Inf</span> <span class="err">↥</span><span class="n">P</span>
</code></pre></div>


<p>using f, but I keep getting an error which asks for Inf to be defined on with_top \Z, hence my question above.</p>



<a name="202996569"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_top%20%5CZ/near/202996569" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_top.20.5CZ.html#202996569">(Jul 06 2020 at 14:27)</a>:</h4>
<p>Aha... Lean is not going to figure out that <code>↥P</code> is a type for which infima exist. It has never heard of this <code>P</code> before, so it know almost nothing about it.</p>



<a name="202996586"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_top%20%5CZ/near/202996586" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_top.20.5CZ.html#202996586">(Jul 06 2020 at 14:27)</a>:</h4>
<p>Note that arbitrary subsets of <code>with_top \Z</code> do not have an Inf. So you might run into some complications since the type of <code>P</code> is <code>set (with_top \Z)</code>.</p>



<a name="202997000"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_top%20%5CZ/near/202997000" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashvni Narayanan <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_top.20.5CZ.html#202997000">(Jul 06 2020 at 14:30)</a>:</h4>
<p>I see. Thank you!</p>



<a name="202997511"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_top%20%5CZ/near/202997511" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashvni Narayanan <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_top.20.5CZ.html#202997511">(Jul 06 2020 at 14:34)</a>:</h4>
<p>This seems to be an equivalent definition that does not throw up any error(yet) :</p>
<div class="codehilite"><pre><span></span><code><span class="n">K</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u_1</span><span class="o">,</span>
<span class="bp">_</span><span class="n">inst_6</span> <span class="o">:</span> <span class="n">field</span> <span class="n">K</span><span class="o">,</span>
<span class="bp">_</span><span class="n">inst_7</span> <span class="o">:</span> <span class="n">discrete_valuation_field</span> <span class="n">K</span><span class="o">,</span>
<span class="n">S</span> <span class="o">:</span> <span class="n">ideal</span> <span class="err">↥</span><span class="o">(</span><span class="n">val_ring</span> <span class="n">K</span><span class="o">),</span>
<span class="n">P</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="err">⨅</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="err">↥</span><span class="o">(</span><span class="n">val_ring</span> <span class="n">K</span><span class="o">))</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">S</span><span class="o">),</span> <span class="mi">0</span> <span class="bp">≤</span> <span class="n">v</span> <span class="err">↑</span><span class="n">x</span>
</code></pre></div>


<p>I hope it works!</p>



<a name="203000122"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_top%20%5CZ/near/203000122" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_top.20.5CZ.html#203000122">(Jul 06 2020 at 14:57)</a>:</h4>
<p>So there is already <code>enat</code> and <code>with_top nat</code>. I wonder if it would just be easier to use them?</p>



<a name="203000577"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_top%20%5CZ/near/203000577" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_top.20.5CZ.html#203000577">(Jul 06 2020 at 15:00)</a>:</h4>
<p>What's the actual goal here? Are you trying to prove that a DVR is a PID?</p>



<a name="203001220"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_top%20%5CZ/near/203001220" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_top.20.5CZ.html#203001220">(Jul 06 2020 at 15:05)</a>:</h4>
<p>I think the goal is that if we start with a discrete valuation field, then the stuff with valuation &gt;= 0 is a discrete valuation ring</p>



<a name="203001334"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_top%20%5CZ/near/203001334" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_top.20.5CZ.html#203001334">(Jul 06 2020 at 15:06)</a>:</h4>
<p>How did you end up defining a DVR?</p>



<a name="203001722"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_top%20%5CZ/near/203001722" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_top.20.5CZ.html#203001722">(Jul 06 2020 at 15:09)</a>:</h4>
<p>I think Ashvni went with Serre's definition: a PID with precisely one non-zero prime ideal.</p>



<a name="203001910"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_top%20%5CZ/near/203001910" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashvni Narayanan <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_top.20.5CZ.html#203001910">(Jul 06 2020 at 15:11)</a>:</h4>
<p>Yes, the local goal is to show that the ring obtained from a DVF is a PIR.</p>



<a name="203002020"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_top%20%5CZ/near/203002020" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_top.20.5CZ.html#203002020">(Jul 06 2020 at 15:12)</a>:</h4>
<p>I see. I guess what I'm wondering is whether the easiest way to approach this is to prove that the set of elements with nonnegative valuation is a Euclidean domain, since you already have the valuation function as part of the definition! This should follow easily from the ultrametric inequality. I think mathlib knows that Euclidean domain implies PID.</p>



<a name="203002439"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/with_top%20%5CZ/near/203002439" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Ashvni Narayanan <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/with_top.20.5CZ.html#203002439">(Jul 06 2020 at 15:17)</a>:</h4>
<p>Oh that sounds like a great idea!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>