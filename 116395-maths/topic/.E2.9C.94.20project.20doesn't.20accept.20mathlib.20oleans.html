---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/.E2.9C.94.20project.20doesn't.20accept.20mathlib.20oleans.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.E2.9C.94.20project.20doesn't.20accept.20mathlib.20oleans.html">âœ” project doesn't accept mathlib oleans</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="305799469"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%E2%9C%94%20project%20doesn%27t%20accept%20mathlib%20oleans/near/305799469" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.E2.9C.94.20project.20doesn't.20accept.20mathlib.20oleans.html#305799469">(Oct 24 2022 at 11:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/116395-maths/topic/project.20doesn't.20accept.20mathlib.20oleans/near/305795381">said</a>:</p>
<blockquote>
<p>I don't understand why you would expect <code>lean --make src</code>, a command which builds lean files directly and has nothing to do with python, to print out a message which a python program prints out when attempting to access the internet to find olean files.</p>
</blockquote>
<p>I didn't expect that, sorry. I just completely misunderstood your above post, I think</p>



<a name="305799567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%E2%9C%94%20project%20doesn%27t%20accept%20mathlib%20oleans/near/305799567" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.E2.9C.94.20project.20doesn't.20accept.20mathlib.20oleans.html#305799567">(Oct 24 2022 at 11:43)</a>:</h4>
<p>Sorry :-)</p>



<a name="305799598"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%E2%9C%94%20project%20doesn%27t%20accept%20mathlib%20oleans/near/305799598" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.E2.9C.94.20project.20doesn't.20accept.20mathlib.20oleans.html#305799598">(Oct 24 2022 at 11:43)</a>:</h4>
<p>Let me know if you have any questions, I'm standing in a queue in a bank right now</p>



<a name="305799824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%E2%9C%94%20project%20doesn%27t%20accept%20mathlib%20oleans/near/305799824" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.E2.9C.94.20project.20doesn't.20accept.20mathlib.20oleans.html#305799824">(Oct 24 2022 at 11:44)</a>:</h4>
<p>What I'm conjecturing is that you were working on some other lean project using the same version of lean, accidentally corrupted it and then this causes mathlib oleans to be rejected</p>



<a name="305799910"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%E2%9C%94%20project%20doesn%27t%20accept%20mathlib%20oleans/near/305799910" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.E2.9C.94.20project.20doesn't.20accept.20mathlib.20oleans.html#305799910">(Oct 24 2022 at 11:45)</a>:</h4>
<p>So nuke the version of lean stored in .elan corresponding to the version being used by your project</p>



<a name="305800052"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%E2%9C%94%20project%20doesn%27t%20accept%20mathlib%20oleans/near/305800052" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.E2.9C.94.20project.20doesn't.20accept.20mathlib.20oleans.html#305800052">(Oct 24 2022 at 11:46)</a>:</h4>
<p>Thanks, will try that</p>



<a name="305800109"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%E2%9C%94%20project%20doesn%27t%20accept%20mathlib%20oleans/near/305800109" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.E2.9C.94.20project.20doesn't.20accept.20mathlib.20oleans.html#305800109">(Oct 24 2022 at 11:46)</a>:</h4>
<p>You have to nuke two things</p>



<a name="305800874"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%E2%9C%94%20project%20doesn%27t%20accept%20mathlib%20oleans/near/305800874" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.E2.9C.94.20project.20doesn't.20accept.20mathlib.20oleans.html#305800874">(Oct 24 2022 at 11:52)</a>:</h4>
<p>Thanks, that solved it!! <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span></p>



<a name="305800878"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%E2%9C%94%20project%20doesn%27t%20accept%20mathlib%20oleans/near/305800878" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.E2.9C.94.20project.20doesn't.20accept.20mathlib.20oleans.html#305800878">(Oct 24 2022 at 11:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110789">Jakob von Raumer</span> has marked this topic as resolved.</p>



<a name="305803274"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%E2%9C%94%20project%20doesn%27t%20accept%20mathlib%20oleans/near/305803274" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.E2.9C.94.20project.20doesn't.20accept.20mathlib.20oleans.html#305803274">(Oct 24 2022 at 12:06)</a>:</h4>
<p>Sorry for not being clearer earlier</p>



<a name="305806066"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%E2%9C%94%20project%20doesn%27t%20accept%20mathlib%20oleans/near/305806066" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.E2.9C.94.20project.20doesn't.20accept.20mathlib.20oleans.html#305806066">(Oct 24 2022 at 12:17)</a>:</h4>
<p>I somehow didn'r really expect it a lean version issue, and I still don't get exactly how this happens</p>



<a name="305902004"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%E2%9C%94%20project%20doesn%27t%20accept%20mathlib%20oleans/near/305902004" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.E2.9C.94.20project.20doesn't.20accept.20mathlib.20oleans.html#305902004">(Oct 24 2022 at 19:46)</a>:</h4>
<p>If you hadn't nuked those lean directories you could have diffed them against what's there now and discovered what you accidentally did when you sneezed, jumped to a definition in core and pressed the space bar</p>



<a name="305924451"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%E2%9C%94%20project%20doesn%27t%20accept%20mathlib%20oleans/near/305924451" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.E2.9C.94.20project.20doesn't.20accept.20mathlib.20oleans.html#305924451">(Oct 24 2022 at 22:36)</a>:</h4>
<p>It's usually harder than just sneezing: the files in core the elan has provided are all read-only.</p>



<a name="305968053"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%E2%9C%94%20project%20doesn%27t%20accept%20mathlib%20oleans/near/305968053" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.E2.9C.94.20project.20doesn't.20accept.20mathlib.20oleans.html#305968053">(Oct 25 2022 at 07:06)</a>:</h4>
<p>I'm a strong sneezer, though</p>



<a name="305968143"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%E2%9C%94%20project%20doesn%27t%20accept%20mathlib%20oleans/near/305968143" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.E2.9C.94.20project.20doesn't.20accept.20mathlib.20oleans.html#305968143">(Oct 25 2022 at 07:07)</a>:</h4>
<p>That's true of core, but not mathlib</p>



<a name="305968901"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%E2%9C%94%20project%20doesn%27t%20accept%20mathlib%20oleans/near/305968901" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.E2.9C.94.20project.20doesn't.20accept.20mathlib.20oleans.html#305968901">(Oct 25 2022 at 07:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/116395-maths/topic/.E2.9C.94.20project.20doesn't.20accept.20mathlib.20oleans/near/305968143">said</a>:</p>
<blockquote>
<p>That's true of core, but not mathlib</p>
</blockquote>
<p>Yes, but I had already nuked the <code>_target</code> mathlib  and the problem persisted, so it coulnd't have been mathlib <span aria-label="shrug" class="emoji emoji-1f937" role="img" title="shrug">:shrug:</span></p>



<a name="306000847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%E2%9C%94%20project%20doesn%27t%20accept%20mathlib%20oleans/near/306000847" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.E2.9C.94.20project.20doesn't.20accept.20mathlib.20oleans.html#306000847">(Oct 25 2022 at 10:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110087">Scott Morrison</span> <a href="#narrow/stream/116395-maths/topic/.E2.9C.94.20project.20doesn't.20accept.20mathlib.20oleans/near/305924451">said</a>:</p>
<blockquote>
<p>It's usually harder than just sneezing: the files in core the elan has provided are all read-only.</p>
</blockquote>
<p>That's not true for my set-up! Is this working for other people? I can edit core Lean 3.48 just fine on Ubuntu 20.04 with VS Code when working on e.g. mathlib (I right click, I add a space, I save, I break everything)</p>



<a name="306013887"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%E2%9C%94%20project%20doesn%27t%20accept%20mathlib%20oleans/near/306013887" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.E2.9C.94.20project.20doesn't.20accept.20mathlib.20oleans.html#306013887">(Oct 25 2022 at 12:13)</a>:</h4>
<p>Just checked, and it's also writable for me.</p>



<a name="306014248"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%E2%9C%94%20project%20doesn%27t%20accept%20mathlib%20oleans/near/306014248" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.E2.9C.94.20project.20doesn't.20accept.20mathlib.20oleans.html#306014248">(Oct 25 2022 at 12:15)</a>:</h4>
<div class="codehilite" data-code-language="Text only"><pre><span></span><code>buzzard@bob:~/.elan/toolchains/leanprover-community--lean---3.48.0/lib/lean/library/init$ ls -la
total 840
drwxr-xr-x  6 buzzard buzzard   4096 Oct 23 18:48 .
drwxr-xr-x  7 buzzard buzzard   4096 Sep  1 22:45 ..
drwxr-xr-x  2 buzzard buzzard   4096 Oct 23 18:48 algebra
-rw-r--r--  1 buzzard buzzard   4653 Aug 30 12:14 cc_lemmas.lean
-rw-r--r--  1 buzzard buzzard   6382 Aug 30 12:20 cc_lemmas.olean
-rw-r--r--  1 buzzard buzzard   5556 Aug 30 12:14 classical.lean
-rw-r--r--  1 buzzard buzzard  13061 Aug 30 12:20 classical.olean
-rw-r--r--  1 buzzard buzzard   7601 Aug 30 12:14 coe.lean
-rw-r--r--  1 buzzard buzzard  46052 Aug 30 12:20 coe.olean
drwxr-xr-x  2 buzzard buzzard   4096 Oct 23 18:48 control
-rw-r--r--  1 buzzard buzzard  18729 Aug 30 12:14 core.lean
-rw-r--r--  1 buzzard buzzard 178898 Aug 30 12:20 core.olean
drwxr-xr-x 16 buzzard buzzard   4096 Oct 23 18:48 data
-rw-r--r--  1 buzzard buzzard    645 Aug 30 12:14 default.lean
-rw-r--r--  1 buzzard buzzard   1409 Aug 30 12:21 default.olean
-rw-r--r--  1 buzzard buzzard   6628 Aug 30 12:14 function.lean
-rw-r--r--  1 buzzard buzzard  20354 Aug 30 12:20 function.olean
-rw-r--r--  1 buzzard buzzard   2408 Aug 30 12:14 funext.lean
-rw-r--r--  1 buzzard buzzard   5045 Aug 30 12:20 funext.olean
-rw-r--r--  1 buzzard buzzard   1367 Aug 30 12:14 init.md
-rw-r--r--  1 buzzard buzzard    898 Aug 30 12:14 ite_simp.lean
-rw-r--r--  1 buzzard buzzard   4062 Aug 30 12:21 ite_simp.olean
-rw-r--r--  1 buzzard buzzard  38948 Aug 30 12:14 logic.lean
-rw-r--r--  1 buzzard buzzard 130351 Aug 30 12:20 logic.olean
drwxr-xr-x  6 buzzard buzzard  20480 Oct 23 18:48 meta
-rw-r--r--  1 buzzard buzzard   1387 Aug 30 12:14 propext.lean
-rw-r--r--  1 buzzard buzzard   1631 Aug 30 12:20 propext.olean
-rw-r--r--  1 buzzard buzzard   2218 Aug 30 12:14 util.lean
-rw-r--r--  1 buzzard buzzard   3766 Aug 30 12:20 util.olean
-rw-r--r--  1 buzzard buzzard    332 Aug 30 12:14 version.lean
-rw-r--r--  1 buzzard buzzard   1439 Aug 30 12:20 version.olean
-rw-r--r--  1 buzzard buzzard   7103 Aug 30 12:14 wf.lean
-rw-r--r--  1 buzzard buzzard  29319 Aug 30 12:20 wf.olean
buzzard@bob:~/.elan/toolchains/leanprover-community--lean---3.48.0/lib/lean/library/init$
</code></pre></div>



<a name="306117247"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%E2%9C%94%20project%20doesn%27t%20accept%20mathlib%20oleans/near/306117247" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/.E2.9C.94.20project.20doesn't.20accept.20mathlib.20oleans.html#306117247">(Oct 25 2022 at 20:34)</a>:</h4>
<p>Weird, not writeable for me:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">scott</span><span class="bp">@</span><span class="n">idaeus</span> <span class="n">lib</span> <span class="bp">%</span> <span class="n">cd</span> <span class="n">lean</span><span class="bp">/</span><span class="n">library</span><span class="bp">/</span><span class="n">init</span><span class="bp">/</span><span class="kd">meta</span>
<span class="n">scott</span><span class="bp">@</span><span class="n">idaeus</span> <span class="kd">meta</span> <span class="bp">%</span> <span class="n">ls</span> <span class="bp">-</span><span class="n">al</span>
<span class="n">total</span> <span class="mi">3888</span>
<span class="n">drwxr</span><span class="bp">-</span><span class="n">xr</span><span class="bp">-</span><span class="n">x</span>  <span class="mi">116</span> <span class="n">scott</span>  <span class="n">staff</span>    <span class="mi">3712</span> <span class="mi">26</span> <span class="n">Oct</span> <span class="mi">07</span><span class="o">:</span><span class="mi">33</span> <span class="bp">.</span>
<span class="n">drwxr</span><span class="bp">-</span><span class="n">xr</span><span class="bp">-</span><span class="n">x</span>   <span class="mi">33</span> <span class="n">scott</span>  <span class="n">staff</span>    <span class="mi">1056</span> <span class="mi">26</span> <span class="n">Oct</span> <span class="mi">07</span><span class="o">:</span><span class="mi">33</span> <span class="bp">..</span>
<span class="bp">-</span><span class="n">r</span><span class="c1">--r--r--    1 scott  staff     496 30 Aug 21:14 ac_tactics.lean</span>
<span class="bp">-</span><span class="n">r</span><span class="c1">--r--r--    1 scott  staff     281 30 Aug 21:28 ac_tactics.olean</span>
<span class="bp">-</span><span class="n">r</span><span class="c1">--r--r--    1 scott  staff    1903 30 Aug 21:14 async_tactic.lean</span>
<span class="bp">-</span><span class="n">r</span><span class="c1">--r--r--    1 scott  staff    4589 30 Aug 21:29 async_tactic.olean</span>
<span class="bp">-</span><span class="n">r</span><span class="c1">--r--r--    1 scott  staff    5895 30 Aug 21:14 attribute.lean</span>
<span class="bp">-</span><span class="n">r</span><span class="c1">--r--r--    1 scott  staff   17422 30 Aug 21:29 attribute.olean</span>
</code></pre></div>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>