---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/Defining.20.60has_inv.60.20when.20only.20some.20elements.20have.20an.20inverse.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Defining.20.60has_inv.60.20when.20only.20some.20elements.20have.20an.20inverse.html">Defining `has_inv` when only some elements have an inverse</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="215835678"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Defining%20%60has_inv%60%20when%20only%20some%20elements%20have%20an%20inverse/near/215835678" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Defining.20.60has_inv.60.20when.20only.20some.20elements.20have.20an.20inverse.html#215835678">(Nov 06 2020 at 11:54)</a>:</h4>
<p>For fractional ideals, we currently have definitions for <a href="https://leanprover-community.github.io/mathlib_docs/find/ring.fractional_ideal.fractional_ideal_has_div">docs#ring.fractional_ideal.fractional_ideal_has_div</a>  and <a href="https://leanprover-community.github.io/mathlib_docs/find/ring.fractional_ideal.has_inv">docs#ring.fractional_ideal.has_inv</a>, defined as <code>I⁻¹ = 1 / I</code>. <span class="user-mention" data-user-id="300245">@Filippo A. E. Nuccio</span> pointed out that <code>has_inv</code> can be confusing, as the notation <code>I⁻¹</code> in maths typically means the <code>J</code> such that <code>I * J = 1</code>, and this does not exist in general for all fractional ideals <code>I</code>. It just so happens to be equal to <code>1 / I</code> if such a <code>J</code> exists. Should we change <code>has_inv</code> to take an extra (instance?) parameter stating that all fractional ideals (except 0) are invertible? Or just clarify this in the documentation for <code>fractional_ideal.has_inv</code>?</p>



<a name="215835683"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Defining%20%60has_inv%60%20when%20only%20some%20elements%20have%20an%20inverse/near/215835683" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Defining.20.60has_inv.60.20when.20only.20some.20elements.20have.20an.20inverse.html#215835683">(Nov 06 2020 at 11:54)</a>:</h4>
<p>For comparison:</p>
<ul>
<li>submodules have a <code>has_div</code> and a <code>1</code>, but no <code>has_inv</code></li>
<li>matrices have a <code>has_inv</code> (which returns <code>0</code> for matrices without a two-sided inverse)</li>
</ul>



<a name="215839392"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Defining%20%60has_inv%60%20when%20only%20some%20elements%20have%20an%20inverse/near/215839392" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Defining.20.60has_inv.60.20when.20only.20some.20elements.20have.20an.20inverse.html#215839392">(Nov 06 2020 at 12:33)</a>:</h4>
<p>I'm inclined to just document this...</p>



<a name="215881425"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Defining%20%60has_inv%60%20when%20only%20some%20elements%20have%20an%20inverse/near/215881425" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Defining.20.60has_inv.60.20when.20only.20some.20elements.20have.20an.20inverse.html#215881425">(Nov 06 2020 at 17:57)</a>:</h4>
<p>The reason why I am sceptical is that the equation <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>I</mi><mo>∗</mo><msup><mi>I</mi><mrow><mo>−</mo><mn>1</mn></mrow></msup><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">I * I^{-1}  = 1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> is <em>false</em> for non-invertible ideals (without being <em>trivially false</em>, as if it were <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span> by definition).</p>



<a name="215881764"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Defining%20%60has_inv%60%20when%20only%20some%20elements%20have%20an%20inverse/near/215881764" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Defining.20.60has_inv.60.20when.20only.20some.20elements.20have.20an.20inverse.html#215881764">(Nov 06 2020 at 18:00)</a>:</h4>
<p>Ok, so if <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>I</mi><mrow><mo>−</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">I^{-1}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span> were defined to be equal to 0 for non-invertible ideals? Would that make it better?</p>



<a name="215882078"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Defining%20%60has_inv%60%20when%20only%20some%20elements%20have%20an%20inverse/near/215882078" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Defining.20.60has_inv.60.20when.20only.20some.20elements.20have.20an.20inverse.html#215882078">(Nov 06 2020 at 18:02)</a>:</h4>
<p>Well, yes; the problem is that this is in contrast with <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>I</mi><mrow><mo>−</mo><mn>1</mn></mrow></msup><mo>=</mo><mn>1</mn><mi mathvariant="normal">/</mi><mi>I</mi></mrow><annotation encoding="application/x-tex"> I^{-1} = 1/ I</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span></span></span></span> because for <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>I</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex"> I = 0</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span> the submodule <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mi mathvariant="normal">/</mi><mn>0</mn></mrow><annotation encoding="application/x-tex"> 1 / 0 </annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord">/</span><span class="mord">0</span></span></span></span> is, by definition, the whole ambient algebra <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">K</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span></span></span></span> , because every element <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>∈</mo><mi>K</mi></mrow><annotation encoding="application/x-tex">x \in K</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span></span></span></span> satisfies <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>⋅</mo><mn>0</mn><mo>∈</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">x \cdot 0 \in 1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.44445em;vertical-align:0em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68354em;vertical-align:-0.0391em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>. On the other hand, for invertible ones, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>I</mi><mrow><mo>−</mo><mn>1</mn></mrow></msup><mo>=</mo><mn>1</mn><mi mathvariant="normal">/</mi><mi>I</mi></mrow><annotation encoding="application/x-tex"> I^{-1} = 1 / I</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span></span></span></span> is true. This is why I was suggesting to only introduce inverses for invertible ideals.</p>



<a name="215882281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Defining%20%60has_inv%60%20when%20only%20some%20elements%20have%20an%20inverse/near/215882281" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Defining.20.60has_inv.60.20when.20only.20some.20elements.20have.20an.20inverse.html#215882281">(Nov 06 2020 at 18:04)</a>:</h4>
<p>Right, but what should <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>0</mn><msup><mo stretchy="false">)</mo><mrow><mo>−</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">(0)^{-1}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">0</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span> be? It has to be something...</p>



<a name="215882354"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Defining%20%60has_inv%60%20when%20only%20some%20elements%20have%20an%20inverse/near/215882354" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Defining.20.60has_inv.60.20when.20only.20some.20elements.20have.20an.20inverse.html#215882354">(Nov 06 2020 at 18:05)</a>:</h4>
<p>One option is to define</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">inv</span> <span class="o">(</span><span class="n">I</span> <span class="o">:</span> <span class="n">fractional_ideal</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">if</span> <span class="n">I</span> <span class="bp">*</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">/</span> <span class="n">I</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">1</span> <span class="k">then</span> <span class="mi">1</span> <span class="bp">/</span> <span class="n">I</span> <span class="k">else</span> <span class="mi">0</span>
</code></pre></div>



<a name="215882457"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Defining%20%60has_inv%60%20when%20only%20some%20elements%20have%20an%20inverse/near/215882457" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Defining.20.60has_inv.60.20when.20only.20some.20elements.20have.20an.20inverse.html#215882457">(Nov 06 2020 at 18:05)</a>:</h4>
<p>That way, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>I</mi><mo>∗</mo><msup><mi>I</mi><mrow><mo>−</mo><mn>1</mn></mrow></msup><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">I * I^{-1} = 1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> will be <em>trivially</em> false for non-invertible ideals.</p>



<a name="215882512"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Defining%20%60has_inv%60%20when%20only%20some%20elements%20have%20an%20inverse/near/215882512" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Defining.20.60has_inv.60.20when.20only.20some.20elements.20have.20an.20inverse.html#215882512">(Nov 06 2020 at 18:06)</a>:</h4>
<p>This is one option; the other, is to define <code>has_inv</code> only for Dedekind domains, where every non-zero is invertible (and your definition would work as it would have a unique exception); and to let <code>is_inv : (fractional_ideal g)-&gt; Prop</code> be simply a property</p>



<a name="215882632"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Defining%20%60has_inv%60%20when%20only%20some%20elements%20have%20an%20inverse/near/215882632" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Defining.20.60has_inv.60.20when.20only.20some.20elements.20have.20an.20inverse.html#215882632">(Nov 06 2020 at 18:07)</a>:</h4>
<p>Ok, maybe that's the best option. But it means that for general number rings, we will always have to work with <code>1 / I</code> instead of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>I</mi><mrow><mo>−</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">I^{-1}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span>.</p>



<a name="215882681"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Defining%20%60has_inv%60%20when%20only%20some%20elements%20have%20an%20inverse/near/215882681" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Defining.20.60has_inv.60.20when.20only.20some.20elements.20have.20an.20inverse.html#215882681">(Nov 06 2020 at 18:07)</a>:</h4>
<p>And so there will probably be some lemmas that have to be restated.</p>



<a name="215882763"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Defining%20%60has_inv%60%20when%20only%20some%20elements%20have%20an%20inverse/near/215882763" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Defining.20.60has_inv.60.20when.20only.20some.20elements.20have.20an.20inverse.html#215882763">(Nov 06 2020 at 18:08)</a>:</h4>
<p>Yes, but this seems OK to me; for instance, the equality <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>I</mi><mo>∗</mo><mn>1</mn><mi mathvariant="normal">/</mi><mi>J</mi><mo>=</mo><mi>I</mi><mi mathvariant="normal">/</mi><mi>J</mi></mrow><annotation encoding="application/x-tex"> I * 1/J = I / J</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span></span></span></span> is false when <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>J</mi></mrow><annotation encoding="application/x-tex">J</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span></span></span></span> is not invertible, so I wouldn't push it too far with the notation <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>I</mi><mrow><mo>−</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">I^{-1}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span>.</p>



<a name="215882831"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Defining%20%60has_inv%60%20when%20only%20some%20elements%20have%20an%20inverse/near/215882831" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Defining.20.60has_inv.60.20when.20only.20some.20elements.20have.20an.20inverse.html#215882831">(Nov 06 2020 at 18:08)</a>:</h4>
<p>Ok, let's go with your suggestion.</p>



<a name="215882888"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Defining%20%60has_inv%60%20when%20only%20some%20elements%20have%20an%20inverse/near/215882888" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Defining.20.60has_inv.60.20when.20only.20some.20elements.20have.20an.20inverse.html#215882888">(Nov 06 2020 at 18:09)</a>:</h4>
<p>Does this mean that we can also put a <code>group_with_zero</code> instance on <code>fractional_ideal</code> assuming <code>dedekind_domain R</code>?</p>



<a name="215882917"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Defining%20%60has_inv%60%20when%20only%20some%20elements%20have%20an%20inverse/near/215882917" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Defining.20.60has_inv.60.20when.20only.20some.20elements.20have.20an.20inverse.html#215882917">(Nov 06 2020 at 18:09)</a>:</h4>
<p>Or is the fact that every nonzero is invertible (assuming DD) not yet in mathlib? (I lost track.)</p>



<a name="215882920"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Defining%20%60has_inv%60%20when%20only%20some%20elements%20have%20an%20inverse/near/215882920" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Defining.20.60has_inv.60.20when.20only.20some.20elements.20have.20an.20inverse.html#215882920">(Nov 06 2020 at 18:09)</a>:</h4>
<p>OK, I'll make a <code>PR</code> soon checking that everything is OK both in <code>fractional_ideals</code>, in <code>dedekind_domain</code> and in <code>submodules</code></p>



<a name="215882989"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Defining%20%60has_inv%60%20when%20only%20some%20elements%20have%20an%20inverse/near/215882989" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Defining.20.60has_inv.60.20when.20only.20some.20elements.20have.20an.20inverse.html#215882989">(Nov 06 2020 at 18:10)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/116395-maths/topic/Defining.20.60has_inv.60.20when.20only.20some.20elements.20have.20an.20inverse/near/215882917">said</a>:</p>
<blockquote>
<p>Or is the fact that every nonzero is invertible (assuming DD) not yet in mathlib? (I lost track.)</p>
</blockquote>
<p>It is <em>almost</em> in mathlib (we are working on this and hope to be done soon). Indeed, the idea would be then to put a <code>group_with_zero</code> structure on the fractional ideals of a DD.</p>



<a name="215890228"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Defining%20%60has_inv%60%20when%20only%20some%20elements%20have%20an%20inverse/near/215890228" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Defining.20.60has_inv.60.20when.20only.20some.20elements.20have.20an.20inverse.html#215890228">(Nov 06 2020 at 19:07)</a>:</h4>
<p><del>Its even a <a href="https://leanprover-community.github.io/mathlib_docs/find/linear_ordered_comm_group_with_zero">docs#linear_ordered_comm_group_with_zero</a> right? With respect to inclusion?</del> Oh wait inclusion isn't total, so it isn't! Sad</p>



<a name="215890645"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Defining%20%60has_inv%60%20when%20only%20some%20elements%20have%20an%20inverse/near/215890645" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Defining.20.60has_inv.60.20when.20only.20some.20elements.20have.20an.20inverse.html#215890645">(Nov 06 2020 at 19:11)</a>:</h4>
<p>I guess we need to create <code>ordered_comm_group_with_zero</code>?</p>



<a name="215890684"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Defining%20%60has_inv%60%20when%20only%20some%20elements%20have%20an%20inverse/near/215890684" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Defining.20.60has_inv.60.20when.20only.20some.20elements.20have.20an.20inverse.html#215890684">(Nov 06 2020 at 19:11)</a>:</h4>
<p>Maybe <code>ordered_semifield</code>?</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>