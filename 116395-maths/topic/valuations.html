---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/valuations.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html">valuations</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="127105553"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127105553" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127105553">(May 25 2018 at 22:47)</a>:</h4>
<p>Both the Fibonacci Squares project and the Adic Space project need valuations on rings -- one in rather more generality than the other. But let's start at the beginning. Does Lean have p-adic valuations on Z? In other words, is the function <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>v</mi><mi>p</mi></msub><mo>(</mo><mo>⋅</mo><mo>)</mo></mrow><annotation encoding="application/x-tex">v_p(\cdot)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"></span></span></span></span></span><span class="mopen">(</span><span class="mord">⋅</span><span class="mclose">)</span></span></span></span> on the non-zero integers (or even rationals) sending <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>p</mi><mi>n</mi></msup><mi>N</mi></mrow><annotation encoding="application/x-tex">p^nN</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="base"><span class="mord"><span class="mord mathit">p</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">n</span></span></span></span></span></span></span></span><span class="mord mathit" style="margin-right:0.10903em;">N</span></span></span></span> (with <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.10903em;">N</span></span></span></span> coprime to the prime <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="base"><span class="mord mathit">p</span></span></span></span>) to <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base"><span class="mord mathit">n</span></span></span></span>? The key theorems are <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>v</mi><mi>p</mi></msub><mo>(</mo><mi>a</mi><mi>b</mi><mo>)</mo><mo>=</mo><msub><mi>v</mi><mi>p</mi></msub><mo>(</mo><mi>a</mi><mo>)</mo><mo>+</mo><msub><mi>v</mi><mi>p</mi></msub><mo>(</mo><mi>b</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">v_p(ab)=v_p(a)+v_p(b)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"></span></span></span></span></span><span class="mopen">(</span><span class="mord mathit">a</span><span class="mord mathit">b</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"></span></span></span></span></span><span class="mopen">(</span><span class="mord mathit">a</span><span class="mclose">)</span><span class="mbin">+</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"></span></span></span></span></span><span class="mopen">(</span><span class="mord mathit">b</span><span class="mclose">)</span></span></span></span> and <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>v</mi><mi>p</mi></msub><mo>(</mo><mi>a</mi><mo>+</mo><mi>b</mi><mo>)</mo><mo>≥</mo><mi>min</mi><mo>{</mo><msub><mi>v</mi><mi>p</mi></msub><mo>(</mo><mi>a</mi><mo>)</mo><mo separator="true">,</mo><msub><mi>v</mi><mi>p</mi></msub><mo>(</mo><mi>b</mi><mo>)</mo><mo>}</mo></mrow><annotation encoding="application/x-tex">v_p(a+b)\geq\min\{v_p(a),v_p(b)\}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"></span></span></span></span></span><span class="mopen">(</span><span class="mord mathit">a</span><span class="mbin">+</span><span class="mord mathit">b</span><span class="mclose">)</span><span class="mrel">≥</span><span class="mop">min</span><span class="mopen">{</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"></span></span></span></span></span><span class="mopen">(</span><span class="mord mathit">a</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"></span></span></span></span></span><span class="mopen">(</span><span class="mord mathit">b</span><span class="mclose">)</span><span class="mclose">}</span></span></span></span> (where <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>v</mi><mi>p</mi></msub><mo>(</mo><mn>0</mn><mo>)</mo></mrow><annotation encoding="application/x-tex">v_p(0)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="base"><span class="mord"><span class="mord mathit" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathit mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"></span></span></span></span></span><span class="mopen">(</span><span class="mord mathrm">0</span><span class="mclose">)</span></span></span></span> is usually taken to be <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>+</mo><mi mathvariant="normal">∞</mi></mrow><annotation encoding="application/x-tex">+\infty</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.58333em;"></span><span class="strut bottom" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="base"><span class="mord">+</span><span class="mord mathrm">∞</span></span></span></span>).</p>



<a name="127105607"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127105607" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127105607">(May 25 2018 at 22:48)</a>:</h4>
<p>Perfectoid space valuations would take values in a certain kind of totally ordered monoid</p>



<a name="127105620"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127105620" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127105620">(May 25 2018 at 22:49)</a>:</h4>
<p>(and are of a slightly different nature -- they are really norms not valuations, so the total function <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>M</mi><mo>↦</mo><msup><mi>p</mi><mrow><mo>−</mo><msub><mi>v</mi><mi>p</mi></msub><mo>(</mo><mi>M</mi><mo>)</mo></mrow></msup></mrow><annotation encoding="application/x-tex">M \mapsto p^{-v_p(M)}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="strut" style="height:0.8879999999999999em;"></span><span class="strut bottom" style="height:1.0824399999999998em;vertical-align:-0.19444em;"></span><span class="base"><span class="mord mathit" style="margin-right:0.10903em;">M</span><span class="mrel">↦</span><span class="mord"><span class="mord mathit">p</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8879999999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight"><span class="mord mathit mtight" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.16454285714285716em;"><span style="top:-2.357em;margin-left:-0.03588em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathit mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2818857142857143em;"></span></span></span></span></span><span class="mopen mtight">(</span><span class="mord mathit mtight" style="margin-right:0.10903em;">M</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span></span></span></span> with target the non-negative reals would be an example).</p>



<a name="127106671"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127106671" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127106671">(May 25 2018 at 23:20)</a>:</h4>
<p>I have approximately this lying around somewhere</p>



<a name="127106845"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127106845" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127106845">(May 25 2018 at 23:27)</a>:</h4>
<p><a href="https://gist.github.com/rwbarton/599327954b01b2e840894189981172ea" target="_blank" title="https://gist.github.com/rwbarton/599327954b01b2e840894189981172ea">https://gist.github.com/rwbarton/599327954b01b2e840894189981172ea</a></p>



<a name="127106894"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127106894" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127106894">(May 25 2018 at 23:28)</a>:</h4>
<p>I guess <code>ord_add</code> is missing, but it should be easy to prove from the other stuff</p>



<a name="127107157"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127107157" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127107157">(May 25 2018 at 23:37)</a>:</h4>
<p>line 91 should now be</p>



<a name="127107159"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127107159" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127107159">(May 25 2018 at 23:37)</a>:</h4>
<p><code>         ...   = p * (p^r * k)   : by unfold pow nat.pow; ac_refl,</code></p>



<a name="127107162"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127107162" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127107162">(May 25 2018 at 23:37)</a>:</h4>
<p>[adding pow, probably because of some relatively recent change with <code>^</code>]</p>



<a name="127107276"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127107276" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127107276">(May 25 2018 at 23:40)</a>:</h4>
<p>Thanks so much! This is exactly what I wanted!</p>



<a name="127107285"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127107285" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127107285">(May 25 2018 at 23:40)</a>:</h4>
<p>What a great little community we are getting here!</p>



<a name="127107301"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127107301" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127107301">(May 25 2018 at 23:41)</a>:</h4>
<p>I'm just going to dump it in a subdirectory in my project called <code>Reid_Barton</code>. Is that OK?</p>



<a name="127107340"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127107340" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127107340">(May 25 2018 at 23:42)</a>:</h4>
<p>Is there a better way of doing things?</p>



<a name="127107625"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127107625" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127107625">(May 25 2018 at 23:53)</a>:</h4>
<p>Sure, no problem.<br>
The better way is probably to try to PR things into mathlib, but that's more effort.</p>



<a name="127107925"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127107925" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127107925">(May 26 2018 at 00:02)</a>:</h4>
<p><code>example : has_le (ℕ+) := by apply_instance -- fails</code></p>



<a name="127107937"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127107937" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127107937">(May 26 2018 at 00:03)</a>:</h4>
<p>Noticed this along the way. You've not proved the valuation of a + b but you've proved everything but. I've never worked with <code>\N+</code> before.</p>



<a name="127107991"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127107991" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127107991">(May 26 2018 at 00:04)</a>:</h4>
<p>Is there a good reason for not having le on <code>\N+</code>? I am making a little collection of random short mathlib proposals. I understand how mathlib works much better after my schemes exercise.</p>



<a name="127108119"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127108119" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127108119">(May 26 2018 at 00:09)</a>:</h4>
<p>I doubt there is any good reason. <code>pnat</code> isn't used that much, it seems. I remember finding it a little more annoying to use than I would have liked</p>



<a name="127108122"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127108122" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127108122">(May 26 2018 at 00:09)</a>:</h4>
<p>Particularly as there are coercions in both directions between <code>nat</code> and <code>pnat</code></p>



<a name="127108166"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127108166" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127108166">(May 26 2018 at 00:10)</a>:</h4>
<p>Is <code>ord_pow</code> broken?</p>



<a name="127108167"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127108167" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127108167">(May 26 2018 at 00:10)</a>:</h4>
<p>Or did I break it myself?</p>



<a name="127108177"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127108177" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127108177">(May 26 2018 at 00:11)</a>:</h4>
<p>It's quite possibly broken because it is about 2.5 months old</p>



<a name="127108178"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127108178" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127108178">(May 26 2018 at 00:11)</a>:</h4>
<p>do computer scientists really need a _coercion_ from <code>nat</code> to <code>pnat</code>?</p>



<a name="127108180"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127108180" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127108180">(May 26 2018 at 00:11)</a>:</h4>
<p>I just can't even guess what it would be</p>



<a name="127108183"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127108183" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127108183">(May 26 2018 at 00:11)</a>:</h4>
<p>"any one of a couple of random examples"</p>



<a name="127108278"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127108278" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127108278">(May 26 2018 at 00:14)</a>:</h4>
<p><code>lemma ord_pow {k : ℕ} {a : ℕ+} : ord p (a^k) = k * ord p a := ord_ppow</code></p>



<a name="127108279"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127108279" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127108279">(May 26 2018 at 00:14)</a>:</h4>
<p>:-)</p>



<a name="127108281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127108281" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127108281">(May 26 2018 at 00:14)</a>:</h4>
<p>I think some coercion magic happened?</p>



<a name="127109528"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127109528" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127109528">(May 26 2018 at 00:58)</a>:</h4>
<p>Is there a type Nat union {infinity}? I mean, it's option Nat but I want the obvious le, add and min functions (and don't want to write them if they're already there). The reason I ask is to extend p-adic valuation to zero, and I think I do have to add infinity, because the standard CS answer of just defining it to be 37 or whatever and ploughing on regardless doesn't seem to work here, because then things like min are wrong.</p>



<a name="127109552"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127109552" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127109552">(May 26 2018 at 00:59)</a>:</h4>
<p>it's called the ordinal omega+1 :D</p>



<a name="127109604"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127109604" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127109604">(May 26 2018 at 01:00)</a>:</h4>
<p>:D</p>



<a name="127109613"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127109613" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127109613">(May 26 2018 at 01:01)</a>:</h4>
<p>Things which I want to be there, are more and more often beginning to be there :D</p>



<a name="127109668"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127109668" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127109668">(May 26 2018 at 01:03)</a>:</h4>
<p>Anyone fancy univariate polynomials over a field (division algorithm, degree function with the usual problems at 0, gcd, unique factorization?)</p>



<a name="127109673"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127109673" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127109673">(May 26 2018 at 01:04)</a>:</h4>
<p>I'm seeing that pop up more and more. Lean has multivariate polynomials but I think these deserve to be a special class rather than constantly carrying around the type "unit" for your list of variables.</p>



<a name="127109730"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127109730" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127109730">(May 26 2018 at 01:05)</a>:</h4>
<p><span class="user-mention" data-user-id="111651">@Nicholas Scheel</span> do you want to try this? I'm going to show your work on Z[alpha] to the British Maths Olympiad squad tomorrow! See what they make of it.</p>



<a name="127109786"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127109786" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127109786">(May 26 2018 at 01:07)</a>:</h4>
<p>Some stuff is there by a student of Johannes in his mason-stother directory but I don't think it's all there. And didn't someone do some Euclidean Algorithm stuff recently? Some student of Scott maybe? That might help I guess.</p>



<a name="127109793"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127109793" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127109793">(May 26 2018 at 01:07)</a>:</h4>
<p>We need univariate polynomials for the Fibonacci project, as you know.</p>



<a name="127109800"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127109800" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127109800">(May 26 2018 at 01:07)</a>:</h4>
<p>Or maybe Kenny or Chris will do it now their exams are over.</p>



<a name="127109843"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127109843" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127109843">(May 26 2018 at 01:08)</a>:</h4>
<p>A fair amount of this stuff should be tidied up and put in mathlib, so it's all in one place.</p>



<a name="127109967"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127109967" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Ashworth <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127109967">(May 26 2018 at 01:12)</a>:</h4>
<p>hah, won't you soon have your own army of undergraduates working for you over the summer?</p>



<a name="127109993"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127109993" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127109993">(May 26 2018 at 01:13)</a>:</h4>
<p>Over 20 undergrads now</p>



<a name="127109997"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127109997" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127109997">(May 26 2018 at 01:13)</a>:</h4>
<p>They start 2nd July</p>



<a name="127109998"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127109998" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127109998">(May 26 2018 at 01:13)</a>:</h4>
<p>It's going to be a crazy summer!</p>



<a name="127110000"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127110000" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127110000">(May 26 2018 at 01:14)</a>:</h4>
<p>2 months!</p>



<a name="127110674"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127110674" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127110674">(May 26 2018 at 01:39)</a>:</h4>
<p>I am so rubbish at coe</p>



<a name="127110679"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127110679" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127110679">(May 26 2018 at 01:39)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">pgcd_coe_something</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">pgcd</span> <span class="n">a</span> <span class="n">b</span> <span class="bp">=</span> <span class="n">gcd</span> <span class="n">a</span> <span class="n">b</span> <span class="o">:=</span> <span class="k">begin</span>
<span class="n">unfold</span> <span class="n">pgcd</span><span class="o">,</span>
<span class="c1">--rw pnat.coe_nat_coe a, -- I am so rubbish at coe</span>
<span class="n">sorry</span>
<span class="kn">end</span>
</pre></div>



<a name="127110681"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127110681" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127110681">(May 26 2018 at 01:39)</a>:</h4>
<p>This is Reid's pgcd from his gist from earlier</p>



<a name="127111216"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127111216" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127111216">(May 26 2018 at 02:01)</a>:</h4>
<blockquote>
<p><a href="https://gist.github.com/rwbarton/599327954b01b2e840894189981172ea" target="_blank" title="https://gist.github.com/rwbarton/599327954b01b2e840894189981172ea">https://gist.github.com/rwbarton/599327954b01b2e840894189981172ea</a></p>
</blockquote>



<a name="127111362"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127111362" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127111362">(May 26 2018 at 02:06)</a>:</h4>
<blockquote>
<p>Is there a type Nat union {infinity}?</p>
</blockquote>
<p>As of this morning, there is a <code>with_top A</code> structure that adds an infinity element to any order. So <code>with_top nat</code> is just what you want.</p>



<a name="127111551"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127111551" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127111551">(May 26 2018 at 02:14)</a>:</h4>
<p>wow what a coincidence lol</p>



<a name="127111894"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127111894" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127111894">(May 26 2018 at 02:28)</a>:</h4>
<blockquote>
<p>do computer scientists really need a _coercion_ from nat to pnat?</p>
</blockquote>
<p>Hm, my original concern was that if you wanted to write 5 as a pnat you would need to write &lt;5, dec_trivial&gt; which is obviously cumbersome. But actually since pnat has <code>has_one</code> and <code>has_add</code> that's actually enough for <code>bit0</code> and <code>bit1</code> to work, meaning that <code>(5 : pnat)</code> works fine (being defined as <code>bit1 (bit0 1)</code> where the 1 and addition are interpreted in <code>pnat</code>). So maybe this isn't needed. I'll see what breaks if I remove it, I agree it's not great to have a non-identity looking coercion</p>



<a name="127111903"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127111903" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127111903">(May 26 2018 at 02:30)</a>:</h4>
<p>I was thinking of using <code>pnat</code> for the domain of <code>Z/nZ</code> btw, which will give it a better algebraic theory than <code>fin n</code></p>



<a name="127112038"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127112038" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127112038">(May 26 2018 at 02:34)</a>:</h4>
<blockquote>
<blockquote>
<p>Is there a type Nat union {infinity}?</p>
</blockquote>
<p>As of this morning, there is a <code>with_top A</code> structure that adds an infinity element to any order. So <code>with_top nat</code> is just what you want.</p>
</blockquote>
<p>Mario -- did you see Remark 1.5 of <a href="http://www2.math.uni-paderborn.de/fileadmin/Mathematik/People/wedhorn/Lehre/AdicSpaces.pdf" target="_blank" title="http://www2.math.uni-paderborn.de/fileadmin/Mathematik/People/wedhorn/Lehre/AdicSpaces.pdf">www2.math.uni-paderborn.de/fileadmin/Mathematik/People/wedhorn/Lehre/AdicSpaces.pdf</a> (page 4)? There is a fundamental construction in adic spaces -- adding a "bottom" element zero to a a totally ordered group (e.g the group of positive reals) and creating a totally ordered monoid. Is this sort of thing easy to do now?</p>



<a name="127112046"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127112046" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicholas Scheel <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127112046">(May 26 2018 at 02:35)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> I could spend an hour or two on it ... should I use multivariate polynomials, should I use finsupp, or just do a direct list encoding?</p>



<a name="127112134"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127112134" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127112134">(May 26 2018 at 02:39)</a>:</h4>
<p>Actually your comment got me thinking about this. There is a related construction, let's say <code>with_zero A</code>, which adds a unit to any additive semigroup; and if the zero and bottom coincide then you get a composite structure which works well on some kinds of ordered groups, I would imagine. Similarly you can make sense of addition with infinity, and that structure coheres with the order of <code>with_top</code>, so that you can add an infinity element to an ordered additive semigroup.</p>



<a name="127112177"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127112177" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127112177">(May 26 2018 at 02:40)</a>:</h4>
<p>This could be used to factor <code>ennreal</code> into <code>with_top nnreal</code></p>



<a name="127112184"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127112184" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127112184">(May 26 2018 at 02:41)</a>:</h4>
<p>rip ennreal 2017-2018</p>



<a name="127112217"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127112217" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127112217">(May 26 2018 at 02:42)</a>:</h4>
<p>born <a href="https://github.com/leanprover/mathlib/commit/51042cde36e3ff513866c7ee6a1909650ba7396e#diff-47b6fc31ab3cbab9a5353881776d1008" target="_blank" title="https://github.com/leanprover/mathlib/commit/51042cde36e3ff513866c7ee6a1909650ba7396e#diff-47b6fc31ab3cbab9a5353881776d1008">Aug 30, 2017</a></p>



<a name="127112226"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127112226" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127112226">(May 26 2018 at 02:42)</a>:</h4>
<p>It probably wouldn't go away as a definition, it has enough properties on its own that make it worthy of study, but it would simplify and generalize some theorems</p>



<a name="127112232"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127112232" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127112232">(May 26 2018 at 02:43)</a>:</h4>
<p>But to answer your question, currently <code>with_bot</code> and <code>with_top</code> only deal with the order structure, they don't have any monoid stuff</p>



<a name="127163781"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127163781" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127163781">(May 27 2018 at 13:00)</a>:</h4>
<blockquote>
<blockquote>
<p>do computer scientists really need a _coercion_ from nat to pnat?</p>
</blockquote>
<p>Hm, my original concern was that if you wanted to write 5 as a pnat you would need to write &lt;5, dec_trivial&gt; which is obviously cumbersome. But actually since pnat has <code>has_one</code> and <code>has_add</code> that's actually enough for <code>bit0</code> and <code>bit1</code> to work, meaning that <code>(5 : pnat)</code> works fine (being defined as <code>bit1 (bit0 1)</code> where the 1 and addition are interpreted in <code>pnat</code>). So maybe this isn't needed. I'll see what breaks if I remove it, I agree it's not great to have a non-identity looking coercion</p>
</blockquote>
<p>Is it possible to keep the coercion but demand that the type class resolution system produces a proof of positivity before it is applied? I think that this would very much mirror the way a mathematician thought about the issue.</p>



<a name="127163783"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127163783" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127163783">(May 27 2018 at 13:00)</a>:</h4>
<p>You might find that if proofs of positivity are carried around</p>



<a name="127163787"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127163787" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127163787">(May 27 2018 at 13:01)</a>:</h4>
<p>with instances like "a &gt; 0 and b &gt; 0 implies a + b &gt; 0"</p>



<a name="127163792"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127163792" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127163792">(May 27 2018 at 13:01)</a>:</h4>
<p>then the coercions work fine.</p>



<a name="127163793"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127163793" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127163793">(May 27 2018 at 13:01)</a>:</h4>
<p>With the current system you just occasionally see these \u \u x things</p>



<a name="127163833"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127163833" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127163833">(May 27 2018 at 13:02)</a>:</h4>
<p>and it's only at the point where you go to cancel them and they won't cancel that you realise you've made a mathematical slip</p>



<a name="127163838"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127163838" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127163838">(May 27 2018 at 13:03)</a>:</h4>
<p>Can we make the coercion part of type class resolution better?</p>



<a name="127164025"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127164025" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127164025">(May 27 2018 at 13:10)</a>:</h4>
<p>this isn't how coercions work</p>



<a name="127164032"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127164032" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127164032">(May 27 2018 at 13:10)</a>:</h4>
<p>they are functions <code>A -&gt; B</code>, nothing else is allowed in there</p>



<a name="127164033"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127164033" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127164033">(May 27 2018 at 13:10)</a>:</h4>
<p>in particular, coercions cannot be partial</p>



<a name="127164037"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127164037" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127164037">(May 27 2018 at 13:10)</a>:</h4>
<p>except the coercion <code>Prop -&gt; bool</code> which is magical</p>



<a name="127164524"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127164524" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127164524">(May 27 2018 at 13:31)</a>:</h4>
<p>CS 101 question alert :-/</p>



<a name="127164526"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127164526" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127164526">(May 27 2018 at 13:32)</a>:</h4>
<p>What's the theorem <code>\&lt;a,h\&gt;.val = a</code> called for subtypes?</p>



<a name="127164565"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127164565" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127164565">(May 27 2018 at 13:32)</a>:</h4>
<p>rfl</p>



<a name="127164567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127164567" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127164567">(May 27 2018 at 13:32)</a>:</h4>
<p>I was trying not to use rfl</p>



<a name="127164570"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127164570" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127164570">(May 27 2018 at 13:32)</a>:</h4>
<p>I was looking at the proof that \u \u a =a</p>



<a name="127164578"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127164578" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127164578">(May 27 2018 at 13:33)</a>:</h4>
<p>I just figured that I had a bunch of stuff about coercions that I needed to understand better before I said too much more about this</p>



<a name="127164581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127164581" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127164581">(May 27 2018 at 13:33)</a>:</h4>
<p>and then I ended up going down a rabbit hole watching the type class resolution system unfold :-/</p>



<a name="127164582"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127164582" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127164582">(May 27 2018 at 13:33)</a>:</h4>
<p>Actually I don't understand.</p>



<a name="127164583"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127164583" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127164583">(May 27 2018 at 13:33)</a>:</h4>
<p>How do I rewrite \u \u a as a?</p>



<a name="127164586"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127164586" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127164586">(May 27 2018 at 13:33)</a>:</h4>
<p>Wait</p>



<a name="127164589"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127164589" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127164589">(May 27 2018 at 13:33)</a>:</h4>
<p>I was asking for the name of the theorem</p>



<a name="127164590"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127164590" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127164590">(May 27 2018 at 13:33)</a>:</h4>
<p>not the proof</p>



<a name="127164634"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127164634" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127164634">(May 27 2018 at 13:34)</a>:</h4>
<p>you haven't given me enough info to answer the question</p>



<a name="127164638"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127164638" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127164638">(May 27 2018 at 13:34)</a>:</h4>
<p>I'll formulate something precise.</p>



<a name="127164639"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127164639" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127164639">(May 27 2018 at 13:34)</a>:</h4>
<p>lots of theorems look like \u \u a = a</p>



<a name="127164641"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127164641" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127164641">(May 27 2018 at 13:35)</a>:</h4>
<p>I need to know what is the type of a, and the type of \u a</p>



<a name="127164650"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127164650" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127164650">(May 27 2018 at 13:35)</a>:</h4>
<p>[pause whilst we discover if Kevin is talking nonsense]</p>



<a name="127164817"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127164817" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127164817">(May 27 2018 at 13:41)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">variables</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span>
<span class="kn">theorem</span> <span class="n">what_am_i_called</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">p</span> <span class="n">a</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">subtype</span><span class="bp">.</span><span class="n">mk</span> <span class="n">a</span> <span class="n">h</span><span class="o">)</span><span class="bp">.</span><span class="n">val</span> <span class="bp">=</span> <span class="n">a</span> <span class="o">:=</span> <span class="n">rfl</span>
</pre></div>



<a name="127164818"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127164818" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127164818">(May 27 2018 at 13:41)</a>:</h4>
<p>The question.</p>



<a name="127164862"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127164862" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127164862">(May 27 2018 at 13:42)</a>:</h4>
<p>because I want to use you in a rewrite</p>



<a name="127164864"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127164864" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127164864">(May 27 2018 at 13:42)</a>:</h4>
<p>so I need to know your name</p>



<a name="127164867"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127164867" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127164867">(May 27 2018 at 13:42)</a>:</h4>
<p>the theorem doesn't have a name, it is done automatically by dsimp</p>



<a name="127164876"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127164876" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127164876">(May 27 2018 at 13:43)</a>:</h4>
<p>And there's you guys saying our naming conventions are bad</p>



<a name="127164877"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127164877" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127164877">(May 27 2018 at 13:43)</a>:</h4>
<p>same as how beta reduction isn't a named theorem</p>



<a name="127164879"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127164879" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127164879">(May 27 2018 at 13:43)</a>:</h4>
<p>dsimp is what?</p>



<a name="127164881"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127164881" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127164881">(May 27 2018 at 13:43)</a>:</h4>
<p>I used it a couple of times recently</p>



<a name="127164882"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127164882" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127164882">(May 27 2018 at 13:43)</a>:</h4>
<p>Kenny told me "just use dsimp" and I'm like "ooh my goal has gone from 1 page to 5 lines"</p>



<a name="127164920"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127164920" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127164920">(May 27 2018 at 13:44)</a>:</h4>
<p>it's <code>simp</code> for definitional rewrites</p>



<a name="127164924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127164924" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127164924">(May 27 2018 at 13:44)</a>:</h4>
<p>which way does it go?</p>



<a name="127164925"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127164925" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127164925">(May 27 2018 at 13:44)</a>:</h4>
<p>What does it actually do?</p>



<a name="127164927"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127164927" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127164927">(May 27 2018 at 13:44)</a>:</h4>
<p>If it sees my subtype.mk.val stuff it just says "ooh I'll remove that"</p>



<a name="127164929"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127164929" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127164929">(May 27 2018 at 13:44)</a>:</h4>
<p>but does it ever add it?</p>



<a name="127164932"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127164932" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127164932">(May 27 2018 at 13:44)</a>:</h4>
<p>it does exactly the same sort of thing as simp</p>



<a name="127164937"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127164937" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127164937">(May 27 2018 at 13:45)</a>:</h4>
<p>oh great :-)</p>



<a name="127164940"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127164940" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127164940">(May 27 2018 at 13:45)</a>:</h4>
<p>Another black box :-)</p>



<a name="127164944"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127164944" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127164944">(May 27 2018 at 13:45)</a>:</h4>
<p>I see</p>



<a name="127164945"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127164945" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127164945">(May 27 2018 at 13:45)</a>:</h4>
<p>it cancels projections applied to structure mk</p>



<a name="127164947"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127164947" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127164947">(May 27 2018 at 13:45)</a>:</h4>
<p>What else does it do?</p>



<a name="127164948"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127164948" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127164948">(May 27 2018 at 13:45)</a>:</h4>
<p>this is the structure iota rule</p>



<a name="127164951"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127164951" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127164951">(May 27 2018 at 13:45)</a>:</h4>
<p>What's a complete list of what it does?</p>



<a name="127164952"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127164952" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127164952">(May 27 2018 at 13:45)</a>:</h4>
<p>Would I be able to understand the source code?</p>



<a name="127164955"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127164955" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127164955">(May 27 2018 at 13:45)</a>:</h4>
<p>Kenny says that Lean does not do magic but this is still magic to me</p>



<a name="127164995"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127164995" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127164995">(May 27 2018 at 13:46)</a>:</h4>
<p>dsimp has a config too</p>



<a name="127164997"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127164997" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127164997">(May 27 2018 at 13:46)</a>:</h4>
<p>53 extra options?</p>



<a name="127165001"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165001" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165001">(May 27 2018 at 13:46)</a>:</h4>
<p>that has a fairly complete list of the kinds of automatic reductions it does, beta, eta, zeta, iota etc</p>



<a name="127165007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165007" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165007">(May 27 2018 at 13:47)</a>:</h4>
<p>and it also uses <code>@[simp]</code> lemmas that are also rfl lemmas</p>



<a name="127165013"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165013" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165013">(May 27 2018 at 13:47)</a>:</h4>
<p>as well as definition unfolding when you give it to the bracket list or use <code>!</code></p>



<a name="127165014"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165014" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165014">(May 27 2018 at 13:47)</a>:</h4>
<p>I would be really interested in watching a video or seeing an article about what dsimp and/or simp do. If I understood what they were doing I wouldn't still just be hopefully typing simp every now and then just to see if I can make the goal go away</p>



<a name="127165046"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165046" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165046">(May 27 2018 at 13:48)</a>:</h4>
<p>Haven't we had this conversation before?</p>



<a name="127165057"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165057" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165057">(May 27 2018 at 13:48)</a>:</h4>
<p>I'm pretty sure you wrote that article</p>



<a name="127165060"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165060" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165060">(May 27 2018 at 13:48)</a>:</h4>
<p>I feel like there's still a whole bunch of things I don't fully understand with all this business</p>



<a name="127165061"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165061" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165061">(May 27 2018 at 13:48)</a>:</h4>
<p>I'll read my own docs and see if this enlightens me</p>



<a name="127165117"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165117" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Andrew Ashworth <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165117">(May 27 2018 at 13:50)</a>:</h4>
<p>The textbook "term rewriting and all that" is pretty good on this subject, if your uni library has it</p>



<a name="127165171"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165171" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicholas Scheel <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165171">(May 27 2018 at 13:52)</a>:</h4>
<p>simplification using definition equalities, I believe</p>



<a name="127165225"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165225" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165225">(May 27 2018 at 13:54)</a>:</h4>
<p>So my real question was "how do I do a definitional rewrite in tactic mode", and the answer is "don't use rw, use show"</p>



<a name="127165231"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165231" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165231">(May 27 2018 at 13:55)</a>:</h4>
<p><code>change with</code> is literally definitional rw</p>



<a name="127165232"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165232" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165232">(May 27 2018 at 13:55)</a>:</h4>
<blockquote>
<p>The textbook "term rewriting and all that" is pretty good on this subject, if your uni library has it</p>
</blockquote>
<p>Thanks Andrew. My university can get any book for me.</p>



<a name="127165274"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165274" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165274">(May 27 2018 at 13:56)</a>:</h4>
<p>but <code>dsimp</code> is nice for just cleaning up some common patterns</p>



<a name="127165275"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165275" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165275">(May 27 2018 at 13:56)</a>:</h4>
<p>Equality is asymmetric for you people, isn't it</p>



<a name="127165278"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165278" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165278">(May 27 2018 at 13:57)</a>:</h4>
<p>This is only just dawning on me</p>



<a name="127165281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165281" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165281">(May 27 2018 at 13:57)</a>:</h4>
<p>yes, with term rewrites direction really matters</p>



<a name="127165282"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165282" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165282">(May 27 2018 at 13:57)</a>:</h4>
<p>If you write a = b, and if one side was more complicated than the other</p>



<a name="127165283"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165283" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165283">(May 27 2018 at 13:57)</a>:</h4>
<p>you would put the more complicated side first</p>



<a name="127165284"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165284" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165284">(May 27 2018 at 13:57)</a>:</h4>
<p>Is this just some general principle?</p>



<a name="127165287"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165287" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165287">(May 27 2018 at 13:57)</a>:</h4>
<p>yeah, simp simplifies</p>



<a name="127165288"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165288" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165288">(May 27 2018 at 13:58)</a>:</h4>
<p>it's not called complexify</p>



<a name="127165330"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165330" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165330">(May 27 2018 at 13:58)</a>:</h4>
<p>I had not realised that = was asymmetric</p>



<a name="127165331"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165331" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165331">(May 27 2018 at 13:58)</a>:</h4>
<p>in any way whatsoever</p>



<a name="127165332"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165332" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165332">(May 27 2018 at 13:58)</a>:</h4>
<p>I have a different definition of = to you</p>



<a name="127165333"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165333" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165333">(May 27 2018 at 13:58)</a>:</h4>
<p>= itself is symmetric</p>



<a name="127165334"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165334" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165334">(May 27 2018 at 13:58)</a>:</h4>
<p>symmetric in some theorem sense</p>



<a name="127165336"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165336" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165336">(May 27 2018 at 13:59)</a>:</h4>
<p>but you have to decide which goes first</p>



<a name="127165340"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165340" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165340">(May 27 2018 at 13:59)</a>:</h4>
<p>and we don't care</p>



<a name="127165343"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165343" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165343">(May 27 2018 at 13:59)</a>:</h4>
<p>but simp and dsimp takes the list of simp lemmas and use them as a rewrite graph</p>



<a name="127165344"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165344" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165344">(May 27 2018 at 13:59)</a>:</h4>
<p>and this is directed</p>



<a name="127165345"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165345" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165345">(May 27 2018 at 13:59)</a>:</h4>
<p>Right, I've just been learning this from my own notes</p>



<a name="127165347"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165347" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165347">(May 27 2018 at 13:59)</a>:</h4>
<p>Aah!</p>



<a name="127165349"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165349" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165349">(May 27 2018 at 14:00)</a>:</h4>
<p>I've just realised what my question actually is.</p>



<a name="127165394"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165394" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165394">(May 27 2018 at 14:00)</a>:</h4>
<p>My question is this: "I never ever tag anything with @[simp]. I make loads of structures. Can you give me some basic advice over which trivial lemmas I should be (a) proving and (b) tagging with simp?"</p>



<a name="127165403"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165403" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165403">(May 27 2018 at 14:01)</a>:</h4>
<p>Unfortunately, the answer is "depends on the structure"</p>



<a name="127165406"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165406" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165406">(May 27 2018 at 14:01)</a>:</h4>
<p>some axioms of a structure should be simp lemmas</p>



<a name="127165407"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165407" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165407">(May 27 2018 at 14:01)</a>:</h4>
<p>subtype</p>



<a name="127165408"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165408" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165408">(May 27 2018 at 14:01)</a>:</h4>
<p>like <code>zero_add</code></p>



<a name="127165409"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165409" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165409">(May 27 2018 at 14:01)</a>:</h4>
<p>A type and a proof</p>



<a name="127165449"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165449" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165449">(May 27 2018 at 14:02)</a>:</h4>
<p>I don't think subtype has any simp lemmas</p>



<a name="127165451"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165451" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165451">(May 27 2018 at 14:02)</a>:</h4>
<p>which is to say, there is nothing that sticks out as necessary</p>



<a name="127165453"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165453" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165453">(May 27 2018 at 14:02)</a>:</h4>
<p>oh, &lt;a, h1&gt; = &lt;b, h2&gt; &lt;-&gt; a = b should be a simp lemma</p>



<a name="127165455"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165455" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165455">(May 27 2018 at 14:03)</a>:</h4>
<p>What about presheaf of types on a topological space?</p>



<a name="127165459"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165459" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165459">(May 27 2018 at 14:03)</a>:</h4>
<p>I made that structure once</p>



<a name="127165461"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165461" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165461">(May 27 2018 at 14:03)</a>:</h4>
<p>but actually I think simp might do that automatically anyway</p>



<a name="127165462"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165462" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165462">(May 27 2018 at 14:03)</a>:</h4>
<p>I'll find you a link</p>



<a name="127165499"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165499" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165499">(May 27 2018 at 14:04)</a>:</h4>
<p>simp will already do a few things by default on all structures, which more or less covers all the general recommendations</p>



<a name="127165503"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165503" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165503">(May 27 2018 at 14:05)</a>:</h4>
<p><a href="https://github.com/kbuzzard/lean-stacks-project/blob/6617de7dd5f11af46f0c7e0d2223ee065d71b9f3/src/tag006E.lean#L4" target="_blank" title="https://github.com/kbuzzard/lean-stacks-project/blob/6617de7dd5f11af46f0c7e0d2223ee065d71b9f3/src/tag006E.lean#L4">https://github.com/kbuzzard/lean-stacks-project/blob/6617de7dd5f11af46f0c7e0d2223ee065d71b9f3/src/tag006E.lean#L4</a></p>



<a name="127165511"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165511" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165511">(May 27 2018 at 14:05)</a>:</h4>
<p>I am proud to say that I did actually write a simp lemma for that</p>



<a name="127165512"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165512" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165512">(May 27 2018 at 14:05)</a>:</h4>
<p>My simp lemma says "crap, I made a poor design decision when designing that structure, but I can't be bothered to change it now"</p>



<a name="127165514"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165514" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165514">(May 27 2018 at 14:05)</a>:</h4>
<p>that's just what I would have recommended</p>



<a name="127165555"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165555" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165555">(May 27 2018 at 14:06)</a>:</h4>
<p>except possibly for the dependent args</p>



<a name="127165556"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165556" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165556">(May 27 2018 at 14:06)</a>:</h4>
<p>You would recommend the change in the structure?</p>



<a name="127165558"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165558" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165558">(May 27 2018 at 14:06)</a>:</h4>
<p>that doesn't matter so much</p>



<a name="127165559"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165559" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165559">(May 27 2018 at 14:06)</a>:</h4>
<p>Oh!</p>



<a name="127165562"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165562" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165562">(May 27 2018 at 14:06)</a>:</h4>
<p>You don't care which definition I use if they're all equivalent?</p>



<a name="127165567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165567" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165567">(May 27 2018 at 14:07)</a>:</h4>
<p>I was going to bite the bullet one day and edit the definition of that structure. You're saying that's a crazy idea?</p>



<a name="127165568"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165568" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165568">(May 27 2018 at 14:07)</a>:</h4>
<p>it affects the proof goals when defining structures with <code>{ stuff := ... }</code></p>



<a name="127165569"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165569" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165569">(May 27 2018 at 14:07)</a>:</h4>
<p>so it depends on how you usually prove such goals</p>



<a name="127165570"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165570" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165570">(May 27 2018 at 14:07)</a>:</h4>
<p>I was going to change "f = g circ h" with "forall x, g (h x) = f x"</p>



<a name="127165571"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165571" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165571">(May 27 2018 at 14:08)</a>:</h4>
<p>if the first thing you do is always funext, then that's a hint</p>



<a name="127165608"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165608" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165608">(May 27 2018 at 14:08)</a>:</h4>
<p>Note the equality "f = g circ h"</p>



<a name="127165611"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165611" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165611">(May 27 2018 at 14:08)</a>:</h4>
<p>the more complicated side on the right</p>



<a name="127165612"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165612" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165612">(May 27 2018 at 14:08)</a>:</h4>
<p>is that also unwise?</p>



<a name="127165613"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165613" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165613">(May 27 2018 at 14:08)</a>:</h4>
<p>actually here I recommend that ordering</p>



<a name="127165615"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165615" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165615">(May 27 2018 at 14:08)</a>:</h4>
<p>The thing about funext was that there were a few times when the fact that it was comp was really useful, it made some proofs really nice and short</p>



<a name="127165616"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165616" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165616">(May 27 2018 at 14:08)</a>:</h4>
<p>because the argument to f is getting simpler</p>



<a name="127165617"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165617" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165617">(May 27 2018 at 14:08)</a>:</h4>
<p><em>boggle</em></p>



<a name="127165622"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165622" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165622">(May 27 2018 at 14:09)</a>:</h4>
<p>I don't understand</p>



<a name="127165623"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165623" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165623">(May 27 2018 at 14:09)</a>:</h4>
<p>think of it as <code>f (comp a b) = f a o f b</code></p>



<a name="127165670"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165670" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165670">(May 27 2018 at 14:10)</a>:</h4>
<p>here simp will want to go left to right to make the argument to <code>f</code> as simple as possible</p>



<a name="127165671"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165671" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165671">(May 27 2018 at 14:10)</a>:</h4>
<p>It's <code>res U W x = res V W (res U V x)</code></p>



<a name="127165672"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165672" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165672">(May 27 2018 at 14:10)</a>:</h4>
<p>that's what it is really</p>



<a name="127165673"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165673" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165673">(May 27 2018 at 14:10)</a>:</h4>
<p>You still want it that way round?</p>



<a name="127165680"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165680" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165680">(May 27 2018 at 14:11)</a>:</h4>
<p>that's not a good simp lemma</p>



<a name="127165681"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165681" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165681">(May 27 2018 at 14:11)</a>:</h4>
<p>"restriction of a function on U down to V and then down to W equals restriction directly down to W"</p>



<a name="127165684"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165684" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165684">(May 27 2018 at 14:11)</a>:</h4>
<p>Either way round?</p>



<a name="127165726"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165726" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165726">(May 27 2018 at 14:12)</a>:</h4>
<p>Okay, I guess in this case since it's a proof arg it shouldn't be a metric of simplicity</p>



<a name="127165727"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165727" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165727">(May 27 2018 at 14:12)</a>:</h4>
<p>so in that case you want <code>res V W (res U V x) = res U W x</code></p>



<a name="127165729"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165729" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165729">(May 27 2018 at 14:12)</a>:</h4>
<p>This is the thing I don't understand. It takes two functions <code>res U V</code> and <code>res W V</code> and it returns one function. It's made it simpler. I don't understand what should be a simp lemma.</p>



<a name="127165735"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165735" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165735">(May 27 2018 at 14:13)</a>:</h4>
<p>Aah so you do want to switch the order?</p>



<a name="127165736"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165736" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165736">(May 27 2018 at 14:13)</a>:</h4>
<p>And then make a simp lemma?</p>



<a name="127165781"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165781" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165781">(May 27 2018 at 14:14)</a>:</h4>
<blockquote>
<p>Okay, I guess in this case since it's a proof arg it shouldn't be a metric of simplicity</p>
</blockquote>
<p>I don't understand that either :-/</p>



<a name="127165790"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165790" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165790">(May 27 2018 at 14:15)</a>:</h4>
<p>You have this extra argument that has a big term in it</p>



<a name="127165795"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165795" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165795">(May 27 2018 at 14:15)</a>:</h4>
<p>I've mentioned that proof args are bad for rewrites before</p>



<a name="127165838"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165838" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165838">(May 27 2018 at 14:16)</a>:</h4>
<p>Why?</p>



<a name="127165839"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165839" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165839">(May 27 2018 at 14:16)</a>:</h4>
<p>proof args are fundamental statements about the situation</p>



<a name="127165850"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165850" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165850">(May 27 2018 at 14:17)</a>:</h4>
<p>Are you saying that associativity of addition should not be a simp lemma?</p>



<a name="127165892"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165892" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165892">(May 27 2018 at 14:18)</a>:</h4>
<p>associativity of addition is both a simp lemma and seems to have the more complicated side on the right.</p>



<a name="127165901"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165901" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165901">(May 27 2018 at 14:19)</a>:</h4>
<p>None of it adds up to me. I am still nowhere near understanding what should be a simp lemma.</p>



<a name="127165904"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165904" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165904">(May 27 2018 at 14:19)</a>:</h4>
<p>assoc is a special case</p>



<a name="127165906"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165906" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165906">(May 27 2018 at 14:19)</a>:</h4>
<p><em>boggle</em></p>



<a name="127165908"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165908" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165908">(May 27 2018 at 14:19)</a>:</h4>
<p>I'll add it to the docs</p>



<a name="127165909"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165909" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165909">(May 27 2018 at 14:19)</a>:</h4>
<p>simp has special handling for comm/assoc operations</p>



<a name="127165948"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165948" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165948">(May 27 2018 at 14:20)</a>:</h4>
<p>which uses a convention which goes against the "simpler argument on the right" convention?</p>



<a name="127165950"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165950" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165950">(May 27 2018 at 14:20)</a>:</h4>
<p>it would not normally be a good simp lemma, because it doesn't simplify the term</p>



<a name="127165958"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165958" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165958">(May 27 2018 at 14:20)</a>:</h4>
<p><code>mul_one</code> is a simp lemma and it's a proof arg, if I've understood the last term correctly</p>



<a name="127165959"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165959" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165959">(May 27 2018 at 14:21)</a>:</h4>
<p>But simp will notice if you give it a lemma that looks like associativity and apply special algorithms to do smart things with that</p>



<a name="127165971"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165971" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165971">(May 27 2018 at 14:21)</a>:</h4>
<p>None of those have proof args</p>



<a name="127165973"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165973" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165973">(May 27 2018 at 14:21)</a>:</h4>
<p><em>oh</em></p>



<a name="127165976"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127165976" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127165976">(May 27 2018 at 14:21)</a>:</h4>
<p>I'm talking about proofs as arguments to functions you want to rewrite</p>



<a name="127166014"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166014" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166014">(May 27 2018 at 14:22)</a>:</h4>
<p>so in this case that would be like proof arguments to <code>mul</code> or <code>one</code></p>



<a name="127166015"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166015" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166015">(May 27 2018 at 14:22)</a>:</h4>
<p>I thought you were talking about proofs as arguments used to create a structure</p>



<a name="127166021"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166021" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166021">(May 27 2018 at 14:22)</a>:</h4>
<p>in your case I'm talking about <code>res</code> which has three proof args</p>



<a name="127166027"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166027" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166027">(May 27 2018 at 14:23)</a>:</h4>
<p>Would your opinion change if made them all work magically using type class resolution?</p>



<a name="127166028"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166028" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166028">(May 27 2018 at 14:23)</a>:</h4>
<p>yes</p>



<a name="127166066"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166066" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166066">(May 27 2018 at 14:24)</a>:</h4>
<p>that's an interesting idea, I'd have to see how messy the arguments can get</p>



<a name="127166073"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166073" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166073">(May 27 2018 at 14:24)</a>:</h4>
<p>The reason I didn't use type class resolution for those things was that when I wrote that code I had no idea how typeclass resolution system worked</p>



<a name="127166074"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166074" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166074">(May 27 2018 at 14:25)</a>:</h4>
<p>so I just over-rode it and would always pass the proofs manually</p>



<a name="127166082"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166082" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166082">(May 27 2018 at 14:25)</a>:</h4>
<p>and then later on in the project I was forced to work with rings and ring homs</p>



<a name="127166083"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166083" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166083">(May 27 2018 at 14:25)</a>:</h4>
<p>so I was forced to learn the system</p>



<a name="127166086"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166086" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166086">(May 27 2018 at 14:25)</a>:</h4>
<p>and we had that long thread with me moaning and learning about <code>letI</code></p>



<a name="127166279"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166279" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166279">(May 27 2018 at 14:32)</a>:</h4>
<p>Ok so coercions.</p>



<a name="127166280"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166280" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166280">(May 27 2018 at 14:32)</a>:</h4>
<p><code>theorem eew (Y : ℕ+) : ((Y : ℕ) : ℕ+) = Y := rfl -- fails</code></p>



<a name="127166282"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166282" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166282">(May 27 2018 at 14:32)</a>:</h4>
<p>That's not good, right?</p>



<a name="127166286"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166286" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166286">(May 27 2018 at 14:32)</a>:</h4>
<p>Should that be a simp lemma?</p>



<a name="127166295"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166295" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166295">(May 27 2018 at 14:33)</a>:</h4>
<p><code>ℕ+</code> is one of my favourite sets in ZFC</p>



<a name="127166296"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166296" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166296">(May 27 2018 at 14:34)</a>:</h4>
<p>Why is it so hard to work with here?</p>



<a name="127166333"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166333" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166333">(May 27 2018 at 14:34)</a>:</h4>
<p>Just because it's not a stupid semiring</p>



<a name="127166339"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166339" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166339">(May 27 2018 at 14:34)</a>:</h4>
<p>maybe it's a demisemiring</p>



<a name="127166349"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166349" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166349">(May 27 2018 at 14:35)</a>:</h4>
<p>that is a simp lemma, I think</p>



<a name="127166350"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166350" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166350">(May 27 2018 at 14:35)</a>:</h4>
<p>Aah here's a question.</p>



<a name="127166351"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166351" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166351">(May 27 2018 at 14:35)</a>:</h4>
<p>Let's say we ripped out the definition of pnat</p>



<a name="127166352"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166352" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166352">(May 27 2018 at 14:35)</a>:</h4>
<p><code>coe_nat_coe</code></p>



<a name="127166390"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166390" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166390">(May 27 2018 at 14:36)</a>:</h4>
<p>and replaced it with a straight inductive structure with one and succ</p>



<a name="127166396"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166396" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166396">(May 27 2018 at 14:36)</a>:</h4>
<p>Would that make <em>any</em> difference to <em>anything</em></p>



<a name="127166397"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166397" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166397">(May 27 2018 at 14:36)</a>:</h4>
<p>not really</p>



<a name="127166398"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166398" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166398">(May 27 2018 at 14:36)</a>:</h4>
<p>or you just write the new interface</p>



<a name="127166399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166399" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166399">(May 27 2018 at 14:36)</a>:</h4>
<p>and that's it</p>



<a name="127166400"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166400" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166400">(May 27 2018 at 14:36)</a>:</h4>
<p>No issue with compile time or running time</p>



<a name="127166401"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166401" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166401">(May 27 2018 at 14:36)</a>:</h4>
<p>or simp not working as well</p>



<a name="127166402"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166402" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166402">(May 27 2018 at 14:36)</a>:</h4>
<p>anything not using the interface would be affected, of course</p>



<a name="127166404"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166404" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166404">(May 27 2018 at 14:37)</a>:</h4>
<p>Aah</p>



<a name="127166410"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166410" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166410">(May 27 2018 at 14:37)</a>:</h4>
<p>anything accessing the innards of the structure</p>



<a name="127166411"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166411" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166411">(May 27 2018 at 14:37)</a>:</h4>
<p>i.e. if someone creates a pnat by writing &lt;2, dec_trivial&gt;</p>



<a name="127166413"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166413" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166413">(May 27 2018 at 14:37)</a>:</h4>
<p>instead of (2 : pnat)</p>



<a name="127166414"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166414" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166414">(May 27 2018 at 14:37)</a>:</h4>
<p>then they should be punished?</p>



<a name="127166415"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166415" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166415">(May 27 2018 at 14:37)</a>:</h4>
<p>How does that work?</p>



<a name="127166454"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166454" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166454">(May 27 2018 at 14:38)</a>:</h4>
<p>"You only use official constructors"</p>



<a name="127166456"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166456" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166456">(May 27 2018 at 14:38)</a>:</h4>
<p>"not inbuilt stuff"</p>



<a name="127166458"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166458" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166458">(May 27 2018 at 14:38)</a>:</h4>
<p>Oh wait -- surely anyone writing a proof in term mode with pnat will have constructors like that everywhere</p>



<a name="127166463"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166463" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166463">(May 27 2018 at 14:39)</a>:</h4>
<p>because it's a super-cool way of being fancy in fancy term mode</p>



<a name="127166464"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166464" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166464">(May 27 2018 at 14:39)</a>:</h4>
<p>right</p>



<a name="127166465"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166465" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166465">(May 27 2018 at 14:39)</a>:</h4>
<p>eew</p>



<a name="127166466"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166466" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166466">(May 27 2018 at 14:39)</a>:</h4>
<p>well, the thing is that I don't want to avoid structure constructors, because they are very nice</p>



<a name="127166467"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166467" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166467">(May 27 2018 at 14:39)</a>:</h4>
<p>So there <em>is</em> a question left</p>



<a name="127166468"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166468" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166468">(May 27 2018 at 14:39)</a>:</h4>
<p>you can't replicate that functionality with an interface</p>



<a name="127166515"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166515" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166515">(May 27 2018 at 14:40)</a>:</h4>
<p>unless the interface is to pass in a specially defined structure</p>



<a name="127166518"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166518" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166518">(May 27 2018 at 14:40)</a>:</h4>
<p>like simp_config</p>



<a name="127166519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166519" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166519">(May 27 2018 at 14:40)</a>:</h4>
<p>you've lost me now</p>



<a name="127166524"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166524" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166524">(May 27 2018 at 14:41)</a>:</h4>
<p>but I do see that there is a huge argument for structure constructors and this presumably has some bearing on exactly which constructors you choose and maybe even in which order?</p>



<a name="127166527"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166527" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166527">(May 27 2018 at 14:41)</a>:</h4>
<p>maybe order irrelevant</p>



<a name="127166528"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166528" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166528">(May 27 2018 at 14:41)</a>:</h4>
<p>but you never know</p>



<a name="127166529"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166529" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166529">(May 27 2018 at 14:41)</a>:</h4>
<p>yes</p>



<a name="127166530"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166530" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166530">(May 27 2018 at 14:41)</a>:</h4>
<p>order is relevant for anonymous constructors</p>



<a name="127166572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166572" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166572">(May 27 2018 at 14:42)</a>:</h4>
<p>Here are my currrent thoughts on presheaf fyi:</p>
<div class="codehilite"><pre><span></span>structure order_presheaf (α : Type u) [preorder α] :=
(F : α → Type u)
(res : ∀ x {y}, x ≤ y → F y → F x)
(Hid : ∀ x h a, res x h a = a)
(Hcomp : ∀ x y z h₁ h₂ (a : F z),
  res x h₁ (res y h₂ a) = res x (le_trans h₁ h₂) a)
</pre></div>



<a name="127166574"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166574" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166574">(May 27 2018 at 14:42)</a>:</h4>
<p>what is an <code>order_presheaf</code>?</p>



<a name="127166577"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166577" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166577">(May 27 2018 at 14:43)</a>:</h4>
<p>Would you want presheaves in mathlib?</p>



<a name="127166581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166581" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166581">(May 27 2018 at 14:43)</a>:</h4>
<p>oh eew</p>



<a name="127166582"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166582" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166582">(May 27 2018 at 14:43)</a>:</h4>
<p>what just happened there</p>



<a name="127166583"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166583" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166583">(May 27 2018 at 14:43)</a>:</h4>
<p>with the open sets</p>



<a name="127166584"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166584" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166584">(May 27 2018 at 14:43)</a>:</h4>
<p>oh, they form a preorder under inclusion!</p>



<a name="127166586"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166586" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166586">(May 27 2018 at 14:43)</a>:</h4>
<p>he thinks he's being clever</p>



<a name="127166587"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166587" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166587">(May 27 2018 at 14:43)</a>:</h4>
<p>but we need the etale site ;-)</p>



<a name="127166588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166588" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166588">(May 27 2018 at 14:44)</a>:</h4>
<p>so he's still not general enough ;-)</p>



<a name="127166627"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166627" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166627">(May 27 2018 at 14:44)</a>:</h4>
<p>if you add enough axioms to the preorder you can capture exactly the open sets of some topology</p>



<a name="127166628"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166628" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166628">(May 27 2018 at 14:44)</a>:</h4>
<p>yeah, I was just remarking that at some point later on algebraic geometry needs the notion of sheaf on something more general than a topological space</p>



<a name="127166630"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166630" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166630">(May 27 2018 at 14:44)</a>:</h4>
<p>but this part of the definition only needs a preorder</p>



<a name="127166636"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166636" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166636">(May 27 2018 at 14:45)</a>:</h4>
<blockquote>
<p>yeah, I was just remarking that at some point later on algebraic geometry needs the notion of sheaf on something more general than a topological space</p>
</blockquote>
<p>what do you need?</p>



<a name="127166638"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166638" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166638">(May 27 2018 at 14:45)</a>:</h4>
<p>sheaf on a site</p>



<a name="127166639"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166639" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166639">(May 27 2018 at 14:45)</a>:</h4>
<p><code>[category \a]</code></p>



<a name="127166640"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166640" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166640">(May 27 2018 at 14:45)</a>:</h4>
<p>i.e. there may be more than one morphisms?</p>



<a name="127166641"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166641" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166641">(May 27 2018 at 14:45)</a>:</h4>
<p>if you want a category then this is just <code>functor</code></p>



<a name="127166643"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166643" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166643">(May 27 2018 at 14:45)</a>:</h4>
<p>Right</p>



<a name="127166644"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166644" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166644">(May 27 2018 at 14:45)</a>:</h4>
<p>but it has to satisfy the sheaf axiom</p>



<a name="127166645"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166645" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166645">(May 27 2018 at 14:45)</a>:</h4>
<p>point me to that</p>



<a name="127166677"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166677" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166677">(May 27 2018 at 14:46)</a>:</h4>
<p>and you need more than a category to formalise that</p>



<a name="127166686"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166686" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166686">(May 27 2018 at 14:46)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span>  so they may have two "proofs" of <code>x \le y</code> and they want the two things to be unequal</p>



<a name="127166687"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166687" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166687">(May 27 2018 at 14:46)</a>:</h4>
<p>well, so far we are only talking about presheaf I thought</p>



<a name="127166688"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166688" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166688">(May 27 2018 at 14:46)</a>:</h4>
<p>I am actually very fine with that</p>



<a name="127166690"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166690" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166690">(May 27 2018 at 14:46)</a>:</h4>
<p>that's true but I am interested in more than presheaves here</p>



<a name="127166691"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166691" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166691">(May 27 2018 at 14:46)</a>:</h4>
<p>that's the remaining problem with this definition</p>



<a name="127166694"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166694" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166694">(May 27 2018 at 14:46)</a>:</h4>
<p>as I said, I don't like proof args</p>



<a name="127166697"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166697" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166697">(May 27 2018 at 14:47)</a>:</h4>
<p>well then great! They won't be proofs once you generalize to a category <span class="emoji emoji-1f642" title="simple smile">:simple_smile:</span></p>



<a name="127166702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166702" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166702">(May 27 2018 at 14:47)</a>:</h4>
<p>but you can't easily remove them from this... what's the structure of that argument otherwise?</p>



<a name="127166704"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166704" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166704">(May 27 2018 at 14:47)</a>:</h4>
<p><a href="https://stacks.math.columbia.edu/tag/00VH" target="_blank" title="https://stacks.math.columbia.edu/tag/00VH">https://stacks.math.columbia.edu/tag/00VH</a></p>



<a name="127166705"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166705" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166705">(May 27 2018 at 14:47)</a>:</h4>
<p>I guess <code>Hom x y</code>?</p>



<a name="127166751"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166751" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166751">(May 27 2018 at 14:48)</a>:</h4>
<p>That's a site</p>



<a name="127166756"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166756" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166756">(May 27 2018 at 14:48)</a>:</h4>
<p>Right, just a morphism in some category.</p>



<a name="127166765"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166765" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166765">(May 27 2018 at 14:49)</a>:</h4>
<p>Did you see <a href="https://stacks.math.columbia.edu/tag/00VI" target="_blank" title="https://stacks.math.columbia.edu/tag/00VI">https://stacks.math.columbia.edu/tag/00VI</a></p>



<a name="127166812"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166812" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166812">(May 27 2018 at 14:50)</a>:</h4>
<p>Mario, I think this says "if a computer scientist tries to do this, they will have universe issues. But in all the cases that a mathematican cares about, these issues can be avoided and we can do everything in Type"</p>



<a name="127166822"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166822" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166822">(May 27 2018 at 14:51)</a>:</h4>
<p>Presheaves are already rather large</p>



<a name="127166824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166824" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166824">(May 27 2018 at 14:51)</a>:</h4>
<p>"This definition uses two universes u and v, but when we apply it I claim that we can get away with one universe"</p>



<a name="127166825"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166825" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166825">(May 27 2018 at 14:51)</a>:</h4>
<p>How do you formalise that? ;-)</p>



<a name="127166866"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166866" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166866">(May 27 2018 at 14:52)</a>:</h4>
<p>It looks like sites have to be small though</p>



<a name="127166868"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166868" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166868">(May 27 2018 at 14:52)</a>:</h4>
<p>but what's a (pre)sheaf on a site?</p>



<a name="127166873"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166873" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166873">(May 27 2018 at 14:52)</a>:</h4>
<p>all I see is a bunch of covering stuff</p>



<a name="127166884"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166884" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166884">(May 27 2018 at 14:53)</a>:</h4>
<p>Also relevant</p>



<a name="127166885"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166885" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166885">(May 27 2018 at 14:53)</a>:</h4>
<p><a href="https://stacks.math.columbia.edu/tag/00ZF" target="_blank" title="https://stacks.math.columbia.edu/tag/00ZF">https://stacks.math.columbia.edu/tag/00ZF</a></p>



<a name="127166936"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166936" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166936">(May 27 2018 at 14:54)</a>:</h4>
<p><a href="https://stacks.math.columbia.edu/tag/00VL" target="_blank" title="https://stacks.math.columbia.edu/tag/00VL">https://stacks.math.columbia.edu/tag/00VL</a></p>



<a name="127166937"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166937" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166937">(May 27 2018 at 14:54)</a>:</h4>
<p>sheaf!</p>



<a name="127166938"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166938" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166938">(May 27 2018 at 14:54)</a>:</h4>
<p>Still no presheaf :-)</p>



<a name="127166940"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166940" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166940">(May 27 2018 at 14:54)</a>:</h4>
<p>Scott is doing sites in the his category stuff</p>



<a name="127166942"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166942" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166942">(May 27 2018 at 14:54)</a>:</h4>
<p><a href="https://stacks.math.columbia.edu/tag/00V1" target="_blank" title="https://stacks.math.columbia.edu/tag/00V1">https://stacks.math.columbia.edu/tag/00V1</a></p>



<a name="127166943"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166943" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166943">(May 27 2018 at 14:54)</a>:</h4>
<p>and what is the site corresponding to a top space?</p>



<a name="127166944"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166944" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166944">(May 27 2018 at 14:54)</a>:</h4>
<p>OK so presheaf on a category, sheaf on a site</p>



<a name="127166945"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166945" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166945">(May 27 2018 at 14:55)</a>:</h4>
<p>The site corresponding to a top space is this</p>



<a name="127166953"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166953" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166953">(May 27 2018 at 14:55)</a>:</h4>
<p>The category has an object for each open set</p>



<a name="127166960"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166960" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166960">(May 27 2018 at 14:55)</a>:</h4>
<p>Homs from U to V are empty unless V sub U in which case there is one elment</p>



<a name="127166966"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127166966" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127166966">(May 27 2018 at 14:55)</a>:</h4>
<p>Coverings: a set of morphisms U_i -&gt; U covers U iff the union of the image of the U_i is U</p>



<a name="127167004"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167004" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167004">(May 27 2018 at 14:56)</a>:</h4>
<p>The sheaf axiom says this.</p>



<a name="127167017"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167017" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167017">(May 27 2018 at 14:56)</a>:</h4>
<p>"If U is an open set, and it is covered by opens U_i, then to give a continuous function on U is to give a continuous function f_i on each U_i such that f_i and f_j agree on U_i intersect U_j"</p>



<a name="127167025"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167025" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167025">(May 27 2018 at 14:57)</a>:</h4>
<p>You can equivalently describe the category like this. The objects are topological spaces equipped with a map to X which is an open immersion. A morphism is a continuous map which is compatible with the structural maps to X.</p>



<a name="127167027"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167027" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167027">(May 27 2018 at 14:57)</a>:</h4>
<p>They say "continuity can be checked locally"</p>



<a name="127167071"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167071" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167071">(May 27 2018 at 14:58)</a>:</h4>
<p>isn't that just true?</p>



<a name="127167072"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167072" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167072">(May 27 2018 at 14:58)</a>:</h4>
<p>Reid's changing of my category to an equivalent category was something which turned out to be really important</p>



<a name="127167073"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167073" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167073">(May 27 2018 at 14:58)</a>:</h4>
<p>like as a statement of topology</p>



<a name="127167074"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167074" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167074">(May 27 2018 at 14:58)</a>:</h4>
<p>It's precisely the statement that continuity is a local condition</p>



<a name="127167081"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167081" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167081">(May 27 2018 at 14:58)</a>:</h4>
<p>So the <em>presheaf</em> of continuous functions on a topological space</p>



<a name="127167082"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167082" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167082">(May 27 2018 at 14:58)</a>:</h4>
<p>is actually a sheaf!</p>



<a name="127167083"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167083" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167083">(May 27 2018 at 14:58)</a>:</h4>
<p>But the presheaf of constant functions is not a sheaf</p>



<a name="127167085"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167085" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167085">(May 27 2018 at 14:59)</a>:</h4>
<p>because if I have two disjoint open sets</p>



<a name="127167091"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167091" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167091">(May 27 2018 at 14:59)</a>:</h4>
<p>and define a function to be 1 on one of them but 2 on the other one</p>



<a name="127167093"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167093" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167093">(May 27 2018 at 14:59)</a>:</h4>
<p>it's locally constant</p>



<a name="127167094"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167094" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167094">(May 27 2018 at 14:59)</a>:</h4>
<p>but not constant</p>



<a name="127167095"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167095" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167095">(May 27 2018 at 14:59)</a>:</h4>
<p>ah okay, so locally constant functions is a sheaf</p>



<a name="127167097"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167097" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167097">(May 27 2018 at 14:59)</a>:</h4>
<p>right</p>



<a name="127167101"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167101" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167101">(May 27 2018 at 14:59)</a>:</h4>
<p>it's the sheafification of the presheaf of constant functions</p>



<a name="127167102"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167102" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167102">(May 27 2018 at 14:59)</a>:</h4>
<p>sheafification is an adjoint to the forgetful functor</p>



<a name="127167157"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167157" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167157">(May 27 2018 at 15:00)</a>:</h4>
<p>so how much does it matter that these are poset categories?</p>



<a name="127167158"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167158" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167158">(May 27 2018 at 15:00)</a>:</h4>
<p>Exactly</p>



<a name="127167161"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167161" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167161">(May 27 2018 at 15:00)</a>:</h4>
<p>it doesn't matter at all</p>



<a name="127167163"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167163" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167163">(May 27 2018 at 15:00)</a>:</h4>
<p>and in general they won't be</p>



<a name="127167165"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167165" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167165">(May 27 2018 at 15:00)</a>:</h4>
<p>is a poset category one where the hom sets have size &lt;= 1?</p>



<a name="127167166"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167166" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167166">(May 27 2018 at 15:00)</a>:</h4>
<p>yes</p>



<a name="127167175"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167175" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167175">(May 27 2018 at 15:01)</a>:</h4>
<p>so the etale site attached to a scheme does not have this property I guess</p>



<a name="127167178"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167178" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167178">(May 27 2018 at 15:01)</a>:</h4>
<p>maybe it would be better to do this with honest categories</p>



<a name="127167180"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167180" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167180">(May 27 2018 at 15:02)</a>:</h4>
<p>I think Scott said that quite a long time ago</p>



<a name="127167223"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167223" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167223">(May 27 2018 at 15:02)</a>:</h4>
<p>but I just wanted to get on</p>



<a name="127167230"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167230" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167230">(May 27 2018 at 15:02)</a>:</h4>
<p>Sheaves of sets on a site are a Mathematician's Topos Mario.</p>



<a name="127167233"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167233" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167233">(May 27 2018 at 15:02)</a>:</h4>
<p>This is distinct to the CS topos</p>



<a name="127167238"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167238" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167238">(May 27 2018 at 15:03)</a>:</h4>
<p>like in the literal sense?</p>



<a name="127167239"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167239" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167239">(May 27 2018 at 15:03)</a>:</h4>
<p>You have some more general notion I think</p>



<a name="127167240"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167240" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167240">(May 27 2018 at 15:03)</a>:</h4>
<p>Topos is used to mean two different things, I believe</p>



<a name="127167242"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167242" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167242">(May 27 2018 at 15:03)</a>:</h4>
<p>I like Grothendieck topoi</p>



<a name="127167244"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167244" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167244">(May 27 2018 at 15:03)</a>:</h4>
<p>you like elmentary topoi</p>



<a name="127167246"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167246" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167246">(May 27 2018 at 15:03)</a>:</h4>
<p>I am not sure I would say that...</p>



<a name="127167247"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167247" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167247">(May 27 2018 at 15:03)</a>:</h4>
<p><a href="https://stacks.math.columbia.edu/tag/00X9" target="_blank" title="https://stacks.math.columbia.edu/tag/00X9">https://stacks.math.columbia.edu/tag/00X9</a></p>



<a name="127167289"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167289" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167289">(May 27 2018 at 15:04)</a>:</h4>
<p>topoi is usually where I get off the bus</p>



<a name="127167290"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167290" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167290">(May 27 2018 at 15:04)</a>:</h4>
<p>It took me a while, in the pre-Wikipedia age, to understand that the two uses of the word were distinct</p>



<a name="127167293"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167293" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167293">(May 27 2018 at 15:04)</a>:</h4>
<p>I knew this guy as an UG who would go round saying "a topos is a category which is finitely complete, finitely cocomplete, has exponentiation and a subobject classifier"</p>



<a name="127167295"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167295" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167295">(May 27 2018 at 15:04)</a>:</h4>
<p>and I had no idea what any of those things meant</p>



<a name="127167301"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167301" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167301">(May 27 2018 at 15:05)</a>:</h4>
<p>and then years later I found some topoi I was actually interested in</p>



<a name="127167303"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167303" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167303">(May 27 2018 at 15:05)</a>:</h4>
<p>that's about where I am</p>



<a name="127167304"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167304" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167304">(May 27 2018 at 15:05)</a>:</h4>
<p><em>as</em> an UG :o</p>



<a name="127167305"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167305" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167305">(May 27 2018 at 15:05)</a>:</h4>
<p>and then it turned out they were a different kind of topos</p>



<a name="127167307"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167307" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167307">(May 27 2018 at 15:05)</a>:</h4>
<p>I learn and forget those things every year</p>



<a name="127167313"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167313" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167313">(May 27 2018 at 15:06)</a>:</h4>
<p>There was once some debate about whether Wiles/Taylor-Wiles used Grothendieck topoi in their proof of FLT</p>



<a name="127167353"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167353" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167353">(May 27 2018 at 15:06)</a>:</h4>
<p>and the answer turned out to be</p>



<a name="127167354"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167354" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167354">(May 27 2018 at 15:06)</a>:</h4>
<p>because that means large universes, right?</p>



<a name="127167358"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167358" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167358">(May 27 2018 at 15:07)</a>:</h4>
<p>"well, mathematicians are always a bit vague about what exactly they are using, and there is no mention of set-theoretic difficulties, but Brian Conrad went away and checked every single cohomology group in the entire proof and verified that it was OK, everything happened within one universe"</p>



<a name="127167366"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167366" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167366">(May 27 2018 at 15:07)</a>:</h4>
<p>Wiles most definitely used etale cohomology in his proof</p>



<a name="127167368"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167368" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167368">(May 27 2018 at 15:07)</a>:</h4>
<p>and I am almost certain that he cited some papers which at some point use flat cohomology</p>



<a name="127167412"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167412" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167412">(May 27 2018 at 15:08)</a>:</h4>
<p>and they probably cite some papers which at some point mention fpqc cohomology</p>



<a name="127167423"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167423" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167423">(May 27 2018 at 15:09)</a>:</h4>
<p>so we really needed an expert who could come along and say "I know exactly which parts of the theory of etale cohomlogy and other cohomology theories he used and can verify that all the stuff he uses can be formalised in ZFC"</p>



<a name="127167430"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167430" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167430">(May 27 2018 at 15:09)</a>:</h4>
<p>before that debate died down</p>



<a name="127167484"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167484" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167484">(May 27 2018 at 15:11)</a>:</h4>
<p>Some people really care about universes. If Lean really cannot keep track of them then these people might be skeptical</p>



<a name="127167502"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167502" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167502">(May 27 2018 at 15:11)</a>:</h4>
<p>My current personal viewpoint on this is simply to accept the large cardinals. If they make maths easier and more fun to do then I'm in</p>



<a name="127167503"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167503" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167503">(May 27 2018 at 15:11)</a>:</h4>
<p>For the most part, if it lives in <code>Type</code> it can be constructed in ZFC</p>



<a name="127167552"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167552" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167552">(May 27 2018 at 15:12)</a>:</h4>
<p>Right, but any file which uses "universes u v" is open to question right?</p>



<a name="127167553"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167553" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167553">(May 27 2018 at 15:12)</a>:</h4>
<p>Or even "universe u" perhaps</p>



<a name="127167557"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167557" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167557">(May 27 2018 at 15:12)</a>:</h4>
<p>if it uses Type as well</p>



<a name="127167559"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167559" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167559">(May 27 2018 at 15:12)</a>:</h4>
<p>no, as long as at the end you build something in <code>Type</code></p>



<a name="127167561"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167561" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167561">(May 27 2018 at 15:12)</a>:</h4>
<p>Oh</p>



<a name="127167563"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167563" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167563">(May 27 2018 at 15:12)</a>:</h4>
<p>The part which makes this not quite true is impredicativity of Prop</p>



<a name="127167566"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167566" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167566">(May 27 2018 at 15:13)</a>:</h4>
<p>aie</p>



<a name="127167570"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167570" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167570">(May 27 2018 at 15:13)</a>:</h4>
<p>so you get a proof which lived in another universe</p>



<a name="127167573"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167573" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167573">(May 27 2018 at 15:13)</a>:</h4>
<p>but you can't get a proof in your own universe</p>



<a name="127167575"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167575" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167575">(May 27 2018 at 15:13)</a>:</h4>
<p>so you use propext</p>



<a name="127167577"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167577" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167577">(May 27 2018 at 15:13)</a>:</h4>
<p>cunning</p>



<a name="127167578"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167578" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167578">(May 27 2018 at 15:13)</a>:</h4>
<p>you can construct proofs of propositions in Prop in Type, which assert existence of large cardinals</p>



<a name="127167580"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167580" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167580">(May 27 2018 at 15:13)</a>:</h4>
<p>ha ha</p>



<a name="127167582"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167582" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167582">(May 27 2018 at 15:13)</a>:</h4>
<p>oh I hadn't realised that</p>



<a name="127167585"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167585" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167585">(May 27 2018 at 15:13)</a>:</h4>
<p>Prop covers its tracks</p>



<a name="127167587"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167587" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167587">(May 27 2018 at 15:13)</a>:</h4>
<p>that's what impredicativity does for you</p>



<a name="127167632"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167632" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167632">(May 27 2018 at 15:14)</a>:</h4>
<p>But still to <em>construct</em> the proof you need the extra universes, right?</p>



<a name="127167636"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167636" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167636">(May 27 2018 at 15:14)</a>:</h4>
<p>is <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> being impredicative?</p>



<a name="127167637"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167637" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167637">(May 27 2018 at 15:14)</a>:</h4>
<p>you could talk about configurations in Type 63 and it wouldn't make the proof large</p>



<a name="127167641"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167641" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167641">(May 27 2018 at 15:15)</a>:</h4>
<p>I am just interested in exactly what can go wrong with regards to translating a DTT proof into ZFC</p>



<a name="127167648"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167648" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167648">(May 27 2018 at 15:15)</a>:</h4>
<p>right, there are large universes in the proof</p>



<a name="127167651"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167651" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167651">(May 27 2018 at 15:15)</a>:</h4>
<p>Because one day someone serious is going to ask me about this</p>



<a name="127167652"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167652" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167652">(May 27 2018 at 15:15)</a>:</h4>
<p>DTT</p>



<a name="127167653"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167653" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167653">(May 27 2018 at 15:15)</a>:</h4>
<p>?</p>



<a name="127167654"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167654" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167654">(May 27 2018 at 15:15)</a>:</h4>
<p>so that wouldn't translate</p>



<a name="127167655"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167655" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167655">(May 27 2018 at 15:15)</a>:</h4>
<p>However, this sort of sleight of hand is very rare</p>



<a name="127167656"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167656" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167656">(May 27 2018 at 15:15)</a>:</h4>
<p>And the problem is that the proof might not be mine</p>



<a name="127167657"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167657" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167657">(May 27 2018 at 15:15)</a>:</h4>
<p>The theorem could be formulated about Type in some library</p>



<a name="127167658"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167658" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167658">(May 27 2018 at 15:15)</a>:</h4>
<p>so they work in a system stronger than ZFC?</p>



<a name="127167660"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167660" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167660">(May 27 2018 at 15:15)</a>:</h4>
<p>like how PA can't prove Goodstein?</p>



<a name="127167661"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167661" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167661">(May 27 2018 at 15:15)</a>:</h4>
<p>and I never look at the proof</p>



<a name="127167699"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167699" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167699">(May 27 2018 at 15:16)</a>:</h4>
<p>Yes Kenny</p>



<a name="127167704"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167704" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167704">(May 27 2018 at 15:16)</a>:</h4>
<p>they work in ZFC + infinitely many inaccessible cardinals here</p>



<a name="127167707"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167707" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167707">(May 27 2018 at 15:16)</a>:</h4>
<p>It's infinitely less likely to be consistent than ZFC</p>



<a name="127167709"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167709" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167709">(May 27 2018 at 15:16)</a>:</h4>
<p>which is weaker than Tarski Grothendieck set theory btw</p>



<a name="127167710"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167710" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167710">(May 27 2018 at 15:16)</a>:</h4>
<p>Grothendieck?!</p>



<a name="127167713"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167713" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167713">(May 27 2018 at 15:16)</a>:</h4>
<p>which is what most category theorists use</p>



<a name="127167718"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167718" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167718">(May 27 2018 at 15:17)</a>:</h4>
<p>That is equivalent to ZFC + proper class of inaccessible cardinals</p>



<a name="127167720"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167720" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167720">(May 27 2018 at 15:17)</a>:</h4>
<p>here we only need omega many</p>



<a name="127167723"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167723" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167723">(May 27 2018 at 15:17)</a>:</h4>
<p>fascinating</p>



<a name="127167725"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167725" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167725">(May 27 2018 at 15:17)</a>:</h4>
<p>logic never fails to fascinate me</p>



<a name="127167726"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167726" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167726">(May 27 2018 at 15:17)</a>:</h4>
<p>and for any particular proof you can say "this used 3 universes" or such</p>



<a name="127167767"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167767" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167767">(May 27 2018 at 15:18)</a>:</h4>
<p>it's impossible to use all the universes in a proof</p>



<a name="127167768"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167768" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167768">(May 27 2018 at 15:18)</a>:</h4>
<p>But I am specifically interested in the proofs which only use one universe</p>



<a name="127167769"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167769" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167769">(May 27 2018 at 15:18)</a>:</h4>
<p>For example does FLT definitely only use one universe?</p>



<a name="127167771"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167771" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167771">(May 27 2018 at 15:18)</a>:</h4>
<p>well, actually you want zero universes</p>



<a name="127167772"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167772" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167772">(May 27 2018 at 15:18)</a>:</h4>
<p>Oh yes I just want Type</p>



<a name="127167773"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167773" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167773">(May 27 2018 at 15:18)</a>:</h4>
<p>ZFC has zero universes</p>



<a name="127167776"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167776" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167776">(May 27 2018 at 15:19)</a>:</h4>
<blockquote>
<p>ZFC has zero universes</p>
</blockquote>
<p>zero built-in universes</p>



<a name="127167781"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167781" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167781">(May 27 2018 at 15:19)</a>:</h4>
<p>So currently the reference for "Wiles/TW proof of FLT is in ZFC" is "Email from Conrad"</p>



<a name="127167782"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167782" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167782">(May 27 2018 at 15:19)</a>:</h4>
<p>It's a bit tricky to work with DTT with zero universes</p>



<a name="127167783"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167783" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167783">(May 27 2018 at 15:19)</a>:</h4>
<p>Why?</p>



<a name="127167784"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167784" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167784">(May 27 2018 at 15:19)</a>:</h4>
<p>Say I globally exchange all the type u for type</p>



<a name="127167786"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167786" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167786">(May 27 2018 at 15:19)</a>:</h4>
<p>how far do I get before the errors appear?</p>



<a name="127167831"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167831" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167831">(May 27 2018 at 15:20)</a>:</h4>
<p>Start with core lean</p>



<a name="127167834"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167834" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167834">(May 27 2018 at 15:20)</a>:</h4>
<p>you have to be careful: <code>Gamma |- A : Type</code> is okay, but <code>Type</code> is not a type, in the sense <code>Gamma |- Type : Type 1</code> doesn't exist</p>



<a name="127167836"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167836" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167836">(May 27 2018 at 15:20)</a>:</h4>
<p>Yeah, I promise I will never ask Type its type.</p>



<a name="127167837"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167837" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167837">(May 27 2018 at 15:20)</a>:</h4>
<p>ZFC people are used to making promises</p>



<a name="127167838"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167838" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167838">(May 27 2018 at 15:21)</a>:</h4>
<p>and they're usually quite good at keeping them</p>



<a name="127167845"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167845" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167845">(May 27 2018 at 15:21)</a>:</h4>
<p>This is the world I have lived in all my life</p>



<a name="127167846"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167846" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167846">(May 27 2018 at 15:21)</a>:</h4>
<p>and you are claiming to offer me more</p>



<a name="127167847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167847" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167847">(May 27 2018 at 15:21)</a>:</h4>
<p>Also you can have things like <code>A : Type -&gt; Type</code> in ZFC</p>



<a name="127167848"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167848" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167848">(May 27 2018 at 15:21)</a>:</h4>
<p>but I don't see anything of interest out there</p>



<a name="127167850"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167850" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167850">(May 27 2018 at 15:21)</a>:</h4>
<p>but again you can't quantify over them</p>



<a name="127167851"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167851" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167851">(May 27 2018 at 15:21)</a>:</h4>
<p>Yes</p>



<a name="127167852"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167852" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167852">(May 27 2018 at 15:21)</a>:</h4>
<p>no</p>



<a name="127167891"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167891" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167891">(May 27 2018 at 15:22)</a>:</h4>
<p>oh wait</p>



<a name="127167894"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167894" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167894">(May 27 2018 at 15:22)</a>:</h4>
<p>I can quantify over them</p>



<a name="127167895"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167895" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167895">(May 27 2018 at 15:22)</a>:</h4>
<p><code>A : (Type -&gt; Type) -&gt; Type</code> is starting to get weird</p>



<a name="127167899"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167899" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167899">(May 27 2018 at 15:22)</a>:</h4>
<p><code>A : Type -&gt; Type</code> is a proper class function</p>



<a name="127167900"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167900" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167900">(May 27 2018 at 15:22)</a>:</h4>
<p>I just have to write some footnote explaining about how it can all be done properly if you ask a set theorist</p>



<a name="127167902"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167902" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167902">(May 27 2018 at 15:22)</a>:</h4>
<p>because no object I consider in my paper has size greater than 2^2^2^2^aleph_0 so it's all OK</p>



<a name="127167903"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167903" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167903">(May 27 2018 at 15:23)</a>:</h4>
<p>who needs inaccessible cardinals</p>



<a name="127167909"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167909" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167909">(May 27 2018 at 15:23)</a>:</h4>
<p>I just something closed under a few iterations of the power set axiom and I'll be fine</p>



<a name="127167910"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167910" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167910">(May 27 2018 at 15:23)</a>:</h4>
<p>That's really hard to do formally</p>



<a name="127167913"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167913" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167913">(May 27 2018 at 15:23)</a>:</h4>
<p>There will be people out there who care about this.</p>



<a name="127167916"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167916" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167916">(May 27 2018 at 15:23)</a>:</h4>
<p>at least if you didn't literally do that in the proof</p>



<a name="127167918"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167918" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167918">(May 27 2018 at 15:23)</a>:</h4>
<p>Right, and who wants to do that?</p>



<a name="127167919"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167919" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167919">(May 27 2018 at 15:23)</a>:</h4>
<p>We just wanna have fun</p>



<a name="127167961"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167961" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167961">(May 27 2018 at 15:24)</a>:</h4>
<p>I don't see any reason why ZFC should stay as the prevalent model of mathematics</p>



<a name="127167962"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167962" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167962">(May 27 2018 at 15:24)</a>:</h4>
<p>What you want is a way to take a proof and shrink all the things in it to ZFC things</p>



<a name="127167964"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167964" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167964">(May 27 2018 at 15:24)</a>:</h4>
<p>but without a doubt it is the prevalent model of mathematics</p>



<a name="127167965"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167965" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167965">(May 27 2018 at 15:24)</a>:</h4>
<p>I don't</p>



<a name="127167968"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167968" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167968">(May 27 2018 at 15:24)</a>:</h4>
<p>but some people might</p>



<a name="127167969"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167969" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167969">(May 27 2018 at 15:24)</a>:</h4>
<p>and I have them in mind</p>



<a name="127167973"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167973" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167973">(May 27 2018 at 15:25)</a>:</h4>
<p>or 2^2^2^2^aleph_0 things</p>



<a name="127167984"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167984" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167984">(May 27 2018 at 15:25)</a>:</h4>
<p>and it's my job to figure out how to make sense of your request</p>



<a name="127167989"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127167989" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127167989">(May 27 2018 at 15:25)</a>:</h4>
<p>There are theorems of the form "if you proved X using 3 universes then you could have done it in ZFC" I think</p>



<a name="127168008"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127168008" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127168008">(May 27 2018 at 15:26)</a>:</h4>
<p>I think someone might have told me that even though wiles <em>certainly</em> used AC in his proof, FLT was now known to be a theorem of ZF</p>



<a name="127168036"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127168036" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127168036">(May 27 2018 at 15:26)</a>:</h4>
<p>because one of these magic meta-theorem things</p>



<a name="127168042"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127168042" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127168042">(May 27 2018 at 15:26)</a>:</h4>
<p>yes, it's a pi01 statement so magic happens</p>



<a name="127168485"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127168485" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127168485">(May 27 2018 at 15:44)</a>:</h4>
<p>here's the sheaf axiom using the poset presheaf definition:</p>
<div class="codehilite"><pre><span></span>def gluing {α} [complete_lattice α] (F : order_presheaf α)
  (X : α) {ι : Type*} (Y : ι → α) (Hcov : X = ⨆ i, Y i)
  (r : F.F X) :
  {a : Π i, F.F (Y i) | ∀ (i j : ι),
    F.res (Y i ⊓ Y j) inf_le_left (a i) =
    F.res (Y i ⊓ Y j) inf_le_right (a j) } :=
⟨λ i, F.res (Y i) (by rw Hcov; apply le_supr) r,
 λ i j, by simp [F.comp]⟩

def is_order_sheaf {α : Type u} [complete_lattice α]
  (F : order_presheaf α) : Prop :=
∀ (X : α) {ι : Type u} (Y : ι → α) (Hcov : X = ⨆ i, Y i),
function.bijective (gluing F X Y Hcov)
</pre></div>



<a name="127168542"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127168542" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127168542">(May 27 2018 at 15:47)</a>:</h4>
<p>Did you look at what I did?</p>



<a name="127168543"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127168543" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127168543">(May 27 2018 at 15:47)</a>:</h4>
<p>yes, it was based on your definition</p>



<a name="127168545"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127168545" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127168545">(May 27 2018 at 15:47)</a>:</h4>
<p>ha ha hope I didn't make a mistake :-)</p>



<a name="127168585"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127168585" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127168585">(May 27 2018 at 15:48)</a>:</h4>
<p>I think probably <code>bijective</code> makes more axioms than you really need here</p>



<a name="127168586"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127168586" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127168586">(May 27 2018 at 15:48)</a>:</h4>
<p>like it's probably already injective</p>



<a name="127168592"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127168592" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127168592">(May 27 2018 at 15:49)</a>:</h4>
<p>I would just state the actual condition you want, and prove it implies this function is bijective</p>



<a name="127168644"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127168644" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127168644">(May 27 2018 at 15:51)</a>:</h4>
<p><a href="https://stacks.math.columbia.edu/tag/009I" target="_blank" title="https://stacks.math.columbia.edu/tag/009I">https://stacks.math.columbia.edu/tag/009I</a></p>



<a name="127168648"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127168648" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127168648">(May 27 2018 at 15:51)</a>:</h4>
<p>Actually I guess I just copied everything from the stacks project (and spotted a mistake or two along the way :-) )</p>



<a name="127168688"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127168688" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127168688">(May 27 2018 at 15:52)</a>:</h4>
<p>no, injective needs checking</p>



<a name="127168689"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127168689" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127168689">(May 27 2018 at 15:52)</a>:</h4>
<p>A presheaf is just a functor</p>



<a name="127168690"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127168690" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127168690">(May 27 2018 at 15:52)</a>:</h4>
<p>It takes an open set to a type</p>



<a name="127168694"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127168694" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127168694">(May 27 2018 at 15:52)</a>:</h4>
<p>I could easily replace its value on X with some gigantic type that maps to the old  value</p>



<a name="127168700"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127168700" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127168700">(May 27 2018 at 15:53)</a>:</h4>
<p>If you think of them as sheaves of functions then injectivity may well be obvious</p>



<a name="127168702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127168702" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127168702">(May 27 2018 at 15:53)</a>:</h4>
<p>but this is a true pi type -- it takes an open set to a random type, not functions on U or anything</p>



<a name="127168739"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127168739" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127168739">(May 27 2018 at 15:54)</a>:</h4>
<p>and res is part of the data, not restriction of functions</p>



<a name="127168747"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127168747" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127168747">(May 27 2018 at 15:55)</a>:</h4>
<p>So are you interested in putting this presheaf and sheaf stuff in mathlib?</p>



<a name="127168749"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127168749" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127168749">(May 27 2018 at 15:55)</a>:</h4>
<p>I'm not bothered either way</p>



<a name="127168750"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127168750" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127168750">(May 27 2018 at 15:55)</a>:</h4>
<p>but it is compositional</p>



<a name="127168753"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127168753" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127168753">(May 27 2018 at 15:55)</a>:</h4>
<p>yes but that's an axiom</p>



<a name="127168754"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127168754" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127168754">(May 27 2018 at 15:55)</a>:</h4>
<p>one of the two axioms of functor</p>



<a name="127168756"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127168756" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127168756">(May 27 2018 at 15:55)</a>:</h4>
<p>Of course, I'm assuming it's a presheaf already</p>



<a name="127168757"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127168757" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127168757">(May 27 2018 at 15:55)</a>:</h4>
<p>gotcha</p>



<a name="127168797"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127168797" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127168797">(May 27 2018 at 15:56)</a>:</h4>
<p>I don't know whether I should bother tidying everything up</p>



<a name="127168798"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127168798" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127168798">(May 27 2018 at 15:56)</a>:</h4>
<p>I mean the condition of being a sheaf can be stated more directly given it's a presheaf</p>



<a name="127168799"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127168799" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127168799">(May 27 2018 at 15:56)</a>:</h4>
<p>right</p>



<a name="127168801"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127168801" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127168801">(May 27 2018 at 15:56)</a>:</h4>
<p>but you still don't get injectivity for free</p>



<a name="127168802"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127168802" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127168802">(May 27 2018 at 15:56)</a>:</h4>
<p>because I can replace F X</p>



<a name="127168805"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127168805" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127168805">(May 27 2018 at 15:56)</a>:</h4>
<p>with with a random type Y that mapped to the old F X</p>



<a name="127168806"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127168806" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127168806">(May 27 2018 at 15:57)</a>:</h4>
<p>X the whole space</p>



<a name="127168809"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127168809" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127168809">(May 27 2018 at 15:57)</a>:</h4>
<p>and then it's still a presheaf</p>



<a name="127168813"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127168813" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127168813">(May 27 2018 at 15:57)</a>:</h4>
<p>but there's no reason Y -&gt; old F X is injective</p>



<a name="127168814"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127168814" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127168814">(May 27 2018 at 15:57)</a>:</h4>
<p>so I broke the sheaf property precisely by breaking injectivity</p>



<a name="127191991"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/valuations/near/127191991" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sean Leather <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/valuations.html#127191991">(May 28 2018 at 06:40)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> Re: <code>@[simp]</code> and left-to-right rewriting, perhaps, by browsing through the <code>@[simp]</code> theorems in <a href="https://github.com/spl/tts/blob/32df31590e3f7a88eeea6d672981ac1de93c0af7/src/env/props.lean" target="_blank" title="https://github.com/spl/tts/blob/32df31590e3f7a88eeea6d672981ac1de93c0af7/src/env/props.lean">this file</a>, you can get an idea of why they are structured the way they are.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>