---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html">Grading the `tensor_algebra`</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="211528581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211528581" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211528581">(Sep 28 2020 at 18:11)</a>:</h4>
<p>I'm trying to put a grading on the tensor algebra,</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">grades</span> <span class="o">:</span> <span class="o">(</span><span class="n">tensor_algebra</span> <span class="n">R</span> <span class="n">M</span><span class="o">)</span> <span class="bp">→ₗ</span><span class="o">[</span><span class="n">R</span><span class="o">]</span> <span class="o">(</span><span class="n">ℕ</span> <span class="bp">→₀</span> <span class="n">tensor_algebra</span> <span class="n">R</span> <span class="n">M</span><span class="o">)</span> <span class="o">:=</span>  <span class="n">sorry</span>
</code></pre></div>

<p>by lifting the trivial map <code>finsupp.single 1</code>. To do this, I need to define an appropriate algebra structure on some copy of <code>ℕ →₀ tensor_algebra R M</code></p>
<p>I'm immediately running into trouble defining  the <code>one</code> of this algebra structure,</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">one</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→₀</span> <span class="n">tensor_algebra</span> <span class="n">R</span> <span class="n">M</span> <span class="o">:=</span> <span class="o">{</span>
  <span class="n">support</span> <span class="o">:=</span> <span class="o">{</span><span class="mi">0</span><span class="o">},</span>
  <span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="k">if</span> <span class="n">n</span> <span class="bp">=</span> <span class="mi">0</span> <span class="k">then</span> <span class="mi">1</span> <span class="k">else</span> <span class="mi">0</span><span class="o">,</span>
  <span class="n">mem_support_to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">k</span><span class="o">,</span> <span class="kd">begin</span>
    <span class="n">rw</span> <span class="n">finset.mem_singleton</span><span class="o">,</span>
    <span class="n">split_ifs</span><span class="bp">;</span> <span class="n">simp</span> <span class="o">[</span><span class="n">h</span><span class="o">],</span>
    <span class="n">sorry</span> <span class="c1">-- ⊢ (1 : tensor_algebra R M) ≠ 0</span>
  <span class="kd">end</span>
<span class="o">}</span>
</code></pre></div>

<p>I suspect I can't prove<code>1 ≠ 0</code>, since the base ring of the algebra may also not have that property.</p>
<p>Is  there a typeclass I can include to assume that my ring is not the zero ring?</p>



<a name="211529972"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211529972" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211529972">(Sep 28 2020 at 18:23)</a>:</h4>
<p>This looks too low-level--isn't there <code>finsupp.single</code> or something?</p>



<a name="211530139"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211530139" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211530139">(Sep 28 2020 at 18:24)</a>:</h4>
<p>wait, you even mentioned it in your question... so I'm confused</p>



<a name="211530237"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211530237" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211530237">(Sep 28 2020 at 18:25)</a>:</h4>
<p>You're quite right, I'm being dumb here</p>



<a name="211530286"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211530286" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211530286">(Sep 28 2020 at 18:26)</a>:</h4>
<p><code>one := finsupp.single 0 1</code></p>



<a name="211538127"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211538127" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211538127">(Sep 28 2020 at 19:26)</a>:</h4>
<p>Although that needs <code>noncomputable</code>, but I can deal with that for now.</p>



<a name="211538172"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211538172" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211538172">(Sep 28 2020 at 19:26)</a>:</h4>
<p>Will try and bash out a proof for <code>mul</code> tomorrow,</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">noncomputable</span> <span class="kd">def</span> <span class="n">mul</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→₀</span> <span class="n">tensor_algebra</span> <span class="n">R</span> <span class="n">M</span><span class="o">)</span> <span class="o">:</span> <span class="n">ℕ</span> <span class="bp">→₀</span> <span class="n">tensor_algebra</span> <span class="n">R</span> <span class="n">M</span> <span class="o">:=</span> <span class="o">{</span>
  <span class="n">support</span> <span class="o">:=</span> <span class="n">a.support</span> <span class="bp">+</span> <span class="n">b.support</span><span class="o">,</span>
  <span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">n</span><span class="o">,</span> <span class="bp">∑</span> <span class="n">i</span> <span class="k">in</span> <span class="o">(</span><span class="n">a.support.product</span> <span class="n">b.support</span><span class="o">),</span> <span class="k">if</span> <span class="n">i.1</span> <span class="bp">+</span> <span class="n">i.2</span> <span class="bp">=</span> <span class="n">n</span> <span class="k">then</span> <span class="n">a</span> <span class="n">i.1</span> <span class="bp">*</span> <span class="n">b</span> <span class="n">i.2</span> <span class="k">else</span> <span class="mi">0</span><span class="o">,</span>
  <span class="n">mem_support_to_fun</span> <span class="o">:=</span> <span class="n">sorry</span><span class="o">}</span>
</code></pre></div>



<a name="211538293"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211538293" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211538293">(Sep 28 2020 at 19:27)</a>:</h4>
<p>By the way, is this notion of graded object used in mathlib somewhere?</p>



<a name="211538989"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211538989" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211538989">(Sep 28 2020 at 19:33)</a>:</h4>
<p>I don't see it yet - there was a thread a while back about CDGA, but that was more of a <code>dfinsupp</code> api</p>



<a name="211539077"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211539077" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211539077">(Sep 28 2020 at 19:34)</a>:</h4>
<p>If you're already planning to do this, maybe you should grade the free algebra that <span class="user-mention" data-user-id="110087">@Scott Morrison</span> recently introduced? the grading on the tensor algebra is induced from that.</p>



<a name="211540211"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211540211" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211540211">(Sep 28 2020 at 19:43)</a>:</h4>
<p>I suspect that what I write will work on either anyway</p>



<a name="211540308"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211540308" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211540308">(Sep 28 2020 at 19:44)</a>:</h4>
<p>All of my pain right now is being caused by <code>finsupp</code></p>



<a name="211545087"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211545087" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211545087">(Sep 28 2020 at 20:20)</a>:</h4>
<p>I think it will be slightly easier to define the grading on the free algebra. Of course, one will have to prove some linearity statement in order to descend the grading to the tensor algebra.</p>



<a name="211545156"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211545156" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211545156">(Sep 28 2020 at 20:21)</a>:</h4>
<p>Here's what I'm stuck on right now:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">add_comm_monoid</span> <span class="n">β</span><span class="o">]</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="bp">∑</span> <span class="n">x</span> <span class="k">in</span> <span class="n">s</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">s</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="bp">≠</span> <span class="mi">0</span> <span class="o">:=</span> <span class="kd">begin</span>
  <span class="n">simp</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>



<a name="211545189"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211545189" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211545189">(Sep 28 2020 at 20:21)</a>:</h4>
<p>If the sum is nonzero, then there exists a nonzero element</p>



<a name="211545451"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211545451" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211545451">(Sep 28 2020 at 20:23)</a>:</h4>
<p>by contrapositive</p>



<a name="211545602"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211545602" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211545602">(Sep 28 2020 at 20:25)</a>:</h4>
<p><code>contrapose h</code>, I assume you mean</p>



<a name="211545613"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211545613" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211545613">(Sep 28 2020 at 20:25)</a>:</h4>
<p>I knew that existed, and could not find the spelling</p>



<a name="211545625"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211545625" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211545625">(Sep 28 2020 at 20:25)</a>:</h4>
<p>I mean you should prove it by contraposition</p>



<a name="211584311"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211584311" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211584311">(Sep 29 2020 at 06:15)</a>:</h4>
<p>Turns out I was looking for <a href="https://leanprover-community.github.io/mathlib_docs/find/add_monoid_algebra">docs#add_monoid_algebra</a></p>



<a name="211630303"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211630303" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211630303">(Sep 29 2020 at 14:41)</a>:</h4>
<p><span class="user-mention silent" data-user-id="243562">Adam Topaz</span> <a href="#narrow/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60/near/211539077">said</a>:</p>
<blockquote>
<p>If you're already planning to do this, maybe you should grade the free algebra that <span class="user-mention silent" data-user-id="110087">Scott Morrison</span> recently introduced? the grading on the tensor algebra is induced from that.</p>
</blockquote>
<p>Went ahead and did as you suggested, primarily because it reduced my build time. Progress so far is <a href="https://github.com/leanprover-community/mathlib/issues/4321">#4321</a>, but I think I'm missing a trick somewhere.</p>



<a name="211631264"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211631264" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211631264">(Sep 29 2020 at 14:48)</a>:</h4>
<p><span class="user-mention" data-user-id="310045">@Eric Wieser</span> I'm confused.... what is <code>add_monoid_algebra</code>? Is it just the usual monoid algebra?</p>



<a name="211631922"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211631922" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211631922">(Sep 29 2020 at 14:53)</a>:</h4>
<p>If so, why should an algebra <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal">A</span></span></span></span> ever be isomorphic to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo stretchy="false">[</mo><mi mathvariant="bold">N</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">A[\mathbf{N}]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord"><span class="mord mathbf">N</span></span><span class="mclose">]</span></span></span></span>?</p>



<a name="211632442"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211632442" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211632442">(Sep 29 2020 at 14:57)</a>:</h4>
<p><code>add_monoid_algebra</code> seems to have all the properties that I'd associate with grading; namely elementwise addition and convolutional multiplication. I think I see your point though - clearly the mapping from <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal">A</span></span></span></span> to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo stretchy="false">[</mo><mi>N</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">A[N]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">]</span></span></span></span> is injective and not bijective</p>



<a name="211632491"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211632491" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211632491">(Sep 29 2020 at 14:57)</a>:</h4>
<p><del>(also it turns out I don't know how to typeset math here after all...)</del></p>



<a name="211632540"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211632540" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211632540">(Sep 29 2020 at 14:57)</a>:</h4>
<p>Use double <code>$</code></p>



<a name="211632967"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211632967" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211632967">(Sep 29 2020 at 15:00)</a>:</h4>
<p>Elaborating on my last point  - <code>add_monoid_algebra</code> behaves exactly as I want for splitting an element of <code>tensor_algebra</code> into grades through <code>lift</code> - but the part of I that I actually care about is a subalgebra of it.</p>



<a name="211635169"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211635169" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211635169">(Sep 29 2020 at 15:14)</a>:</h4>
<p>Isn't the map you defined from <code>free_algebra R X</code> to <code>add_monoid_algebra (free_algebra R X) N</code> just the "obvious" inclusion from <code>free_algebra R X</code> to the monoid algebra? This would not give the right answer, even if you consider the image of this embedding (since the image is concentrated in degree 0).</p>



<a name="211635267"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211635267" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211635267">(Sep 29 2020 at 15:15)</a>:</h4>
<p>Oh nevermind, it's okay since you're lifting the map from <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span></span> which sends elements to elements of degree <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>.</p>



<a name="211635289"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211635289" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211635289">(Sep 29 2020 at 15:15)</a>:</h4>
<p>My understanding is that it's the mapping that turns vectors into the <code>single 1 v</code> elements, and products and sums into the appropriate elements. eg <code>v * w</code> goes to <code>single 2 (v * w)</code> thanks to the convolution product</p>



<a name="211635297"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211635297" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211635297">(Sep 29 2020 at 15:15)</a>:</h4>
<p>Yeah</p>



<a name="211635298"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211635298" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211635298">(Sep 29 2020 at 15:15)</a>:</h4>
<p>So yeah, the grading is given by the image of this map.</p>



<a name="211635396"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211635396" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211635396">(Sep 29 2020 at 15:16)</a>:</h4>
<p>I'm tempted to use <code>algebra.adjoin R {f | ∃ (x : X), f = @grading_fun R X _ x }</code> to restrict the output type to exactly that image</p>



<a name="211635435"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211635435" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211635435">(Sep 29 2020 at 15:16)</a>:</h4>
<p>Although I suspect I'll end up with some awkward proofs...</p>



<a name="211635461"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211635461" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211635461">(Sep 29 2020 at 15:16)</a>:</h4>
<p>I think it would be easier to just take the image of this map.</p>



<a name="211635992"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211635992" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211635992">(Sep 29 2020 at 15:20)</a>:</h4>
<p>And just avoid defining the equivalence?</p>



<a name="211637054"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211637054" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211637054">(Sep 29 2020 at 15:27)</a>:</h4>
<p>Hmmmm..... I think it's a bit more complicated....</p>



<a name="211637123"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211637123" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211637123">(Sep 29 2020 at 15:27)</a>:</h4>
<p>You really want to represent elements of <code>free_algebra R X</code> as sums of products of elements of <code>X</code> with coefficients in <code>R</code> and not something random in <code>free_algebra R X</code>.</p>



<a name="211639797"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211639797" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211639797">(Sep 29 2020 at 15:43)</a>:</h4>
<p>I don't follow. What's this about an isomorphism/image?<br>
If <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal">A</span></span></span></span> is an <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span>-algebra, then we can specify a <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">N</mi></mrow><annotation encoding="application/x-tex">\mathbb{N}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord"><span class="mord mathbb">N</span></span></span></span></span>-indexed grading on <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal">A</span></span></span></span> by giving an <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span>-algebra map <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>→</mo><mi>A</mi><mo stretchy="false">[</mo><mi mathvariant="double-struck">N</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">A \to A[\mathbb{N}]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord"><span class="mord mathbb">N</span></span><span class="mclose">]</span></span></span></span> (more commonly written as, say, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo stretchy="false">[</mo><mi>T</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">A[T]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">A</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mclose">]</span></span></span></span>).</p>



<a name="211640095"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211640095" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211640095">(Sep 29 2020 at 15:45)</a>:</h4>
<p>Which I think is what you did, but then more things are happening after that which I don't understand.</p>



<a name="211640358"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211640358" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211640358">(Sep 29 2020 at 15:47)</a>:</h4>
<p>What's the graded degree <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> piece?</p>



<a name="211640418"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211640418" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211640418">(Sep 29 2020 at 15:47)</a>:</h4>
<p>All those <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">a</span></span></span></span> that get sent to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><msup><mi>T</mi><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">a T^n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal">a</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span></p>



<a name="211640615"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211640615" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211640615">(Sep 29 2020 at 15:49)</a>:</h4>
<p>Do I need some further conditions? Really it's supposed to be a comodule for the coalgebra <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo stretchy="false">[</mo><mi>T</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">R[T]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mclose">]</span></span></span></span>, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Δ</mi><mo stretchy="false">(</mo><mi>T</mi><mo stretchy="false">)</mo><mo>=</mo><mi>T</mi><mo>⊗</mo><mi>T</mi></mrow><annotation encoding="application/x-tex">\Delta(T) = T \otimes T</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">Δ</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⊗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span>.</p>



<a name="211640691"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211640691" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211640691">(Sep 29 2020 at 15:49)</a>:</h4>
<p>No, I think you're right.<br>
I was just worried about the fact that we want the graded parts to be <code>R</code>-modules, but this follows since <code>R</code>is central.</p>



<a name="211640703"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211640703" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211640703">(Sep 29 2020 at 15:49)</a>:</h4>
<p>But I'm under the impression that it's automatic somehow.</p>



<a name="211640919"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211640919" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211640919">(Sep 29 2020 at 15:51)</a>:</h4>
<p>I mean in this case there really is some isomorphism with an obviously graded object.</p>



<a name="211641084"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211641084" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211641084">(Sep 29 2020 at 15:52)</a>:</h4>
<blockquote>
<p>but then more things are happening after that which I don't understand.</p>
</blockquote>
<p>I wanted to define a mapping to take me back in the other direction, and I was foolish enough to miss that <code>lift R $ grading_fun</code> is not injective. So the question is, do we either:</p>
<ul>
<li>Just stick with the injective mapping, <code>T →ₐ (ℕ →₀ T)</code> (where in the PR <code>(ℕ →₀ T)</code> is substituted with <code>add_monoid_algebra</code> which has the nice bonus of having a compatible multiplication)</li>
<li>Insist on an isomorphism <code>T ≃ₐ grades_of T</code>, and invent a new type for the destination algebra</li>
</ul>
<p>I started off down the second path, but needed <span class="user-mention" data-user-id="243562">@Adam Topaz</span> to point out the part after the comma</p>



<a name="211641315"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211641315" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211641315">(Sep 29 2020 at 15:54)</a>:</h4>
<p>OK, now that I think about it more it does seem like you need the comodule properties.</p>



<a name="211641435"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211641435" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211641435">(Sep 29 2020 at 15:54)</a>:</h4>
<p>There is a map back (which corresponds to setting <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">T = 1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>) but it's not an isomorphism.</p>



<a name="211641609"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211641609" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211641609">(Sep 29 2020 at 15:55)</a>:</h4>
<p>But one of the compositions is the identity: if you apply the <code>grading</code> map and then the "forget grading" map you get back what you started with</p>



<a name="211641734"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211641734" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211641734">(Sep 29 2020 at 15:56)</a>:</h4>
<p>Right, so maybe I cut back that PR to:</p>
<ul>
<li>Define the forward map <code>T →ₐ add_monoid_algebra T ℕ</code></li>
<li>Define the reverse map <code>add_monoid_algebra T ℕ →ₐ T</code></li>
<li>Show that <code>rev (fwd x) = x</code></li>
<li>Remove the attempt to show <code>fwd (rev y) = y</code>, because it doesn't</li>
</ul>



<a name="211641907"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211641907" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211641907">(Sep 29 2020 at 15:57)</a>:</h4>
<p>But <code>rev (fwd x) = x</code></p>



<a name="211642016"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211642016" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211642016">(Sep 29 2020 at 15:58)</a>:</h4>
<p>Yes, that's my third bullet point and I managed to prove that already in the PR</p>



<a name="211642312"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211642312" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211642312">(Sep 29 2020 at 16:00)</a>:</h4>
<p>There's another property of <code>fwd</code> that I think says that if you look at the degree <code>n</code> part of <code>fwd</code> of anything, then its coefficient again gets sent to itself in degree <code>n</code></p>



<a name="211642340"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211642340" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211642340">(Sep 29 2020 at 16:00)</a>:</h4>
<p>Any naming suggestions for the first two bullets?</p>
<ul>
<li>fwd: <code>grades_of</code>, <code>grades</code>, <code>grade</code>, <code>grading</code>, ...</li>
<li>rev: <code>from_grades</code>, <code>of_grades</code>, <code>ungrade</code>, ...</li>
</ul>



<a name="211642461"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211642461" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211642461">(Sep 29 2020 at 16:01)</a>:</h4>
<p>The <code>rev</code> map doesn't depend on the grading</p>



<a name="211642562"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211642562" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211642562">(Sep 29 2020 at 16:01)</a>:</h4>
<p>Also, it would be good to have a version of this story for modules too. But I don't think we have "<code>add_monoid_module</code>", do we?</p>



<a name="211642664"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211642664" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211642664">(Sep 29 2020 at 16:02)</a>:</h4>
<p>It's the direct sum isn't it?</p>



<a name="211642692"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211642692" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211642692">(Sep 29 2020 at 16:02)</a>:</h4>
<p><code>add_monoid_module</code> is just <code>finsupp</code> - indeed, it's built upon finsupp and adds the multiplication on top.</p>



<a name="211642766"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211642766" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211642766">(Sep 29 2020 at 16:02)</a>:</h4>
<p>direct sum is <code>dfinsupp</code>, which is likely more trouble than it's worth here (I have an old implementation of grading via dfinsupp)</p>



<a name="211643242"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211643242" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211643242">(Sep 29 2020 at 16:05)</a>:</h4>
<p>I was going to say it needs the structure of a module over the monoid (in this case <code>multiplicative nat</code> I guess) but actually it doesn't seem to be needed for this story. It does need the <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span>-module structure but I guess that one already exists.</p>



<a name="211643335"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211643335" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211643335">(Sep 29 2020 at 16:06)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110032">Reid Barton</span> <a href="#narrow/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60/near/211642461">said</a>:</p>
<blockquote>
<p>The <code>rev</code> map doesn't depend on the grading</p>
</blockquote>
<p>I suppose the rev map (<code>grading_inv</code> in the PR) could be part of the <code>add_monoid_algebra</code> API, but that makes naming it harder. <code>sum_id</code> perhaps?</p>



<a name="211643337"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211643337" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211643337">(Sep 29 2020 at 16:06)</a>:</h4>
<p>Eventually it should be a module over the <code>add_monoid_algebra</code> though.</p>



<a name="211643469"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211643469" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211643469">(Sep 29 2020 at 16:07)</a>:</h4>
<p>Mind editing your <code>it</code>s in the above messages to clarify what they refer to?</p>



<a name="211643522"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211643522" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211643522">(Sep 29 2020 at 16:07)</a>:</h4>
<p>They refer to a hypothethical <code>add_monoid_module</code></p>



<a name="211643644"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211643644" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211643644">(Sep 29 2020 at 16:08)</a>:</h4>
<p>Why would the <code>add_monoid_module</code> be a <code>module</code> over the <code>add_monoid_algebra</code> instead of over the monoid, when algebras are already modules?</p>



<a name="211643787"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211643787" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211643787">(Sep 29 2020 at 16:09)</a>:</h4>
<p>Like if <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span> is an <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span>-module then "<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mo stretchy="false">[</mo><mi>T</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">M[T]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mclose">]</span></span></span></span>" is an <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo stretchy="false">[</mo><mi>T</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">R[T]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mclose">]</span></span></span></span>-module and in particular both an <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span>-module and a module over <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><mn>1</mn><mo separator="true">,</mo><mi>T</mi><mo separator="true">,</mo><msup><mi>T</mi><mn>2</mn></msup><mo separator="true">,</mo><mo>…</mo><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{1, T, T^2, \ldots\}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">…</span><span class="mclose">}</span></span></span></span> = <code>multiplicative nat</code>.</p>



<a name="211644162"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211644162" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211644162">(Sep 29 2020 at 16:11)</a>:</h4>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mo stretchy="false">[</mo><mi>T</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">M[T]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mclose">]</span></span></span></span> would be the <code>add_monoid_module</code>. And then a graded <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span>-module is an <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span>-module <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span> together with an <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span>-module map <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mo>→</mo><mi>M</mi><mo stretchy="false">[</mo><mi>T</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">M \to M[T]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mclose">]</span></span></span></span> such that blah blah blah.</p>



<a name="211644485"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211644485" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211644485">(Sep 29 2020 at 16:14)</a>:</h4>
<p>I don't know if this is the best way to handle graded algebras/modules. But it's a nice point of view that comes up in algebraic geometry/homotopy theory. That's why I was wondering earlier whether mathlib was already doing this.</p>



<a name="211644697"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211644697" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211644697">(Sep 29 2020 at 16:15)</a>:</h4>
<p>It seems to at least have some advantages, for instance, the way the grading interacts with <code>+</code> and <code>*</code> is encoded neatly in saying that the <code>grading</code> map is an algebra homomorphism.</p>



<a name="211649844"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Grading%20the%20%60tensor_algebra%60/near/211649844" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60.html#211649844">(Sep 29 2020 at 16:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/116395-maths/topic/Grading.20the.20.60tensor_algebra.60/near/211641734">said</a>:</p>
<blockquote>
<p>Right, so maybe I cut back that PR to: &lt;snip&gt;</p>
</blockquote>
<p>I've gone ahead and done this, <a href="https://github.com/leanprover-community/mathlib/issues/1234">#1234</a> ought to now pass CI.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>