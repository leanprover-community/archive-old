---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D.html">Lean can't figure out type of {a}</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="207681042"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Lean%20can%27t%20figure%20out%20type%20of%20%7Ba%7D/near/207681042" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Browning <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D.html#207681042">(Aug 21 2020 at 20:29)</a>:</h4>
<p>So we've been working with adjoining elements to fields:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">field_theory</span><span class="bp">.</span><span class="n">subfield</span>
<span class="kn">import</span> <span class="n">ring_theory</span><span class="bp">.</span><span class="n">algebra</span>

<span class="kn">variables</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">field</span> <span class="n">F</span><span class="o">]</span> <span class="o">{</span><span class="n">E</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">field</span> <span class="n">E</span><span class="o">]</span> <span class="o">[</span><span class="n">algebra</span> <span class="n">F</span> <span class="n">E</span><span class="o">]</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">E</span><span class="o">)</span>

<span class="n">def</span> <span class="n">adjoin</span> <span class="o">:</span> <span class="n">set</span> <span class="n">E</span> <span class="o">:=</span> <span class="n">field</span><span class="bp">.</span><span class="n">closure</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">range</span> <span class="o">(</span><span class="n">algebra_map</span> <span class="n">F</span> <span class="n">E</span><span class="o">)</span> <span class="err">∪</span> <span class="n">S</span><span class="o">)</span>

<span class="n">def</span> <span class="n">adjoin_simple</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="n">E</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span> <span class="n">E</span> <span class="o">:=</span> <span class="n">adjoin</span> <span class="n">F</span> <span class="o">{</span><span class="n">α</span><span class="o">}</span>

<span class="c1">--this is fine</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="n">E</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">F</span><span class="o">)</span> <span class="o">:</span> <span class="n">algebra_map</span> <span class="n">F</span> <span class="n">E</span> <span class="n">x</span> <span class="err">∈</span> <span class="o">(</span><span class="n">adjoin_simple</span> <span class="n">F</span> <span class="n">α</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="c1">--this is also fine</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="n">E</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">F</span><span class="o">)</span> <span class="o">:</span> <span class="n">algebra_map</span> <span class="n">F</span> <span class="n">E</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">adjoin</span> <span class="n">F</span> <span class="o">({</span><span class="n">α</span><span class="o">}</span> <span class="o">:</span> <span class="n">set</span> <span class="n">E</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="c1">--this doesn&#39;t work</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="n">E</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">F</span><span class="o">)</span> <span class="o">:</span> <span class="n">algebra_map</span> <span class="n">F</span> <span class="n">E</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">adjoin</span> <span class="n">F</span> <span class="o">{</span><span class="n">α</span><span class="o">}</span> <span class="o">:=</span> <span class="n">sorry</span>
</code></pre></div>


<p>but lean sometimes has trouble figuring out that if <code>α : E</code> then <code>{α} : set E</code></p>
<p>How can we fix this?</p>



<a name="207681155"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Lean%20can%27t%20figure%20out%20type%20of%20%7Ba%7D/near/207681155" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D.html#207681155">(Aug 21 2020 at 20:30)</a>:</h4>
<p>You can always tell lean explicitly <code>({a} : set E)</code>.</p>



<a name="207681176"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Lean%20can%27t%20figure%20out%20type%20of%20%7Ba%7D/near/207681176" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Browning <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D.html#207681176">(Aug 21 2020 at 20:31)</a>:</h4>
<p>The problem is when we try to define notation (give me a sec)</p>



<a name="207681213"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Lean%20can%27t%20figure%20out%20type%20of%20%7Ba%7D/near/207681213" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Browning <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D.html#207681213">(Aug 21 2020 at 20:31)</a>:</h4>
<p>(deleted)</p>



<a name="207681233"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Lean%20can%27t%20figure%20out%20type%20of%20%7Ba%7D/near/207681233" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Browning <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D.html#207681233">(Aug 21 2020 at 20:31)</a>:</h4>
<p>We would really like to get notation F[alpha] to work</p>



<a name="207681349"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Lean%20can%27t%20figure%20out%20type%20of%20%7Ba%7D/near/207681349" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Browning <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D.html#207681349">(Aug 21 2020 at 20:32)</a>:</h4>
<p>(deleted)</p>



<a name="207681350"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Lean%20can%27t%20figure%20out%20type%20of%20%7Ba%7D/near/207681350" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Browning <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D.html#207681350">(Aug 21 2020 at 20:32)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">field_theory</span><span class="bp">.</span><span class="n">subfield</span>
<span class="kn">import</span> <span class="n">ring_theory</span><span class="bp">.</span><span class="n">algebra</span>

<span class="kn">variables</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">field</span> <span class="n">F</span><span class="o">]</span> <span class="o">{</span><span class="n">E</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">field</span> <span class="n">E</span><span class="o">]</span> <span class="o">[</span><span class="n">algebra</span> <span class="n">F</span> <span class="n">E</span><span class="o">]</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">E</span><span class="o">)</span>

<span class="n">def</span> <span class="n">adjoin</span> <span class="o">:</span> <span class="n">set</span> <span class="n">E</span> <span class="o">:=</span> <span class="n">field</span><span class="bp">.</span><span class="n">closure</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">range</span> <span class="o">(</span><span class="n">algebra_map</span> <span class="n">F</span> <span class="n">E</span><span class="o">)</span> <span class="err">∪</span> <span class="n">S</span><span class="o">)</span>

<span class="n">def</span> <span class="n">adjoin_simple</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="n">E</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span> <span class="n">E</span> <span class="o">:=</span> <span class="n">adjoin</span> <span class="n">F</span> <span class="o">{</span><span class="n">α</span><span class="o">}</span>

<span class="c1">--this is fine</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="n">E</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">F</span><span class="o">)</span> <span class="o">:</span> <span class="n">algebra_map</span> <span class="n">F</span> <span class="n">E</span> <span class="n">x</span> <span class="err">∈</span> <span class="o">(</span><span class="n">adjoin_simple</span> <span class="n">F</span> <span class="n">α</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="c1">--this is also fine</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="n">E</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">F</span><span class="o">)</span> <span class="o">:</span> <span class="n">algebra_map</span> <span class="n">F</span> <span class="n">E</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">adjoin</span> <span class="n">F</span> <span class="o">({</span><span class="n">α</span><span class="o">}</span> <span class="o">:</span> <span class="n">set</span> <span class="n">E</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="c1">--this doesn&#39;t work</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="n">E</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">F</span><span class="o">)</span> <span class="o">:</span> <span class="n">algebra_map</span> <span class="n">F</span> <span class="n">E</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">adjoin</span> <span class="n">F</span> <span class="o">{</span><span class="n">α</span><span class="o">}</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="kn">notation</span> <span class="n">K</span><span class="bp">`</span><span class="o">[</span><span class="bp">`</span><span class="o">:</span><span class="n">std</span><span class="bp">.</span><span class="n">prec</span><span class="bp">.</span><span class="n">max_plus</span> <span class="n">β</span><span class="bp">`</span><span class="o">]</span><span class="bp">`</span> <span class="o">:=</span> <span class="n">adjoin</span> <span class="n">K</span> <span class="o">{</span><span class="n">β</span><span class="o">}</span>

<span class="c1">--how can we get this to work?</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="n">E</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">F</span><span class="o">)</span> <span class="o">:</span> <span class="n">algebra_map</span> <span class="n">F</span> <span class="n">E</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">F</span><span class="o">[</span><span class="n">α</span><span class="o">]</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="c1">--this works because it knows that F[α] is supposed to be in set E</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="n">E</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">F</span><span class="o">)</span> <span class="o">:</span> <span class="n">F</span><span class="o">[</span><span class="n">α</span><span class="o">]</span> <span class="bp">=</span> <span class="n">adjoin_simple</span> <span class="n">F</span> <span class="n">α</span> <span class="o">:=</span> <span class="n">sorry</span>
</code></pre></div>



<a name="207681495"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Lean%20can%27t%20figure%20out%20type%20of%20%7Ba%7D/near/207681495" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Browning <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D.html#207681495">(Aug 21 2020 at 20:34)</a>:</h4>
<p>so the notation sometimes works when it already knows that F[α] is supposed to be in set E, but we would like this sort of notation to work more generally</p>



<a name="207681546"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Lean%20can%27t%20figure%20out%20type%20of%20%7Ba%7D/near/207681546" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D.html#207681546">(Aug 21 2020 at 20:34)</a>:</h4>
<p>It's a hack:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">notation</span> <span class="n">K</span><span class="bp">`</span><span class="o">[</span><span class="bp">`</span><span class="o">:</span><span class="n">std</span><span class="bp">.</span><span class="n">prec</span><span class="bp">.</span><span class="n">max_plus</span> <span class="n">β</span><span class="bp">`</span><span class="o">]</span><span class="bp">`</span> <span class="o">:=</span> <span class="n">adjoin</span> <span class="n">K</span> <span class="o">{</span><span class="n">x</span> <span class="bp">|</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">β</span><span class="o">}</span>
</code></pre></div>



<a name="207681555"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Lean%20can%27t%20figure%20out%20type%20of%20%7Ba%7D/near/207681555" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Browning <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D.html#207681555">(Aug 21 2020 at 20:34)</a>:</h4>
<p>(deleted)</p>



<a name="207681591"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Lean%20can%27t%20figure%20out%20type%20of%20%7Ba%7D/near/207681591" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Browning <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D.html#207681591">(Aug 21 2020 at 20:34)</a>:</h4>
<p>Oh, it looks like that works!</p>



<a name="207681630"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Lean%20can%27t%20figure%20out%20type%20of%20%7Ba%7D/near/207681630" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Browning <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D.html#207681630">(Aug 21 2020 at 20:35)</a>:</h4>
<p>Is there any downside or is that hack as good as it looks?</p>



<a name="207681631"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Lean%20can%27t%20figure%20out%20type%20of%20%7Ba%7D/near/207681631" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D.html#207681631">(Aug 21 2020 at 20:35)</a>:</h4>
<p>Yeah, but someone who actually know how to write notation would give you a better answer :)</p>



<a name="207681825"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Lean%20can%27t%20figure%20out%20type%20of%20%7Ba%7D/near/207681825" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D.html#207681825">(Aug 21 2020 at 20:37)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> Do you have any suggestions?</p>



<a name="207681973"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Lean%20can%27t%20figure%20out%20type%20of%20%7Ba%7D/near/207681973" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D.html#207681973">(Aug 21 2020 at 20:38)</a>:</h4>
<p>Have you tried <code>notation K`[`:std.prec.max_plus β`]` := adjoin K ({β} : set _)</code>?</p>



<a name="207681996"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Lean%20can%27t%20figure%20out%20type%20of%20%7Ba%7D/near/207681996" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Browning <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D.html#207681996">(Aug 21 2020 at 20:38)</a>:</h4>
<p>I think that I tried that</p>



<a name="207682025"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Lean%20can%27t%20figure%20out%20type%20of%20%7Ba%7D/near/207682025" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Thomas Browning <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D.html#207682025">(Aug 21 2020 at 20:39)</a>:</h4>
<p>Yeah, that doesn't work unfortunately</p>



<a name="207682209"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Lean%20can%27t%20figure%20out%20type%20of%20%7Ba%7D/near/207682209" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D.html#207682209">(Aug 21 2020 at 20:40)</a>:</h4>
<p>Oh, I see the problem now. Yeah you should make the notation unfold to <code>adjoin_simple</code></p>



<a name="207682354"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Lean%20can%27t%20figure%20out%20type%20of%20%7Ba%7D/near/207682354" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D.html#207682354">(Aug 21 2020 at 20:42)</a>:</h4>
<p>it's generally a bad idea to have notations unfold to things other than constant applied to variables</p>



<a name="207682361"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Lean%20can%27t%20figure%20out%20type%20of%20%7Ba%7D/near/207682361" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Lutz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D.html#207682361">(Aug 21 2020 at 20:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D/near/207682209">said</a>:</p>
<blockquote>
<p>Oh, I see the problem now. Yeah you should make the notation unfold to <code>adjoin_simple</code></p>
</blockquote>
<p>We want to remove <code>adjoin_simple</code></p>



<a name="207682380"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Lean%20can%27t%20figure%20out%20type%20of%20%7Ba%7D/near/207682380" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D.html#207682380">(Aug 21 2020 at 20:42)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">field_theory</span><span class="bp">.</span><span class="n">subfield</span>
<span class="kn">import</span> <span class="n">ring_theory</span><span class="bp">.</span><span class="n">algebra</span>

<span class="kn">variables</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">field</span> <span class="n">F</span><span class="o">]</span> <span class="o">{</span><span class="n">E</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">field</span> <span class="n">E</span><span class="o">]</span> <span class="o">[</span><span class="n">algebra</span> <span class="n">F</span> <span class="n">E</span><span class="o">]</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">E</span><span class="o">)</span>

<span class="n">def</span> <span class="n">adjoin</span> <span class="o">:</span> <span class="n">set</span> <span class="n">E</span> <span class="o">:=</span> <span class="n">field</span><span class="bp">.</span><span class="n">closure</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">range</span> <span class="o">(</span><span class="n">algebra_map</span> <span class="n">F</span> <span class="n">E</span><span class="o">)</span> <span class="err">∪</span> <span class="n">S</span><span class="o">)</span>

<span class="n">def</span> <span class="n">adjoin_simple</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="n">E</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span> <span class="n">E</span> <span class="o">:=</span> <span class="n">adjoin</span> <span class="n">F</span> <span class="o">({</span><span class="n">α</span><span class="o">}</span> <span class="o">:</span> <span class="n">set</span> <span class="bp">_</span><span class="o">)</span>

<span class="kn">notation</span> <span class="n">K</span><span class="bp">`</span><span class="o">[</span><span class="bp">`</span><span class="o">:</span><span class="n">std</span><span class="bp">.</span><span class="n">prec</span><span class="bp">.</span><span class="n">max_plus</span> <span class="n">β</span><span class="bp">`</span><span class="o">]</span><span class="bp">`</span> <span class="o">:=</span> <span class="n">adjoin_simple</span> <span class="n">K</span> <span class="n">β</span>

<span class="c1">--how can we get this to work?</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="n">E</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">F</span><span class="o">)</span> <span class="o">:</span> <span class="n">algebra_map</span> <span class="n">F</span> <span class="n">E</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">F</span><span class="o">[</span><span class="n">α</span><span class="o">]</span> <span class="o">:=</span> <span class="n">sorry</span>
</code></pre></div>



<a name="207682387"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Lean%20can%27t%20figure%20out%20type%20of%20%7Ba%7D/near/207682387" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D.html#207682387">(Aug 21 2020 at 20:42)</a>:</h4>
<p>Is that safe?</p>



<a name="207682434"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Lean%20can%27t%20figure%20out%20type%20of%20%7Ba%7D/near/207682434" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D.html#207682434">(Aug 21 2020 at 20:42)</a>:</h4>
<p>Unfortunately lean has limited capacity to perform rewriting as part of notation expansion</p>



<a name="207682461"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Lean%20can%27t%20figure%20out%20type%20of%20%7Ba%7D/near/207682461" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Lutz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D.html#207682461">(Aug 21 2020 at 20:43)</a>:</h4>
<p><span class="user-mention silent" data-user-id="243562">Adam Topaz</span> <a href="#narrow/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D/near/207682380">said</a>:</p>
<blockquote>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">field_theory</span><span class="bp">.</span><span class="n">subfield</span>
<span class="kn">import</span> <span class="n">ring_theory</span><span class="bp">.</span><span class="n">algebra</span>

<span class="kn">variables</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">field</span> <span class="n">F</span><span class="o">]</span> <span class="o">{</span><span class="n">E</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">field</span> <span class="n">E</span><span class="o">]</span> <span class="o">[</span><span class="n">algebra</span> <span class="n">F</span> <span class="n">E</span><span class="o">]</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">E</span><span class="o">)</span>

<span class="n">def</span> <span class="n">adjoin</span> <span class="o">:</span> <span class="n">set</span> <span class="n">E</span> <span class="o">:=</span> <span class="n">field</span><span class="bp">.</span><span class="n">closure</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">range</span> <span class="o">(</span><span class="n">algebra_map</span> <span class="n">F</span> <span class="n">E</span><span class="o">)</span> <span class="err">∪</span> <span class="n">S</span><span class="o">)</span>

<span class="n">def</span> <span class="n">adjoin_simple</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="n">E</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span> <span class="n">E</span> <span class="o">:=</span> <span class="n">adjoin</span> <span class="n">F</span> <span class="o">({</span><span class="n">α</span><span class="o">}</span> <span class="o">:</span> <span class="n">set</span> <span class="bp">_</span><span class="o">)</span>

<span class="kn">notation</span> <span class="n">K</span><span class="bp">`</span><span class="o">[</span><span class="bp">`</span><span class="o">:</span><span class="n">std</span><span class="bp">.</span><span class="n">prec</span><span class="bp">.</span><span class="n">max_plus</span> <span class="n">β</span><span class="bp">`</span><span class="o">]</span><span class="bp">`</span> <span class="o">:=</span> <span class="n">adjoin_simple</span> <span class="n">K</span> <span class="n">β</span>

<span class="c1">--how can we get this to work?</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="n">E</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">F</span><span class="o">)</span> <span class="o">:</span> <span class="n">algebra_map</span> <span class="n">F</span> <span class="n">E</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">F</span><span class="o">[</span><span class="n">α</span><span class="o">]</span> <span class="o">:=</span> <span class="n">sorry</span>
</code></pre></div>


</blockquote>
<p>Yeah, that's what we were doing before. But we kind of want to remove <code>adjoin_simple</code></p>



<a name="207682476"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Lean%20can%27t%20figure%20out%20type%20of%20%7Ba%7D/near/207682476" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D.html#207682476">(Aug 21 2020 at 20:43)</a>:</h4>
<p>You can make <code>adjoin_simple</code> reducible</p>



<a name="207682506"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Lean%20can%27t%20figure%20out%20type%20of%20%7Ba%7D/near/207682506" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D.html#207682506">(Aug 21 2020 at 20:43)</a>:</h4>
<p>Or you can notate the type of <code>α</code></p>



<a name="207682531"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Lean%20can%27t%20figure%20out%20type%20of%20%7Ba%7D/near/207682531" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Lutz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D.html#207682531">(Aug 21 2020 at 20:43)</a>:</h4>
<p>What do you mean?</p>



<a name="207682625"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Lean%20can%27t%20figure%20out%20type%20of%20%7Ba%7D/near/207682625" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D.html#207682625">(Aug 21 2020 at 20:44)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">field_theory</span><span class="bp">.</span><span class="n">subfield</span>
<span class="kn">import</span> <span class="n">ring_theory</span><span class="bp">.</span><span class="n">algebra</span>

<span class="kn">variables</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">field</span> <span class="n">F</span><span class="o">]</span> <span class="o">{</span><span class="n">E</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">field</span> <span class="n">E</span><span class="o">]</span> <span class="o">[</span><span class="n">algebra</span> <span class="n">F</span> <span class="n">E</span><span class="o">]</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="n">E</span><span class="o">)</span>

<span class="n">def</span> <span class="n">adjoin</span> <span class="o">:</span> <span class="n">set</span> <span class="n">E</span> <span class="o">:=</span> <span class="n">field</span><span class="bp">.</span><span class="n">closure</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">range</span> <span class="o">(</span><span class="n">algebra_map</span> <span class="n">F</span> <span class="n">E</span><span class="o">)</span> <span class="err">∪</span> <span class="n">S</span><span class="o">)</span>

<span class="bp">@</span><span class="o">[</span><span class="kn">reducible</span><span class="o">]</span>
<span class="n">def</span> <span class="n">adjoin_simple</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="n">E</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span> <span class="n">E</span> <span class="o">:=</span> <span class="n">adjoin</span> <span class="n">F</span> <span class="o">({</span><span class="n">α</span><span class="o">}</span> <span class="o">:</span> <span class="n">set</span> <span class="bp">_</span><span class="o">)</span>

<span class="kn">notation</span> <span class="n">K</span><span class="bp">`</span><span class="o">[</span><span class="bp">`</span><span class="o">:</span><span class="n">std</span><span class="bp">.</span><span class="n">prec</span><span class="bp">.</span><span class="n">max_plus</span> <span class="n">β</span><span class="bp">`</span><span class="o">]</span><span class="bp">`</span> <span class="o">:=</span> <span class="n">adjoin_simple</span> <span class="n">K</span> <span class="n">β</span>

<span class="c1">--how can we get this to work?</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="n">E</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">F</span><span class="o">)</span> <span class="o">:</span> <span class="n">algebra_map</span> <span class="n">F</span> <span class="n">E</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">F</span><span class="o">[</span><span class="n">α</span><span class="o">]</span> <span class="o">:=</span> <span class="n">sorry</span>
</code></pre></div>



<a name="207682702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Lean%20can%27t%20figure%20out%20type%20of%20%7Ba%7D/near/207682702" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D.html#207682702">(Aug 21 2020 at 20:45)</a>:</h4>
<p>or</p>
<div class="codehilite"><pre><span></span><code><span class="kn">notation</span> <span class="n">K</span><span class="bp">`</span><span class="o">[</span><span class="bp">`</span><span class="o">:</span><span class="n">std</span><span class="bp">.</span><span class="n">prec</span><span class="bp">.</span><span class="n">max_plus</span> <span class="n">β</span><span class="bp">`</span><span class="o">:</span><span class="bp">`</span><span class="n">E</span><span class="bp">`</span><span class="o">]</span><span class="bp">`</span> <span class="o">:=</span> <span class="n">adjoin</span> <span class="n">K</span> <span class="o">({</span><span class="n">β</span><span class="o">}</span> <span class="o">:</span> <span class="n">set</span> <span class="n">E</span><span class="o">)</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="n">E</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">F</span><span class="o">)</span> <span class="o">:</span> <span class="n">algebra_map</span> <span class="n">F</span> <span class="n">E</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">F</span><span class="o">[</span><span class="n">α</span><span class="o">:</span><span class="n">E</span><span class="o">]</span> <span class="o">:=</span> <span class="n">sorry</span>
</code></pre></div>



<a name="207682908"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Lean%20can%27t%20figure%20out%20type%20of%20%7Ba%7D/near/207682908" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D.html#207682908">(Aug 21 2020 at 20:46)</a>:</h4>
<p>By the way, from a mathematical point of view, this is confusing notation since <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi><mo stretchy="false">[</mo><mi>α</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">K[\alpha]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="mclose">]</span></span></span></span> usually denotes the algebra generated by <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span></span></span></span> and not the field generated by <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span></span></span></span>, but I guess <code>(...)</code> doesn't work with notation?</p>



<a name="207682991"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Lean%20can%27t%20figure%20out%20type%20of%20%7Ba%7D/near/207682991" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D.html#207682991">(Aug 21 2020 at 20:47)</a>:</h4>
<p>aha:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">notation</span> <span class="n">K</span><span class="bp">`</span><span class="o">[</span><span class="bp">`</span><span class="o">:</span><span class="n">std</span><span class="bp">.</span><span class="n">prec</span><span class="bp">.</span><span class="n">max_plus</span> <span class="n">β</span><span class="bp">`</span><span class="o">]</span><span class="bp">`</span> <span class="o">:=</span>
<span class="n">adjoin</span> <span class="n">K</span> <span class="o">(</span><span class="bp">@</span><span class="n">singleton</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">set</span><span class="bp">.</span><span class="n">has_singleton</span> <span class="n">β</span><span class="o">)</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="n">E</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">F</span><span class="o">)</span> <span class="o">:</span> <span class="n">algebra_map</span> <span class="n">F</span> <span class="n">E</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">F</span><span class="o">[</span><span class="n">α</span><span class="o">]</span> <span class="o">:=</span> <span class="n">sorry</span>
</code></pre></div>



<a name="207683075"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Lean%20can%27t%20figure%20out%20type%20of%20%7Ba%7D/near/207683075" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D.html#207683075">(Aug 21 2020 at 20:48)</a>:</h4>
<p>Now how can we change <code>[..]</code> to <code>(..)</code>?</p>



<a name="207683084"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Lean%20can%27t%20figure%20out%20type%20of%20%7Ba%7D/near/207683084" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Lutz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D.html#207683084">(Aug 21 2020 at 20:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="243562">Adam Topaz</span> <a href="#narrow/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D/near/207682908">said</a>:</p>
<blockquote>
<p>By the way, from a mathematical point of view, this is confusing notation since <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi><mo stretchy="false">[</mo><mi>α</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">K[\alpha]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="mclose">]</span></span></span></span> usually denotes the algebra generated by <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span></span></span></span> and not the field generated by <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span></span></span></span>, but I guess <code>(...)</code> doesn't work with notation?</p>
</blockquote>
<p>Yeah, parentheses don't seem to work well in notation for some reason</p>



<a name="207683128"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Lean%20can%27t%20figure%20out%20type%20of%20%7Ba%7D/near/207683128" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Lutz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D.html#207683128">(Aug 21 2020 at 20:48)</a>:</h4>
<p>We're open to other suggestions for notation though (besides square brackets)</p>



<a name="207683162"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Lean%20can%27t%20figure%20out%20type%20of%20%7Ba%7D/near/207683162" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D.html#207683162">(Aug 21 2020 at 20:49)</a>:</h4>
<p>how about <code> F[(α)]</code></p>



<a name="207683277"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Lean%20can%27t%20figure%20out%20type%20of%20%7Ba%7D/near/207683277" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D.html#207683277">(Aug 21 2020 at 20:50)</a>:</h4>
<p>you can also do funny things like <code>F-(α)-</code> as long as it doesn't begin with <code>(</code> or end with <code>)</code></p>



<a name="207683308"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Lean%20can%27t%20figure%20out%20type%20of%20%7Ba%7D/near/207683308" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D.html#207683308">(Aug 21 2020 at 20:50)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D/near/207683277">said</a>:</p>
<blockquote>
<p>you can also do funny things like <code>F-(α)-</code> as long as it doesn't begin with <code>(</code> or end with <code>)</code></p>
</blockquote>
<p>That looks awful!</p>



<a name="207683356"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Lean%20can%27t%20figure%20out%20type%20of%20%7Ba%7D/near/207683356" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D.html#207683356">(Aug 21 2020 at 20:51)</a>:</h4>
<p>with unicode the Possibilities are Endless (TM)</p>



<a name="207683377"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Lean%20can%27t%20figure%20out%20type%20of%20%7Ba%7D/near/207683377" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D.html#207683377">(Aug 21 2020 at 20:51)</a>:</h4>
<p>Where are those zero-width unicode characters again?</p>



<a name="207683401"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Lean%20can%27t%20figure%20out%20type%20of%20%7Ba%7D/near/207683401" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D.html#207683401">(Aug 21 2020 at 20:51)</a>:</h4>
<p>I recall seeing a talk about the mongolian vowel separator</p>



<a name="207683405"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Lean%20can%27t%20figure%20out%20type%20of%20%7Ba%7D/near/207683405" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D.html#207683405">(Aug 21 2020 at 20:51)</a>:</h4>
<p>In the perfectoid project we also used fancy parentheses.</p>



<a name="207683492"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Lean%20can%27t%20figure%20out%20type%20of%20%7Ba%7D/near/207683492" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D.html#207683492">(Aug 21 2020 at 20:52)</a>:</h4>
<p>which is one of the few space characters that went through multiple character classes over the different unicode standards</p>



<a name="207683511"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Lean%20can%27t%20figure%20out%20type%20of%20%7Ba%7D/near/207683511" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D.html#207683511">(Aug 21 2020 at 20:52)</a>:</h4>
<p><a href="https://github.com/leanprover-community/lean-perfectoid-spaces/blob/master/src/Spa/localization_Huber.lean#L28">https://github.com/leanprover-community/lean-perfectoid-spaces/blob/master/src/Spa/localization_Huber.lean#L28</a></p>



<a name="207683567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Lean%20can%27t%20figure%20out%20type%20of%20%7Ba%7D/near/207683567" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D.html#207683567">(Aug 21 2020 at 20:53)</a>:</h4>
<p>Those are not actual parentheses.</p>



<a name="207683586"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Lean%20can%27t%20figure%20out%20type%20of%20%7Ba%7D/near/207683586" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D.html#207683586">(Aug 21 2020 at 20:53)</a>:</h4>
<p>My vscode doesn't like that (I think I'm missing some fonts :( )</p>



<a name="207683808"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Lean%20can%27t%20figure%20out%20type%20of%20%7Ba%7D/near/207683808" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D.html#207683808">(Aug 21 2020 at 20:55)</a>:</h4>
<p>That's one of the many reason why this isn't such a great idea (and it would probably not go through mathlib review).</p>



<a name="207683857"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Lean%20can%27t%20figure%20out%20type%20of%20%7Ba%7D/near/207683857" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D.html#207683857">(Aug 21 2020 at 20:55)</a>:</h4>
<p>personally I greatly prefer "ascii art" to this kind of thing</p>



<a name="207683996"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Lean%20can%27t%20figure%20out%20type%20of%20%7Ba%7D/near/207683996" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D.html#207683996">(Aug 21 2020 at 20:56)</a>:</h4>
<p><code>F&gt;&gt;= a &lt;&lt;=</code>?</p>



<a name="207686148"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Lean%20can%27t%20figure%20out%20type%20of%20%7Ba%7D/near/207686148" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D.html#207686148">(Aug 21 2020 at 21:18)</a>:</h4>
<p>I think those might already be used for monads</p>



<a name="207686168"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Lean%20can%27t%20figure%20out%20type%20of%20%7Ba%7D/near/207686168" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Lean.20can't.20figure.20out.20type.20of.20.7Ba.7D.html#207686168">(Aug 21 2020 at 21:19)</a>:</h4>
<p>I would use four characters, then you'll be fine</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>