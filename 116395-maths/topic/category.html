---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/category.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html">category</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="193656389"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193656389" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193656389">(Apr 11 2020 at 11:50)</a>:</h4>
<p>Hello, I'm training on category and i have a problem   <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span> </p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">comma</span>
<span class="kn">import</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span><span class="bp">.</span><span class="n">limits</span>
<span class="kn">import</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span><span class="bp">.</span><span class="n">shapes</span>
<span class="kn">import</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">yoneda</span>

<span class="n">universes</span> <span class="n">v</span> <span class="n">u</span>
<span class="kn">open</span> <span class="n">category_theory</span>
<span class="kn">open</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span>
<span class="kn">open</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">category</span>

<span class="kn">variables</span> <span class="o">{</span><span class="n">C</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span>
<span class="kn">variables</span> <span class="o">[</span><span class="err">𝒞</span> <span class="o">:</span> <span class="n">category</span><span class="bp">.</span><span class="o">{</span><span class="n">v</span><span class="o">}</span> <span class="n">C</span><span class="o">]</span>
<span class="kn">variables</span> <span class="o">{</span><span class="n">C</span><span class="o">}</span> <span class="o">[</span><span class="n">has_binary_products</span><span class="bp">.</span><span class="o">{</span><span class="n">v</span><span class="o">}</span> <span class="n">C</span><span class="o">][</span><span class="n">has_terminal</span><span class="bp">.</span><span class="o">{</span><span class="n">v</span><span class="o">}</span> <span class="n">C</span><span class="o">]</span>   <span class="c1">---</span>
<span class="n">include</span> <span class="err">𝒞</span>                        <span class="c1">---- what is ? include ?</span>


<span class="bp">/</span>
<span class="n">The</span> <span class="n">goal</span> <span class="n">is</span> <span class="n">define</span> <span class="n">group</span> <span class="n">obj</span> <span class="k">in</span> <span class="n">a</span> <span class="n">category</span><span class="bp">.</span>
          <span class="n">reference</span> <span class="o">:</span> <span class="n">Douady</span> <span class="o">:</span> <span class="n">Algebre</span> <span class="n">et</span> <span class="n">th</span><span class="err">é</span><span class="n">ories</span> <span class="n">galoisiennes</span> <span class="n">page</span> <span class="mi">45</span>
          <span class="n">exemple</span> <span class="o">:</span> <span class="k">in</span> <span class="n">the</span> <span class="n">category</span> <span class="n">of</span> <span class="n">presheaf</span><span class="bp">.</span>
          <span class="k">in</span> <span class="n">Ring</span> <span class="err">?</span> <span class="n">Idem</span>  <span class="n">Agl</span>  <span class="n">etc</span>
        <span class="kn">context</span>  <span class="o">:</span> <span class="err">𝒞</span> <span class="n">terminal</span> <span class="bp">+</span> <span class="n">finite</span> <span class="n">product</span> <span class="bp">!</span>
<span class="bp">-/</span>
<span class="kn">notation</span> <span class="n">f</span> <span class="bp">`</span> <span class="err">⊗</span> <span class="bp">`</span><span class="o">:</span><span class="mi">20</span> <span class="n">g</span> <span class="o">:</span><span class="mi">20</span> <span class="o">:=</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">map</span> <span class="n">f</span> <span class="n">g</span>
<span class="kn">notation</span>  <span class="bp">`</span><span class="n">T</span><span class="bp">`</span><span class="n">C</span> <span class="o">:</span><span class="mi">20</span> <span class="o">:=</span> <span class="o">(</span><span class="n">terminal</span> <span class="n">C</span><span class="o">)</span>
<span class="kn">notation</span>   <span class="bp">`</span><span class="n">T</span><span class="bp">`</span><span class="n">X</span> <span class="o">:</span> <span class="mi">20</span> <span class="o">:=</span> <span class="o">(</span><span class="n">terminal</span><span class="bp">.</span><span class="k">from</span> <span class="n">X</span><span class="o">)</span>
<span class="kn">notation</span> <span class="n">f</span> <span class="bp">`</span> <span class="bp">|</span> <span class="bp">`</span><span class="o">:</span><span class="mi">20</span> <span class="n">g</span> <span class="o">:</span><span class="mi">20</span> <span class="o">:=</span>  <span class="n">prod</span><span class="bp">.</span><span class="n">lift</span> <span class="n">f</span> <span class="n">g</span>
<span class="kn">structure</span> <span class="n">group_obj</span> <span class="o">{</span><span class="n">C</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}[</span><span class="err">𝒞</span> <span class="o">:</span> <span class="n">category</span><span class="bp">.</span><span class="o">{</span><span class="n">v</span><span class="o">}</span> <span class="n">C</span><span class="o">][</span><span class="n">has_binary_products</span><span class="bp">.</span><span class="o">{</span><span class="n">v</span><span class="o">}</span> <span class="n">C</span><span class="o">][</span><span class="n">has_terminal</span><span class="bp">.</span><span class="o">{</span><span class="n">v</span><span class="o">}</span> <span class="n">C</span><span class="o">]</span> <span class="o">:=</span>  <span class="c1">-- I don&#39;t understand if i have to write here   {C : Type u}[𝒞 : category.{v} C][has_binary_products.{v} C][has_terminal.{v} C]  ?</span>
<span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C</span><span class="o">)</span>
<span class="o">(</span><span class="n">μ</span> <span class="o">:</span> <span class="n">X</span> <span class="err">⨯</span> <span class="n">X</span> <span class="err">⟶</span> <span class="n">X</span><span class="o">)</span>
<span class="o">(</span><span class="n">inv</span> <span class="o">:</span> <span class="n">X</span> <span class="err">⟶</span> <span class="n">X</span><span class="o">)</span>
<span class="o">(</span><span class="n">ε</span> <span class="o">:</span>  <span class="n">T</span> <span class="n">C</span> <span class="err">⟶</span> <span class="n">X</span><span class="o">)</span>
<span class="o">(</span><span class="n">hyp_one_mul</span>  <span class="o">:</span>  <span class="o">(</span><span class="n">T</span> <span class="n">X</span> <span class="bp">|</span> <span class="mi">𝟙</span> <span class="n">X</span><span class="o">)</span> <span class="err">≫</span> <span class="o">(</span><span class="n">ε</span> <span class="err">⊗</span> <span class="mi">𝟙</span> <span class="n">X</span><span class="o">)</span> <span class="err">≫</span>  <span class="n">μ</span>  <span class="bp">=</span> <span class="mi">𝟙</span> <span class="n">X</span><span class="o">)</span>
<span class="o">(</span><span class="n">hyp_mul_one</span>  <span class="o">:</span>  <span class="o">(</span><span class="mi">𝟙</span> <span class="n">X</span> <span class="bp">|</span> <span class="n">T</span> <span class="n">X</span><span class="o">)</span> <span class="err">≫</span> <span class="o">(</span> <span class="mi">𝟙</span> <span class="n">X</span> <span class="err">⊗</span> <span class="n">ε</span><span class="o">)</span> <span class="err">≫</span> <span class="n">μ</span>  <span class="bp">=</span> <span class="mi">𝟙</span> <span class="n">X</span><span class="o">)</span>
<span class="o">(</span><span class="n">hyp_mul_inv</span>  <span class="o">:</span>  <span class="o">(</span><span class="mi">𝟙</span> <span class="n">X</span> <span class="bp">|</span> <span class="n">inv</span><span class="o">)</span> <span class="err">≫</span>  <span class="n">μ</span> <span class="bp">=</span> <span class="o">(</span><span class="n">T</span> <span class="n">X</span><span class="o">)</span> <span class="err">≫</span> <span class="n">ε</span> <span class="o">)</span>
<span class="o">(</span><span class="n">hyp_assoc</span>    <span class="o">:</span>  <span class="o">(</span><span class="n">μ</span> <span class="err">⊗</span> <span class="mi">𝟙</span> <span class="n">X</span><span class="o">)</span> <span class="err">≫</span> <span class="o">(</span><span class="n">μ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">prod</span><span class="bp">.</span><span class="n">associator</span> <span class="n">X</span> <span class="n">X</span> <span class="n">X</span><span class="o">)</span><span class="bp">.</span><span class="n">hom</span> <span class="err">≫</span> <span class="o">(</span><span class="mi">𝟙</span> <span class="n">X</span> <span class="err">⊗</span> <span class="n">μ</span><span class="o">)</span>  <span class="err">≫</span> <span class="n">μ</span> <span class="o">)</span>   <span class="c1">-- (a *b) * c = (a * (b * c))</span>


<span class="kn">variables</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="n">group_obj</span> <span class="n">C</span><span class="o">)</span> <span class="c1">--- ?    I cant  have i variables of type G : group_obj on C ?</span>
<span class="c1">--  (G : group_obj 𝒞)(Y : C) :      ?    what is the syntax ?  In fact i don&#39;t understand variables with { } [] or () i thinck it&#39;s the -- problem ?</span>
</pre></div>



<a name="193656418"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193656418" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193656418">(Apr 11 2020 at 11:51)</a>:</h4>
<p>the problem is i cant write <code> G :  group_obj </code> or <code> G :  group_obj  C </code> or <code> G :  group_obj 𝒞)</code> the three possibility give me an error :D</p>



<a name="193656505"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193656505" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193656505">(Apr 11 2020 at 11:53)</a>:</h4>
<p>You've made the <code>C</code> argument of <code>group_obj</code> implicit, by putting it in curly braces.</p>



<a name="193656506"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193656506" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193656506">(Apr 11 2020 at 11:53)</a>:</h4>
<p>You declared all variables as implicit in <code>group_obj</code>, but lean can't infer <code>C</code></p>



<a name="193656511"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193656511" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193656511">(Apr 11 2020 at 11:53)</a>:</h4>
<p>You want <code>structure group_obj (C : Type u)[𝒞 : category.{v} C]</code></p>



<a name="193656517"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193656517" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193656517">(Apr 11 2020 at 11:53)</a>:</h4>
<p>also, since you've <code>include</code>d 𝒞 above, you're going to end up with two copies of the category argument</p>



<a name="193656559"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193656559" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193656559">(Apr 11 2020 at 11:54)</a>:</h4>
<p>Have you read <a href="https://github.com/leanprover-community/mathlib/blob/master/docs/tutorial/category_theory/intro.lean" title="https://github.com/leanprover-community/mathlib/blob/master/docs/tutorial/category_theory/intro.lean">https://github.com/leanprover-community/mathlib/blob/master/docs/tutorial/category_theory/intro.lean</a> ?</p>



<a name="193656564"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193656564" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193656564">(Apr 11 2020 at 11:54)</a>:</h4>
<p>It will explain how and why we use <code>include</code> here.</p>



<a name="193656573"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193656573" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193656573">(Apr 11 2020 at 11:55)</a>:</h4>
<p>Also, a more general note --- really you want to define a group object in any monoidal category</p>



<a name="193656575"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193656575" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193656575">(Apr 11 2020 at 11:55)</a>:</h4>
<p>not just in a category equipped with the monoidal structure coming from binary products.</p>



<a name="193656584"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193656584" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193656584">(Apr 11 2020 at 11:55)</a>:</h4>
<p>I don't promise, but it may actually be _easier_ there.</p>



<a name="193656631"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193656631" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193656631">(Apr 11 2020 at 11:56)</a>:</h4>
<p>(for one, you won't need to define the notation <code>⊗</code>, because it will be there for you already!)</p>



<a name="193656652"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193656652" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193656652">(Apr 11 2020 at 11:56)</a>:</h4>
<p>Here's what <code>include</code> does:</p>
<div class="codehilite"><pre><span></span><span class="kn">variable</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span>

<span class="n">def</span> <span class="n">f</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="bp">ℕ</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span>

<span class="n">include</span> <span class="n">X</span>

<span class="n">def</span> <span class="n">g</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="bp">ℕ</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span>

<span class="n">omit</span> <span class="n">X</span>

<span class="n">def</span> <span class="n">h</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="bp">ℕ</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span>

<span class="bp">#</span><span class="kn">check</span> <span class="n">f</span> <span class="c1">-- f : ℕ → ℕ</span>
<span class="bp">#</span><span class="kn">check</span> <span class="n">g</span> <span class="c1">-- g : Type → ℕ → ℕ</span>
<span class="bp">#</span><span class="kn">check</span> <span class="n">h</span> <span class="c1">-- h : ℕ → ℕ</span>
</pre></div>



<a name="193656658"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193656658" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193656658">(Apr 11 2020 at 11:56)</a>:</h4>
<p>(and generally, since the API surface area is smaller for monoidal categories than for monoidal-categories-built-in-this-way, there are fewer ways you can do wrong things :-)</p>



<a name="193656680"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193656680" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193656680">(Apr 11 2020 at 11:57)</a>:</h4>
<p>All your definitions after the <code>include</code> and before the <code>omit</code>  will include <code>(X : Type)</code>. So if you include <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="script">C</mi></mrow><annotation encoding="application/x-tex">\mathcal{C}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord"><span class="mord mathcal" style="margin-right:0.05834em;">C</span></span></span></span></span> you shouldn't mention it explicitly in your definition.</p>



<a name="193656856"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193656856" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193656856">(Apr 11 2020 at 12:01)</a>:</h4>
<p>My impression is that when defining new structures you should not rely on variables or <code>include</code> at all, and just spell everything out. It is often the case that for new structures you want the brackets to be different anyway; for example when defining group homs you would want <code>def group_hom (G : Type) [group G] (H : Type) [group H] := ...</code> but then the moment you start proving lemmas about group homs you will want <code>(f : group_hom G H)</code> but <code>{G : Type} {H : Type}</code>.</p>



<a name="193656866"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193656866" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193656866">(Apr 11 2020 at 12:01)</a>:</h4>
<p>It's also really confusing for anyone reading your definition.</p>



<a name="193656906"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193656906" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193656906">(Apr 11 2020 at 12:02)</a>:</h4>
<p>Variables are great once you're off and running and proving a million lemmas.</p>



<a name="193656910"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193656910" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193656910">(Apr 11 2020 at 12:02)</a>:</h4>
<p>But for defining new structures and new types, please put the hypotheses inline!</p>



<a name="193656920"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193656920" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193656920">(Apr 11 2020 at 12:02)</a>:</h4>
<p>Finally note that in</p>
<div class="codehilite"><pre><span></span><span class="kn">variables</span> <span class="o">{</span><span class="n">C</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span>
<span class="kn">variables</span> <span class="o">[</span><span class="err">𝒞</span> <span class="o">:</span> <span class="n">category</span><span class="bp">.</span><span class="o">{</span><span class="n">v</span><span class="o">}</span> <span class="n">C</span><span class="o">]</span>
<span class="kn">variables</span> <span class="o">{</span><span class="n">C</span><span class="o">}</span>
</pre></div>


<p>the last <code>variables</code> doesn't do anything. This just means "change the default brackets for variable <code>C</code> to <code>{}</code>" -- but they were already <code>{}</code>.</p>



<a name="193657005"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193657005" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193657005">(Apr 11 2020 at 12:04)</a>:</h4>
<p>thx, Kevin Mario and Scott, i read Slowly ! (i use google traductor to understand <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span> )</p>



<a name="193657956"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193657956" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193657956">(Apr 11 2020 at 12:28)</a>:</h4>
<p>Scott: Ah, I didn't know the concept of a monoidal category! I just looked at the lean file! Thx !</p>



<a name="193657993"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193657993" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193657993">(Apr 11 2020 at 12:29)</a>:</h4>
<p>I thinck i understand : </p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">comma</span>
<span class="kn">import</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span><span class="bp">.</span><span class="n">limits</span>
<span class="kn">import</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span><span class="bp">.</span><span class="n">shapes</span>
<span class="kn">import</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">yoneda</span>

<span class="n">universes</span> <span class="n">v</span> <span class="n">u</span>
<span class="kn">open</span> <span class="n">category_theory</span>
<span class="kn">open</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span>
<span class="kn">open</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">category</span>



<span class="c">/-</span><span class="cm"></span>
<span class="cm">The goal is define group obj in a category.</span>
<span class="cm">          reference : Douady : Algebre et théories galoisiennes page 45</span>
<span class="cm">          exemple : in the category of presheaf.</span>
<span class="cm">          in Ring ? Idem ?</span>
<span class="cm">     contexte : 𝒞 a un objet final et a les produit finis !</span>
<span class="cm">Pour coder μ X × X ⟶ X  We see that has X ⟶ T cospan f f)</span>

<span class="cm">-/</span>
<span class="kn">notation</span> <span class="n">f</span> <span class="bp">`</span> <span class="err">⊗</span> <span class="bp">`</span><span class="o">:</span><span class="mi">20</span> <span class="n">g</span> <span class="o">:</span><span class="mi">20</span> <span class="o">:=</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">map</span> <span class="n">f</span> <span class="n">g</span>
<span class="kn">notation</span>  <span class="bp">`</span><span class="n">T</span><span class="bp">`</span><span class="n">C</span> <span class="o">:</span><span class="mi">20</span> <span class="o">:=</span> <span class="o">(</span><span class="n">terminal</span> <span class="n">C</span><span class="o">)</span>
<span class="kn">notation</span>   <span class="bp">`</span><span class="n">T</span><span class="bp">`</span><span class="n">X</span> <span class="o">:</span> <span class="mi">20</span> <span class="o">:=</span> <span class="o">(</span><span class="n">terminal</span><span class="bp">.</span><span class="k">from</span> <span class="n">X</span><span class="o">)</span>
<span class="kn">notation</span> <span class="n">f</span> <span class="bp">`</span> <span class="bp">|</span> <span class="bp">`</span><span class="o">:</span><span class="mi">20</span> <span class="n">g</span> <span class="o">:</span><span class="mi">20</span> <span class="o">:=</span>  <span class="n">prod</span><span class="bp">.</span><span class="n">lift</span> <span class="n">f</span> <span class="n">g</span>
<span class="kn">structure</span> <span class="n">group_obj</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)[</span><span class="err">𝒞</span> <span class="o">:</span> <span class="n">category</span><span class="bp">.</span><span class="o">{</span><span class="n">v</span><span class="o">}</span> <span class="n">C</span><span class="o">][</span><span class="n">has_binary_products</span><span class="bp">.</span><span class="o">{</span><span class="n">v</span><span class="o">}</span> <span class="n">C</span><span class="o">][</span><span class="n">has_terminal</span><span class="bp">.</span><span class="o">{</span><span class="n">v</span><span class="o">}</span> <span class="n">C</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="n">C</span><span class="o">)</span>
<span class="o">(</span><span class="n">μ</span> <span class="o">:</span> <span class="n">X</span> <span class="err">⨯</span> <span class="n">X</span> <span class="err">⟶</span> <span class="n">X</span><span class="o">)</span>
<span class="o">(</span><span class="n">inv</span> <span class="o">:</span> <span class="n">X</span> <span class="err">⟶</span> <span class="n">X</span><span class="o">)</span>
<span class="o">(</span><span class="n">ε</span> <span class="o">:</span>  <span class="n">T</span> <span class="n">C</span> <span class="err">⟶</span> <span class="n">X</span><span class="o">)</span>
<span class="o">(</span><span class="n">hyp_one_mul</span>  <span class="o">:</span>  <span class="o">(</span><span class="n">T</span> <span class="n">X</span> <span class="bp">|</span> <span class="mi">𝟙</span> <span class="n">X</span><span class="o">)</span> <span class="err">≫</span> <span class="o">(</span><span class="n">ε</span> <span class="err">⊗</span> <span class="mi">𝟙</span> <span class="n">X</span><span class="o">)</span> <span class="err">≫</span>  <span class="n">μ</span>  <span class="bp">=</span> <span class="mi">𝟙</span> <span class="n">X</span><span class="o">)</span>
<span class="o">(</span><span class="n">hyp_mul_one</span>  <span class="o">:</span>  <span class="o">(</span><span class="mi">𝟙</span> <span class="n">X</span> <span class="bp">|</span> <span class="n">T</span> <span class="n">X</span><span class="o">)</span> <span class="err">≫</span> <span class="o">(</span> <span class="mi">𝟙</span> <span class="n">X</span> <span class="err">⊗</span> <span class="n">ε</span><span class="o">)</span> <span class="err">≫</span> <span class="n">μ</span>  <span class="bp">=</span> <span class="mi">𝟙</span> <span class="n">X</span><span class="o">)</span>
<span class="o">(</span><span class="n">hyp_mul_inv</span>  <span class="o">:</span>  <span class="o">(</span><span class="mi">𝟙</span> <span class="n">X</span> <span class="bp">|</span> <span class="n">inv</span><span class="o">)</span> <span class="err">≫</span>  <span class="n">μ</span> <span class="bp">=</span> <span class="o">(</span><span class="n">T</span> <span class="n">X</span><span class="o">)</span> <span class="err">≫</span> <span class="n">ε</span> <span class="o">)</span>
<span class="o">(</span><span class="n">hyp_assoc</span>    <span class="o">:</span>  <span class="o">(</span><span class="n">μ</span> <span class="err">⊗</span> <span class="mi">𝟙</span> <span class="n">X</span><span class="o">)</span> <span class="err">≫</span> <span class="o">(</span><span class="n">μ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">prod</span><span class="bp">.</span><span class="n">associator</span> <span class="n">X</span> <span class="n">X</span> <span class="n">X</span><span class="o">)</span><span class="bp">.</span><span class="n">hom</span> <span class="err">≫</span> <span class="o">(</span><span class="mi">𝟙</span> <span class="n">X</span> <span class="err">⊗</span> <span class="n">μ</span><span class="o">)</span>  <span class="err">≫</span> <span class="n">μ</span> <span class="o">)</span>   <span class="c1">-- (a *b) * c = (a * (b * c))</span>

<span class="c1">-- question 1.</span>
<span class="c1">-- Let X : C</span>
<span class="kn">variables</span> <span class="o">(</span><span class="n">C</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span>
<span class="kn">variables</span> <span class="o">[</span><span class="err">𝒞</span> <span class="o">:</span> <span class="n">category</span><span class="bp">.</span><span class="o">{</span><span class="n">v</span><span class="o">}</span> <span class="n">C</span><span class="o">]</span>
<span class="kn">variables</span>  <span class="o">[</span><span class="n">has_binary_products</span><span class="bp">.</span><span class="o">{</span><span class="n">v</span><span class="o">}</span> <span class="n">C</span><span class="o">][</span><span class="n">has_terminal</span><span class="bp">.</span><span class="o">{</span><span class="n">v</span><span class="o">}</span> <span class="n">C</span><span class="o">]</span>
<span class="n">include</span> <span class="err">𝒞</span>
<span class="kn">instance</span> <span class="n">coee</span> <span class="o">:</span> <span class="n">has_coe</span> <span class="o">(</span><span class="n">group_obj</span> <span class="n">C</span><span class="o">)</span> <span class="n">C</span> <span class="o">:=</span> <span class="bp">⟨λ</span> <span class="n">F</span><span class="o">,</span> <span class="n">F</span><span class="bp">.</span><span class="n">X</span><span class="bp">⟩</span>
<span class="kn">variables</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="n">group_obj</span> <span class="n">C</span><span class="o">)</span>
<span class="n">include</span> <span class="n">G</span>
<span class="n">def</span> <span class="n">Test_1</span>  <span class="o">:=</span> <span class="n">yoneda</span><span class="bp">.</span><span class="n">obj</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="n">C</span><span class="o">)</span>
<span class="bp">#</span><span class="kn">check</span> <span class="n">Test_1</span>
<span class="n">omit</span> <span class="n">G</span>
<span class="n">def</span> <span class="n">Test_2</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="n">group_obj</span> <span class="n">C</span><span class="o">)</span> <span class="o">:=</span> <span class="n">yoneda</span><span class="bp">.</span><span class="n">obj</span> <span class="o">(</span><span class="n">G</span> <span class="o">:</span> <span class="n">C</span><span class="o">)</span>
<span class="bp">#</span><span class="kn">check</span> <span class="n">Test_2</span>
<span class="kn">theorem</span>  <span class="n">one_eq_two</span>  <span class="o">:</span>  <span class="n">Test_1</span>  <span class="bp">=</span> <span class="n">Test_2</span> <span class="o">:=</span> <span class="n">rfl</span>  <span class="bp">!</span>
</pre></div>



<a name="193667565"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193667565" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193667565">(Apr 11 2020 at 16:18)</a>:</h4>
<p>The exercice is too difficult for the moment  ! It was, to show that  for all group objet G et for all  <code> X : C </code> the set <code>(Yoneda.obj G).obj X) </code> is a group ! </p>
<p>A question :  is it complicated to show that Yoneda preserve product  ?   <br>
<span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span>  </p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">comma</span>
<span class="kn">import</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span><span class="bp">.</span><span class="n">limits</span>
<span class="kn">import</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span><span class="bp">.</span><span class="n">shapes</span>
<span class="kn">import</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">yoneda</span>
<span class="kn">import</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">opposites</span>
<span class="kn">import</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">types</span>
<span class="kn">import</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span><span class="bp">.</span><span class="n">shapes</span>
<span class="kn">import</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span><span class="bp">.</span><span class="n">types</span>

<span class="n">universes</span> <span class="n">v</span> <span class="n">u</span>
<span class="kn">open</span> <span class="n">category_theory</span>
<span class="kn">open</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span>
<span class="kn">open</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">category</span>
<span class="kn">open</span> <span class="n">opposite</span>
<span class="kn">namespace</span> <span class="n">TEST</span>
<span class="kn">variables</span> <span class="o">{</span><span class="n">C</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span>
<span class="kn">variables</span> <span class="o">[</span><span class="err">𝒞</span> <span class="o">:</span> <span class="n">category</span><span class="bp">.</span><span class="o">{</span><span class="n">v</span><span class="o">}</span> <span class="n">C</span><span class="o">]</span>
<span class="kn">variables</span>  <span class="o">[</span><span class="n">has_binary_products</span><span class="bp">.</span><span class="o">{</span><span class="n">v</span><span class="o">}</span> <span class="n">C</span><span class="o">][</span><span class="n">has_terminal</span><span class="bp">.</span><span class="o">{</span><span class="n">v</span><span class="o">}</span> <span class="n">C</span><span class="o">]</span>
<span class="n">include</span> <span class="err">𝒞</span>
<span class="kn">lemma</span> <span class="n">Yoneda_preserve_product</span> <span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">C</span><span class="o">)(</span><span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="n">C</span><span class="o">)</span> <span class="o">:</span>
     <span class="o">(</span><span class="n">yoneda</span><span class="bp">.</span><span class="n">obj</span> <span class="o">(</span><span class="n">A</span> <span class="err">⨯</span> <span class="n">B</span><span class="o">))</span><span class="bp">.</span><span class="n">obj</span><span class="o">(</span> <span class="n">op</span> <span class="n">Y</span><span class="o">)</span> <span class="err">≅</span>  <span class="o">(</span><span class="n">yoneda</span><span class="bp">.</span><span class="n">obj</span> <span class="n">A</span><span class="o">)</span><span class="bp">.</span><span class="n">obj</span><span class="o">(</span><span class="n">op</span> <span class="n">Y</span><span class="o">)</span>  <span class="err">⨯</span> <span class="o">(</span><span class="n">yoneda</span><span class="bp">.</span><span class="n">obj</span> <span class="n">B</span><span class="o">)</span><span class="bp">.</span><span class="n">obj</span> <span class="o">(</span><span class="n">op</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:=</span>
     <span class="k">begin</span>
          <span class="c1">-- Use unicity of limits ?</span>
          <span class="c1">-- cone_point_unique_up_to_iso ?</span>
          <span class="n">sorry</span><span class="o">,</span> <span class="c1">--- i thinck !</span>
     <span class="kn">end</span>
<span class="kn">end</span> <span class="n">TEST</span>
</pre></div>



<a name="193668542"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193668542" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193668542">(Apr 11 2020 at 16:41)</a>:</h4>
<p>Try one of Scott's category theory tactics?</p>



<a name="193668544"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193668544" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193668544">(Apr 11 2020 at 16:41)</a>:</h4>
<p>Tidy?</p>



<a name="193668547"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193668547" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193668547">(Apr 11 2020 at 16:41)</a>:</h4>
<p>Obviously?</p>



<a name="193668601"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193668601" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193668601">(Apr 11 2020 at 16:42)</a>:</h4>
<p>Maybe you have to define the map?</p>



<a name="193668692"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193668692" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193668692">(Apr 11 2020 at 16:44)</a>:</h4>
<p>Tidy give me : </p>
<div class="codehilite"><pre><span></span><span class="mi">3</span> <span class="n">goals</span>
<span class="n">C</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="err">𝒞</span> <span class="o">:</span> <span class="n">category</span> <span class="n">C</span><span class="o">,</span>
<span class="bp">_</span><span class="n">inst_1</span> <span class="o">:</span> <span class="n">has_binary_products</span> <span class="n">C</span><span class="o">,</span>
<span class="bp">_</span><span class="n">inst_2</span> <span class="o">:</span> <span class="n">has_terminal</span> <span class="n">C</span><span class="o">,</span>
<span class="n">B</span> <span class="n">A</span> <span class="n">Y</span> <span class="o">:</span> <span class="n">C</span><span class="o">,</span>
<span class="n">a</span> <span class="o">:</span> <span class="n">Y</span> <span class="err">⟶</span> <span class="n">A</span> <span class="err">⨯</span> <span class="n">B</span><span class="o">,</span>
<span class="n">j</span> <span class="o">:</span> <span class="n">discrete</span> <span class="n">walking_pair</span>
<span class="err">⊢</span> <span class="o">(</span><span class="n">pair</span> <span class="o">(</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">A</span><span class="o">)</span> <span class="o">(</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">B</span><span class="o">))</span><span class="bp">.</span><span class="n">obj</span> <span class="n">j</span>

<span class="n">C</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="err">𝒞</span> <span class="o">:</span> <span class="n">category</span> <span class="n">C</span><span class="o">,</span>
<span class="bp">_</span><span class="n">inst_1</span> <span class="o">:</span> <span class="n">has_binary_products</span> <span class="n">C</span><span class="o">,</span>
<span class="bp">_</span><span class="n">inst_2</span> <span class="o">:</span> <span class="n">has_terminal</span> <span class="n">C</span><span class="o">,</span>
<span class="n">Y</span> <span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="n">C</span><span class="o">,</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">Y</span> <span class="err">⟶</span> <span class="n">A</span> <span class="err">⨯</span> <span class="n">B</span><span class="o">,</span>
<span class="n">j</span> <span class="o">:</span> <span class="n">discrete</span> <span class="n">walking_pair</span>
<span class="err">⊢</span> <span class="err">?</span><span class="n">m_1</span> <span class="n">Y</span> <span class="n">A</span> <span class="n">B</span> <span class="bp">⟨λ</span> <span class="o">(</span><span class="n">j</span> <span class="o">:</span> <span class="n">discrete</span> <span class="n">walking_pair</span><span class="o">),</span> <span class="err">?</span><span class="n">m_2</span><span class="o">[</span><span class="n">Y</span><span class="o">,</span> <span class="n">A</span><span class="o">,</span> <span class="n">B</span><span class="o">,</span> <span class="n">x</span><span class="o">,</span> <span class="n">j</span><span class="o">],</span> <span class="bp">_⟩</span> <span class="err">≫</span> <span class="n">limit</span><span class="bp">.</span><span class="n">π</span> <span class="o">(</span><span class="n">pair</span> <span class="n">A</span> <span class="n">B</span><span class="o">)</span> <span class="n">j</span> <span class="bp">=</span>
    <span class="n">x</span> <span class="err">≫</span> <span class="n">limit</span><span class="bp">.</span><span class="n">π</span> <span class="o">(</span><span class="n">pair</span> <span class="n">A</span> <span class="n">B</span><span class="o">)</span> <span class="n">j</span>

<span class="n">C</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="err">𝒞</span> <span class="o">:</span> <span class="n">category</span> <span class="n">C</span><span class="o">,</span>
<span class="bp">_</span><span class="n">inst_1</span> <span class="o">:</span> <span class="n">has_binary_products</span> <span class="n">C</span><span class="o">,</span>
<span class="bp">_</span><span class="n">inst_2</span> <span class="o">:</span> <span class="n">has_terminal</span> <span class="n">C</span><span class="o">,</span>
<span class="n">Y</span> <span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="n">C</span><span class="o">,</span>
<span class="n">x_val</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">(</span><span class="n">j</span> <span class="o">:</span> <span class="n">discrete</span> <span class="n">walking_pair</span><span class="o">),</span> <span class="o">(</span><span class="n">pair</span> <span class="o">(</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">A</span><span class="o">)</span> <span class="o">(</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">B</span><span class="o">))</span><span class="bp">.</span><span class="n">obj</span> <span class="n">j</span><span class="o">,</span>
<span class="n">x_property</span> <span class="o">:</span> <span class="n">x_val</span> <span class="err">∈</span> <span class="n">functor</span><span class="bp">.</span><span class="n">sections</span> <span class="o">(</span><span class="n">pair</span> <span class="o">(</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">A</span><span class="o">)</span> <span class="o">(</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">B</span><span class="o">)),</span>
<span class="n">x</span> <span class="o">:</span> <span class="n">discrete</span> <span class="n">walking_pair</span>
<span class="err">⊢</span> <span class="err">?</span><span class="n">m_2</span><span class="o">[</span><span class="n">Y</span><span class="o">,</span> <span class="n">A</span><span class="o">,</span> <span class="n">B</span><span class="o">,</span> <span class="err">?</span><span class="n">m_1</span> <span class="n">Y</span> <span class="n">A</span> <span class="n">B</span> <span class="bp">⟨</span><span class="n">x_val</span><span class="o">,</span> <span class="n">x_property</span><span class="bp">⟩</span><span class="o">,</span> <span class="n">x</span><span class="o">]</span> <span class="bp">=</span> <span class="n">x_val</span> <span class="n">x</span>
</pre></div>



<a name="193668816"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193668816" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193668816">(Apr 11 2020 at 16:47)</a>:</h4>
<p>I have no idea what these tactics do but maybe they are just for proofs. This is data.</p>



<a name="193668868"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193668868" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193668868">(Apr 11 2020 at 16:48)</a>:</h4>
<p>Your <code>lemma</code> is not a lemma, I think?</p>



<a name="193668889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193668889" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193668889">(Apr 11 2020 at 16:48)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">Yoneda_preserve_product</span> <span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">C</span><span class="o">)(</span><span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="n">C</span><span class="o">)</span> <span class="o">:</span>
     <span class="o">(</span><span class="n">yoneda</span><span class="bp">.</span><span class="n">obj</span> <span class="o">(</span><span class="n">A</span> <span class="err">⨯</span> <span class="n">B</span><span class="o">))</span><span class="bp">.</span><span class="n">obj</span><span class="o">(</span> <span class="n">op</span> <span class="n">Y</span><span class="o">)</span> <span class="err">≅</span>  <span class="o">(</span><span class="n">yoneda</span><span class="bp">.</span><span class="n">obj</span> <span class="n">A</span><span class="o">)</span><span class="bp">.</span><span class="n">obj</span><span class="o">(</span><span class="n">op</span> <span class="n">Y</span><span class="o">)</span>  <span class="err">⨯</span> <span class="o">(</span><span class="n">yoneda</span><span class="bp">.</span><span class="n">obj</span> <span class="n">B</span><span class="o">)</span><span class="bp">.</span><span class="n">obj</span> <span class="o">(</span><span class="n">op</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span><span class="bp">!</span> <span class="bp">!</span><span class="o">}</span>
</pre></div>



<a name="193668890"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193668890" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193668890">(Apr 11 2020 at 16:48)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span>  i made a mistake ?</p>



<a name="193668899"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193668899" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193668899">(Apr 11 2020 at 16:49)</a>:</h4>
<p>It is in Type, not in Prop</p>



<a name="193669057"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193669057" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193669057">(Apr 11 2020 at 16:53)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">Yoneda_preserve_product</span> <span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">C</span><span class="o">)(</span><span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="n">C</span><span class="o">)</span> <span class="o">:</span>
     <span class="o">(</span><span class="n">yoneda</span><span class="bp">.</span><span class="n">obj</span> <span class="o">(</span><span class="n">A</span> <span class="err">⨯</span> <span class="n">B</span><span class="o">))</span><span class="bp">.</span><span class="n">obj</span><span class="o">(</span> <span class="n">op</span> <span class="n">Y</span><span class="o">)</span> <span class="err">≅</span>  <span class="o">(</span><span class="n">yoneda</span><span class="bp">.</span><span class="n">obj</span> <span class="n">A</span><span class="o">)</span><span class="bp">.</span><span class="n">obj</span><span class="o">(</span><span class="n">op</span> <span class="n">Y</span><span class="o">)</span>  <span class="err">⨯</span> <span class="o">(</span><span class="n">yoneda</span><span class="bp">.</span><span class="n">obj</span> <span class="n">B</span><span class="o">)</span><span class="bp">.</span><span class="n">obj</span> <span class="o">(</span><span class="n">op</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">hom</span> <span class="o">:=</span> <span class="n">prod</span><span class="bp">.</span><span class="n">lift</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">,</span>
  <span class="n">inv</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span>
  <span class="n">hom_inv_id&#39;</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span>
  <span class="n">inv_hom_id&#39;</span> <span class="o">:=</span> <span class="bp">_</span> <span class="o">}</span>
</pre></div>



<a name="193669307"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193669307" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193669307">(Apr 11 2020 at 16:58)</a>:</h4>
<p>hum !!! i try <span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span></p>



<a name="193669419"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193669419" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193669419">(Apr 11 2020 at 17:01)</a>:</h4>
<p><code>example (A B Y : C) : (yoneda.obj (A ⨯ B)).obj (op Y) = (Y ⟶ A ⨯ B) := rfl</code></p>



<a name="193669545"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193669545" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193669545">(Apr 11 2020 at 17:04)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="o">{</span> <span class="n">hom</span> <span class="o">:=</span> <span class="n">prod</span><span class="bp">.</span><span class="n">lift</span>
    <span class="o">(</span><span class="bp">λ</span> <span class="n">f</span><span class="o">,</span> <span class="n">f</span> <span class="err">≫</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">fst</span> <span class="o">:</span> <span class="o">(</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">A</span> <span class="err">⨯</span> <span class="n">B</span><span class="o">)</span> <span class="err">⟶</span> <span class="o">(</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">A</span><span class="o">))</span>
    <span class="o">(</span><span class="bp">λ</span> <span class="n">f</span><span class="o">,</span> <span class="n">f</span> <span class="err">≫</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">snd</span> <span class="o">:</span> <span class="o">(</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">A</span> <span class="err">⨯</span> <span class="n">B</span><span class="o">)</span> <span class="err">⟶</span> <span class="o">(</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">B</span><span class="o">)),</span>
</pre></div>


<p>Writing category theory Lean for me is about as slow as writing normal Lean was for me in 2017 :-)</p>



<a name="193669552"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193669552" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193669552">(Apr 11 2020 at 17:04)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="o">{</span> <span class="n">hom</span> <span class="o">:=</span> <span class="n">prod</span><span class="bp">.</span><span class="n">lift</span>
    <span class="o">(</span><span class="bp">λ</span> <span class="n">f</span><span class="o">,</span> <span class="n">f</span> <span class="err">≫</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">fst</span><span class="o">)</span>
    <span class="o">(</span><span class="bp">λ</span> <span class="n">f</span><span class="o">,</span> <span class="n">f</span> <span class="err">≫</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">snd</span><span class="o">),</span>
</pre></div>



<a name="193669844"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193669844" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193669844">(Apr 11 2020 at 17:10)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="o">{</span> <span class="n">hom</span> <span class="o">:=</span> <span class="n">prod</span><span class="bp">.</span><span class="n">lift</span>
    <span class="o">(</span><span class="bp">λ</span> <span class="n">f</span><span class="o">,</span> <span class="n">f</span> <span class="err">≫</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">fst</span><span class="o">)</span>
    <span class="o">(</span><span class="bp">λ</span> <span class="n">f</span><span class="o">,</span> <span class="n">f</span> <span class="err">≫</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">snd</span><span class="o">),</span>
  <span class="n">inv</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">f</span> <span class="o">:</span> <span class="o">(</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">A</span><span class="o">)</span> <span class="err">⨯</span> <span class="o">(</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">B</span><span class="o">),</span> <span class="o">(</span><span class="n">sorry</span> <span class="o">:</span> <span class="n">Y</span> <span class="err">⟶</span> <span class="o">(</span><span class="n">A</span> <span class="err">⨯</span> <span class="n">B</span><span class="o">)),</span>
  <span class="n">hom_inv_id&#39;</span> <span class="o">:=</span> <span class="n">sorry</span><span class="o">,</span>
  <span class="n">inv_hom_id&#39;</span> <span class="o">:=</span> <span class="n">sorry</span> <span class="o">}</span>
</pre></div>



<a name="193670138"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193670138" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193670138">(Apr 11 2020 at 17:17)</a>:</h4>
<p>Kevin, i make the same with my notation <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>∣</mo></mrow><annotation encoding="application/x-tex"> \mid </annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mrel">∣</span></span></span></span>  </p>
<div class="codehilite"><pre><span></span><span class="n">exact</span>  <span class="o">{</span> <span class="n">hom</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">φ</span><span class="o">,((</span><span class="n">φ</span> <span class="err">≫</span> <span class="o">(</span><span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">fst</span><span class="o">))</span> <span class="bp">|</span>  <span class="o">(</span><span class="n">φ</span> <span class="err">≫</span> <span class="o">(</span><span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">snd</span><span class="o">)),</span>
  <span class="n">inv</span> <span class="o">:=</span> <span class="n">sorry</span><span class="o">,</span>
  <span class="n">hom_inv_id&#39;</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span>
  <span class="n">inv_hom_id&#39;</span> <span class="o">:=</span> <span class="bp">_</span> <span class="o">}</span>
</pre></div>



<a name="193670180"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193670180" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193670180">(Apr 11 2020 at 17:18)</a>:</h4>
<p>hum ! not the same !</p>



<a name="193670203"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193670203" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193670203">(Apr 11 2020 at 17:19)</a>:</h4>
<p>normaly it's an obvious thing this  Yoneda  preserve product <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="193670278"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193670278" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193670278">(Apr 11 2020 at 17:21)</a>:</h4>
<p>in 2017 I thought it was obvious that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msqrt><mn>2</mn></msqrt><mo>∉</mo><mi mathvariant="double-struck">Q</mi></mrow><annotation encoding="application/x-tex">\sqrt{2}\not\in\mathbb{Q}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1.10166em;vertical-align:-0.19444em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.90722em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord">2</span></span></span><span style="top:-2.86722em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg height="1.08em" preserveAspectRatio="xMinYMin slice" viewBox="0 0 400000 1080" width="400em"><path d="M95,702 c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14 c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54 c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10 s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429 c69,-144,104.5,-217.7,106.5,-221 l0 -0 c5.3,-9.3,12,-14,20,-14 H400000v40H845.2724 s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7 c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z M834 80h400000v40h-400000z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.13278em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.69444em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="rlap"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="inner"><span class="mrel"></span></span><span class="fix"></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.19444em;"><span></span></span></span></span></span></span></span><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.85556em;vertical-align:-0.16667em;"></span><span class="mord"><span class="mord mathbb">Q</span></span></span></span></span> <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span></p>



<a name="193670406"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193670406" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193670406">(Apr 11 2020 at 17:24)</a>:</h4>
<p>I am looking forward to proving the snake lemma <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span></p>



<a name="193670678"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193670678" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193670678">(Apr 11 2020 at 17:31)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">A</span> <span class="n">B</span> <span class="n">Y</span> <span class="o">:</span> <span class="n">C</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">((</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">A</span><span class="o">)</span> <span class="err">⨯</span> <span class="o">(</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">B</span><span class="o">)</span> <span class="err">⟶</span> <span class="o">(</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">A</span><span class="o">))</span> <span class="bp">=</span> <span class="o">((</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">A</span><span class="o">)</span> <span class="err">⨯</span> <span class="o">(</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">B</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">A</span><span class="o">))</span> <span class="o">:=</span> <span class="n">rfl</span> <span class="c1">-- fail :-(</span>
</pre></div>



<a name="193670694"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193670694" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193670694">(Apr 11 2020 at 17:31)</a>:</h4>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>H</mi><mi>o</mi><mi>m</mi><mo stretchy="false">(</mo><mi>Y</mi><mo separator="true">,</mo><mi>A</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Hom(Y,A)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="mord mathdefault">o</span><span class="mord mathdefault">m</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">A</span><span class="mclose">)</span></span></span></span> has type <code>Type*</code>, right?</p>



<a name="193670781"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193670781" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193670781">(Apr 11 2020 at 17:33)</a>:</h4>
<p>I have <code>f : (Y ⟶ A) ⨯ (Y ⟶ B)</code> and I want to apply <code>category_theory.limits.prod.fst</code> to get <code>g : Y ⟶ A</code> but I can't figure out how to do it :-(</p>



<a name="193670789"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193670789" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193670789">(Apr 11 2020 at 17:33)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">Yoneda_preserve_produc</span> <span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">C</span><span class="o">)(</span><span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="n">C</span><span class="o">)</span> <span class="o">:</span>
     <span class="o">(</span><span class="n">yoneda</span><span class="bp">.</span><span class="n">obj</span> <span class="o">(</span><span class="n">A</span> <span class="err">⨯</span> <span class="n">B</span><span class="o">))</span><span class="bp">.</span><span class="n">obj</span><span class="o">(</span> <span class="n">op</span> <span class="n">Y</span><span class="o">)</span> <span class="err">≅</span>  <span class="o">(</span><span class="n">yoneda</span><span class="bp">.</span><span class="n">obj</span> <span class="n">A</span><span class="o">)</span><span class="bp">.</span><span class="n">obj</span><span class="o">(</span><span class="n">op</span> <span class="n">Y</span><span class="o">)</span>  <span class="err">⨯</span> <span class="o">(</span><span class="n">yoneda</span><span class="bp">.</span><span class="n">obj</span> <span class="n">B</span><span class="o">)</span><span class="bp">.</span><span class="n">obj</span> <span class="o">(</span><span class="n">op</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
<span class="k">let</span> <span class="n">P</span> <span class="o">:=</span> <span class="n">A</span><span class="err">⨯</span> <span class="n">B</span><span class="o">,</span>
<span class="k">let</span> <span class="n">Q</span> <span class="o">:=</span> <span class="o">(</span><span class="n">yoneda</span><span class="bp">.</span><span class="n">obj</span> <span class="n">A</span><span class="o">)</span><span class="bp">.</span><span class="n">obj</span><span class="o">(</span><span class="n">op</span> <span class="n">Y</span><span class="o">)</span>  <span class="err">⨯</span> <span class="o">(</span><span class="n">yoneda</span><span class="bp">.</span><span class="n">obj</span> <span class="n">B</span><span class="o">)</span><span class="bp">.</span><span class="n">obj</span> <span class="o">(</span><span class="n">op</span> <span class="n">Y</span><span class="o">),</span>
<span class="n">exact</span>  <span class="o">{</span> <span class="n">hom</span> <span class="o">:=</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">φ</span><span class="o">,</span> <span class="n">φ</span> <span class="err">≫</span> <span class="o">(</span><span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">fst</span><span class="o">))</span> <span class="bp">|</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">φ</span><span class="o">,(</span><span class="n">φ</span> <span class="err">≫</span> <span class="o">(</span><span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">snd</span><span class="o">))),</span>
  <span class="n">inv</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">f</span> <span class="o">,</span> <span class="n">prod</span><span class="bp">.</span><span class="n">lift</span> <span class="o">(</span> <span class="n">f</span><span class="err">≫</span>  <span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">fst</span> <span class="o">)</span> <span class="o">(</span><span class="n">f</span><span class="err">≫</span>  <span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">snd</span><span class="o">),</span>
  <span class="n">hom_inv_id&#39;</span> <span class="o">:=</span> <span class="bp">_</span><span class="o">,</span>
  <span class="n">inv_hom_id&#39;</span> <span class="o">:=</span> <span class="bp">_</span> <span class="o">}</span>
<span class="kn">end</span>
</pre></div>



<a name="193670797"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193670797" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193670797">(Apr 11 2020 at 17:33)</a>:</h4>
<p>Nice!</p>



<a name="193670839"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193670839" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193670839">(Apr 11 2020 at 17:34)</a>:</h4>
<p>i no ! there is ia mistake</p>



<a name="193670916"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193670916" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193670916">(Apr 11 2020 at 17:36)</a>:</h4>
<p>In <code>category_theory.types</code> there is this: <code>@[simp] lemma types_hom {α β : Type u} : (α ⟶ β) = (α → β) := rfl</code></p>



<a name="193670925"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193670925" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193670925">(Apr 11 2020 at 17:36)</a>:</h4>
<p>So I am a bit surprised that my <code>rfl</code> above is failing</p>



<a name="193670947"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193670947" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193670947">(Apr 11 2020 at 17:37)</a>:</h4>
<p>Oh it is a stupid issue with brackets :-/</p>



<a name="193670983"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193670983" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193670983">(Apr 11 2020 at 17:37)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">A</span> <span class="n">B</span> <span class="n">Y</span> <span class="o">:</span> <span class="n">C</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">((</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">A</span><span class="o">)</span> <span class="err">⨯</span> <span class="o">(</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">B</span><span class="o">)</span> <span class="err">⟶</span> <span class="o">(</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">A</span><span class="o">))</span> <span class="bp">=</span> <span class="o">(((</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">A</span><span class="o">)</span> <span class="err">⨯</span> <span class="o">(</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">B</span><span class="o">))</span> <span class="bp">→</span> <span class="o">(</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">A</span><span class="o">))</span> <span class="o">:=</span> <span class="n">rfl</span> <span class="c1">-- succeeds</span>
</pre></div>



<a name="193671033"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193671033" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193671033">(Apr 11 2020 at 17:38)</a>:</h4>
<p>I still don't have the confidence with category theory. With Lean in general, when something doesn't work I usually know why. With category theory I am still not sure.</p>



<a name="193671141"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193671141" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193671141">(Apr 11 2020 at 17:41)</a>:</h4>
<p>OK now I can do it with <code>@</code> and filling in implicit arguments</p>



<a name="193671187"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193671187" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193671187">(Apr 11 2020 at 17:42)</a>:</h4>
<div class="codehilite"><pre><span></span>    <span class="o">(</span><span class="n">prod</span><span class="bp">.</span><span class="n">lift</span>
      <span class="o">((</span><span class="bp">@</span><span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">fst</span> <span class="bp">_</span> <span class="bp">_</span> <span class="o">(</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">A</span><span class="o">)</span> <span class="bp">_</span> <span class="bp">_</span> <span class="o">:</span> <span class="o">((</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">A</span><span class="o">)</span> <span class="err">⨯</span> <span class="o">(</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">B</span><span class="o">))</span> <span class="bp">→</span> <span class="o">(</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">A</span><span class="o">))</span> <span class="n">f</span> <span class="o">:</span> <span class="n">Y</span> <span class="err">⟶</span> <span class="n">A</span><span class="o">)</span>
      <span class="o">((</span><span class="bp">@</span><span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">snd</span> <span class="bp">_</span> <span class="bp">_</span> <span class="o">(</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">A</span><span class="o">)</span> <span class="bp">_</span> <span class="bp">_</span> <span class="o">:</span> <span class="o">((</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">A</span><span class="o">)</span> <span class="err">⨯</span> <span class="o">(</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">B</span><span class="o">))</span> <span class="bp">→</span> <span class="o">(</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">B</span><span class="o">))</span> <span class="n">f</span> <span class="o">:</span> <span class="n">Y</span> <span class="err">⟶</span> <span class="n">B</span><span class="o">)),</span>
</pre></div>



<a name="193671193"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193671193" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193671193">(Apr 11 2020 at 17:42)</a>:</h4>
<p>49 minutes so far :-)</p>



<a name="193671218"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193671218" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193671218">(Apr 11 2020 at 17:43)</a>:</h4>
<p>gaaargh <code>by obviously</code> doesn't work for the proofs :-/</p>



<a name="193671451"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193671451" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193671451">(Apr 11 2020 at 17:49)</a>:</h4>
<div class="codehilite"><pre><span></span>  <span class="n">hom_inv_id&#39;</span> <span class="o">:=</span> <span class="k">begin</span>
    <span class="n">ext</span> <span class="n">f</span><span class="o">,</span>
    <span class="n">cases</span> <span class="n">j</span><span class="o">,</span>
    <span class="n">obviously</span><span class="o">,</span>
  <span class="kn">end</span><span class="o">,</span>
</pre></div>



<a name="193671454"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193671454" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193671454">(Apr 11 2020 at 17:49)</a>:</h4>
<p><code>obviously</code> just killed two goals at once!</p>



<a name="193671640"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193671640" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193671640">(Apr 11 2020 at 17:54)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">Yoneda_preserve_product</span> <span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">C</span><span class="o">)(</span><span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="n">C</span><span class="o">)</span> <span class="o">:</span>
     <span class="o">(</span><span class="n">yoneda</span><span class="bp">.</span><span class="n">obj</span> <span class="o">(</span><span class="n">A</span> <span class="err">⨯</span> <span class="n">B</span><span class="o">))</span><span class="bp">.</span><span class="n">obj</span> <span class="o">(</span><span class="n">op</span> <span class="n">Y</span><span class="o">)</span> <span class="err">≅</span> <span class="o">(</span><span class="n">yoneda</span><span class="bp">.</span><span class="n">obj</span> <span class="n">A</span><span class="o">)</span><span class="bp">.</span><span class="n">obj</span> <span class="o">(</span><span class="n">op</span> <span class="n">Y</span><span class="o">)</span> <span class="err">⨯</span> <span class="o">(</span><span class="n">yoneda</span><span class="bp">.</span><span class="n">obj</span> <span class="n">B</span><span class="o">)</span><span class="bp">.</span><span class="n">obj</span> <span class="o">(</span><span class="n">op</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">hom</span> <span class="o">:=</span> <span class="n">prod</span><span class="bp">.</span><span class="n">lift</span>
    <span class="o">(</span><span class="bp">λ</span> <span class="n">f</span><span class="o">,</span> <span class="n">f</span> <span class="err">≫</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">fst</span><span class="o">)</span>
    <span class="o">(</span><span class="bp">λ</span> <span class="n">f</span><span class="o">,</span> <span class="n">f</span> <span class="err">≫</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">snd</span><span class="o">),</span>
  <span class="n">inv</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">f</span> <span class="o">:</span> <span class="o">(</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">A</span><span class="o">)</span> <span class="err">⨯</span> <span class="o">(</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">B</span><span class="o">),</span>
    <span class="o">(</span><span class="n">prod</span><span class="bp">.</span><span class="n">lift</span>
      <span class="o">((</span><span class="bp">@</span><span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">fst</span> <span class="bp">_</span> <span class="bp">_</span> <span class="o">(</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">A</span><span class="o">)</span> <span class="o">(</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">B</span><span class="o">)</span> <span class="bp">_</span> <span class="o">:</span> <span class="o">((</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">A</span><span class="o">)</span> <span class="err">⨯</span> <span class="o">(</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">B</span><span class="o">))</span> <span class="bp">→</span> <span class="o">(</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">A</span><span class="o">))</span> <span class="n">f</span><span class="o">)</span>
      <span class="o">((</span><span class="bp">@</span><span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">snd</span> <span class="bp">_</span> <span class="bp">_</span> <span class="o">(</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">A</span><span class="o">)</span> <span class="bp">_</span> <span class="bp">_</span> <span class="o">:</span> <span class="o">((</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">A</span><span class="o">)</span> <span class="err">⨯</span> <span class="o">(</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">B</span><span class="o">))</span> <span class="bp">→</span> <span class="o">(</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">B</span><span class="o">))</span> <span class="n">f</span> <span class="o">:</span> <span class="n">Y</span> <span class="err">⟶</span> <span class="n">B</span><span class="o">)),</span>
  <span class="n">hom_inv_id&#39;</span> <span class="o">:=</span> <span class="k">begin</span>
    <span class="n">ext</span> <span class="n">f</span><span class="o">,</span>
    <span class="n">cases</span> <span class="n">j</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">simp</span><span class="o">,</span> <span class="n">refl</span><span class="o">},</span>
    <span class="o">{</span> <span class="n">simp</span><span class="o">,</span> <span class="n">refl</span><span class="o">}</span>
  <span class="kn">end</span><span class="o">,</span>
  <span class="n">inv_hom_id&#39;</span> <span class="o">:=</span> <span class="k">begin</span>
    <span class="n">ext</span> <span class="n">j</span><span class="o">,</span>
    <span class="n">cases</span> <span class="n">j</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">sorry</span><span class="o">},</span>
    <span class="o">{</span> <span class="n">sorry</span><span class="o">}</span>
  <span class="kn">end</span>
<span class="o">}</span>
</pre></div>



<a name="193671700"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193671700" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193671700">(Apr 11 2020 at 17:56)</a>:</h4>
<p>I think there might be some way of training <code>tidy</code> to solve the first proof.</p>



<a name="193671724"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193671724" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193671724">(Apr 11 2020 at 17:57)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/116395-maths/topic/category/near/193671454" title="#narrow/stream/116395-maths/topic/category/near/193671454">said</a>:</p>
<blockquote>
<p><code>obviously</code> just killed two goals at once!</p>
</blockquote>
<p>killing two goals with one tactic</p>



<a name="193671833"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193671833" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193671833">(Apr 11 2020 at 18:00)</a>:</h4>
<p>it's toooooo complicated <span aria-label="scream" class="emoji emoji-1f631" role="img" title="scream">:scream:</span></p>



<a name="193671895"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193671895" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193671895">(Apr 11 2020 at 18:01)</a>:</h4>
<p>The category theory library is complicated <em>precisely</em> because not enough people use it, and so <span class="user-mention" data-user-id="110087">@Scott Morrison</span> doesn't have enough data about how to make it better. But it will be better one day.</p>



<a name="193672051"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193672051" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193672051">(Apr 11 2020 at 18:05)</a>:</h4>
<p>But we need to make abelian categories, so we can do homological algebra, so people (e.g. me) are going to have to learn how to use it.</p>



<a name="193672948"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193672948" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193672948">(Apr 11 2020 at 18:26)</a>:</h4>
<p>for hom </p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">Yoneda_preserve_produc</span> <span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">C</span><span class="o">)(</span><span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="n">C</span><span class="o">)</span> <span class="o">:</span>
     <span class="o">(</span><span class="n">yoneda</span><span class="bp">.</span><span class="n">obj</span> <span class="o">(</span><span class="n">A</span> <span class="err">⨯</span> <span class="n">B</span><span class="o">))</span><span class="bp">.</span><span class="n">obj</span><span class="o">(</span> <span class="n">op</span> <span class="n">Y</span><span class="o">)</span> <span class="err">≅</span>  <span class="o">(</span><span class="n">yoneda</span><span class="bp">.</span><span class="n">obj</span> <span class="n">A</span><span class="o">)</span><span class="bp">.</span><span class="n">obj</span><span class="o">(</span><span class="n">op</span> <span class="n">Y</span><span class="o">)</span>  <span class="err">⨯</span> <span class="o">(</span><span class="n">yoneda</span><span class="bp">.</span><span class="n">obj</span> <span class="n">B</span><span class="o">)</span><span class="bp">.</span><span class="n">obj</span> <span class="o">(</span><span class="n">op</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
<span class="n">exact</span>  <span class="o">{</span> <span class="n">hom</span> <span class="o">:=</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">lift</span>
                    <span class="o">((</span><span class="n">yoneda</span><span class="bp">.</span><span class="n">map</span> <span class="o">(</span><span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">fst</span><span class="o">))</span><span class="bp">.</span><span class="n">app</span> <span class="o">(</span><span class="n">op</span> <span class="n">Y</span><span class="o">))</span>   <span class="c1">--- app cause it&#39;s natural transformation !</span>
                    <span class="o">((</span><span class="n">yoneda</span><span class="bp">.</span><span class="n">map</span> <span class="o">(</span><span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">snd</span><span class="o">))</span><span class="bp">.</span><span class="n">app</span> <span class="o">(</span><span class="n">op</span> <span class="n">Y</span><span class="o">)),</span>
</pre></div>



<a name="193673459"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193673459" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193673459">(Apr 11 2020 at 18:39)</a>:</h4>
<p>This is probably better, because the proof I can't do involves using the universal property of limit</p>



<a name="193675247"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193675247" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193675247">(Apr 11 2020 at 19:21)</a>:</h4>
<p>So I can't do it. My goal is</p>
<div class="codehilite"><pre><span></span>1 goal
C : Type u,
𝒞 : category C,
_inst_1 : has_binary_products C,
_inst_2 : has_terminal C,
Y A B : C,
x : (yoneda.obj A).obj (op Y) ⨯ (yoneda.obj B).obj (op Y)
⊢ prod.lift (λ (f : (yoneda.obj (A ⨯ B)).obj (op Y)), f ≫ prod.fst)
      (λ (f : (yoneda.obj (A ⨯ B)).obj (op Y)), f ≫ prod.snd)
      (prod.lift (prod.fst x) (prod.snd x)) =
    x
</pre></div>


<p>and the <code>x</code> is <code>\crossproduct</code> i.e. categorical product, and the <code>prod.lift</code> is the category theory one as well. However these products are occurring in the category <code>Type v</code> so one can check them on components. This is what I don't know how to do using category theory. <span class="user-mention" data-user-id="110032">@Reid Barton</span> ?</p>



<a name="193675292"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193675292" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193675292">(Apr 11 2020 at 19:22)</a>:</h4>
<p><code>(yoneda.obj A).obj (op Y)</code> is just <code>Y \h A</code></p>



<a name="193675450"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193675450" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193675450">(Apr 11 2020 at 19:26)</a>:</h4>
<p>Is the categorical product in <code>Type v</code> the ordinary product? What happens if you do <code>cases x</code>?</p>



<a name="193675455"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193675455" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193675455">(Apr 11 2020 at 19:26)</a>:</h4>
<p>It looks like it must be otherwise I can't make sense out of this goal</p>



<a name="193675480"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193675480" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193675480">(Apr 11 2020 at 19:26)</a>:</h4>
<p>annoyingly, it does something really annoying.</p>



<a name="193675493"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193675493" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193675493">(Apr 11 2020 at 19:27)</a>:</h4>
<div class="codehilite"><pre><span></span>x_val : Π (j : discrete walking_pair), (pair ((yoneda.obj A).obj (op Y)) ((yoneda.obj B).obj (op Y))).obj j,
x_property : x_val ∈ functor.sections (pair ((yoneda.obj A).obj (op Y)) ((yoneda.obj B).obj (op Y)))
</pre></div>



<a name="193675495"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193675495" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193675495">(Apr 11 2020 at 19:27)</a>:</h4>
<p>oh</p>



<a name="193675496"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193675496" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193675496">(Apr 11 2020 at 19:27)</a>:</h4>
<p>how did you obtain <code>x</code>?</p>



<a name="193675502"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193675502" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193675502">(Apr 11 2020 at 19:27)</a>:</h4>
<p>The goal was this:</p>
<div class="codehilite"><pre><span></span>⊢ (prod.lift (λ (f : (yoneda.obj (A ⨯ B)).obj (op Y)), f ≫ prod.fst)
         (λ (f : (yoneda.obj (A ⨯ B)).obj (op Y)), f ≫ prod.snd) ∘
       λ (f : (Y ⟶ A) ⨯ (Y ⟶ B)), prod.lift (prod.fst f) (prod.snd f)) =
    id
</pre></div>


<p>and I went for <code>funext x</code></p>



<a name="193675548"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193675548" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193675548">(Apr 11 2020 at 19:28)</a>:</h4>
<p>I'm trying to prove that some natural map Hom(Y,A) x Hom(Y,B) -&gt; Hom(Y,A) x Hom(Y,B) is id</p>



<a name="193675559"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193675559" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193675559">(Apr 11 2020 at 19:29)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/116395-maths/topic/category/near/193675548" title="#narrow/stream/116395-maths/topic/category/near/193675548">said</a>:</p>
<blockquote>
<p>I'm trying to prove that some natural map Hom(Y,A) x Hom(Y,B) -&gt; Hom(Y,A) x Hom(Y,B) is id</p>
</blockquote>
<p>If you want to prove that two maps into a category-theory product are equal then you should probably use the API for that</p>



<a name="193675562"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193675562" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193675562">(Apr 11 2020 at 19:29)</a>:</h4>
<p>The map is this: first use the universal property to get Hom(Y,A) x Hom(Y,B) -&gt; Hom(Y,A x B) and then use composition with pr1 and pr2 to get a map the other way. Yes, the products other than A x B are in Type v.</p>



<a name="193675587"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193675587" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193675587">(Apr 11 2020 at 19:29)</a>:</h4>
<p>because that's ultimately the only thing that the API gives you</p>



<a name="193675588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193675588" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193675588">(Apr 11 2020 at 19:29)</a>:</h4>
<p>I thought that was <code>obviously</code></p>



<a name="193675600"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193675600" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193675600">(Apr 11 2020 at 19:29)</a>:</h4>
<p><code>obviously</code> is not the API</p>



<a name="193675601"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193675601" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193675601">(Apr 11 2020 at 19:29)</a>:</h4>
<p>Rotten luck.</p>



<a name="193675651"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193675651" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193675651">(Apr 11 2020 at 19:30)</a>:</h4>
<p>I tried to chase the definition of prod back but it was just defined as a limit.</p>



<a name="193675682"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193675682" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193675682">(Apr 11 2020 at 19:31)</a>:</h4>
<p>Hmm does the API for this not actually exist...?</p>



<a name="193675738"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193675738" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193675738">(Apr 11 2020 at 19:32)</a>:</h4>
<p>I just mean the uniqueness part of the universal property. Two maps into X x Y agree if their compositions with X x Y -&gt; X and X x Y -&gt; Y both agree. I haven't used the mathlib products ever, I think.</p>



<a name="193675741"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193675741" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193675741">(Apr 11 2020 at 19:32)</a>:</h4>
<p>Right.</p>



<a name="193675743"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193675743" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193675743">(Apr 11 2020 at 19:32)</a>:</h4>
<p>Would that represent progress in your proof?</p>



<a name="193675753"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193675753" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193675753">(Apr 11 2020 at 19:33)</a>:</h4>
<p>I'm hoping it's exactly what I need to finish the proof.</p>



<a name="193675766"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193675766" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193675766">(Apr 11 2020 at 19:33)</a>:</h4>
<p>It's presumably explicitly there for limits</p>



<a name="193675772"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193675772" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193675772">(Apr 11 2020 at 19:33)</a>:</h4>
<p>You built the map using the universal property, so yeah you know when you compose with the map to Hom(Y, A) that it recovers the map you put in, which is (id composed with) the projection.</p>



<a name="193675824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193675824" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193675824">(Apr 11 2020 at 19:34)</a>:</h4>
<p>I was trying to formalise the math argument involving checking on components, which is OK because everything is in Type so the category product is actually the product. But I'm now not at all sure how equal these things are.</p>



<a name="193675846"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193675846" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193675846">(Apr 11 2020 at 19:34)</a>:</h4>
<p>And if they're just isomorphic then I will never get anywhere without the universal property.</p>



<a name="193675864"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193675864" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193675864">(Apr 11 2020 at 19:35)</a>:</h4>
<p>Ried i don't see the result you mention  : " two maps into X x Y agree if their compositions with X x Y -&gt; X and X x Y -&gt; Y both agree. "</p>



<a name="193675873"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193675873" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193675873">(Apr 11 2020 at 19:35)</a>:</h4>
<p>So I guess you want to apply <code>limit.hom_ext</code> and then use <code>cases</code> on the objects of <code>walking_pair</code>.</p>



<a name="193675885"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193675885" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193675885">(Apr 11 2020 at 19:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="270476">orlando</span> <a href="#narrow/stream/116395-maths/topic/category/near/193675864" title="#narrow/stream/116395-maths/topic/category/near/193675864">said</a>:</p>
<blockquote>
<p>Ried i don't see the result you mention  : " two maps into X x Y agree if their compositions with X x Y -&gt; X and X x Y -&gt; Y both agree. "</p>
</blockquote>
<p>I agree it seems to be missing</p>



<a name="193675891"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193675891" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193675891">(Apr 11 2020 at 19:35)</a>:</h4>
<p>Obviously the library should already provide this for you</p>



<a name="193675932"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193675932" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193675932">(Apr 11 2020 at 19:36)</a>:</h4>
<p><a href="https://github.com/b-mehta/topos/blob/master/src/binary_products.lean#L29" title="https://github.com/b-mehta/topos/blob/master/src/binary_products.lean#L29">https://github.com/b-mehta/topos/blob/master/src/binary_products.lean#L29</a><br>
from the topos project</p>



<a name="193675933"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193675933" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193675933">(Apr 11 2020 at 19:36)</a>:</h4>
<p><span class="user-mention" data-user-id="270476">@orlando</span> you found a hole :-)</p>



<a name="193675966"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193675966" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193675966">(Apr 11 2020 at 19:37)</a>:</h4>
<p>Good spot Reid :-)</p>



<a name="193676143"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193676143" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193676143">(Apr 11 2020 at 19:41)</a>:</h4>
<p>I even gave the correct proof <span aria-label="innocent" class="emoji emoji-1f607" role="img" title="innocent">:innocent:</span></p>



<a name="193682041"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193682041" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193682041">(Apr 11 2020 at 22:06)</a>:</h4>
<p>Ah yeah this is a super useful result! It is pretty much the same thing as <code>apply limit.hom_ext, cases j</code> but it's nice to have a name for it like we did</p>



<a name="193682134"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193682134" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193682134">(Apr 11 2020 at 22:08)</a>:</h4>
<p>PR!</p>



<a name="193701965"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193701965" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193701965">(Apr 12 2020 at 08:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/116395-maths/topic/category/near/193668868" title="#narrow/stream/116395-maths/topic/category/near/193668868">said</a>:</p>
<blockquote>
<p>Your <code>lemma</code> is not a lemma, I think?</p>
</blockquote>
<p>Ok <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span>  I just understood now your remark <span aria-label="joy" class="emoji emoji-1f602" role="img" title="joy">:joy:</span> 12 hours later ! I really slow !!!</p>



<a name="193705052"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193705052" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193705052">(Apr 12 2020 at 10:18)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">prod</span><span class="bp">.</span><span class="n">lift_fst</span> <span class="o">{</span><span class="n">Y</span> <span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="n">C</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">Y</span> <span class="err">⟶</span> <span class="n">A</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="err">⟶</span> <span class="n">B</span><span class="o">)</span> <span class="o">:</span> <span class="n">prod</span><span class="bp">.</span><span class="n">lift</span> <span class="n">f</span> <span class="n">g</span> <span class="err">≫</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">fst</span> <span class="bp">=</span> <span class="n">f</span> <span class="o">:=</span>
<span class="n">limit</span><span class="bp">.</span><span class="n">lift_π</span> <span class="o">(</span><span class="n">binary_fan</span><span class="bp">.</span><span class="n">mk</span> <span class="n">f</span> <span class="n">g</span><span class="o">)</span> <span class="bp">_</span>

<span class="kn">lemma</span> <span class="n">prod</span><span class="bp">.</span><span class="n">lift_snd</span> <span class="o">{</span><span class="n">Y</span> <span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="n">C</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">Y</span> <span class="err">⟶</span> <span class="n">A</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="err">⟶</span> <span class="n">B</span><span class="o">)</span> <span class="o">:</span> <span class="n">prod</span><span class="bp">.</span><span class="n">lift</span> <span class="n">f</span> <span class="n">g</span> <span class="err">≫</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">snd</span> <span class="bp">=</span> <span class="n">g</span> <span class="o">:=</span>
<span class="n">limit</span><span class="bp">.</span><span class="n">lift_π</span> <span class="o">(</span><span class="n">binary_fan</span><span class="bp">.</span><span class="n">mk</span> <span class="n">f</span> <span class="n">g</span><span class="o">)</span> <span class="bp">_</span>
</pre></div>



<a name="193705212"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193705212" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193705212">(Apr 12 2020 at 10:23)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">comma</span>
<span class="kn">import</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span><span class="bp">.</span><span class="n">limits</span>
<span class="kn">import</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span><span class="bp">.</span><span class="n">shapes</span>
<span class="kn">import</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">yoneda</span>
<span class="kn">import</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">opposites</span>
<span class="kn">import</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">types</span>
<span class="kn">import</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span><span class="bp">.</span><span class="n">shapes</span>
<span class="kn">import</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span><span class="bp">.</span><span class="n">types</span>

<span class="n">universes</span> <span class="n">v</span> <span class="n">u</span>
<span class="kn">open</span> <span class="n">category_theory</span>
<span class="kn">open</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span>
<span class="kn">open</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">category</span>
<span class="kn">open</span> <span class="n">opposite</span>
<span class="kn">namespace</span> <span class="n">TEST</span>
<span class="kn">variables</span> <span class="o">{</span><span class="n">C</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span>
<span class="kn">variables</span> <span class="o">[</span><span class="err">𝒞</span> <span class="o">:</span> <span class="n">category</span><span class="bp">.</span><span class="o">{</span><span class="n">v</span><span class="o">}</span> <span class="n">C</span><span class="o">]</span>
<span class="kn">variables</span>  <span class="o">[</span><span class="n">has_binary_products</span><span class="bp">.</span><span class="o">{</span><span class="n">v</span><span class="o">}</span> <span class="n">C</span><span class="o">][</span><span class="n">has_terminal</span><span class="bp">.</span><span class="o">{</span><span class="n">v</span><span class="o">}</span> <span class="n">C</span><span class="o">]</span>
<span class="n">include</span> <span class="err">𝒞</span>

<span class="kn">lemma</span> <span class="n">prod</span><span class="bp">.</span><span class="n">hom_ext</span> <span class="o">{</span><span class="n">Y</span> <span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="n">C</span><span class="o">}</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">Y</span> <span class="err">⟶</span> <span class="n">A</span> <span class="err">⨯</span> <span class="n">B</span><span class="o">}</span> <span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="n">a</span> <span class="err">≫</span> <span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">fst</span> <span class="bp">=</span> <span class="n">b</span> <span class="err">≫</span> <span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">fst</span><span class="o">)</span> <span class="o">(</span><span class="n">h2</span> <span class="o">:</span> <span class="n">a</span> <span class="err">≫</span> <span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">snd</span> <span class="bp">=</span> <span class="n">b</span> <span class="err">≫</span> <span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">snd</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">apply</span> <span class="n">limit</span><span class="bp">.</span><span class="n">hom_ext</span><span class="o">,</span>
  <span class="n">rintros</span> <span class="o">(</span><span class="bp">_</span> <span class="bp">|</span> <span class="bp">_</span><span class="o">),</span>
  <span class="n">simpa</span><span class="o">,</span>
  <span class="n">simpa</span>
<span class="kn">end</span>

<span class="kn">lemma</span> <span class="n">prod</span><span class="bp">.</span><span class="n">lift_fst</span> <span class="o">{</span><span class="n">Y</span> <span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="n">C</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">Y</span> <span class="err">⟶</span> <span class="n">A</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="err">⟶</span> <span class="n">B</span><span class="o">)</span> <span class="o">:</span> <span class="n">prod</span><span class="bp">.</span><span class="n">lift</span> <span class="n">f</span> <span class="n">g</span> <span class="err">≫</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">fst</span> <span class="bp">=</span> <span class="n">f</span> <span class="o">:=</span>
<span class="n">limit</span><span class="bp">.</span><span class="n">lift_π</span> <span class="o">(</span><span class="n">binary_fan</span><span class="bp">.</span><span class="n">mk</span> <span class="n">f</span> <span class="n">g</span><span class="o">)</span> <span class="bp">_</span>

<span class="kn">lemma</span> <span class="n">prod</span><span class="bp">.</span><span class="n">lift_snd</span> <span class="o">{</span><span class="n">Y</span> <span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="n">C</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">Y</span> <span class="err">⟶</span> <span class="n">A</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="err">⟶</span> <span class="n">B</span><span class="o">)</span> <span class="o">:</span> <span class="n">prod</span><span class="bp">.</span><span class="n">lift</span> <span class="n">f</span> <span class="n">g</span> <span class="err">≫</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">snd</span> <span class="bp">=</span> <span class="n">g</span> <span class="o">:=</span>
<span class="n">limit</span><span class="bp">.</span><span class="n">lift_π</span> <span class="o">(</span><span class="n">binary_fan</span><span class="bp">.</span><span class="n">mk</span> <span class="n">f</span> <span class="n">g</span><span class="o">)</span> <span class="bp">_</span>

<span class="n">def</span> <span class="n">Yoneda_preserve_product</span> <span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">C</span><span class="o">)(</span><span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="n">C</span><span class="o">)</span> <span class="o">:</span>
     <span class="o">(</span><span class="n">yoneda</span><span class="bp">.</span><span class="n">obj</span> <span class="o">(</span><span class="n">A</span> <span class="err">⨯</span> <span class="n">B</span><span class="o">))</span><span class="bp">.</span><span class="n">obj</span> <span class="o">(</span><span class="n">op</span> <span class="n">Y</span><span class="o">)</span> <span class="err">≅</span> <span class="o">(</span><span class="n">yoneda</span><span class="bp">.</span><span class="n">obj</span> <span class="n">A</span><span class="o">)</span><span class="bp">.</span><span class="n">obj</span> <span class="o">(</span><span class="n">op</span> <span class="n">Y</span><span class="o">)</span> <span class="err">⨯</span> <span class="o">(</span><span class="n">yoneda</span><span class="bp">.</span><span class="n">obj</span> <span class="n">B</span><span class="o">)</span><span class="bp">.</span><span class="n">obj</span> <span class="o">(</span><span class="n">op</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">hom</span> <span class="o">:=</span> <span class="n">prod</span><span class="bp">.</span><span class="n">lift</span>
    <span class="o">(</span><span class="bp">λ</span> <span class="n">f</span><span class="o">,</span> <span class="n">f</span> <span class="err">≫</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">fst</span><span class="o">)</span>
    <span class="o">(</span><span class="bp">λ</span> <span class="n">f</span><span class="o">,</span> <span class="n">f</span> <span class="err">≫</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">snd</span><span class="o">),</span>
  <span class="n">inv</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">f</span> <span class="o">:</span> <span class="o">(</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">A</span><span class="o">)</span> <span class="err">⨯</span> <span class="o">(</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">B</span><span class="o">),</span>
    <span class="o">(</span><span class="n">prod</span><span class="bp">.</span><span class="n">lift</span>
      <span class="o">((</span><span class="bp">@</span><span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">fst</span> <span class="bp">_</span> <span class="bp">_</span> <span class="o">(</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">A</span><span class="o">)</span> <span class="o">(</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">B</span><span class="o">)</span> <span class="bp">_</span> <span class="o">:</span> <span class="o">((</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">A</span><span class="o">)</span> <span class="err">⨯</span> <span class="o">(</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">B</span><span class="o">))</span> <span class="bp">→</span> <span class="o">(</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">A</span><span class="o">))</span> <span class="n">f</span><span class="o">)</span>
      <span class="o">((</span><span class="bp">@</span><span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">snd</span> <span class="bp">_</span> <span class="bp">_</span> <span class="o">(</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">A</span><span class="o">)</span> <span class="bp">_</span> <span class="bp">_</span> <span class="o">:</span> <span class="o">((</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">A</span><span class="o">)</span> <span class="err">⨯</span> <span class="o">(</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">B</span><span class="o">))</span> <span class="bp">→</span> <span class="o">(</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">B</span><span class="o">))</span> <span class="n">f</span> <span class="o">:</span> <span class="n">Y</span> <span class="err">⟶</span> <span class="n">B</span><span class="o">)),</span>
  <span class="n">hom_inv_id&#39;</span> <span class="o">:=</span> <span class="k">begin</span>
    <span class="n">ext</span> <span class="n">f</span><span class="o">,</span>
    <span class="n">cases</span> <span class="n">j</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">simp</span><span class="o">,</span> <span class="n">refl</span><span class="o">},</span>
    <span class="o">{</span> <span class="n">simp</span><span class="o">,</span> <span class="n">refl</span><span class="o">}</span>
  <span class="kn">end</span><span class="o">,</span>
  <span class="n">inv_hom_id&#39;</span> <span class="o">:=</span> <span class="k">begin</span>
    <span class="n">apply</span> <span class="n">prod</span><span class="bp">.</span><span class="n">hom_ext</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">rw</span> <span class="n">assoc</span><span class="o">,</span> <span class="n">rw</span> <span class="n">prod</span><span class="bp">.</span><span class="n">lift_fst</span><span class="o">,</span> <span class="n">obviously</span><span class="o">},</span>
    <span class="o">{</span> <span class="n">rw</span> <span class="n">assoc</span><span class="o">,</span> <span class="n">rw</span> <span class="n">prod</span><span class="bp">.</span><span class="n">lift_snd</span><span class="o">,</span> <span class="n">obviously</span><span class="o">}</span>
  <span class="kn">end</span>
<span class="o">}</span>

<span class="kn">end</span> <span class="n">TEST</span>
</pre></div>


<p><span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span></p>



<a name="193705285"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193705285" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193705285">(Apr 12 2020 at 10:25)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span>  :  your lemmas is exactly what i need !!!! I was asking me where is the lemma : </p>
<div class="codehilite"><pre><span></span> <span class="kn">lemma</span> <span class="n">prod</span><span class="bp">.</span><span class="n">first</span> <span class="o">(</span><span class="n">A</span> <span class="n">B</span> <span class="n">X</span> <span class="o">:</span> <span class="n">C</span><span class="o">)(</span><span class="n">f</span> <span class="o">:</span><span class="n">X</span> <span class="err">⟶</span> <span class="n">A</span><span class="o">)(</span><span class="n">g</span> <span class="o">:</span> <span class="n">X</span> <span class="err">⟶</span> <span class="n">B</span><span class="o">)</span> <span class="o">:</span> <span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">lift</span> <span class="n">f</span> <span class="n">g</span>  <span class="err">≫</span> <span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">fst</span> <span class="bp">=</span> <span class="n">f</span> <span class="o">:=</span> <span class="k">begin</span>
     <span class="n">obviously</span><span class="o">,</span>
     <span class="n">sorry</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>


<p>If think it's good  !</p>



<a name="193705325"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193705325" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193705325">(Apr 12 2020 at 10:26)</a>:</h4>
<p><code>prod.hom_ext</code> and <code>prod.lift_fst</code> and <code>prod.lift_snd</code> were all missing from the API, although no doubt the experts will say not to put in <code>prod.lift_fst</code> because "it is in there already" (as <code>limit.lift_π</code>). I am not so sure though. First, I needed to rewrite with it (which I can't do with limit.lift_\pi) and secondly it might require the user of <code>prod</code> to know about <code>binary_fan.mk</code> which I feel is not something which an end user needs to know about.</p>



<a name="193705499"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193705499" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Markus Himmel <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193705499">(Apr 12 2020 at 10:31)</a>:</h4>
<p><code>erw limit.lift_π</code> would most likely have worked</p>



<a name="193705544"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193705544" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Markus Himmel <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193705544">(Apr 12 2020 at 10:32)</a>:</h4>
<p>But I agree that these lemmas would be a nice addition</p>



<a name="193705618"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193705618" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193705618">(Apr 12 2020 at 10:35)</a>:</h4>
<p><code>prod</code> and <code>prod.fst</code> etc are all defined as <code>abbreviation</code>s. It says that <code>erewrite</code> unfolds semireducible definitions. It also unfolds abbreviations?</p>



<a name="193705625"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193705625" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193705625">(Apr 12 2020 at 10:35)</a>:</h4>
<p>! even <code>rw</code> works!</p>



<a name="193705690"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193705690" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Markus Himmel <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193705690">(Apr 12 2020 at 10:37)</a>:</h4>
<p>In fact, in your code above, you can leave out the <code>rw prod.lift_fst</code> entirely and obviously will still handle it</p>



<a name="193705733"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193705733" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Markus Himmel <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193705733">(Apr 12 2020 at 10:38)</a>:</h4>
<p>You don't need the <code>rw assoc</code> either</p>



<a name="193705815"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193705815" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193705815">(Apr 12 2020 at 10:41)</a>:</h4>
<p>as long as you have about 5 minutes to spare! You're right!</p>



<a name="193707735"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193707735" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193707735">(Apr 12 2020 at 10:49)</a>:</h4>
<p>I think we should add all those lemmas!</p>



<a name="193707786"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193707786" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193707786">(Apr 12 2020 at 10:50)</a>:</h4>
<p>I'm making a PR. You want all three?</p>



<a name="193707787"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193707787" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193707787">(Apr 12 2020 at 10:50)</a>:</h4>
<p>Also, we should add more specific instances for <code>has_products</code> and <code>has_binary_products</code> for all the concrete categories (including <code>Type</code>), which give you want you would definitionally expect.</p>



<a name="193707788"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193707788" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193707788">(Apr 12 2020 at 10:50)</a>:</h4>
<p>Yes please!</p>



<a name="193707792"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193707792" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193707792">(Apr 12 2020 at 10:50)</a>:</h4>
<p>We should check the other special shapes, too.</p>



<a name="193707795"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193707795" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193707795">(Apr 12 2020 at 10:50)</a>:</h4>
<p>I never figured out how to convince Lean that X \crossproduct Y was X \times Y if X Y : Type.</p>



<a name="193707797"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193707797" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193707797">(Apr 12 2020 at 10:50)</a>:</h4>
<p>But if however far you get with the initial PR, we can look for those later.</p>



<a name="193707802"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193707802" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193707802">(Apr 12 2020 at 10:51)</a>:</h4>
<p>Well, at the moment it isn't, definitionally.</p>



<a name="193707812"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193707812" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193707812">(Apr 12 2020 at 10:51)</a>:</h4>
<p>Indeed, I half-suspect it's not true, or hard, or whatever</p>



<a name="193707820"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193707820" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193707820">(Apr 12 2020 at 10:51)</a>:</h4>
<p>Or rather, it only is up to an <code>equiv</code> at the moment.</p>



<a name="193707822"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193707822" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193707822">(Apr 12 2020 at 10:51)</a>:</h4>
<p>But we can make it definitional.</p>



<a name="193707826"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193707826" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193707826">(Apr 12 2020 at 10:51)</a>:</h4>
<p>(Note that in some ways this is dangerous --- it allows/encourages people to break through the API. :-)</p>



<a name="193707827"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193707827" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193707827">(Apr 12 2020 at 10:51)</a>:</h4>
<p>I'm out of my depth here, but it did make me go on a wild goose chase with the question.</p>



<a name="193707865"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193707865" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193707865">(Apr 12 2020 at 10:52)</a>:</h4>
<p>I assumed I'd need it; I hadn't realised I could prove what I wanted in a purely arrow-theoretic way</p>



<a name="193707868"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193707868" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Markus Himmel <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193707868">(Apr 12 2020 at 10:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110087">Scott Morrison</span> <a href="#narrow/stream/116395-maths/topic/category/near/193707792" title="#narrow/stream/116395-maths/topic/category/near/193707792">said</a>:</p>
<blockquote>
<p>We should check the other special shapes, too.</p>
</blockquote>
<p>The biproducts PR also does not have these lemmas</p>



<a name="193708568"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193708568" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193708568">(Apr 12 2020 at 11:13)</a>:</h4>
<div class="codehilite"><pre><span></span>feat(category_theory/limits/shapes/binary_products):
</pre></div>


<p>"2 CHARACTERS OVER 50 IN CURRENT LINE"</p>
<p>:-/</p>



<a name="193708771"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193708771" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193708771">(Apr 12 2020 at 11:18)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/2396" title="https://github.com/leanprover-community/mathlib/issues/2396">#2396</a></p>



<a name="193716195"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193716195" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193716195">(Apr 12 2020 at 14:53)</a>:</h4>
<p>hum i don't know if it's somewhere but we have : </p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">prod</span><span class="bp">.</span><span class="n">lift_comp</span><span class="o">{</span><span class="n">Z&#39;</span> <span class="n">Z</span> <span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="n">C</span><span class="o">}(</span><span class="n">h</span> <span class="o">:</span> <span class="n">Z&#39;</span> <span class="err">⟶</span> <span class="n">Z</span><span class="o">)(</span><span class="n">f</span> <span class="o">:</span> <span class="n">Z</span> <span class="err">⟶</span> <span class="n">A</span><span class="o">)(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Z</span> <span class="err">⟶</span> <span class="n">B</span><span class="o">)</span>  <span class="o">:</span> <span class="o">(</span><span class="n">h</span> <span class="err">≫</span> <span class="o">(</span><span class="n">f</span> <span class="bp">|</span> <span class="n">g</span><span class="o">)</span> <span class="o">)</span> <span class="bp">=</span> <span class="o">((</span><span class="n">h</span> <span class="err">≫</span> <span class="n">f</span><span class="o">)</span> <span class="bp">|</span> <span class="n">h</span> <span class="err">≫</span> <span class="n">g</span><span class="o">)</span> <span class="o">:=</span> <span class="k">begin</span>
     <span class="n">apply</span> <span class="n">prod</span><span class="bp">.</span><span class="n">hom_ext</span><span class="o">,</span>
     <span class="n">rw</span> <span class="n">assoc</span><span class="o">,</span>
     <span class="n">rw</span> <span class="n">prod</span><span class="bp">.</span><span class="n">lift_fst</span><span class="o">,</span>
     <span class="n">rw</span> <span class="n">prod</span><span class="bp">.</span><span class="n">lift_fst</span><span class="o">,</span>
     <span class="n">rw</span> <span class="n">prod</span><span class="bp">.</span><span class="n">lift_snd</span><span class="o">,</span>
     <span class="n">rw</span> <span class="n">assoc</span><span class="o">,</span>
     <span class="n">rw</span> <span class="n">prod</span><span class="bp">.</span><span class="n">lift_snd</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>



<a name="193716875"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193716875" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193716875">(Apr 12 2020 at 15:10)</a>:</h4>
<p>This isn't there, I think it should be! (and similar on the other side)</p>



<a name="193717891"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193717891" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193717891">(Apr 12 2020 at 15:39)</a>:</h4>
<p>I can add this to the PR. The <code>|</code> notation is orlando's I think; it might be worth getting Scott's input on this.</p>



<a name="193724320"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193724320" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193724320">(Apr 12 2020 at 18:31)</a>:</h4>
<p>I would find some sort of notation for prod.lift useful, no strong preference on what it is</p>



<a name="193767463"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193767463" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193767463">(Apr 13 2020 at 12:34)</a>:</h4>
<p>Hello, i make a tatic for product but i have a problem it's seem to bug when there is a <code> rw ← </code> The code is a little long  ! </p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span><span class="bp">.</span><span class="n">limits</span>
<span class="kn">import</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span><span class="bp">.</span><span class="n">shapes</span>
<span class="kn">import</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">yoneda</span>
<span class="kn">import</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">opposites</span>
<span class="kn">import</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">types</span>
<span class="kn">import</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span><span class="bp">.</span><span class="n">types</span>

<span class="n">run_cmd</span> <span class="n">mk_simp_attr</span> <span class="bp">`</span><span class="n">PRODUCT</span>    <span class="c1">-----  BOF BOF</span>
<span class="n">meta</span> <span class="n">def</span> <span class="n">PRODUCT_CAT</span>  <span class="o">:</span> <span class="n">tactic</span> <span class="n">unit</span> <span class="o">:=</span>
<span class="bp">`</span><span class="o">[</span>  <span class="n">try</span> <span class="o">{</span><span class="n">simp</span> <span class="n">only</span> <span class="k">with</span> <span class="n">PRODUCT</span><span class="o">}]</span>
<span class="n">run_cmd</span> <span class="n">add_interactive</span> <span class="o">[</span><span class="bp">`</span><span class="n">PRODUCT_CAT</span><span class="o">]</span>

<span class="n">universes</span> <span class="n">v</span> <span class="n">u</span>
<span class="kn">open</span> <span class="n">category_theory</span>
<span class="kn">open</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span>
<span class="kn">open</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">category</span>
<span class="kn">open</span> <span class="n">opposite</span>
<span class="kn">namespace</span> <span class="n">lem</span>
<span class="kn">variables</span> <span class="o">{</span><span class="n">C</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span>
<span class="kn">variables</span> <span class="o">[</span><span class="err">𝒞</span> <span class="o">:</span> <span class="n">category</span><span class="bp">.</span><span class="o">{</span><span class="n">v</span><span class="o">}</span> <span class="n">C</span><span class="o">]</span>
<span class="kn">variables</span>  <span class="o">[</span><span class="n">has_binary_products</span><span class="bp">.</span><span class="o">{</span><span class="n">v</span><span class="o">}</span> <span class="n">C</span><span class="o">][</span><span class="n">has_terminal</span><span class="bp">.</span><span class="o">{</span><span class="n">v</span><span class="o">}</span> <span class="n">C</span><span class="o">]</span>
<span class="n">include</span> <span class="err">𝒞</span>
<span class="n">attribute</span> <span class="o">[</span><span class="n">PRODUCT</span><span class="o">]</span> <span class="n">category</span><span class="bp">.</span><span class="n">assoc</span> <span class="n">category</span><span class="bp">.</span><span class="n">id_comp</span> <span class="n">category</span><span class="bp">.</span><span class="n">comp_id</span>
<span class="bp">@</span><span class="o">[</span><span class="n">PRODUCT</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">prod_left_def</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="n">C</span><span class="o">}</span> <span class="o">:</span> <span class="n">limit</span><span class="bp">.</span><span class="n">π</span> <span class="o">(</span><span class="n">pair</span> <span class="n">X</span> <span class="n">Y</span><span class="o">)</span> <span class="n">walking_pair</span><span class="bp">.</span><span class="n">left</span> <span class="bp">=</span> <span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">fst</span> <span class="o">:=</span> <span class="n">rfl</span>
<span class="bp">@</span><span class="o">[</span><span class="n">PRODUCT</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">prod_right_def</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="n">C</span><span class="o">}</span> <span class="o">:</span> <span class="n">limit</span><span class="bp">.</span><span class="n">π</span> <span class="o">(</span><span class="n">pair</span> <span class="n">X</span> <span class="n">Y</span><span class="o">)</span> <span class="n">walking_pair</span><span class="bp">.</span><span class="n">right</span> <span class="bp">=</span> <span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">snd</span> <span class="o">:=</span> <span class="n">rfl</span>
<span class="kn">lemma</span> <span class="n">prod</span><span class="bp">.</span><span class="n">hom_ext</span> <span class="o">{</span><span class="n">A</span> <span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="n">C</span><span class="o">}</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">A</span> <span class="err">⟶</span> <span class="n">X</span> <span class="err">⨯</span> <span class="n">Y</span><span class="o">}</span> <span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="n">a</span> <span class="err">≫</span> <span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">fst</span> <span class="bp">=</span> <span class="n">b</span> <span class="err">≫</span> <span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">fst</span><span class="o">)</span> <span class="o">(</span><span class="n">h2</span> <span class="o">:</span> <span class="n">a</span> <span class="err">≫</span> <span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">snd</span> <span class="bp">=</span> <span class="n">b</span> <span class="err">≫</span> <span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">snd</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">apply</span> <span class="n">limit</span><span class="bp">.</span><span class="n">hom_ext</span><span class="o">,</span>
  <span class="n">rintros</span> <span class="o">(</span><span class="bp">_</span> <span class="bp">|</span> <span class="bp">_</span><span class="o">),</span>
  <span class="n">rw</span> <span class="n">prod_left_def</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">h1</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">prod_right_def</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">h2</span><span class="o">,</span>
<span class="kn">end</span>
<span class="bp">@</span><span class="o">[</span><span class="n">PRODUCT</span><span class="o">]</span><span class="kn">lemma</span> <span class="n">prod</span><span class="bp">.</span><span class="n">lift_fst</span> <span class="o">{</span><span class="n">Y</span> <span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="n">C</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">Y</span> <span class="err">⟶</span> <span class="n">A</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="err">⟶</span> <span class="n">B</span><span class="o">)</span> <span class="o">:</span> <span class="n">prod</span><span class="bp">.</span><span class="n">lift</span> <span class="n">f</span> <span class="n">g</span> <span class="err">≫</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">fst</span> <span class="bp">=</span> <span class="n">f</span> <span class="o">:=</span>
<span class="n">limit</span><span class="bp">.</span><span class="n">lift_π</span> <span class="o">(</span><span class="n">binary_fan</span><span class="bp">.</span><span class="n">mk</span> <span class="n">f</span> <span class="n">g</span><span class="o">)</span> <span class="bp">_</span>

<span class="bp">@</span><span class="o">[</span><span class="n">PRODUCT</span><span class="o">]</span><span class="kn">lemma</span> <span class="n">prod</span><span class="bp">.</span><span class="n">lift_snd</span> <span class="o">{</span><span class="n">Y</span> <span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="n">C</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">Y</span> <span class="err">⟶</span> <span class="n">A</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="err">⟶</span> <span class="n">B</span><span class="o">)</span> <span class="o">:</span> <span class="n">prod</span><span class="bp">.</span><span class="n">lift</span> <span class="n">f</span> <span class="n">g</span> <span class="err">≫</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">snd</span> <span class="bp">=</span> <span class="n">g</span> <span class="o">:=</span>
<span class="n">limit</span><span class="bp">.</span><span class="n">lift_π</span> <span class="o">(</span><span class="n">binary_fan</span><span class="bp">.</span><span class="n">mk</span> <span class="n">f</span> <span class="n">g</span><span class="o">)</span> <span class="bp">_</span>
<span class="kn">end</span> <span class="n">lem</span>

<span class="kn">notation</span> <span class="n">f</span> <span class="bp">`</span> <span class="err">⊗</span> <span class="bp">`</span><span class="o">:</span><span class="mi">20</span> <span class="n">g</span> <span class="o">:</span><span class="mi">20</span> <span class="o">:=</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">map</span> <span class="n">f</span> <span class="n">g</span>  <span class="c1">---- 20</span>
<span class="kn">notation</span>  <span class="bp">`</span><span class="n">T</span><span class="bp">`</span><span class="n">C</span> <span class="o">:</span><span class="mi">20</span> <span class="o">:=</span> <span class="o">(</span><span class="n">terminal</span> <span class="n">C</span><span class="o">)</span>
<span class="kn">notation</span>   <span class="bp">`</span><span class="n">T</span><span class="bp">`</span><span class="n">X</span> <span class="o">:</span> <span class="mi">20</span> <span class="o">:=</span> <span class="o">(</span><span class="n">terminal</span><span class="bp">.</span><span class="k">from</span> <span class="n">X</span><span class="o">)</span>
<span class="kn">notation</span> <span class="n">f</span> <span class="bp">`</span> <span class="bp">|</span> <span class="bp">`</span><span class="o">:</span><span class="mi">20</span> <span class="n">g</span> <span class="o">:</span><span class="mi">20</span> <span class="o">:=</span>  <span class="n">prod</span><span class="bp">.</span><span class="n">lift</span> <span class="n">f</span> <span class="n">g</span>
<span class="kn">notation</span> <span class="bp">`</span><span class="n">π1</span><span class="bp">`</span> <span class="o">:=</span> <span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">fst</span>
<span class="kn">notation</span> <span class="bp">`</span><span class="n">π2</span><span class="bp">`</span> <span class="o">:=</span> <span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">snd</span>


<span class="kn">variables</span> <span class="o">{</span><span class="n">C</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span>
<span class="kn">variables</span> <span class="o">[</span><span class="err">𝒞</span> <span class="o">:</span> <span class="n">category</span><span class="bp">.</span><span class="o">{</span><span class="n">v</span><span class="o">}</span> <span class="n">C</span><span class="o">]</span>
<span class="kn">variables</span> <span class="o">[</span><span class="n">has_binary_products</span><span class="bp">.</span><span class="o">{</span><span class="n">v</span><span class="o">}</span> <span class="n">C</span><span class="o">][</span><span class="n">has_terminal</span><span class="bp">.</span><span class="o">{</span><span class="n">v</span><span class="o">}</span> <span class="n">C</span><span class="o">]</span>
<span class="n">include</span> <span class="err">𝒞</span>
<span class="kn">variables</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span><span class="n">C</span><span class="o">)</span>
<span class="kn">open</span> <span class="n">lem</span>
<span class="c">/-</span><span class="cm"></span>
<span class="cm">     π notation for projection</span>
<span class="cm">-/</span>
<span class="bp">@</span><span class="o">[</span><span class="n">PRODUCT</span><span class="o">]</span><span class="kn">lemma</span> <span class="n">ex_1</span> <span class="o">{</span><span class="n">Y</span> <span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="n">C</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">Y</span> <span class="err">⟶</span> <span class="n">A</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="err">⟶</span> <span class="n">B</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span> <span class="n">f</span> <span class="bp">|</span> <span class="n">g</span><span class="o">)</span> <span class="err">≫</span> <span class="n">π1</span> <span class="bp">=</span> <span class="n">f</span>  <span class="o">:=</span>   <span class="n">prod</span><span class="bp">.</span><span class="n">lift_fst</span> <span class="n">f</span> <span class="n">g</span>
<span class="c">/-</span><span class="cm"></span>
<span class="cm">     we can type π : A ⨯ B ⟶ B if we need</span>
<span class="cm">-/</span>
<span class="bp">@</span><span class="o">[</span><span class="n">PRODUCT</span><span class="o">]</span><span class="kn">lemma</span> <span class="n">ex_2</span> <span class="o">{</span><span class="n">Y</span> <span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="n">C</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">Y</span> <span class="err">⟶</span> <span class="n">A</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="err">⟶</span> <span class="n">B</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span> <span class="n">f</span> <span class="bp">|</span> <span class="n">g</span><span class="o">)</span> <span class="err">≫</span> <span class="o">(</span><span class="n">π2</span> <span class="o">:</span> <span class="n">A</span> <span class="err">⨯</span> <span class="n">B</span> <span class="err">⟶</span> <span class="n">B</span><span class="o">)</span> <span class="bp">=</span> <span class="n">g</span> <span class="o">:=</span> <span class="n">prod</span><span class="bp">.</span><span class="n">lift_snd</span> <span class="n">f</span> <span class="n">g</span>

<span class="bp">@</span><span class="o">[</span><span class="n">PRODUCT</span><span class="o">]</span><span class="kn">lemma</span> <span class="n">ex_3</span> <span class="o">{</span><span class="n">A</span> <span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="n">C</span><span class="o">}</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">A</span> <span class="err">⟶</span> <span class="n">X</span> <span class="err">⨯</span> <span class="n">Y</span><span class="o">}</span> <span class="o">(</span><span class="n">h1</span> <span class="o">:</span> <span class="n">a</span> <span class="err">≫</span> <span class="n">π1</span>  <span class="bp">=</span> <span class="n">b</span> <span class="err">≫</span> <span class="n">π1</span> <span class="o">)</span> <span class="o">(</span><span class="n">h2</span> <span class="o">:</span> <span class="n">a</span> <span class="err">≫</span> <span class="n">π2</span>  <span class="bp">=</span> <span class="n">b</span> <span class="err">≫</span> <span class="n">π2</span><span class="o">)</span>  <span class="o">:</span> <span class="n">a</span> <span class="bp">=</span> <span class="n">b</span> <span class="o">:=</span>  <span class="n">prod</span><span class="bp">.</span><span class="n">hom_ext</span> <span class="n">h1</span> <span class="n">h2</span>


<span class="bp">@</span><span class="o">[</span><span class="n">PRODUCT</span><span class="o">]</span><span class="kn">lemma</span> <span class="n">prod</span><span class="bp">.</span><span class="n">left_composition</span><span class="o">{</span><span class="n">Z&#39;</span> <span class="n">Z</span> <span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="n">C</span><span class="o">}(</span><span class="n">h</span> <span class="o">:</span> <span class="n">Z&#39;</span> <span class="err">⟶</span> <span class="n">Z</span><span class="o">)(</span><span class="n">f</span> <span class="o">:</span> <span class="n">Z</span> <span class="err">⟶</span> <span class="n">A</span><span class="o">)(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Z</span> <span class="err">⟶</span> <span class="n">B</span><span class="o">)</span>  <span class="o">:</span>
               <span class="n">h</span> <span class="err">≫</span> <span class="o">(</span><span class="n">f</span> <span class="bp">|</span> <span class="n">g</span><span class="o">)</span>  <span class="bp">=</span> <span class="o">(</span><span class="n">h</span> <span class="err">≫</span> <span class="n">f</span> <span class="bp">|</span> <span class="n">h</span> <span class="err">≫</span> <span class="n">g</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
     <span class="n">apply</span> <span class="n">prod</span><span class="bp">.</span><span class="n">hom_ext</span><span class="o">,</span>   <span class="c1">--- Le right member is of the form ( | )  composition π1 π2</span>
     <span class="n">PRODUCT_CAT</span><span class="o">,</span>  <span class="n">PRODUCT_CAT</span><span class="o">,</span>  <span class="c1">--- here assoc</span>
     <span class="c1">-- rw assoc,</span>
     <span class="c1">-- rw prod.lift_fst,</span>
     <span class="c1">-- rw prod.lift_fst,</span>
     <span class="c1">-- rw prod.lift_snd,</span>
     <span class="c1">-- rw assoc,</span>
     <span class="c1">-- rw prod.lift_snd,</span>
<span class="kn">end</span>

<span class="bp">@</span><span class="o">[</span><span class="n">PRODUCT</span><span class="o">]</span><span class="kn">lemma</span> <span class="n">prod</span><span class="bp">.</span><span class="n">map_first</span><span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="n">W</span> <span class="o">:</span> <span class="n">C</span><span class="o">}(</span><span class="n">f</span>  <span class="o">:</span> <span class="n">X</span> <span class="err">⟶</span> <span class="n">Y</span><span class="o">)(</span><span class="n">g</span>  <span class="o">:</span> <span class="n">Z</span> <span class="err">⟶</span> <span class="n">W</span><span class="o">)</span> <span class="o">:</span>  <span class="o">(</span><span class="n">f</span> <span class="err">⊗</span> <span class="n">g</span><span class="o">)</span> <span class="err">≫</span> <span class="o">(</span><span class="n">π1</span> <span class="o">:</span> <span class="n">Y</span> <span class="err">⨯</span> <span class="n">W</span> <span class="err">⟶</span> <span class="n">Y</span><span class="o">)</span> <span class="bp">=</span> <span class="n">π1</span>  <span class="err">≫</span> <span class="n">f</span> <span class="o">:=</span>  <span class="k">begin</span>
     <span class="n">exact</span> <span class="n">limit</span><span class="bp">.</span><span class="n">map_π</span> <span class="o">(</span><span class="n">map_pair</span> <span class="n">f</span> <span class="n">g</span><span class="o">)</span> <span class="n">walking_pair</span><span class="bp">.</span><span class="n">left</span><span class="o">,</span>
<span class="kn">end</span>
<span class="bp">@</span><span class="o">[</span><span class="n">PRODUCT</span><span class="o">]</span><span class="kn">lemma</span> <span class="n">prod</span><span class="bp">.</span><span class="n">map_second</span><span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="n">W</span> <span class="o">:</span> <span class="n">C</span><span class="o">}(</span><span class="n">f</span>  <span class="o">:</span> <span class="n">X</span> <span class="err">⟶</span> <span class="n">Y</span><span class="o">)(</span><span class="n">g</span>  <span class="o">:</span> <span class="n">Z</span> <span class="err">⟶</span> <span class="n">W</span><span class="o">)</span> <span class="o">:</span>  <span class="o">(</span><span class="n">f</span> <span class="err">⊗</span> <span class="n">g</span><span class="o">)</span> <span class="err">≫</span> <span class="n">π2</span> <span class="bp">=</span> <span class="n">π2</span> <span class="err">≫</span> <span class="n">g</span> <span class="o">:=</span>  <span class="k">begin</span>
     <span class="n">exact</span> <span class="n">limit</span><span class="bp">.</span><span class="n">map_π</span> <span class="o">(</span><span class="n">map_pair</span> <span class="n">f</span> <span class="n">g</span><span class="o">)</span> <span class="n">walking_pair</span><span class="bp">.</span><span class="n">right</span><span class="o">,</span>
<span class="kn">end</span>
<span class="bp">@</span><span class="o">[</span><span class="n">PRODUCT</span><span class="o">]</span><span class="kn">lemma</span>  <span class="n">prod</span><span class="bp">.</span><span class="n">otimes_is_prod</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="n">W</span> <span class="o">:</span> <span class="n">C</span><span class="o">}(</span><span class="n">f</span>  <span class="o">:</span> <span class="n">X</span> <span class="err">⟶</span> <span class="n">Y</span><span class="o">)(</span><span class="n">g</span>  <span class="o">:</span> <span class="n">Z</span> <span class="err">⟶</span> <span class="n">W</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">f</span> <span class="err">⊗</span> <span class="n">g</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span> <span class="n">π1</span>  <span class="err">≫</span> <span class="n">f</span> <span class="bp">|</span> <span class="n">π2</span> <span class="err">≫</span> <span class="n">g</span> <span class="o">)</span> <span class="o">:=</span> <span class="k">begin</span>
     <span class="n">apply</span> <span class="n">prod</span><span class="bp">.</span><span class="n">hom_ext</span><span class="o">,</span>
     <span class="n">PRODUCT_CAT</span><span class="o">,</span> <span class="n">PRODUCT_CAT</span><span class="o">,</span>
     <span class="c1">-- rw prod.lift_fst,</span>
     <span class="c1">-- rw prod.map_first,</span>
     <span class="c1">-- rw prod.lift_snd,</span>
     <span class="c1">-- rw prod.map_second,</span>
<span class="kn">end</span>
<span class="c1">-- notation π1`(`X `x` Y`)` := (limits.prod.fst : X⨯Y ⟶ X)</span>
<span class="bp">@</span><span class="o">[</span><span class="n">PRODUCT</span><span class="o">]</span><span class="kn">lemma</span> <span class="n">prod</span><span class="bp">.</span><span class="n">map_ext</span><span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="n">W</span> <span class="o">:</span> <span class="n">C</span><span class="o">}(</span><span class="n">f1</span> <span class="n">f2</span>  <span class="o">:</span> <span class="n">X</span> <span class="err">⟶</span> <span class="n">Y</span><span class="o">)(</span><span class="n">g1</span> <span class="n">g2</span>  <span class="o">:</span> <span class="n">Z</span> <span class="err">⟶</span> <span class="n">W</span><span class="o">)</span> <span class="o">:</span>  <span class="o">(</span><span class="n">f1</span> <span class="err">⊗</span> <span class="n">g1</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">f2</span> <span class="err">⊗</span> <span class="n">g2</span><span class="o">)</span> <span class="bp">→</span>
<span class="o">(</span><span class="n">π1</span> <span class="o">:</span> <span class="n">X</span> <span class="err">⨯</span> <span class="n">Z</span> <span class="err">⟶</span> <span class="n">X</span><span class="o">)</span> <span class="err">≫</span> <span class="n">f1</span> <span class="bp">=</span> <span class="o">(</span><span class="n">π1</span> <span class="o">:</span> <span class="n">X</span> <span class="err">⨯</span> <span class="n">Z</span> <span class="err">⟶</span> <span class="n">X</span><span class="o">)</span>  <span class="err">≫</span> <span class="n">f2</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">certif</span><span class="o">,</span> <span class="k">begin</span>
     <span class="n">iterate</span> <span class="mi">2</span> <span class="o">{</span><span class="n">rw</span> <span class="n">prod</span><span class="bp">.</span><span class="n">otimes_is_prod</span> <span class="n">at</span> <span class="n">certif</span><span class="o">},</span>
     <span class="n">rw</span> <span class="err">←</span> <span class="n">prod</span><span class="bp">.</span><span class="n">map_first</span> <span class="o">(</span> <span class="n">f1</span><span class="o">)</span>  <span class="o">(</span><span class="n">g1</span><span class="o">),</span>
     <span class="n">rw</span> <span class="err">←</span> <span class="n">prod</span><span class="bp">.</span><span class="n">map_first</span> <span class="o">(</span> <span class="n">f2</span><span class="o">)</span>  <span class="o">(</span><span class="n">g2</span><span class="o">),</span>
     <span class="n">iterate</span> <span class="mi">2</span> <span class="o">{</span><span class="n">rw</span> <span class="n">prod</span><span class="bp">.</span><span class="n">otimes_is_prod</span><span class="o">},</span>
     <span class="n">rw</span> <span class="n">certif</span><span class="o">,</span>
<span class="kn">end</span>
<span class="bp">@</span><span class="o">[</span><span class="n">PRODUCT</span><span class="o">]</span><span class="kn">lemma</span> <span class="n">destruction</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="n">C</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span>  <span class="n">Y</span> <span class="err">⟶</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">X</span> <span class="err">⟶</span> <span class="n">Z</span> <span class="o">)</span> <span class="o">:</span>
     <span class="o">(</span><span class="n">f</span> <span class="bp">|</span> <span class="mi">𝟙</span> <span class="n">Y</span><span class="o">)</span> <span class="err">≫</span> <span class="o">(</span><span class="n">g</span> <span class="err">⊗</span> <span class="o">(</span><span class="mi">𝟙</span> <span class="n">Y</span><span class="o">))</span> <span class="bp">=</span> <span class="o">(</span><span class="n">f</span> <span class="err">≫</span> <span class="n">g</span> <span class="bp">|</span> <span class="mi">𝟙</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:=</span> <span class="k">begin</span>
     <span class="n">apply</span> <span class="n">prod</span><span class="bp">.</span><span class="n">hom_ext</span><span class="o">,</span>
     <span class="c1">-- PRODUCT_CAT,PRODUCT_CAT,     ---------------------- PROBLEME With the tatict HEEEEEEERRRRRRE</span>
     <span class="n">rw</span> <span class="o">[</span><span class="n">prod</span><span class="bp">.</span><span class="n">lift_fst</span><span class="o">],</span>
     <span class="n">rw</span>  <span class="n">assoc</span><span class="o">,</span>
     <span class="n">rw</span> <span class="n">prod</span><span class="bp">.</span><span class="n">map_first</span><span class="o">,</span>
     <span class="n">rw</span> <span class="err">←</span> <span class="n">assoc</span><span class="o">,</span>               <span class="c1">----- ← assoc here  Problem ?</span>
     <span class="n">rw</span> <span class="n">prod</span><span class="bp">.</span><span class="n">lift_fst</span><span class="o">,</span>
     <span class="n">tidy</span><span class="o">,</span> <span class="c1">-- super - power tidy</span>
<span class="kn">end</span>




<span class="n">def</span> <span class="n">Y</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="n">C</span><span class="o">)(</span><span class="n">A</span> <span class="o">:</span><span class="n">C</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="n">yoneda</span><span class="bp">.</span><span class="n">obj</span> <span class="n">A</span><span class="o">)</span><span class="bp">.</span><span class="n">obj</span> <span class="o">(</span><span class="n">op</span> <span class="n">R</span><span class="o">)</span>
<span class="n">def</span> <span class="n">Y_</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="n">C</span><span class="o">)</span> <span class="o">{</span><span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="n">C</span><span class="o">}(</span><span class="n">φ</span> <span class="o">:</span> <span class="n">A</span> <span class="err">⟶</span> <span class="n">B</span><span class="o">)</span> <span class="o">:=</span> <span class="o">((</span><span class="n">yoneda</span><span class="bp">.</span><span class="n">map</span> <span class="n">φ</span><span class="o">)</span><span class="bp">.</span><span class="n">app</span> <span class="o">(</span><span class="n">op</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="n">Y</span> <span class="n">R</span> <span class="n">A</span> <span class="err">⟶</span> <span class="n">Y</span> <span class="n">R</span> <span class="n">B</span><span class="o">)</span>
<span class="c1">-- Good notation for yoneda stuff :</span>
<span class="c1">-- We fix V : C and we denote by</span>
<span class="c1">-- R[X] := yoneda.obj X).obj (op R) and φ : A  ⟶ B (in C) R ⟦  φ ⟧   : R[A] → R[B]  in type v</span>
<span class="kn">notation</span> <span class="n">R</span><span class="bp">`</span><span class="o">[</span><span class="bp">`</span><span class="n">A</span><span class="bp">`</span><span class="o">]</span><span class="bp">`</span><span class="o">:</span><span class="mi">20</span> <span class="o">:=</span> <span class="n">Y</span> <span class="n">R</span> <span class="n">A</span>  <span class="c1">-- notation ??</span>
<span class="kn">notation</span> <span class="n">R</span><span class="bp">`&lt;`</span><span class="n">φ</span><span class="bp">`&gt;`</span> <span class="o">:</span><span class="mi">20</span>   <span class="o">:=</span> <span class="n">Y_</span> <span class="n">R</span> <span class="n">φ</span>  <span class="c1">--</span>
<span class="n">def</span> <span class="n">Yoneda_preserve_product</span> <span class="o">(</span><span class="n">Y</span> <span class="o">:</span> <span class="n">C</span><span class="o">)(</span><span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="n">C</span><span class="o">)</span> <span class="o">:</span>
     <span class="n">Y</span><span class="o">[</span><span class="n">A</span> <span class="err">⨯</span> <span class="n">B</span><span class="o">]</span> <span class="err">≅</span> <span class="n">Y</span><span class="o">[</span><span class="n">A</span><span class="o">]</span> <span class="err">⨯</span> <span class="n">Y</span><span class="o">[</span><span class="n">B</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">hom</span> <span class="o">:=</span> <span class="n">prod</span><span class="bp">.</span><span class="n">lift</span>
    <span class="o">(</span><span class="bp">λ</span> <span class="n">f</span><span class="o">,</span> <span class="n">f</span> <span class="err">≫</span> <span class="n">π1</span><span class="o">)</span>
    <span class="o">(</span><span class="bp">λ</span> <span class="n">f</span><span class="o">,</span> <span class="n">f</span> <span class="err">≫</span> <span class="n">π2</span><span class="o">),</span>
  <span class="n">inv</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">f</span> <span class="o">:</span> <span class="o">(</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">A</span><span class="o">)</span> <span class="err">⨯</span> <span class="o">(</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">B</span><span class="o">),</span>
    <span class="o">(</span><span class="n">prod</span><span class="bp">.</span><span class="n">lift</span>
      <span class="o">((</span><span class="bp">@</span><span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">fst</span> <span class="bp">_</span> <span class="bp">_</span> <span class="o">(</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">A</span><span class="o">)</span> <span class="o">(</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">B</span><span class="o">)</span> <span class="bp">_</span> <span class="o">:</span> <span class="o">((</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">A</span><span class="o">)</span> <span class="err">⨯</span> <span class="o">(</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">B</span><span class="o">))</span> <span class="bp">→</span> <span class="o">(</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">A</span><span class="o">))</span> <span class="n">f</span><span class="o">)</span>
      <span class="o">((</span><span class="bp">@</span><span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">snd</span> <span class="bp">_</span> <span class="bp">_</span> <span class="o">(</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">A</span><span class="o">)</span> <span class="bp">_</span> <span class="bp">_</span> <span class="o">:</span> <span class="o">((</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">A</span><span class="o">)</span> <span class="err">⨯</span> <span class="o">(</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">B</span><span class="o">))</span> <span class="bp">→</span> <span class="o">(</span><span class="n">Y</span> <span class="err">⟶</span> <span class="n">B</span><span class="o">))</span> <span class="n">f</span> <span class="o">:</span> <span class="n">Y</span> <span class="err">⟶</span> <span class="n">B</span><span class="o">)),</span>
  <span class="n">hom_inv_id&#39;</span> <span class="o">:=</span> <span class="k">begin</span>
    <span class="n">ext</span> <span class="n">f</span><span class="o">,</span>
    <span class="n">cases</span> <span class="n">j</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">simp</span><span class="o">,</span> <span class="n">refl</span><span class="o">},</span>
    <span class="o">{</span> <span class="n">simp</span><span class="o">,</span> <span class="n">refl</span><span class="o">}</span>
  <span class="kn">end</span><span class="o">,</span>
  <span class="n">inv_hom_id&#39;</span> <span class="o">:=</span> <span class="k">begin</span>
    <span class="n">apply</span> <span class="n">lem</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">hom_ext</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">rw</span> <span class="n">assoc</span><span class="o">,</span> <span class="n">rw</span> <span class="n">lem</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">lift_fst</span><span class="o">,</span> <span class="n">obviously</span><span class="o">},</span>
    <span class="o">{</span> <span class="n">rw</span> <span class="n">assoc</span><span class="o">,</span> <span class="n">rw</span> <span class="n">lem</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">lift_snd</span><span class="o">,</span> <span class="n">obviously</span><span class="o">}</span>
  <span class="kn">end</span>
<span class="o">}</span>

<span class="c1">--- Here it just sugar</span>
<span class="bp">@</span><span class="o">[</span><span class="n">PRODUCT</span><span class="o">]</span><span class="kn">lemma</span> <span class="n">yoneda_sugar</span><span class="bp">.</span><span class="n">composition</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="n">C</span><span class="o">)</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="n">C</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="err">⟶</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="err">⟶</span> <span class="n">Z</span><span class="o">)</span> <span class="o">:</span> <span class="n">R</span> <span class="bp">&lt;</span> <span class="n">f</span> <span class="err">≫</span> <span class="n">g</span> <span class="bp">&gt;</span> <span class="bp">=</span><span class="o">(</span> <span class="n">R</span><span class="bp">&lt;</span> <span class="n">f</span> <span class="bp">&gt;</span><span class="o">)</span> <span class="err">≫</span> <span class="o">(</span><span class="n">R</span> <span class="bp">&lt;</span> <span class="n">g</span> <span class="bp">&gt;</span><span class="o">)</span>
 <span class="o">:=</span>  <span class="k">begin</span>
     <span class="n">unfold</span> <span class="n">Y_</span><span class="o">,</span>
     <span class="n">simp</span><span class="o">,</span>
 <span class="kn">end</span>
<span class="n">def</span> <span class="n">yoneda_sugar</span><span class="bp">.</span><span class="n">conv</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="n">C</span><span class="o">}{</span><span class="n">A</span> <span class="o">:</span> <span class="n">C</span><span class="o">}(</span><span class="n">g</span> <span class="o">:</span> <span class="n">R</span><span class="o">[</span><span class="n">A</span><span class="o">])</span> <span class="o">:</span> <span class="n">R</span> <span class="err">⟶</span> <span class="n">A</span> <span class="o">:=</span> <span class="n">g</span>
<span class="n">def</span> <span class="n">yoneda_sugar</span><span class="bp">.</span><span class="n">prod</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="n">C</span><span class="o">)(</span><span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="n">C</span><span class="o">)</span> <span class="o">:</span> <span class="n">R</span><span class="o">[</span><span class="n">A</span> <span class="err">⨯</span> <span class="n">B</span><span class="o">]</span> <span class="err">≅</span> <span class="n">R</span><span class="o">[</span><span class="n">A</span><span class="o">]</span> <span class="err">⨯</span> <span class="n">R</span><span class="o">[</span><span class="n">B</span><span class="o">]</span> <span class="o">:=</span> <span class="k">begin</span>
     <span class="n">exact</span> <span class="n">Yoneda_preserve_product</span> <span class="n">R</span> <span class="n">A</span> <span class="n">B</span><span class="o">,</span>
<span class="kn">end</span>
<span class="bp">@</span><span class="o">[</span><span class="n">PRODUCT</span><span class="o">]</span><span class="kn">lemma</span> <span class="n">yoneda_sugar</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">hom</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="n">C</span><span class="o">)(</span><span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="n">C</span><span class="o">)</span> <span class="o">:</span>
     <span class="o">(</span><span class="n">yoneda_sugar</span><span class="bp">.</span><span class="n">prod</span> <span class="n">R</span> <span class="n">A</span> <span class="n">B</span><span class="o">)</span><span class="bp">.</span><span class="n">hom</span> <span class="bp">=</span>  <span class="o">(</span><span class="n">R</span> <span class="bp">&lt;</span> <span class="o">(</span><span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">fst</span> <span class="o">:</span> <span class="n">A</span> <span class="err">⨯</span> <span class="n">B</span> <span class="err">⟶</span> <span class="n">A</span><span class="o">)</span> <span class="bp">&gt;</span> <span class="bp">|</span> <span class="n">R</span> <span class="bp">&lt;</span> <span class="o">(</span><span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">snd</span> <span class="o">:</span> <span class="n">A</span> <span class="err">⨯</span> <span class="n">B</span> <span class="err">⟶</span> <span class="n">B</span><span class="o">)</span><span class="bp">&gt;</span> <span class="o">)</span> <span class="o">:=</span> <span class="n">rfl</span>

<span class="bp">@</span><span class="o">[</span><span class="n">PRODUCT</span><span class="o">]</span><span class="kn">lemma</span> <span class="n">yoneda_sugar</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">first</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="n">C</span><span class="o">)(</span><span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="n">C</span><span class="o">)</span> <span class="o">:</span>
 <span class="o">(</span><span class="n">yoneda_sugar</span><span class="bp">.</span><span class="n">prod</span> <span class="n">R</span> <span class="n">A</span> <span class="n">B</span><span class="o">)</span><span class="bp">.</span><span class="n">hom</span> <span class="err">≫</span> <span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">fst</span> <span class="bp">=</span> <span class="o">(</span><span class="n">R</span> <span class="bp">&lt;</span> <span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">fst</span> <span class="bp">&gt;</span><span class="o">)</span> <span class="o">:=</span>
 <span class="k">begin</span>
     <span class="n">exact</span> <span class="n">rfl</span><span class="o">,</span>
 <span class="kn">end</span>
 <span class="bp">@</span><span class="o">[</span><span class="n">PRODUCT</span><span class="o">]</span><span class="kn">lemma</span> <span class="n">yoneda_sugar</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">hom_inv</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="n">C</span><span class="o">)(</span><span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="n">C</span><span class="o">)</span> <span class="o">:</span>
     <span class="o">(</span><span class="n">yoneda_sugar</span><span class="bp">.</span><span class="n">prod</span> <span class="n">R</span> <span class="n">A</span> <span class="n">B</span><span class="o">)</span><span class="bp">.</span><span class="n">hom</span> <span class="err">≫</span> <span class="o">(</span><span class="n">yoneda_sugar</span><span class="bp">.</span><span class="n">prod</span> <span class="n">R</span> <span class="n">A</span> <span class="n">B</span><span class="o">)</span><span class="bp">.</span><span class="n">inv</span> <span class="bp">=</span> <span class="mi">𝟙</span> <span class="o">(</span><span class="n">R</span><span class="o">[</span> <span class="n">A</span> <span class="err">⨯</span> <span class="n">B</span><span class="o">])</span> <span class="o">:=</span>
     <span class="o">(</span><span class="n">Yoneda_preserve_product</span> <span class="n">R</span> <span class="n">A</span> <span class="n">B</span><span class="o">)</span><span class="bp">.</span><span class="n">hom_inv_id&#39;</span>
 <span class="bp">@</span><span class="o">[</span><span class="n">PRODUCT</span><span class="o">]</span><span class="kn">lemma</span> <span class="n">yoneda_sugar</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">inv_hom</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="n">C</span><span class="o">)(</span><span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="n">C</span><span class="o">)</span> <span class="o">:</span>
     <span class="o">(</span><span class="n">yoneda_sugar</span><span class="bp">.</span><span class="n">prod</span> <span class="n">R</span> <span class="n">A</span> <span class="n">B</span><span class="o">)</span><span class="bp">.</span><span class="n">inv</span> <span class="err">≫</span> <span class="o">(</span><span class="n">yoneda_sugar</span><span class="bp">.</span><span class="n">prod</span> <span class="n">R</span> <span class="n">A</span> <span class="n">B</span><span class="o">)</span><span class="bp">.</span><span class="n">hom</span> <span class="bp">=</span> <span class="mi">𝟙</span> <span class="o">(</span> <span class="n">R</span> <span class="o">[</span><span class="n">A</span><span class="o">]</span>  <span class="err">⨯</span> <span class="n">R</span><span class="o">[</span><span class="n">B</span><span class="o">])</span> <span class="o">:=</span>
     <span class="o">(</span><span class="n">Yoneda_preserve_product</span> <span class="n">R</span> <span class="n">A</span> <span class="n">B</span><span class="o">)</span><span class="bp">.</span><span class="n">inv_hom_id&#39;</span>
 <span class="bp">@</span><span class="o">[</span><span class="n">PRODUCT</span><span class="o">]</span><span class="kn">lemma</span> <span class="n">yoneda_sugar</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">second</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="n">C</span><span class="o">)(</span><span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="n">C</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">yoneda_sugar</span><span class="bp">.</span><span class="n">prod</span> <span class="n">R</span> <span class="n">A</span> <span class="n">B</span><span class="o">)</span><span class="bp">.</span><span class="n">hom</span> <span class="err">≫</span> <span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">snd</span> <span class="bp">=</span> <span class="o">(</span><span class="n">R</span> <span class="bp">&lt;</span> <span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">snd</span> <span class="bp">&gt;</span><span class="o">)</span> <span class="o">:=</span> <span class="n">rfl</span>

<span class="bp">@</span><span class="o">[</span><span class="n">PRODUCT</span><span class="o">]</span><span class="kn">lemma</span> <span class="n">yoneda_sugar</span><span class="bp">.</span><span class="n">id</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="n">C</span><span class="o">)(</span><span class="n">A</span> <span class="o">:</span> <span class="n">C</span><span class="o">)</span> <span class="o">:</span> <span class="n">R</span> <span class="bp">&lt;</span> <span class="mi">𝟙</span> <span class="n">A</span> <span class="bp">&gt;</span> <span class="bp">=</span> <span class="mi">𝟙</span> <span class="o">(</span> <span class="n">R</span> <span class="o">[</span><span class="n">A</span><span class="o">]</span> <span class="o">)</span> <span class="o">:=</span> <span class="k">begin</span>
     <span class="n">funext</span><span class="o">,</span>
     <span class="n">exact</span> <span class="n">comp_id</span> <span class="n">C</span> <span class="n">g</span><span class="o">,</span>
     <span class="c1">-- have T : ((yoneda.map (𝟙 A)).app (op R)) g = (g ≫ (𝟙 A)),</span>
<span class="kn">end</span>
<span class="kn">lemma</span> <span class="n">yoneda_sugar_prod</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="n">C</span><span class="o">)(</span><span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="n">C</span><span class="o">)(</span><span class="n">X</span> <span class="o">:</span><span class="n">C</span><span class="o">)(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="err">⟶</span> <span class="n">A</span><span class="o">)(</span><span class="n">g</span> <span class="o">:</span> <span class="n">X</span> <span class="err">⟶</span> <span class="n">B</span><span class="o">)</span> <span class="o">:</span>
      <span class="n">R</span> <span class="bp">&lt;</span> <span class="o">(</span><span class="n">f</span> <span class="bp">|</span> <span class="n">g</span><span class="o">)</span> <span class="bp">&gt;</span> <span class="err">≫</span> <span class="o">(</span><span class="n">yoneda_sugar</span><span class="bp">.</span><span class="n">prod</span> <span class="n">R</span> <span class="n">A</span> <span class="n">B</span><span class="o">)</span><span class="bp">.</span><span class="n">hom</span>  <span class="bp">=</span>  <span class="o">(</span><span class="n">R</span> <span class="bp">&lt;</span> <span class="n">f</span> <span class="bp">&gt;</span> <span class="bp">|</span> <span class="n">R</span> <span class="bp">&lt;</span> <span class="n">g</span> <span class="bp">&gt;</span> <span class="o">)</span> <span class="o">:=</span>  <span class="c1">-- the  ≫  is  :/</span>
     <span class="k">begin</span>
          <span class="n">PRODUCT_CAT</span><span class="o">,</span>
          <span class="c1">-- rw  yoneda_sugar.prod.hom R A B,</span>
          <span class="c1">-- rw prod.left_composition,</span>
          <span class="n">iterate</span> <span class="mi">2</span> <span class="o">{</span><span class="n">rw</span> <span class="err">←</span> <span class="n">yoneda_sugar</span><span class="bp">.</span><span class="n">composition</span><span class="o">},</span>   <span class="c1">-- rw ← is the problem ?</span>
          <span class="n">rw</span> <span class="n">lem</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">lift_fst</span><span class="o">,</span>
          <span class="n">rw</span> <span class="n">lem</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">lift_snd</span><span class="o">,</span>
     <span class="kn">end</span>
<span class="bp">@</span><span class="o">[</span><span class="n">PRODUCT</span><span class="o">]</span><span class="kn">lemma</span> <span class="n">yoneda_sugar_prod_inv</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="n">C</span><span class="o">)(</span><span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="n">C</span><span class="o">)(</span><span class="n">X</span> <span class="o">:</span><span class="n">C</span><span class="o">)(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="err">⟶</span> <span class="n">A</span><span class="o">)(</span><span class="n">g</span> <span class="o">:</span> <span class="n">X</span> <span class="err">⟶</span> <span class="n">B</span><span class="o">)</span> <span class="o">:</span>
     <span class="n">R</span> <span class="bp">&lt;</span> <span class="o">(</span><span class="n">f</span> <span class="bp">|</span> <span class="n">g</span><span class="o">)</span> <span class="bp">&gt;</span>   <span class="bp">=</span>  <span class="o">(</span><span class="n">R</span> <span class="bp">&lt;</span> <span class="n">f</span> <span class="bp">&gt;</span> <span class="bp">|</span> <span class="n">R</span> <span class="bp">&lt;</span> <span class="n">g</span> <span class="bp">&gt;</span> <span class="o">)</span> <span class="err">≫</span> <span class="o">(</span><span class="n">yoneda_sugar</span><span class="bp">.</span><span class="n">prod</span> <span class="n">R</span> <span class="n">A</span> <span class="n">B</span><span class="o">)</span><span class="bp">.</span><span class="n">inv</span> <span class="o">:=</span>
     <span class="k">begin</span>
          <span class="n">PRODUCT_CAT</span><span class="o">,</span>  <span class="c1">-- noting   HERE PROBLEM the tatic do nothing</span>
          <span class="n">rw</span> <span class="err">←</span> <span class="n">yoneda_sugar_prod</span><span class="o">,</span>
          <span class="n">rw</span> <span class="n">assoc</span><span class="o">,</span>
          <span class="n">rw</span> <span class="n">yoneda_sugar</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">hom_inv</span><span class="o">,</span>
          <span class="n">exact</span> <span class="n">rfl</span><span class="o">,</span>
     <span class="kn">end</span>
<span class="bp">@</span><span class="o">[</span><span class="n">PRODUCT</span><span class="o">]</span><span class="kn">lemma</span>  <span class="n">yoneda_sugar</span><span class="bp">.</span><span class="n">otimes</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="n">C</span><span class="o">){</span><span class="n">Y</span> <span class="n">Z</span> <span class="n">K</span> <span class="o">:</span><span class="n">C</span><span class="o">}(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="err">⟶</span> <span class="n">Y</span> <span class="o">)(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Z</span> <span class="err">⟶</span> <span class="n">K</span><span class="o">)</span> <span class="o">:</span>
 <span class="o">(</span> <span class="n">R</span> <span class="bp">&lt;</span> <span class="o">(</span><span class="n">f</span> <span class="err">⊗</span> <span class="n">g</span><span class="o">)</span> <span class="bp">&gt;</span> <span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">yoneda_sugar</span><span class="bp">.</span><span class="n">prod</span>  <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">)</span><span class="bp">.</span><span class="n">hom</span> <span class="err">≫</span> <span class="o">((</span><span class="n">R</span><span class="bp">&lt;</span><span class="n">f</span><span class="bp">&gt;</span><span class="o">)</span> <span class="err">⊗</span> <span class="n">R</span><span class="bp">&lt;</span><span class="n">g</span><span class="bp">&gt;</span><span class="o">)</span> <span class="err">≫</span> <span class="o">(</span><span class="n">yoneda_sugar</span><span class="bp">.</span><span class="n">prod</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="o">)</span><span class="bp">.</span><span class="n">inv</span> <span class="o">:=</span> <span class="k">begin</span>
     <span class="n">PRODUCT_CAT</span><span class="o">,</span>
     <span class="c1">-- iterate 2 {rw prod.otimes_is_prod},</span>
     <span class="c1">-- rw  yoneda_sugar.prod.hom,</span>
     <span class="c1">-- iterate 1 {rw yoneda_sugar_prod_inv},</span>
     <span class="n">rw</span> <span class="err">←</span> <span class="n">assoc</span><span class="o">,</span>
     <span class="n">rw</span> <span class="n">prod</span><span class="bp">.</span><span class="n">left_composition</span><span class="o">,</span>
     <span class="n">rw</span> <span class="err">←</span> <span class="n">assoc</span><span class="o">,</span>
     <span class="n">rw</span> <span class="n">prod</span><span class="bp">.</span><span class="n">lift_fst</span><span class="o">,</span>
     <span class="n">rw</span> <span class="err">←</span> <span class="n">assoc</span><span class="o">,</span>
     <span class="n">rw</span> <span class="n">prod</span><span class="bp">.</span><span class="n">lift_snd</span><span class="o">,</span>
     <span class="c1">-- rw yoneda_sugar.composition,</span>
     <span class="c1">-- rw yoneda_sugar.composition,</span>
<span class="kn">end</span>
<span class="bp">@</span><span class="o">[</span><span class="n">PRODUCT</span><span class="o">]</span><span class="kn">lemma</span> <span class="n">yonega_sugar</span><span class="bp">.</span><span class="n">one_otimes</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span><span class="n">C</span><span class="o">)(</span><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span><span class="o">:</span> <span class="n">C</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="err">⟶</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:</span>
 <span class="o">(((</span><span class="n">yoneda_sugar</span><span class="bp">.</span><span class="n">prod</span> <span class="n">R</span> <span class="n">Z</span> <span class="n">X</span><span class="o">)</span><span class="bp">.</span><span class="n">inv</span><span class="o">)</span> <span class="err">≫</span> <span class="o">(</span><span class="n">R</span> <span class="bp">&lt;</span><span class="o">(</span><span class="mi">𝟙</span> <span class="n">Z</span> <span class="err">⊗</span> <span class="n">f</span> <span class="o">)</span> <span class="bp">&gt;</span> <span class="o">)</span> <span class="err">≫</span> <span class="o">(</span><span class="n">yoneda_sugar</span><span class="bp">.</span><span class="n">prod</span> <span class="n">R</span> <span class="n">Z</span> <span class="n">Y</span><span class="o">)</span><span class="bp">.</span><span class="n">hom</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="mi">𝟙</span> <span class="o">(</span><span class="n">R</span><span class="o">[</span><span class="n">Z</span><span class="o">])</span> <span class="err">⊗</span> <span class="n">R</span> <span class="bp">&lt;</span> <span class="n">f</span> <span class="bp">&gt;</span><span class="o">)</span> <span class="o">:=</span> <span class="k">begin</span>
     <span class="n">rw</span> <span class="n">yoneda_sugar</span><span class="bp">.</span><span class="n">otimes</span><span class="o">,</span>
     <span class="n">iterate</span> <span class="mi">3</span> <span class="o">{</span><span class="n">rw</span> <span class="err">←</span> <span class="n">assoc</span><span class="o">},</span>
     <span class="n">rw</span> <span class="n">yoneda_sugar</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">inv_hom</span><span class="o">,</span>
     <span class="n">rw</span> <span class="n">id_comp</span><span class="o">,</span>
     <span class="n">rw</span> <span class="n">assoc</span><span class="o">,</span>
     <span class="n">rw</span> <span class="n">yoneda_sugar</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">inv_hom</span><span class="o">,</span>
     <span class="n">rw</span> <span class="err">←</span> <span class="n">yoneda_sugar</span><span class="bp">.</span><span class="n">id</span><span class="o">,</span>
     <span class="n">simp</span><span class="o">,</span>
 <span class="kn">end</span>
<span class="kn">lemma</span> <span class="n">yonega_sugar</span><span class="bp">.</span><span class="n">one_otimes&#39;</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span><span class="n">C</span><span class="o">)(</span><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span><span class="o">:</span> <span class="n">C</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="err">⟶</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:</span>
 <span class="o">(</span> <span class="o">(</span><span class="n">R</span> <span class="bp">&lt;</span><span class="o">(</span><span class="mi">𝟙</span> <span class="n">Z</span> <span class="err">⊗</span> <span class="n">f</span> <span class="o">)</span> <span class="bp">&gt;</span> <span class="o">)</span> <span class="err">≫</span> <span class="o">(</span><span class="n">yoneda_sugar</span><span class="bp">.</span><span class="n">prod</span> <span class="n">R</span> <span class="n">Z</span> <span class="n">Y</span><span class="o">)</span><span class="bp">.</span><span class="n">hom</span><span class="o">)</span> <span class="bp">=</span> <span class="o">((</span><span class="n">yoneda_sugar</span><span class="bp">.</span><span class="n">prod</span> <span class="n">R</span> <span class="n">Z</span> <span class="n">X</span><span class="o">)</span><span class="bp">.</span><span class="n">hom</span><span class="o">)</span> <span class="err">≫</span> <span class="o">(</span><span class="mi">𝟙</span> <span class="o">(</span><span class="n">R</span><span class="o">[</span><span class="n">Z</span><span class="o">])</span> <span class="err">⊗</span> <span class="n">R</span> <span class="bp">&lt;</span> <span class="n">f</span> <span class="bp">&gt;</span><span class="o">)</span> <span class="o">:=</span> <span class="k">begin</span>
     <span class="n">iterate</span> <span class="mi">2</span><span class="o">{</span> <span class="n">rw</span> <span class="n">yoneda_sugar</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">hom</span><span class="o">},</span>
     <span class="n">rw</span> <span class="n">prod</span><span class="bp">.</span><span class="n">left_composition</span><span class="o">,</span>
     <span class="n">iterate</span> <span class="mi">2</span><span class="o">{</span> <span class="n">rw</span> <span class="err">←</span> <span class="n">yoneda_sugar</span><span class="bp">.</span><span class="n">composition</span><span class="o">},</span>
     <span class="n">rw</span> <span class="n">prod</span><span class="bp">.</span><span class="n">map_first</span><span class="o">,</span>
     <span class="n">rw</span> <span class="n">prod</span><span class="bp">.</span><span class="n">map_second</span><span class="o">,</span>
     <span class="n">rw</span> <span class="n">comp_id</span><span class="o">,</span>
     <span class="n">rw</span> <span class="n">prod</span><span class="bp">.</span><span class="n">otimes_is_prod</span><span class="o">,</span><span class="n">rw</span> <span class="n">prod</span><span class="bp">.</span><span class="n">left_composition</span><span class="o">,</span><span class="n">rw</span> <span class="err">←</span> <span class="n">assoc</span><span class="o">,</span>
     <span class="n">rw</span> <span class="n">prod</span><span class="bp">.</span><span class="n">lift_fst</span><span class="o">,</span><span class="n">rw</span> <span class="err">←</span>  <span class="n">assoc</span><span class="o">,</span><span class="n">rw</span> <span class="n">prod</span><span class="bp">.</span><span class="n">lift_snd</span><span class="o">,</span><span class="n">rw</span> <span class="n">comp_id</span><span class="o">,</span>
     <span class="n">rw</span> <span class="n">yoneda_sugar</span><span class="bp">.</span><span class="n">composition</span><span class="o">,</span>
 <span class="kn">end</span>
</pre></div>



<a name="193767959"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193767959" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193767959">(Apr 13 2020 at 12:42)</a>:</h4>
<p>I think you're right about <code>\l assoc</code>. If you run your tactic then the goal turns into precisely the step where you want to rewrite associativity backwards. I think <span class="user-mention" data-user-id="110087">@Scott Morrison</span> will have some ideas. The problem is that you cannot just tell <code>simp</code> to try <code>rw assoc</code> and <code>rw \l assoc</code> because then it will loop. Maybe this is something to do with his <code>rewrite_search</code> tactic? I think that this is not quite finished, but I don't know if he has already written enough stuff to make it possible to do what you want to do.</p>



<a name="193768277"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193768277" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193768277">(Apr 13 2020 at 12:46)</a>:</h4>
<p>I understand  <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span>  : if we tell <code> rw assoc </code> and <code>rw  \l assoc </code> i saw the problem !!! lean don't unterstand i what direction to go !</p>



<a name="193768316"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193768316" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193768316">(Apr 13 2020 at 12:47)</a>:</h4>
<p>tidy work for some lemma !</p>



<a name="193768427"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193768427" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193768427">(Apr 13 2020 at 12:48)</a>:</h4>
<p>In fact the tatic i need is something like  : ' rewrite up to assoc ' !</p>



<a name="193768567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193768567" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193768567">(Apr 13 2020 at 12:50)</a>:</h4>
<p>This is why I tagged Scott -- he will know the state of the art.</p>



<a name="193769854"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193769854" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Markus Himmel <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193769854">(Apr 13 2020 at 13:05)</a>:</h4>
<p>Maybe the <code>reassoc</code> attribute is already enough. See <a href="https://leanprover-community.github.io/mathlib_docs/tactic/reassoc_axiom.html" title="https://leanprover-community.github.io/mathlib_docs/tactic/reassoc_axiom.html">here</a>. There is also a <code>reassoc_of</code> tactic for use together with <code>rw</code> but I don't know how well it works. I don't think it is actually used anywhere in mathlib.</p>



<a name="193770387"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193770387" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193770387">(Apr 13 2020 at 13:11)</a>:</h4>
<p><span class="user-mention" data-user-id="270476">@orlando</span> here is how <code>simp</code> proves (a+b)+(c+d)=d+((c+b)+a): first it applies associativity as many times as possible, to get a+(b+(c+d))=d+(c+(b+a)), and then it wants to swap around variables. Clearly you can swap c and d in a+(b+(c+d)) using <code>add_comm</code>. But how to swap <code>a</code> and <code>b</code>? The trick is a lemma called <code>add_left_comm</code> which says <code>a+(b+c)=b+(a+c)</code>. You can prove a+(b+(c+d))=d+(c+(b+a)) using just add_left_comm and add_comm, because these will let you swap any two adjacent variables, so you can run some kind of sorting function.</p>



<a name="193770484"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193770484" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193770484">(Apr 13 2020 at 13:12)</a>:</h4>
<p><code>reassoc</code> is the same kind of trick. It gives you a lemma which you can apply without having to use \l assoc.</p>



<a name="193770602"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193770602" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193770602">(Apr 13 2020 at 13:14)</a>:</h4>
<p>Maybe you should look through the category theory library and see what kind of lemmas Scott and others are tagging with <code>reassoc</code>.</p>



<a name="193770626"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193770626" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193770626">(Apr 13 2020 at 13:14)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">set_option</span> <span class="n">trace</span><span class="bp">.</span><span class="n">simplify</span><span class="bp">.</span><span class="n">rewrite</span> <span class="n">true</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">a</span><span class="bp">+</span><span class="n">b</span><span class="o">)</span><span class="bp">+</span><span class="o">(</span><span class="n">c</span><span class="bp">+</span><span class="n">d</span><span class="o">)</span><span class="bp">=</span><span class="n">d</span><span class="bp">+</span><span class="o">((</span><span class="n">c</span><span class="bp">+</span><span class="n">b</span><span class="o">)</span><span class="bp">+</span><span class="n">a</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">add_comm</span><span class="o">,</span> <span class="n">add_left_comm</span><span class="o">]</span>
<span class="c">/-</span><span class="cm"></span>
<span class="cm">0. [simplify.rewrite] [add_left_comm]: a + b + (c + d) ==&gt; c + (a + b + d)</span>
<span class="cm">0. [simplify.rewrite] [add_comm]: a + b + d ==&gt; d + (a + b)</span>
<span class="cm">0. [simplify.rewrite] [add_left_comm]: d + (a + b) ==&gt; a + (d + b)</span>
<span class="cm">0. [simplify.rewrite] [add_comm]: d + b ==&gt; b + d</span>
<span class="cm">0. [simplify.rewrite] [add_left_comm]: c + (a + (b + d)) ==&gt; a + (c + (b + d))</span>
<span class="cm">0. [simplify.rewrite] [add_left_comm]: c + (b + d) ==&gt; b + (c + d)</span>
<span class="cm">0. [simplify.rewrite] [add_comm]: c + b ==&gt; b + c</span>
<span class="cm">0. [simplify.rewrite] [add_comm]: b + c + a ==&gt; a + (b + c)</span>
<span class="cm">0. [simplify.rewrite] [add_left_comm]: d + (a + (b + c)) ==&gt; a + (d + (b + c))</span>
<span class="cm">0. [simplify.rewrite] [add_left_comm]: d + (b + c) ==&gt; b + (d + c)</span>
<span class="cm">0. [simplify.rewrite] [add_comm]: d + c ==&gt; c + d</span>
<span class="cm">0. [simplify.rewrite] [eq_self_iff_true]: a + (b + (c + d)) = a + (b + (c + d)) ==&gt; true</span>
<span class="cm">-/</span>
</pre></div>



<a name="193770735"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193770735" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193770735">(Apr 13 2020 at 13:16)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">set_option</span> <span class="n">trace</span><span class="bp">.</span><span class="n">simplify</span><span class="bp">.</span><span class="n">rewrite</span> <span class="n">true</span>
<span class="kn">example</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="n">d</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">a</span><span class="bp">+</span><span class="n">b</span><span class="o">)</span><span class="bp">+</span><span class="o">(</span><span class="n">c</span><span class="bp">+</span><span class="n">d</span><span class="o">)</span><span class="bp">=</span><span class="n">d</span><span class="bp">+</span><span class="o">((</span><span class="n">c</span><span class="bp">+</span><span class="n">b</span><span class="o">)</span><span class="bp">+</span><span class="n">a</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">simp</span> <span class="o">[</span><span class="n">add_comm</span><span class="o">,</span> <span class="n">add_left_comm</span><span class="o">,</span> <span class="n">add_assoc</span><span class="o">]</span>
<span class="c">/-</span><span class="cm"></span>
<span class="cm">0. [simplify.rewrite] [add_assoc]: a + b + (c + d) ==&gt; a + (b + (c + d))</span>
<span class="cm">0. [simplify.rewrite] [add_comm]: c + b ==&gt; b + c</span>
<span class="cm">0. [simplify.rewrite] [add_assoc]: b + c + a ==&gt; b + (c + a)</span>
<span class="cm">0. [simplify.rewrite] [add_comm]: c + a ==&gt; a + c</span>
<span class="cm">0. [simplify.rewrite] [add_left_comm]: b + (a + c) ==&gt; a + (b + c)</span>
<span class="cm">0. [simplify.rewrite] [add_left_comm]: d + (a + (b + c)) ==&gt; a + (d + (b + c))</span>
<span class="cm">0. [simplify.rewrite] [add_left_comm]: d + (b + c) ==&gt; b + (d + c)</span>
<span class="cm">0. [simplify.rewrite] [add_comm]: d + c ==&gt; c + d</span>
<span class="cm">0. [simplify.rewrite] [eq_self_iff_true]: a + (b + (c + d)) = a + (b + (c + d)) ==&gt; true</span>
<span class="cm">-/</span>
</pre></div>



<a name="193770959"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193770959" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193770959">(Apr 13 2020 at 13:19)</a>:</h4>
<p>In fact orlando, we see from <a href="https://github.com/leanprover-community/mathlib/pull/2396" title="https://github.com/leanprover-community/mathlib/pull/2396">my PR</a> that Scott tagged <code>prod.lift_fst</code> with <code>reassoc</code> and it this creates <em>precisely</em> the corresponding lemma which would finish your proof without the \l assoc.</p>



<a name="193771016"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193771016" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193771016">(Apr 13 2020 at 13:20)</a>:</h4>
<p>Ohhhh  <code> set_option trace.simplify.rewrite true </code> is very Gooooood !</p>



<a name="193771138"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193771138" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193771138">(Apr 13 2020 at 13:22)</a>:</h4>
<p>Hey, I got it working :-)</p>



<a name="193771144"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193771144" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193771144">(Apr 13 2020 at 13:22)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="bp">@</span><span class="o">[</span><span class="n">PRODUCT</span><span class="o">,</span> <span class="n">reassoc</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">prod</span><span class="bp">.</span><span class="n">lift_fst</span> <span class="o">{</span><span class="n">Y</span> <span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="n">C</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">Y</span> <span class="err">⟶</span> <span class="n">A</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="err">⟶</span> <span class="n">B</span><span class="o">)</span> <span class="o">:</span> <span class="n">prod</span><span class="bp">.</span><span class="n">lift</span> <span class="n">f</span> <span class="n">g</span> <span class="err">≫</span> <span class="n">category_theory</span><span class="bp">.</span><span class="n">limits</span><span class="bp">.</span><span class="n">prod</span><span class="bp">.</span><span class="n">fst</span> <span class="bp">=</span> <span class="n">f</span> <span class="o">:=</span>
<span class="n">limit</span><span class="bp">.</span><span class="n">lift_π</span> <span class="o">(</span><span class="n">binary_fan</span><span class="bp">.</span><span class="n">mk</span> <span class="n">f</span> <span class="n">g</span><span class="o">)</span> <span class="bp">_</span>

<span class="n">attribute</span> <span class="o">[</span><span class="n">PRODUCT</span><span class="o">]</span> <span class="n">prod</span><span class="bp">.</span><span class="n">lift_fst_assoc</span>
</pre></div>



<a name="193771158"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193771158" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193771158">(Apr 13 2020 at 13:22)</a>:</h4>
<p><code>reassoc</code> creates a new lemma <code>prod.lift_fst_assoc</code> and then I also tag it with <code>PRODUCT</code></p>



<a name="193771198"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193771198" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193771198">(Apr 13 2020 at 13:23)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="bp">@</span><span class="o">[</span><span class="n">PRODUCT</span><span class="o">]</span><span class="kn">lemma</span> <span class="n">destruction</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="n">C</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span>  <span class="n">Y</span> <span class="err">⟶</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">X</span> <span class="err">⟶</span> <span class="n">Z</span> <span class="o">)</span> <span class="o">:</span>
     <span class="o">(</span><span class="n">f</span> <span class="bp">|</span> <span class="mi">𝟙</span> <span class="n">Y</span><span class="o">)</span> <span class="err">≫</span> <span class="o">(</span><span class="n">g</span> <span class="err">⊗</span> <span class="o">(</span><span class="mi">𝟙</span> <span class="n">Y</span><span class="o">))</span> <span class="bp">=</span> <span class="o">(</span><span class="n">f</span> <span class="err">≫</span> <span class="n">g</span> <span class="bp">|</span> <span class="mi">𝟙</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:=</span> <span class="k">begin</span>
     <span class="n">apply</span> <span class="n">prod</span><span class="bp">.</span><span class="n">hom_ext</span><span class="o">,</span>
       <span class="n">PRODUCT_CAT</span><span class="o">,</span>
</pre></div>


<p>closes the first goal!</p>



<a name="193771307"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193771307" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193771307">(Apr 13 2020 at 13:24)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="bp">@</span><span class="o">[</span><span class="n">PRODUCT</span><span class="o">]</span><span class="kn">lemma</span> <span class="n">destruction</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="n">C</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span>  <span class="n">Y</span> <span class="err">⟶</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">X</span> <span class="err">⟶</span> <span class="n">Z</span> <span class="o">)</span> <span class="o">:</span>
     <span class="o">(</span><span class="n">f</span> <span class="bp">|</span> <span class="mi">𝟙</span> <span class="n">Y</span><span class="o">)</span> <span class="err">≫</span> <span class="o">(</span><span class="n">g</span> <span class="err">⊗</span> <span class="o">(</span><span class="mi">𝟙</span> <span class="n">Y</span><span class="o">))</span> <span class="bp">=</span> <span class="o">(</span><span class="n">f</span> <span class="err">≫</span> <span class="n">g</span> <span class="bp">|</span> <span class="mi">𝟙</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:=</span> <span class="k">begin</span>
     <span class="n">apply</span> <span class="n">prod</span><span class="bp">.</span><span class="n">hom_ext</span><span class="bp">;</span><span class="n">PRODUCT_CAT</span>
<span class="kn">end</span>
</pre></div>



<a name="193771324"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193771324" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193771324">(Apr 13 2020 at 13:24)</a>:</h4>
<p><code>;</code> means "apply the next tactic to all of the goals"</p>



<a name="193771562"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193771562" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193771562">(Apr 13 2020 at 13:27)</a>:</h4>
<p>ohhh that nice <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span></p>



<a name="193772273"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193772273" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193772273">(Apr 13 2020 at 13:37)</a>:</h4>
<p><span class="user-mention silent" data-user-id="270476">orlando</span> <a href="#narrow/stream/116395-maths/topic/category/near/193771016" title="#narrow/stream/116395-maths/topic/category/near/193771016">said</a>:</p>
<blockquote>
<p>Ohhhh  <code> set_option trace.simplify.rewrite true </code> is very Gooooood !</p>
</blockquote>
<p>This messages suggests you should read <a href="https://github.com/leanprover-community/mathlib/blob/master/docs/extras/simp.md" title="https://github.com/leanprover-community/mathlib/blob/master/docs/extras/simp.md">https://github.com/leanprover-community/mathlib/blob/master/docs/extras/simp.md</a> If you still want to learn more about simp then you can read the relevant sections in <a href="https://lean-forward.github.io/mathlib-maintenance/paper.pdf" title="https://lean-forward.github.io/mathlib-maintenance/paper.pdf">https://lean-forward.github.io/mathlib-maintenance/paper.pdf</a></p>



<a name="193780597"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193780597" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193780597">(Apr 13 2020 at 15:02)</a>:</h4>
<p>You might also like to use Scott's <code>slice_lhs</code> or <code>slice_rhs</code> tactics</p>



<a name="193789155"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193789155" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193789155">(Apr 13 2020 at 16:19)</a>:</h4>
<p>hum a question : what is this error ? </p>
<div class="codehilite"><pre><span></span><span class="n">excessive</span> <span class="n">memory</span> <span class="n">consumption</span> <span class="n">detected</span> <span class="n">at</span> <span class="err">&#39;</span><span class="n">parse_notation&#39;</span> <span class="o">(</span><span class="n">potential</span> <span class="n">solution</span><span class="o">:</span> <span class="n">increase</span> <span class="n">memory</span> <span class="n">consumption</span> <span class="n">threshold</span><span class="o">)</span>
</pre></div>



<a name="193789324"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193789324" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193789324">(Apr 13 2020 at 16:20)</a>:</h4>
<p>It means you made a typo but instead of telling you the true problem, Lean just got confused.</p>



<a name="193789333"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193789333" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193789333">(Apr 13 2020 at 16:20)</a>:</h4>
<p>I have  just import the previous file in a other file.</p>



<a name="193789875"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193789875" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193789875">(Apr 13 2020 at 16:26)</a>:</h4>
<p>hmm</p>



<a name="193789889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193789889" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193789889">(Apr 13 2020 at 16:26)</a>:</h4>
<p>Make a little project and push it to github?</p>



<a name="193790492"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193790492" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193790492">(Apr 13 2020 at 16:32)</a>:</h4>
<p>i don't know how use github <span aria-label="confused" class="emoji emoji-1f615" role="img" title="confused">:confused:</span></p>



<a name="193790670"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193790670" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193790670">(Apr 13 2020 at 16:33)</a>:</h4>
<p>but i thinck it's because i save my previous file in the directory of mathlib, sorry, my question is not well asked</p>



<a name="193794260"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193794260" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193794260">(Apr 13 2020 at 17:08)</a>:</h4>
<p>Hum i try with <a href="https://github.com/Or7ando/lean/tree/master/.github/workflows" title="https://github.com/Or7ando/lean/tree/master/.github/workflows">here</a> it's ok ?</p>



<a name="193794561"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193794561" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193794561">(Apr 13 2020 at 17:10)</a>:</h4>
<p>in the file <code> G </code> i import the file <code> groupk </code>  and the error is excessive memory ... perhaps something stupid <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="193794770"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193794770" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193794770">(Apr 13 2020 at 17:12)</a>:</h4>
<p>The problem is not the import. Put <code>#exit</code> just before <code>namespace GROUP_OBJ</code> and everything is OK.</p>



<a name="193794861"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193794861" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193794861">(Apr 13 2020 at 17:13)</a>:</h4>
<p>The problem is the <code>group_obj</code> structure</p>



<a name="193795674"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193795674" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193795674">(Apr 13 2020 at 17:20)</a>:</h4>
<p>My guess is that the issue is maybe with the notation <code>[ ... ]</code> which you define in <code>groupk</code>. Lean doesn't seem to like the definition of group_obj. The notation <code>[...]</code> is already used to mean something else. I think Lean thinks <code>[𝒞 : category.{v} C]</code> is <code>R</code> and <code>has_binary_products.{v} C</code> is <code>A</code>.</p>



<a name="193796389"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193796389" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193796389">(Apr 13 2020 at 17:24)</a>:</h4>
<p>Not a good idea this notation <span aria-label="skull and crossbones" class="emoji emoji-2620" role="img" title="skull and crossbones">:skull_and_crossbones:</span></p>



<a name="193798047"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193798047" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193798047">(Apr 13 2020 at 17:38)</a>:</h4>
<p>Well, they use <code>[R]</code> in the definition of module homomorphism: <a href="https://github.com/leanprover-community/mathlib/blob/51f7319b52be84cae60473156666a022cf60043b/src/algebra/module.lean#L213" title="https://github.com/leanprover-community/mathlib/blob/51f7319b52be84cae60473156666a022cf60043b/src/algebra/module.lean#L213">see here</a></p>



<a name="193798067"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193798067" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193798067">(Apr 13 2020 at 17:38)</a>:</h4>
<p>But somehow they are more careful. I don't know anything about parsing.</p>



<a name="193798129"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193798129" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193798129">(Apr 13 2020 at 17:39)</a>:</h4>
<p>Maybe the point is that they have something before the <code>[</code></p>



<a name="193798454"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193798454" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193798454">(Apr 13 2020 at 17:42)</a>:</h4>
<p>Okay Kevin, so it's very dangerous to play with notation !</p>



<a name="193798543"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193798543" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193798543">(Apr 13 2020 at 17:43)</a>:</h4>
<p>thx !</p>



<a name="193798573"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193798573" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193798573">(Apr 13 2020 at 17:43)</a>:</h4>
<p>In Lean 4 notation will be several orders of magnitude more powerful</p>



<a name="193805652"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193805652" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193805652">(Apr 13 2020 at 18:46)</a>:</h4>
<p>this is really beautiful  ! quasi automatic proof : i'm really impress ! i</p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">prod</span><span class="bp">.</span><span class="n">map_eq</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="n">W</span> <span class="o">:</span> <span class="n">C</span><span class="o">}(</span><span class="n">f1</span> <span class="n">f2</span>  <span class="o">:</span> <span class="n">X</span> <span class="err">⟶</span> <span class="n">Y</span><span class="o">)(</span><span class="n">g1</span> <span class="n">g2</span>  <span class="o">:</span> <span class="n">Z</span> <span class="err">⟶</span> <span class="n">W</span><span class="o">)</span> <span class="o">:</span>
 <span class="o">((</span><span class="n">π1</span> <span class="o">:</span> <span class="n">X</span> <span class="err">⨯</span> <span class="n">Z</span> <span class="err">⟶</span> <span class="n">X</span><span class="o">)</span> <span class="err">≫</span> <span class="n">f1</span> <span class="bp">=</span> <span class="o">(</span><span class="n">π1</span> <span class="o">:</span> <span class="n">X</span> <span class="err">⨯</span> <span class="n">Z</span> <span class="err">⟶</span> <span class="n">X</span><span class="o">)</span>  <span class="err">≫</span> <span class="n">f2</span><span class="o">)</span> <span class="bp">→</span>
 <span class="o">((</span><span class="n">π2</span> <span class="o">:</span> <span class="n">X</span> <span class="err">⨯</span> <span class="n">Z</span> <span class="err">⟶</span> <span class="n">Z</span><span class="o">)</span> <span class="err">≫</span> <span class="n">g1</span> <span class="bp">=</span> <span class="o">(</span><span class="n">π2</span> <span class="o">:</span> <span class="n">X</span> <span class="err">⨯</span> <span class="n">Z</span> <span class="err">⟶</span> <span class="n">Z</span><span class="o">)</span>  <span class="err">≫</span> <span class="n">g2</span><span class="o">)</span> <span class="bp">→</span> <span class="o">((</span><span class="n">f1</span> <span class="err">⊗</span> <span class="n">g1</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">f2</span> <span class="err">⊗</span> <span class="n">g2</span><span class="o">))</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">certif1</span> <span class="n">certif2</span><span class="o">,</span> <span class="k">begin</span>
    <span class="n">PRODUCT_CAT</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">certif1</span><span class="o">,</span> <span class="n">rw</span> <span class="n">certif2</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>



<a name="193805727"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193805727" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193805727">(Apr 13 2020 at 18:47)</a>:</h4>
<p>i love this Game <span aria-label="yum" class="emoji emoji-1f60b" role="img" title="yum">:yum:</span></p>



<a name="193806743"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193806743" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193806743">(Apr 13 2020 at 18:54)</a>:</h4>
<p><span class="user-mention silent" data-user-id="246273">Bhavik Mehta</span> <a href="#narrow/stream/116395-maths/topic/category/near/193780597" title="#narrow/stream/116395-maths/topic/category/near/193780597">said</a>:</p>
<blockquote>
<p>You might also like to use Scott's <code>slice_lhs</code> or <code>slice_rhs</code> tactics</p>
</blockquote>
<p>Do you have an exemple of what the tatic do  ?</p>



<a name="193852541"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193852541" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193852541">(Apr 14 2020 at 05:47)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/tactic/slice.html#tactic.interactive.slice_lhs" title="https://leanprover-community.github.io/mathlib_docs/tactic/slice.html#tactic.interactive.slice_lhs">https://leanprover-community.github.io/mathlib_docs/tactic/slice.html#tactic.interactive.slice_lhs</a></p>



<a name="193852548"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193852548" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193852548">(Apr 14 2020 at 05:47)</a>:</h4>
<p>(They've been observed to have some bugs: please report them if you find some!)</p>



<a name="193852603"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193852603" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193852603">(Apr 14 2020 at 05:48)</a>:</h4>
<p>Essentially, <code>slice_lhs 2 4 { ... }</code> will reassociate as necessary, and show you just the 2nd, 3rd, and 4th morphisms in a long composite. You can then rewrite or simplifying just those, and when you exit the <code>{ ... }</code> it will put everything back together again.</p>



<a name="193852622"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193852622" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193852622">(Apr 14 2020 at 05:49)</a>:</h4>
<p>This, in combination with the <code>@[reassoc]</code> tags on all your simp lemmas, takes away a fair chunk of the pain of working with associativity in categories.</p>



<a name="193852839"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193852839" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193852839">(Apr 14 2020 at 05:54)</a>:</h4>
<p>I didn't know those existed – we should add them to the main tactic docs and <code>tactic.default</code>.</p>



<a name="193853818"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193853818" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193853818">(Apr 14 2020 at 06:14)</a>:</h4>
<p>Ideally they would work with any associative structure, not just a category! :-) But they don't.</p>



<a name="193996336"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193996336" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193996336">(Apr 15 2020 at 08:04)</a>:</h4>
<p>Hello <span class="user-mention" data-user-id="110087">@Scott Morrison</span>  : <br>
I see the lemma like <code> prod.lift_fst </code> are in the library, thx <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span> </p>
<p>A question :  is it normal that you force to mention the category for the product ? </p>
<div class="codehilite"><pre><span></span><span class="kn">example</span>  <span class="o">{</span><span class="n">Y</span> <span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="n">C</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">Y</span> <span class="err">⟶</span> <span class="n">A</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="err">⟶</span> <span class="n">B</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span> <span class="n">f</span> <span class="bp">|</span> <span class="n">g</span><span class="o">)</span> <span class="err">≫</span> <span class="n">π1</span> <span class="bp">=</span> <span class="n">f</span>  <span class="o">:=</span>  <span class="n">prod</span><span class="bp">.</span><span class="n">lift_fst</span> <span class="n">C</span> <span class="n">f</span> <span class="n">g</span>
</pre></div>


<p>I can't just write <code> prod.lift_fst f g </code>  : if i understand <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi></mrow><annotation encoding="application/x-tex">f</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span></span></span></span> know <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span></span></span></span> and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span></span></span></span> know <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi></mrow><annotation encoding="application/x-tex">C</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span></span></span></span> so it's ok for implicit parameter ?</p>



<a name="193996973"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193996973" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Markus Himmel <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193996973">(Apr 15 2020 at 08:11)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/commit/ff4122249759c72222db47ae529d68eac1017089" title="https://github.com/leanprover-community/mathlib/commit/ff4122249759c72222db47ae529d68eac1017089">I have already fixed this</a> and it will probably land in mathlib soon.</p>



<a name="193997237"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193997237" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193997237">(Apr 15 2020 at 08:13)</a>:</h4>
<p>Sorry orlando, that was probably my fault. I made the PR when we were talking about this the other day</p>



<a name="193997587"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193997587" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193997587">(Apr 15 2020 at 08:17)</a>:</h4>
<p>Kevin it's cool because I'm starting to understand a little bit about how lean works <span aria-label="grinning face with smiling eyes" class="emoji emoji-1f601" role="img" title="grinning face with smiling eyes">:grinning_face_with_smiling_eyes:</span></p>



<a name="193997675"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/category/near/193997675" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> orlando <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/category.html#193997675">(Apr 15 2020 at 08:18)</a>:</h4>
<p>Scott : The slice tatics is verrrrrrry cooooooool   <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span> <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>