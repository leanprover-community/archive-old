---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html">(comm_)semiring: examples?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="223054317"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223054317" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223054317">(Jan 17 2021 at 17:42)</a>:</h4>
<p>Dear All,</p>
<p>I do not think that I ever really encountered <code>semiring</code>s in math, until I started using Lean.  Of course, I had seen the "semiring" of polynomials with coefficients in <code>ℕ</code>, and a couple of times I used something about the semiring of sums of squares in an ordered ring.</p>
<p>I want to point out that I am sold on the idea of using <code>semiring</code>s (likely <code>comm_semirings</code>), but I would like to have a good supply of examples that are not "essentially <code>comm_rings</code>".</p>
<p>My question: what are good examples of <code>comm_semiring</code> that are not <code>sub_semiring</code>s of a <code>comm_ring</code>?  Besides <code>boolean_algebra</code>s with <code>inf</code> and <code>sup</code> (in either order) as addition and multiplication, I do not have many more examples.</p>
<p>The underlying goal that I am trying to achieve is to see how much of commutative algebra can be done by working with <code>(comm_)semiring</code>s alone.  For this, I would like to have access to examples that would help suggesting results and disproving statements.</p>
<p>Thanks!</p>



<a name="223054360"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223054360" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223054360">(Jan 17 2021 at 17:43)</a>:</h4>
<p>The tropical semiring?<br>
<a href="https://en.wikipedia.org/wiki/Tropical_semiring">https://en.wikipedia.org/wiki/Tropical_semiring</a></p>



<a name="223054653"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223054653" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223054653">(Jan 17 2021 at 17:50)</a>:</h4>
<p>That's a very good suggestion!  I had not thought of that!  Thanks!</p>



<a name="223054850"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223054850" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223054850">(Jan 17 2021 at 17:55)</a>:</h4>
<blockquote>
<p>The underlying goal that I am trying to achieve is to see how much of commutative algebra can be done by working with (comm_)semirings alone. For this, I would like to have access to examples that would help suggesting results and disproving statements.</p>
</blockquote>
<p>Rather than looking for examples, an easy way to achieve this is to just pretend that semirings are rings until you get in trouble. It is surprisingly common for mathematical textbooks to make stronger assumptions than necessary for no reason besides making it easier to think about the subject. Just like how every vector space looks like R^2 and every topological space looks like a picture of a cloud, just ignore the full range of examples and use the nice ones to guide proof sketches.</p>



<a name="223054998"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223054998" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223054998">(Jan 17 2021 at 17:59)</a>:</h4>
<p>You can get very far doing commutative algebra with semirings. You can even "do" algebraic geometry.</p>



<a name="223055010"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223055010" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223055010">(Jan 17 2021 at 17:59)</a>:</h4>
<p>Thank you Mario!  I completely agree with you on unnecessary assumptions in maths: I find this really inspiring about Lean (and formalization in general).</p>
<p>I have also been playing in my head with trying to find a statement that "requires" a <code>comm_ring</code> and so far I have mostly failed.  Of course, there are some tautological statements that "need" existence of opposites, but not much besides almost tautologies.</p>
<p>The reason for asking for examples, though, is to see if there is really a wealth of examples to justify the effort of reproving known statements.  Thus, before embarking on this journey, I would like to at least have a few well-chosen examples as justification.</p>



<a name="223055011"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223055011" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223055011">(Jan 17 2021 at 17:59)</a>:</h4>
<p>The main thing that you can't do in a semiring is to cancel additions. This means that you can have things like an add that saturates, for example <code>ennreal</code> or <code>fin n</code></p>



<a name="223055109"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223055109" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223055109">(Jan 17 2021 at 18:02)</a>:</h4>
<p>Adam, this is exactly what I would like to understand: how much of what I know of algebraic geometry is really relying on what the ground (<code>semi</code>)-ring is.  I always thought that making assumptions on the base ring such as <code>field</code>, <code>integral_domain</code>, <code>reduced</code> were often just safety nets that never really played a role.  Now I am trying to see whether even the existence of opposites is actually ever a serious issue...</p>



<a name="223055151"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223055151" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223055151">(Jan 17 2021 at 18:02)</a>:</h4>
<p>I don't think <code>fin n</code>s add saturates, I think it would be nice if it did though. Or maybe that's what you're saying too <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="223055158"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223055158" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223055158">(Jan 17 2021 at 18:02)</a>:</h4>
<p>no but you get the idea</p>



<a name="223055169"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223055169" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223055169">(Jan 17 2021 at 18:02)</a>:</h4>
<p>anyway you probably want <code>fin (n+1)</code> for that</p>



<a name="223055256"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223055256" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223055256">(Jan 17 2021 at 18:04)</a>:</h4>
<p>I like the ideas of <code>ennreal</code> (which, if I understand correctly what it is, is similar to the sums of squares of \R?).</p>
<p>I will take a look at what is the addition on <code>fin n</code>!</p>



<a name="223055288"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223055288" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223055288">(Jan 17 2021 at 18:06)</a>:</h4>
<p><code>ennreal</code> is the extended nonnegative reals, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>0</mn><mo separator="true">,</mo><mi mathvariant="normal">∞</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[0,\infty]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">∞</span><span class="mclose">]</span></span></span></span></p>



<a name="223055356"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223055356" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223055356">(Jan 17 2021 at 18:07)</a>:</h4>
<p>the addition on fin n is broken but the one I'm talking about is <code>(a + b : fin (n+1)) := min(n, a + b)</code></p>



<a name="223055364"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223055364" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223055364">(Jan 17 2021 at 18:07)</a>:</h4>
<p>Ah, I see, it also has an \infty!  Thanks!</p>



<a name="223055370"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223055370" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223055370">(Jan 17 2021 at 18:07)</a>:</h4>
<p>the nonnegative reals are also a semiring but I think you already mentioned it as a boring example</p>



<a name="223055411"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223055411" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223055411">(Jan 17 2021 at 18:08)</a>:</h4>
<p>Ok, thanks: also <code>fin (n+1)</code> is a good example!</p>



<a name="223055420"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223055420" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223055420">(Jan 17 2021 at 18:08)</a>:</h4>
<p>Well, not boring, just not "exotic" enough...</p>



<a name="223055425"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223055425" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223055425">(Jan 17 2021 at 18:08)</a>:</h4>
<p>One nice exercise is to classify all semiring quotients of nat</p>



<a name="223055442"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223055442" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223055442">(Jan 17 2021 at 18:09)</a>:</h4>
<p>Adam: is your question equivalent to "classify cyclic semirings?"?</p>



<a name="223055452"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223055452" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223055452">(Jan 17 2021 at 18:09)</a>:</h4>
<p>I don't know what cyclic semirings are...</p>



<a name="223055499"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223055499" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223055499">(Jan 17 2021 at 18:10)</a>:</h4>
<p>generated by a single element...  ah, there is zero also!</p>



<a name="223055502"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223055502" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223055502">(Jan 17 2021 at 18:10)</a>:</h4>
<p>What are semiring quotients defined as?</p>



<a name="223055504"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223055504" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223055504">(Jan 17 2021 at 18:10)</a>:</h4>
<p>There's also some work by Borger et al about Witt vectors in the context of semirings</p>



<a name="223055513"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223055513" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223055513">(Jan 17 2021 at 18:10)</a>:</h4>
<p>Semiring quotients of N are semirings with a surjective semiring hom from N</p>



<a name="223055534"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223055534" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223055534">(Jan 17 2021 at 18:11)</a>:</h4>
<p>Ok, so, if I understand correctly, a semiring quotient of N is a semiring that contains 0 and is generated by a (possibly extra) element, right?</p>



<a name="223055535"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223055535" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223055535">(Jan 17 2021 at 18:11)</a>:</h4>
<p><a href="https://arxiv.org/abs/1310.3013">https://arxiv.org/abs/1310.3013</a></p>



<a name="223055572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223055572" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223055572">(Jan 17 2021 at 18:12)</a>:</h4>
<p>The extra element has to be the one</p>



<a name="223055575"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223055575" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223055575">(Jan 17 2021 at 18:12)</a>:</h4>
<p>I guess that semirings contain zero by definition, though...  so it is simply a semiring generated by a single element (which could be zero itself), right?</p>



<a name="223055576"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223055576" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223055576">(Jan 17 2021 at 18:12)</a>:</h4>
<p>semiring homs fix both 0 and 1</p>



<a name="223055586"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223055586" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223055586">(Jan 17 2021 at 18:12)</a>:</h4>
<p>zero and one are different in a semiring?  I thought that (0) was a semiring?</p>



<a name="223055588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223055588" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223055588">(Jan 17 2021 at 18:13)</a>:</h4>
<p>they aren't necessarily different</p>



<a name="223055593"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223055593" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223055593">(Jan 17 2021 at 18:13)</a>:</h4>
<p>but 0 has to act like 0 and 1 like 1, so they can only coincide in the zero ring</p>



<a name="223055594"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223055594" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223055594">(Jan 17 2021 at 18:13)</a>:</h4>
<p>ok, so we either have the zero semiring or a ring with o and everything is generated by the non-zero element 1</p>



<a name="223055650"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223055650" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223055650">(Jan 17 2021 at 18:14)</a>:</h4>
<p>So either the semiring is N or it is finite, and n.1 = m, with m \leq n, I would say...</p>



<a name="223055675"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223055675" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223055675">(Jan 17 2021 at 18:15)</a>:</h4>
<p>I am not sure whether all choices of <code>0 \leq m \leq n</code> are allowed, but it seems like it...</p>



<a name="223055731"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223055731" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223055731">(Jan 17 2021 at 18:16)</a>:</h4>
<p>this is a great exercise to practice-formalize in Lean: thank you Adam!</p>



<a name="223070219"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223070219" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223070219">(Jan 17 2021 at 23:50)</a>:</h4>
<p>Damiano -- Z/3Z is a semiring quotient of N but so is <code>fin 3</code> with 2+1=2.</p>



<a name="223074611"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223074611" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223074611">(Jan 18 2021 at 01:54)</a>:</h4>
<p>Ok, these two choices seem to be</p>
<ul>
<li><code>(m, n) = (0, 3)</code> for <code>Z/3Z</code> and</li>
<li><code>(m, n)=(2, 3)</code> for <code>fin 3</code></li>
</ul>



<a name="223085959"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223085959" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223085959">(Jan 18 2021 at 06:45)</a>:</h4>
<p>Aah I see. If you know the dynamics of the +1 function you know the entire semiring structure because addition is repeated +1 and multiplication is repeated addition</p>



<a name="223191749"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223191749" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223191749">(Jan 19 2021 at 06:36)</a>:</h4>
<p>I am playing around with the idea of allowing <code>ideal</code> to take a <code>comm_semiring</code> instance, instead of a <code>comm_ring</code> instance.</p>
<p>Thus, <code>ideal</code> shifts more towards being <code>submodule R R</code>.  An alternative could be converting lemmas for <code>ideal</code> into lemmas for (appropriately special) <code>submodule</code>s.</p>
<p>To try this out, I replaced <code>comm_ring</code> for <code>comm_semiring</code> in <code>ring_theory/ideal/basic.lean</code> and a good 300 lines of  code are just automatically converted.</p>
<p>Before I actually take action, what are people views on this?  Is it something that would be useful?  For me, personally, there is a blur in the notion of <code>submodule R M &lt;= submodule R R &lt;= ideal R</code> and it seems that trying to push lemmas towards the left would help sharpen the boundaries.  For instance, I would be hard pressed to come up with a lemma about an <code>ideal</code> that is <em>really</em> awkward to state for a <code>submodule R M</code>.  If <code>M</code> is actually cyclic, then the distinction between <code>ideal</code> and <code>submodule R (span R singleton)</code> is even more subtle.</p>



<a name="223192113"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223192113" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223192113">(Jan 19 2021 at 06:44)</a>:</h4>
<p>Procedurally, the simplest first step could be to simply change the definition, create a section <code>comm_semiring</code> in the file and "float" all the lemmas that are already proved-as-stated into this section.</p>
<p>Later, the remaining lemmas can be adapted, maybe by proving an alternative version for the extended def of <code>ideal</code>, and the old lemma would then be the conversion of the newer more general version to what it was before.</p>



<a name="223192200"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223192200" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223192200">(Jan 19 2021 at 06:46)</a>:</h4>
<p>Isn't <code>ideal R</code> defined as <code>submodule R R</code>? Clearly then it serves a purpose, namely to specialize to the case where the two types are the same</p>



<a name="223192211"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223192211" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223192211">(Jan 19 2021 at 06:46)</a>:</h4>
<p>Of course any theorems about submodules should be stated on submodules</p>



<a name="223192576"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223192576" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223192576">(Jan 19 2021 at 06:55)</a>:</h4>
<p>I think I was at least partly at fault for ideals only being defined for commutative rings, because we needed them for schemes very early on and I didn't have a clue about this semiring stuff. Since then there has been plenty of noise from people saying we should have have them for noncommutative rings but I don't think I've ever heard anyone suggest we need them for semirings!</p>
<p>Here is an argument against it. The reason we have normal subgroups and ideals is that for sensible objects like groups and rings, these are exactly the objects we use to form quotient objects. For semirings this is not the case. For general algebraic objects one forms quotients by quotienting out by a general equivalence relation, not some kind of subobject. The equivalence relation needs to play well with the structure fields and then the quotient object inherits the structure. For groups and rings it's kind of a coincidence (at least as far as I can see) that in both cases such an equivalence relation comes from a certain kind of subobject (the most striking case is abelian groups, where quotients are the same thing as subobjects, perhaps the reason why exact sequences are so important). For commutative semirings it is not true that every quotient object is the quotient by an ideal and this is perhaps the reason that ideals don't seem to have as much significance mathematically for semirings.</p>
<p>Having said all that, of course it's certainly the mathlib philosophy that objects should be defined in the biggest generality in which they make sense, and this is definitely an argument for doing it. You just might find that mathematically it doesn't buy you much in practice.</p>



<a name="223192913"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223192913" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223192913">(Jan 19 2021 at 07:03)</a>:</h4>
<p>Fortunately <a href="https://leanprover-community.github.io/mathlib_docs/find/ring_quot">docs#ring_quot</a> works for semirings :)</p>



<a name="223192944"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223192944" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223192944">(Jan 19 2021 at 07:03)</a>:</h4>
<p>This will be the thing which is used in practice rather than ideals, I guess</p>



<a name="223193222"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223193222" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223193222">(Jan 19 2021 at 07:09)</a>:</h4>
<p>Kevin, I understand and share your view.</p>
<p>Still, there are <em>lots</em> of results in <code>ring_theory/ideal/basic</code> that work for <code>submodule R R</code> with <code>[comm_semiring R]</code> (rather than <code>ideal</code> for a <code>[comm_ring]</code>) as stated-and-proven.  It should be uncontroversial (this is never the case...) that these should be stated at least in this generality, though, right?</p>



<a name="223193397"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223193397" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223193397">(Jan 19 2021 at 07:12)</a>:</h4>
<p>I don't think it is an issue to define <code>ideal R</code> to take <code>comm_semiring</code>, or even <code>semiring</code> as an argument, and given that I'm sure many theorems will generalize without you having to do anything. I wouldn't use <code>submodule R R</code> in place of <code>ideal R</code> though; the theorems about <code>submodule M R</code> should be proven in that generality, and then specialized to <code>ideal R</code></p>



<a name="223193399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223193399" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223193399">(Jan 19 2021 at 07:12)</a>:</h4>
<p>Mario, it is true that <code>ideal R = submodule R R</code>, but the definition only applies with a background <code>[comm_ring R]</code>, instead of a <code>[comm_semiring R]</code> assumption.</p>



<a name="223193427"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223193427" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223193427">(Jan 19 2021 at 07:13)</a>:</h4>
<p>However you might have to be careful that the definition is still correct in the <code>semiring</code> case (I would go for a left ideal)</p>



<a name="223193571"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223193571" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223193571">(Jan 19 2021 at 07:16)</a>:</h4>
<p>Ok, so the consensus seems to be to leave the definition of <code>ideal</code>with the implied assumption on <code>R</code> fixed, but convert the statements of the lemmas to apply to <code>submodule R R</code> with a weaker assumption on <code>R</code>, right?</p>
<p>I also agree with removing the <code>comm</code> assumption and then <code>left/right ideal</code>: I was planning to only tackle the <code>comm</code> issue, not allowing non-commutative rings, at least for the moment!</p>



<a name="223193604"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223193604" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223193604">(Jan 19 2021 at 07:16)</a>:</h4>
<p>Well you can do exactly the same thing as you're doing now: just take the <code>comm</code> off and put it back in on theorems that fail</p>



<a name="223193632"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223193632" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223193632">(Jan 19 2021 at 07:17)</a>:</h4>
<p>Procedurally, rather than changing the definition of <code>ideal</code> change the variables from</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">variables</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">I</span> <span class="o">:</span> <span class="n">ideal</span> <span class="n">α</span><span class="o">)</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span>
</code></pre></div>
<p>to</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">variables</span> <span class="o">[</span><span class="n">comm_semiring</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">I</span> <span class="o">:</span> <span class="n">submodule</span> <span class="n">R</span> <span class="n">R</span><span class="o">)</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span>
</code></pre></div>
<p>and see what copiles, right?</p>



<a name="223193652"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223193652" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223193652">(Jan 19 2021 at 07:18)</a>:</h4>
<p>No, I mean <code>variables [comm_semiring α] (I : ideal R) {a b : α}</code></p>



<a name="223193720"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223193720" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223193720">(Jan 19 2021 at 07:18)</a>:</h4>
<p>or <code>variables [semiring α] (I : ideal R) {a b : α}</code></p>



<a name="223193734"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223193734" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223193734">(Jan 19 2021 at 07:19)</a>:</h4>
<p>Ok, I think that I have confused myself: do people want to change the definition of <code>ideal</code> to allow a <code>comm_semiring</code> instead of a <code>comm_ring</code> underlying ring?</p>



<a name="223193742"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223193742" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223193742">(Jan 19 2021 at 07:19)</a>:</h4>
<p>that's my suggestion, yes</p>



<a name="223193775"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223193775" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223193775">(Jan 19 2021 at 07:20)</a>:</h4>
<p>I see, I think that Kevin had argued (weakly) against that.  Maybe, we should reach a consensus on this, before changing!</p>



<a name="223193811"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223193811" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223193811">(Jan 19 2021 at 07:20)</a>:</h4>
<p>(Btw, Mario, in my experiment, what you suggest is exactly what I did.)</p>



<a name="223193995"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223193995" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223193995">(Jan 19 2021 at 07:24)</a>:</h4>
<p>Kevin's argument, which I agree with, about the danger of "trivial generalization" is that you can end up stating true theorems about a useless thing. A definition that makes sense in a restricted situation may no longer be correct in a general setting. This is like defining implication as <code>not a \/ b</code> in classical logic and then generalizing to intuitionistic, or defining quotient rings by taking the quotient wrt an ideal and then generalizing to where not all quotients are quotients by an ideal. The definition and theorems are still correct but it's no longer capturing the right idea</p>



<a name="223194038"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223194038" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223194038">(Jan 19 2021 at 07:25)</a>:</h4>
<p>In the best case, there is a way to tweak the definition such that it is correct in the generalization and equivalent to the old definition in the original restricted setting</p>



<a name="223194127"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223194127" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223194127">(Jan 19 2021 at 07:27)</a>:</h4>
<p>In other cases, you might have a bifurcation of concepts, like left / right / two-sided ideals in the noncommutative setting, and then you have to pick which one is the official one that gets the simple name in the restricted setting and give new names for the others</p>



<a name="223194204"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223194204" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223194204">(Jan 19 2021 at 07:28)</a>:</h4>
<p>In the worst case the correct definition in the general setting is annoying to work with in the restricted setting because it's paying attention to subtleties that don't matter, and now the restricted setting (which is what most people care about) has been made worse by the generalization</p>



<a name="223194308"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223194308" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223194308">(Jan 19 2021 at 07:30)</a>:</h4>
<p>an example of the latter might be <code>free_comm_ring R A</code>, which is a quotient of an inductive type for constructivity reasons but classically is just the same thing as <code>mv_polynomial R A</code></p>



<a name="223194342"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223194342" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223194342">(Jan 19 2021 at 07:31)</a>:</h4>
<p>I completely agree.</p>
<p>I am still not convinced that there is a general consensus on allowing <code>comm_semiring</code>s as coefficients for <code>ideal</code>s, or whether we should stick to the current definition of <code>ideal</code> and simply state more lemmas for <code>submodule R R</code>.</p>



<a name="223194362"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223194362" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223194362">(Jan 19 2021 at 07:31)</a>:</h4>
<p>I don't think there is any reason for <code>submodule R R</code> to have theorems if <code>ideal R</code> exists</p>



<a name="223194413"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223194413" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223194413">(Jan 19 2021 at 07:32)</a>:</h4>
<p>Mario, I think Damiano means that the <code>R</code> in <code>submodule R R</code> could have weaker assumptions.</p>



<a name="223194424"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223194424" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223194424">(Jan 19 2021 at 07:32)</a>:</h4>
<p>I agree with that, but they should be applied to <code>ideal</code> too</p>



<a name="223194428"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223194428" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223194428">(Jan 19 2021 at 07:32)</a>:</h4>
<p>But I think in this case <code>ideal R</code> will not become harder to use if we generalise it.</p>



<a name="223194443"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223194443" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223194443">(Jan 19 2021 at 07:33)</a>:</h4>
<p><span class="user-mention" data-user-id="321459">@Damiano Testa</span> nevertheless, I fear that refactoring <code>ideal</code> will be a <em>huge</em> effort.</p>



<a name="223194474"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223194474" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223194474">(Jan 19 2021 at 07:33)</a>:</h4>
<p>Why would it? Trivial generalization is usually not very hard, although it might be useless</p>



<a name="223194483"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223194483" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223194483">(Jan 19 2021 at 07:34)</a>:</h4>
<p>Unless there are typeclass subtleties</p>



<a name="223194526"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223194526" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223194526">(Jan 19 2021 at 07:34)</a>:</h4>
<p>It is used all over the place. And typeclass inference of unification may take slightly different paths if you generalise it, so you might suddenly face painful broken proofs in functional analysis, measure theory, or whatever.</p>



<a name="223194546"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223194546" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223194546">(Jan 19 2021 at 07:34)</a>:</h4>
<p>Not speaking for the difficulties in Lean, but the refactor could simply be to allow the rings to be <code>comm_semiring</code>, but then only gradually change the uses of <code>ideal</code>s to a more general setting, as needed.</p>



<a name="223194559"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223194559" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223194559">(Jan 19 2021 at 07:35)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> <code>module R M</code> is an abbreviation for <code>semimodule R M</code>. Nevertheless, if you globaly search replace <code>semimodule</code> by <code>module</code>, and remove the old <code>module</code>-def, mathlib will be broken in tons of places.</p>



<a name="223194562"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223194562" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223194562">(Jan 19 2021 at 07:35)</a>:</h4>
<p>I see, is there a way to test this out?  Simply changing the definition of ideal and touching nothing else.  What would break?</p>



<a name="223194569"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223194569" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223194569">(Jan 19 2021 at 07:35)</a>:</h4>
<p>That's exactly how you test it</p>



<a name="223194594"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223194594" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223194594">(Jan 19 2021 at 07:36)</a>:</h4>
<p><span class="user-mention" data-user-id="321459">@Damiano Testa</span> you can just make the change, and see what happens.</p>



<a name="223194622"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223194622" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223194622">(Jan 19 2021 at 07:36)</a>:</h4>
<p>Either push it to a branch, and wait till CI tells you, or compile locally with <code>lean --make src/</code></p>



<a name="223194629"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223194629" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223194629">(Jan 19 2021 at 07:36)</a>:</h4>
<p>Ok, I have and I get a bunch of red lines in this file.  I thought that you were suggesting that other files would break as well</p>



<a name="223194636"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223194636" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223194636">(Jan 19 2021 at 07:36)</a>:</h4>
<p>ah, ok!</p>



<a name="223194639"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223194639" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223194639">(Jan 19 2021 at 07:36)</a>:</h4>
<p>I would be surprised if other files don't break.</p>



<a name="223194661"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223194661" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223194661">(Jan 19 2021 at 07:37)</a>:</h4>
<p>I am going to start a fresh copy of mathlib, simply change the comm_ring to comm_semiring and let it build</p>



<a name="223194673"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223194673" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223194673">(Jan 19 2021 at 07:37)</a>:</h4>
<p>This is some weird thing. From a maths point of view, it is clear that nothing should break. From a CS point of view, it is clear that something should break.</p>



<a name="223194731"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223194731" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223194731">(Jan 19 2021 at 07:38)</a>:</h4>
<p>I mean, you are changing a fundamental def'n in a library with ~450.000 lines of code. Something must break, right?</p>



<a name="223194784"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223194784" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223194784">(Jan 19 2021 at 07:39)</a>:</h4>
<p>if I push to a branch, would it automatically compile, or should I create a PR?</p>



<a name="223194789"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223194789" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223194789">(Jan 19 2021 at 07:39)</a>:</h4>
<p>branches are compiled</p>



<a name="223194854"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223194854" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223194854">(Jan 19 2021 at 07:40)</a>:</h4>
<p>ok, thanks!</p>



<a name="223195528"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223195528" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223195528">(Jan 19 2021 at 07:52)</a>:</h4>
<p>If you have time and energy for a giant refactor I think it would be much more useful to get rid of useless commutativity than to put semi-rings everywhere.</p>



<a name="223195584"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223195584" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223195584">(Jan 19 2021 at 07:52)</a>:</h4>
<p>I realize that this is my crusade, but the first line that breaks down in <code>ring_theory/ideal/basic</code> is 310.  Unfortunately, I do not understand what it does...  I will try to figure it out, but if anyone has a tip, it would be greatly appreciated!</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="o">(</span><span class="n">I</span> <span class="o">:</span> <span class="n">ideal</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">has_mul</span> <span class="n">I.quotient</span> <span class="o">:=</span>
<span class="o">⟨</span><span class="bp">λ</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">quotient.lift_on₂'</span> <span class="n">a</span> <span class="n">b</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">submodule.quotient.mk</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">))</span> <span class="bp">$</span>
 <span class="bp">λ</span> <span class="n">a₁</span> <span class="n">a₂</span> <span class="n">b₁</span> <span class="n">b₂</span> <span class="n">h₁</span> <span class="n">h₂</span><span class="o">,</span> <span class="n">quot.sound</span> <span class="bp">$</span> <span class="kd">begin</span>
  <span class="n">refine</span> <span class="k">calc</span> <span class="n">a₁</span> <span class="bp">*</span> <span class="n">a₂</span> <span class="bp">-</span> <span class="n">b₁</span> <span class="bp">*</span> <span class="n">b₂</span> <span class="bp">=</span> <span class="n">a₂</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a₁</span> <span class="bp">-</span> <span class="n">b₁</span><span class="o">)</span> <span class="bp">+</span> <span class="o">(</span><span class="n">a₂</span> <span class="bp">-</span> <span class="n">b₂</span><span class="o">)</span> <span class="bp">*</span> <span class="n">b₁</span> <span class="o">:</span> <span class="n">_</span>
  <span class="bp">...</span> <span class="bp">∈</span> <span class="n">I</span> <span class="o">:</span> <span class="n">I.add_mem</span> <span class="o">(</span><span class="n">I.mul_mem_left</span> <span class="n">_</span> <span class="n">h₁</span><span class="o">)</span> <span class="o">(</span><span class="n">I.mul_mem_right</span> <span class="n">_</span> <span class="n">h₂</span><span class="o">),</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">mul_sub</span><span class="o">,</span> <span class="n">sub_mul</span><span class="o">,</span> <span class="n">sub_add_sub_cancel</span><span class="o">,</span> <span class="n">mul_comm</span><span class="o">,</span> <span class="n">mul_comm</span> <span class="n">b₁</span><span class="o">]</span>
 <span class="kd">end</span><span class="o">⟩</span>
</code></pre></div>
<p>the three dots give the error</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">invalid</span> <span class="n">type</span> <span class="n">ascription</span><span class="o">,</span> <span class="n">term</span> <span class="n">has</span> <span class="n">type</span>
  <span class="n">a₁</span> <span class="bp">*</span> <span class="n">a₂</span> <span class="bp">-</span> <span class="n">b₁</span> <span class="bp">*</span> <span class="n">b₂</span> <span class="bp">∈</span> <span class="bp">↑</span><span class="n">I</span>
<span class="n">but</span> <span class="n">is</span> <span class="n">expected</span> <span class="n">to</span> <span class="k">have</span> <span class="n">type</span>
  <span class="n">setoid.r</span> <span class="o">(</span><span class="n">a₁</span> <span class="bp">*</span> <span class="n">a₂</span><span class="o">)</span> <span class="o">(</span><span class="n">b₁</span> <span class="bp">*</span> <span class="n">b₂</span><span class="o">)</span>
</code></pre></div>



<a name="223195716"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223195716" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223195716">(Jan 19 2021 at 07:54)</a>:</h4>
<p>Can you push to a branch so it's easy for others to see the error?</p>



<a name="223195901"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223195901" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223195901">(Jan 19 2021 at 07:58)</a>:</h4>
<p>Kevin, it is here:</p>
<p>Branch 'comm_semiring'</p>



<a name="223196136"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223196136" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223196136">(Jan 19 2021 at 08:00)</a>:</h4>
<p>Patrick, I will look into this, but for the <code>comm_semiring</code> I have two goals that I want to achieve.</p>
<p>One is to create a bridge between topology and algebra, using the <code>comm_semiring</code> structure on <code>boolean_algebras</code> of, say, open sets.</p>
<p>The other is to bring more algebraic geometry to tropical geometry.  It was Riccardo's observation that the underlying ring for tropical geometry is a comm_semiring.  A lot of results similar to results in algebraic geometry hold in tropical geometry, but there is no direct approach.  I wonder whether the great similarities between comm_semirings and comm_rings could help!</p>
<p>Both these examples are commutative...</p>



<a name="223196260"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223196260" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223196260">(Jan 19 2021 at 08:02)</a>:</h4>
<p>For goal one: if there is an analogue of <code>Spec</code> for <code>comm_semirings</code> with good properties, what is <code>Spec (boolean_semiring topological_space)</code>?</p>



<a name="223196344"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223196344" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223196344">(Jan 19 2021 at 08:04)</a>:</h4>
<p>I tried the non-commutative refactor a while ago, but gave up because Scott introduced <code>ring_quot</code> and solved the problem I actually cared about. There's an open PR with my attempt somewhere still</p>



<a name="223215346"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223215346" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Xarles <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223215346">(Jan 19 2021 at 11:44)</a>:</h4>
<p>Dear all, I just realize there is this topic on something I am working on (together with <span class="user-mention" data-user-id="254058">@Marc Masdeu</span> ), that is to do all that it is possible on ideals on lean but for comm_semirings. We had some things done and appart of the quotients (which clearly need to be redone) and some proof that rewrote (concretely, that maximal ideals are prime), must of the file works. Our suggestion, however, is that it should be better to define something like "semideals" or "semiideals" like for modules we use semimodules, in order not to conflict with the things done for ideals.  </p>
<p>In order to do quotients, one should develope "congruences" for semimodules: equivalence relations that preserve the structure. Congruences are developed for monoids, so it should not be difficult to do it (in fact, I have some things done). Then the quotient by a subsemimodule is just the quotient by the congruence it generates.  But it is not true anymore that the kernel of the quotient by a subsemimodule is the subsemimodule: it is only true for the "saturated" subsemimodules. </p>
<p>To go further, so to do Spec, schemes and so on, it is possible, and it has been developed for several people (including myself in a "private" preprint). It can be done and it should be not difficult.</p>



<a name="223216361"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223216361" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223216361">(Jan 19 2021 at 11:57)</a>:</h4>
<p>Are "prime semi-ideals" the correct objects that one should use to make Spec? Or does one look at e.g. surjections from semirings to semi-integral-domains up to  equivalence? Or are these the same thing?</p>



<a name="223217275"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223217275" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223217275">(Jan 19 2021 at 12:07)</a>:</h4>
<p>In case anyone is interested, this fixed the first broken file:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="o">(</span><span class="n">I</span> <span class="o">:</span> <span class="n">ideal</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">has_mul</span> <span class="n">I.quotient</span> <span class="o">:=</span>
<span class="o">⟨</span><span class="bp">λ</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">quotient.lift_on₂'</span> <span class="n">a</span> <span class="n">b</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">submodule.quotient.mk</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">b</span><span class="o">))</span> <span class="bp">$</span>
 <span class="bp">λ</span> <span class="n">a₁</span> <span class="n">a₂</span> <span class="n">b₁</span> <span class="n">b₂</span> <span class="n">h₁</span> <span class="n">h₂</span><span class="o">,</span> <span class="n">quot.sound</span> <span class="bp">$</span> <span class="kd">begin</span>
  <span class="n">obtain</span> <span class="n">F</span> <span class="o">:=</span> <span class="n">I.add_mem</span> <span class="o">(</span><span class="n">I.mul_mem_left</span> <span class="n">a₂</span> <span class="n">h₁</span><span class="o">)</span> <span class="o">(</span><span class="n">I.mul_mem_right</span> <span class="n">b₁</span> <span class="n">h₂</span><span class="o">),</span>
  <span class="k">have</span> <span class="o">:</span> <span class="n">a₁</span> <span class="bp">*</span> <span class="n">a₂</span> <span class="bp">-</span> <span class="n">b₁</span> <span class="bp">*</span> <span class="n">b₂</span> <span class="bp">=</span> <span class="n">a₂</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a₁</span> <span class="bp">-</span> <span class="n">b₁</span><span class="o">)</span> <span class="bp">+</span> <span class="o">(</span><span class="n">a₂</span> <span class="bp">-</span> <span class="n">b₂</span><span class="o">)</span> <span class="bp">*</span> <span class="n">b₁</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="n">mul_sub</span><span class="o">,</span> <span class="n">sub_mul</span><span class="o">,</span> <span class="n">sub_add_sub_cancel</span><span class="o">,</span> <span class="n">mul_comm</span><span class="o">,</span> <span class="n">mul_comm</span> <span class="n">b₁</span><span class="o">]</span> <span class="o">},</span>
  <span class="n">rw</span> <span class="bp">←</span> <span class="n">this</span> <span class="n">at</span> <span class="n">F</span><span class="o">,</span>
  <span class="n">convert</span> <span class="n">F</span>
<span class="kd">end</span><span class="o">⟩</span>
</code></pre></div>



<a name="223217288"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223217288" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Xarles <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223217288">(Jan 19 2021 at 12:07)</a>:</h4>
<p>One can define Spec with "prime semi-ideals", with "prime saturated semi-ideals" or with "prime congruences", and all three work and are diferent. The main topic of my preprint is the relation of the first two with valuation theory.</p>



<a name="223217673"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223217673" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Xarles <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223217673">(Jan 19 2021 at 12:13)</a>:</h4>
<p>So, in my preprint I explain why you naturaly need the two notions of Spec, with ideals and with saturated ideals. I had the idea to see if it is possible to formalize in lean all to give my preprint much more rigor, but it is going to be quite hard.</p>



<a name="223218030"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223218030" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Xarles <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223218030">(Jan 19 2021 at 12:17)</a>:</h4>
<p>On the other hand,I was really suprised by lean, when I saw that I could take out all the lemmas using the substraction and using the quotient from the ideal lean file, and change comm_ring for comm_semiring evrywhere and most of the results worked without changes. I thing this really shows that lean can prove that when we say "the same proof works" it is literaly true sometimes.</p>



<a name="223220754"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223220754" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223220754">(Jan 19 2021 at 12:47)</a>:</h4>
<p><span class="user-mention" data-user-id="315546">@Xavier Xarles</span> right now a (multiplicative) valuation on a commutative ring <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span> in Lean is defined to be a monoid-with-zero homomorphism (i.e. <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi><mo stretchy="false">(</mo><mi>a</mi><mi>b</mi><mo stretchy="false">)</mo><mo>=</mo><mi>v</mi><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo><mi>v</mi><mo stretchy="false">(</mo><mi>b</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">v(ab)=v(a)v(b)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mord mathnormal">b</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mopen">(</span><span class="mord mathnormal">b</span><span class="mclose">)</span></span></span></span>, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">v(0)=0</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mopen">(</span><span class="mord">0</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">v(1)=1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>) from <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span> to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Γ</mi><mo>∪</mo><mo stretchy="false">{</mo><mn>0</mn><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\Gamma\cup\{0\}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Γ</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∪</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">0</span><span class="mclose">}</span></span></span></span>, where <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Γ</mi></mrow><annotation encoding="application/x-tex">\Gamma</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Γ</span></span></span></span> is a totally ordered abelian group (group law <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>×</mo></mrow><annotation encoding="application/x-tex">\times</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord">×</span></span></span></span>), satisfying <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi><mo stretchy="false">(</mo><mi>a</mi><mo>+</mo><mi>b</mi><mo stretchy="false">)</mo><mo>≥</mo><mi>m</mi><mi>i</mi><mi>n</mi><mo stretchy="false">{</mo><mi>v</mi><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>v</mi><mo stretchy="false">(</mo><mi>b</mi><mo stretchy="false">)</mo><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">v(a+b)\geq min\{v(a),v(b)\}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">b</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">m</span><span class="mord mathnormal">i</span><span class="mord mathnormal">n</span><span class="mopen">{</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mopen">(</span><span class="mord mathnormal">b</span><span class="mclose">)</span><span class="mclose">}</span></span></span></span>. Eric Wieser and I have been reorganising the theory of ordered monoids recently and I was going to change this definition of a valuation to allow the target to be a general totally ordered monoid-with-zero. Should I also change it to allow commutative semirings?</p>



<a name="223220972"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223220972" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223220972">(Jan 19 2021 at 12:49)</a>:</h4>
<p>For the theory of perfectoid spaces we only needed groups-with-zero as the target, but more recently Lau and I realised that in the theory of tilting it's more convenient to allow monoids with zero sometimes. For example there is a "truncated valuation" on <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mi mathvariant="normal">/</mi><mi>p</mi><mi>R</mi></mrow><annotation encoding="application/x-tex">R/pR</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord">/</span><span class="mord mathnormal">p</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span> if <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span> is the integers of a (possibly highly ramified) p-adic local field, taking values in <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><mn>0</mn><mo stretchy="false">}</mo><mo>∪</mo><mo stretchy="false">(</mo><mn>1</mn><mi mathvariant="normal">/</mi><mi>p</mi><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">\{0\}\cup(1/p,1]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">0</span><span class="mclose">}</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∪</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mord">/</span><span class="mord mathnormal">p</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span>.</p>



<a name="223221225"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223221225" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223221225">(Jan 19 2021 at 12:52)</a>:</h4>
<p>This was going to be my next PR when I've got through this week (somehow I am giving a lot of talks this week).</p>



<a name="223226512"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223226512" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223226512">(Jan 19 2021 at 13:39)</a>:</h4>
<p>Is there a way to find out about more than one error at a time?  I fixed two files, but I only found out about the second one, after I fixed the first.  Is there a way to get all the errors that are within reach of the current position, or will I have to fix one, recompile, fix another, and so on?</p>



<a name="223226533"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223226533" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223226533">(Jan 19 2021 at 13:39)</a>:</h4>
<p>Just compile locally.</p>



<a name="223226621"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223226621" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223226621">(Jan 19 2021 at 13:40)</a>:</h4>
<p>In a terminal, <code>cd</code> to the root of your modded mathlib and then type <code>lean --make src</code> and go and have lunch</p>



<a name="223226669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223226669" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223226669">(Jan 19 2021 at 13:40)</a>:</h4>
<p>ok, I will do that, maybe while talking to a student, since I just had lunch!  <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="223226833"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223226833" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223226833">(Jan 19 2021 at 13:42)</a>:</h4>
<p>I'm very proud that users have now forgotten that you can compile mathlib locally.</p>



<a name="223226931"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223226931" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223226931">(Jan 19 2021 at 13:43)</a>:</h4>
<p>If you got 10 cents every time someone typed <code>leanproject get-&lt;something&gt;</code> then you would be doing very well by now!</p>



<a name="223226963"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223226963" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223226963">(Jan 19 2021 at 13:43)</a>:</h4>
<p>you can <code>get</code> more than <code>cache</code>?</p>



<a name="223226978"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223226978" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223226978">(Jan 19 2021 at 13:43)</a>:</h4>
<p><code>cash</code>?</p>



<a name="223227044"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223227044" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223227044">(Jan 19 2021 at 13:44)</a>:</h4>
<p>If you're working on a project which uses mathlib as a dependency, then you can type <code>leanproject get-mathlib-cache</code> to update mathlib</p>



<a name="223227101"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223227101" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223227101">(Jan 19 2021 at 13:44)</a>:</h4>
<p>Ah, I never dared to make a dependency, since I am still unsure with github</p>



<a name="223227156"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223227156" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223227156">(Jan 19 2021 at 13:45)</a>:</h4>
<p>When you start working on <a href="https://github.com/leanprover-community/lean-liquid">https://github.com/leanprover-community/lean-liquid</a> you'll learn about <code>get-mathlib-cache</code></p>



<a name="223227203"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223227203" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223227203">(Jan 19 2021 at 13:45)</a>:</h4>
<p>While we are on this topic, does the <code>make</code> command go sequentially through the files, starting with the ones that import nothing and the proceeding to the next layer recursively?</p>



<a name="223227222"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223227222" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223227222">(Jan 19 2021 at 13:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F/near/223226931">said</a>:</p>
<blockquote>
<p>If you got 10 cents every time someone typed <code>leanproject get-&lt;something&gt;</code> then you would be doing very well by now!</p>
</blockquote>
<p>We (well, MSR) pay a cent or so, but still!</p>



<a name="223227299"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223227299" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223227299">(Jan 19 2021 at 13:46)</a>:</h4>
<p>Unfortunately not to Patrick!</p>



<a name="223227356"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223227356" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223227356">(Jan 19 2021 at 13:46)</a>:</h4>
<p>Note that Rob, Gabriel and Bryan should also get a share. Without the CI and Azure infrastructure <code>leanproject</code> couldn't work.</p>



<a name="223227432"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223227432" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223227432">(Jan 19 2021 at 13:47)</a>:</h4>
<p><span class="user-mention" data-user-id="321459">@Damiano Testa</span> if you have got a fully compiled mathlib and then just change a few files, <code>make</code> will start by compiling one of those, and then move on to other files you changed, and the files which import those files etc. If you have a multi-core machine (which you probably do) then it might work on several at once.</p>



<a name="223227445"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223227445" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223227445">(Jan 19 2021 at 13:47)</a>:</h4>
<p>And Leo, who helped us arrange the grant that actually pays for it</p>



<a name="223227532"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223227532" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223227532">(Jan 19 2021 at 13:48)</a>:</h4>
<p>Aah, so MS is paying MS! Sounds like a tax dodge.</p>



<a name="223227574"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223227574" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223227574">(Jan 19 2021 at 13:48)</a>:</h4>
<p>Kevin, you haven't been paying attention during my opening talk at LT2021...</p>



<a name="223227623"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223227623" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223227623">(Jan 19 2021 at 13:49)</a>:</h4>
<p>I promise I was there and listening! I'm just getting forgetful ;-)</p>



<a name="223227643"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223227643" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223227643">(Jan 19 2021 at 13:49)</a>:</h4>
<p>Kevin, thanks for the explanation!  I am sure that there is a lot more under the surface, but it is good to know that it will start from there the interesting stuff has happened!</p>



<a name="223227681"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223227681" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223227681">(Jan 19 2021 at 13:49)</a>:</h4>
<p>MS Research is paying MS Azure, I bet the internal overhead costs more than the taxes they pay!</p>



<a name="223227715"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223227715" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223227715">(Jan 19 2021 at 13:49)</a>:</h4>
<p>It might well look at earlier files, but if it sees a lean file and an olean file, and these files are compatible, then it just skips the lean file.</p>



<a name="223232985"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223232985" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Xarles <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223232985">(Jan 19 2021 at 14:26)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span>  The notion I use in that paper is even more general, as done in a paper by Giansiracusa and Giansiracusa: a (pre)valuation is a map to an idempotent semiring that it is multiplicative and "subadditive". A totally ordered monoid-with-zero becomes an idempotent semiring with the min (or max) operation. But I am not sure this notion is really useful: they introduced in a paper but nobody seems to be using it (a part from me). And I decided to called prevaluation, as valuation is a very well-known notion so it is better not to create confusion.</p>



<a name="223233088"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223233088" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223233088">(Jan 19 2021 at 14:27)</a>:</h4>
<p><span class="user-mention" data-user-id="315546">@Xavier Xarles</span> Can you send a link to this paper you mentioned?</p>



<a name="223233151"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223233151" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223233151">(Jan 19 2021 at 14:27)</a>:</h4>
<p>Do they or you have any applications for such prevaluations that are not possible with the monoid-with-zero version?</p>



<a name="223233557"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223233557" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Xarles <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223233557">(Jan 19 2021 at 14:30)</a>:</h4>
<p>The link to the paper is: <a href="https://arxiv.org/abs/1308.0042">https://arxiv.org/abs/1308.0042</a> (it is publish in Duke). There is a not publish sequel in <a href="https://arxiv.org/abs/1410.4348">https://arxiv.org/abs/1410.4348</a></p>



<a name="223233673"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223233673" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223233673">(Jan 19 2021 at 14:31)</a>:</h4>
<p>Thanks! (I have a student working on similar things right now)</p>



<a name="223233869"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223233869" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223233869">(Jan 19 2021 at 14:32)</a>:</h4>
<p>On the compiling front: mathlib is now timing out on the file <code>ring_theory/jacobson.lean</code> and I do not know how to make it faster.  One of the "slow" proofs is quite long, so maybe it should be split.  For the moment, though, is it possible to instruct lean not to compile a file, or should I simply move it outside of its reach?</p>



<a name="223234297"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223234297" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Xarles <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223234297">(Jan 19 2021 at 14:35)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span>  They need in the construction of the "universal valuation", and you need the general version for this. Also for other constructions, as the "universal tropicalization". They would like to do "scheme theoretic" versions of these. In some some sense it is what I did in my preprint (I will send it to arxiv some day). But it is not used to solve really anything outside the theory... as far as I know.</p>



<a name="223235461"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223235461" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223235461">(Jan 19 2021 at 14:43)</a>:</h4>
<p>This universal valuation looks exactly like something we might write in lean :)<br>
(as a quotient of a giant inductive type, etc.)</p>



<a name="223235824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223235824" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Xarles <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223235824">(Jan 19 2021 at 14:46)</a>:</h4>
<p>There is a quite natural construction of the universal valuation I do in my paper: it is "reminiscent" of the idempotent semiring of the ideals in a commutative ring.</p>



<a name="223236073"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223236073" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223236073">(Jan 19 2021 at 14:48)</a>:</h4>
<p>I guess the key thing one must check to see whether there is a scheme-theoretic version of the universal valuation is whether the construction in the affine case is compatible with localizations. Is this condition easy to check?</p>



<a name="223236347"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223236347" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Xarles <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223236347">(Jan 19 2021 at 14:50)</a>:</h4>
<p>This is exactly one of the points: but it is quite easy, as valuation is a morphism of multiplicative monoids, and localization is about multiplicative monoids only...</p>



<a name="223242899"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223242899" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223242899">(Jan 19 2021 at 15:29)</a>:</h4>
<p>Both on my computer and on the remote branch, the output of compiling mathlib has an output informing me that 3 proofs use sorry.  I have sorried them myself, since they now time out.</p>
<p>Does this mean that everything else is in order?  Or does it simply mean that once the compiling got to this file it ended its work?</p>



<a name="223243073"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223243073" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223243073">(Jan 19 2021 at 15:30)</a>:</h4>
<p>no, that sounds like you are good</p>



<a name="223243095"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223243095" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223243095">(Jan 19 2021 at 15:30)</a>:</h4>
<p>apart from those three sorrys</p>



<a name="223243266"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223243266" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223243266">(Jan 19 2021 at 15:31)</a>:</h4>
<p>Ok, so the change allowing an ideal to take a comm_semiring instead of a comm_ring instance builds.</p>
<p>I have not yet moved anything to actually use this new generality, simply allowed Lean to have it.</p>



<a name="223243353"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223243353" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223243353">(Jan 19 2021 at 15:32)</a>:</h4>
<p>So, now I have to fix the 3 missing proofs in <code>src/ring_theory/jacobson.lean</code>!</p>



<a name="223272577"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223272577" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223272577">(Jan 19 2021 at 18:41)</a>:</h4>
<p><span class="user-mention" data-user-id="321459">@Damiano Testa</span> Great! And good luck with fixing those proofs. If you get stuck after and they fight back hard, I'm sure you can get some help here.</p>



<a name="223277195"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223277195" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223277195">(Jan 19 2021 at 19:10)</a>:</h4>
<p>Ok, thanks!  At the moment, I am trying to zoom in on the issue.  It seems that there are some instances that lean is failing to find.  I will try to narrow this down further</p>



<a name="223277288"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223277288" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223277288">(Jan 19 2021 at 19:11)</a>:</h4>
<p>My strategy is to tear apart the proofs, to see if separately they compile: is this acceptable (assuming that it works)?</p>



<a name="223277864"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223277864" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223277864">(Jan 19 2021 at 19:14)</a>:</h4>
<p>The statements typecheck, right? The problem is the proofs? I would just <code>sorry</code> parts of them, and try to narrow in like that.</p>



<a name="223278152"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223278152" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223278152">(Jan 19 2021 at 19:16)</a>:</h4>
<p>Yes, the statements are ok.  I think that it is one of the <code>have</code> in one proof that causes problems.  I have not inspected the others yet: I'll try to find some time tomorrow</p>



<a name="223614996"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223614996" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Xarles <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223614996">(Jan 22 2021 at 08:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F/near/223216361">said</a>:</p>
<blockquote>
<p>Are "prime semi-ideals" the correct objects that one should use to make Spec? Or does one look at e.g. surjections from semirings to semi-integral-domains up to  equivalence? Or are these the same thing?</p>
</blockquote>
<p>Just one example that can be helpful in the "easiest" semiring $N$ of the natural numbers (including zero, of course). There is a unique maximal ideal, which is $N\{1}$. There are plenty of ideals whose saturation (=kernel of the quotient they generate) are the total ideal. So Spec(N) is huge. On the other hand, one can show that the "saturated prime ideals" are only the ones of the form pN, for p a prime number, so the "saturated spectrum" of N and the Spec of the integers are "the same".</p>



<a name="223880103"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223880103" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223880103">(Jan 25 2021 at 10:47)</a>:</h4>
<p>Dear All,</p>
<p>I managed to push the <code>comm_semiring</code> branch so that it compiles!  The only serious changes happened in file <code>ring_theory/jacobson.lean</code>.  It is my opinion that several further proofs of the file can be simplified and sped up.  However, for the moment, I am happy with the fact that I managed to make it work!</p>
<p>If anyone wants to take a look, I would be happy to listen to comments and suggestions!</p>



<a name="223880242"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223880242" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223880242">(Jan 25 2021 at 10:49)</a>:</h4>
<p>More importantly, I would like to know if there is a consensus on whether to replace the definition of <code>ideal</code> to take a <code>comm_semiring</code> base, instead of a <code>comm_ring</code> base.  This branch only changes the definition, but makes no use at all of the more general possibilities.</p>



<a name="223880640"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223880640" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223880640">(Jan 25 2021 at 10:52)</a>:</h4>
<p>If it all compiles, I don't see any reason why we shouldn't go for it</p>



<a name="223881256"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223881256" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223881256">(Jan 25 2021 at 10:59)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/tree/comm_semiring">branch#comm_semiring</a></p>



<a name="223881584"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223881584" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223881584">(Jan 25 2021 at 11:02)</a>:</h4>
<p>Very well, so I will make a PR out of it and see what happens!</p>



<a name="223882301"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223882301" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223882301">(Jan 25 2021 at 11:10)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/5879">#5879</a></p>
<p>Bors seems to think that there are no issues!</p>



<a name="223912527"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223912527" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223912527">(Jan 25 2021 at 15:29)</a>:</h4>
<p>On a related note, there are a bunch of places where assuming <a href="https://leanprover-community.github.io/mathlib_docs/find/integral_domain">docs#integral_domain</a> pulls in a <code>comm_ring</code> requirement where really only <code>comm_semiring</code> or even just <code>semiring</code> is needed. I've cleaned a few of those up in <a href="https://github.com/leanprover-community/mathlib/issues/5877">#5877</a>. I imagine most of the uses of <code>[integral_domain R]</code> in mathlib are overly strict.</p>



<a name="223919989"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223919989" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223919989">(Jan 25 2021 at 16:14)</a>:</h4>
<p>I am very happy that you are doing this change, Eric!  I also think that most of the time that there is an assumption of <code>integral_domain</code>, simply knowing that multiplication by a non-zero element is injective would suffice!</p>



<a name="223920160"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223920160" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223920160">(Jan 25 2021 at 16:15)</a>:</h4>
<p>Ah, unfortunately we don't have a typeclass that combines <code>semiring</code> with <a href="https://leanprover-community.github.io/mathlib_docs/find/cancel_monoid_with_zero">docs#cancel_monoid_with_zero</a> without taking on extra assumptions as well</p>



<a name="223924210"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223924210" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223924210">(Jan 25 2021 at 16:39)</a>:</h4>
<p>I think that there was a discussion of <code>semidomain</code> at some point... I did not manage to work on it, though.  Let me see if I can find it!</p>
<p><a href="#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/left.2Fright.20cancelative.20semiring">https://leanprover.zulipchat.com/#narrow/stream/217875-Is-there.20code.20for.20X.3F/topic/left.2Fright.20cancelative.20semiring</a></p>



<a name="223924412"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223924412" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223924412">(Jan 25 2021 at 16:40)</a>:</h4>
<p>About the <code>comm_semiring</code> change to <code>ideal</code>: it compiled!  I feel very proud!  <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span></p>



<a name="223937103"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223937103" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223937103">(Jan 25 2021 at 18:09)</a>:</h4>
<p>Yeah that is a really cool refactor. The thing that comes up now and again though is the fact that we don't have ideals for non-commutative rings, and that might well be a lot harder. But actually I wonder whether that should even be a refactor. There is no such thing as an ideal of a non-commutative ring, there's a left ideal, a right ideal and a bi-ideal.</p>



<a name="223937855"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223937855" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223937855">(Jan 25 2021 at 18:15)</a>:</h4>
<p>The refactor would be to define <code>ideal</code> as the bi-ideal of a non-necessarily commutative ring, I think</p>



<a name="223937881"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223937881" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223937881">(Jan 25 2021 at 18:15)</a>:</h4>
<p>Since when the ring is commutative, the bi-ideal and ideal coincide, right?</p>



<a name="223938012"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223938012" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223938012">(Jan 25 2021 at 18:16)</a>:</h4>
<p>I still think what I said above: an <code>ideal</code> should be a left ideal (because the definition is the same as in the commutative case), a right ideal shouldn't exist (it's a left ideal in the opposite ring), and a bi-ideal should be a different definition</p>



<a name="223938118"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223938118" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223938118">(Jan 25 2021 at 18:17)</a>:</h4>
<p>in a commutative ring all three concepts converge</p>



<a name="223938139"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223938139" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223938139">(Jan 25 2021 at 18:17)</a>:</h4>
<p>I agree, except that I don't know if right ideals shouldn't exist. After all we also have <code>sup</code> and <code>inf</code>...</p>



<a name="223938158"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223938158" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223938158">(Jan 25 2021 at 18:17)</a>:</h4>
<p>and <code>order_dual</code></p>



<a name="223938203"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223938203" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223938203">(Jan 25 2021 at 18:17)</a>:</h4>
<p>I think we should try to avoid mentioning them until they become necessary for something</p>



<a name="223938235"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223938235" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223938235">(Jan 25 2021 at 18:18)</a>:</h4>
<p>and if that means they never get defined, great</p>



<a name="223938471"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223938471" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223938471">(Jan 25 2021 at 18:19)</a>:</h4>
<p>sup and inf are actually useful, this is more like mul and opposite-mul</p>



<a name="223939296"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223939296" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223939296">(Jan 25 2021 at 18:25)</a>:</h4>
<p>Do we have submodules of a non-commutative R-module? Those will be left ideals I guess.</p>



<a name="223939451"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223939451" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223939451">(Jan 25 2021 at 18:26)</a>:</h4>
<p>I don't think <a href="https://leanprover-community.github.io/mathlib_docs/find/submodule">docs#submodule</a> requires commutativity (so yes)</p>



<a name="223939880"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223939880" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223939880">(Jan 25 2021 at 18:29)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> <a href="#narrow/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F/near/223938203">said</a>:</p>
<blockquote>
<p>I think we should try to avoid mentioning them until they become necessary for something</p>
</blockquote>
<p>I think the only circumstance where I really would want to define right-submodules is if it's a more useful way to define bi-submodules</p>



<a name="223993291"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/223993291" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#223993291">(Jan 26 2021 at 03:22)</a>:</h4>
<p>I will keep in mind the <code>comm_semiring</code>/<code>semiring</code> issue while refactoring.  I agree that getting left-ideals should be easy.</p>
<p>I also agree with Mario that I would add right ideals on a need-to-use basis: duplicating code is a lengthy and imprecise process.  My experience of working with dual/opposites is limited and unsuccessful.  For this reason, I would either try to avoid right ideals, or duplicate the needed lemmas only.  Of course, if someone else is able to make Lean understand the companion version of every lemma, that would be awesome!</p>



<a name="224245104"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/224245104" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#224245104">(Jan 27 2021 at 20:49)</a>:</h4>
<p>Jumping into this discussion without too much context, have you considered defining subbimodules and then having a left (resp. right) ideal of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span> be a <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>R</mi><mo separator="true">,</mo><mi mathvariant="double-struck">Z</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(R,\mathbb{Z})</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathbb">Z</span></span><span class="mclose">)</span></span></span></span>-submodule (resp. a <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi mathvariant="double-struck">Z</mi><mo separator="true">,</mo><mi>R</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(\mathbb{Z},R)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathbb">Z</span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mclose">)</span></span></span></span>-submodule), where an ideal is an <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>R</mi><mo separator="true">,</mo><mi>R</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(R,R)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mclose">)</span></span></span></span>-submodule?  It's not uncommon needing to deal with left and right ideals simultaneously (one example is left and right annihilators of right and left ideals in Frobenius algebras).  It's also useful being able to consider relationships between <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>R</mi><mo separator="true">,</mo><mi mathvariant="double-struck">Z</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(R,\mathbb{Z})</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathbb">Z</span></span><span class="mclose">)</span></span></span></span>-submodules and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>R</mi><mo separator="true">,</mo><mi>A</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(R,A)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">A</span><span class="mclose">)</span></span></span></span>-submodules for <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal">A</span></span></span></span> a subring of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span>, so, when possible, it might be worth generalizing statements about left ideals to ones where <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal">A</span></span></span></span> can be anything.  Doing this also all sounds like a lot more work with no immediate benefit, so take it with a grain of salt. <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="224477410"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/224477410" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#224477410">(Jan 29 2021 at 14:29)</a>:</h4>
<p>Continuing with the refactor, I have now changed many lemmas in <code>ring_theory/ideal/basic</code> so that they use <code>comm_semiring</code> instead of <code>comm_ring</code>.</p>
<p>Besides removing assumptions from further "easy" lemmas, the main sticking point is going to be dealing with quotients.  As I have not really given the issue of quotients in a <code>comm_semiring</code> much thought, I will not start doing this anytime soon.  However, from the discussion above, it seems that <span class="user-mention" data-user-id="315546">@Xavier Xarles</span> and <span class="user-mention" data-user-id="254058">@Marc Masdeu</span> have been working on this.  I hope that this refactor will be useful to them!</p>
<p>PR <a href="https://github.com/leanprover-community/mathlib/issues/5954">#5954</a></p>



<a name="224477744"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/224477744" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#224477744">(Jan 29 2021 at 14:31)</a>:</h4>
<p>In commutative ring theory the correct thing to quotient out by is an ideal. In semiring theory this is no longer the case, I suspect, so maybe it's easiest just to leave the quotients alone.</p>



<a name="224477860"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/224477860" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#224477860">(Jan 29 2021 at 14:32)</a>:</h4>
<p>I don't think we have normal submonoids, and this is probably for the same reason.</p>



<a name="224478055"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/224478055" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#224478055">(Jan 29 2021 at 14:33)</a>:</h4>
<p>There's a general notion of "congruence relations" (I can't remember the name right now...) in the context of universal algebra which tells you exactly what the condition on a relation you need so that the quotient inherits the algebraic structure. This is the thing that one has to use for quotients of objects like semirings and monoids.</p>



<a name="224478137"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/224478137" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Xarles <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#224478137">(Jan 29 2021 at 14:34)</a>:</h4>
<p>I don't know if you did the prime ideals part. The proof of maximal implies prime needs to be redone: Marc and myself have a wrote a proof with lean that work for any comm_semiring. <br>
About quotients, there are some dificulties as quotients with respect to a ideal in comm_semirings  can be defined, but the standard way is to do it through "congruences", that is one of the things we are doing.</p>



<a name="224478185"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/224478185" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#224478185">(Jan 29 2021 at 14:34)</a>:</h4>
<p>Kyle, did I understand correctly that you would like to also remove the commutative assumption on the ring?  I like the idea of removing it, however, out of prejudice, I think that it might be easier to first get rid of additive inverses and then to go with non-commutativity.  Do you agree?</p>



<a name="224478256"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/224478256" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#224478256">(Jan 29 2021 at 14:35)</a>:</h4>
<p>We have congruence relations on monoids in mathlib.</p>



<a name="224478277"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/224478277" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#224478277">(Jan 29 2021 at 14:35)</a>:</h4>
<p><span class="user-mention" data-user-id="315546">@Xavier Xarles</span> <span aria-label="up" class="emoji emoji-2b06" role="img" title="up">:up:</span></p>



<a name="224478296"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/224478296" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#224478296">(Jan 29 2021 at 14:35)</a>:</h4>
<p>Xavier, I also have rewritten that proof: it is contained in the current PR <a href="https://github.com/leanprover-community/mathlib/issues/5954">#5954</a> (which is not in mathlib, and is building at the moment).</p>



<a name="224478329"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/224478329" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Xavier Xarles <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#224478329">(Jan 29 2021 at 14:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F/near/224478256">said</a>:</p>
<blockquote>
<p>We have congruence relations on monoids in mathlib.</p>
</blockquote>
<p>Yes, that's what we used.</p>



<a name="224478484"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/224478484" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#224478484">(Jan 29 2021 at 14:36)</a>:</h4>
<p>Ok, great <span aria-label="thumbs up" class="emoji emoji-1f44d" role="img" title="thumbs up">:thumbs_up:</span></p>



<a name="224478555"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/224478555" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#224478555">(Jan 29 2021 at 14:37)</a>:</h4>
<p>Kevin, I agree with you.  For the moment, I do not plan to touch quotients!</p>



<a name="224478895"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/224478895" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#224478895">(Jan 29 2021 at 14:39)</a>:</h4>
<p>Oh, and the so-called <code>ring_quot</code> in mathlib <a href="https://leanprover-community.github.io/mathlib_docs/find/ring_quot">docs#ring_quot</a> is actually a <code>semiring_quot</code>.</p>



<a name="224480409"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/224480409" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#224480409">(Jan 29 2021 at 14:50)</a>:</h4>
<p>One thing that I noticed is that a local ring is defined to be one for which either for every <code>a</code> in the ring, <code>a</code> or <code>1-a</code> is a unit.  While I do not know if <code>local_semiring</code> are useful, the <em>definition</em> would also apply to <code>comm_semiring</code>s if we required <code>a</code> or <code>1+a</code> to be a unit.</p>
<p>This definition is equivalent to the given one for <code>comm_ring</code>s.  What do people think of replacing the <code>-</code> by a <code>+</code> in </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">class</span> <span class="n">local_ring</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">α</span><span class="o">]</span> <span class="kd">extends</span> <span class="n">nontrivial</span> <span class="n">α</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="c1">-- old</span>
<span class="c1">-- (is_local : ∀ (a : α), (is_unit a) ∨ (is_unit (1 - a)))</span>
<span class="c1">-- candidate</span>
<span class="o">(</span><span class="n">is_local</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">),</span> <span class="o">(</span><span class="n">is_unit</span> <span class="n">a</span><span class="o">)</span> <span class="bp">∨</span> <span class="o">(</span><span class="n">is_unit</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">+</span> <span class="n">a</span><span class="o">)))</span>
</code></pre></div>



<a name="224480503"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/224480503" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#224480503">(Jan 29 2021 at 14:51)</a>:</h4>
<p>You can say that for all <code>a b</code> such that <code>1 = a + b</code>, at least one of <code>a</code> or <code>b</code> is a unit.</p>



<a name="224480510"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/224480510" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#224480510">(Jan 29 2021 at 14:51)</a>:</h4>
<p>That would be more symmetric.</p>



<a name="224480691"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/224480691" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#224480691">(Jan 29 2021 at 14:52)</a>:</h4>
<p>And IMO this definition makes sense from the point of view of localizations of semirings</p>



<a name="224480967"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/224480967" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#224480967">(Jan 29 2021 at 14:55)</a>:</h4>
<p>Adam, I like your definition, but I wonder whether using two variables summing to one is "Lean-better" than having a single variable.  As you know much more about Lean than I do, I defer this to you!</p>



<a name="224481236"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/224481236" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#224481236">(Jan 29 2021 at 14:57)</a>:</h4>
<p>This suggestion is from my mathematical taste, not really from my experience with lean ::)</p>



<a name="224481321"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/224481321" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#224481321">(Jan 29 2021 at 14:57)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> what do you think?</p>



<a name="224484684"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/224484684" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#224484684">(Jan 29 2021 at 15:19)</a>:</h4>
<p>I don't care what the definition says as long as anyone who fiddles with it reproves all of the API.</p>



<a name="224485016"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/224485016" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#224485016">(Jan 29 2021 at 15:20)</a>:</h4>
<p>And if the new proofs turn out to be twice as long you might have a hard job convincing the maintainers that this is a move in the right direction. However I suspect this will not happen -- the new proofs will probably be about the same size as the old ones</p>



<a name="224485311"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/224485311" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#224485311">(Jan 29 2021 at 15:22)</a>:</h4>
<p>Damiano, if you're amused by the definition of local ring, I have this vague memory that lean's definition of a local homomorphism doesn't assume that the source and target are local</p>



<a name="224485387"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/224485387" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#224485387">(Jan 29 2021 at 15:22)</a>:</h4>
<p>Of course it coincides with the correct definition when they are</p>



<a name="224485518"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/224485518" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#224485518">(Jan 29 2021 at 15:23)</a>:</h4>
<p>A nice summary of the local homomorphism story is "email from Buzzard to Conrad and de Jong", I'll dig it out</p>



<a name="224485694"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/224485694" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#224485694">(Jan 29 2021 at 15:24)</a>:</h4>
<p>Whenever I hear these things, it always makes me wonder what it means that you develop an "intuition" for mathematical concepts, when these concepts are then so far from what you actually use in implications...</p>



<a name="224488389"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/224488389" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#224488389">(Jan 29 2021 at 15:40)</a>:</h4>
<p>I don't know if you're into to this kind of thing <span class="user-mention" data-user-id="321459">@Damiano Testa</span> , but you might be able to get some intuition from this paper:<br>
<a href="https://doi.org/10.1016/0021-8693%2877%2990284-8">https://doi.org/10.1016/0021-8693%2877%2990284-8</a></p>



<a name="224488793"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/224488793" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#224488793">(Jan 29 2021 at 15:42)</a>:</h4>
<p>(see e.g. the bottom of page 242 for the "definition" of a "local ring")</p>



<a name="224495211"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/224495211" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#224495211">(Jan 29 2021 at 16:17)</a>:</h4>
<blockquote>
<p>A local ring homomorphism is usually defined in the books as f:R-&gt;S such that f(m_R) is a subset of m_S. The person who typed this definition into Lean went with the logically equivalent statement that if f(r) is a unit, then r is a unit. The linter immediately observed that the assumption that R and S were local was superfluous and this was a definition which made sense for an arbitrary ring homomorphism. OK. So it's the same situation -- the definition of local ring hom in Lean now doesn't assume that R and S are local, it just says that f is a ring hom such that if f(r) is a unit then r is a unit.</p>
<p>So yesterday I was doing some stuff with multivariable polynomials, and I changed a bit the proof that if A and B were local, and f:A-&gt;B was a local homomorphism then so was the induced ring hom A[[X]]-&gt;B[[X]] (here X can be a set of variables if you like). I was amused that the linter then complained about this lemma! It claimed that I didn't need A or B to be local in my proof. And indeed it's right -- an element of a power series ring is a unit iff the constant term is a unit.</p>
<p>I then mentioned this to Johan Commelin and Kenny Lau (two other Lean people interested in alg geom; Kenny is an UG at Imperial and Johan a post-doc in Freiburg). Some random thoughts came out of this. Any inclusion of number fields gives an inclusion of rings of integers which is a "local ring hom" in the above sense. More generally any injective integral extension is a local ring hom (I'm pretty sure I've seen this proof before recently, maybe it comes up in the proof of the Nullstellensatz?). If Spec(f): Spec(S)-&gt;Spec(R) is surjective then f is a local ring hom. Then we found this: <a href="https://stacks.math.columbia.edu/tag/00GQ">https://stacks.math.columbia.edu/tag/00GQ</a>, so clearly the idea has come up before. Is this concept of being a local ring hom, in the non-local setting, useful in some way? Discovered by a computer :-) Presumably discovered by a human first? I think a logician might say something like "f reflects units" or something?</p>
</blockquote>



<a name="224495640"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/224495640" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#224495640">(Jan 29 2021 at 16:20)</a>:</h4>
<p>De Jong's reponse:</p>
<blockquote>
<p>Comments: (1) if k is a field and f : k[x_1, \ldots, x_n] ---&gt; k[y_1,<br>
..., y_m] is a k-algebra map, then f is "local" in your sense if and<br>
only if f(x_1), ..., f(x_n) are algebraically independent. (2) If A =<br>
Gamma(C, O_X) where C is an affine smooth curve over a field and if B<br>
= Gamma(C - P, O_C) where P is a closed point on C which has infinite<br>
order in the class group of C then A ---&gt; B is "local" in your sense.</p>
<p>There are many ways that we could have generalized "local homomorphism<br>
of local rings" to ring maps. For example given f : R ---&gt; S we could<br>
ask</p>
<p>(a) f reflects units (what you said)<br>
(b) the image of Spec(f) contains all closed points<br>
(c) Spec(f) sends closed points to closed points</p>
<p>Observe that (b) implies (a). If I had to make a definition which<br>
applies to general rings I might have chosen the condition "(b) +<br>
(c)". But I understand that when formalizing it is very natural to<br>
choose (a).</p>
</blockquote>



<a name="224535181"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/%28comm_%29semiring%3A%20examples%3F/near/224535181" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Damiano Testa <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/(comm_)semiring.3A.20examples.3F.html#224535181">(Jan 29 2021 at 21:19)</a>:</h4>
<p>Dear Kevin,</p>
<p>thank you very much for digging this conversation out: it is very interesting!</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>