---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/Cayley-Hamilton.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html">Cayley-Hamilton</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="200180705"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200180705" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200180705">(Jun 09 2020 at 04:10)</a>:</h4>
<p>I think the "determinantal" proof of Cayley Hamilton, as presented in this pdf (<a href="https://people.reed.edu/~jerry/332/28ch.pdf">https://people.reed.edu/~jerry/332/28ch.pdf</a>) would be pretty amenable to Lean, except for the fact that polynomials cannot be evaluated (with the standard tools at least) into non-commutative values. I understand why this could make life easier for multivariate polynomials, but adjoining just one element to a commutative ring, say, gives another commutative ring. Can anyone recommend any fixes?</p>



<a name="200180853"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200180853" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200180853">(Jun 09 2020 at 04:15)</a>:</h4>
<p>It doesn't seem that <code>polynomial.eval₂</code> assumes the target ring is commutative.</p>



<a name="200180931"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200180931" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200180931">(Jun 09 2020 at 04:17)</a>:</h4>
<p>Thanks! Unfortunately <code> polynomial.eval₂_ring_hom </code> does assume the target ring is commutative, which might still set me back a little.</p>



<a name="200180989"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200180989" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200180989">(Jun 09 2020 at 04:18)</a>:</h4>
<p>You do need to know that your map <code>f : R \to S</code> lands in the centre of <code>S</code>.</p>



<a name="200181003"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200181003" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200181003">(Jun 09 2020 at 04:19)</a>:</h4>
<p>i.e. you could eval into any <code>R</code>-algebra, more generally than along a ring_hom to a commutative ring.</p>



<a name="200181005"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200181005" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200181005">(Jun 09 2020 at 04:19)</a>:</h4>
<p>This should be fixed!</p>



<a name="200181149"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200181149" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200181149">(Jun 09 2020 at 04:22)</a>:</h4>
<p>It would be a pretty major overhaul of <code>polynomial.lean</code>, however.</p>



<a name="200181154"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200181154" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200181154">(Jun 09 2020 at 04:22)</a>:</h4>
<p>I know <span class="user-mention" data-user-id="214703">@Yury G. Kudryashov</span> has been planning various refactors there, but I'm not sure where he's up to.</p>



<a name="200181324"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200181324" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200181324">(Jun 09 2020 at 04:26)</a>:</h4>
<p>Well, now that I'm deconfused about <code>polynomial.eval₂</code>,  I should be able to prove that the image of my polynomial evaluation is a commutative subring of matrices, which should be enough to use determinants.</p>



<a name="200183693"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200183693" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200183693">(Jun 09 2020 at 05:34)</a>:</h4>
<p>Sorry, I'll return to the <code>polynomial</code>s refactor tomorrow.</p>



<a name="200185001"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200185001" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200185001">(Jun 09 2020 at 06:10)</a>:</h4>
<p>After my refactor <code>aeval</code> will work for matrices.</p>



<a name="200185009"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200185009" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200185009">(Jun 09 2020 at 06:10)</a>:</h4>
<p>(or any other algebra)</p>



<a name="200185013"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200185013" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200185013">(Jun 09 2020 at 06:10)</a>:</h4>
<p>Currently it assumes that the target ring is commutative.</p>



<a name="200190248"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200190248" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200190248">(Jun 09 2020 at 07:40)</a>:</h4>
<p>[1/n]: <a href="https://github.com/leanprover-community/mathlib/issues/3003">#3003</a></p>



<a name="200191219"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200191219" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200191219">(Jun 09 2020 at 07:52)</a>:</h4>
<p><span class="user-mention" data-user-id="214703">@Yury G. Kudryashov</span> Thank you so much for doing this!</p>



<a name="200635948"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200635948" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200635948">(Jun 12 2020 at 05:23)</a>:</h4>
<p>I have written what I'm pretty sure is most of a proof of Cayley-Hamilton.</p>



<a name="200635949"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200635949" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200635949">(Jun 12 2020 at 05:23)</a>:</h4>
<p>It's in this repository, with another project. <a href="https://github.com/jalex-stark/friendship-theorem/tree/master/src">https://github.com/jalex-stark/friendship-theorem/tree/master/src</a></p>



<a name="200636007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200636007" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200636007">(Jun 12 2020 at 05:25)</a>:</h4>
<p>The only <code>sorry</code>s left have to do with <code>polynomial.eval2</code>, and should be fixed by either hard work, better understanding of how to infer instances, or waiting for the refactor to make polynomials evaluation less commutativity-dependent.</p>



<a name="200636427"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200636427" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200636427">(Jun 12 2020 at 05:37)</a>:</h4>
<p>I'm sorry for slowing you down. I have a several refactors on the queue. I'll try to switch back to <code>polynomial</code>s in about an hour. UPD: unless I'll go to bed earlier.</p>



<a name="200636731"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200636731" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200636731">(Jun 12 2020 at 05:46)</a>:</h4>
<p>What is going on with</p>
<div class="codehilite"><pre><span></span><code><span class="n">def</span> <span class="n">choose_index</span> <span class="o">:</span> <span class="n">n</span> <span class="o">:=</span> <span class="n">arbitrary</span> <span class="n">n</span>

<span class="n">def</span> <span class="n">vec_to_one_row</span> <span class="o">(</span><span class="n">vec</span> <span class="o">:</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">R</span><span class="o">):</span> <span class="n">matrix</span> <span class="n">n</span> <span class="n">n</span> <span class="n">R</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">n</span><span class="o">),</span> <span class="n">ite</span> <span class="o">(</span><span class="n">i</span> <span class="bp">=</span> <span class="n">choose_index</span><span class="o">)</span> <span class="n">vec</span> <span class="mi">0</span>
</code></pre></div>


<p>This stuff seems weird.</p>



<a name="200636851"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200636851" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200636851">(Jun 12 2020 at 05:50)</a>:</h4>
<p>I wanted to apply a matrix of matrices to a vector of vectors, but <code>matrix.mul_vec</code> and such seem to require that the entries of the matrix and vector belong to the same ring</p>



<a name="200636858"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200636858" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200636858">(Jun 12 2020 at 05:51)</a>:</h4>
<p>So I came up with a way to replace the vector of vectors with a matrix of matrices</p>



<a name="200636907"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200636907" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200636907">(Jun 12 2020 at 05:53)</a>:</h4>
<p>Kind of weird, I agree, but easier in the short-term than developing the “right” generalization of matrix multiplication to ring actions or something</p>



<a name="200638200"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200638200" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200638200">(Jun 12 2020 at 06:28)</a>:</h4>
<p>I think it's going to require a bit of restructuring before others could use this proof.</p>



<a name="200638553"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200638553" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200638553">(Jun 12 2020 at 06:36)</a>:</h4>
<p><span class="user-mention" data-user-id="214703">@Yury G. Kudryashov</span>, I just experimented a bit with generalising parts of <code>polynomial.lean</code> to <code>semiring</code>, rather than <code>comm_semiring</code>.</p>



<a name="200638555"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200638555" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200638555">(Jun 12 2020 at 06:36)</a>:</h4>
<p>How much would it get in the way of your refactoring plans if I PR'd that?</p>



<a name="200638561"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200638561" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200638561">(Jun 12 2020 at 06:36)</a>:</h4>
<p>I can try again later if it's going to be annoying.</p>



<a name="200638567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200638567" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200638567">(Jun 12 2020 at 06:37)</a>:</h4>
<p>What parts?</p>



<a name="200638626"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200638626" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200638626">(Jun 12 2020 at 06:38)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/3043">https://github.com/leanprover-community/mathlib/pull/3043</a></p>



<a name="200638633"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200638633" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200638633">(Jun 12 2020 at 06:38)</a>:</h4>
<p>So everything before <code>eval2</code> first appears, except that everything about <code>C</code> still assumes a <code>comm_semiring</code>.</p>



<a name="200638638"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200638638" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200638638">(Jun 12 2020 at 06:39)</a>:</h4>
<p>Hm, that's an interesting point <span class="user-mention" data-user-id="302826">@Aaron Anderson</span> . Matrices are supposed to be the finite based version of linear maps between vector spaces, so there should be a way to turn a matrix into a linear map</p>



<a name="200638696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200638696" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200638696">(Jun 12 2020 at 06:40)</a>:</h4>
<p>My next refactor will deal with <code>eval₂</code>, <code>eval</code>, and <code>aeval</code>.</p>



<a name="200638703"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200638703" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200638703">(Jun 12 2020 at 06:40)</a>:</h4>
<p>So what I was just doing is perhaps orthogonal?</p>



<a name="200638705"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200638705" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200638705">(Jun 12 2020 at 06:40)</a>:</h4>
<p>Yes.</p>



<a name="200638714"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200638714" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200638714">(Jun 12 2020 at 06:40)</a>:</h4>
<p>(It wasn't intended as a real PR; just the quickest way to show you now.)</p>



<a name="200638721"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200638721" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200638721">(Jun 12 2020 at 06:41)</a>:</h4>
<p>Ok. I will not do anything that touches <code>eval*</code>!</p>



<a name="200638725"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200638725" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200638725">(Jun 12 2020 at 06:41)</a>:</h4>
<p>Given a basis on V and a vector in V, you can produce a list of coefficients in R, which you can use <code>mul_vec</code> on to get another list of coefficients in R. Given a basis on W you can evaluate the list to get a vector in W</p>



<a name="200638785"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200638785" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200638785">(Jun 12 2020 at 06:42)</a>:</h4>
<p>So it seems like nothing new is needed in matrices, <code>mul_vec</code> is sufficient. It just needs to be coupled with constructions for converting from R^n to and from a vector space</p>



<a name="200639471"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200639471" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Aaron Anderson <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200639471">(Jun 12 2020 at 06:58)</a>:</h4>
<p>I’ll try to clean it up soon. Ultimately these vectors of vectors and matrices of matrices really come from tensor products, so maybe the best way to express this proof is by fleshing out the theory of tensors-as-matrices a bit</p>



<a name="200643514"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200643514" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200643514">(Jun 12 2020 at 08:04)</a>:</h4>
<p>Another fun thing to prove might be</p>
<div class="codehilite"><pre><span></span><code><span class="n">matrix</span> <span class="n">n</span> <span class="n">n</span> <span class="o">(</span><span class="n">polynomial</span> <span class="n">R</span><span class="o">)</span> <span class="err">≃</span><span class="bp">+*</span> <span class="n">polynomial</span> <span class="o">(</span><span class="n">matrix</span> <span class="n">n</span> <span class="n">n</span> <span class="n">R</span><span class="o">)</span>
</code></pre></div>


<p>(this requires <a href="https://github.com/leanprover-community/mathlib/issues/3043">#3043</a> before it even makes sense)</p>



<a name="200643535"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200643535" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200643535">(Jun 12 2020 at 08:05)</a>:</h4>
<p>if you have that, there is what looks like a lovely proof of Cayley-Hamilton at <a href="http://drorbn.net/AcademicPensieve/2015-12/CayleyHamilton.pdf">http://drorbn.net/AcademicPensieve/2015-12/CayleyHamilton.pdf</a></p>



<a name="200644561"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200644561" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200644561">(Jun 12 2020 at 08:19)</a>:</h4>
<p>there must be a way to generalize this statement</p>



<a name="200644766"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200644766" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200644766">(Jun 12 2020 at 08:23)</a>:</h4>
<p>Its an <code>R</code>-alghom</p>



<a name="200644902"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200644902" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200644902">(Jun 12 2020 at 08:25)</a>:</h4>
<p>this is saying that two functors commute</p>



<a name="200644930"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200644930" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200644930">(Jun 12 2020 at 08:25)</a>:</h4>
<p>looks like a homomorphism condition to me</p>



<a name="200645480"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200645480" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200645480">(Jun 12 2020 at 08:33)</a>:</h4>
<p>They only commute up to natural isomorphism</p>



<a name="200650021"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200650021" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200650021">(Jun 12 2020 at 09:26)</a>:</h4>
<p>what is the universal property for <code>matrix n n</code>? Can we prove this (natural) isomorphism by comparing the universal properties of the LHS and RHS?</p>



<a name="200650212"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200650212" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200650212">(Jun 12 2020 at 09:29)</a>:</h4>
<p>universal property in the category of R-algebras? I want to say something like "it admits an embedding of every n-dimensional R-algebra" but that's not quite it</p>



<a name="200650615"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200650615" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200650615">(Jun 12 2020 at 09:34)</a>:</h4>
<p>like <code>polynomial R</code> is the initial object in the category of "rings S equipped with a map from R and a chosen element"</p>



<a name="200650618"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200650618" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200650618">(Jun 12 2020 at 09:34)</a>:</h4>
<p>what is <code>matrix n n R</code>?</p>



<a name="200650630"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200650630" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200650630">(Jun 12 2020 at 09:34)</a>:</h4>
<p>End_R(R^n)</p>



<a name="200650636"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200650636" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200650636">(Jun 12 2020 at 09:34)</a>:</h4>
<p>up to natural isomorphism</p>



<a name="200650685"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200650685" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200650685">(Jun 12 2020 at 09:35)</a>:</h4>
<p>but just saying that doesn't give you <code>matrix n n (polynomial R) ≃+* polynomial (matrix n n R)</code> for free</p>



<a name="200651004"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200651004" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200651004">(Jun 12 2020 at 09:39)</a>:</h4>
<p><a href="https://mathoverflow.net/a/142445">https://mathoverflow.net/a/142445</a></p>



<a name="200651130"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200651130" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200651130">(Jun 12 2020 at 09:41)</a>:</h4>
<p>doesn't actually seem very useful</p>



<a name="200651270"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200651270" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200651270">(Jun 12 2020 at 09:42)</a>:</h4>
<p>Yeah... it's a universal coproperty <span aria-label="rofl" class="emoji emoji-1f923" role="img" title="rofl">:rofl:</span></p>



<a name="200651447"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200651447" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200651447">(Jun 12 2020 at 09:45)</a>:</h4>
<p>does anyone have a math proof of this isomorphism? it's not clear to me<br>
edit: ah, the isomorphism concretely is "collect like powers of the indeterminate"</p>



<a name="200651481"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200651481" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200651481">(Jun 12 2020 at 09:45)</a>:</h4>
<p>It's a bit sad to struggle with Cayley-Hamilton for matrices when this theorem has not much to do with matrices, and we'll need to do multilinear algebra properly at some point. But I guess it still progress to work towards having it anyway (and I certainly don't have time for multilinear algebra).</p>



<a name="200652404"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200652404" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200652404">(Jun 12 2020 at 09:58)</a>:</h4>
<p>The proof, at least as a <code>≃+</code> is just a bunch of currying, swapping, uncurrying, and using <a href="https://leanprover-community.github.io/mathlib_docs/find/finsupp.equiv_fun_on_fintype/src">src#finsupp.equiv_fun_on_fintype</a></p>



<a name="200654316"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200654316" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Wärn <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200654316">(Jun 12 2020 at 10:23)</a>:</h4>
<p><code>polynomial</code> and <code>matrix n n</code> are both 'semigroup algebras', over the monoid of natural numbers and the semigroup <code>fin n x fin n</code>, viewed as indexing the standard basis of <code>matrix n n</code>, respectively</p>



<a name="200654759"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200654759" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Wärn <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200654759">(Jun 12 2020 at 10:29)</a>:</h4>
<p>I guess the latter is not quite a semigroup actually...</p>



<a name="200654789"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200654789" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200654789">(Jun 12 2020 at 10:29)</a>:</h4>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo fence="true">(</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>a</mi><mn>0</mn></msub><mo>+</mo><msub><mi>a</mi><mn>1</mn></msub><mi>X</mi><mo>+</mo><msub><mi>a</mi><mn>2</mn></msub><msup><mi>X</mi><mn>2</mn></msup><mo>+</mo><mo>⋯</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>b</mi><mn>0</mn></msub><mo>+</mo><msub><mi>b</mi><mn>1</mn></msub><mi>X</mi><mo>+</mo><msub><mi>b</mi><mn>2</mn></msub><msup><mi>X</mi><mn>2</mn></msup><mo>+</mo><mo>⋯</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>c</mi><mn>0</mn></msub><mo>+</mo><msub><mi>c</mi><mn>1</mn></msub><mi>X</mi><mo>+</mo><msub><mi>c</mi><mn>2</mn></msub><msup><mi>X</mi><mn>2</mn></msup><mo>+</mo><mo>⋯</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>d</mi><mn>0</mn></msub><mo>+</mo><msub><mi>d</mi><mn>1</mn></msub><mi>X</mi><mo>+</mo><msub><mi>d</mi><mn>2</mn></msub><msup><mi>X</mi><mn>2</mn></msup><mo>+</mo><mo>⋯</mo></mrow></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow><annotation encoding="application/x-tex">\begin{pmatrix}
a_0+a_1X+a_2X^2+\cdots&amp;b_0+b_1X+b_2X^2+\cdots\\
c_0+c_1X+c_2X^2+\cdots&amp;d_0+d_1X+d_2X^2+\cdots
\end{pmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="minner">⋯</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="minner">⋯</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="minner">⋯</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="minner">⋯</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span></span></span></span></span></p>
<p>"equals"</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mo fence="true">(</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>a</mi><mn>0</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>b</mi><mn>0</mn></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>c</mi><mn>0</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>d</mi><mn>0</mn></msub></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow><mo>+</mo><mrow><mo fence="true">(</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>a</mi><mn>1</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>b</mi><mn>1</mn></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>c</mi><mn>1</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>d</mi><mn>1</mn></msub></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow><mi>X</mi><mo>+</mo><mrow><mo fence="true">(</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>a</mi><mn>2</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>b</mi><mn>2</mn></msub></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>c</mi><mn>2</mn></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><msub><mi>d</mi><mn>2</mn></msub></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow><msup><mi>X</mi><mn>2</mn></msup><mo>+</mo><mo>⋯</mo></mrow><annotation encoding="application/x-tex">\begin{pmatrix}a_0&amp;b_0\\c_0&amp;d_0\end{pmatrix}+\begin{pmatrix}a_1&amp;b_1\\c_1&amp;d_1\end{pmatrix}X+\begin{pmatrix}a_2&amp;b_2\\c_2&amp;d_2\end{pmatrix}X^2+\cdots</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.31em;vertical-align:0em;"></span><span class="minner">⋯</span></span></span></span></span></p>



<a name="200655043"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200655043" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200655043">(Jun 12 2020 at 10:33)</a>:</h4>
<p>A mathematican can say they're equal because they're equal in some fluid over-set</p>



<a name="200655168"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200655168" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200655168">(Jun 12 2020 at 10:34)</a>:</h4>
<p>Might well work for multivariate polynomials too. Might have to be careful with infinite matrices</p>



<a name="200655379"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200655379" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Wärn <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200655379">(Jun 12 2020 at 10:37)</a>:</h4>
<p>Maybe the correct thing to say is that <code>polynomial A</code> for an R-algebra A is <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>⊗</mo><mi mathvariant="double-struck">Z</mi><mo stretchy="false">[</mo><mi>X</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">A \otimes \mathbb Z[X]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⊗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathbb">Z</span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mclose">]</span></span></span></span>, and <code>matrix n n A</code> is <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>⊗</mo><msub><mi>M</mi><mi>n</mi></msub><mo stretchy="false">(</mo><mi mathvariant="double-struck">Z</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">A \otimes M_n(\mathbb Z)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⊗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathbb">Z</span><span class="mclose">)</span></span></span></span>? Then it's associativity and commutativity of tensor product?</p>



<a name="200655434"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200655434" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200655434">(Jun 12 2020 at 10:37)</a>:</h4>
<p>R=<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">Z</mi></mrow><annotation encoding="application/x-tex">\mathbb{Z}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord"><span class="mord mathbb">Z</span></span></span></span></span></p>



<a name="200655487"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200655487" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200655487">(Jun 12 2020 at 10:38)</a>:</h4>
<p>and this proof generalises to mv_polynomial</p>



<a name="200655562"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200655562" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Wärn <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200655562">(Jun 12 2020 at 10:39)</a>:</h4>
<p>Are you saying we may assume R is <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">Z</mi></mrow><annotation encoding="application/x-tex">\mathbb Z</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord mathbb">Z</span></span></span></span> or that this only makes sense for <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">Z</mi></mrow><annotation encoding="application/x-tex">\mathbb Z</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord mathbb">Z</span></span></span></span>?</p>



<a name="200655627"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200655627" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200655627">(Jun 12 2020 at 10:40)</a>:</h4>
<p>I was just remarking that you said R-algebra but R is mentioned precisely once in your comment; you either tensor with R[X] or change R to Z and you're fine</p>



<a name="200656045"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200656045" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> David Wärn <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200656045">(Jun 12 2020 at 10:46)</a>:</h4>
<p>Right, I think I meant "is" as in "isomorphic as R-algebras", but that also works</p>



<a name="200656085"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200656085" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200656085">(Jun 12 2020 at 10:46)</a>:</h4>
<p>I was just remarking that you said R-algebra but R is mentioned precisely once in your comment; you either tensor with R[X] or change R to Z and you're fine</p>



<a name="200657957"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200657957" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200657957">(Jun 12 2020 at 11:15)</a>:</h4>
<p>We don't have tensor products of R-algebras yet?</p>



<a name="200658461"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200658461" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200658461">(Jun 12 2020 at 11:23)</a>:</h4>
<p>nope, we don't afaik</p>



<a name="200679561"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/200679561" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#200679561">(Jun 12 2020 at 14:49)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/3050">#3050</a></p>



<a name="202172880"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202172880" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202172880">(Jun 27 2020 at 07:30)</a>:</h4>
<p>I have a very <code>sorry</code>ful proof of Cayley-Hamilton, following the argument at  <a href="http://drorbn.net/AcademicPensieve/2015-12/CayleyHamilton.pdf">http://drorbn.net/AcademicPensieve/2015-12/CayleyHamilton.pdf</a>.</p>



<a name="202172881"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202172881" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202172881">(Jun 27 2020 at 07:30)</a>:</h4>
<p>It is still a mess and needs some refactoring.</p>



<a name="202172888"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202172888" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202172888">(Jun 27 2020 at 07:31)</a>:</h4>
<p>It also needs some <code>sorry</code>s filled in. I am confident all the remaining ones are "easy" (no design or API changes need, just bashing around with polynomials and/or matrices).</p>



<a name="202172903"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202172903" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202172903">(Jun 27 2020 at 07:31)</a>:</h4>
<p>If anyone wants to jump in and hack on it, go for it: <code>git checkout origin/cayley_hamilton</code></p>



<a name="202172911"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202172911" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202172911">(Jun 27 2020 at 07:31)</a>:</h4>
<p>I will start cleaning up the structure later</p>



<a name="202173166"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202173166" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202173166">(Jun 27 2020 at 07:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110087">Scott Morrison</span> <a href="#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202172903">said</a>:</p>
<blockquote>
<p>If anyone wants to jump in and hack on it, go for it: <code>git checkout origin/cayley_hamilton</code></p>
</blockquote>
<p>Scott means <code>leanproject get mathlib:cayley_hamilton</code>so that you get oleans too.</p>



<a name="202173516"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202173516" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202173516">(Jun 27 2020 at 07:48)</a>:</h4>
<p>Unfortunately Azure isn't done yet</p>



<a name="202174109"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202174109" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202174109">(Jun 27 2020 at 08:03)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> I'm seeing <code>def baz</code>, shouldn't that be <code>def bar</code> or <code>def dror</code>? <span aria-label="stuck out tongue wink" class="emoji emoji-1f61c" role="img" title="stuck out tongue wink">:stuck_out_tongue_wink:</span>  [/jk]</p>



<a name="202174165"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202174165" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202174165">(Jun 27 2020 at 08:05)</a>:</h4>
<p>Also, I would prefere <code>M</code> or <code>A</code> for matrices, over <code>m</code>.</p>



<a name="202174308"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202174308" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202174308">(Jun 27 2020 at 08:09)</a>:</h4>
<p>All the names are up for grabs. :-)</p>



<a name="202174403"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202174403" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202174403">(Jun 27 2020 at 08:12)</a>:</h4>
<p>Mostly the proof is/will be only the usual de Bruijn factor relative to the informal proof, but the statement "polynomials of matrices are matrices of polynomials" takes a ridiculously long time to set up properly (because we need both a good characterisation of the function, and that's it's an algebra equivalence). Having finished with the route I took (discussed earlier in this thread), I'm not sure it was the easiest one. :-)</p>



<a name="202174706"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202174706" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202174706">(Jun 27 2020 at 08:22)</a>:</h4>
<p>But the resulting proof is quite nice. And the statement <code>baz</code> is very useful anyways. So we will profit in the future, I'm quite sure.</p>



<a name="202174723"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202174723" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202174723">(Jun 27 2020 at 08:23)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202173516">said</a>:</p>
<blockquote>
<p>Unfortunately Azure isn't done yet</p>
</blockquote>
<p>It's done now (unless someone pushed a new commit in the mean time).</p>



<a name="202174980"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202174980" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202174980">(Jun 27 2020 at 08:30)</a>:</h4>
<p>I just did (-;</p>



<a name="202174982"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202174982" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202174982">(Jun 27 2020 at 08:30)</a>:</h4>
<p>I pushed a proof of <code>q</code></p>



<a name="202175049"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202175049" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202175049">(Jun 27 2020 at 08:32)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> how did I let you get away with defining <code>scalar</code> in mathlib, but not <code>scalar_apply</code>?</p>



<a name="202175596"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202175596" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202175596">(Jun 27 2020 at 08:46)</a>:</h4>
<p><span class="user-mention" data-user-id="252300">@Jalex Stark</span> I pushed another bit (just a heads up)</p>



<a name="202175744"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202175744" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202175744">(Jun 27 2020 at 08:50)</a>:</h4>
<p>thanks; i merged and pushed another bit</p>



<a name="202175762"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202175762" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202175762">(Jun 27 2020 at 08:51)</a>:</h4>
<p><span class="user-mention" data-user-id="252300">@Jalex Stark</span> Did you know about <code>git pull --rebase</code>?<br>
Not very important, but it avoids the merges (unless there are conflicts) by replaying your work on top of whatever you pull.</p>



<a name="202175813"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202175813" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202175813">(Jun 27 2020 at 08:52)</a>:</h4>
<p>(in this case there were conflicts; two lemmas that we both proved, yours seemed better so I accepted them)</p>



<a name="202175818"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202175818" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202175818">(Jun 27 2020 at 08:52)</a>:</h4>
<p>i'm not sure i understand what you mean by avoiding merging. if there aren't conflicts, <code>git pull</code> will handle the merge by itself?</p>



<a name="202175824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202175824" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202175824">(Jun 27 2020 at 08:53)</a>:</h4>
<p>This is orthogonal.</p>



<a name="202175828"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202175828" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202175828">(Jun 27 2020 at 08:53)</a>:</h4>
<p><code>git pull --rebase</code> will also handle conflicts, with your help if needed.</p>



<a name="202175838"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202175838" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202175838">(Jun 27 2020 at 08:53)</a>:</h4>
<p>Yes, I didn't phrase it correctly</p>



<a name="202175883"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202175883" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202175883">(Jun 27 2020 at 08:54)</a>:</h4>
<p>It will replay <em>automatically</em> (unless there are conflicts) is what I should have written.</p>



<a name="202175911"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202175911" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202175911">(Jun 27 2020 at 08:55)</a>:</h4>
<p><code>git pull</code> will merge, but you can "rewrite history" by taking your local changes, storing them in the file cabinat (so to speak), doing a <code>git pull</code> and then taking your local changes and replaying them on top of whatever was pulled.</p>



<a name="202175916"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202175916" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202175916">(Jun 27 2020 at 08:55)</a>:</h4>
<p>As I said, it's not very important.</p>



<a name="202175921"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202175921" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202175921">(Jun 27 2020 at 08:55)</a>:</h4>
<p>Because once it is merged into mathlib the entire git history is squashed into 1 commit anyways</p>



<a name="202175922"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202175922" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202175922">(Jun 27 2020 at 08:55)</a>:</h4>
<p>ah i see, git pull rebase will pretend that I pulled before making my changes</p>



<a name="202175973"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202175973" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202175973">(Jun 27 2020 at 08:56)</a>:</h4>
<p>it kind of performs a reidemeister move on the commit tree</p>



<a name="202176297"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202176297" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202176297">(Jun 27 2020 at 09:07)</a>:</h4>
<p>Once your git history is a non-trivial knot... didn't you do something wrong?? <span aria-label="grinning face with smiling eyes" class="emoji emoji-1f601" role="img" title="grinning face with smiling eyes">:grinning_face_with_smiling_eyes:</span></p>



<a name="202176451"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202176451" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202176451">(Jun 27 2020 at 09:12)</a>:</h4>
<p>working with double sums feels too hard</p>



<a name="202176459"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202176459" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202176459">(Jun 27 2020 at 09:13)</a>:</h4>
<p>I pushed a proof of <code>sum_over_range'</code></p>



<a name="202176697"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202176697" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202176697">(Jun 27 2020 at 09:21)</a>:</h4>
<p>thanks for all the work while I was eating dinner :-)</p>



<a name="202177651"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202177651" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202177651">(Jun 27 2020 at 09:47)</a>:</h4>
<p>I pushed some more stuff</p>



<a name="202178072"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202178072" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202178072">(Jun 27 2020 at 09:59)</a>:</h4>
<p>Turns out <code>coeff_mul_zero</code> has a rather shorter proof. :-)</p>



<a name="202178377"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202178377" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202178377">(Jun 27 2020 at 10:06)</a>:</h4>
<p><code>simp [coeff_mul]</code>?</p>



<a name="202179205"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202179205" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202179205">(Jun 27 2020 at 10:30)</a>:</h4>
<p>After a digression involving simp and lunch, I'm back (-;</p>



<a name="202179207"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202179207" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202179207">(Jun 27 2020 at 10:30)</a>:</h4>
<p>do we already have an induction principle like this?</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>

<span class="n">noncomputable</span> <span class="n">theory</span>
<span class="n">open_locale</span> <span class="n">big_operators</span>
<span class="n">open_locale</span> <span class="n">classical</span>


<span class="kn">lemma</span> <span class="n">sum_add_induction</span> <span class="o">{</span><span class="n">α</span> <span class="n">M</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">add_comm_monoid</span> <span class="n">M</span><span class="o">]</span> <span class="o">{</span><span class="n">p</span> <span class="o">:</span> <span class="n">M</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">}</span>
  <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">M</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">p_add</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">p</span> <span class="n">a</span> <span class="bp">→</span> <span class="n">p</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">p</span> <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">))</span> <span class="o">(</span><span class="n">p_zero</span> <span class="o">:</span> <span class="n">p</span> <span class="mi">0</span><span class="o">)</span> <span class="o">(</span><span class="n">p_s</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">s</span><span class="o">,</span> <span class="n">p</span> <span class="err">$</span> <span class="n">f</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span>
<span class="n">p</span> <span class="err">$</span> <span class="err">∑</span> <span class="n">x</span> <span class="k">in</span> <span class="n">s</span><span class="o">,</span> <span class="n">f</span> <span class="n">x</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">induction</span> <span class="n">s</span> <span class="kn">using</span> <span class="n">finset</span><span class="bp">.</span><span class="n">induction</span> <span class="k">with</span> <span class="n">x</span> <span class="n">hx</span> <span class="n">s</span> <span class="n">hs</span><span class="o">,</span> <span class="n">simpa</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">finset</span><span class="bp">.</span><span class="n">sum_insert</span><span class="o">,</span> <span class="n">swap</span><span class="o">,</span> <span class="n">assumption</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">p_add</span><span class="o">,</span> <span class="n">apply</span> <span class="n">p_s</span><span class="o">,</span> <span class="n">simp</span><span class="o">,</span>
  <span class="n">apply</span> <span class="n">hs</span><span class="o">,</span> <span class="n">intros</span> <span class="n">a</span> <span class="n">ha</span><span class="o">,</span> <span class="n">apply</span> <span class="n">p_s</span><span class="o">,</span> <span class="n">simp</span> <span class="o">[</span><span class="n">ha</span><span class="o">],</span>
<span class="kn">end</span>
</code></pre></div>



<a name="202179329"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202179329" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202179329">(Jun 27 2020 at 10:34)</a>:</h4>
<p>I don't recognise it</p>



<a name="202179594"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202179594" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202179594">(Jun 27 2020 at 10:42)</a>:</h4>
<p>Should we have a definition for matrices like<br>
<code>(λ i' j', if i' = i ∧ j' = j then x else 0)</code>?</p>



<a name="202179713"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202179713" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202179713">(Jun 27 2020 at 10:45)</a>:</h4>
<p>in maths this is sometimes called an "elementary matrix"?</p>



<a name="202179770"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202179770" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202179770">(Jun 27 2020 at 10:46)</a>:</h4>
<p>i think we could use some simp lemmas for these in the current work</p>



<a name="202179805"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202179805" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202179805">(Jun 27 2020 at 10:47)</a>:</h4>
<p>Yes.</p>



<a name="202180085"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202180085" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202180085">(Jun 27 2020 at 10:55)</a>:</h4>
<p>Wiki says that elementary matrices are those that differ from the identity matrix by a single row/col operation</p>



<a name="202180212"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202180212" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202180212">(Jun 27 2020 at 10:58)</a>:</h4>
<p>in quantum computing we just call them <code>\ketbra i j</code></p>



<a name="202180229"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202180229" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202180229">(Jun 27 2020 at 10:59)</a>:</h4>
<p>is that notion from wikipedia a useful one?</p>



<a name="202180276"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202180276" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202180276">(Jun 27 2020 at 11:00)</a>:</h4>
<p>Maybe we should just have <code>\delta</code></p>



<a name="202180307"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202180307" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202180307">(Jun 27 2020 at 11:01)</a>:</h4>
<p>I think it's fine to just claim the name <code>elementary_matrix</code> for this concept. we can cook up a new name for the wiki thing, if we need it.</p>



<a name="202180444"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202180444" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202180444">(Jun 27 2020 at 11:04)</a>:</h4>
<p>should this go in data.matrix.basic?</p>



<a name="202180446"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202180446" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202180446">(Jun 27 2020 at 11:04)</a>:</h4>
<p>I think so</p>



<a name="202180457"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202180457" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202180457">(Jun 27 2020 at 11:05)</a>:</h4>
<p>Of course it needs 25 compatibility lemmas with <code>1</code> and <code>0</code>, and <code>diagonal</code> and <code>scalar</code>, etc...</p>



<a name="202180468"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202180468" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202180468">(Jun 27 2020 at 11:05)</a>:</h4>
<p>Working with coefficients and degrees of polynomials is so painful!</p>



<a name="202180472"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202180472" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202180472">(Jun 27 2020 at 11:05)</a>:</h4>
<p>And <code>trace elementary</code> and <code>det (elementary i j)</code> etc</p>



<a name="202180624"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202180624" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202180624">(Jun 27 2020 at 11:09)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> On which sorrys are you currently working?</p>



<a name="202180631"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202180631" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202180631">(Jun 27 2020 at 11:09)</a>:</h4>
<p>I pushed a few, but I think I'm going to stop for a while</p>



<a name="202180633"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202180633" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202180633">(Jun 27 2020 at 11:09)</a>:</h4>
<p>So they're all yours :-)</p>



<a name="202180642"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202180642" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202180642">(Jun 27 2020 at 11:09)</a>:</h4>
<p>we're pretty close</p>



<a name="202180801"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202180801" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202180801">(Jun 27 2020 at 11:13)</a>:</h4>
<p>I have this so far, I think I should put it in a separate PR?</p>
<div class="codehilite"><pre><span></span><code><span class="kn">variables</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">β</span><span class="o">]</span>
<span class="kn">variables</span> <span class="o">{</span><span class="n">m</span> <span class="n">n</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">m</span><span class="o">]</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">n</span><span class="o">]</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">m</span><span class="o">]</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">n</span><span class="o">]</span>

<span class="bp">@</span><span class="o">[</span><span class="kn">reducible</span><span class="o">]</span>
<span class="n">def</span> <span class="n">elementary_matrix</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="n">j</span> <span class="o">:</span> <span class="n">m</span><span class="o">)</span> <span class="o">:</span> <span class="n">matrix</span> <span class="n">n</span> <span class="n">m</span> <span class="n">α</span> <span class="o">:=</span>
<span class="o">(</span><span class="bp">λ</span> <span class="n">i&#39;</span> <span class="n">j&#39;</span><span class="o">,</span> <span class="k">if</span> <span class="n">i&#39;</span> <span class="bp">=</span> <span class="n">i</span> <span class="bp">∧</span> <span class="n">j&#39;</span> <span class="bp">=</span> <span class="n">j</span> <span class="k">then</span> <span class="mi">1</span> <span class="k">else</span> <span class="mi">0</span><span class="o">)</span>

<span class="kn">lemma</span> <span class="n">matrix_eq_sum_elementary</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">matrix</span> <span class="n">n</span> <span class="n">m</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span>
<span class="n">x</span> <span class="bp">=</span> <span class="err">∑</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="n">j</span> <span class="o">:</span> <span class="n">m</span><span class="o">),</span> <span class="o">(</span><span class="n">x</span> <span class="n">i</span> <span class="n">j</span><span class="o">)</span> <span class="err">•</span> <span class="n">elementary_matrix</span> <span class="n">i</span> <span class="n">j</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">ext</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">finset</span><span class="bp">.</span><span class="n">sum_apply</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">finset</span><span class="bp">.</span><span class="n">sum_apply</span><span class="o">,</span>
    <span class="n">rw</span> <span class="err">←</span> <span class="n">finset</span><span class="bp">.</span><span class="n">sum_subset</span><span class="o">,</span> <span class="n">swap</span> <span class="mi">4</span><span class="o">,</span> <span class="n">exact</span> <span class="o">{</span><span class="n">i</span><span class="o">},</span>
    <span class="o">{</span> <span class="n">norm_num</span><span class="o">,</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">simp</span> <span class="o">},</span>
    <span class="n">intros</span><span class="o">,</span> <span class="n">norm_num</span> <span class="n">at</span> <span class="n">a</span><span class="o">,</span> <span class="n">norm_num</span><span class="o">,</span>
    <span class="n">convert</span> <span class="n">finset</span><span class="bp">.</span><span class="n">sum_const_zero</span><span class="o">,</span>
    <span class="n">ext</span><span class="o">,</span> <span class="n">norm_num</span><span class="o">,</span> <span class="n">rw</span> <span class="n">if_neg</span><span class="o">,</span> <span class="n">tauto</span>
<span class="kn">end</span>
</code></pre></div>



<a name="202181029"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202181029" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202181029">(Jun 27 2020 at 11:18)</a>:</h4>
<p>I'd advise against using <code>@[reducible]</code> unless you have a good reason.</p>



<a name="202181038"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202181038" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202181038">(Jun 27 2020 at 11:18)</a>:</h4>
<p>appropriate <code>@[simp]</code> lemmas are nearly always better</p>



<a name="202181053"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202181053" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202181053">(Jun 27 2020 at 11:19)</a>:</h4>
<p>My suggestion would be to put it into the <code>cayley_hamilton</code> branch, and check that it is usable there</p>



<a name="202181063"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202181063" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202181063">(Jun 27 2020 at 11:19)</a>:</h4>
<p>That branch is going to turn into many PRs, not just one.</p>



<a name="202181069"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202181069" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202181069">(Jun 27 2020 at 11:19)</a>:</h4>
<p>so we can slice this off again once we see it's working</p>



<a name="202183748"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202183748" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202183748">(Jun 27 2020 at 12:27)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> I think that algebras like <code>algebra R (polynomial A)</code> are currently not really "supported" by mathlib...</p>



<a name="202183797"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202183797" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202183797">(Jun 27 2020 at 12:28)</a>:</h4>
<p>What do you mean?</p>



<a name="202183806"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202183806" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202183806">(Jun 27 2020 at 12:28)</a>:</h4>
<p>Well, it's part of a diagram...</p>



<a name="202183830"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202183830" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202183830">(Jun 27 2020 at 12:29)</a>:</h4>
<p><code>R → A → polynomial A</code>, and this thing is (provably) the composition. (Maybe even definitionally.)</p>



<a name="202183832"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202183832" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202183832">(Jun 27 2020 at 12:29)</a>:</h4>
<p>But we'll need a bunch of lemmas for that.</p>



<a name="202183842"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202183842" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202183842">(Jun 27 2020 at 12:29)</a>:</h4>
<p>but those lemmas are the lemmas about tensor products, no?</p>



<a name="202183845"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202183845" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202183845">(Jun 27 2020 at 12:29)</a>:</h4>
<p>Of course we can add the lemmas in the special cases. But I'm still trying to figure out if we can get a general machine to make this as easy as it should be.</p>



<a name="202183912"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202183912" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202183912">(Jun 27 2020 at 12:31)</a>:</h4>
<p>I guess I'm not sure still what you're concerned about</p>



<a name="202183928"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202183928" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202183928">(Jun 27 2020 at 12:31)</a>:</h4>
<p>I mean, it's just some R-algebra, that we happen to have built out of a different R-algebra.</p>



<a name="202183996"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202183996" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202183996">(Jun 27 2020 at 12:32)</a>:</h4>
<p>Ooh, wait.. this is for noncommutative <code>A</code>, so we don't even have <code>algebra A (polynomial A)</code>.<br>
Let me shut up.</p>



<a name="202184021"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202184021" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202184021">(Jun 27 2020 at 12:33)</a>:</h4>
<p>In fact, this works:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">lemma</span> <span class="n">turkle_map_apply</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">algebra_map</span> <span class="n">R</span> <span class="o">(</span><span class="n">polynomial</span> <span class="n">A</span><span class="o">)</span> <span class="n">r</span> <span class="bp">=</span> <span class="n">C</span> <span class="o">(</span><span class="n">algebra_map</span> <span class="n">R</span> <span class="n">A</span> <span class="n">r</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">rfl</span>
</code></pre></div>



<a name="202184089"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202184089" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202184089">(Jun 27 2020 at 12:34)</a>:</h4>
<p>(I really should rename all my metasyntactic variables before making branches public...)</p>



<a name="202184376"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202184376" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202184376">(Jun 27 2020 at 12:41)</a>:</h4>
<p>I've no idea where I picked up <code>turkle</code> from. It seems to be entirely unattested amongst lists of metasyntactic variables I can find. Nevertheless my chickens are called <code>foobar</code>, <code>quux</code>, and <code>turkle</code>.</p>



<a name="202184423"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202184423" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202184423">(Jun 27 2020 at 12:42)</a>:</h4>
<p>(On even-numbered days they are all called <code>bruce</code>.)</p>



<a name="202184713"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202184713" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202184713">(Jun 27 2020 at 12:51)</a>:</h4>
<p>I have fixed another sorry</p>



<a name="202184863"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202184863" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202184863">(Jun 27 2020 at 12:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110087">Scott Morrison</span> <a href="#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202184089">said</a>:</p>
<blockquote>
<p>(I really should rename all my metasyntactic variables before making branches public...)</p>
</blockquote>
<p>What we really need is a linter that automatically flags if a name is wrong, and suggests to replace it with a proper one...<br>
I fear that we need AGI before that happens.</p>



<a name="202184921"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202184921" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Rob Lewis <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202184921">(Jun 27 2020 at 12:57)</a>:</h4>
<blockquote>
<p>What we really need is a linter that automatically flags if a name is wrong, and suggests to replace it with a proper one...</p>
</blockquote>
<p><a href="https://arxiv.org/abs/2004.07761">https://arxiv.org/abs/2004.07761</a></p>



<a name="202185064"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202185064" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202185064">(Jun 27 2020 at 13:00)</a>:</h4>
<p>I wonder if we should change the definition of <code>to_fun</code> in <code>polynomial_algebra.lean</code>, to use <code>eval2</code>.</p>



<a name="202185077"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202185077" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202185077">(Jun 27 2020 at 13:01)</a>:</h4>
<p>At the time I first wrote it, <code>eval2</code> didn't work in this generality. I think it should now, and perhaps there's better API support?</p>



<a name="202185079"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202185079" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202185079">(Jun 27 2020 at 13:01)</a>:</h4>
<p>Not sure.</p>



<a name="202185204"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202185204" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202185204">(Jun 27 2020 at 13:04)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> Not sure if it matters...</p>



<a name="202185209"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202185209" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202185209">(Jun 27 2020 at 13:04)</a>:</h4>
<p>We probably need equation lemmas either way</p>



<a name="202185212"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202185212" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202185212">(Jun 27 2020 at 13:04)</a>:</h4>
<p>I've pushed another couple sorry-fixes</p>



<a name="202213296"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202213296" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202213296">(Jun 28 2020 at 01:16)</a>:</h4>
<p>Hey it's really important that the constructor for the elementary matrix takes the value of the nonzero matrix entry as an input. That way you can reduce a lot of problems about R-linearity to questions about the underlying abelian group. This was an important trick I learnt when working with <span class="user-mention" data-user-id="266440">@Shing Tak Lam</span> on derivations</p>



<a name="202219754"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202219754" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202219754">(Jun 28 2020 at 04:47)</a>:</h4>
<p>(This is the same argument that we should talk much more about <code>monomial n a</code> in <code>polynomial.lean</code>, and less about <code>C a * X^n</code>.)</p>



<a name="202219756"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202219756" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202219756">(Jun 28 2020 at 04:48)</a>:</h4>
<p><span class="user-mention" data-user-id="252300">@Jalex Stark</span>, I'll leave it to you to make this change?</p>



<a name="202220642"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202220642" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202220642">(Jun 28 2020 at 05:20)</a>:</h4>
<p><span class="user-mention" data-user-id="252300">@Jalex Stark</span>, one of your commits has the line <code>rw ← sum_product',</code>, but there's no declaration with that name that I can find.</p>



<a name="202220643"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202220643" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202220643">(Jun 28 2020 at 05:20)</a>:</h4>
<p>Did you forget to add a file?</p>



<a name="202220685"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202220685" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202220685">(Jun 28 2020 at 05:22)</a>:</h4>
<p>oops sorry, I just got online and have a few things to address but should get to it soon. That's supposed to be a new decl in big_operators. (which i probably need to rewrite because i did a lot of stashing and switching between branches in one local copy of mathlib yesterday)</p>



<a name="202224702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202224702" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202224702">(Jun 28 2020 at 07:38)</a>:</h4>
<p>oh, it is in fact there in the current branch. the decl is made by <code>to_additive</code> on <code>prod_product'</code> in big_operators (okay, I changed <code>sum_product'</code> to <code>finset.sum_product'</code> and it works now)</p>



<a name="202224708"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202224708" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202224708">(Jun 28 2020 at 07:39)</a>:</h4>
<p>i'm working on changing elementary_matrix now</p>



<a name="202224895"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202224895" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202224895">(Jun 28 2020 at 07:45)</a>:</h4>
<p>I think things are going to be a lot easier if I refactor <code>eval2</code> so it takes a bundled <code>ring_hom</code> rather than needing a <code>is_semiring_hom</code> typeclass</p>



<a name="202224902"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202224902" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202224902">(Jun 28 2020 at 07:45)</a>:</h4>
<p>however I'm not super confident that will go well... not sure how many other places will need changes</p>



<a name="202224936"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202224936" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202224936">(Jun 28 2020 at 07:46)</a>:</h4>
<p>I may experiment with it on a different branch for a bit</p>



<a name="202225201"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202225201" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202225201">(Jun 28 2020 at 07:54)</a>:</h4>
<p>I think at some point I wrote an instance <code>is_semiring_hom f</code> for <code>f</code> being the <code>to_fun</code> of a bundled <code>algebra_hom</code>, and this felt dirty</p>



<a name="202226499"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202226499" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202226499">(Jun 28 2020 at 08:31)</a>:</h4>
<p>yes, it's past time we killed <code>is_semiring_hom</code>.</p>



<a name="202229634"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202229634" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202229634">(Jun 28 2020 at 10:07)</a>:</h4>
<p><span class="user-mention" data-user-id="252300">@Jalex Stark</span>, your work on elementary_matrix has broken the proof of <code>matrix_polynomial_equiv_polynomial_matrix_coeff_apply</code>.</p>



<a name="202229636"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202229636" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202229636">(Jun 28 2020 at 10:07)</a>:</h4>
<p>Do you know what's going on, or should I start on that?</p>



<a name="202229639"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202229639" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202229639">(Jun 28 2020 at 10:07)</a>:</h4>
<p>(Otherwise, we're down to a single sorry on <code>cayley_hamilton</code>, which looks like easy algebra.)</p>



<a name="202229713"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202229713" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202229713">(Jun 28 2020 at 10:09)</a>:</h4>
<p>yeah, I don't know why i pushed before i reached an error-free state, I am still working locally to propagate <code>elementary_matrix</code> throughout</p>



<a name="202229717"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202229717" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202229717">(Jun 28 2020 at 10:09)</a>:</h4>
<p>it does seem to be simplifying stuff</p>



<a name="202229838"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202229838" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202229838">(Jun 28 2020 at 10:12)</a>:</h4>
<p>okay! I will leave that bit of the file then, and try and do my algebra homework</p>



<a name="202229890"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202229890" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202229890">(Jun 28 2020 at 10:13)</a>:</h4>
<p>I have something like </p>
<div class="codehilite"><pre><span></span><code><span class="n">M</span> <span class="n">x</span><span class="bp">.</span><span class="n">fst</span> <span class="n">x</span><span class="bp">.</span><span class="n">snd</span> <span class="bp">*</span> <span class="err">⇑</span><span class="o">(</span><span class="n">algebra_map</span> <span class="n">R</span> <span class="n">A</span><span class="o">)</span> <span class="o">(</span><span class="n">elementary_matrix</span> <span class="n">x</span><span class="bp">.</span><span class="n">fst</span> <span class="n">x</span><span class="bp">.</span><span class="n">snd</span> <span class="mi">1</span> <span class="n">i</span> <span class="n">j</span><span class="o">))</span>
</code></pre></div>


<p>but want something like</p>
<div class="codehilite"><pre><span></span><code><span class="n">M</span> <span class="n">x</span><span class="bp">.</span><span class="n">fst</span> <span class="n">x</span><span class="bp">.</span><span class="n">snd</span> <span class="err">•</span> <span class="o">(</span><span class="n">elementary_matrix</span> <span class="n">x</span><span class="bp">.</span><span class="n">fst</span> <span class="n">x</span><span class="bp">.</span><span class="n">snd</span> <span class="mi">1</span><span class="o">)</span> <span class="err">$</span> <span class="n">i</span> <span class="n">j</span>
</code></pre></div>


<p>I think I am missing something simple</p>



<a name="202229958"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202229958" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202229958">(Jun 28 2020 at 10:15)</a>:</h4>
<p><code>algebra.smul_def</code>?</p>



<a name="202230024"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202230024" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202230024">(Jun 28 2020 at 10:16)</a>:</h4>
<p>thanks!</p>



<a name="202230176"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202230176" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202230176">(Jun 28 2020 at 10:20)</a>:</h4>
<p>Ok, <code>cayley_hamilton</code> now builds except for this thing with <code>elementary_matrix</code>!</p>



<a name="202230187"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202230187" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202230187">(Jun 28 2020 at 10:20)</a>:</h4>
<p>there is a _lot_ of cleanup still to do</p>



<a name="202230284"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202230284" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202230284">(Jun 28 2020 at 10:23)</a>:</h4>
<p>for the elementary_matrix stuff i just have two more proofs to fix in polynomial_algebra</p>



<a name="202230365"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202230365" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202230365">(Jun 28 2020 at 10:25)</a>:</h4>
<p>awesome! and I found a quick work-around so</p>



<a name="202230409"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202230409" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202230409">(Jun 28 2020 at 10:26)</a>:</h4>
<p>We have <code>cayley_hamilton</code>! (No sorries.)</p>



<a name="202230436"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202230436" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202230436">(Jun 28 2020 at 10:27)</a>:</h4>
<p>maybe your work-around is best for what's remaining, the "right" way would be to show that <code>elementary_matrix i j</code> is an add_monoid_hom</p>



<a name="202230692"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202230692" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202230692">(Jun 28 2020 at 10:34)</a>:</h4>
<p>oh ...</p>



<a name="202230700"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202230700" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202230700">(Jun 28 2020 at 10:34)</a>:</h4>
<p>except, <span class="user-mention" data-user-id="252300">@Jalex Stark</span>, I didn't notice you adding the <code>[inhabited n]</code> instances, which I don't think we want</p>



<a name="202230706"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202230706" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202230706">(Jun 28 2020 at 10:35)</a>:</h4>
<p>hm.</p>



<a name="202230708"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202230708" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202230708">(Jun 28 2020 at 10:35)</a>:</h4>
<p>and which changes the statement of Cayley-Hamilton subtly...</p>



<a name="202230712"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202230712" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202230712">(Jun 28 2020 at 10:35)</a>:</h4>
<p>we have to prove it for empty matrices, too :-)</p>



<a name="202230716"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202230716" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202230716">(Jun 28 2020 at 10:35)</a>:</h4>
<p>actually... err... is it even true?</p>



<a name="202230717"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202230717" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202230717">(Jun 28 2020 at 10:35)</a>:</h4>
<p><code>matrix unit unit</code> is <code>unit</code>. So is the empty matrix <code>0</code> or <code>1</code>?</p>



<a name="202230756"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202230756" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202230756">(Jun 28 2020 at 10:36)</a>:</h4>
<p>what is the characteristic polynomial of the empty matrix? surely 1?</p>



<a name="202230824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202230824" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202230824">(Jun 28 2020 at 10:39)</a>:</h4>
<p>if you want it to be the product of the eigenvalues, it is 1</p>



<a name="202230828"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202230828" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202230828">(Jun 28 2020 at 10:39)</a>:</h4>
<p>the characteristic matrix is the empty matrix</p>



<a name="202230829"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202230829" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202230829">(Jun 28 2020 at 10:39)</a>:</h4>
<p>but the "usual formula" gives zero</p>



<a name="202230830"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202230830" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202230830">(Jun 28 2020 at 10:39)</a>:</h4>
<p>huh :-)</p>



<a name="202230833"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202230833" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202230833">(Jun 28 2020 at 10:39)</a>:</h4>
<p>right, and this is fine because the empty matrix brings the zero ring into the picture</p>



<a name="202230878"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202230878" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202230878">(Jun 28 2020 at 10:40)</a>:</h4>
<p>so we're complaining that we can't factor the identity map on our ring through the zero ring</p>



<a name="202230944"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202230944" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202230944">(Jun 28 2020 at 10:42)</a>:</h4>
<p>phew:</p>
<div class="codehilite"><pre><span></span><code><span class="bp">#</span><span class="kn">eval</span> <span class="n">matrix</span><span class="bp">.</span><span class="n">det</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">punit</span><span class="o">),</span> <span class="o">(</span><span class="mi">0</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">))</span>
</code></pre></div>


<p>says <code>0</code> :-)</p>



<a name="202230947"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202230947" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202230947">(Jun 28 2020 at 10:42)</a>:</h4>
<p>Lean has spoken.</p>



<a name="202230952"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202230952" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202230952">(Jun 28 2020 at 10:42)</a>:</h4>
<p>So indeed, we need to get rid of that <code>inhabited</code> hypothesis.</p>



<a name="202230971"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202230971" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202230971">(Jun 28 2020 at 10:43)</a>:</h4>
<p>sadly <code>matrix.induction_on</code> needs a <code>h_zero</code> argument, just to cover this case</p>



<a name="202231010"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202231010" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202231010">(Jun 28 2020 at 10:44)</a>:</h4>
<p>maybe I'll split it into two versions, one with an <code>inhabited</code> argument using your trick</p>



<a name="202231011"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202231011" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202231011">(Jun 28 2020 at 10:44)</a>:</h4>
<p>but we won't use that one here</p>



<a name="202231162"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202231162" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202231162">(Jun 28 2020 at 10:48)</a>:</h4>
<p>Okay, <code>cayley_hamilton</code> works again, this time including the trivial case</p>



<a name="202231593"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202231593" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202231593">(Jun 28 2020 at 11:00)</a>:</h4>
<p>maybe I'm just too tired to be doing this right now, but I want to rewrite</p>
<div class="codehilite"><pre><span></span><code><span class="err">⇑</span><span class="n">matrix_polynomial_equiv_polynomial_matrix</span> <span class="o">(</span><span class="n">elementary_matrix</span> <span class="n">i</span> <span class="n">j</span> <span class="n">p</span> <span class="bp">+</span> <span class="n">elementary_matrix</span> <span class="n">i</span> <span class="n">j</span> <span class="n">q</span><span class="o">)</span>
<span class="bp">=</span> <span class="err">⇑</span><span class="n">matrix_polynomial_equiv_polynomial_matrix</span> <span class="o">(</span><span class="n">elementary_matrix</span> <span class="n">i</span> <span class="n">j</span> <span class="n">p</span><span class="o">)</span> <span class="bp">+</span> <span class="err">⇑</span><span class="n">matrix_polynomial_equiv_polynomial_matrix</span> <span class="o">(</span><span class="n">elementary_matrix</span> <span class="n">i</span> <span class="n">j</span> <span class="n">q</span><span class="o">)</span>
</code></pre></div>


<p>I tried <code>rw ring_hom.map_add</code> and that didn't work (and then lean crashed and I'm waiting to rebuild mathlib, since i don't have oleans yet)</p>



<a name="202231611"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202231611" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202231611">(Jun 28 2020 at 11:01)</a>:</h4>
<p>try <code>alg_hom.map_add</code></p>



<a name="202231663"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202231663" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202231663">(Jun 28 2020 at 11:02)</a>:</h4>
<p><span aria-label="thumbs up" class="emoji emoji-1f44d" role="img" title="thumbs up">:thumbs_up:</span> I will try that in a few minutes</p>



<a name="202231683"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202231683" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202231683">(Jun 28 2020 at 11:03)</a>:</h4>
<p><span class="user-mention silent" data-user-id="252300">Jalex Stark</span> <a href="#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202230717">said</a>:</p>
<blockquote>
<p><code>matrix unit unit</code> is <code>unit</code>. So is the empty matrix <code>0</code> or <code>1</code>?</p>
</blockquote>
<p>Isn't it both?</p>



<a name="202231811"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202231811" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202231811">(Jun 28 2020 at 11:06)</a>:</h4>
<p>yes, the question was what should happen to it when we bring it into polynomial land</p>



<a name="202231827"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202231827" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202231827">(Jun 28 2020 at 11:07)</a>:</h4>
<p>so by "is" i didn't mean <code>=</code> I meant equal after applying some map out of <code>matrix unit unit</code></p>



<a name="202231844"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202231844" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202231844">(Jun 28 2020 at 11:08)</a>:</h4>
<p>if the map wanted to be a ring hom then it would have to land at <code>0</code>, but thankfully that's not the case and scott figured out that it wants to land at <code>1</code><br>
(edit: I guess I misunderstood something along the way)</p>



<a name="202231893"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202231893" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202231893">(Jun 28 2020 at 11:08)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> the question was really what the determinant of the empty matrix is</p>



<a name="202231910"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202231910" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202231910">(Jun 28 2020 at 11:09)</a>:</h4>
<p>and it is indeed meant to be zero, which is good for Cayley-Hamilton, and bad for "determinant is the product of the eigenvalues"</p>



<a name="202231919"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202231919" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202231919">(Jun 28 2020 at 11:09)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110087">Scott Morrison</span> <a href="#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202231611">said</a>:</p>
<blockquote>
<p>try <code>alg_hom.map_add</code></p>
</blockquote>
<p>didn't work. I'll try <code>have</code>ing the statement i want intstead of <code>rw</code>ing to it</p>



<a name="202232185"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202232185" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202232185">(Jun 28 2020 at 11:16)</a>:</h4>
<p>ah i'm spewing nonsense</p>



<a name="202232596"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202232596" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202232596">(Jun 28 2020 at 11:26)</a>:</h4>
<p>I think the determinant of the empty matrix should not be defined</p>



<a name="202232598"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202232598" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202232598">(Jun 28 2020 at 11:26)</a>:</h4>
<p>which means that it should be <code>0</code> in lean</p>



<a name="202232722"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202232722" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202232722">(Jun 28 2020 at 11:30)</a>:</h4>
<p>the determinant of the empty matrix is 1</p>



<a name="202232741"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202232741" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kenny Lau <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202232741">(Jun 28 2020 at 11:31)</a>:</h4>
<p>S_0 has exactly one element, and the empty product is 1</p>



<a name="202232744"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202232744" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202232744">(Jun 28 2020 at 11:31)</a>:</h4>
<p>Ah, I messed up the math on one of the definitions. <a href="https://math.stackexchange.com/questions/2130175/does-the-unique-map-on-the-zero-space-have-determinant-1">https://math.stackexchange.com/questions/2130175/does-the-unique-map-on-the-zero-space-have-determinant-1</a> gives a number of independent reasons for the determinant to be defined and equal to 1</p>



<a name="202232799"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202232799" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202232799">(Jun 28 2020 at 11:32)</a>:</h4>
<p>Oh I misread Scott's <code>#eval</code> too, he measured the determinant of the 1x1 zero matrix</p>



<a name="202233226"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202233226" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202233226">(Jun 28 2020 at 11:47)</a>:</h4>
<p>oops!</p>



<a name="202234609"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202234609" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202234609">(Jun 28 2020 at 12:27)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/3214">#3214</a> <a href="https://github.com/leanprover-community/mathlib/issues/3215">#3215</a> <a href="https://github.com/leanprover-community/mathlib/issues/3216">#3216</a> and <a href="https://github.com/leanprover-community/mathlib/issues/3217">#3217</a> are all mini-PRs coming out of <code>cayley_hamilton</code>.</p>



<a name="202234662"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202234662" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202234662">(Jun 28 2020 at 12:29)</a>:</h4>
<p>The rest may have to wait until <a href="https://github.com/leanprover-community/mathlib/issues/3193">#3193</a> and <a href="https://github.com/leanprover-community/mathlib/issues/3213">#3213</a> have merged.</p>



<a name="202234672"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202234672" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202234672">(Jun 28 2020 at 12:29)</a>:</h4>
<p>Although <span class="user-mention" data-user-id="252300">@Jalex Stark</span>, do you want to make the elementary_matrix stuff a separate PR? It could get started now.</p>



<a name="202234675"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202234675" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202234675">(Jun 28 2020 at 12:29)</a>:</h4>
<p>I think you want <code>@[simp]</code> on <code>scalar_apply_eq</code> and <code>scalar_apply_ne</code>, and corresponding <code>@[simp]</code> lemmas for <code>elementary_matrix</code>.</p>



<a name="202235665"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202235665" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202235665">(Jun 28 2020 at 12:56)</a>:</h4>
<p>I haven't read this carefully, but I just want to say (a) the determinant of the empy matrix is 1, (b) elementary matrix doesn't mean a matrix with a single nonzero entry.</p>



<a name="202237029"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202237029" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202237029">(Jun 28 2020 at 13:37)</a>:</h4>
<p>Yes! (a) was eventually agreed, after I caused some confusion.</p>



<a name="202237084"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202237084" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202237084">(Jun 28 2020 at 13:39)</a>:</h4>
<p>I also agree with (b), and I think we haven't renamed yet for lack of the right name.</p>



<a name="202237090"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202237090" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202237090">(Jun 28 2020 at 13:39)</a>:</h4>
<p>What should these matrices be called?</p>



<a name="202237096"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202237096" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202237096">(Jun 28 2020 at 13:39)</a>:</h4>
<p>maybe just <code>basis_matrix</code>?</p>



<a name="202237356"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202237356" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202237356">(Jun 28 2020 at 13:45)</a>:</h4>
<p>I was going to suggest something like <code>std_basis_matrix</code>, yeah</p>



<a name="202237400"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202237400" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202237400">(Jun 28 2020 at 13:46)</a>:</h4>
<p>partly in reference to the confusingly named <code>std_basis</code> (does it still exist)?</p>



<a name="202243726"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202243726" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202243726">(Jun 28 2020 at 16:28)</a>:</h4>
<div class="codehilite"><pre><span></span><code><span class="bp">#</span><span class="kn">eval</span> <span class="n">matrix</span><span class="bp">.</span><span class="n">det</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">punit</span><span class="o">),</span> <span class="o">(</span><span class="mi">0</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">))</span>
</code></pre></div>


<p>Wait, that's the det of the 1x1 matrix (0). I think CH is false for the 0 by 0 matrix</p>



<a name="202243754"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202243754" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202243754">(Jun 28 2020 at 16:29)</a>:</h4>
<p>Sorry, late to the party. So we are agreed that CH fails for 0x0 matrices?</p>



<a name="202249410"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202249410" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202249410">(Jun 28 2020 at 18:54)</a>:</h4>
<p>any polynomial of the empty matrix is the empty matrix is zero, so CH is true for 0x0 matrices</p>



<a name="202249545"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202249545" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202249545">(Jun 28 2020 at 18:56)</a>:</h4>
<p>i like <code>std_basis_matrix</code></p>



<a name="202276925"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202276925" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202276925">(Jun 29 2020 at 06:52)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> I'm happy with the polynomial refactor. I left one tiny comment. If you agree, I'll hit it with the merge hammer.</p>



<a name="202278011"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202278011" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202278011">(Jun 29 2020 at 07:12)</a>:</h4>
<p>I generalised that lemma, and put the PR on the queue.</p>



<a name="202278298"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202278298" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202278298">(Jun 29 2020 at 07:16)</a>:</h4>
<p>Great!</p>



<a name="202278553"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202278553" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202278553">(Jun 29 2020 at 07:20)</a>:</h4>
<p>It occurs to me that we are still missing <code>map_smul</code> there. I tried proving that, but it will be easier post <a href="https://github.com/leanprover-community/mathlib/issues/3213">#3213</a>.</p>



<a name="202416679"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202416679" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202416679">(Jun 30 2020 at 10:14)</a>:</h4>
<p><span class="user-mention" data-user-id="252300">@Jalex Stark</span>, I'm just slicing things up into PRs now. Do you want to do the honours on <a href="https://github.com/leanprover-community/mathlib/pull/new/std_basis_matrix">https://github.com/leanprover-community/mathlib/pull/new/std_basis_matrix</a></p>



<a name="202416860"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Cayley-Hamilton/near/202416860" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jalex Stark <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Cayley-Hamilton.html#202416860">(Jun 30 2020 at 10:16)</a>:</h4>
<p>Go ahead without me, sorry. Working on mathlib PRs is quite addictive and I need to leave space in my head for my day job right now</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>