---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/Right.20implementation.20of.20Hilbert.20Plane.3F.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Right.20implementation.20of.20Hilbert.20Plane.3F.html">Right implementation of Hilbert Plane?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="212845031"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Right%20implementation%20of%20Hilbert%20Plane%3F/near/212845031" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Marc Masdeu <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Right.20implementation.20of.20Hilbert.20Plane.3F.html#212845031">(Oct 09 2020 at 16:01)</a>:</h4>
<p>With lots of help from <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> , <span class="user-mention" data-user-id="306601">@Kyle Miller</span> , <span class="user-mention" data-user-id="127136">@Alex J. Best</span> , <span class="user-mention" data-user-id="214703">@Yury G. Kudryashov</span> , <span class="user-mention" data-user-id="112680">@Johan Commelin</span> and many others that I am regretfuly forgetting, here is a Lean formalization of the Hilbert Plane, essentially following Hartshorne's account on Hilbert. The only difference (up to errors that I am probably missing) is that I made two of the axioms (line through points and transport of angle) constructive.<br>
I'd like to get some (constructive) criticism about how things are implemented (i.e. what should one change to make this mathlib-ready). I think that if the basics are laid out properly, then proving many of Euclid's results should be "easy". I haven't gone very far yet (much less than <span class="user-mention" data-user-id="120256">@Ali Sever</span>, by the way): so far, I have proofs of basic facts using only the I and B axioms...</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">tactic</span>

<span class="kd">noncomputable theory</span>
<span class="n">open_locale</span> <span class="n">classical</span>

<span class="kd">def</span> <span class="n">pts</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">has_mem</span> <span class="n">α</span> <span class="n">β</span><span class="o">]</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">β</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span> <span class="o">:=</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">|</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">S</span><span class="o">}</span>

<span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">mem_pts</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">has_mem</span> <span class="n">α</span> <span class="n">β</span><span class="o">]</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">β</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">pts</span> <span class="n">S</span> <span class="bp">↔</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">S</span> <span class="o">:=</span>  <span class="kd">by</span> <span class="n">refl</span>

<span class="kd">notation</span> <span class="n">p</span> <span class="bp">`</span><span class="n">xor</span><span class="bp">`</span> <span class="n">q</span> <span class="o">:=</span> <span class="o">(</span><span class="n">p</span> <span class="bp">∧</span> <span class="bp">¬</span> <span class="n">q</span><span class="o">)</span> <span class="bp">∨</span> <span class="o">(</span><span class="n">q</span> <span class="bp">∧</span> <span class="bp">¬</span> <span class="n">p</span><span class="o">)</span>

<span class="kd">class</span> <span class="n">PreHilbertPlane</span> <span class="o">(</span><span class="n">Point</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">:=</span>
    <span class="o">(</span><span class="n">Line</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span>
    <span class="o">(</span><span class="n">belongs</span> <span class="o">:</span> <span class="n">Point</span> <span class="bp">→</span> <span class="n">Line</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span>
    <span class="o">(</span><span class="n">between</span> <span class="o">:</span> <span class="n">Point</span> <span class="bp">→</span> <span class="n">Point</span> <span class="bp">→</span> <span class="n">Point</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span>

    <span class="o">(</span><span class="kd">notation</span> <span class="n">A</span> <span class="bp">`∈`</span> <span class="n">ℓ</span> <span class="o">:=</span> <span class="n">belongs</span> <span class="n">A</span> <span class="n">ℓ</span><span class="o">)</span>

    <span class="o">(</span><span class="n">line_through'</span> <span class="o">{</span><span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="n">Point</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span><span class="o">:</span> <span class="n">A</span> <span class="bp">≠</span> <span class="n">B</span><span class="o">)</span> <span class="o">:</span> <span class="n">Line</span> <span class="o">)</span> <span class="c1">-- existence of line</span>
    <span class="o">(</span><span class="n">I1spec'</span> <span class="o">{</span><span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="n">Point</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span><span class="o">:</span> <span class="n">A</span> <span class="bp">≠</span> <span class="n">B</span><span class="o">)</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">∈</span> <span class="n">line_through'</span> <span class="n">h</span> <span class="bp">∧</span> <span class="n">B</span> <span class="bp">∈</span> <span class="n">line_through'</span> <span class="n">h</span><span class="o">)</span>
    <span class="o">(</span><span class="n">I1uniq'</span> <span class="o">{</span><span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="n">Point</span><span class="o">}</span> <span class="o">{</span><span class="n">ℓ</span> <span class="o">:</span> <span class="n">Line</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span><span class="o">:</span> <span class="n">A</span> <span class="bp">≠</span> <span class="n">B</span><span class="o">)</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">∈</span> <span class="n">ℓ</span> <span class="bp">→</span> <span class="n">B</span> <span class="bp">∈</span> <span class="n">ℓ</span> <span class="bp">→</span> <span class="n">ℓ</span> <span class="bp">=</span> <span class="n">line_through'</span> <span class="n">h</span><span class="o">)</span> <span class="c1">-- uniqueness of line</span>
    <span class="o">(</span><span class="n">I2'</span> <span class="o">(</span><span class="n">ℓ</span> <span class="o">:</span> <span class="n">Line</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="n">Point</span><span class="o">,</span> <span class="n">A</span> <span class="bp">≠</span> <span class="n">B</span> <span class="bp">∧</span> <span class="n">A</span> <span class="bp">∈</span> <span class="n">ℓ</span> <span class="bp">∧</span> <span class="n">B</span> <span class="bp">∈</span> <span class="n">ℓ</span><span class="o">)</span>
    <span class="o">(</span><span class="n">I3'</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">A</span> <span class="n">B</span> <span class="n">C</span> <span class="o">:</span> <span class="n">Point</span><span class="o">,</span> <span class="o">(</span><span class="n">A</span> <span class="bp">≠</span> <span class="n">B</span> <span class="bp">∧</span> <span class="n">A</span> <span class="bp">≠</span> <span class="n">C</span> <span class="bp">∧</span> <span class="n">B</span> <span class="bp">≠</span> <span class="n">C</span> <span class="bp">∧</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">ℓ</span> <span class="o">:</span> <span class="n">Line</span><span class="o">,</span> <span class="o">(</span><span class="n">A</span> <span class="bp">∈</span> <span class="n">ℓ</span> <span class="bp">∧</span> <span class="n">B</span> <span class="bp">∈</span> <span class="n">ℓ</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">¬</span> <span class="o">(</span><span class="n">C</span> <span class="bp">∈</span> <span class="n">ℓ</span><span class="o">)</span> <span class="o">))))</span>

<span class="kn">namespace</span> <span class="n">PreHilbertPlane</span>
<span class="kd">variables</span> <span class="o">{</span><span class="bp">Ω</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">PreHilbertPlane</span> <span class="bp">Ω</span><span class="o">]</span>

<span class="kd">instance</span> <span class="o">:</span> <span class="n">has_mem</span> <span class="bp">Ω</span> <span class="o">(</span><span class="n">Line</span> <span class="bp">Ω</span><span class="o">)</span> <span class="o">:=</span> <span class="o">⟨</span><span class="n">belongs</span><span class="o">⟩</span>

<span class="kd">instance</span> <span class="n">Line.has_coe</span> <span class="o">:</span> <span class="n">has_coe</span> <span class="o">(</span><span class="n">Line</span> <span class="bp">Ω</span><span class="o">)</span> <span class="o">(</span><span class="n">set</span> <span class="bp">Ω</span><span class="o">)</span> <span class="o">:=</span> <span class="o">⟨</span><span class="n">pts</span><span class="o">⟩</span>
<span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">mem_coe_to_mem</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="bp">Ω</span><span class="o">)</span> <span class="o">(</span><span class="n">ℓ</span> <span class="o">:</span> <span class="n">Line</span> <span class="bp">Ω</span><span class="o">)</span> <span class="o">:</span> <span class="n">p</span> <span class="bp">∈</span> <span class="o">(</span><span class="n">ℓ</span> <span class="o">:</span> <span class="n">set</span> <span class="bp">Ω</span><span class="o">)</span> <span class="bp">↔</span> <span class="n">p</span> <span class="bp">∈</span> <span class="n">ℓ</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">refl</span>

<span class="kd">def</span> <span class="n">points_between</span> <span class="o">(</span><span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="bp">Ω</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span> <span class="bp">Ω</span> <span class="o">:=</span> <span class="o">{</span><span class="n">P</span> <span class="o">:</span> <span class="bp">Ω</span> <span class="bp">|</span> <span class="n">between</span> <span class="n">A</span> <span class="n">P</span> <span class="n">B</span><span class="o">}</span>
<span class="kd">notation</span> <span class="n">A</span> <span class="bp">`*`</span> <span class="n">B</span> <span class="bp">`*`</span> <span class="n">C</span> <span class="o">:=</span> <span class="n">PreHilbertPlane.between</span> <span class="n">A</span> <span class="n">B</span> <span class="n">C</span>

<span class="c1">-- Put the axioms in terms of this has_mem</span>
<span class="kd">def</span> <span class="n">line_through</span> <span class="o">{</span><span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="bp">Ω</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span><span class="o">:</span> <span class="n">A</span> <span class="bp">≠</span> <span class="n">B</span><span class="o">)</span> <span class="o">:</span> <span class="n">Line</span> <span class="bp">Ω</span> <span class="o">:=</span> <span class="n">line_through'</span> <span class="n">h</span>
<span class="kd">lemma</span> <span class="n">I1specl</span> <span class="o">{</span><span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="bp">Ω</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span><span class="o">:</span> <span class="n">A</span> <span class="bp">≠</span> <span class="n">B</span><span class="o">)</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">∈</span> <span class="n">line_through</span> <span class="n">h</span> <span class="o">:=</span> <span class="o">(</span><span class="n">I1spec'</span> <span class="n">h</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span>
<span class="kd">lemma</span> <span class="n">I1specr</span> <span class="o">{</span><span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="bp">Ω</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span><span class="o">:</span> <span class="n">A</span> <span class="bp">≠</span> <span class="n">B</span><span class="o">)</span> <span class="o">:</span> <span class="n">B</span> <span class="bp">∈</span> <span class="n">line_through</span> <span class="n">h</span> <span class="o">:=</span> <span class="o">(</span><span class="n">I1spec'</span> <span class="n">h</span><span class="o">)</span><span class="bp">.</span><span class="mi">2</span>
<span class="kd">lemma</span> <span class="n">I1uniq</span> <span class="o">{</span><span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="bp">Ω</span><span class="o">}</span> <span class="o">{</span><span class="n">ℓ</span> <span class="o">:</span> <span class="n">Line</span> <span class="bp">Ω</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span><span class="o">:</span> <span class="n">A</span> <span class="bp">≠</span> <span class="n">B</span><span class="o">)</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">∈</span> <span class="n">ℓ</span> <span class="bp">→</span> <span class="n">B</span> <span class="bp">∈</span> <span class="n">ℓ</span> <span class="bp">→</span> <span class="n">ℓ</span> <span class="bp">=</span> <span class="n">line_through</span> <span class="n">h</span> <span class="o">:=</span> <span class="n">I1uniq'</span> <span class="n">h</span>

<span class="kd">lemma</span> <span class="n">I1</span> <span class="o">{</span><span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="bp">Ω</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">≠</span> <span class="n">B</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∃!</span> <span class="o">(</span><span class="n">ℓ</span> <span class="o">:</span> <span class="n">Line</span> <span class="bp">Ω</span><span class="o">),</span> <span class="o">(</span> <span class="n">A</span> <span class="bp">∈</span> <span class="n">ℓ</span> <span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span> <span class="n">B</span> <span class="bp">∈</span> <span class="n">ℓ</span> <span class="o">)</span> <span class="o">:=</span>
<span class="kd">begin</span>
    <span class="n">use</span> <span class="n">line_through</span> <span class="n">h</span><span class="o">,</span>
    <span class="n">exact</span> <span class="o">⟨</span> <span class="o">⟨</span><span class="n">I1specl</span> <span class="n">h</span><span class="o">,</span> <span class="n">I1specr</span> <span class="n">h</span><span class="o">⟩,</span> <span class="bp">λ</span> <span class="n">r</span> <span class="n">hr</span><span class="o">,</span> <span class="n">I1uniq</span> <span class="n">h</span> <span class="n">hr.1</span> <span class="n">hr.2</span><span class="o">⟩,</span>
<span class="kd">end</span>
<span class="kd">lemma</span> <span class="n">I2</span> <span class="o">(</span><span class="n">ℓ</span> <span class="o">:</span> <span class="n">Line</span> <span class="bp">Ω</span><span class="o">)</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="bp">Ω</span><span class="o">,</span> <span class="n">A</span> <span class="bp">≠</span> <span class="n">B</span> <span class="bp">∧</span> <span class="n">A</span> <span class="bp">∈</span> <span class="n">ℓ</span> <span class="bp">∧</span> <span class="n">B</span> <span class="bp">∈</span> <span class="n">ℓ</span> <span class="o">:=</span> <span class="n">I2'</span> <span class="n">ℓ</span>
<span class="kd">lemma</span> <span class="n">I3</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">A</span> <span class="n">B</span> <span class="n">C</span> <span class="o">:</span> <span class="bp">Ω</span><span class="o">,</span> <span class="n">A</span> <span class="bp">≠</span> <span class="n">B</span> <span class="bp">∧</span> <span class="n">A</span> <span class="bp">≠</span> <span class="n">C</span> <span class="bp">∧</span> <span class="n">B</span> <span class="bp">≠</span> <span class="n">C</span> <span class="bp">∧</span> <span class="bp">∀</span> <span class="n">ℓ</span> <span class="o">:</span> <span class="n">Line</span> <span class="bp">Ω</span><span class="o">,</span> <span class="n">A</span> <span class="bp">∈</span> <span class="n">ℓ</span> <span class="bp">∧</span> <span class="n">B</span> <span class="bp">∈</span> <span class="n">ℓ</span> <span class="bp">→</span> <span class="bp">¬</span> <span class="n">C</span> <span class="bp">∈</span> <span class="n">ℓ</span> <span class="o">:=</span> <span class="n">I3'</span>


<span class="kd">def</span> <span class="n">collinear</span> <span class="o">(</span><span class="n">A</span> <span class="n">B</span> <span class="n">C</span> <span class="o">:</span> <span class="bp">Ω</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">∃</span> <span class="o">(</span><span class="n">ℓ</span> <span class="o">:</span> <span class="n">Line</span> <span class="bp">Ω</span><span class="o">),</span> <span class="n">A</span> <span class="bp">∈</span> <span class="n">ℓ</span> <span class="bp">∧</span> <span class="n">B</span> <span class="bp">∈</span> <span class="n">ℓ</span> <span class="bp">∧</span> <span class="n">C</span> <span class="bp">∈</span> <span class="n">ℓ</span>
<span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">collinear_iff</span> <span class="o">{</span><span class="n">A</span> <span class="n">B</span> <span class="n">C</span> <span class="o">:</span> <span class="bp">Ω</span><span class="o">}</span> <span class="o">:</span>
    <span class="n">collinear</span> <span class="n">A</span> <span class="n">B</span> <span class="n">C</span> <span class="bp">↔</span> <span class="bp">∃</span> <span class="n">ℓ</span> <span class="o">:</span> <span class="n">Line</span> <span class="bp">Ω</span><span class="o">,</span> <span class="n">A</span> <span class="bp">∈</span> <span class="n">ℓ</span> <span class="bp">∧</span> <span class="n">B</span> <span class="bp">∈</span> <span class="n">ℓ</span> <span class="bp">∧</span> <span class="n">C</span> <span class="bp">∈</span> <span class="n">ℓ</span> <span class="o">:=</span>
<span class="kd">begin</span>
    <span class="n">rw</span> <span class="n">collinear</span><span class="o">,</span>
<span class="kd">end</span>

<span class="kd">def</span> <span class="n">intersect</span> <span class="o">(</span><span class="n">r</span> <span class="n">s</span> <span class="o">:</span> <span class="n">Line</span> <span class="bp">Ω</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">∃</span> <span class="n">A</span><span class="o">,</span> <span class="n">A</span> <span class="bp">∈</span> <span class="n">r</span> <span class="bp">∧</span> <span class="n">A</span> <span class="bp">∈</span> <span class="n">s</span>

<span class="kd">def</span> <span class="n">parallel</span> <span class="o">(</span><span class="n">r</span> <span class="n">s</span> <span class="o">:</span> <span class="n">Line</span> <span class="bp">Ω</span><span class="o">)</span> <span class="o">:=</span> <span class="o">(</span><span class="n">r</span> <span class="bp">=</span> <span class="n">s</span><span class="o">)</span> <span class="bp">∨</span> <span class="o">(</span><span class="bp">¬</span> <span class="n">intersect</span> <span class="n">r</span> <span class="n">s</span><span class="o">)</span>
<span class="kd">notation</span> <span class="n">r</span> <span class="bp">`||`</span> <span class="n">s</span> <span class="o">:=</span> <span class="n">parallel</span> <span class="n">r</span> <span class="n">s</span>

<span class="kd">end</span> <span class="n">PreHilbertPlane</span>

<span class="kn">open</span> <span class="n">PreHilbertPlane</span>

<span class="sd">/-- A segment is created by giving two points. -/</span>
<span class="kd">structure</span> <span class="n">Segment</span> <span class="o">(</span><span class="n">Point</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">:=</span>
    <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">Point</span><span class="o">)</span> <span class="o">(</span><span class="n">B</span> <span class="o">:</span> <span class="n">Point</span><span class="o">)</span>
<span class="kd">notation</span> <span class="n">A</span> <span class="bp">`⬝`</span><span class="o">:</span><span class="mi">100</span> <span class="n">B</span> <span class="o">:=</span> <span class="n">Segment.mk</span> <span class="n">A</span> <span class="n">B</span>

<span class="kn">namespace</span> <span class="n">Segment</span>
<span class="kd">variables</span> <span class="o">{</span><span class="bp">Ω</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">PreHilbertPlane</span> <span class="bp">Ω</span><span class="o">]</span>

<span class="sd">/--</span>
<span class="sd">When thought of as a set, it is the the set consisting of the endpoints</span>
<span class="sd">and all the points between them</span>
<span class="sd">-/</span>
<span class="kd">instance</span> <span class="o">:</span> <span class="n">has_mem</span> <span class="bp">Ω</span> <span class="o">(</span><span class="n">Segment</span> <span class="bp">Ω</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">⟨</span><span class="bp">λ</span> <span class="n">P</span> <span class="n">S</span><span class="o">,</span> <span class="n">P</span> <span class="bp">=</span> <span class="n">S.A</span> <span class="bp">∨</span> <span class="n">P</span> <span class="bp">=</span> <span class="n">S.B</span> <span class="bp">∨</span> <span class="n">S.A</span> <span class="bp">*</span> <span class="n">P</span> <span class="bp">*</span> <span class="n">S.B</span><span class="o">⟩</span>

<span class="kd">instance</span> <span class="n">has_coe_to_set</span> <span class="o">:</span> <span class="n">has_coe</span> <span class="o">(</span><span class="n">Segment</span> <span class="bp">Ω</span><span class="o">)</span> <span class="o">(</span><span class="n">set</span> <span class="bp">Ω</span><span class="o">)</span> <span class="o">:=</span> <span class="o">⟨</span><span class="n">pts</span><span class="o">⟩</span>
<span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">mem_coe_to_mem_pts</span> <span class="o">(</span><span class="n">P</span> <span class="o">:</span> <span class="bp">Ω</span><span class="o">)</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">Segment</span> <span class="bp">Ω</span><span class="o">)</span> <span class="o">:</span>
    <span class="n">P</span> <span class="bp">∈</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">set</span> <span class="bp">Ω</span><span class="o">)</span> <span class="bp">↔</span> <span class="o">(</span><span class="n">P</span> <span class="bp">=</span> <span class="n">S.A</span> <span class="bp">∨</span> <span class="n">P</span> <span class="bp">=</span> <span class="n">S.B</span> <span class="bp">∨</span> <span class="n">S.A</span> <span class="bp">*</span> <span class="n">P</span> <span class="bp">*</span> <span class="n">S.B</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">refl</span>

<span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">mem_pts</span> <span class="o">(</span><span class="n">P</span> <span class="o">:</span> <span class="bp">Ω</span><span class="o">)</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="n">Segment</span> <span class="bp">Ω</span><span class="o">)</span> <span class="o">:</span>
    <span class="n">P</span> <span class="bp">∈</span> <span class="n">S</span> <span class="bp">↔</span> <span class="o">(</span><span class="n">P</span> <span class="bp">=</span> <span class="n">S.A</span> <span class="bp">∨</span> <span class="n">P</span> <span class="bp">=</span> <span class="n">S.B</span> <span class="bp">∨</span> <span class="n">S.A</span> <span class="bp">*</span> <span class="n">P</span> <span class="bp">*</span> <span class="n">S.B</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">refl</span>

<span class="kd">end</span> <span class="n">Segment</span>


<span class="kd">structure</span> <span class="n">Ray</span> <span class="o">(</span><span class="n">Point</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">):=</span>
    <span class="o">(</span><span class="n">origin</span> <span class="o">:</span> <span class="n">Point</span><span class="o">)</span> <span class="o">(</span><span class="n">target</span> <span class="o">:</span> <span class="n">Point</span><span class="o">)</span>
<span class="kd">notation</span> <span class="n">A</span> <span class="bp">`=&gt;`</span> <span class="n">B</span> <span class="o">:=</span> <span class="n">Ray.mk</span> <span class="n">A</span> <span class="n">B</span>

<span class="kn">namespace</span> <span class="n">Ray</span>
<span class="kd">variables</span> <span class="o">{</span><span class="bp">Ω</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">PreHilbertPlane</span> <span class="bp">Ω</span><span class="o">]</span>

<span class="kd">instance</span> <span class="o">:</span> <span class="n">has_mem</span> <span class="bp">Ω</span> <span class="o">(</span><span class="n">Ray</span> <span class="bp">Ω</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">⟨</span><span class="bp">λ</span> <span class="n">P</span> <span class="n">r</span><span class="o">,</span> <span class="n">P</span> <span class="bp">=</span> <span class="n">r.origin</span> <span class="bp">∨</span> <span class="o">(</span><span class="n">collinear</span> <span class="n">r.origin</span> <span class="n">P</span> <span class="n">r.target</span> <span class="bp">∧</span> <span class="bp">¬</span> <span class="n">r.origin</span> <span class="bp">∈</span> <span class="n">pts</span> <span class="o">(</span><span class="n">P</span><span class="bp">⬝</span><span class="n">r.target</span><span class="o">))⟩</span>

<span class="kd">instance</span> <span class="n">has_coe_to_set</span> <span class="o">:</span> <span class="n">has_coe</span> <span class="o">(</span><span class="n">Ray</span> <span class="bp">Ω</span><span class="o">)</span> <span class="o">(</span><span class="n">set</span> <span class="bp">Ω</span><span class="o">)</span> <span class="o">:=</span> <span class="o">⟨</span><span class="n">pts</span><span class="o">⟩</span>
<span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">mem_coe_to_mem_pts</span> <span class="o">(</span><span class="n">P</span> <span class="o">:</span> <span class="bp">Ω</span><span class="o">)</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">Ray</span> <span class="bp">Ω</span><span class="o">)</span> <span class="o">:</span>
    <span class="n">P</span> <span class="bp">∈</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">set</span> <span class="bp">Ω</span><span class="o">)</span> <span class="bp">↔</span>
    <span class="n">P</span> <span class="bp">=</span> <span class="n">r.origin</span> <span class="bp">∨</span> <span class="o">(</span><span class="n">collinear</span> <span class="n">r.origin</span> <span class="n">P</span> <span class="n">r.target</span> <span class="bp">∧</span> <span class="bp">¬</span> <span class="n">r.origin</span> <span class="bp">∈</span> <span class="n">pts</span> <span class="o">(</span><span class="n">P</span><span class="bp">⬝</span><span class="n">r.target</span><span class="o">))</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">refl</span>
<span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">mem_pts</span> <span class="o">(</span><span class="n">P</span> <span class="o">:</span> <span class="bp">Ω</span><span class="o">)</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">Ray</span> <span class="bp">Ω</span><span class="o">)</span> <span class="o">:</span>
    <span class="n">P</span> <span class="bp">∈</span> <span class="n">pts</span> <span class="n">r</span> <span class="bp">↔</span> <span class="n">P</span> <span class="bp">=</span> <span class="n">r.origin</span> <span class="bp">∨</span> <span class="o">(</span><span class="n">collinear</span> <span class="n">r.origin</span> <span class="n">P</span> <span class="n">r.target</span> <span class="bp">∧</span> <span class="bp">¬</span> <span class="n">r.origin</span> <span class="bp">∈</span> <span class="n">pts</span> <span class="o">(</span><span class="n">P</span><span class="bp">⬝</span><span class="n">r.target</span><span class="o">))</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">refl</span>

<span class="kd">end</span> <span class="n">Ray</span>

<span class="kd">structure</span> <span class="n">Angle</span> <span class="o">(</span><span class="n">Point</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">:=</span>
    <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="n">Point</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">Point</span><span class="o">)</span> <span class="o">(</span><span class="n">B</span> <span class="o">:</span> <span class="n">Point</span><span class="o">)</span>
<span class="kd">notation</span> <span class="bp">`∟`</span><span class="o">:</span><span class="mi">100</span> <span class="o">:=</span> <span class="n">Angle.mk</span>

<span class="kn">namespace</span> <span class="n">Angle</span>
<span class="kd">variables</span> <span class="o">{</span><span class="bp">Ω</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">PreHilbertPlane</span> <span class="bp">Ω</span><span class="o">]</span>

<span class="kd">def</span> <span class="n">nondegenerate</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">Angle</span> <span class="bp">Ω</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">¬</span> <span class="n">collinear</span> <span class="n">a.A</span> <span class="n">a.x</span> <span class="n">a.B</span>

<span class="kd">instance</span> <span class="o">:</span> <span class="n">has_mem</span> <span class="bp">Ω</span> <span class="o">(</span><span class="n">Angle</span> <span class="bp">Ω</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">⟨</span><span class="bp">λ</span> <span class="n">P</span> <span class="n">a</span><span class="o">,</span> <span class="n">P</span> <span class="bp">∈</span> <span class="n">pts</span> <span class="o">(</span><span class="n">a.x</span><span class="bp">=&gt;</span><span class="n">a.A</span><span class="o">)</span> <span class="bp">∨</span> <span class="n">P</span> <span class="bp">∈</span> <span class="n">pts</span> <span class="o">(</span><span class="n">a.x</span><span class="bp">=&gt;</span><span class="n">a.B</span><span class="o">)⟩</span>

<span class="kd">instance</span> <span class="n">has_coe_to_set</span> <span class="o">:</span> <span class="n">has_coe</span> <span class="o">(</span><span class="n">Angle</span> <span class="bp">Ω</span><span class="o">)</span> <span class="o">(</span><span class="n">set</span> <span class="bp">Ω</span><span class="o">)</span> <span class="o">:=</span> <span class="o">⟨</span><span class="n">pts</span><span class="o">⟩</span>
<span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">mem_coe_to_mem_pts</span> <span class="o">(</span><span class="n">P</span> <span class="o">:</span> <span class="bp">Ω</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">Angle</span> <span class="bp">Ω</span><span class="o">)</span> <span class="o">:</span>
    <span class="n">P</span> <span class="bp">∈</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">set</span> <span class="bp">Ω</span><span class="o">)</span> <span class="bp">↔</span>
    <span class="n">P</span> <span class="bp">∈</span> <span class="n">pts</span> <span class="o">(</span><span class="n">a.x</span><span class="bp">=&gt;</span><span class="n">a.A</span><span class="o">)</span> <span class="bp">∨</span> <span class="n">P</span> <span class="bp">∈</span> <span class="n">pts</span> <span class="o">(</span><span class="n">a.x</span><span class="bp">=&gt;</span><span class="n">a.B</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">refl</span>

<span class="kd">@[simp]</span> <span class="kd">lemma</span> <span class="n">mem_pts</span> <span class="o">(</span><span class="n">P</span> <span class="o">:</span> <span class="bp">Ω</span><span class="o">)</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">Angle</span> <span class="bp">Ω</span><span class="o">)</span> <span class="o">:</span>
    <span class="n">P</span> <span class="bp">∈</span> <span class="n">a</span> <span class="bp">↔</span>
    <span class="n">P</span> <span class="bp">∈</span> <span class="n">pts</span> <span class="o">(</span><span class="n">a.x</span><span class="bp">=&gt;</span><span class="n">a.A</span><span class="o">)</span> <span class="bp">∨</span> <span class="n">P</span> <span class="bp">∈</span> <span class="n">pts</span> <span class="o">(</span><span class="n">a.x</span><span class="bp">=&gt;</span><span class="n">a.B</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">refl</span>

<span class="kd">end</span> <span class="n">Angle</span>

<span class="kd">class</span> <span class="n">HilbertPlane</span> <span class="o">(</span><span class="n">Point</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="kd">extends</span> <span class="n">PreHilbertPlane</span> <span class="n">Point</span> <span class="o">:=</span>
    <span class="o">(</span><span class="n">B11</span> <span class="o">{</span><span class="n">A</span> <span class="n">B</span> <span class="n">C</span> <span class="o">:</span> <span class="n">Point</span><span class="o">}</span> <span class="o">:</span> <span class="o">(</span><span class="n">A</span> <span class="bp">*</span> <span class="n">B</span> <span class="bp">*</span> <span class="n">C</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="n">C</span> <span class="bp">*</span> <span class="n">B</span> <span class="bp">*</span> <span class="n">A</span><span class="o">))</span>
    <span class="o">(</span><span class="n">B12</span> <span class="o">{</span><span class="n">A</span> <span class="n">B</span> <span class="n">C</span> <span class="o">:</span> <span class="n">Point</span><span class="o">}</span> <span class="o">:</span> <span class="o">(</span><span class="n">A</span> <span class="bp">*</span> <span class="n">B</span> <span class="bp">*</span> <span class="n">C</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="n">A</span> <span class="bp">≠</span> <span class="n">B</span> <span class="bp">∧</span> <span class="n">A</span> <span class="bp">≠</span> <span class="n">C</span> <span class="bp">∧</span> <span class="n">B</span> <span class="bp">≠</span> <span class="n">C</span> <span class="bp">∧</span> <span class="n">collinear</span> <span class="n">A</span> <span class="n">B</span> <span class="n">C</span><span class="o">))</span>
    <span class="o">(</span><span class="n">B2</span> <span class="o">{</span><span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="n">Point</span><span class="o">}</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">C</span><span class="o">,</span> <span class="n">A</span> <span class="bp">*</span> <span class="n">B</span> <span class="bp">*</span> <span class="n">C</span><span class="o">)</span>
    <span class="o">(</span><span class="n">B3</span> <span class="o">{</span><span class="n">A</span> <span class="n">B</span> <span class="n">C</span> <span class="o">:</span> <span class="n">Point</span><span class="o">}</span> <span class="o">{</span><span class="n">ℓ</span> <span class="o">:</span> <span class="n">Line</span><span class="o">}</span>
        <span class="o">(</span><span class="n">hAB</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">≠</span> <span class="n">B</span><span class="o">)</span> <span class="o">(</span><span class="n">hAC</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">≠</span> <span class="n">C</span><span class="o">)</span> <span class="o">(</span><span class="n">hBC</span> <span class="o">:</span> <span class="n">B</span> <span class="bp">≠</span> <span class="n">C</span><span class="o">)</span>
        <span class="o">(</span><span class="n">hAl</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">∈</span> <span class="n">ℓ</span><span class="o">)</span> <span class="o">(</span><span class="n">hBl</span> <span class="o">:</span> <span class="n">B</span> <span class="bp">∈</span> <span class="n">ℓ</span><span class="o">)</span> <span class="o">(</span><span class="n">hCl</span> <span class="o">:</span> <span class="n">C</span> <span class="bp">∈</span> <span class="n">ℓ</span><span class="o">)</span> <span class="o">:</span>
        <span class="o">((</span><span class="n">A</span> <span class="bp">*</span> <span class="n">B</span> <span class="bp">*</span> <span class="n">C</span><span class="o">)</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="o">(</span> <span class="n">B</span> <span class="bp">*</span> <span class="n">A</span> <span class="bp">*</span> <span class="n">C</span> <span class="o">)</span> <span class="bp">∧</span> <span class="bp">¬</span> <span class="o">(</span><span class="n">A</span> <span class="bp">*</span> <span class="n">C</span> <span class="bp">*</span> <span class="n">B</span><span class="o">))</span> <span class="bp">∨</span>
        <span class="o">(</span><span class="bp">¬</span> <span class="o">(</span><span class="n">A</span> <span class="bp">*</span> <span class="n">B</span> <span class="bp">*</span> <span class="n">C</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span> <span class="n">B</span> <span class="bp">*</span> <span class="n">A</span> <span class="bp">*</span> <span class="n">C</span> <span class="o">)</span> <span class="bp">∧</span> <span class="bp">¬</span> <span class="o">(</span><span class="n">A</span> <span class="bp">*</span> <span class="n">C</span> <span class="bp">*</span> <span class="n">B</span><span class="o">))</span> <span class="bp">∨</span>
        <span class="o">(</span><span class="bp">¬</span> <span class="o">(</span><span class="n">A</span> <span class="bp">*</span> <span class="n">B</span> <span class="bp">*</span> <span class="n">C</span><span class="o">)</span> <span class="bp">∧</span> <span class="bp">¬</span><span class="o">(</span> <span class="n">B</span> <span class="bp">*</span> <span class="n">A</span> <span class="bp">*</span> <span class="n">C</span> <span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">A</span> <span class="bp">*</span> <span class="n">C</span> <span class="bp">*</span> <span class="n">B</span><span class="o">)))</span>

    <span class="o">(</span><span class="n">B4</span> <span class="o">{</span><span class="n">A</span> <span class="n">B</span> <span class="n">C</span> <span class="n">D</span> <span class="o">:</span> <span class="n">Point</span><span class="o">}</span> <span class="o">{</span><span class="n">ℓ</span> <span class="o">:</span> <span class="n">Line</span><span class="o">}</span> <span class="c1">-- Pasch</span>
        <span class="o">(</span><span class="n">hnc</span><span class="o">:</span> <span class="bp">¬</span> <span class="n">collinear</span> <span class="n">A</span> <span class="n">B</span> <span class="n">C</span><span class="o">)</span>
        <span class="o">(</span><span class="n">hnAl</span><span class="o">:</span> <span class="bp">¬</span> <span class="o">(</span><span class="n">A</span> <span class="bp">∈</span> <span class="n">ℓ</span><span class="o">))</span> <span class="o">(</span><span class="n">hnBl</span><span class="o">:</span> <span class="bp">¬</span> <span class="n">B</span> <span class="bp">∈</span> <span class="n">ℓ</span><span class="o">)</span> <span class="o">(</span><span class="n">hnCl</span><span class="o">:</span> <span class="bp">¬</span> <span class="n">C</span> <span class="bp">∈</span> <span class="n">ℓ</span><span class="o">)</span>
        <span class="o">(</span><span class="n">hDl</span><span class="o">:</span> <span class="n">D</span> <span class="bp">∈</span> <span class="n">ℓ</span><span class="o">)</span> <span class="o">(</span><span class="n">hADB</span><span class="o">:</span> <span class="n">A</span> <span class="bp">*</span> <span class="n">D</span> <span class="bp">*</span> <span class="n">B</span><span class="o">)</span> <span class="o">:</span>
            <span class="o">(</span><span class="bp">∃</span> <span class="n">E</span> <span class="o">,</span>  <span class="n">E</span> <span class="bp">∈</span> <span class="n">ℓ</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">A</span> <span class="bp">*</span> <span class="n">E</span> <span class="bp">*</span> <span class="n">C</span><span class="o">))</span> <span class="n">xor</span> <span class="o">(</span><span class="bp">∃</span> <span class="n">E</span><span class="o">,</span> <span class="n">E</span> <span class="bp">∈</span> <span class="n">ℓ</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">B</span> <span class="bp">*</span> <span class="n">E</span> <span class="bp">*</span> <span class="n">C</span><span class="o">)))</span>

    <span class="c1">--(parallel_postulate {ℓ r s : Line} : (intersect r s) ∧ (r || ℓ) ∧ (s || ℓ) → (r = s))</span>

    <span class="o">(</span><span class="n">seg_cong</span> <span class="o">:</span> <span class="n">Segment</span> <span class="n">Point</span> <span class="bp">→</span> <span class="n">Segment</span> <span class="n">Point</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span>
    <span class="o">(</span><span class="kd">notation</span> <span class="n">X</span> <span class="bp">`≅`</span><span class="o">:</span><span class="mi">50</span> <span class="n">Y</span> <span class="o">:=</span> <span class="n">seg_cong</span> <span class="n">X</span> <span class="n">Y</span><span class="o">)</span>
    <span class="o">(</span><span class="n">ang_cong</span> <span class="o">:</span> <span class="n">Angle</span> <span class="n">Point</span> <span class="bp">→</span> <span class="n">Angle</span> <span class="n">Point</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span>
    <span class="o">(</span><span class="kd">notation</span> <span class="n">X</span> <span class="bp">`≃`</span><span class="o">:</span><span class="mi">50</span> <span class="n">Y</span> <span class="o">:=</span> <span class="n">ang_cong</span> <span class="n">X</span> <span class="n">Y</span><span class="o">)</span>

    <span class="o">(</span><span class="n">C1</span> <span class="o">{</span><span class="n">S</span> <span class="o">:</span> <span class="n">Segment</span> <span class="n">Point</span><span class="o">}</span> <span class="o">{</span><span class="n">r</span> <span class="o">:</span> <span class="n">Ray</span> <span class="n">Point</span><span class="o">}</span> <span class="o">:</span>
        <span class="bp">∃!</span> <span class="n">D</span><span class="o">,</span> <span class="o">(</span><span class="n">D</span> <span class="bp">∈</span> <span class="n">pts</span> <span class="n">r</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">((</span><span class="n">S.A</span><span class="bp">⬝</span><span class="n">S.B</span><span class="o">)</span> <span class="bp">≅</span> <span class="o">(</span><span class="n">r.origin</span><span class="bp">⬝</span><span class="n">D</span><span class="o">)))</span>
    <span class="o">(</span><span class="n">C21</span> <span class="o">{</span><span class="n">S</span> <span class="n">T</span> <span class="n">U</span><span class="o">}:</span> <span class="o">(</span><span class="n">S</span> <span class="bp">≅</span> <span class="n">T</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="n">S</span> <span class="bp">≅</span> <span class="n">U</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="n">T</span> <span class="bp">≅</span> <span class="n">U</span><span class="o">))</span>
    <span class="o">(</span><span class="n">C22</span> <span class="o">{</span><span class="n">A</span> <span class="n">B</span><span class="o">}</span> <span class="o">:</span> <span class="o">(</span><span class="n">A</span><span class="bp">⬝</span><span class="n">B</span><span class="o">)</span> <span class="bp">≅</span> <span class="o">(</span><span class="n">A</span><span class="bp">⬝</span><span class="n">B</span><span class="o">))</span>
    <span class="o">(</span><span class="n">C3</span> <span class="o">{</span><span class="n">A</span> <span class="n">B</span> <span class="n">C</span> <span class="n">D</span> <span class="n">E</span> <span class="n">F</span><span class="o">}</span> <span class="o">:</span> <span class="o">(</span><span class="n">A</span> <span class="bp">*</span> <span class="n">B</span> <span class="bp">*</span> <span class="n">C</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="n">D</span> <span class="bp">*</span> <span class="n">E</span> <span class="bp">*</span> <span class="n">F</span><span class="o">)</span> <span class="bp">→</span>
        <span class="o">((</span><span class="n">A</span><span class="bp">⬝</span><span class="n">B</span><span class="o">)</span> <span class="bp">≅</span> <span class="o">(</span><span class="n">D</span><span class="bp">⬝</span><span class="n">E</span><span class="o">))</span> <span class="bp">→</span> <span class="o">((</span><span class="n">B</span><span class="bp">⬝</span><span class="n">C</span><span class="o">)</span> <span class="bp">≅</span> <span class="o">(</span><span class="n">E</span><span class="bp">⬝</span><span class="n">F</span><span class="o">))</span> <span class="bp">→</span> <span class="o">((</span><span class="n">A</span><span class="bp">⬝</span><span class="n">C</span><span class="o">)</span> <span class="bp">≅</span> <span class="o">(</span><span class="n">D</span><span class="bp">⬝</span><span class="n">F</span><span class="o">)))</span>

    <span class="o">(</span><span class="n">C4</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="n">Angle</span> <span class="n">Point</span><span class="o">}</span> <span class="o">{</span><span class="n">S</span> <span class="o">:</span> <span class="n">Segment</span> <span class="n">Point</span><span class="o">}</span> <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="n">Point</span><span class="o">}</span>
        <span class="o">(</span><span class="n">hBAC</span> <span class="o">:</span> <span class="n">α.nondegenerate</span><span class="o">)</span> <span class="o">(</span><span class="n">hs</span> <span class="o">:</span> <span class="bp">¬</span> <span class="n">collinear</span> <span class="n">s</span> <span class="n">S.A</span> <span class="n">S.B</span> <span class="o">)</span> <span class="o">(</span><span class="n">hr</span> <span class="o">:</span> <span class="n">S.A</span> <span class="bp">≠</span> <span class="n">S.B</span><span class="o">)</span> <span class="o">:</span>  <span class="n">Point</span><span class="o">)</span>
    <span class="o">(</span><span class="n">C4spec</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="n">Angle</span> <span class="n">Point</span><span class="o">}</span> <span class="o">{</span><span class="n">S</span> <span class="o">:</span> <span class="n">Segment</span> <span class="n">Point</span><span class="o">}</span> <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="n">Point</span><span class="o">}</span>
        <span class="o">(</span><span class="n">hBAC</span> <span class="o">:</span> <span class="n">α.nondegenerate</span><span class="o">)</span> <span class="o">(</span><span class="n">hs</span> <span class="o">:</span> <span class="bp">¬</span> <span class="n">collinear</span> <span class="n">s</span> <span class="n">S.A</span> <span class="n">S.B</span><span class="o">)</span> <span class="o">(</span><span class="n">hr</span> <span class="o">:</span> <span class="n">S.A</span> <span class="bp">≠</span> <span class="n">S.B</span><span class="o">)</span> <span class="o">:</span>
        <span class="o">(</span><span class="bp">∟</span> <span class="o">(</span><span class="n">C4</span> <span class="n">hBAC</span> <span class="n">hs</span> <span class="n">hr</span><span class="o">)</span> <span class="n">S.A</span> <span class="n">S.B</span> <span class="bp">≃</span> <span class="n">α</span><span class="o">)</span> <span class="bp">∧</span>
        <span class="o">(</span><span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">Point</span><span class="o">),</span> <span class="o">((</span><span class="n">C4</span> <span class="n">hBAC</span> <span class="n">hs</span> <span class="n">hr</span><span class="o">)</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">s</span><span class="o">)</span> <span class="bp">→</span> <span class="bp">¬</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">line_through</span> <span class="n">hr</span><span class="o">))</span>
    <span class="o">(</span><span class="n">C4uniq</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="n">Angle</span> <span class="n">Point</span><span class="o">}</span> <span class="o">{</span><span class="n">S</span> <span class="o">:</span> <span class="n">Segment</span> <span class="n">Point</span><span class="o">}</span> <span class="o">{</span><span class="n">s</span> <span class="o">:</span> <span class="n">Point</span><span class="o">}</span> <span class="o">{</span><span class="n">Z</span> <span class="o">:</span> <span class="n">Point</span><span class="o">}</span>
        <span class="o">(</span><span class="n">hBAC</span> <span class="o">:</span> <span class="n">α.nondegenerate</span><span class="o">)</span> <span class="o">(</span><span class="n">hs</span> <span class="o">:</span> <span class="bp">¬</span> <span class="n">collinear</span> <span class="n">s</span> <span class="n">S.A</span> <span class="n">S.B</span><span class="o">)</span> <span class="o">(</span><span class="n">hr</span> <span class="o">:</span> <span class="n">S.A</span> <span class="bp">≠</span> <span class="n">S.B</span><span class="o">)</span> <span class="o">:</span>
         <span class="o">(</span><span class="bp">∟</span> <span class="n">Z</span> <span class="n">S.A</span> <span class="n">S.B</span> <span class="bp">≃</span> <span class="n">α</span><span class="o">)</span> <span class="bp">→</span>
         <span class="o">((</span><span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">Point</span><span class="o">),</span> <span class="o">(</span><span class="n">Z</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">*</span> <span class="n">s</span><span class="o">)</span> <span class="bp">→</span> <span class="bp">¬</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">line_through</span> <span class="n">hr</span><span class="o">))</span> <span class="bp">→</span>
         <span class="n">pts</span> <span class="o">(</span><span class="n">S.A</span><span class="bp">=&gt;</span><span class="n">Z</span><span class="o">)</span> <span class="bp">=</span> <span class="n">pts</span> <span class="o">(</span><span class="n">S.A</span><span class="bp">=&gt;</span><span class="o">(</span><span class="n">C4</span> <span class="n">hBAC</span> <span class="n">hs</span> <span class="n">hr</span><span class="o">)))</span>
    <span class="o">(</span><span class="n">C5</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span> <span class="n">γ</span> <span class="o">:</span> <span class="n">Angle</span> <span class="n">Point</span><span class="o">}</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">≃</span> <span class="n">β</span> <span class="bp">→</span> <span class="n">α</span> <span class="bp">≃</span> <span class="n">γ</span> <span class="bp">→</span> <span class="n">β</span> <span class="bp">≃</span> <span class="n">γ</span><span class="o">)</span>
    <span class="o">(</span><span class="n">C6</span> <span class="o">{</span><span class="n">A</span> <span class="n">B</span> <span class="n">C</span> <span class="n">D</span> <span class="n">E</span> <span class="n">F</span><span class="o">}</span> <span class="o">:</span> <span class="o">(</span><span class="n">A</span><span class="bp">⬝</span><span class="n">B</span> <span class="bp">≅</span> <span class="n">D</span><span class="bp">⬝</span><span class="n">E</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="n">A</span><span class="bp">⬝</span><span class="n">C</span> <span class="bp">≅</span> <span class="n">D</span><span class="bp">⬝</span><span class="n">F</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="bp">∟</span> <span class="n">B</span> <span class="n">A</span> <span class="n">C</span> <span class="bp">≃</span> <span class="bp">∟</span> <span class="n">E</span> <span class="n">D</span> <span class="n">F</span><span class="o">)</span> <span class="bp">→</span>
        <span class="o">(</span><span class="n">B</span><span class="bp">⬝</span><span class="n">C</span> <span class="bp">≅</span> <span class="n">E</span><span class="bp">⬝</span><span class="n">F</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="bp">∟</span> <span class="n">A</span> <span class="n">B</span> <span class="n">C</span> <span class="bp">≃</span> <span class="bp">∟</span> <span class="n">D</span> <span class="n">E</span> <span class="n">F</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="bp">∟</span> <span class="n">A</span> <span class="n">C</span> <span class="n">B</span> <span class="bp">≃</span> <span class="bp">∟</span> <span class="n">D</span> <span class="n">F</span> <span class="n">E</span><span class="o">))</span>


<span class="kn">namespace</span> <span class="n">HilbertPlane</span>

<span class="kd">notation</span> <span class="n">X</span> <span class="bp">`≅`</span><span class="o">:</span><span class="mi">50</span> <span class="n">Y</span> <span class="o">:=</span> <span class="n">HilbertPlane.seg_cong</span> <span class="n">X</span> <span class="n">Y</span>
<span class="kd">notation</span> <span class="n">X</span> <span class="bp">`≃`</span><span class="o">:</span><span class="mi">50</span> <span class="n">Y</span> <span class="o">:=</span> <span class="n">HilbertPlane.ang_cong</span> <span class="n">X</span> <span class="n">Y</span>

<span class="kd">end</span> <span class="n">HilbertPlane</span>
</code></pre></div>



<a name="212845933"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Right%20implementation%20of%20Hilbert%20Plane%3F/near/212845933" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Right.20implementation.20of.20Hilbert.20Plane.3F.html#212845933">(Oct 09 2020 at 16:09)</a>:</h4>
<p><span class="user-mention" data-user-id="266253">@Joseph Myers</span> might be interested too as he's been doing a lot of Euclidean geometry in mathlib.</p>



<a name="212885920"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Right%20implementation%20of%20Hilbert%20Plane%3F/near/212885920" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph Myers <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Right.20implementation.20of.20Hilbert.20Plane.3F.html#212885920">(Oct 09 2020 at 23:27)</a>:</h4>
<p>I guess a natural thing to do with a definition of Hilbert plane once you have it is to show that two-dimensional Euclidean spaces (i.e. <code>{V : Type*} {P : Type*} [inner_product_space ℝ V] [metric_space P] [normed_add_torsor V P] [finite_dimensional ℝ V] (h : findim ℝ V = 2)</code>) are instances of it, as are hyperbolic spaces (which arguably gives item 12 from Freek's list) and conversely classify models of Hilbert planes with / without the parallel postulate (so construct the <code>inner_product_space</code> etc. structures given a Hilbert plane with the parallel postulate). But that doesn't answer the best way to structure the code.</p>



<a name="212886165"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Right%20implementation%20of%20Hilbert%20Plane%3F/near/212886165" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Joseph Myers <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Right.20implementation.20of.20Hilbert.20Plane.3F.html#212886165">(Oct 09 2020 at 23:31)</a>:</h4>
<p>Is there a version of Hilbert's axioms for n-dimensional geometry, like there is for Tarski's? The geometry in mathlib is in any (not necessarily finite) dimension, working where possible for affine subspaces of any dimension not just lines and planes, etc. (and results that do rely on a plane are expressed in terms of coplanar points, where the ambient Euclidean space might have a higher dimension, possibly with a separate version where the space is two-dimensional if having that version is useful as well).</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>