---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/coordinate.20changes.20in.20a.20topological.20vector.20bundle.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/coordinate.20changes.20in.20a.20topological.20vector.20bundle.html">coordinate changes in a topological vector bundle</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="282499059"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/coordinate%20changes%20in%20a%20topological%20vector%20bundle/near/282499059" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/coordinate.20changes.20in.20a.20topological.20vector.20bundle.html#282499059">(May 16 2022 at 14:00)</a>:</h4>
<p>In <a href="https://github.com/leanprover-community/mathlib/pull/13175">#13175</a> the field <code>continuous_coord_change</code> was added to <a href="https://leanprover-community.github.io/mathlib_docs/find/topological_vector_bundle">docs#topological_vector_bundle</a>, defined in terms of <a href="https://leanprover-community.github.io/mathlib_docs/find/continuous_transitions">docs#continuous_transitions</a>. <br>
I'm a bit confused by the definition of <code>continuous_transitions</code>. isn't the <code>s</code> in <code>continuous_transitions</code> just <code>e.base_set ∩ e'.base_set</code>? If so, is there a reason to not be more explicit in the definition of <code>continuous_transitions</code>?</p>
<p>pinging <span class="user-mention" data-user-id="260507">@Heather Macbeth</span> <span class="user-mention" data-user-id="110031">@Patrick Massot</span>.</p>



<a name="282501186"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/coordinate%20changes%20in%20a%20topological%20vector%20bundle/near/282501186" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/coordinate.20changes.20in.20a.20topological.20vector.20bundle.html#282501186">(May 16 2022 at 14:15)</a>:</h4>
<p>Oh, I'm now looking at <a href="https://leanprover-community.github.io/mathlib_docs/find/topological_vector_bundle.continuous_on_coord_change">docs#topological_vector_bundle.continuous_on_coord_change</a> and there the <code>s</code> is given explicitly.</p>



<a name="282503324"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/coordinate%20changes%20in%20a%20topological%20vector%20bundle/near/282503324" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/coordinate.20changes.20in.20a.20topological.20vector.20bundle.html#282503324">(May 16 2022 at 14:29)</a>:</h4>
<p>I had started working on a branch <a href="https://github.com/leanprover-community/mathlib/tree/gouezel_pullback">branch#gouezel_pullback</a> to clean up a little bit <a href="https://github.com/leanprover-community/mathlib/pull/8545">#8545</a>. I've just seen you've started on the same lines. Along this work, I noticed the same on <code>continuous_transitions</code>, and I started refactoring it to include the set. I'm not done with the refactor, but if you want to pick up anything from this branch don't hesitate to do so.</p>



<a name="282506463"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/coordinate%20changes%20in%20a%20topological%20vector%20bundle/near/282506463" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/coordinate.20changes.20in.20a.20topological.20vector.20bundle.html#282506463">(May 16 2022 at 14:48)</a>:</h4>
<p>Interesting. I think our cleanup went into different directions, but I'll see what I can incorporate. <br>
I just finished the proof of <code>continuous_coord_change</code> for <code>pullback</code>, but a refactor of <code>continuous_transitions</code> would still be helpful.</p>



<a name="282513902"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/coordinate%20changes%20in%20a%20topological%20vector%20bundle/near/282513902" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/coordinate.20changes.20in.20a.20topological.20vector.20bundle.html#282513902">(May 16 2022 at 15:41)</a>:</h4>
<p>I also noticed while working on Hom bundles that this spelling with a mysterious set s was a bit weird.</p>



<a name="282514033"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/coordinate%20changes%20in%20a%20topological%20vector%20bundle/near/282514033" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/coordinate.20changes.20in.20a.20topological.20vector.20bundle.html#282514033">(May 16 2022 at 15:42)</a>:</h4>
<p>And I'm <em>very</em> happy to read that two people were working on this pull-back stuff while I was attending a student talk and then supervising a written exam.</p>



<a name="282523505"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/coordinate%20changes%20in%20a%20topological%20vector%20bundle/near/282523505" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/coordinate.20changes.20in.20a.20topological.20vector.20bundle.html#282523505">(May 16 2022 at 16:46)</a>:</h4>
<p>In 2017 I noticed that the definition of compact also had a weird <code>s</code> in, but Johannes Hoelzl assured me it was a good idea...</p>



<a name="282543419"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/coordinate%20changes%20in%20a%20topological%20vector%20bundle/near/282543419" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/coordinate.20changes.20in.20a.20topological.20vector.20bundle.html#282543419">(May 16 2022 at 18:49)</a>:</h4>
<p>I pushed a version that I think compiles, with a complete proof (it might still have linter errors).<br>
It would still be nice to use your simplified definition of the topology on the pullback bundle. If you want, you can change that, or otherwise I'll change that at some point.</p>



<a name="282643570"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/coordinate%20changes%20in%20a%20topological%20vector%20bundle/near/282643570" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/coordinate.20changes.20in.20a.20topological.20vector.20bundle.html#282643570">(May 17 2022 at 13:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="111080">Floris van Doorn</span> <a href="#narrow/stream/116395-maths/topic/coordinate.20changes.20in.20a.20topological.20vector.20bundle/near/282499059">said</a>:</p>
<blockquote>
<p>In <a href="https://github.com/leanprover-community/mathlib/pull/13175">#13175</a> the field <code>continuous_coord_change</code> was added to <a href="https://leanprover-community.github.io/mathlib_docs/find/topological_vector_bundle">docs#topological_vector_bundle</a>, defined in terms of <a href="https://leanprover-community.github.io/mathlib_docs/find/continuous_transitions">docs#continuous_transitions</a>. <br>
I'm a bit confused by the definition of <code>continuous_transitions</code>. isn't the <code>s</code> in <code>continuous_transitions</code> just <code>e.base_set ∩ e'.base_set</code>? If so, is there a reason to not be more explicit in the definition of <code>continuous_transitions</code>?</p>
<p>pinging <span class="user-mention silent" data-user-id="260507">Heather Macbeth</span> <span class="user-mention silent" data-user-id="110031">Patrick Massot</span>.</p>
</blockquote>
<p><span class="user-mention" data-user-id="111080">@Floris van Doorn</span> <span class="user-mention" data-user-id="110050">@Sebastien Gouezel</span> I was thinking of defining, later, the structure groupoid for <code>B × F</code> consisting of elements satisfying <code>continuous_transitions</code>.  The elements of this structure groupoid would have type <code>local_equiv (B × F) (B × F)</code> (in fact, <code>local_homeomorph</code>) rather than type <code>pretrivialization</code> -- they don't "know" their own base set.</p>



<a name="282643784"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/coordinate%20changes%20in%20a%20topological%20vector%20bundle/near/282643784" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/coordinate.20changes.20in.20a.20topological.20vector.20bundle.html#282643784">(May 17 2022 at 13:57)</a>:</h4>
<p>I haven't tried to define (eg) smooth vector bundles yet, but I had an idea that this groupoid approach might be useful there.</p>



<a name="282644708"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/coordinate%20changes%20in%20a%20topological%20vector%20bundle/near/282644708" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/coordinate.20changes.20in.20a.20topological.20vector.20bundle.html#282644708">(May 17 2022 at 14:02)</a>:</h4>
<p>Hopefully, with API like <a href="https://leanprover-community.github.io/mathlib_docs/find/topological_vector_bundle.continuous_on_coord_change">docs#topological_vector_bundle.continuous_on_coord_change</a>, it's not too painful to work with.</p>



<a name="282652249"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/coordinate%20changes%20in%20a%20topological%20vector%20bundle/near/282652249" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/coordinate.20changes.20in.20a.20topological.20vector.20bundle.html#282652249">(May 17 2022 at 14:53)</a>:</h4>
<p>But currently, every time you define a <code>topological_vector_bundle</code> you have to prove that <code>(e.base_set ∩ e'.base_set) ×ˢ (univ : set F)</code> is the source of <code>e.to_local_equiv.symm.trans e'.to_local_equiv</code>.</p>
<p>I think it's better to be more explicit, and put </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">∃</span> <span class="n">ε</span> <span class="o">:</span> <span class="n">B</span> <span class="bp">→</span> <span class="o">(</span><span class="n">F</span> <span class="bp">≃</span><span class="n">L</span><span class="o">[</span><span class="n">R</span><span class="o">]</span> <span class="n">F</span><span class="o">),</span> <span class="n">continuous_on</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">b</span><span class="o">,</span> <span class="o">(</span><span class="n">ε</span> <span class="n">b</span> <span class="o">:</span> <span class="n">F</span> <span class="bp">→</span><span class="n">L</span><span class="o">[</span><span class="n">R</span><span class="o">]</span> <span class="n">F</span><span class="o">))</span> <span class="n">s</span>
    <span class="bp">∧</span> <span class="bp">∀</span> <span class="n">b</span> <span class="bp">∈</span> <span class="n">s</span><span class="o">,</span> <span class="bp">∀</span> <span class="n">v</span> <span class="o">:</span> <span class="n">F</span><span class="o">,</span> <span class="n">e</span> <span class="o">(</span><span class="n">b</span><span class="o">,</span> <span class="n">v</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">b</span><span class="o">,</span> <span class="n">ε</span> <span class="n">b</span> <span class="n">v</span><span class="o">)</span>
</code></pre></div>
<p>as a field, where <code>s = e.base_set ∩ e'.base_set</code>. <br>
Maybe we can even go crazier, and put <code>ε</code> in <code>topological_vector_bundle</code> as a data field? Or will that give the wrong notion of equality on <code>topological_vector_bundle</code>?</p>



<a name="282654668"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/coordinate%20changes%20in%20a%20topological%20vector%20bundle/near/282654668" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/coordinate.20changes.20in.20a.20topological.20vector.20bundle.html#282654668">(May 17 2022 at 15:08)</a>:</h4>
<p>If we change the definition of <code>topological_vector_bundle</code>, we can still obtain a <code>continuous_transition</code> from a <code>topological_vector_bundle</code>, of course.</p>



<a name="282665905"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/coordinate%20changes%20in%20a%20topological%20vector%20bundle/near/282665905" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/coordinate.20changes.20in.20a.20topological.20vector.20bundle.html#282665905">(May 17 2022 at 16:16)</a>:</h4>
<p><span class="user-mention silent" data-user-id="111080">Floris van Doorn</span> <a href="#narrow/stream/116395-maths/topic/coordinate.20changes.20in.20a.20topological.20vector.20bundle/near/282652249">said</a>:</p>
<blockquote>
<p>But currently, every time you define a <code>topological_vector_bundle</code> you have to prove that <code>(e.base_set ∩ e'.base_set) ×ˢ (univ : set F)</code> is the source of <code>e.to_local_equiv.symm.trans e'.to_local_equiv</code>.</p>
</blockquote>
<p>Yes, that's true.  In the two examples we have already (<a href="https://github.com/leanprover-community/mathlib/blob/3d279118b3c2987d2ee4396d6afa2171508ec366/src/topology/vector_bundle.lean#L981">direct sum</a> and <a href="https://github.com/leanprover-community/mathlib/blob/417bc07404cc366de8f22d94f36b7906b4ba6f46/src/topology/vector_bundle_hom.lean#L302">hom-bundle</a>), Patrick and I had to invoke <code>mfld_set_tac</code> for this bookkeeping.  I have no objection to either of the revised versions you suggest!</p>



<a name="283778244"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/coordinate%20changes%20in%20a%20topological%20vector%20bundle/near/283778244" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/coordinate.20changes.20in.20a.20topological.20vector.20bundle.html#283778244">(May 24 2022 at 17:17)</a>:</h4>
<p>I incorporated a bunch of <span class="user-mention" data-user-id="110050">@Sebastien Gouezel</span>'s improvements into  <a href="https://github.com/leanprover-community/mathlib/pull/8545">#8545</a>, which is now ready for review.</p>



<a name="284162478"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/coordinate%20changes%20in%20a%20topological%20vector%20bundle/near/284162478" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/coordinate.20changes.20in.20a.20topological.20vector.20bundle.html#284162478">(May 27 2022 at 17:35)</a>:</h4>
<p>I've started on changing the field <code>continuous_coord_change</code> in <a href="https://github.com/leanprover-community/mathlib/tree/continuous_coord_change">branch#continuous_coord_change</a>.</p>



<a name="284375146"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/coordinate%20changes%20in%20a%20topological%20vector%20bundle/near/284375146" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Floris van Doorn <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/coordinate.20changes.20in.20a.20topological.20vector.20bundle.html#284375146">(May 30 2022 at 14:36)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/14462">#14462</a><br>
I think the proofs that coordinate changes are continuous are nicer/simpler with the new definitions. <br>
There is a downside: you now have to show that the coordinate change of your new vector bundle somehow relates to the coordinate change of the existing vector bundle (e.g. the coordinate change on the product vector bundle is a <code>prod_map</code> of the existing coordinate changes).</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>