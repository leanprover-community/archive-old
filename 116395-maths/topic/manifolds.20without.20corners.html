---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/manifolds.20without.20corners.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/manifolds.20without.20corners.html">manifolds without corners</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="249475751"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/manifolds%20without%20corners/near/249475751" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/manifolds.20without.20corners.html#249475751">(Aug 14 2021 at 20:15)</a>:</h4>
<p>So I finally had a proper look at <span class="user-mention" data-user-id="267205">@Nicolò Cavalleri</span> 's paper with <span class="user-mention" data-user-id="125073">@Anthony Bordg</span> on Lie groups etc in Lean <a href="https://arxiv.org/abs/2108.00484">https://arxiv.org/abs/2108.00484</a> . They talk about the problems they had using manifolds with corners, e.g. when proving the product of two Lie groups is a Lie group. Johan reminds me of Patrick's observation that locally ringed spaces can't be used as a foundation for the theory of manifolds with corners, because e.g. the closed quarter disc and closed half disc are isomorphic as locally ringed spaces but not isomorphic as manifolds with corners. However I personally had never heard of a manifold with corner before this development and I'm not sure that they come up at all in the kinds of manifolds I'm interested in as a Langlands philosophy person, namely the quotients of symmetric spaces like the upper half plane by discrete subgroups like SL_2(Z). We do see manifolds with boundary as part of a differential-geometric compactification sometimes, but we will not need such things for a very long time. </p>
<p>I am wondering if there is a case for developing a theory of smooth manifolds using the locally ringed space machinery we have, to see if it makes applications like Lie groups or vector bundles any easier -- I think that exterior powers of the cotangent bundle are something which we will need sooner rather than later but it still seems to me that we're struggling to do this. With locally ringed spaces I should think linear algebra on bundles becomes as easy as linear algebra on modules.</p>
<p>Or is making a new definition a disastrous idea and we should instead make a better API for what we have?</p>



<a name="249475952"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/manifolds%20without%20corners/near/249475952" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/manifolds.20without.20corners.html#249475952">(Aug 14 2021 at 20:20)</a>:</h4>
<p>The corner thing is true, but that's not the main point. The main point is that the ring space point of view doesn't fix anything, because you need charts anyway. The discussion is analogous to saying you don't need Spec to define schemes because schemes are locally ringed spaces.</p>



<a name="249475960"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/manifolds%20without%20corners/near/249475960" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/manifolds.20without.20corners.html#249475960">(Aug 14 2021 at 20:21)</a>:</h4>
<p>This whole discussion is an algebraic geometer fantasy, but no one ever took it seriously.</p>



<a name="249476732"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/manifolds%20without%20corners/near/249476732" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/manifolds.20without.20corners.html#249476732">(Aug 14 2021 at 20:45)</a>:</h4>
<p>But this paper points out some problems with how we have things set up, and some of them seem to be because we're keeping track of corners too hard</p>



<a name="249476796"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/manifolds%20without%20corners/near/249476796" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/manifolds.20without.20corners.html#249476796">(Aug 14 2021 at 20:47)</a>:</h4>
<p>I guess I'm trying to work out why doing linear algebra with the tangent bundle is hard</p>



<a name="249481906"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/manifolds%20without%20corners/near/249481906" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/manifolds.20without.20corners.html#249481906">(Aug 14 2021 at 23:18)</a>:</h4>
<p>Kevin, in what sense is the quarter disc isomorphic to the half disc as locally ringed spaces? What are the sheaves? This probably just means you're considering a context with too many functions in your sheaves.</p>



<a name="249485003"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/manifolds%20without%20corners/near/249485003" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/manifolds.20without.20corners.html#249485003">(Aug 15 2021 at 00:50)</a>:</h4>
<p>I just figured that the "complex squaring map" was an isomorphism from a closed quarter-disc to a closed half-disc. Is there something funny going on at 0?</p>
<p>Patrick's point is I think that even if we had no corners we'd still have the issue that if G is locally R^a and H is locally R^b then G x H is probably locally R^a x R^b instead of R^{a+b}.</p>



<a name="249486627"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/manifolds%20without%20corners/near/249486627" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/manifolds.20without.20corners.html#249486627">(Aug 15 2021 at 01:40)</a>:</h4>
<p>Squaring doesn't induce an isomorphism of 1-jets at <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>. If <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mo>:</mo><mi>Q</mi><mo>→</mo><mi>H</mi></mrow><annotation encoding="application/x-tex">s:Q\to H</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">Q</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span></span></span></span> is the squaring map from the closed quarter disk to the closed half disk, the induced ring homomorphism <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>hom</mi><mo>⁡</mo><mo stretchy="false">(</mo><msubsup><mi>C</mi><mn>0</mn><mi mathvariant="normal">∞</mi></msubsup><mo stretchy="false">(</mo><mi>H</mi><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><msubsup><mi mathvariant="fraktur">m</mi><mn>0</mn><mn>2</mn></msubsup><mo separator="true">,</mo><msubsup><mi>C</mi><mn>0</mn><mi mathvariant="normal">∞</mi></msubsup><mo stretchy="false">(</mo><mi>Q</mi><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><msubsup><mi mathvariant="fraktur">m</mi><mn>0</mn><mn>2</mn></msubsup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\hom(C^\infty_0(H)/\mathfrak{m}_0^2,C^\infty_0(Q)/\mathfrak{m}_0^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mop">hom</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-2.4518920000000004em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">∞</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.24810799999999997em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mclose">)</span><span class="mord">/</span><span class="mord"><span class="mord mathfrak">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-2.4518920000000004em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.24810799999999997em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-2.4518920000000004em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">∞</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.24810799999999997em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">Q</span><span class="mclose">)</span><span class="mord">/</span><span class="mord"><span class="mord mathfrak">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-2.4518920000000004em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.24810799999999997em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> is <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mi>f</mi><mo stretchy="false">]</mo><mo>↦</mo><mo stretchy="false">[</mo><mi>f</mi><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[f]\mapsto [f(0)]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">↦</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord">0</span><span class="mclose">)]</span></span></span></span>, where <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi mathvariant="fraktur">m</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">\mathfrak{m}_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.62534em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathfrak">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> denotes the maximal ideal in the relevant local ring.  (At least, I'm pretty sure that these quotients are both isomorphic to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">R</mi><mo stretchy="false">[</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>2</mn></msub><mo stretchy="false">]</mo><mi mathvariant="normal">/</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>x</mi><mn>2</mn></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">\R[x_1,x_2]/(x_1,x_2)^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathbb">R</span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">]</span><span class="mord">/</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span> even in the presence of corners.  It seems everything carries over just fine.)</p>
<p>The angle doubling function doesn't seem to work, either, since nothing maps to the germ of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mo>=</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">f(x,y)=x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">x</span></span></span></span> on <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi></mrow><annotation encoding="application/x-tex">Q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">Q</span></span></span></span> at <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>.</p>



<a name="249497829"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/manifolds%20without%20corners/near/249497829" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/manifolds.20without.20corners.html#249497829">(Aug 15 2021 at 07:24)</a>:</h4>
<p>The difficulty has nothing to do with corners, it is already there for manifolds without boundary. Let's say that a manifold is a space with the data of a bunch of charts. For instance, a vector space is naturally a manifold, with a single chart, the identity. Then, if <code>E</code> and <code>F</code> are two vector spaces, then <code>E × F</code> is a vector space, so it has the manifold structure with the identity as single chart. But it is also a product of manifolds, so it has a manifold structure, with a single chart equal to the product of the charts of the single components, i.e., the product of the identities, which is <em>not</em> defeq to the identity.  If you're not careful, you get two non-defeq manifold structures on <code>E × F</code>, which is bad as we know. This just means that you have to be a little bit careful when defining product manifolds, by introducing a suitable type synonym somewhere. But this is not hard at all, it's just one of these little things that you notice when you formalize properly.</p>
<p>By the way, I have no interest for manifolds with corners. What I really care about are manifolds, and manifolds with boundary (these show up everywhere, for instance to formulate Stokes formula). Manifolds with corners as defined in mathlib are just one way to cover in one go manifolds and manifolds with boundary.</p>



<a name="249500441"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/manifolds%20without%20corners/near/249500441" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/manifolds.20without.20corners.html#249500441">(Aug 15 2021 at 08:36)</a>:</h4>
<p>Could you elaborate on exactly what ends up nondefeq? (Specifically what type the offending equality is between)</p>



<a name="249502236"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/manifolds%20without%20corners/near/249502236" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/manifolds.20without.20corners.html#249502236">(Aug 15 2021 at 09:19)</a>:</h4>
<p>Kevin gave the main example two messages above.</p>



<a name="249502430"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/manifolds%20without%20corners/near/249502430" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/manifolds.20without.20corners.html#249502430">(Aug 15 2021 at 09:22)</a>:</h4>
<p>Perhaps I should have also asked "are they even propositionally equal"?</p>



<a name="249502741"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/manifolds%20without%20corners/near/249502741" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/manifolds.20without.20corners.html#249502741">(Aug 15 2021 at 09:28)</a>:</h4>
<p>They are only isomorphic.</p>



<a name="249503745"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/manifolds%20without%20corners/near/249503745" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/manifolds.20without.20corners.html#249503745">(Aug 15 2021 at 09:52)</a>:</h4>
<p>I'm probably getting only a fraction of the picture here; but it sounds like the typeclass being hypothesized here has a field like <code>(chart_type : Type u)</code> meaning that typeclass diamonds end up needing to show equality of types. That problem goes away if you change <code>chart_type</code> to an <code>out_param</code>, although I'm sure that introduces a different sort of issue.</p>



<a name="249503772"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/manifolds%20without%20corners/near/249503772" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/manifolds.20without.20corners.html#249503772">(Aug 15 2021 at 09:53)</a>:</h4>
<p>My example is not this one. And in this example, they are propositionally equal, but not defeq. Let me state it again.</p>
<p>Say that a manifold structure on a space  <code>M</code> with model <code>E</code> (a real vector space) is a bunch of charts on open subsets of <code>M</code>, with target open subsets of <code>E</code>. The first instance of a manifold structure is on <code>E</code> itself, with one single chart equal to the identity.</p>



<a name="249503833"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/manifolds%20without%20corners/near/249503833" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/manifolds.20without.20corners.html#249503833">(Aug 15 2021 at 09:54)</a>:</h4>
<p>If <code>M</code> is a manifold modelled on <code>E</code>, and <code>N</code> is a manifold modelled on <code>F</code>, then you can define a manifold structure on <code>M x N</code>, with model <code>E x F</code>, by taking the direct products of all charts on <code>M</code> and on <code>N</code>.</p>



<a name="249503903"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/manifolds%20without%20corners/near/249503903" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/manifolds.20without.20corners.html#249503903">(Aug 15 2021 at 09:56)</a>:</h4>
<p>Then, on <code>E x F</code>, you get two manifold structures with target space <code>E x F</code>. The first one comes from the fact that <code>E x F</code> is a vector space, so it has a single chart, equal to the identity. The second one comes from the product structure. It has a single chart, which is the product of the single charts on <code>E</code> and on <code>F</code>, i.e., the direct product of the identities. It is propositionally the identity (so the two manifold structures are the same) but not definitionally.</p>



<a name="249503974"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/manifolds%20without%20corners/near/249503974" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/manifolds.20without.20corners.html#249503974">(Aug 15 2021 at 09:58)</a>:</h4>
<p>The way this is solved currently in the library is by saying that the model space for a product of manifolds is not <code>E x F</code>, but a type synonym called <code>model_prod E F</code>. This means that <code>E x F</code> has a manifold structure with model space <code>E x F</code> (coming from the fact that it is a vector space), and another one coming from the fact that it is a product (with model space <code>model_prod E F</code>).</p>
<p>By the way, this example shows that the model space can not be an out_param, because we get a natural example with two different model spaces.</p>



<a name="249504593"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/manifolds%20without%20corners/near/249504593" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/manifolds.20without.20corners.html#249504593">(Aug 15 2021 at 10:13)</a>:</h4>
<p>Does lean actually require that out_params have a unique solution?</p>



<a name="249504659"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/manifolds%20without%20corners/near/249504659" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/manifolds.20without.20corners.html#249504659">(Aug 15 2021 at 10:15)</a>:</h4>
<p>(I think my confusion arises from now knowing what lean type "the identity" and "the direct product of identities" have in your example)</p>



<a name="249504723"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/manifolds%20without%20corners/near/249504723" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/manifolds.20without.20corners.html#249504723">(Aug 15 2021 at 10:16)</a>:</h4>
<p>(is the problem just that <code>prod.map id id = id</code> is not true definitionally?)</p>



<a name="249504736"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/manifolds%20without%20corners/near/249504736" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/manifolds.20without.20corners.html#249504736">(Aug 15 2021 at 10:17)</a>:</h4>
<p>Yes</p>



<a name="264244289"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/manifolds%20without%20corners/near/264244289" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/manifolds.20without.20corners.html#264244289">(Dec 09 2021 at 01:10)</a>:</h4>
<p>Sorry if I never answered to this post: I was already on holiday and then I forgot. Just to clarify, when we underlined some difficulties with manifolds with corners it was more meant to say that for a mathematician who never used Lean before there will be some new formalism to digest that they might not be used to. As for whether or not the current is a good implementation I actually think the current implementation is great and that we do really need manifold with corners: since for sure one wants manifold with boundary let them have corners since the beginning (the product of two manifolds with boundary is not a manifold with boundary and to me this is a good reason to want corners in the picture).</p>
<p>However I have a remark I want to share here about manifolds without boundary: the current implementation is done with the property <code>model_with_corners.boundaryless</code> for which, however, there is no API yet. I think another possible implementation could be to define them separately from manifold with corners and then register an instance of them as manifolds with corners, so to have that the theorems for the latter are automatically valid for manifold without boundary. In the project I just undertook I realized that when you need to use properties of manifolds without boundary (namely that charts are local diffeos on the vector spaces) the corners setting adds extra complication that can be avoided. I have the following impression: in the case of the current implementation one has to write a new API for boundaryless manifolds by rewriting <code>ext_charts</code> as local homeos instead of local equivs and restate only the lemmas for them (I guess for sure one would want to have them recognized as local homeos to take advantage of the great local homeo library). In my implementation one has the extra effort of having to restate all lemmas for manifolds but all the proofs can be recovered from the current ones and I have the impression that being able to avoid the extra complicacy of corners in lemmas that need boundaryless manifolds still wins over this extra effort. Is there anything else I am not considering for which my proposed implementation of boundaryless manifolds could be problematic?</p>



<a name="264278275"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/manifolds%20without%20corners/near/264278275" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/manifolds.20without.20corners.html#264278275">(Dec 09 2021 at 09:58)</a>:</h4>
<p>I don't know for sure what the best implementation of manifolds without boundary is -- only experimenting can tell us. What I know, though, is that I want only one construction of the tangent bundle, and one notion of differentiability. This means that whatever the definition of boundaryless manifold you use, the definition of the derivative in charts will have to go through <code>ext_chart</code>, and the very notion of derivative will need to mention some model with corner <code>I</code>. It would probably make sense to provide an API to hide this a little bit, and then the details of the implementation should not matter.</p>



<a name="264288823"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/manifolds%20without%20corners/near/264288823" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Nicolò Cavalleri <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/manifolds.20without.20corners.html#264288823">(Dec 09 2021 at 11:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110050">Sebastien Gouezel</span> <a href="#narrow/stream/116395-maths/topic/manifolds.20without.20corners/near/264278275">said</a>:</p>
<blockquote>
<p>I don't know for sure what the best implementation of manifolds without boundary is -- only experimenting can tell us. What I know, though, is that I want only one construction of the tangent bundle, and one notion of differentiability. This means that whatever the definition of boundaryless manifold you use, the definition of the derivative in charts will have to go through <code>ext_chart</code>, and the very notion of derivative will need to mention some model with corner <code>I</code>. It would probably make sense to provide an API to hide this a little bit, and then the details of the implementation should not matter.</p>
</blockquote>
<p>Yes sure I 100% agree on this although my idea would not require rewriting any definition right? As for <code>ext_chart</code> one would want to rewrite a version for boundaryless manifolds that local homeos and that a posteriori one proves to be equal to ext_charts as functions. The point here is that I realize that in the proof where the boundaryless property is necessary, it is probably because you want very badly that <code>ext_chart_at</code>be recognized as a local homeo and hence you'd need to rewrite it anyways (you can do something like <code>ext_chart_at.to_local_homeo</code> which is what you'd do in my case as well)</p>



<a name="264292023"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/manifolds%20without%20corners/near/264292023" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Sebastien Gouezel <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/manifolds.20without.20corners.html#264292023">(Dec 09 2021 at 12:16)</a>:</h4>
<p>Defining something like</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">ext_chart_at_lh</span> <span class="o">[</span><span class="bp">...</span><span class="o">]</span> <span class="o">[</span><span class="n">I.boundaryless</span><span class="o">]</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">M</span><span class="o">)</span> <span class="o">:</span> <span class="n">local_homeomorph</span> <span class="n">M</span> <span class="n">E</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">continuous_to_fun</span> <span class="o">:=</span> <span class="gr">sorry</span><span class="o">,</span>

  <span class="bp">..</span> <span class="n">ext_chart_at</span> <span class="n">I</span> <span class="n">x</span> <span class="o">}</span>
</code></pre></div>
<p>definitely sounds like a good idea (where <code>lh</code> stands for <code>local homeo</code>).</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>