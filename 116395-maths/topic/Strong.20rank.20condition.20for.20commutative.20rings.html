---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/Strong.20rank.20condition.20for.20commutative.20rings.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Strong.20rank.20condition.20for.20commutative.20rings.html">Strong rank condition for commutative rings</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="252617662"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Strong%20rank%20condition%20for%20commutative%20rings/near/252617662" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Strong.20rank.20condition.20for.20commutative.20rings.html#252617662">(Sep 09 2021 at 12:37)</a>:</h4>
<p>Is anyone (especially <span class="user-mention" data-user-id="110087">@Scott Morrison</span> ) working on the strong rank condition for commutative rings? I would like to do it, <a href="https://mathoverflow.net/a/47846/7845">this proof</a> seems pretty Leanable.</p>



<a name="252618895"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Strong%20rank%20condition%20for%20commutative%20rings/near/252618895" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Strong.20rank.20condition.20for.20commutative.20rings.html#252618895">(Sep 09 2021 at 12:47)</a>:</h4>
<p>I am insulted that you're not formalising my proof ;-)</p>



<a name="252619088"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Strong%20rank%20condition%20for%20commutative%20rings/near/252619088" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Strong.20rank.20condition.20for.20commutative.20rings.html#252619088">(Sep 09 2021 at 12:48)</a>:</h4>
<p>You should first of all write the relevant API <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span></p>



<a name="252620248"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Strong%20rank%20condition%20for%20commutative%20rings/near/252620248" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Strong.20rank.20condition.20for.20commutative.20rings.html#252620248">(Sep 09 2021 at 12:56)</a>:</h4>
<p>PS it is good that you are maintaining the truth of my claim that every few years this question re-appears in my life.</p>



<a name="252701172"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Strong%20rank%20condition%20for%20commutative%20rings/near/252701172" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Strong.20rank.20condition.20for.20commutative.20rings.html#252701172">(Sep 09 2021 at 21:45)</a>:</h4>
<p>I didn't do it, and am not currently working on it.</p>



<a name="252701288"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Strong%20rank%20condition%20for%20commutative%20rings/near/252701288" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Strong.20rank.20condition.20for.20commutative.20rings.html#252701288">(Sep 09 2021 at 21:46)</a>:</h4>
<p>However I did already prove that all noetherian rings satisfy the SRC, whether they are commutative or not.</p>



<a name="252701409"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Strong%20rank%20condition%20for%20commutative%20rings/near/252701409" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Strong.20rank.20condition.20for.20commutative.20rings.html#252701409">(Sep 09 2021 at 21:47)</a>:</h4>
<p><a href="https://mathoverflow.net/a/2574">https://mathoverflow.net/a/2574</a> gives a fairly cheap proof that you can get from this fact to the SRC for any commutative ring.</p>
<p>It just uses the Hilbert basis theorem.</p>



<a name="252701516"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Strong%20rank%20condition%20for%20commutative%20rings/near/252701516" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Strong.20rank.20condition.20for.20commutative.20rings.html#252701516">(Sep 09 2021 at 21:48)</a>:</h4>
<p>I suspect this may be the path of least resistance from the current state of mathlib.</p>



<a name="252702476"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Strong%20rank%20condition%20for%20commutative%20rings/near/252702476" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Strong.20rank.20condition.20for.20commutative.20rings.html#252702476">(Sep 09 2021 at 21:57)</a>:</h4>
<p>You don't need to use any API to translate to systems of linear equations. Step 2 of the linked mathoverflow answer can be compiled down to:</p>
<p>Let M be a linear map A^n to A^m. Let B be the subring of A generated by the matrix components of M. This is noetherian, being a quotient of the polynomial ring \int[M_ij]. Let M' be the linear map from B^n to B^m, whose matrix components are identical to M. </p>
<p>Claim: if M is injective, so is M'.</p>
<p>Then n \le m follows from the SRC for B, already established.</p>



<a name="252702692"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Strong%20rank%20condition%20for%20commutative%20rings/near/252702692" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Strong.20rank.20condition.20for.20commutative.20rings.html#252702692">(Sep 09 2021 at 21:59)</a>:</h4>
<p>The claim follows trivially from the commuting square with vertical maps the inclusions B^i to A^i, sand horizontal maps M and M'.</p>



<a name="252702765"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Strong%20rank%20condition%20for%20commutative%20rings/near/252702765" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Strong.20rank.20condition.20for.20commutative.20rings.html#252702765">(Sep 09 2021 at 22:00)</a>:</h4>
<p>I was thinking of using <a href="https://mathoverflow.net/a/47846/7845">https://mathoverflow.net/a/47846/7845</a>, it seems very Leanable (we have Cayley-Hamilton in full generality).</p>



<a name="252702991"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Strong%20rank%20condition%20for%20commutative%20rings/near/252702991" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Strong.20rank.20condition.20for.20commutative.20rings.html#252702991">(Sep 09 2021 at 22:01)</a>:</h4>
<p>Alternatively, we should take this as an opportunity to develop exterior algebras properly, because that proof is the best proof. :-)</p>



<a name="252703164"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Strong%20rank%20condition%20for%20commutative%20rings/near/252703164" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Strong.20rank.20condition.20for.20commutative.20rings.html#252703164">(Sep 09 2021 at 22:03)</a>:</h4>
<p>(looks sadly at Amelia's MSc <code>koszul_cx</code> branch which she never PR'ed...)</p>



<a name="252703395"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Strong%20rank%20condition%20for%20commutative%20rings/near/252703395" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Strong.20rank.20condition.20for.20commutative.20rings.html#252703395">(Sep 09 2021 at 22:05)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/blob/0d723cf1f12ac7eb57cab4f6a786a6bd5316ad5f/src/m4r/exterior_power.lean#L15">https://github.com/leanprover-community/mathlib/blob/0d723cf1f12ac7eb57cab4f6a786a6bd5316ad5f/src/m4r/exterior_power.lean#L15</a></p>



<a name="252703918"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Strong%20rank%20condition%20for%20commutative%20rings/near/252703918" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Strong.20rank.20condition.20for.20commutative.20rings.html#252703918">(Sep 09 2021 at 22:10)</a>:</h4>
<p>I do like the CH proof. Happily it factors into separate pieces: prove first that the minimal polynomial of any injective endomorphism has nonzero constant term.</p>



<a name="254062995"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Strong%20rank%20condition%20for%20commutative%20rings/near/254062995" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Strong.20rank.20condition.20for.20commutative.20rings.html#254062995">(Sep 20 2021 at 14:55)</a>:</h4>
<p>I have a short proof of the strong rank condition for commutative rings (you need <a href="https://github.com/leanprover-community/mathlib/issues/9128">#9128</a> and <a href="https://github.com/leanprover-community/mathlib/issues/9280">#9280</a> to play with it):</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">linear_algebra.charpoly</span>
<span class="kn">import</span> <span class="n">linear_algebra.invariant_basis_number</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">nontrivial</span> <span class="n">R</span><span class="o">]</span>

<span class="kn">open</span> <span class="n">polynomial</span> <span class="n">function</span> <span class="n">fin</span> <span class="n">nat</span> <span class="n">linear_map</span>

<span class="kd">lemma</span> <span class="n">comm_ring_strong_rank_condition</span> <span class="o">:</span> <span class="n">strong_rank_condition</span> <span class="n">R</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">apply</span> <span class="o">(</span><span class="n">strong_rank_condition_iff_succ</span> <span class="n">R</span><span class="o">)</span><span class="bp">.</span><span class="mi">2</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">n</span> <span class="n">f</span> <span class="n">hf</span><span class="o">,</span> <span class="n">_</span><span class="o">),</span>

<span class="c1">--(A generalization of) This should be a global instance</span>
  <span class="n">letI</span> <span class="o">:=</span> <span class="n">module.finite.of_basis</span> <span class="o">(</span><span class="n">pi.basis_fun</span> <span class="n">R</span> <span class="o">(</span><span class="n">fin</span> <span class="o">(</span><span class="n">n</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">))),</span>

  <span class="k">let</span> <span class="n">g</span> <span class="o">:=</span> <span class="o">(</span><span class="n">extend_by_zero.linear_map</span> <span class="n">R</span> <span class="n">cast_succ</span><span class="o">)</span><span class="bp">.</span><span class="n">comp</span> <span class="n">f</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">hg</span> <span class="o">:</span> <span class="n">injective</span> <span class="n">g</span> <span class="o">:=</span>
    <span class="o">(</span><span class="n">extend_injective</span> <span class="o">(</span><span class="n">rel_embedding.injective</span> <span class="n">cast_succ</span><span class="o">)</span> <span class="mi">0</span><span class="o">)</span><span class="bp">.</span><span class="n">comp</span> <span class="n">hf</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">hnex</span> <span class="o">:</span> <span class="bp">¬∃</span> <span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">n</span><span class="o">,</span> <span class="n">fin.cast_succ</span> <span class="n">i</span> <span class="bp">=</span> <span class="n">fin.last</span> <span class="n">n</span> <span class="o">:=</span>
    <span class="bp">λ</span> <span class="o">⟨</span><span class="n">i</span><span class="o">,</span> <span class="n">hi</span><span class="o">⟩,</span> <span class="n">ne_of_lt</span> <span class="o">(</span><span class="n">fin.cast_succ_lt_last</span> <span class="n">i</span><span class="o">)</span> <span class="n">hi</span><span class="o">,</span>
  <span class="k">let</span> <span class="n">heval</span> <span class="o">:=</span> <span class="n">minpoly.aeval</span> <span class="n">R</span> <span class="n">g</span><span class="o">,</span>
  <span class="n">obtain</span> <span class="o">⟨</span><span class="n">P</span><span class="o">,</span> <span class="n">hP</span><span class="o">⟩</span> <span class="o">:=</span> <span class="n">X_dvd_iff.2</span> <span class="o">(</span><span class="n">erase_same</span> <span class="o">(</span><span class="n">minpoly</span> <span class="n">R</span> <span class="n">g</span><span class="o">)</span> <span class="mi">0</span><span class="o">),</span>
  <span class="n">rw</span> <span class="o">[</span><span class="bp">←</span> <span class="n">monomial_add_erase</span> <span class="o">(</span><span class="n">minpoly</span> <span class="n">R</span> <span class="n">g</span><span class="o">)</span> <span class="mi">0</span><span class="o">,</span> <span class="n">hP</span><span class="o">,</span> <span class="n">linear_map.ext_iff</span><span class="o">]</span> <span class="n">at</span> <span class="n">heval</span><span class="o">,</span>
  <span class="n">replace</span> <span class="n">heval</span> <span class="o">:=</span> <span class="n">congr_fun</span> <span class="o">(</span><span class="n">heval</span> <span class="o">(</span><span class="n">pi.single</span> <span class="o">(</span><span class="n">fin.last</span> <span class="n">n</span><span class="o">)</span> <span class="mi">1</span><span class="o">))</span> <span class="o">(</span><span class="n">fin.last</span> <span class="n">n</span><span class="o">),</span>
  <span class="n">simpa</span> <span class="o">[</span><span class="n">hnex</span><span class="o">,</span> <span class="n">charpoly_coeff_zero_of_injective</span> <span class="n">hg</span><span class="o">]</span> <span class="n">using</span> <span class="n">heval</span>
<span class="kd">end</span>
</code></pre></div>
<p>I am going to PR it soon.</p>



<a name="254114034"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Strong%20rank%20condition%20for%20commutative%20rings/near/254114034" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Strong.20rank.20condition.20for.20commutative.20rings.html#254114034">(Sep 20 2021 at 20:36)</a>:</h4>
<p>Want to intersperse a human-readable proof as comments? :-)</p>



<a name="254118766"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Strong%20rank%20condition%20for%20commutative%20rings/near/254118766" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Strong.20rank.20condition.20for.20commutative.20rings.html#254118766">(Sep 20 2021 at 21:10)</a>:</h4>
<p>It's the proof in <a href="https://mathoverflow.net/a/47846/7845">https://mathoverflow.net/a/47846/7845</a></p>



<a name="254119208"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Strong%20rank%20condition%20for%20commutative%20rings/near/254119208" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Strong.20rank.20condition.20for.20commutative.20rings.html#254119208">(Sep 20 2021 at 21:13)</a>:</h4>
<p>At very least add that link. But line-by-line comments are even better! Perhaps this is a conversation for another thread, but I think we should aspire to a mathlib-wide expectation that non-trivial proofs have human readable accounts either in the doc-string or as interspersed comments. (I'm not claiming I attain this standard: but I'd be happy to have community pressure to do so. :-)</p>



<a name="254119749"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Strong%20rank%20condition%20for%20commutative%20rings/near/254119749" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Strong.20rank.20condition.20for.20commutative.20rings.html#254119749">(Sep 20 2021 at 21:16)</a>:</h4>
<p>I tried doing it here. What do you think? Should this interspersed instead? <a href="https://github.com/leanprover-community/mathlib/pull/8112/files#diff-4c34222b20f057aded6aed74074908860a3035426480c5905e894918f61bc8da">https://github.com/leanprover-community/mathlib/pull/8112/files#diff-4c34222b20f057aded6aed74074908860a3035426480c5905e894918f61bc8da</a></p>



<a name="254119897"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Strong%20rank%20condition%20for%20commutative%20rings/near/254119897" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Strong.20rank.20condition.20for.20commutative.20rings.html#254119897">(Sep 20 2021 at 21:17)</a>:</h4>
<p>I think a docstring per Lean definition is usually best.</p>



<a name="254119983"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Strong%20rank%20condition%20for%20commutative%20rings/near/254119983" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Strong.20rank.20condition.20for.20commutative.20rings.html#254119983">(Sep 20 2021 at 21:18)</a>:</h4>
<p>Or a top-level comment describing the overall proof if it is split up into top-level definitions.</p>



<a name="254119996"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Strong%20rank%20condition%20for%20commutative%20rings/near/254119996" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Strong.20rank.20condition.20for.20commutative.20rings.html#254119996">(Sep 20 2021 at 21:18)</a>:</h4>
<p>It doesn't have to be a docstring, really.</p>



<a name="254120122"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Strong%20rank%20condition%20for%20commutative%20rings/near/254120122" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Strong.20rank.20condition.20for.20commutative.20rings.html#254120122">(Sep 20 2021 at 21:19)</a>:</h4>
<p>In your PR, if you move those two numbered lists of proof steps to before the corresponding <code>lemma</code>s, then I think it's perfect</p>



<a name="254120251"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Strong%20rank%20condition%20for%20commutative%20rings/near/254120251" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Strong.20rank.20condition.20for.20commutative.20rings.html#254120251">(Sep 20 2021 at 21:20)</a>:</h4>
<p>Okay <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span><br>
Personally I kind of like the idea of leaving uncluttered the list of declarations. But in that case that list is very short anyway.</p>



<a name="254120362"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Strong%20rank%20condition%20for%20commutative%20rings/near/254120362" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Strong.20rank.20condition.20for.20commutative.20rings.html#254120362">(Sep 20 2021 at 21:21)</a>:</h4>
<p>Do you mean in the generated documentation?</p>



<a name="254120447"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Strong%20rank%20condition%20for%20commutative%20rings/near/254120447" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Strong.20rank.20condition.20for.20commutative.20rings.html#254120447">(Sep 20 2021 at 21:21)</a>:</h4>
<p>Yes</p>



<a name="254120504"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Strong%20rank%20condition%20for%20commutative%20rings/near/254120504" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Strong.20rank.20condition.20for.20commutative.20rings.html#254120504">(Sep 20 2021 at 21:22)</a>:</h4>
<p>I think there's no need to make the proofs into docstrings. When do you need to see the human proof, really? Presumably it's exactly when you are trying to decipher the Lean proof. In that case, it should go adjacent to the proof but not in a docstring.</p>



<a name="254120588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Strong%20rank%20condition%20for%20commutative%20rings/near/254120588" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Strong.20rank.20condition.20for.20commutative.20rings.html#254120588">(Sep 20 2021 at 21:22)</a>:</h4>
<p>Okay there's definitely room for discussion <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="254120755"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Strong%20rank%20condition%20for%20commutative%20rings/near/254120755" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Strong.20rank.20condition.20for.20commutative.20rings.html#254120755">(Sep 20 2021 at 21:24)</a>:</h4>
<p>I agree with Reid.</p>



<a name="254122749"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Strong%20rank%20condition%20for%20commutative%20rings/near/254122749" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Strong.20rank.20condition.20for.20commutative.20rings.html#254122749">(Sep 20 2021 at 21:39)</a>:</h4>
<p>It probably makes sense to reference the mathoverflow proof in the docstring if it explains an unexpected choice of assumptions, but I agree the docstring is not the place for walking through the proof.</p>



<a name="254123657"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Strong%20rank%20condition%20for%20commutative%20rings/near/254123657" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Strong.20rank.20condition.20for.20commutative.20rings.html#254123657">(Sep 20 2021 at 21:47)</a>:</h4>
<p>As for line-by-line or not, it depends on the proof, but on balance, I think it's easier to understand the human proof if it can be summarized in a few lines up front like in <span class="user-mention" data-user-id="387244">@Yaël Dillies</span>'s PR, rather than interspersed with the Lean proof. Not a strong preference though.</p>



<a name="254123794"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Strong%20rank%20condition%20for%20commutative%20rings/near/254123794" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Strong.20rank.20condition.20for.20commutative.20rings.html#254123794">(Sep 20 2021 at 21:48)</a>:</h4>
<p>Maybe it's because I usually don't use a big monitor.</p>



<a name="254123874"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Strong%20rank%20condition%20for%20commutative%20rings/near/254123874" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Strong.20rank.20condition.20for.20commutative.20rings.html#254123874">(Sep 20 2021 at 21:49)</a>:</h4>
<p>If sentences of the human proof are getting split up across lines of the Lean proof, it's too fine-grained. If there are 15 lines of human proof above 100 lines of Lean proof, it's too coarse-grained.</p>



<a name="254146070"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Strong%20rank%20condition%20for%20commutative%20rings/near/254146070" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Strong.20rank.20condition.20for.20commutative.20rings.html#254146070">(Sep 21 2021 at 02:12)</a>:</h4>
<p>I agree splitting sentences across proof lines is bad. I've done this in the past and looking back on them they are not so helpful.</p>



<a name="254149747"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Strong%20rank%20condition%20for%20commutative%20rings/near/254149747" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Strong.20rank.20condition.20for.20commutative.20rings.html#254149747">(Sep 21 2021 at 03:10)</a>:</h4>
<p>Upon further reflection, my revised opinion on the line-by-line aspect is that comments with the human proof are good and whatever style the author of the code prefers is fine. I don't think it's the sort of thing where a policy or standard format is necessary.</p>



<a name="254152861"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Strong%20rank%20condition%20for%20commutative%20rings/near/254152861" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Strong.20rank.20condition.20for.20commutative.20rings.html#254152861">(Sep 21 2021 at 04:06)</a>:</h4>
<p>The policy "more words" is probably worthwhile. :-)</p>



<a name="254176189"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Strong%20rank%20condition%20for%20commutative%20rings/near/254176189" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Strong.20rank.20condition.20for.20commutative.20rings.html#254176189">(Sep 21 2021 at 09:09)</a>:</h4>
<p>Sorry for the late answer.</p>
<p>I will surely add the link to the mathoverflow answer and some explanation about the proof (it's really simple, but in my opinion it is almost original math, I have no idea if the author found it by himself or it is a known proof, but it was good enough to get the "populist" badge on mathoverflow, that is quite rare).</p>
<p>I will open a WIP PR since I need to modify/split some files: to prove the strong rank condition I need the characteristic polynomial of an endomorphism, but to prove that the characteristic polynomial does not depend on the choice of the base I need (at least, in the proof I have) the two basis have the same cardinalities (the invariant basis number property, that follows from strong rank condition). There are no logical problems, since the strong rank condition can be proved without knowing that the polynomial is independent of the choice of the basis, but I have to think about how to write this in mathlib.</p>



<a name="255044672"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Strong%20rank%20condition%20for%20commutative%20rings/near/255044672" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Strong.20rank.20condition.20for.20commutative.20rings.html#255044672">(Sep 27 2021 at 13:09)</a>:</h4>
<p>Does anyone have a suggestion for a good place for <code>comm_ring_strong_rank_condition</code>?</p>
<p>The natural file is of course <code>linear_algebra.invariant_basis_number</code>, but to prove the result I use the characteristic polynomial in <code>linear_algebra.charpoly</code>, that imports <code>linear_algebra.invariant_basis_number</code> (currently through <code>linear_algebra.free_module</code>, <code>linear_algebra.matrix.to_lin</code>, <code>linear_algebra.matrix.finite_dimensional</code>, <code>linear_algebra.finite_dimensional</code>, <code>field_theory.finiteness</code>, <code>linear_algebra.dimension</code>, <code>linear_algebra.invariant_basis_number</code>). I don't see any way of avoiding <code>linear_algebra.matrix.to_lin</code>, so this cannot be solved just by splitting <code>linear_algebra.free_module</code> (this is anyway a sensible thing to do, as in <a href="https://github.com/leanprover-community/mathlib/issues/9407">#9407</a>).</p>



<a name="255045404"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Strong%20rank%20condition%20for%20commutative%20rings/near/255045404" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Anne Baanen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Strong.20rank.20condition.20for.20commutative.20rings.html#255045404">(Sep 27 2021 at 13:14)</a>:</h4>
<p>If there's no obvious place to put it while preserving the imports, making a new file isn't too bad.</p>



<a name="255759737"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Strong%20rank%20condition%20for%20commutative%20rings/near/255759737" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Strong.20rank.20condition.20for.20commutative.20rings.html#255759737">(Oct 01 2021 at 15:15)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/issues/9486">#9486</a></p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>