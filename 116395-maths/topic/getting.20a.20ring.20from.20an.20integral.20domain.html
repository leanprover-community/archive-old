---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html">getting a ring from an integral domain</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="216620073"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216620073" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216620073">(Nov 13 2020 at 14:43)</a>:</h4>
<p>If I understand correctly the definition</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">@[protect_proj, ancestor comm_ring domain]</span>
<span class="kd">class</span> <span class="n">integral_domain</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="kd">extends</span> <span class="n">comm_ring</span> <span class="n">α</span><span class="o">,</span> <span class="n">domain</span> <span class="n">α</span>
</code></pre></div>
<p>of an integral domain, it is something which extends both <code>commutative rings</code> and <code>domains</code>. These two classes both extend <code>rings</code>.</p>
<p>As far as I understand, constructing an "extension"  automatically produces maps from <code>comm_ring</code> to <code>ring</code> and from <code>domain</code> to <code>ring</code> allowing to look at a <code>comm_ring</code> (resp. at a <code>domain</code>) as being a <code>ring</code>. Hence there are a priori two maps taking an <code>integral_domain</code> and producing a <code>ring</code>, according to which path one chooses between <code>integral_domain -&gt; domain -&gt; ring</code> and <code>integral_domain -&gt; comm_ring -&gt; ring</code>. Is it clear that the two results coincide?</p>
<p>I am asking because I had a nice proof working for commutative rings, and tried to add the assumption <code>hR : integral_domain R</code> in order to strengthen the result. Now the proof does not compile anymore, giving a bunch of coercion issues, like</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">invalid</span> <span class="n">type</span> <span class="n">ascription</span><span class="o">,</span> <span class="n">term</span> <span class="n">has</span> <span class="n">type</span>
  <span class="bp">@</span><span class="n">has_mem.mem</span> <span class="n">R</span> <span class="o">(</span><span class="bp">@</span><span class="n">ideal</span> <span class="n">R</span> <span class="n">_inst_1</span><span class="o">)</span>
    <span class="o">(</span><span class="bp">@</span><span class="n">submodule.has_mem</span> <span class="n">R</span> <span class="n">R</span> <span class="o">(</span><span class="bp">@</span><span class="n">ring.to_semiring</span> <span class="n">R</span> <span class="o">(</span><span class="bp">@</span><span class="n">comm_ring.to_ring</span> <span class="n">R</span> <span class="n">_inst_1</span><span class="o">))</span>
       <span class="o">(</span><span class="bp">@</span><span class="n">add_comm_group.to_add_comm_monoid</span> <span class="n">R</span> <span class="o">(</span><span class="bp">@</span><span class="n">ring.to_add_comm_group</span> <span class="n">R</span> <span class="o">(</span><span class="bp">@</span><span class="n">comm_ring.to_ring</span> <span class="n">R</span> <span class="n">_inst_1</span><span class="o">)))</span>
       <span class="o">(</span><span class="bp">@</span><span class="n">semiring.to_semimodule</span> <span class="n">R</span> <span class="o">(</span><span class="bp">@</span><span class="n">ring.to_semiring</span> <span class="n">R</span> <span class="o">(</span><span class="bp">@</span><span class="n">comm_ring.to_ring</span> <span class="n">R</span> <span class="n">_inst_1</span><span class="o">))))</span>
    <span class="o">(</span><span class="bp">@</span><span class="n">has_mul.mul</span> <span class="n">R</span> <span class="o">(</span><span class="bp">@</span><span class="n">distrib.to_has_mul</span> <span class="n">R</span> <span class="o">(</span><span class="bp">@</span><span class="n">ring.to_distrib</span> <span class="n">R</span> <span class="o">(</span><span class="bp">@</span><span class="n">comm_ring.to_ring</span> <span class="n">R</span> <span class="n">_inst_1</span><span class="o">)))</span> <span class="n">x</span> <span class="n">y</span><span class="o">)</span>
    <span class="n">M</span>
<span class="n">but</span> <span class="n">is</span> <span class="n">expected</span> <span class="n">to</span> <span class="k">have</span> <span class="n">type</span>
  <span class="bp">@</span><span class="n">has_mem.mem</span> <span class="n">R</span> <span class="o">(</span><span class="bp">@</span><span class="n">ideal</span> <span class="n">R</span> <span class="n">_inst_1</span><span class="o">)</span>
    <span class="o">(</span><span class="bp">@</span><span class="n">submodule.has_mem</span> <span class="n">R</span> <span class="n">R</span> <span class="o">(</span><span class="bp">@</span><span class="n">ring.to_semiring</span> <span class="n">R</span> <span class="o">(</span><span class="bp">@</span><span class="n">comm_ring.to_ring</span> <span class="n">R</span> <span class="n">_inst_1</span><span class="o">))</span>
       <span class="o">(</span><span class="bp">@</span><span class="n">add_comm_group.to_add_comm_monoid</span> <span class="n">R</span> <span class="o">(</span><span class="bp">@</span><span class="n">ring.to_add_comm_group</span> <span class="n">R</span> <span class="o">(</span><span class="bp">@</span><span class="n">comm_ring.to_ring</span> <span class="n">R</span> <span class="n">_inst_1</span><span class="o">)))</span>
       <span class="o">(</span><span class="bp">@</span><span class="n">semiring.to_semimodule</span> <span class="n">R</span> <span class="o">(</span><span class="bp">@</span><span class="n">ring.to_semiring</span> <span class="n">R</span> <span class="o">(</span><span class="bp">@</span><span class="n">comm_ring.to_ring</span> <span class="n">R</span> <span class="n">_inst_1</span><span class="o">))))</span>
    <span class="o">(</span><span class="bp">@</span><span class="n">has_mul.mul</span> <span class="n">R</span> <span class="o">(</span><span class="bp">@</span><span class="n">distrib.to_has_mul</span> <span class="n">R</span> <span class="o">(</span><span class="bp">@</span><span class="n">ring.to_distrib</span> <span class="n">R</span> <span class="o">(</span><span class="bp">@</span><span class="n">domain.to_ring</span> <span class="n">R</span> <span class="o">(</span><span class="bp">@</span><span class="n">integral_domain.to_domain</span> <span class="n">R</span> <span class="n">hR</span><span class="o">))))</span> <span class="n">x</span>
       <span class="n">y</span><span class="o">)</span>
    <span class="n">M</span>
</code></pre></div>
<p>(the last lines are different: one is </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">@</span><span class="n">distrib.to_has_mul</span> <span class="n">R</span> <span class="o">(</span><span class="bp">@</span><span class="n">ring.to_distrib</span> <span class="n">R</span> <span class="o">(</span><span class="bp">@</span><span class="n">comm_ring.to_ring</span> <span class="n">R</span> <span class="n">_inst_1</span><span class="o">)))</span>
</code></pre></div>
<p>and the other is</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">@</span><span class="n">distrib.to_has_mul</span> <span class="n">R</span> <span class="o">(</span><span class="bp">@</span><span class="n">ring.to_distrib</span> <span class="n">R</span> <span class="o">(</span><span class="bp">@</span><span class="n">domain.to_ring</span> <span class="n">R</span> <span class="o">(</span><span class="bp">@</span><span class="n">integral_domain.to_domain</span> <span class="n">R</span> <span class="n">hR</span><span class="o">)))</span>
</code></pre></div>



<a name="216621468"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216621468" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216621468">(Nov 13 2020 at 14:52)</a>:</h4>
<p>Could it be that you have two instances of a commutative ring around? One coming from <code>comm_ring</code> and one from <code>integral_domain</code>?</p>



<a name="216621622"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216621622" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216621622">(Nov 13 2020 at 14:53)</a>:</h4>
<p>Namely, having both <code>[comm_ring A]</code> and <code>[integral_domain A]</code> would cause issues</p>



<a name="216621635"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216621635" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216621635">(Nov 13 2020 at 14:53)</a>:</h4>
<p>Oh yes!</p>



<a name="216621658"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216621658" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216621658">(Nov 13 2020 at 14:53)</a>:</h4>
<p>Thank you so much! I now realize the problem.</p>



<a name="216621691"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216621691" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216621691">(Nov 13 2020 at 14:53)</a>:</h4>
<p>No problem :)</p>



<a name="216621696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216621696" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216621696">(Nov 13 2020 at 14:53)</a>:</h4>
<p>Is there a statement <code>is_integral_domain : ring --&gt; Prop</code>?</p>



<a name="216621799"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216621799" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216621799">(Nov 13 2020 at 14:54)</a>:</h4>
<p>So that I can add <code>hR : is_integral_domain R</code>?</p>



<a name="216621841"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216621841" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216621841">(Nov 13 2020 at 14:54)</a>:</h4>
<p>I'm not sure.</p>



<a name="216621875"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216621875" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216621875">(Nov 13 2020 at 14:54)</a>:</h4>
<p>I wrote <code>hR : integral_domain R</code> and now you make me realize that I have created a second ring called <code>hR</code> to which I asked to be an int. domain...</p>



<a name="216621913"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216621913" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216621913">(Nov 13 2020 at 14:55)</a>:</h4>
<p>Do you really want to say that the integral domain assumption is a separate assumption?</p>



<a name="216622024"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216622024" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216622024">(Nov 13 2020 at 14:55)</a>:</h4>
<p>Well, that was my idea because in the applications I had in mind I would expect someone to prove that a ring was an int. domain and then give the proof to the lemma</p>



<a name="216622094"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216622094" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216622094">(Nov 13 2020 at 14:56)</a>:</h4>
<p>But I can add it in the variables definition.</p>



<a name="216624053"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216624053" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216624053">(Nov 13 2020 at 15:10)</a>:</h4>
<p><span class="user-mention silent" data-user-id="243562">Adam Topaz</span> <a href="#narrow/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain/near/216621913">said</a>:</p>
<blockquote>
<p>Do you really want to say that the integral domain assumption is a separate assumption?</p>
</blockquote>
<p>Thanks, it works and the problem was indeed my stupid syntax. At any rate, is the answer to my original question about "the two paths leading to the same result" <em>yes</em>?</p>



<a name="216624865"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216624865" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216624865">(Nov 13 2020 at 15:17)</a>:</h4>
<p>I think so.</p>



<a name="216624909"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216624909" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216624909">(Nov 13 2020 at 15:17)</a>:</h4>
<p>You can check... (I'll sketch some code)</p>



<a name="216625491"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216625491" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216625491">(Nov 13 2020 at 15:21)</a>:</h4>
<p>Here's a roundabout sanity check <span aria-label="rofl" class="emoji emoji-1f923" role="img" title="rofl">:rofl:</span> </p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra</span>

<span class="kd">variables</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">integral_domain</span> <span class="n">A</span><span class="o">)</span>

<span class="kn">include</span> <span class="n">h</span>

<span class="kd">def</span> <span class="n">foo1</span> <span class="o">:</span> <span class="n">comm_ring</span> <span class="n">A</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">letI</span> <span class="o">:=</span> <span class="n">h</span><span class="bp">;</span> <span class="n">apply_instance</span>
<span class="kd">def</span> <span class="n">foo2</span> <span class="o">:</span> <span class="n">domain</span> <span class="n">A</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">letI</span> <span class="o">:=</span> <span class="n">h</span><span class="bp">;</span> <span class="n">apply_instance</span>

<span class="kd">def</span> <span class="n">foo3</span> <span class="o">:</span> <span class="n">ring</span> <span class="n">A</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">letI</span> <span class="o">:=</span> <span class="n">foo1</span><span class="bp">;</span> <span class="n">apply_instance</span>
<span class="kd">def</span> <span class="n">foo4</span> <span class="o">:</span> <span class="n">ring</span> <span class="n">A</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">letI</span> <span class="o">:=</span> <span class="n">foo2</span><span class="bp">;</span> <span class="n">apply_instance</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">foo3</span> <span class="bp">=</span> <span class="n">foo4</span> <span class="o">:=</span> <span class="n">rfl</span>
</code></pre></div>



<a name="216625641"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216625641" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216625641">(Nov 13 2020 at 15:22)</a>:</h4>
<p>Very nice!</p>



<a name="216626800"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216626800" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216626800">(Nov 13 2020 at 15:31)</a>:</h4>
<p><code>is_integral_domain</code> exists.</p>



<a name="216626858"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216626858" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Filippo A. E. Nuccio <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216626858">(Nov 13 2020 at 15:32)</a>:</h4>
<p>Thanks!</p>



<a name="216640588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216640588" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216640588">(Nov 13 2020 at 17:00)</a>:</h4>
<p>This is somehow a big mess, it trips up a lot of beginners and in some sense I'm not sure we have a good solution for it all yet.</p>



<a name="216644251"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216644251" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216644251">(Nov 13 2020 at 17:27)</a>:</h4>
<p>I really think the <code>[[...]]</code> idea could be a solution to this issue.</p>



<a name="216644499"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216644499" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216644499">(Nov 13 2020 at 17:29)</a>:</h4>
<p>In this case, all Prop's defining the axioms for an integral domain would be individual Prop-valued classes (or mixins?, whatever you want to call it), And the "ring" class could just be the data associated with the ring, e.g.</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">class</span> <span class="n">raw_ring</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">zero</span> <span class="o">:</span> <span class="n">A</span><span class="o">)</span>
<span class="o">(</span><span class="n">one</span> <span class="o">:</span> <span class="n">A</span><span class="o">)</span>
<span class="o">(</span><span class="n">add</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">A</span><span class="o">)</span>
<span class="o">(</span><span class="n">neg</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">A</span><span class="o">)</span>
<span class="o">(</span><span class="n">mul</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">A</span><span class="o">)</span>
</code></pre></div>
<p>And to declare an integral domain you would just write <code>[[integral_domain A]]</code> and lean should automatically add all the data + mixins as assumptions</p>



<a name="216644747"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216644747" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216644747">(Nov 13 2020 at 17:31)</a>:</h4>
<p>And this way we also wouldn't have to worry about whether <code>PID</code> and/or <code>DVR</code> should be a prop-valued class assuming <code>integral_domain</code> or something which extends <code>integral_domain</code>.</p>



<a name="216649188"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216649188" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216649188">(Nov 13 2020 at 18:04)</a>:</h4>
<p>I have no idea what amount of work would be needed to get <code>[[...]]</code> working, but it would be awesome if it works!</p>



<a name="216652402"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216652402" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216652402">(Nov 13 2020 at 18:29)</a>:</h4>
<p>How should lean handle <code>[[foo A]] [[bar A]]</code> if foo requires <code>[monoid_with_zero A]</code> and bar requires <code>[add_monoid A]</code>? It seems it need to be at least aware enough of diamonds (in this case, to <code>has_zero</code>) to reject them</p>



<a name="216652589"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216652589" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216652589">(Nov 13 2020 at 18:31)</a>:</h4>
<p>Or maybe if we use <code>[[]]</code> widely enough all the diamonds vanish</p>



<a name="216653420"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216653420" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bryan Gin-ge Chen <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216653420">(Nov 13 2020 at 18:36)</a>:</h4>
<p>I'm not in any place to make <code>[[]]</code> happen, but if it's something we really want (for Lean 4?), we should write up an issue somewhere (mathlib? community Lean?), since proposals in Zulip are too easily forgotten.</p>



<a name="216653689"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216653689" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216653689">(Nov 13 2020 at 18:38)</a>:</h4>
<p><span class="user-mention" data-user-id="310045">@Eric Wieser</span> You would need a class like <code>[raw_semiring A]</code> for the data of addition, multiplication, zero, and one</p>



<a name="216653808"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216653808" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216653808">(Nov 13 2020 at 18:39)</a>:</h4>
<p>there is an issue for this</p>



<a name="216654043"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216654043" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216654043">(Nov 13 2020 at 18:40)</a>:</h4>
<p><a href="https://github.com/leanprover/lean/issues/1522">leanprover/lean#1522</a></p>



<a name="216654053"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216654053" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216654053">(Nov 13 2020 at 18:40)</a>:</h4>
<p><span class="user-mention" data-user-id="243562">@Adam Topaz</span> Why do we want <code>raw_ring</code>. Can't <code>[[ring A]]</code> just be shorthand for<br>
<code>[has_zero A] .. [has_mul A] [ring_axioms A]</code>?</p>



<a name="216654117"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216654117" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216654117">(Nov 13 2020 at 18:41)</a>:</h4>
<p>Yeah, I guess you're right <span class="user-mention" data-user-id="112680">@Johan Commelin</span></p>



<a name="216654183"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216654183" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Adam Topaz <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216654183">(Nov 13 2020 at 18:41)</a>:</h4>
<p>Except <code>[ring_axioms A]</code> should be <code>[[ring_axioms A]]</code> :)</p>



<a name="216654189"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216654189" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216654189">(Nov 13 2020 at 18:41)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> Coq has this. It leads to some big performance problems</p>



<a name="216654267"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216654267" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216654267">(Nov 13 2020 at 18:42)</a>:</h4>
<p>Why?</p>



<a name="216654322"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216654322" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216654322">(Nov 13 2020 at 18:42)</a>:</h4>
<p>There would always be a direct path to <code>has_add A</code>, which seems a big win to me.</p>



<a name="216654398"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216654398" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216654398">(Nov 13 2020 at 18:43)</a>:</h4>
<p><a href="https://www.ralfj.de/blog/2019/05/15/typeclasses-exponential-blowup.html">https://www.ralfj.de/blog/2019/05/15/typeclasses-exponential-blowup.html</a></p>



<a name="216654404"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216654404" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216654404">(Nov 13 2020 at 18:43)</a>:</h4>
<p>The TC-graph would only be about inferring <code>comm_ring</code> from <code>principal_ideal_domain</code> and things like that. Just a bunch of props</p>



<a name="216654428"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216654428" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216654428">(Nov 13 2020 at 18:43)</a>:</h4>
<p>Right - all the <code>to_has_add</code> parts of typeclass search would vanish</p>



<a name="216654604"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216654604" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216654604">(Nov 13 2020 at 18:44)</a>:</h4>
<p>the problem is that even ignoring the search itself, the <em>result</em> grows exponentially with the depth of the hierarchy</p>



<a name="216655239"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216655239" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216655239">(Nov 13 2020 at 18:48)</a>:</h4>
<p>Hmm, I'll have to read that blog (again)</p>



<a name="216657659"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216657659" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216657659">(Nov 13 2020 at 19:06)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> From that blogpost:</p>
<blockquote>
<p>Taking the superclasses as indices instead of embedding them as fields simplifies typeclass search and is necessary to support diamonds in the hierarchy; see the original paper for more details.</p>
</blockquote>
<p>I propose to only index on data-carrying classes like <code>has_one A</code> and <code>has_add A</code>, but not on Props like <code>is_semigroup A</code> or <code>is_comm_ring A</code>.</p>



<a name="216657728"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216657728" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216657728">(Nov 13 2020 at 19:07)</a>:</h4>
<p>In Lean that doesn't cause diamonds, because of proof irrelevance. And it seems that we won't get exponential blowup either. (Well, we do... but the base would not be as high as with the naive index on everything approach.)</p>



<a name="216657775"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216657775" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216657775">(Nov 13 2020 at 19:07)</a>:</h4>
<p>So <code>is_comm_ring</code> would still extend <code>is_ring</code> and <code>is_comm_monoid</code> as an <code>old_structure</code>.</p>



<a name="216657966"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216657966" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216657966">(Nov 13 2020 at 19:09)</a>:</h4>
<p>I don't think <code>is_comm_ring</code> could extend <code>is_comm_monoid</code> if we explode the classes like this</p>



<a name="216658112"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216658112" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216658112">(Nov 13 2020 at 19:10)</a>:</h4>
<p>Why not?</p>



<a name="216658129"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216658129" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216658129">(Nov 13 2020 at 19:10)</a>:</h4>
<p>it means that a search for <code>is_comm_monoid A &lt;one&gt; &lt;add&gt;</code> would have to also search for <code>is_comm_ring A &lt;one&gt; &lt;add&gt; ?</code></p>



<a name="216658260"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216658260" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216658260">(Nov 13 2020 at 19:11)</a>:</h4>
<p>Well, it would have to also search for <code>has_mul A</code> and <code>has_zero A</code> first. And if it found those, it could search for <code>is_comm_ring A &lt;zero&gt; &lt;one&gt; &lt;add&gt; &lt;mul&gt;</code></p>



<a name="216658347"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216658347" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216658347">(Nov 13 2020 at 19:12)</a>:</h4>
<p>But if it doesn't find <code>has_zero A</code>, then it can forget about search for <code>is_comm_ring</code></p>



<a name="216658387"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216658387" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216658387">(Nov 13 2020 at 19:12)</a>:</h4>
<p>That's similar to what we do now already with some mixins, right?</p>



<a name="216658412"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216658412" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216658412">(Nov 13 2020 at 19:13)</a>:</h4>
<p>I think it would still have to try to search for <code>is_comm_ring A &lt;zero'&gt; &lt;one&gt; &lt;add&gt; &lt;mul'&gt;</code> for every solution for <code>zero' : has_zero A</code></p>



<a name="216658457"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216658457" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216658457">(Nov 13 2020 at 19:13)</a>:</h4>
<p>Sure, but search for all <code>zero' : has_zero A</code> will be very fast.</p>



<a name="216658485"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216658485" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216658485">(Nov 13 2020 at 19:13)</a>:</h4>
<p>which means if there are multiple paths (even if they are defeq) this will result in combinatorial explosion</p>



<a name="216658543"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216658543" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216658543">(Nov 13 2020 at 19:14)</a>:</h4>
<p>Because in my hypothetical TC graph, there are no paths from <code>some_type_class A</code> to <code>has_zero A</code></p>



<a name="216658585"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216658585" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216658585">(Nov 13 2020 at 19:14)</a>:</h4>
<p>So the search for <code>has_zero A</code> should be instant</p>



<a name="216658603"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216658603" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216658603">(Nov 13 2020 at 19:14)</a>:</h4>
<p>It will have 0 or 1 solutions</p>



<a name="216658648"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216658648" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216658648">(Nov 13 2020 at 19:15)</a>:</h4>
<p>And the same for every <code>has_X A</code> constant/unary/binary op.</p>



<a name="216658700"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216658700" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216658700">(Nov 13 2020 at 19:15)</a>:</h4>
<p>what if the definition of <code>has_zero</code> for one type needs more things on another type? Or worse, a lawful class</p>



<a name="216658759"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216658759" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216658759">(Nov 13 2020 at 19:16)</a>:</h4>
<p>for example the <code>has_one</code> of polynomials needs <code>has_zero</code> and <code>has_one</code> on the base ring</p>



<a name="216659091"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216659091" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216659091">(Nov 13 2020 at 19:18)</a>:</h4>
<p>Sure, but won't that still be fast? I don't see how it is so different from what we are already doing. It will do structural recursion on the shape of <code>A</code>. If it sees <code>polynomial R</code>, then it searches for <code>has_zero R</code> and <code>has_one R</code>. That should hopefully bottom out pretty fast.</p>



<a name="216659139"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216659139" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216659139">(Nov 13 2020 at 19:19)</a>:</h4>
<p>I understand that it now has to do 2 searches, whereas in the current mathlib it has to do only 1 search.</p>



<a name="216659155"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216659155" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216659155">(Nov 13 2020 at 19:19)</a>:</h4>
<p>well it seems untenable to get the "0 or 1" property in general</p>



<a name="216659315"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216659315" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216659315">(Nov 13 2020 at 19:20)</a>:</h4>
<p>Ok, I see your point, if the <code>has_zero A</code> would depend on some lawful class, then you would get multiple paths again</p>



<a name="216659543"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216659543" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216659543">(Nov 13 2020 at 19:22)</a>:</h4>
<p>This is an annoying issue.</p>



<a name="216659631"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216659631" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216659631">(Nov 13 2020 at 19:23)</a>:</h4>
<p>I should say that I am in favor of the <code>[[foo]]</code> implicit quantification syntax, but I don't think we should overhaul the hierarchy to use it pervasively</p>



<a name="216659711"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216659711" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216659711">(Nov 13 2020 at 19:24)</a>:</h4>
<p>it hides problems, it doesn't solve them</p>



<a name="216659847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/getting%20a%20ring%20from%20an%20integral%20domain/near/216659847" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/getting.20a.20ring.20from.20an.20integral.20domain.html#216659847">(Nov 13 2020 at 19:25)</a>:</h4>
<p>This footnote of the blogpost seems to say that my idea isn't as bad as the nesting indices:</p>
<blockquote>
<p>Note that the number of indices does not matter, like the fact that Monoid has both an Op and a Unit index. That just affects the constant factor. It’s the nesting of indices that gets us here.</p>
</blockquote>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>