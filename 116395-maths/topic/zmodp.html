---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/zmodp.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html">zmodp</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="189462163"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189462163" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189462163">(Mar 02 2020 at 04:19)</a>:</h4>
<p>Would it make sense for <code>zmodp</code> to take a <code>primes</code>, rather than a pair?</p>



<a name="189462710"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189462710" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189462710">(Mar 02 2020 at 04:36)</a>:</h4>
<p>it's probably fine? there will be a lot of coercions</p>



<a name="189462870"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189462870" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189462870">(Mar 02 2020 at 04:41)</a>:</h4>
<p>it seems potentially a lot more convenient in a situation where some prime is fixed for a long time, since the prime will probably be inferrable from everything while a separate <code>hp : prime p</code> will not</p>



<a name="189462989"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189462989" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189462989">(Mar 02 2020 at 04:45)</a>:</h4>
<p><code>prime</code> is a typeclass, so you can have <code>variables (p : nat) [prime p]</code> and it will be inferred</p>



<a name="189465081"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189465081" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189465081">(Mar 02 2020 at 05:44)</a>:</h4>
<p>See also <a href="https://github.com/leanprover-community/mathlib/issues/1648" target="_blank" title="https://github.com/leanprover-community/mathlib/issues/1648">#1648</a></p>



<a name="189465725"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189465725" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189465725">(Mar 02 2020 at 06:04)</a>:</h4>
<p>Oh, I just noticed that you changed the definition of <code>prime</code> in that PR. I thought it was just <code>@[class] def prime := ...</code></p>



<a name="189468482"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189468482" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189468482">(Mar 02 2020 at 07:23)</a>:</h4>
<p>BTW, does it make sense to have <code>nat.prime</code> defined differently from <code>prime</code> in <code>algebra/associated</code>?</p>



<a name="189468529"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189468529" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189468529">(Mar 02 2020 at 07:24)</a>:</h4>
<p>I think that a better approach would be to reuse the general definition, and prove equivalence to the current version of <code>nat.prime</code>.</p>



<a name="189468535"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189468535" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189468535">(Mar 02 2020 at 07:25)</a>:</h4>
<p>I have an innate dislike of this idea but maybe it's not well grounded</p>



<a name="189468547"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189468547" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189468547">(Mar 02 2020 at 07:25)</a>:</h4>
<p>Of which idea?</p>



<a name="189468551"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189468551" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189468551">(Mar 02 2020 at 07:25)</a>:</h4>
<p>I think it should be okay but we need to be careful to keep the dependencies down</p>



<a name="189468552"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189468552" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189468552">(Mar 02 2020 at 07:25)</a>:</h4>
<p>the idea to merge the two definitions</p>



<a name="189468601"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189468601" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189468601">(Mar 02 2020 at 07:26)</a>:</h4>
<p>I don't think <code>_root_.prime</code> was defined in an area that was being conscientious about dependencies</p>



<a name="189468675"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189468675" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189468675">(Mar 02 2020 at 07:28)</a>:</h4>
<p>OK, <code>algebra/associated</code> depends on <code>multiset</code>, and <code>nat.prime</code> uses <code>list.perm</code> relation instead of equality in <code>multiset</code>.</p>



<a name="189468699"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189468699" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189468699">(Mar 02 2020 at 07:29)</a>:</h4>
<p>Moving definition of <code>_root_.prime</code> with some properties to a file not <code>import</code>ing <code>multiset</code> should be easy.</p>



<a name="189468802"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189468802" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189468802">(Mar 02 2020 at 07:30)</a>:</h4>
<p>Why does <code>nat.prime</code> need <code>list.perm</code>?</p>



<a name="189468819"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189468819" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189468819">(Mar 02 2020 at 07:30)</a>:</h4>
<p>For <code>factors_unique</code></p>



<a name="189468820"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189468820" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189468820">(Mar 02 2020 at 07:30)</a>:</h4>
<p>I think we could split the file into two parts, with the second part dealing with complete factorizations and the unique factorization theorem</p>



<a name="189468833"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189468833" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189468833">(Mar 02 2020 at 07:31)</a>:</h4>
<p>Why <code>nat/prime</code> should care about dependencies?</p>



<a name="189468843"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189468843" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189468843">(Mar 02 2020 at 07:31)</a>:</h4>
<p>Sometimes you just want to be able to say <code>5</code> is prime and maybe evaluate some primes</p>



<a name="189468844"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189468844" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189468844">(Mar 02 2020 at 07:31)</a>:</h4>
<p>also it's needed by <code>norm_num</code></p>



<a name="189468911"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189468911" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189468911">(Mar 02 2020 at 07:33)</a>:</h4>
<p>I think that we can move multisets out of <code>algebra/associated</code>.</p>



<a name="189468933"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189468933" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189468933">(Mar 02 2020 at 07:34)</a>:</h4>
<p>About merging definitions: for a newcomer, having two definitions for the same notion is really confusing.</p>



<a name="189468960"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189468960" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189468960">(Mar 02 2020 at 07:34)</a>:</h4>
<p>Having a fancy definition for a simple concept is also confusing</p>



<a name="189468961"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189468961" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189468961">(Mar 02 2020 at 07:34)</a>:</h4>
<p>E.g., it took me a lot of time to understand the situation with <code>cau_seq</code> and <code>cauchy</code>.</p>



<a name="189468964"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189468964" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189468964">(Mar 02 2020 at 07:34)</a>:</h4>
<p>see filters</p>



<a name="189468988"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189468988" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189468988">(Mar 02 2020 at 07:35)</a>:</h4>
<p>There should be a theorem that relates <code>cau_seq</code> and <code>cauchy</code>. That's how I prefer to resolve these situations</p>



<a name="189469044"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189469044" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189469044">(Mar 02 2020 at 07:37)</a>:</h4>
<p>In the first place there should be a clear documentation (and for <code>cau_seq</code> vs <code>cauchy</code>, I'd use <code>cauchy</code> everywhere).</p>



<a name="189469102"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189469102" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189469102">(Mar 02 2020 at 07:38)</a>:</h4>
<p>I agree you should use <code>cauchy</code> preferentially if you are doing anything using or depending on topology</p>



<a name="189469109"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189469109" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189469109">(Mar 02 2020 at 07:38)</a>:</h4>
<p><code>cau_seq</code> is mostly an implementation detail for the construction of the reals</p>



<a name="189469111"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189469111" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189469111">(Mar 02 2020 at 07:38)</a>:</h4>
<p>which escaped a bit in order to help with building the p-adic numbers</p>



<a name="189469115"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189469115" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189469115">(Mar 02 2020 at 07:39)</a>:</h4>
<p>If I have <code>h : prime p</code> in the context and I want to apply a theorem taking <code>prime p</code>, then I expect it to work.</p>



<a name="189469127"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189469127" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189469127">(Mar 02 2020 at 07:39)</a>:</h4>
<p><code>open nat</code> causes a lot of confusion</p>



<a name="189469188"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189469188" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189469188">(Mar 02 2020 at 07:40)</a>:</h4>
<p>Is <code>_root_.prime</code> really that complicated?</p>



<a name="189469194"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189469194" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189469194">(Mar 02 2020 at 07:40)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="c">/-</span><span class="cm">- prime element of a semiring -/</span>
<span class="n">def</span> <span class="n">prime</span> <span class="o">[</span><span class="n">comm_semiring</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
<span class="n">p</span> <span class="bp">≠</span> <span class="mi">0</span> <span class="bp">∧</span> <span class="bp">¬</span> <span class="n">is_unit</span> <span class="n">p</span> <span class="bp">∧</span> <span class="o">(</span><span class="bp">∀</span><span class="n">a</span> <span class="n">b</span><span class="o">,</span> <span class="n">p</span> <span class="err">∣</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">→</span> <span class="n">p</span> <span class="err">∣</span> <span class="n">a</span> <span class="bp">∨</span> <span class="n">p</span> <span class="err">∣</span> <span class="n">b</span><span class="o">)</span>
</pre></div>



<a name="189469195"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189469195" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189469195">(Mar 02 2020 at 07:40)</a>:</h4>
<p>What are the dependencies of that definition that you would like to avoid?</p>



<a name="189469198"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189469198" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189469198">(Mar 02 2020 at 07:41)</a>:</h4>
<p>The definition itself is not complicated, but it's embedded in a file with many dependencies last I checked</p>



<a name="189469202"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189469202" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189469202">(Mar 02 2020 at 07:41)</a>:</h4>
<p>So... merge the definitions and maybe split the file to avoid deps</p>



<a name="189469205"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189469205" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189469205">(Mar 02 2020 at 07:41)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">group</span> <span class="n">algebra</span><span class="bp">.</span><span class="n">group</span><span class="bp">.</span><span class="n">is_unit</span> <span class="n">data</span><span class="bp">.</span><span class="n">multiset</span>
</pre></div>



<a name="189469232"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189469232" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189469232">(Mar 02 2020 at 07:42)</a>:</h4>
<p>If <code>is_unit</code> is too complicated because it depends on <code>units</code> then we could even spell it out.</p>



<a name="189469254"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189469254" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189469254">(Mar 02 2020 at 07:42)</a>:</h4>
<p>actually my memory is faulty or else I missed the refactor because it's in the algebra directory now and the imports are not as bad as I thought</p>



<a name="189469263"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189469263" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189469263">(Mar 02 2020 at 07:42)</a>:</h4>
<p>Actually <code>data.multiset</code> depends on lots of things, including <code>group_power</code>.</p>



<a name="189469271"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189469271" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189469271">(Mar 02 2020 at 07:43)</a>:</h4>
<p>yeah, that's definitely the biggest dependency in the list</p>



<a name="189469278"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189469278" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189469278">(Mar 02 2020 at 07:43)</a>:</h4>
<p>group_power is hard to avoid when talking about prime numbers</p>



<a name="189469351"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189469351" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189469351">(Mar 02 2020 at 07:45)</a>:</h4>
<p>but actually there are a lot of imports in <code>data.multiset</code> that have creeped in about algebra that are surprising</p>



<a name="189469375"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189469375" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189469375">(Mar 02 2020 at 07:45)</a>:</h4>
<p>that's kind of the whole reason <code>algebra.big_operators</code> exists, to act as the join of <code>data.finset</code> and <code>algebra.*</code></p>



<a name="189469430"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189469430" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189469430">(Mar 02 2020 at 07:46)</a>:</h4>
<p>See <a href="#narrow/stream/113489-new-members/topic/Contribution.20to.20mathlib.20with.20the.20Ostrowski.20theorem/near/187592253" title="#narrow/stream/113489-new-members/topic/Contribution.20to.20mathlib.20with.20the.20Ostrowski.20theorem/near/187592253">https://leanprover.zulipchat.com/#narrow/stream/113489-new-members/topic/Contribution.20to.20mathlib.20with.20the.20Ostrowski.20theorem/near/187592253</a> for the last time someone tried to convince Mario to drop <code>_root_.prime</code>. Maybe we can ask once per month and I'll get tired at some point <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span></p>



<a name="189469442"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189469442" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189469442">(Mar 02 2020 at 07:47)</a>:</h4>
<p>Now I'm trying to convince Mario to drop <code>nat.prime</code>, and use <code>_root_.prime</code> as the only definition ;)</p>



<a name="189469444"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189469444" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189469444">(Mar 02 2020 at 07:47)</a>:</h4>
<p>Any thoughts on my suggestion to have two files, one about <code>prime</code> (and applied to <code>nat</code>) and one about factorization and unique factorization</p>



<a name="189469496"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189469496" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189469496">(Mar 02 2020 at 07:48)</a>:</h4>
<p>Or should there still be a separate file for <code>@prime nat</code>?</p>



<a name="189469559"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189469559" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189469559">(Mar 02 2020 at 07:50)</a>:</h4>
<p>What information about <code>nat.prime</code> is important for <code>norm_num</code>?</p>



<a name="189469563"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189469563" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189469563">(Mar 02 2020 at 07:50)</a>:</h4>
<p>The computation of <code>min_fac</code></p>



<a name="189469589"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189469589" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189469589">(Mar 02 2020 at 07:51)</a>:</h4>
<blockquote>
<p><code>cau_seq</code> is mostly an implementation detail for the construction of the reals</p>
</blockquote>
<p>Yury, if you really have too much time and energy, you can try to revert the change that introduced <code>cau_seq</code>. This was motivated mostly by mysterious performance issues. We used to have a construction of reals (by Johannes Hölzl) which was half-way between the Cauchy sequence construction and Bourbaki construction (using completion of general topological rings). But it caused many time-outs. This was probably because some definition should have been marked as irreducible but wasn't. But nobody could figure out a solution before Mario's desire to stick to low-tech maths kicked in. I'm very grateful to see real numbers that work, but I wouldn't mind getting rid of <code>cau_seq</code>.</p>



<a name="189469635"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189469635" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189469635">(Mar 02 2020 at 07:52)</a>:</h4>
<blockquote>
<p>Now I'm trying to convince Mario to drop nat.prime, and use _root_.prime as the only definition ;)</p>
</blockquote>
<p>Sorry, I meant dropping <code>nat.prime</code>.</p>



<a name="189469674"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189469674" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189469674">(Mar 02 2020 at 07:53)</a>:</h4>
<p>Please don't remove <code>cau_seq</code>. For some reason Kevin loves to use <code>data.real.basic</code> in examples, and I have the luxury of a compiled mathlib at most 60% of the time</p>



<a name="189469739"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189469739" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189469739">(Mar 02 2020 at 07:55)</a>:</h4>
<p>If you can make the definition of <code>cauchy</code> and relevant properties similarly speedy I would be okay with it but we have done nothing to improve this situation since I wrote <code>cau_seq</code> AFAIK</p>



<a name="189469787"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189469787" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189469787">(Mar 02 2020 at 07:56)</a>:</h4>
<p>I want the real numbers to be something that can be considered part of the core library</p>



<a name="189469799"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189469799" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189469799">(Mar 02 2020 at 07:56)</a>:</h4>
<p>Filters and uniform spaces can be considered part of the core library, right?</p>



<a name="189469824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189469824" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189469824">(Mar 02 2020 at 07:57)</a>:</h4>
<p>Like I said, if that library got slimmer and faster it might be possible to do away with <code>cau_seq</code>. But it needs a big cleanup / refactor for that</p>



<a name="189469973"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189469973" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189469973">(Mar 02 2020 at 08:00)</a>:</h4>
<p>One way to solve the problem is to use dedekind cuts for the construction instead :D</p>



<a name="189470075"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189470075" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189470075">(Mar 02 2020 at 08:01)</a>:</h4>
<p>Nooo!</p>



<a name="189470166"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189470166" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189470166">(Mar 02 2020 at 08:02)</a>:</h4>
<p>Also <code>cau_seq</code> is "computable". I was discouraged at the time from using explicit moduli but without it the actual computable content is pretty useless, but with it we could conceivably have an exact real arithmetic library built on <code>real</code></p>



<a name="189470196"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189470196" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189470196">(Mar 02 2020 at 08:03)</a>:</h4>
<p>Which sounds like a useful thing to have.</p>



<a name="189470219"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189470219" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189470219">(Mar 02 2020 at 08:04)</a>:</h4>
<p>At some point we want to know that <code>e &gt; 2.71</code> for some reason or other. So we'll need tactics and a library that can "compute" with real numbers.</p>



<a name="189470265"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189470265" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189470265">(Mar 02 2020 at 08:04)</a>:</h4>
<p>We already did this kind of thing for pi day</p>



<a name="189470309"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189470309" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189470309">(Mar 02 2020 at 08:05)</a>:</h4>
<p>For the proof producing version we will need a <code>norm_num</code> style prover, but a computable function would be useful for computations with real numbers in <code>#eval</code></p>



<a name="189470369"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189470369" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189470369">(Mar 02 2020 at 08:06)</a>:</h4>
<p>which, by the way, would probably be used in the prover itself</p>



<a name="189470400"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189470400" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189470400">(Mar 02 2020 at 08:07)</a>:</h4>
<p>Do I remember correctly that there are no computable well-defined non-constant functions from <code>real</code> to <code>nat</code>?</p>



<a name="189470468"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189470468" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189470468">(Mar 02 2020 at 08:08)</a>:</h4>
<p>Yes, with the current implementation</p>



<a name="189470498"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189470498" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189470498">(Mar 02 2020 at 08:09)</a>:</h4>
<p>Which implementation has computable functions <em>and</em> is a <code>field</code>?</p>



<a name="189470499"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189470499" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189470499">(Mar 02 2020 at 08:09)</a>:</h4>
<p>You can, however, inhabit <code>trunc (psum (r &lt; 1) (0 &lt; r))</code></p>



<a name="189470552"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189470552" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189470552">(Mar 02 2020 at 08:10)</a>:</h4>
<p>It will not be a computable <code>field</code>, but it will have an <code>inv</code> function that requires a proof that the argument is nonzero</p>



<a name="189470558"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189470558" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189470558">(Mar 02 2020 at 08:10)</a>:</h4>
<p>You guys are really not fun. I was talking about Bourbaki reals and you managed to drift to computable reals... I'm going back to normal maths in my geometry class.</p>



<a name="189470584"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189470584" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189470584">(Mar 02 2020 at 08:10)</a>:</h4>
<p>I think it would be nice to have both</p>



<a name="189470608"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189470608" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189470608">(Mar 02 2020 at 08:11)</a>:</h4>
<p>Once you go in mathematician mode, all the distinctions fade away and you've clearly constructed the actual real numbers</p>



<a name="189470630"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189470630" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189470630">(Mar 02 2020 at 08:11)</a>:</h4>
<p>it can be a <code>field</code> and everything else</p>



<a name="189470717"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189470717" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189470717">(Mar 02 2020 at 08:13)</a>:</h4>
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> Did Boubaki ever need an approximation of a transcendental real number?</p>



<a name="189470766"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189470766" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189470766">(Mar 02 2020 at 08:14)</a>:</h4>
<p>I've never read any of their treatment of analyisis</p>



<a name="189470878"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189470878" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189470878">(Mar 02 2020 at 08:17)</a>:</h4>
<p>I'm not sure that we can make sufficiently flexible computable (in the sense of <code>eval</code>) real numbers.</p>



<a name="189470945"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189470945" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189470945">(Mar 02 2020 at 08:19)</a>:</h4>
<p>More or less, a computable real number is a (<code>trunc</code> of) a function <code>λ n, {r : rat | abs (x - r) ≤ 1/n</code> (or <code>(1/2)^n</code>).</p>



<a name="189470958"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189470958" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189470958">(Mar 02 2020 at 08:19)</a>:</h4>
<p>If you want to define, e.g., <code>a + b</code>, then you need to decide how to distribute the error.</p>



<a name="189471050"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189471050" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189471050">(Mar 02 2020 at 08:21)</a>:</h4>
<p>Splitting in halves is not a way to go because in <code>a + b + c + d + e + f</code> you'll need to know <code>a</code> with a <em>very</em> high accuracy.</p>



<a name="189471134"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189471134" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189471134">(Mar 02 2020 at 08:23)</a>:</h4>
<p>So we either need a definition that automatically distributes error margins, or a definition that asks the user how to distribute them.</p>



<a name="189471257"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189471257" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189471257">(Mar 02 2020 at 08:26)</a>:</h4>
<p>(1) You can always have more fancy functions that allow you to distribute the error more precisely (2) Dividing the error in half isn't so bad. Usually you use <code>1/2^n</code> for the modulus, and most of the basic operations generate bits in linear time, so asking for one more bit is not unreasonable</p>



<a name="189471336"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189471336" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189471336">(Mar 02 2020 at 08:26)</a>:</h4>
<p>I think that a possible way to go is to have classical noncomputable <code>real</code>s and something like <code>approximates (x : real) (f : nat → rat) : Prop := ∀ n, abs (x - f n) &lt; (1 / 2)^n</code>. Then we can have theorems like <code>approximates x f → approximates y g → approximates (x + y) (λ n, f n + g n)</code>.</p>



<a name="189471353"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189471353" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189471353">(Mar 02 2020 at 08:27)</a>:</h4>
<p>but isn't that just a <code>cau_seq</code> and its representative <code>real</code>?</p>



<a name="189471375"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189471375" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189471375">(Mar 02 2020 at 08:27)</a>:</h4>
<p>No, I prescribe the rate of convergence.</p>



<a name="189471435"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189471435" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189471435">(Mar 02 2020 at 08:28)</a>:</h4>
<p>I'm talking here about a hypothetical change to the definition of <code>cau_seq</code> to add a modulus so that you can use <code>real</code> for computation</p>



<a name="189471510"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189471510" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189471510">(Mar 02 2020 at 08:30)</a>:</h4>
<p>Ah, so the new <code>cau_seq</code> will converge at a prescribed rate (e.g., <code>(1/2)^n</code>)?</p>



<a name="189471517"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189471517" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189471517">(Mar 02 2020 at 08:30)</a>:</h4>
<p>right</p>



<a name="189471553"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189471553" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189471553">(Mar 02 2020 at 08:31)</a>:</h4>
<p>Then <code>inv x</code> will require <code>psum (x &lt; 0) (0 &lt; x)</code>, not just <code>x ≠ 0</code>.</p>



<a name="189471654"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189471654" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189471654">(Mar 02 2020 at 08:33)</a>:</h4>
<p>actually it will need more than that, it will need <code>|x| &gt; 1/n</code></p>



<a name="189471664"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189471664" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189471664">(Mar 02 2020 at 08:33)</a>:</h4>
<p>Yes.</p>



<a name="189471669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189471669" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189471669">(Mar 02 2020 at 08:33)</a>:</h4>
<p>i.e. x is apart from 0</p>



<a name="189471727"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/zmodp/near/189471727" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/zmodp.html#189471727">(Mar 02 2020 at 08:34)</a>:</h4>
<p>My point being, it will have some funny intuitionistic constraints on it and the mathematicians won't need to touch it but it's there if you want to actually compute</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>