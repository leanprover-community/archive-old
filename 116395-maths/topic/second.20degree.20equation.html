---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/second.20degree.20equation.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/second.20degree.20equation.html">second degree equation</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="275912203"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/second%20degree%20equation/near/275912203" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Diego Cerrillo <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/second.20degree.20equation.html#275912203">(Mar 19 2022 at 14:06)</a>:</h4>
<p>Hello! I am new to Lean. To try and learn a bit more on the language, I am trying to demonstrate the 2nd degree equation solution.<br>
For  the second step, I need to multiply 4*a to both sides.<br>
I am trying to use the mul_left_cancel lemma, but it does not work and I do not understand the error.<br>
Thank you very much!</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">data.real.basic</span>
<span class="kn">import</span> <span class="n">data.real.sqrt</span>

<span class="kd">noncomputable theory</span>

<span class="kd">theorem</span> <span class="n">demo</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)(</span><span class="n">x</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)(</span><span class="n">h1</span><span class="o">:</span> <span class="n">x</span> <span class="bp">=</span> <span class="o">(</span><span class="bp">-</span><span class="n">b</span> <span class="bp">+</span> <span class="n">real.sqrt</span><span class="o">(</span><span class="n">b</span><span class="bp">*</span><span class="n">b</span> <span class="bp">-</span> <span class="mi">4</span><span class="bp">*</span><span class="n">a</span><span class="bp">*</span><span class="n">c</span><span class="o">))</span><span class="bp">/</span><span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="n">a</span><span class="o">))</span> <span class="o">:</span>
 <span class="n">a</span><span class="bp">*</span><span class="n">x</span><span class="bp">^</span><span class="mi">2</span> <span class="bp">+</span> <span class="n">b</span><span class="bp">*</span><span class="n">x</span> <span class="bp">+</span> <span class="n">c</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">:=</span>
  <span class="kd">begin</span>
    <span class="n">rw</span> <span class="n">add_eq_zero_iff_eq_neg</span><span class="o">,</span>
    <span class="n">rw</span> <span class="bp">←</span><span class="n">mul_left_cancel</span> <span class="o">(</span><span class="n">a</span> <span class="bp">*</span> <span class="n">x</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">+</span> <span class="n">b</span> <span class="bp">*</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="bp">-</span><span class="n">c</span><span class="o">)</span> <span class="o">(</span><span class="mi">4</span><span class="bp">*</span><span class="n">a</span><span class="o">),</span>
    <span class="gr">sorry</span>

  <span class="kd">end</span>
</code></pre></div>



<a name="275912220"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/second%20degree%20equation/near/275912220" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Diego Cerrillo <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/second.20degree.20equation.html#275912220">(Mar 19 2022 at 14:07)</a>:</h4>
<p>poly-real.lean:10:8<br>
type mismatch at application<br>
  mul_left_cancel (a * x ^ 2 + b * x)<br>
term<br>
  a * x ^ 2 + b * x<br>
has type<br>
  ℝ : Type<br>
but is expected to have type<br>
  ?m_3 * ?m_4 = ?m_3 * ?m_5 : Prop<br>
state:<br>
a b c x : ℝ,<br>
h1 : x = (-b + real.sqrt (b * b - 4 * a * c)) / (2 * a)<br>
⊢ a * x ^ 2 + b * x = -c</p>



<a name="275913260"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/second%20degree%20equation/near/275913260" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/second.20degree.20equation.html#275913260">(Mar 19 2022 at 14:33)</a>:</h4>
<p>You can use <a href="https://github.com/leanprover-community/mathlib/wiki/Code-in-backticks">#backticks</a> even for the error, it will be more readable. Looking at <a href="https://leanprover-community.github.io/mathlib_docs/find/mul_left_cancel">docs#mul_left_cancel</a> you can see that the first argument must be an equality (the one you want to simplify), and this is what the error is saying.</p>



<a name="275913270"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/second%20degree%20equation/near/275913270" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/second.20degree.20equation.html#275913270">(Mar 19 2022 at 14:33)</a>:</h4>
<p>But for <code>ℝ</code> it will not work, since <code>ℝ</code> is not a group under multiplication.</p>



<a name="275913312"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/second%20degree%20equation/near/275913312" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Riccardo Brasca <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/second.20degree.20equation.html#275913312">(Mar 19 2022 at 14:34)</a>:</h4>
<p>You have to use <a href="https://leanprover-community.github.io/mathlib_docs/find/mul_left">docs#mul_left</a>_cancel₀</p>



<a name="275913764"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/second%20degree%20equation/near/275913764" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/second.20degree.20equation.html#275913764">(Mar 19 2022 at 14:46)</a>:</h4>
<p>Can we do something about this <code>docs#</code> bug? Riccardo means <a href="https://leanprover-community.github.io/mathlib_docs/algebra/group_with_zero/defs.html#mul_left_cancel%E2%82%80">docs#mul_left_cancel₀</a></p>



<a name="275913993"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/second%20degree%20equation/near/275913993" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/second.20degree.20equation.html#275913993">(Mar 19 2022 at 14:52)</a>:</h4>
<p>The line you want next is <code>apply mul_left_cancel₀ (show 4*a ≠ 0, from _),</code>, but you have not assumed <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4</mn><mi>a</mi><mo>≠</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">4a\not=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord">4</span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel"><span class="mord vbox"><span class="thinbox"><span class="rlap"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="inner"><span class="mord"><span class="mrel"></span></span></span><span class="fix"></span></span></span></span></span></span><span class="base"><span class="strut" style="height:0.3669em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span> so Lean throws it in as an extra goal. Your theorem is false in general e.g. if a=b=0 and c=1. Lean is completely happy to do things like <code>real.sqrt (-1)</code> (and it will return a real number), or <code>1 / 0</code> (and again it will return a real number). Lean works using a "garbage in, garbage out" procedure, so if you don't put in these hypotheses it will happily return things which you can't prove anything about (all you know is that <code>real.sqrt(-1)</code> is a real number, you don't know which one it is, and all theorems about <code>real.sqrt x</code> have <code>0 &lt;= x</code> as a hypothesis so you can't apply them to <code>real.sqrt (-1)</code>).</p>



<a name="275918115"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/second%20degree%20equation/near/275918115" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Diego Cerrillo <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/second.20degree.20equation.html#275918115">(Mar 19 2022 at 16:36)</a>:</h4>
<p>Thanks! Did not notice that</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>