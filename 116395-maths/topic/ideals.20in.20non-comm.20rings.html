---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html">ideals in non-comm rings</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="252119802"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/252119802" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Winston Yin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#252119802">(Sep 06 2021 at 02:47)</a>:</h4>
<p>I'm thinking about how to extend <code>ring_theory.ideal.basic</code> to cover two-sided ideals for non-commutative rings. Until recently, <code>ideal</code> was only defined for <code>comm_semiring</code>s, and now it is defined as left-ideals of (non-commutative) <code>semiring</code>s as <code>submodule R R</code>. What would be a good way to define two-sided ideals for <code>semiring</code>s? I can think of two options:</p>
<ul>
<li>Define a new structure <code>lrideal</code>, so that lots of lemmas for <code>submodule</code> would have to be copied over.</li>
<li>Treat two-sided ideals as left-ideals (<code>ideal</code>) with an additional hypothesis that it's closed under right multiplication by ring elements.<br>
Are there more approaches? I'm not experienced enough to tell which is a better approach.</li>
</ul>



<a name="252125567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/252125567" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#252125567">(Sep 06 2021 at 04:33)</a>:</h4>
<p>To make matters worse, there is the third option of defining two sided ideals to be left ideals under the R (x) R^op action.</p>



<a name="252126667"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/252126667" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Winston Yin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#252126667">(Sep 06 2021 at 04:55)</a>:</h4>
<p>Do you mean <code>forall (x in I) (r in R), r * x * r in I</code>? Isn't that a bit weaker than a two-sided ideal?</p>



<a name="252126773"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/252126773" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Winston Yin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#252126773">(Sep 06 2021 at 04:57)</a>:</h4>
<p>I might go with defining a new structure and show equivalence for other approaches</p>



<a name="252127090"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/252127090" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#252127090">(Sep 06 2021 at 05:02)</a>:</h4>
<p>Scott means <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">∀</mi><mo stretchy="false">(</mo><mi>r</mi><mo separator="true">,</mo><mi>s</mi><mo stretchy="false">)</mo><mo>∈</mo><mi>R</mi><mo>×</mo><msup><mi>R</mi><mtext>op</mtext></msup><mo separator="true">,</mo><mi mathvariant="normal">∀</mi><mi>x</mi><mo>∈</mo><mi>I</mi><mo separator="true">,</mo><mo stretchy="false">(</mo><mi>r</mi><mo separator="true">,</mo><mi>s</mi><mo stretchy="false">)</mo><mo>∙</mo><mi>x</mi><mo>∈</mo><mi>I</mi></mrow><annotation encoding="application/x-tex">\forall (r,s) \in R \times R^{\text{op}}, \forall x \in I, (r,s) \bullet x \in I</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∀</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">s</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">op</span></span></span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">∀</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">s</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∙</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span></span></span></span>, which unfolds to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mo>∗</mo><mi>x</mi><mo>∗</mo><mi>s</mi><mo>∈</mo><mi>I</mi></mrow><annotation encoding="application/x-tex">r * x * s \in I</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.46528em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.46528em;vertical-align:0em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span></span></span></span>.</p>



<a name="252127206"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/252127206" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Winston Yin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#252127206">(Sep 06 2021 at 05:04)</a>:</h4>
<p>Actually I'll try using this for the moment to avoid defining new things, and see how annoying it gets down the road</p>



<a name="252129363"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/252129363" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Külshammer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#252129363">(Sep 06 2021 at 05:45)</a>:</h4>
<p>I think the agreement before was that (two-sided) ideals should be defined as a special case of bimodules (like left ideals are defined as a special class of modules). Let me paste some private communication with Aaron here: "Bimodules could be easy (<code>smul_comm_class</code> is already there) but subbimodules are confusing. Basically, I think we might have to go down to the bottom of that hierarchy, going through <code>bi_mul_action</code> etc. Here's the discussion from last December: <a href="#narrow/stream/116395-maths/topic/Bimodules">https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Bimodules</a> "</p>



<a name="252129521"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/252129521" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#252129521">(Sep 06 2021 at 05:48)</a>:</h4>
<p>Hmm, that's an interesting idea, to start all the way down at <code>bi_mul_action</code>.</p>



<a name="252131525"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/252131525" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Winston Yin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#252131525">(Sep 06 2021 at 06:19)</a>:</h4>
<p>Just looked through the thread you linked. Very interesting! So the idea is to implement <code>bi_mul_action</code>, etc, <code>bi_module</code>, as well as their corresponding sub-objects? Then, two-sided ideal would just be <code>sub_bi_module R R^op R</code>?</p>



<a name="252131683"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/252131683" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#252131683">(Sep 06 2021 at 06:21)</a>:</h4>
<p><del> <code>bi_submodule R R^op R</code>, I guess. </del></p>



<a name="252131704"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/252131704" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Winston Yin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#252131704">(Sep 06 2021 at 06:21)</a>:</h4>
<p>Yes, of course</p>



<a name="252131773"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/252131773" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Winston Yin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#252131773">(Sep 06 2021 at 06:22)</a>:</h4>
<p>Sounds like a lot of work but I'm happy to look into this a bit</p>



<a name="252131830"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/252131830" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Winston Yin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#252131830">(Sep 06 2021 at 06:23)</a>:</h4>
<p>And at every stage, we define type class instances for the corresponding "non-bi" objects for the left multiplication and right multiplication</p>



<a name="252137102"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/252137102" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#252137102">(Sep 06 2021 at 07:29)</a>:</h4>
<p>I would be very happy to have a proper theory of bimodules. They are, of course, the fundamental objects. (The R (x) R^op trick I mentioned of course only works in a braided category. :-)</p>



<a name="252144757"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/252144757" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#252144757">(Sep 06 2021 at 08:43)</a>:</h4>
<p><a href="https://m.youtube.com/watch?v=GsDGvwhxq5U">https://m.youtube.com/watch?v=GsDGvwhxq5U</a> has a discussion of right actions and bimodules in the future work section</p>
<div class="youtube-video message_inline_image"><a data-id="GsDGvwhxq5U" href="https://m.youtube.com/watch?v=GsDGvwhxq5U"><img src="https://uploads.zulipusercontent.net/74fefdcaa2bdd7e18ebd5674f9ab920aa2217e0d/68747470733a2f2f692e7974696d672e636f6d2f76692f47734447767768787135552f64656661756c742e6a7067"></a></div>



<a name="252156362"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/252156362" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#252156362">(Sep 06 2021 at 10:30)</a>:</h4>
<p>I like your proposed notation <code>&lt;•</code> for the right scalar action. Maybe we should even introduce <code>•&gt;</code> as an alias for <code>•</code>.</p>



<a name="252158567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/252158567" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Winston Yin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#252158567">(Sep 06 2021 at 10:54)</a>:</h4>
<p>Mirroring <code>module</code> and <code>submodule</code>, this would be the overall structure of <code>bimodule</code> and <code>sub_bimodule</code>:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">group_theory.group_action.defs</span>
<span class="kn">import</span> <span class="n">group_theory.submonoid.basic</span>
<span class="kn">import</span> <span class="n">algebra.opposites</span>
<span class="kn">import</span> <span class="n">algebra.module.basic</span>

<span class="kd">notation</span> <span class="n">m</span> <span class="bp">`</span> <span class="bp">•ᵣ</span> <span class="bp">`</span><span class="o">:</span><span class="mi">72</span> <span class="n">a</span><span class="o">:</span><span class="mi">72</span> <span class="o">:=</span> <span class="o">(</span><span class="n">opposite.op</span> <span class="n">a</span><span class="o">)</span> <span class="bp">•</span> <span class="n">m</span>

<span class="kd">class</span> <span class="n">bi_mul_action</span> <span class="o">(</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">(</span><span class="n">β</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">(</span><span class="n">γ</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">monoid</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">monoid</span> <span class="n">β</span><span class="o">]</span> <span class="o">[</span><span class="n">has_scalar</span> <span class="n">α</span> <span class="n">γ</span><span class="o">]</span> <span class="o">[</span><span class="n">has_scalar</span> <span class="n">β</span><span class="bp">ᵒᵖ</span> <span class="n">γ</span><span class="o">]</span>
  <span class="kd">extends</span> <span class="n">smul_comm_class</span> <span class="n">α</span> <span class="n">β</span><span class="bp">ᵒᵖ</span> <span class="n">γ</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">one_smul_l</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">c</span> <span class="o">:</span> <span class="n">γ</span><span class="o">,</span> <span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="bp">•</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">c</span><span class="o">)</span>
<span class="o">(</span><span class="n">one_smul_r</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">c</span> <span class="o">:</span> <span class="n">γ</span><span class="o">,</span> <span class="n">c</span> <span class="bp">•ᵣ</span> <span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">β</span><span class="o">)</span> <span class="bp">=</span> <span class="n">c</span><span class="o">)</span>
<span class="o">(</span><span class="n">mul_smul_l</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">γ</span><span class="o">),</span> <span class="o">(</span><span class="n">x</span> <span class="bp">*</span> <span class="n">y</span><span class="o">)</span> <span class="bp">•</span> <span class="n">c</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">•</span> <span class="n">y</span> <span class="bp">•</span> <span class="n">c</span><span class="o">)</span>
<span class="o">(</span><span class="n">mul_smul_r</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">β</span><span class="o">)</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">γ</span><span class="o">),</span> <span class="n">c</span> <span class="bp">•ᵣ</span> <span class="o">(</span><span class="n">x</span> <span class="bp">*</span> <span class="n">y</span><span class="o">)</span> <span class="bp">=</span> <span class="n">c</span> <span class="bp">•ᵣ</span> <span class="n">y</span> <span class="bp">•ᵣ</span> <span class="n">x</span><span class="o">)</span>

<span class="kd">class</span> <span class="n">bi_distrib_mul_action</span> <span class="o">(</span><span class="n">M</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">(</span><span class="n">N</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">(</span><span class="n">A</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">monoid</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">monoid</span> <span class="n">N</span><span class="o">]</span> <span class="o">[</span><span class="n">add_monoid</span> <span class="n">A</span><span class="o">]</span> <span class="o">[</span><span class="n">has_scalar</span> <span class="n">M</span> <span class="n">A</span><span class="o">]</span> <span class="o">[</span><span class="n">has_scalar</span> <span class="n">N</span><span class="bp">ᵒᵖ</span> <span class="n">A</span><span class="o">]</span>
  <span class="kd">extends</span> <span class="n">bi_mul_action</span> <span class="n">M</span> <span class="n">N</span> <span class="n">A</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">smul_add_l</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">M</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">A</span><span class="o">),</span> <span class="n">r</span> <span class="bp">•</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">y</span><span class="o">)</span> <span class="bp">=</span> <span class="n">r</span> <span class="bp">•</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">r</span> <span class="bp">•</span> <span class="n">y</span><span class="o">)</span>
<span class="o">(</span><span class="n">smul_zero_l</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">M</span><span class="o">),</span> <span class="n">r</span> <span class="bp">•</span> <span class="o">(</span><span class="mi">0</span> <span class="o">:</span> <span class="n">A</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span>
<span class="o">(</span><span class="n">smul_add_r</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">N</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">A</span><span class="o">),</span> <span class="o">(</span><span class="n">x</span> <span class="bp">+</span> <span class="n">y</span><span class="o">)</span> <span class="bp">•ᵣ</span> <span class="n">r</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">•ᵣ</span> <span class="n">r</span> <span class="bp">+</span> <span class="n">y</span> <span class="bp">•ᵣ</span> <span class="n">r</span><span class="o">)</span>
<span class="o">(</span><span class="n">smul_zero_r</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">N</span><span class="o">),</span> <span class="o">(</span><span class="mi">0</span> <span class="o">:</span> <span class="n">A</span><span class="o">)</span> <span class="bp">•ᵣ</span> <span class="n">r</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span>

<span class="kd">class</span> <span class="n">bimodule</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">(</span><span class="n">M</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">S</span><span class="o">]</span> <span class="o">[</span><span class="n">add_comm_monoid</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">has_scalar</span> <span class="n">R</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">has_scalar</span> <span class="n">S</span><span class="bp">ᵒᵖ</span> <span class="n">M</span><span class="o">]</span> <span class="kd">extends</span> <span class="n">bi_distrib_mul_action</span> <span class="n">R</span> <span class="n">S</span> <span class="n">M</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">add_smul_l</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">r</span> <span class="n">s</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">M</span><span class="o">),</span> <span class="o">(</span><span class="n">r</span> <span class="bp">+</span> <span class="n">s</span><span class="o">)</span> <span class="bp">•</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">r</span> <span class="bp">•</span> <span class="n">x</span> <span class="bp">+</span> <span class="n">s</span> <span class="bp">•</span> <span class="n">x</span><span class="o">)</span>
<span class="o">(</span><span class="n">zero_smul_l</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">M</span><span class="o">),</span> <span class="o">(</span><span class="mi">0</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="bp">•</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span>
<span class="o">(</span><span class="n">add_smul_r</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">r</span> <span class="n">s</span> <span class="o">:</span> <span class="n">S</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">M</span><span class="o">),</span> <span class="n">x</span> <span class="bp">•ᵣ</span> <span class="o">(</span><span class="n">r</span> <span class="bp">+</span> <span class="n">s</span><span class="o">)</span> <span class="bp">=</span> <span class="n">x</span> <span class="bp">•ᵣ</span> <span class="n">r</span> <span class="bp">+</span> <span class="n">x</span> <span class="bp">•ᵣ</span> <span class="n">s</span><span class="o">)</span>
<span class="o">(</span><span class="n">zero_smul_r</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">M</span><span class="o">),</span> <span class="n">x</span> <span class="bp">•ᵣ</span> <span class="o">(</span><span class="mi">0</span> <span class="o">:</span> <span class="n">S</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">)</span>

<span class="kn">section</span>
<span class="kd">set_option</span> <span class="n">old_structure_cmd</span> <span class="n">true</span>

<span class="kd">structure</span> <span class="n">sub_bi_mul_action</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">(</span><span class="n">M</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">has_scalar</span> <span class="n">R</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">has_scalar</span> <span class="n">S</span><span class="bp">ᵒᵖ</span> <span class="n">M</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">carrier</span> <span class="o">:</span> <span class="n">set</span> <span class="n">M</span><span class="o">)</span>
<span class="o">(</span><span class="n">smul_mem_l'</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">M</span><span class="o">},</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">carrier</span> <span class="bp">→</span> <span class="n">c</span> <span class="bp">•</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">carrier</span><span class="o">)</span>
<span class="o">(</span><span class="n">smul_mem_r'</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">S</span><span class="o">)</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">M</span><span class="o">},</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">carrier</span> <span class="bp">→</span> <span class="n">x</span> <span class="bp">•ᵣ</span> <span class="n">c</span> <span class="bp">∈</span> <span class="n">carrier</span><span class="o">)</span>

<span class="kd">structure</span> <span class="n">sub_bimodule</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">(</span><span class="n">M</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">S</span><span class="o">]</span> <span class="o">[</span><span class="n">add_comm_monoid</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">module</span> <span class="n">R</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">module</span> <span class="n">S</span><span class="bp">ᵒᵖ</span> <span class="n">M</span><span class="o">]</span> <span class="kd">extends</span> <span class="n">add_submonoid</span> <span class="n">M</span><span class="o">,</span> <span class="n">sub_bi_mul_action</span> <span class="n">R</span> <span class="n">S</span> <span class="n">M</span>

<span class="kd">end</span>

<span class="kd">def</span> <span class="n">lrideal</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">R</span><span class="o">]</span> <span class="o">:=</span> <span class="n">sub_bimodule</span> <span class="n">R</span> <span class="n">R</span> <span class="n">R</span>
</code></pre></div>
<p>How does this look? Btw, the <code>&lt;•</code> suggestion is great!</p>



<a name="252159206"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/252159206" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#252159206">(Sep 06 2021 at 11:01)</a>:</h4>
<p>Hopefully Eric will give an opinion: I suspect he's thought about this the most so far.</p>
<p>A minor request: could we write <code>bimodule R M S</code> instead (i.e. the rings on either side of the bimodule), just like in the mathematical notation <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mrow></mrow><mi>R</mi></msub><msub><mi>M</mi><mi>S</mi></msub></mrow><annotation encoding="application/x-tex">{}_R M_S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord"></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.10903em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>?</p>



<a name="252170820"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/252170820" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#252170820">(Sep 06 2021 at 12:50)</a>:</h4>
<p><a href="https://m.youtube.com/watch?v=GsDGvwhxq5U">https://m.youtube.com/watch?v=GsDGvwhxq5U</a> has a discussion of right actions and bimodules in the future work section</p>
<div class="youtube-video message_inline_image"><a data-id="GsDGvwhxq5U" href="https://m.youtube.com/watch?v=GsDGvwhxq5U"><img src="https://uploads.zulipusercontent.net/74fefdcaa2bdd7e18ebd5674f9ab920aa2217e0d/68747470733a2f2f692e7974696d672e636f6d2f76692f47734447767768787135552f64656661756c742e6a7067"></a></div>



<a name="252177377"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/252177377" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#252177377">(Sep 06 2021 at 13:41)</a>:</h4>
<p>The classes should probably extend has_scalar, similar to how mul_action does.</p>



<a name="252177499"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/252177499" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yakov Pechersky <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#252177499">(Sep 06 2021 at 13:42)</a>:</h4>
<p>And should be generalized to "mul_one_class" etc</p>



<a name="252179063"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/252179063" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#252179063">(Sep 06 2021 at 13:55)</a>:</h4>
<p>(apologies, I have no idea why zulip sent that twice hours apart)</p>



<a name="252184870"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/252184870" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#252184870">(Sep 06 2021 at 14:40)</a>:</h4>
<p>I think having a separate <code>bimodule R S M</code> typeclass is probably as reasonable as having <code>integral_domain</code> in that it is just a shorthand for a collection of typeclasses. But most lemmas would probably end up stated about the three separate typeclasses, since then you can relax them individually. If we have it, it should provide a <code>bimodule.to_module : module R M</code> and <code>bimodule.to_right_module : module Sᵒᵖ M</code></p>



<a name="252185027"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/252185027" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#252185027">(Sep 06 2021 at 14:41)</a>:</h4>
<p>So not as you have it written above</p>



<a name="252185181"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/252185181" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#252185181">(Sep 06 2021 at 14:42)</a>:</h4>
<p>Can we make <code>open_locale bimodule</code> change the pretty printer to use <code>•&gt;</code> for <code>•</code> and add the other notation?</p>



<a name="252185444"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/252185444" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#252185444">(Sep 06 2021 at 14:45)</a>:</h4>
<p>Ooh, that would be sweet!</p>



<a name="252231334"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/252231334" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#252231334">(Sep 06 2021 at 23:10)</a>:</h4>
<p>(for the record, I think that having <a href="https://leanprover-community.github.io/mathlib_docs/find/integral_domain">docs#integral_domain</a> is annoying because if you have only <code>comm_ring</code>, <code>no_zero_divisors</code> and <code>nontrivial</code> you have to insert an awkward <code>letI</code> because typeclass search can't deal with the loops formed by two different ways to express the same thing; but there's clear pedagogical value to <code>integral_domain</code> as a spelling - the same view applies to <code>bimodule</code>)</p>



<a name="252231824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/252231824" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#252231824">(Sep 06 2021 at 23:19)</a>:</h4>
<p>My above comment about <code>bimodule.to_module</code> is wrong; it produces a dangerous instance. I think the best approach would be</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">abbreviation</span> <span class="n">right_module</span> <span class="o">(</span><span class="n">R</span> <span class="n">M</span><span class="o">)</span> <span class="o">:=</span> <span class="n">module</span> <span class="n">R</span><span class="bp">ᵒᵖ</span> <span class="n">M</span>

<span class="kd">abbreviation</span> <span class="n">bimodule</span> <span class="o">(</span><span class="n">R</span> <span class="n">S</span> <span class="n">M</span><span class="o">)</span> <span class="o">:=</span> <span class="n">smul_comm_class</span> <span class="n">R</span> <span class="n">S</span><span class="bp">ᵒᵖ</span> <span class="n">M</span>
</code></pre></div>



<a name="252241870"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/252241870" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Winston Yin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#252241870">(Sep 07 2021 at 02:14)</a>:</h4>
<p>What I've tried so far is to define <code>bimodule</code> as</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">class</span> <span class="n">bimodule</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">(</span><span class="n">M</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span>
<span class="o">[</span><span class="n">semiring</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">S</span><span class="o">]</span> <span class="o">[</span><span class="n">add_comm_monoid</span> <span class="n">M</span><span class="o">]</span>
<span class="o">[</span><span class="n">module</span> <span class="n">R</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">module</span> <span class="n">S</span><span class="bp">ᵒᵖ</span> <span class="n">M</span><span class="o">]</span>
<span class="kd">extends</span> <span class="n">smul_comm_class</span> <span class="n">R</span> <span class="n">S</span><span class="bp">ᵒᵖ</span> <span class="n">M</span>
</code></pre></div>



<a name="252242096"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/252242096" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Winston Yin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#252242096">(Sep 07 2021 at 02:18)</a>:</h4>
<p>This way, writing <code>bimodule R M S</code> would require first <code>module R M</code> and <code>module Sᵒᵖ M</code></p>



<a name="252242123"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/252242123" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Winston Yin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#252242123">(Sep 07 2021 at 02:19)</a>:</h4>
<p>I then defined</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">variables</span>
<span class="bp">...</span> <span class="o">[</span><span class="n">module_RM</span> <span class="o">:</span> <span class="n">module</span> <span class="n">R</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">module_SM</span> <span class="o">:</span> <span class="n">module</span> <span class="n">S</span><span class="bp">ᵒᵖ</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">bimodule</span> <span class="n">R</span> <span class="n">M</span> <span class="n">S</span><span class="o">]</span>

<span class="kd">def</span> <span class="n">to_left_module</span> <span class="o">:</span> <span class="n">module</span> <span class="n">R</span> <span class="n">M</span> <span class="o">:=</span> <span class="n">module_RM</span>
<span class="kd">def</span> <span class="n">to_right_module</span> <span class="o">:</span> <span class="n">module</span> <span class="n">S</span><span class="bp">ᵒᵖ</span> <span class="n">M</span> <span class="o">:=</span> <span class="n">module_SM</span>
</code></pre></div>



<a name="252242195"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/252242195" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Winston Yin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#252242195">(Sep 07 2021 at 02:20)</a>:</h4>
<p>Avoiding dangerous type class instances</p>



<a name="252242390"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/252242390" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Winston Yin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#252242390">(Sep 07 2021 at 02:23)</a>:</h4>
<p><code>sub_bimodule</code> is defined as</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">structure</span> <span class="n">sub_bimodule</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">(</span><span class="n">M</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">(</span><span class="n">S</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span>
<span class="o">[</span><span class="n">semiring</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">S</span><span class="o">]</span> <span class="o">[</span><span class="n">add_comm_monoid</span> <span class="n">M</span><span class="o">]</span>
<span class="o">[</span><span class="n">module</span> <span class="n">R</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">module</span> <span class="n">S</span><span class="bp">ᵒᵖ</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">bimodule</span> <span class="n">R</span> <span class="n">M</span> <span class="n">S</span><span class="o">]</span>
<span class="kd">extends</span> <span class="n">add_submonoid</span> <span class="n">M</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">smul_mem_l'</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">M</span><span class="o">},</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">carrier</span> <span class="bp">→</span> <span class="n">c</span> <span class="bp">•</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">carrier</span><span class="o">)</span>
<span class="o">(</span><span class="n">smul_mem_r'</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">S</span><span class="o">)</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">M</span><span class="o">},</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">carrier</span> <span class="bp">→</span> <span class="n">x</span> <span class="bp">&lt;•</span> <span class="n">c</span> <span class="bp">∈</span> <span class="n">carrier</span><span class="o">)</span>
</code></pre></div>
<p>Then some lemmas for <code>submodule</code> just have to be duplicated with <code>_l</code> and <code>_r</code> versions</p>



<a name="252250118"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/252250118" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#252250118">(Sep 07 2021 at 04:36)</a>:</h4>
<p><span class="user-mention silent" data-user-id="416472">Winston Yin</span> <a href="#narrow/stream/116395-maths/topic/ideals.20in.20non-comm.20rings/near/252242123">said</a>:</p>
<blockquote>
<p>I then defined</p>
<p><div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">variables</span>
<span class="bp">...</span> <span class="o">[</span><span class="n">module_RM</span> <span class="o">:</span> <span class="n">module</span> <span class="n">R</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">module_SM</span> <span class="o">:</span> <span class="n">module</span> <span class="n">S</span><span class="bp">ᵒᵖ</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">bimodule</span> <span class="n">R</span> <span class="n">M</span> <span class="n">S</span><span class="o">]</span>

<span class="kd">def</span> <span class="n">to_left_module</span> <span class="o">:</span> <span class="n">module</span> <span class="n">R</span> <span class="n">M</span> <span class="o">:=</span> <span class="n">module_RM</span>
<span class="kd">def</span> <span class="n">to_right_module</span> <span class="o">:</span> <span class="n">module</span> <span class="n">S</span><span class="bp">ᵒᵖ</span> <span class="n">M</span> <span class="o">:=</span> <span class="n">module_SM</span>
</code></pre></div><br>
</p>
</blockquote>
<p>What is the benefit of this? After all the instance was already there as assumption.<br>
This would make sense if you <code>extends module R M, module Sᵒᵖ M, smul_comm_class R Sᵒᵖ M</code></p>



<a name="252262921"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/252262921" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Winston Yin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#252262921">(Sep 07 2021 at 07:31)</a>:</h4>
<p>You're right...</p>



<a name="252263991"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/252263991" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#252263991">(Sep 07 2021 at 07:42)</a>:</h4>
<p>I would mildly caution against having <code>bimodule</code> actually take <code>[module R M]</code> assumptions; I think there's a lower risk of pain down the road (like we experienced with the old <code>module</code>/<code>semimodule</code> split) if you simply assume <code>[has_scalar R M]</code> instead, even though that's somewhat misleading</p>



<a name="259496034"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259496034" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259496034">(Oct 29 2021 at 08:33)</a>:</h4>
<p><span class="user-mention" data-user-id="416472">@Winston Yin</span> Has this made it into a PR yet?</p>



<a name="259727782"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259727782" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259727782">(Oct 30 2021 at 12:17)</a>:</h4>
<p>Any opinions on changing <code>compatible_smul</code> to</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">class</span> <span class="n">compatible_smul</span> <span class="o">[</span><span class="n">distrib_mul_action</span> <span class="n">R'</span><span class="bp">ᵒᵖ</span> <span class="n">N</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">op_smul_tmul</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">R'</span><span class="o">)</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="n">M</span><span class="o">)</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">N</span><span class="o">),</span> <span class="o">(</span><span class="n">r</span> <span class="bp">•</span> <span class="n">m</span><span class="o">)</span> <span class="bp">⊗ₜ</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">m</span> <span class="bp">⊗ₜ</span><span class="o">[</span><span class="n">R</span><span class="o">]</span> <span class="o">(</span><span class="n">op</span> <span class="n">r</span> <span class="bp">•</span> <span class="n">n</span><span class="o">))</span>
</code></pre></div>
<p>in the long run, given we make sure that <code>op r</code> properly simplifies to <code>r</code> in the case of commutative rings?</p>



<a name="259730014"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259730014" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259730014">(Oct 30 2021 at 13:07)</a>:</h4>
<p><a href="https://leanprover-community.github.io/mathlib_docs/find/tensor_product.compatible_smul">docs#tensor_product.compatible_smul</a> for reference</p>



<a name="259730118"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259730118" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259730118">(Oct 30 2021 at 13:09)</a>:</h4>
<p>Presumably once we start thinking about tensor products of bimodules, we first need to change <a href="https://leanprover-community.github.io/mathlib_docs/find/tensor_product.eqv.of_smul">docs#tensor_product.eqv.of_smul</a> to</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">|</span> <span class="n">of_smul</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="n">M</span><span class="o">)</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">N</span><span class="o">),</span> <span class="n">eqv</span>
    <span class="o">(</span><span class="n">free_add_monoid.of</span> <span class="o">(</span><span class="n">op</span> <span class="n">r</span> <span class="bp">•</span> <span class="n">m</span><span class="o">,</span> <span class="n">n</span><span class="o">))</span> <span class="o">(</span><span class="n">free_add_monoid.of</span> <span class="o">(</span><span class="n">m</span><span class="o">,</span> <span class="n">r</span> <span class="bp">•</span> <span class="n">n</span><span class="o">))</span>
</code></pre></div>
<p>and have tensor products require <code>[module Rᵒᵖ M] [module R N]</code></p>



<a name="259730228"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259730228" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259730228">(Oct 30 2021 at 13:11)</a>:</h4>
<p>Or do I have the convention backwards? It seems natural to me to put the scalar in the middle so that <code>(m &lt;• r) ⊗ₜ n = m ⊗ₜ[R] (r •&gt; n)</code> where <code>r : R</code>, but convention wins over my personal opinion of what is natural</p>



<a name="259731253"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259731253" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259731253">(Oct 30 2021 at 13:30)</a>:</h4>
<p>Hmm, I think we have a problem here. In the bimodule world where <code>M</code> is an <code>S-R</code> bimodule and <code>N</code> is an <code>R-T</code> bimodule, we presumably want</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code>   <span class="n">s</span> <span class="bp">•</span> <span class="o">(</span><span class="n">m</span> <span class="bp">⊗ₜ</span><span class="o">[</span><span class="n">R</span><span class="o">]</span> <span class="n">n</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">s</span> <span class="bp">•</span> <span class="n">m</span><span class="o">)</span> <span class="bp">⊗ₜ</span><span class="o">[</span><span class="n">R</span><span class="o">]</span> <span class="n">n</span>
<span class="n">op</span> <span class="n">t</span> <span class="bp">•</span> <span class="o">(</span><span class="n">m</span> <span class="bp">⊗ₜ</span><span class="o">[</span><span class="n">R</span><span class="o">]</span> <span class="n">n</span><span class="o">)</span> <span class="bp">=</span>       <span class="n">m</span> <span class="bp">⊗ₜ</span><span class="o">[</span><span class="n">R</span><span class="o">]</span> <span class="o">(</span><span class="n">op</span> <span class="n">t</span> <span class="bp">•</span> <span class="n">n</span><span class="o">)</span>
</code></pre></div>
<p>However, the latter case matches the former case with <code>s = op t</code>, and while probably gives a propositionally equal action in the cases where typeclasses match, certainly does not give a definitionally equal one.</p>



<a name="259733947"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259733947" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259733947">(Oct 30 2021 at 14:30)</a>:</h4>
<p>I don't necessaily need bimodules, just the tensor product for modules on non-commutative rings, even if it doesn't bear an <code>R</code>-action itself</p>



<a name="259733961"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259733961" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259733961">(Oct 30 2021 at 14:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/116395-maths/topic/ideals.20in.20non-comm.20rings/near/259730118">said</a>:</p>
<blockquote>
<p>Presumably once we start thinking about tensor products of bimodules, we first need to change <a href="https://leanprover-community.github.io/mathlib_docs/find/tensor_product.eqv.of_smul">docs#tensor_product.eqv.of_smul</a> to</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">|</span> <span class="n">of_smul</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="n">M</span><span class="o">)</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">N</span><span class="o">),</span> <span class="n">eqv</span>
    <span class="o">(</span><span class="n">free_add_monoid.of</span> <span class="o">(</span><span class="n">op</span> <span class="n">r</span> <span class="bp">•</span> <span class="n">m</span><span class="o">,</span> <span class="n">n</span><span class="o">))</span> <span class="o">(</span><span class="n">free_add_monoid.of</span> <span class="o">(</span><span class="n">m</span><span class="o">,</span> <span class="n">r</span> <span class="bp">•</span> <span class="n">n</span><span class="o">))</span>
</code></pre></div>
<p>and have tensor products require <code>[module Rᵒᵖ M] [module R N]</code></p>
</blockquote>
<p>Yes, that's a change I also did locally</p>



<a name="259734109"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259734109" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259734109">(Oct 30 2021 at 14:33)</a>:</h4>
<p>The issue is that in the commutative case we have everything cluttered with <code>op</code> and <code>ᵒᵖ</code> then <span aria-label="pensive" class="emoji emoji-1f614" role="img" title="pensive">:pensive:</span></p>



<a name="259737851"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259737851" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259737851">(Oct 30 2021 at 15:56)</a>:</h4>
<p>Maybe changing the definition of <code>tensor_product</code> but creating an instance of <code>compatible_smul R R M N</code> for the commutative case could be an option. (The instance requires transfering all sorts of classes, like <code>module R M</code> to <code>module Rᵒᵖ M</code>)</p>



<a name="259748457"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259748457" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259748457">(Oct 30 2021 at 19:50)</a>:</h4>
<p>I think this issue is part of a bigger one: How do we reconcile commutative algebraic structures with their <code>op</code>s? Since <code>opposite</code> is irreducible we can't state <code>r = opposite.op r</code> without a cast...</p>



<a name="259749718"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259749718" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259749718">(Oct 30 2021 at 20:22)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">section</span> <span class="n">comm_op</span>

<span class="kn">local</span> <span class="kn">attribute</span> <span class="o">[</span><span class="n">reducible</span><span class="o">]</span> <span class="n">opposite</span>

<span class="kd">@[simp]</span> <span class="kd">def</span> <span class="n">comm_op</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_semiring</span> <span class="n">R</span><span class="o">]</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="n">opposite.op</span> <span class="n">r</span> <span class="bp">=</span> <span class="n">r</span> <span class="o">:=</span> <span class="n">rfl</span>

<span class="kd">end</span> <span class="n">comm_op</span>
</code></pre></div>
<p>This seems to be a way?</p>



<a name="259752346"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259752346" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259752346">(Oct 30 2021 at 21:26)</a>:</h4>
<p>That's solving the wrong problem</p>



<a name="259752353"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259752353" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259752353">(Oct 30 2021 at 21:26)</a>:</h4>
<p>You want lean to know that <code>op r • m = r • m</code></p>



<a name="259752433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259752433" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259752433">(Oct 30 2021 at 21:28)</a>:</h4>
<p>Rewriting <code>op r</code> to <code>r</code> just makes things worse, because your statement was originally</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">@</span><span class="n">has_scalar</span> <span class="o">(</span><span class="n">opposite</span> <span class="n">R</span><span class="o">)</span> <span class="n">M</span> <span class="n">opposite.has_scalar</span> <span class="o">(</span><span class="n">op</span> <span class="n">r</span><span class="o">)</span> <span class="n">m</span> <span class="bp">=</span> <span class="bp">@</span><span class="n">has_scalar</span> <span class="n">R</span> <span class="n">M</span> <span class="n">_</span> <span class="n">r</span> <span class="n">m</span>
</code></pre></div>
<p>but your lemma turns it into the very wrong</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="bp">@</span><span class="n">has_scalar</span> <span class="o">(</span><span class="n">opposite</span> <span class="n">R</span><span class="o">)</span> <span class="n">M</span> <span class="n">opposite.has_scalar</span> <span class="n">r</span> <span class="n">m</span> <span class="bp">=</span> <span class="bp">@</span><span class="n">has_scalar</span> <span class="n">R</span> <span class="n">M</span> <span class="n">_</span> <span class="n">r</span> <span class="n">m</span>
</code></pre></div>
<p>which is using <code>R</code>, but the action from <code>opposite R</code></p>



<a name="259752437"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259752437" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259752437">(Oct 30 2021 at 21:28)</a>:</h4>
<p>We need a typeclass that says the left and right actions are the same</p>



<a name="259752553"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259752553" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259752553">(Oct 30 2021 at 21:31)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">class</span> <span class="n">is_symmetric_smul</span> <span class="o">(</span><span class="n">R</span> <span class="n">M</span><span class="o">)</span> <span class="o">[</span><span class="n">has_scalar</span> <span class="n">R</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">has_scalar</span> <span class="o">(</span><span class="n">opposite</span> <span class="n">R</span><span class="o">)</span> <span class="n">M</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">op_smul_eq_smul</span> <span class="o">:</span> <span class="k">forall</span> <span class="n">r</span> <span class="n">m</span><span class="o">,</span> <span class="n">op</span> <span class="n">r</span> <span class="bp">•</span> <span class="n">m</span> <span class="bp">=</span> <span class="n">r</span> <span class="bp">•</span> <span class="n">m</span><span class="o">)</span>
</code></pre></div>
<p>You'll then want to add instances for:</p>
<ul>
<li><code>is_symmetric_smul R R</code> when <code>comm_semigroup R</code></li>
<li><code>is_symmetric_smul R (prod A B)</code> when <code>is_symmetric_smul R A</code> and <code>is_symmetric_smul R B</code></li>
<li><code>pi</code></li>
<li><code>ulift</code></li>
<li>...</li>
<li>probably most of the things we currently have <code>has_scalar</code> instances for.</li>
</ul>



<a name="259778794"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259778794" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259778794">(Oct 31 2021 at 09:23)</a>:</h4>
<p>Do you think it's still reasonable to have both</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">class</span> <span class="n">compatible_smul_op</span> <span class="o">[</span><span class="n">distrib_mul_action</span> <span class="n">R'</span><span class="bp">ᵒᵖ</span> <span class="n">N</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">smul_tmul_op</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">R'</span><span class="o">)</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="n">M</span><span class="o">)</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">N</span><span class="o">),</span> <span class="o">(</span><span class="n">r</span> <span class="bp">•</span> <span class="n">m</span><span class="o">)</span> <span class="bp">⊗ₜ</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">m</span> <span class="bp">⊗ₜ</span><span class="o">[</span><span class="n">R</span><span class="o">]</span> <span class="o">(</span><span class="n">op</span> <span class="n">r</span> <span class="bp">•</span> <span class="n">n</span><span class="o">))</span>
</code></pre></div>
<p>and</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">class</span> <span class="n">compatible_smul</span> <span class="o">[</span><span class="n">distrib_mul_action</span> <span class="n">R'</span> <span class="n">N</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">smul_tmul</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">R'</span><span class="o">)</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="n">M</span><span class="o">)</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">N</span><span class="o">),</span> <span class="o">(</span><span class="n">r</span> <span class="bp">•</span> <span class="n">m</span><span class="o">)</span> <span class="bp">⊗ₜ</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">m</span> <span class="bp">⊗ₜ</span><span class="o">[</span><span class="n">R</span><span class="o">]</span> <span class="o">(</span><span class="n">r</span> <span class="bp">•</span> <span class="n">n</span><span class="o">))</span>
</code></pre></div>
<p>with <code>is_symmetric_smul</code> present?</p>



<a name="259782218"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259782218" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259782218">(Oct 31 2021 at 10:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/116395-maths/topic/ideals.20in.20non-comm.20rings/near/259752553">said</a>:</p>
<blockquote>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">class</span> <span class="n">is_symmetric_smul</span> <span class="o">(</span><span class="n">R</span> <span class="n">M</span><span class="o">)</span> <span class="o">[</span><span class="n">has_scalar</span> <span class="n">R</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">has_scalar</span> <span class="o">(</span><span class="n">opposite</span> <span class="n">R</span><span class="o">)</span> <span class="n">M</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">op_smul_eq_smul</span> <span class="o">:</span> <span class="k">forall</span> <span class="n">r</span> <span class="n">m</span><span class="o">,</span> <span class="n">op</span> <span class="n">r</span> <span class="bp">•</span> <span class="n">m</span> <span class="bp">=</span> <span class="n">r</span> <span class="bp">•</span> <span class="n">m</span><span class="o">)</span>
</code></pre></div>
<p>You'll then want to add instances for:</p>
<ul>
<li><code>is_symmetric_smul R R</code> when <code>comm_semigroup R</code></li>
</ul>
</blockquote>
<p>You mean what we need is the following?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="o">{</span><span class="n">R</span> <span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_semigroup</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">has_scalar</span> <span class="n">R</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span> <span class="n">is_symmetric_smul</span> <span class="n">R</span> <span class="n">α</span> <span class="o">:=</span> <span class="n">_</span>
</code></pre></div>
<p>But then at this point we do need a (low priority? local?) instance for<code>has_scalar (opposite R) α</code></p>



<a name="259782241"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259782241" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259782241">(Oct 31 2021 at 10:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/116395-maths/topic/ideals.20in.20non-comm.20rings/near/259752553">said</a>:</p>
<blockquote>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">class</span> <span class="n">is_symmetric_smul</span> <span class="o">(</span><span class="n">R</span> <span class="n">M</span><span class="o">)</span> <span class="o">[</span><span class="n">has_scalar</span> <span class="n">R</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">has_scalar</span> <span class="o">(</span><span class="n">opposite</span> <span class="n">R</span><span class="o">)</span> <span class="n">M</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">op_smul_eq_smul</span> <span class="o">:</span> <span class="k">forall</span> <span class="n">r</span> <span class="n">m</span><span class="o">,</span> <span class="n">op</span> <span class="n">r</span> <span class="bp">•</span> <span class="n">m</span> <span class="bp">=</span> <span class="n">r</span> <span class="bp">•</span> <span class="n">m</span><span class="o">)</span>
</code></pre></div>
<p>You'll then want to add instances for:</p>
<ul>
<li><code>is_symmetric_smul R R</code> when <code>comm_semigroup R</code></li>
</ul>
</blockquote>
<p>You mean what we need is the following?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="o">{</span><span class="n">R</span> <span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_semigroup</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">has_scalar</span> <span class="n">R</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span> <span class="n">is_symmetric_smul</span> <span class="n">R</span> <span class="n">α</span> <span class="o">:=</span> <span class="n">_</span>
</code></pre></div>
<p>But then at this point we do need a (low priority? local? we want to keep the option of having a right action that's different from the left action, even if <code>R</code> is commutative, right?) instance for<code>has_scalar (opposite R) α</code></p>



<a name="259782716"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259782716" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259782716">(Oct 31 2021 at 11:10)</a>:</h4>
<p>I'm not sure we need both, I'd focus on adding the first one and then reassess</p>



<a name="259782737"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259782737" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259782737">(Oct 31 2021 at 11:11)</a>:</h4>
<p>The <code>is_symmetric_smul R α</code> instance you suggest doesn't type check, there's no <code>has_scalar Rᵒᵖ α</code> for it to be about</p>



<a name="259782740"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259782740" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259782740">(Oct 31 2021 at 11:11)</a>:</h4>
<p>Which is why I said you only want the <code>R R</code> instance</p>



<a name="259782966"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259782966" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259782966">(Oct 31 2021 at 11:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/116395-maths/topic/ideals.20in.20non-comm.20rings/near/259782737">said</a>:</p>
<blockquote>
<p>The <code>is_symmetric_smul R α</code> instance you suggest doesn't type check, there's no <code>has_scalar Rᵒᵖ α</code> for it to be about</p>
</blockquote>
<p>Yes, an instance for <code>has_scalar Rᵒᵖ α</code> given <code>has_scalar R α</code> what I suggested adding...</p>



<a name="259783051"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259783051" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259783051">(Oct 31 2021 at 11:20)</a>:</h4>
<p>Oh, we do not need that instance</p>



<a name="259783091"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259783091" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259783091">(Oct 31 2021 at 11:20)</a>:</h4>
<p><code>has_scalar Rᵒᵖ R</code> is enough, and we already have that</p>



<a name="259783101"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259783101" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259783101">(Oct 31 2021 at 11:21)</a>:</h4>
<p>For instance, <code>has_scalar Rᵒᵖ (fin 3 → R)</code> can be found today via <a href="https://leanprover-community.github.io/mathlib_docs/find/pi.has_scalar">docs#pi.has_scalar</a></p>



<a name="259783353"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259783353" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259783353">(Oct 31 2021 at 11:27)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110789">Jakob von Raumer</span> <a href="#narrow/stream/116395-maths/topic/ideals.20in.20non-comm.20rings/near/259733947">said</a>:</p>
<blockquote>
<p>I don't necessaily need bimodules, just the tensor product for modules on non-commutative rings, even if it doesn't bear an <code>R</code>-action itself</p>
</blockquote>
<p>Right, just like for linear maps. Even when the scalars are non-commuative we have <a href="https://leanprover-community.github.io/mathlib_docs/find/linear_map.add_comm_monoid">docs#linear_map.add_comm_monoid</a> but we need some form of commutativity for <a href="https://leanprover-community.github.io/mathlib_docs/find/linear_map.module">docs#linear_map.module</a></p>



<a name="259783472"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259783472" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259783472">(Oct 31 2021 at 11:30)</a>:</h4>
<p>I haven't studied this thread carefully enough to understand your objectives beyond noting you want tensor product with non-commutative scalars (which I too would love to have) but this old thread of mine might also be food for thought:<br>
<a href="#narrow/stream/144837-PR-reviews/topic/.234773.20base.20change/near/240929318">https://leanprover.zulipchat.com/#narrow/stream/144837-PR-reviews/topic/.234773.20base.20change/near/240929318</a></p>



<a name="259783526"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259783526" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259783526">(Oct 31 2021 at 11:32)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/116395-maths/topic/ideals.20in.20non-comm.20rings/near/259783091">said</a>:</p>
<blockquote>
<p><code>has_scalar Rᵒᵖ R</code> is enough, and we already have that</p>
</blockquote>
<p>I think I don't quite get the connection yet. Does this involve defining <code>op r • m</code> by <code>(op r • (1 : R)) • m</code>?</p>



<a name="259783586"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259783586" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259783586">(Oct 31 2021 at 11:34)</a>:</h4>
<p>No, what I said above doesn't; but we can use that to almost get away without <code>is_symmetric_smul</code>:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">group_theory.group_action.basic</span>
<span class="kn">import</span> <span class="n">algebra.module.opposites</span>
<span class="kn">import</span> <span class="n">algebra.module.prod</span>

<span class="kn">open</span> <span class="n">opposite</span>

<span class="kd">instance</span> <span class="n">comm_semigroup.op_is_scalar_tower</span> <span class="o">{</span><span class="n">R</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_semigroup</span> <span class="n">R</span><span class="o">]</span> <span class="o">:</span> <span class="n">is_scalar_tower</span> <span class="n">R</span><span class="bp">ᵒᵖ</span> <span class="n">R</span> <span class="n">R</span> <span class="o">:=</span>
<span class="o">⟨</span><span class="bp">λ</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span><span class="o">,</span> <span class="n">opposite.rec</span> <span class="o">(</span><span class="kd">by</span> <span class="n">exact</span> <span class="bp">λ</span> <span class="n">a'</span><span class="o">,</span> <span class="n">mul_right_comm</span> <span class="n">b</span> <span class="n">a'</span> <span class="n">c</span><span class="o">)</span> <span class="n">a</span><span class="o">⟩</span>

<span class="c1">-- this works around a typeclass bug in pi types</span>
<span class="kd">instance</span> <span class="n">comm_monoid.op_is_scalar_tower</span> <span class="o">{</span><span class="n">R</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_monoid</span> <span class="n">R</span><span class="o">]</span> <span class="o">:</span> <span class="n">is_scalar_tower</span> <span class="n">R</span><span class="bp">ᵒᵖ</span> <span class="n">R</span> <span class="n">R</span> <span class="o">:=</span>
<span class="n">comm_semigroup.op_is_scalar_tower</span>

<span class="c1">-- we were able to prove this without `is_symmetric_smul`</span>
<span class="kd">lemma</span> <span class="n">op_smul_eq_smul</span> <span class="o">{</span><span class="n">R</span> <span class="n">M</span><span class="o">}</span> <span class="o">[</span><span class="n">monoid</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">mul_action</span> <span class="n">R</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">mul_action</span> <span class="n">R</span><span class="bp">ᵒᵖ</span> <span class="n">M</span><span class="o">]</span>
  <span class="o">[</span><span class="n">is_scalar_tower</span> <span class="n">R</span><span class="bp">ᵒᵖ</span> <span class="n">R</span> <span class="n">M</span><span class="o">]</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="n">M</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">op</span> <span class="n">r</span> <span class="bp">•</span> <span class="n">m</span> <span class="bp">=</span> <span class="n">r</span> <span class="bp">•</span> <span class="n">m</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="bp">←</span><span class="n">one_smul</span> <span class="n">R</span> <span class="n">m</span><span class="o">,</span> <span class="bp">←</span><span class="n">smul_assoc</span> <span class="o">(</span><span class="n">op</span> <span class="n">r</span><span class="o">)</span> <span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="n">m</span><span class="o">,</span> <span class="n">op_smul_eq_mul</span><span class="o">,</span> <span class="n">smul_smul</span><span class="o">,</span> <span class="n">one_mul</span><span class="o">,</span> <span class="n">mul_one</span><span class="o">]</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_monoid</span> <span class="n">R</span><span class="o">]</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="n">op</span> <span class="n">r</span> <span class="bp">•</span> <span class="n">m</span> <span class="bp">=</span> <span class="n">r</span> <span class="bp">•</span> <span class="n">m</span> <span class="o">:=</span> <span class="n">op_smul_eq_smul</span> <span class="n">_</span> <span class="n">_</span>
<span class="kd">example</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="n">R</span> <span class="bp">×</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="n">op</span> <span class="n">r</span> <span class="bp">•</span> <span class="n">m</span> <span class="bp">=</span> <span class="n">r</span> <span class="bp">•</span> <span class="n">m</span> <span class="o">:=</span> <span class="n">op_smul_eq_smul</span> <span class="n">_</span> <span class="n">_</span>
<span class="kd">example</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">3</span> <span class="bp">→</span> <span class="n">R</span><span class="o">)</span> <span class="o">:</span> <span class="n">op</span> <span class="n">r</span> <span class="bp">•</span> <span class="n">m</span> <span class="bp">=</span> <span class="n">r</span> <span class="bp">•</span> <span class="n">m</span> <span class="o">:=</span> <span class="n">op_smul_eq_smul</span> <span class="n">_</span> <span class="n">_</span>  <span class="c1">-- needs the workaround above</span>
</code></pre></div>
<p>we still need it if we want to talk about actions by non-monoids</p>



<a name="259783599"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259783599" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259783599">(Oct 31 2021 at 11:35)</a>:</h4>
<blockquote>
<p>I think I don't quite get the connection yet</p>
</blockquote>
<p>Can you give me an example of something that doesn't have a right action today, but should?</p>



<a name="259783603"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259783603" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259783603">(Oct 31 2021 at 11:35)</a>:</h4>
<p>My claim is that the instance you suggest would just conflict with ones we already have, and there's no situation that you need it anyway</p>



<a name="259783679"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259783679" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259783679">(Oct 31 2021 at 11:37)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/116395-maths/topic/ideals.20in.20non-comm.20rings/near/259783599">said</a>:</p>
<blockquote>
<blockquote>
<p>I think I don't quite get the connection yet</p>
</blockquote>
<p>Can you give me an example of something that doesn't have a right action today, but should?</p>
</blockquote>
<p>No I was just saying that I don't quite understand yet how the <code>has_scalar Rᵒᵖ R</code> instance actually helps making sense of <code>op r • m</code></p>



<a name="259783723"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259783723" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259783723">(Oct 31 2021 at 11:38)</a>:</h4>
<p>Because for almost every choice of <code>m</code> you make, there's already an action<code>has_scalar Rᵒᵖ M</code> defined in terms of <code>has_scalar Rᵒᵖ R</code></p>



<a name="259783733"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259783733" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259783733">(Oct 31 2021 at 11:39)</a>:</h4>
<p>Where is it defined?</p>



<a name="259783744"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259783744" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259783744">(Oct 31 2021 at 11:39)</a>:</h4>
<p>In the same place as <code>has_scalar R M</code></p>



<a name="259783746"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259783746" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259783746">(Oct 31 2021 at 11:39)</a>:</h4>
<p>The location of which depends on your choice of <code>M</code>. See for instance <a href="https://leanprover-community.github.io/mathlib_docs/find/prod.has_scalar">docs#prod.has_scalar</a>, <a href="https://leanprover-community.github.io/mathlib_docs/find/pi.has_scalar">docs#pi.has_scalar</a></p>



<a name="259783840"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259783840" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259783840">(Oct 31 2021 at 11:42)</a>:</h4>
<p>I'm completely lost.</p>



<a name="259783847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259783847" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259783847">(Oct 31 2021 at 11:42)</a>:</h4>
<p>Pick a concrete example of R and M and I can show you</p>



<a name="259784082"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259784082" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259784082">(Oct 31 2021 at 11:46)</a>:</h4>
<p>What do you mean by concrete? I want to <code>M</code> to be an arbitrary <code>R</code>-module</p>



<a name="259784092"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259784092" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259784092">(Oct 31 2021 at 11:47)</a>:</h4>
<p>I just don't get what <code>has_scalar Rᵒᵖ R</code> has to do with this if we don't have a full <code>scalar_tower Rᵒᵖ R M</code></p>



<a name="259784214"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259784214" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259784214">(Oct 31 2021 at 11:51)</a>:</h4>
<p>By concrete I mean <code>M = R × R</code>, <code>M = polynomial R</code> etc. I don't understand the question you're asking</p>



<a name="259784279"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259784279" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259784279">(Oct 31 2021 at 11:52)</a>:</h4>
<p>Under the original proposal:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">class</span> <span class="n">is_symmetric_smul</span> <span class="o">(</span><span class="n">R</span> <span class="n">M</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">has_scalar</span> <span class="n">R</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">has_scalar</span> <span class="o">(</span><span class="n">opposite</span> <span class="n">R</span><span class="o">)</span> <span class="n">M</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">op_smul_eq_smul</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="n">M</span><span class="o">),</span> <span class="n">op</span> <span class="n">r</span> <span class="bp">•</span> <span class="n">m</span> <span class="bp">=</span> <span class="n">r</span> <span class="bp">•</span> <span class="n">m</span><span class="o">)</span>

<span class="kn">open</span> <span class="n">is_symmetric_smul</span> <span class="o">(</span><span class="n">op_smul_eq_smul</span><span class="o">)</span>

<span class="kd">instance</span> <span class="n">comm_semigroup.is_symmetric_smul</span> <span class="o">{</span><span class="n">R</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_semigroup</span> <span class="n">R</span><span class="o">]</span> <span class="o">:</span> <span class="n">is_symmetric_smul</span> <span class="n">R</span> <span class="n">R</span> <span class="o">:=</span>
<span class="o">⟨</span><span class="bp">λ</span> <span class="n">r</span> <span class="n">m</span><span class="o">,</span> <span class="n">mul_comm</span> <span class="n">_</span> <span class="n">_</span><span class="o">⟩</span>

<span class="kd">instance</span> <span class="n">prod.is_symmetric_smul</span> <span class="o">{</span><span class="n">R</span> <span class="n">α</span> <span class="n">β</span><span class="o">}</span>
  <span class="o">[</span><span class="n">has_scalar</span> <span class="n">R</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">has_scalar</span> <span class="n">R</span> <span class="n">β</span><span class="o">]</span> <span class="o">[</span><span class="n">has_scalar</span> <span class="n">R</span><span class="bp">ᵒᵖ</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">has_scalar</span> <span class="n">R</span><span class="bp">ᵒᵖ</span> <span class="n">β</span><span class="o">]</span>
  <span class="o">[</span><span class="n">is_symmetric_smul</span> <span class="n">R</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">is_symmetric_smul</span> <span class="n">R</span> <span class="n">β</span><span class="o">]</span> <span class="o">:</span> <span class="n">is_symmetric_smul</span> <span class="n">R</span> <span class="o">(</span><span class="n">α</span> <span class="bp">×</span> <span class="n">β</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">⟨</span><span class="bp">λ</span> <span class="n">r</span> <span class="n">m</span><span class="o">,</span> <span class="n">prod.ext</span> <span class="o">(</span><span class="n">op_smul_eq_smul</span> <span class="n">_</span> <span class="n">_</span><span class="o">)</span> <span class="o">(</span><span class="n">op_smul_eq_smul</span> <span class="n">_</span> <span class="n">_</span><span class="o">)⟩</span>

<span class="kd">instance</span> <span class="n">pi.is_symmetric_smul</span> <span class="o">{</span><span class="n">R</span><span class="o">}</span> <span class="o">{</span><span class="n">ι</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="n">ι</span> <span class="bp">→</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>
  <span class="o">[</span><span class="bp">Π</span> <span class="n">i</span><span class="o">,</span> <span class="n">has_scalar</span> <span class="n">R</span> <span class="o">(</span><span class="n">α</span> <span class="n">i</span><span class="o">)]</span> <span class="o">[</span><span class="bp">Π</span> <span class="n">i</span><span class="o">,</span> <span class="n">has_scalar</span> <span class="n">R</span><span class="bp">ᵒᵖ</span> <span class="o">(</span><span class="n">α</span> <span class="n">i</span><span class="o">)]</span> <span class="o">[</span><span class="bp">Π</span> <span class="n">i</span><span class="o">,</span> <span class="n">is_symmetric_smul</span> <span class="n">R</span> <span class="o">(</span><span class="n">α</span> <span class="n">i</span><span class="o">)]</span> <span class="o">:</span>
  <span class="n">is_symmetric_smul</span> <span class="n">R</span> <span class="o">(</span><span class="bp">Π</span> <span class="n">i</span><span class="o">,</span> <span class="n">α</span> <span class="n">i</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">⟨</span><span class="bp">λ</span> <span class="n">r</span> <span class="n">m</span><span class="o">,</span> <span class="n">funext</span> <span class="bp">$</span> <span class="bp">λ</span> <span class="n">i</span><span class="o">,</span> <span class="n">op_smul_eq_smul</span> <span class="n">_</span> <span class="n">_</span><span class="o">⟩</span>

<span class="c1">-- hack that hopefully lean4 doesn't need</span>
<span class="kd">instance</span> <span class="n">function.is_symmetric_smul</span> <span class="o">{</span><span class="n">R</span><span class="o">}</span> <span class="o">{</span><span class="n">ι</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span>
  <span class="o">[</span><span class="n">has_scalar</span> <span class="n">R</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">has_scalar</span> <span class="n">R</span><span class="bp">ᵒᵖ</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">is_symmetric_smul</span> <span class="n">R</span> <span class="o">(</span><span class="n">α</span><span class="o">)]</span> <span class="o">:</span>
  <span class="n">is_symmetric_smul</span> <span class="n">R</span> <span class="o">(</span><span class="n">ι</span> <span class="bp">→</span> <span class="n">α</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">pi.is_symmetric_smul</span>
</code></pre></div>
<p>Any lemma about a symmetric bimodule would be stated as:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">some_lemma</span> <span class="o">[</span><span class="n">module</span> <span class="n">R</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">module</span> <span class="n">R</span><span class="bp">ᵒᵖ</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">is_symmetric_smul</span> <span class="n">R</span> <span class="n">M</span><span class="o">]</span> <span class="o">:</span> <span class="gr">sorry</span>
</code></pre></div>



<a name="259784292"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259784292" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259784292">(Oct 31 2021 at 11:53)</a>:</h4>
<p>You don't need to worry about where <code>module Rᵒᵖ M</code> comes from, that's the caller's problem</p>



<a name="259784338"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259784338" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259784338">(Oct 31 2021 at 11:54)</a>:</h4>
<p>And the caller either:</p>
<ol>
<li>Is working with a concrete type, and so has the instance available</li>
<li>Is working on a variable type, so passes the obligation on to <em>their</em> caller</li>
</ol>



<a name="259784346"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259784346" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259784346">(Oct 31 2021 at 11:54)</a>:</h4>
<p>(deleted)</p>



<a name="259784411"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259784411" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259784411">(Oct 31 2021 at 11:57)</a>:</h4>
<p>I thought you meant that in order to have</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="o">{</span><span class="n">R</span> <span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_semigroup</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">has_scalar</span> <span class="n">R</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span> <span class="n">is_symmetric_smul</span> <span class="n">R</span> <span class="n">α</span> <span class="o">:=</span> <span class="n">_</span>
</code></pre></div>
<p>instead of adding an argument <code>has_scalar Rᵒᵖ α</code>, an argument <code>has_scalar Rᵒᵖ R</code> would be enough.</p>



<a name="259784483"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259784483" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259784483">(Oct 31 2021 at 11:59)</a>:</h4>
<p>But I guess you said we shouldn't have that instance at all? So everyone using tensor products as before would have to supply the <code>is_symmetric_smul</code>?</p>



<a name="259784605"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259784605" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259784605">(Oct 31 2021 at 12:01)</a>:</h4>
<p>You don't need <code>is_symmetric_smul</code> to use <code>tensor_product</code>; only the lemmas that require it</p>



<a name="259784651"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259784651" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259784651">(Oct 31 2021 at 12:02)</a>:</h4>
<p>Okay, I guess now I get it. I'll see how much need for refactoring this causes outside of <code>linear_algebra.tensor_product</code>...</p>



<a name="259784728"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259784728" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259784728">(Oct 31 2021 at 12:05)</a>:</h4>
<p>Unfortunately there's <a href="#narrow/stream/113488-general/topic/instance.20lookup.20on.20function.20types/near/259784151">a nasty typeclass issue</a> that looks like it makes both <code>is_symmetric_smul</code> and <code>[is_scalar_tower Rᵒᵖ R M]</code> <del>non-viable</del> quite annoying (until lean4)</p>



<a name="259784793"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259784793" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259784793">(Oct 31 2021 at 12:06)</a>:</h4>
<p>I edited the message above with some <code>is_symmetric_smul</code> instances to get you started</p>



<a name="259843662"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259843662" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259843662">(Nov 01 2021 at 09:45)</a>:</h4>
<p>Thanks for all the help!</p>



<a name="259844105"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259844105" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259844105">(Nov 01 2021 at 09:50)</a>:</h4>
<p>One thing that's not obvious to me is how to fix the following: The current construction of <code>compatible_smul.is_scalar_tower</code> now needs the following instance to go through:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="n">has_scalar_op_op</span> <span class="o">{</span><span class="n">R</span> <span class="n">R'</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">has_scalar</span> <span class="n">R'</span> <span class="n">R</span><span class="o">]</span> <span class="o">:</span> <span class="n">has_scalar</span> <span class="n">R'</span><span class="bp">ᵒᵖ</span> <span class="n">R</span><span class="bp">ᵒᵖ</span> <span class="o">:=</span>
<span class="o">⟨</span><span class="bp">λ</span> <span class="n">r'</span> <span class="n">r</span><span class="o">,</span> <span class="n">opposite.op</span> <span class="o">(</span><span class="n">opposite.unop</span> <span class="n">r'</span> <span class="bp">•</span> <span class="n">opposite.unop</span> <span class="n">r</span><span class="o">)⟩</span>
</code></pre></div>
<p>It fails if the instance of <code>has_scalar R'ᵒᵖ Rᵒᵖ</code> is anything other than this, because we need <code>op (r • b) = op r • op b</code>. But then,  <code>compatible_smul.is_scalar_tower</code> doesn't generalise to <code>compatible_smul R R M N</code> anymore because <code>mul_action.is_scalar_tower.left</code> uses an instance of <code>has_scalar Rᵒᵖ Rᵒᵖ</code> which is not defeq to <code>has_scalar_op_op</code>. I solved this by just adding a manual <code>compatible_smul.self : compatible_smul R R M N</code>, but the previous construction was obviously a bit nicer...</p>



<a name="259857909"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259857909" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259857909">(Nov 01 2021 at 12:32)</a>:</h4>
<p>Your <code>has_scalar_op_op</code> instance looks dangerous to me</p>



<a name="259861521"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259861521" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259861521">(Nov 01 2021 at 13:13)</a>:</h4>
<p>Well it's needed to make sense of <code>is_scalar_tower R'ᵒᵖ Rᵒᵖ N</code> in this context. But maybe we should keep it local?</p>



<a name="259882663"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259882663" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259882663">(Nov 01 2021 at 16:05)</a>:</h4>
<p>My hunch is that you probably should take <code>[has_scalar R'ᵒᵖ R ]</code> as an argument there too; and if you need it to satisfy <code>op (r • b) = op r • op b</code>, then work out a way to express that with typeclasses</p>



<a name="259882826"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259882826" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259882826">(Nov 01 2021 at 16:06)</a>:</h4>
<p>Adding <code>compatible_smul.self</code> seems like a much more conservative bet than adding your instance</p>



<a name="259883823"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259883823" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259883823">(Nov 01 2021 at 16:13)</a>:</h4>
<blockquote>
<p>then work out a way to express that with typeclasses</p>
</blockquote>
<p>Here's that way:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="c1">-- you need this instance</span>
<span class="kd">instance</span> <span class="o">(</span><span class="n">R</span> <span class="n">M</span><span class="o">)</span> <span class="o">[</span><span class="n">has_scalar</span> <span class="n">R</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">has_scalar</span> <span class="n">R</span><span class="bp">ᵒᵖ</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">is_symmetric_smul</span> <span class="n">R</span> <span class="n">M</span><span class="o">]</span> <span class="o">:</span>
  <span class="n">is_symmetric_smul</span> <span class="n">R</span> <span class="n">M</span><span class="bp">ᵒᵖ</span> <span class="o">:=</span> <span class="o">⟨</span><span class="bp">λ</span> <span class="n">r</span> <span class="n">m</span><span class="o">,</span> <span class="n">unop_injective</span> <span class="o">(</span><span class="n">op_smul_eq_smul</span> <span class="n">r</span> <span class="n">m.unop</span> <span class="o">:</span> <span class="n">_</span><span class="o">)⟩</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">R</span> <span class="n">M</span><span class="o">)</span> <span class="o">[</span><span class="n">has_scalar</span> <span class="n">R</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">has_scalar</span> <span class="n">R</span><span class="bp">ᵒᵖ</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">is_symmetric_smul</span> <span class="n">R</span> <span class="n">M</span><span class="o">]</span> <span class="o">(</span><span class="n">r</span> <span class="o">:</span> <span class="n">R</span><span class="o">)</span> <span class="o">(</span><span class="n">m</span> <span class="o">:</span> <span class="n">M</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">op</span> <span class="o">(</span><span class="n">r</span> <span class="bp">•</span> <span class="n">m</span><span class="o">)</span> <span class="bp">=</span> <span class="n">op</span> <span class="n">r</span> <span class="bp">•</span> <span class="n">op</span> <span class="n">m</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">op_smul_eq_smul</span> <span class="n">r</span> <span class="o">(</span><span class="n">op</span> <span class="n">m</span><span class="o">))</span><span class="bp">.</span><span class="n">symm</span>
</code></pre></div>



<a name="259884025"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259884025" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259884025">(Nov 01 2021 at 16:15)</a>:</h4>
<p>Perhaps it's worth pointing out the difference between your "add an instance" and my "add an instance"; you're adding data instances which can introduce diamonds and incompatible actions, my instances are only proofs, so can't introduce these things.</p>



<a name="259890542"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259890542" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259890542">(Nov 01 2021 at 17:01)</a>:</h4>
<p>That's a neat idea.</p>



<a name="259891672"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259891672" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259891672">(Nov 01 2021 at 17:09)</a>:</h4>
<p>It does away with the need for the double-op instance. I doesn't solve the issue of needing a separate <code>compatible_smul.self : compatible_smul R R M N</code>, though since that would require <code>is_symmetric_smul R R</code> which sounds like a bad idea for non-commutative rings</p>



<a name="259898913"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259898913" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259898913">(Nov 01 2021 at 18:10)</a>:</h4>
<p><code>is_symmetric_smul R R</code> isn't true on non-commutative rings</p>



<a name="259899030"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259899030" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259899030">(Nov 01 2021 at 18:10)</a>:</h4>
<p>And I don't think <code>compatible_smul R R M N</code> is either, although I don't know what your new definition of <code>compatible_smul</code> is</p>



<a name="259899601"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259899601" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259899601">(Nov 01 2021 at 18:15)</a>:</h4>
<p>Do you have a branch you're working on this in?</p>



<a name="259904007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/259904007" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#259904007">(Nov 01 2021 at 18:48)</a>:</h4>
<p>Not yet, I'll push it later on</p>



<a name="260111791"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/260111791" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#260111791">(Nov 03 2021 at 10:08)</a>:</h4>
<p>I pushed my state of things <a href="https://github.com/javra/mathlib/tree/noncomm_tensor_product">here</a>, but there's so much left do be done, and I haven't even started to check where things break in other files</p>



<a name="260262759"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/260262759" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#260262759">(Nov 04 2021 at 12:33)</a>:</h4>
<p>Ah, I just noticed it's more canonical to assume that <code>R</code> operates on the right on <code>M</code> and not on <code>N</code>, so I made some bad choices here...</p>



<a name="260271828"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/260271828" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#260271828">(Nov 04 2021 at 13:52)</a>:</h4>
<p>I thought that was what you had?</p>



<a name="260271939"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/260271939" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#260271939">(Nov 04 2021 at 13:52)</a>:</h4>
<p>Ah nevermind, you fixed it in <a href="https://github.com/javra/mathlib/commit/efea1e30f00a9237590e134bb029ee2d67a5d75b">https://github.com/javra/mathlib/commit/efea1e30f00a9237590e134bb029ee2d67a5d75b</a></p>



<a name="260279337"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/260279337" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#260279337">(Nov 04 2021 at 14:44)</a>:</h4>
<p>Now for <code>add_comm_monoid</code> we'd need a right action of <code>ℕ</code> on <code>M</code>, that doesen't seems unnatural either <span aria-label="unamused" class="emoji emoji-1f612" role="img" title="unamused">:unamused:</span></p>



<a name="260317672"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/260317672" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#260317672">(Nov 04 2021 at 18:55)</a>:</h4>
<p>Will this create yet another diamond in case <code>M = nat</code>?</p>



<a name="260317697"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/260317697" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#260317697">(Nov 04 2021 at 18:55)</a>:</h4>
<p>Because we already have an action of <code>opposite nat</code> on <code>nat</code>.</p>



<a name="260318544"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/260318544" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#260318544">(Nov 04 2021 at 19:00)</a>:</h4>
<p>I wonder if there is a way to deal with these diamonds without adding lots of fields to <code>monoid</code>.</p>



<a name="260319443"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/260319443" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#260319443">(Nov 04 2021 at 19:07)</a>:</h4>
<p><span class="user-mention silent" data-user-id="214703">Yury G. Kudryashov</span> <a href="#narrow/stream/116395-maths/topic/ideals.20in.20non-comm.20rings/near/260317672">said</a>:</p>
<blockquote>
<p>Will this create yet another diamond in case <code>M = nat</code>?</p>
</blockquote>
<p>I think they both reduce to the inverted multiplication, so should be definitionally equal</p>



<a name="260319924"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/260319924" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#260319924">(Nov 04 2021 at 19:11)</a>:</h4>
<p>How do you define the new action?</p>



<a name="260319939"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/260319939" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#260319939">(Nov 04 2021 at 19:11)</a>:</h4>
<p>Isn't it just <code>nsmul</code>?</p>



<a name="260320387"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/260320387" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#260320387">(Nov 04 2021 at 19:15)</a>:</h4>
<p>Good question. That _does_ yield the wrong operation on <code>M = nat</code>...</p>



<a name="260321763"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/260321763" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#260321763">(Nov 04 2021 at 19:27)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/116395-maths/topic/ideals.20in.20non-comm.20rings/near/259731253">said</a>:</p>
<blockquote>
<p>Hmm, I think we have a problem here. In the bimodule world where <code>M</code> is an <code>S-R</code> bimodule and <code>N</code> is an <code>R-T</code> bimodule, we presumably want</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code>   <span class="n">s</span> <span class="bp">•</span> <span class="o">(</span><span class="n">m</span> <span class="bp">⊗ₜ</span><span class="o">[</span><span class="n">R</span><span class="o">]</span> <span class="n">n</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">s</span> <span class="bp">•</span> <span class="n">m</span><span class="o">)</span> <span class="bp">⊗ₜ</span><span class="o">[</span><span class="n">R</span><span class="o">]</span> <span class="n">n</span>
<span class="n">op</span> <span class="n">t</span> <span class="bp">•</span> <span class="o">(</span><span class="n">m</span> <span class="bp">⊗ₜ</span><span class="o">[</span><span class="n">R</span><span class="o">]</span> <span class="n">n</span><span class="o">)</span> <span class="bp">=</span>       <span class="n">m</span> <span class="bp">⊗ₜ</span><span class="o">[</span><span class="n">R</span><span class="o">]</span> <span class="o">(</span><span class="n">op</span> <span class="n">t</span> <span class="bp">•</span> <span class="n">n</span><span class="o">)</span>
</code></pre></div>
<p>However, the latter case matches the former case with <code>s = op t</code>, and while probably gives a propositionally equal action in the cases where typeclasses match, certainly does not give a definitionally equal one.</p>
</blockquote>
<p>I think my message above was describing a more general case of this diamond?</p>
<p>Edit: nevermind, but this is another diamond to worry about.</p>



<a name="260325187"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/260325187" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Notification Bot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#260325187">(Nov 04 2021 at 19:54)</a>:</h4>
<p>This topic was moved by <span class="user-mention silent" data-user-id="310045">Eric Wieser</span> to <a class="stream-topic" data-stream-id="113488" href="/#narrow/stream/113488-general/topic/right.20actions.20by.20nat">#general &gt; right actions by nat</a></p>



<a name="260327299"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/260327299" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#260327299">(Nov 04 2021 at 20:09)</a>:</h4>
<p>(to clarify, just the nat diamond bit was)</p>



<a name="260327536"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/260327536" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#260327536">(Nov 04 2021 at 20:11)</a>:</h4>
<p>(deleted)</p>



<a name="260327728"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/260327728" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#260327728">(Nov 04 2021 at 20:12)</a>:</h4>
<p>It's still super hard to adapt that file. The annoying thing is that the most general conditions for the tensor product having a left action and having a right action are so asymmetric. There's one of the actions on <code>M</code> and <code>N</code> thats requirted to be a <code>distrib_mul_action</code> while the other one can be an arbitrary <code>has_scalar</code>, depending on whether it comes from <code>tensor_product.left_has_scalar</code> or from <code>tensor_product.right_has_scalar</code>, and these are of course not separated well in the current state of the file <span aria-label="tired" class="emoji emoji-1f614" role="img" title="tired">:tired:</span></p>



<a name="260340068"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/260340068" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#260340068">(Nov 04 2021 at 21:55)</a>:</h4>
<p>Currently thinking of just splitting the files. I had to separate <code>linear_algebra.tensor_product</code> and <code>linear_algebra.tensor_product_basis</code> a while ago anyway due to cyclic dependencies, might as well make a folder with a file for the defn, the left module structure coming from the left module <code>N</code>, the right module structure coming from the right module <code>M</code></p>



<a name="260382404"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/260382404" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#260382404">(Nov 05 2021 at 09:32)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110789">Jakob von Raumer</span> <a href="#narrow/stream/116395-maths/topic/ideals.20in.20non-comm.20rings/near/260327728">said</a>:</p>
<blockquote>
<p>It's still super hard to adapt that file. The annoying thing is that the most general conditions for the tensor product having a left action and having a right action are so asymmetric. There's one of the actions on <code>M</code> and <code>N</code> thats requirted to be a <code>distrib_mul_action</code> while the other one can be an arbitrary <code>has_scalar</code>, depending on whether it comes from <code>tensor_product.left_has_scalar</code> or from <code>tensor_product.right_has_scalar</code>, and these are of course not separated well in the current state of the file <span aria-label="tired" class="emoji emoji-1f614" role="img" title="tired">:tired:</span></p>
</blockquote>
<p>Oh right, that's exactly the diamond you were talking about, <span class="user-mention" data-user-id="310045">@Eric Wieser</span></p>



<a name="260382605"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/260382605" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#260382605">(Nov 05 2021 at 09:34)</a>:</h4>
<p>The overlap <em>could</em> be solved in the manner we solved additive vs multiplicative operations. Stating lemmas for <code>smul</code> explicitely and transfer them automatically to lemmas about <code>rsmul</code>...</p>



<a name="260775165"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/260775165" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#260775165">(Nov 09 2021 at 09:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/116395-maths/topic/ideals.20in.20non-comm.20rings/near/259783051">said</a>:</p>
<blockquote>
<p>Oh, we do not need that instance</p>
</blockquote>
<p>Are you sure about that? I still think in the commutative algebra world such an instance should be at least inferrable since user will not want to worry about which side of a module a commutative ring acts on?</p>



<a name="260781428"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/260781428" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#260781428">(Nov 09 2021 at 10:59)</a>:</h4>
<p>Yes, I'm pretty sure, because having that instance would create diamonds. Can you give an <code>example</code> of a case you're thinking of?</p>



<a name="260782821"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/260782821" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#260782821">(Nov 09 2021 at 11:14)</a>:</h4>
<p>I meant from a user point of view where the current approach would be to require <code>[has_scalar R M] [has_scalar (opposite R) M] [is_symmetric_smul R M]</code> every time, which does seem unwieldy. This would e.g. pop up every time one wants <code>(r • m) ⊗ₜ n = m ⊗ₜ (r • m)</code> instead of <code>(m &lt;• r) ⊗ₜ n = m ⊗ₜ (r • m)</code>. I'm not depp into commutative algebra, but I think that's what they want?</p>



<a name="260786404"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/260786404" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#260786404">(Nov 09 2021 at 11:49)</a>:</h4>
<p>Yes, they would indeed need to do that when working over an arbitrary R and M</p>



<a name="260790658"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/260790658" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#260790658">(Nov 09 2021 at 12:32)</a>:</h4>
<p>Maybe collecting the three instances into <code>has_symmetric_scalar R M</code> could be an option. It's just a use case that pops up a lot in mathlib</p>



<a name="260791088"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/260791088" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#260791088">(Nov 09 2021 at 12:36)</a>:</h4>
<p>That would be super annoying, because you'd then need <code>has_symmetric_mul_action</code>, <code>has_symmetric_distrib_mul_action</code>, <code>has_symmetric_module</code>, ...</p>



<a name="260791550"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/260791550" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#260791550">(Nov 09 2021 at 12:40)</a>:</h4>
<p>Hm, you're right</p>



<a name="260793960"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/260793960" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#260793960">(Nov 09 2021 at 13:02)</a>:</h4>
<p>Maybe all that users really care about is <code>has_symmetric_module</code>, but if we had that we'd still end up stating the lemmas in mathlib about <code>is_symmetric_smul</code> to be maximally general</p>



<a name="260982849"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/260982849" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#260982849">(Nov 10 2021 at 12:39)</a>:</h4>
<p>This is probably quite a useful instance, right?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="n">is_scalar_tower.is_symmetric_smul</span> <span class="o">{</span><span class="n">R</span> <span class="n">α</span><span class="o">}</span> <span class="o">[</span><span class="n">monoid</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">mul_action</span> <span class="n">R</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">has_scalar</span> <span class="n">R</span><span class="bp">ᵒᵖ</span> <span class="n">α</span><span class="o">]</span>
  <span class="o">[</span><span class="n">is_scalar_tower</span> <span class="n">R</span><span class="bp">ᵒᵖ</span> <span class="n">R</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span> <span class="n">is_symmetric_smul</span> <span class="n">R</span> <span class="n">α</span> <span class="o">:=</span>
<span class="o">⟨</span><span class="bp">λ</span> <span class="n">r</span> <span class="n">a</span><span class="o">,</span> <span class="kd">by</span> <span class="n">rw</span> <span class="o">[</span><span class="bp">←</span><span class="n">one_smul</span> <span class="n">R</span> <span class="n">a</span><span class="o">,</span> <span class="bp">←</span><span class="n">smul_assoc</span><span class="o">,</span> <span class="n">one_smul</span><span class="o">,</span> <span class="n">op_smul_eq_mul</span><span class="o">,</span> <span class="n">one_mul</span><span class="o">]⟩</span>
</code></pre></div>



<a name="260983091"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/260983091" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#260983091">(Nov 10 2021 at 12:41)</a>:</h4>
<p>Do you think it's okay for users who use right scalars to be confronted with the fact that if they want to prove something about all <code>r : Rᵒᵖ</code>, they'll be confronted with left scalars instead until they rewrite along <code>←op_unop</code>?</p>



<a name="261003257"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261003257" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261003257">(Nov 10 2021 at 15:10)</a>:</h4>
<p>I'm not sure; is it also true in the other direction?</p>



<a name="261017439"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261017439" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261017439">(Nov 10 2021 at 16:46)</a>:</h4>
<p>Only in the commutative case</p>



<a name="261017548"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261017548" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261017548">(Nov 10 2021 at 16:46)</a>:</h4>
<p>Are all the other assumptions equally strong, or can some be weakened?</p>



<a name="261018373"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261018373" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261018373">(Nov 10 2021 at 16:52)</a>:</h4>
<p>I think we need them all:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">instance</span> <span class="n">is_symmetric_smul.is_scalar_tower</span> <span class="o">{</span><span class="n">R</span> <span class="n">α</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_monoid</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">mul_action</span> <span class="n">R</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">has_scalar</span> <span class="n">R</span><span class="bp">ᵒᵖ</span> <span class="n">α</span><span class="o">]</span>
  <span class="o">[</span><span class="n">is_symmetric_smul</span> <span class="n">R</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span> <span class="n">is_scalar_tower</span> <span class="n">R</span><span class="bp">ᵒᵖ</span> <span class="n">R</span> <span class="n">α</span> <span class="o">:=</span>
<span class="o">⟨</span><span class="bp">λ</span> <span class="n">r'</span> <span class="n">r</span> <span class="n">a</span><span class="o">,</span> <span class="kd">by</span> <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="bp">←</span><span class="n">unop_smul_eq_smul</span> <span class="n">r'</span> <span class="o">(</span><span class="n">r</span> <span class="bp">•</span> <span class="n">a</span><span class="o">),</span> <span class="n">smul_smul</span><span class="o">],</span>
                <span class="n">change</span> <span class="o">(</span><span class="n">_</span> <span class="bp">*</span> <span class="n">_</span><span class="o">)</span> <span class="bp">•</span> <span class="n">_</span> <span class="bp">=</span> <span class="n">_</span><span class="o">,</span> <span class="n">rw</span> <span class="o">[</span><span class="n">mul_comm</span><span class="o">]</span> <span class="o">}</span> <span class="o">⟩</span>
</code></pre></div>



<a name="261019919"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261019919" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261019919">(Nov 10 2021 at 17:01)</a>:</h4>
<p>Then it sounds like the first instance is harmless, but I'm not sure how useful it is</p>



<a name="261144462"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261144462" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261144462">(Nov 11 2021 at 15:05)</a>:</h4>
<p>It wasn't harmless <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span></p>



<a name="261145160"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261145160" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261145160">(Nov 11 2021 at 15:10)</a>:</h4>
<p>I'm slowly making progress. One thing I'm not too happy about is that <code>tensor_product.left_has_scalar</code> in the commutative case automatically induces an action of <code>opposite R</code> (a right action on the tensor product by a right action on <code>M</code>), while it only induces a left action if <code>M</code> is really a bimodule. I think that's a bit confusing.</p>



<a name="261145432"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261145432" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261145432">(Nov 11 2021 at 15:12)</a>:</h4>
<p>If <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span> is commutative, do people still want asymmetric <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span>-<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span>-bimodules?</p>



<a name="261145772"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261145772" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261145772">(Nov 11 2021 at 15:15)</a>:</h4>
<p>Probably not, but remember you need to not create instance diamonds in places where you don't know if R is commutative</p>



<a name="261147176"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261147176" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261147176">(Nov 11 2021 at 15:26)</a>:</h4>
<p>Well, this is about deleting instances, not adding some...</p>



<a name="261148224"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261148224" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261148224">(Nov 11 2021 at 15:34)</a>:</h4>
<p>Which instance are you considering deleting?</p>



<a name="261148310"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261148310" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261148310">(Nov 11 2021 at 15:35)</a>:</h4>
<p><code>smul_comm_class R R M</code> for commutative <code>R</code>, that would solve the issue...</p>



<a name="261148430"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261148430" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261148430">(Nov 11 2021 at 15:36)</a>:</h4>
<p>...but probably cause other issues</p>



<a name="261148665"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261148665" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261148665">(Nov 11 2021 at 15:38)</a>:</h4>
<p>The alternative is to just make all the constructions in the commutative case depend on an instance <code>[is_symmetric_smul R M]</code>, which prevents us from ending up in the confusing situation I described above</p>



<a name="261162994"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261162994" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Külshammer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261162994">(Nov 11 2021 at 17:32)</a>:</h4>
<p>Regarding the question whether one wants asymmetric actions for R-R-bimodules even if R is commutative, definitely yes for some people. A typical example I'm not an expert on, but have seen is if R is a field of characteristic p and the right action is given by twisting with the Frobenius <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>↦</mo><msup><mi>x</mi><mi>p</mi></msup></mrow><annotation encoding="application/x-tex">x\mapsto x^p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.522em;vertical-align:-0.011em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">↦</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.664392em;vertical-align:0em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span></span></span></span></span></span></span></span> while the left action is regular. Another example I am more familiar with is to consider k-linear categories with finitely many objects as monoid objects in the category of L-L-bimodules where L is a product of fields, as many as objects in the category. Also the action here is not central.</p>



<a name="261236482"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261236482" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261236482">(Nov 12 2021 at 10:51)</a>:</h4>
<p>Okay, I now did some changes based on the following situation:</p>
<ul>
<li>In some situations, even when <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span> is commutative, we want a left action on <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><msub><mo>⊗</mo><mi>R</mi></msub><mi>N</mi></mrow><annotation encoding="application/x-tex">M \otimes_R N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin"><span class="mbin">⊗</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span> where <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span> is a potentially asymmetric <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span>-<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span>-bimodule.</li>
<li>In other cases we want to have <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mo stretchy="false">(</mo><mi>m</mi><mo>⊗</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">(</mo><mi>r</mi><mi>m</mi><mo stretchy="false">)</mo><mo>⊗</mo><mi>n</mi><mo stretchy="false">(</mo><mo>=</mo><mo stretchy="false">(</mo><mi>m</mi><mi>r</mi><mo stretchy="false">)</mo><mo>⊗</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mi>m</mi><mo>⊗</mo><mo stretchy="false">(</mo><mi>r</mi><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">r (m \otimes n) = (rm) \otimes n (= (mr) \otimes n) = m \otimes (rn)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⊗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">m</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⊗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">n</span><span class="mopen">(</span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">m</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⊗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⊗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>, this is encapsulated in the fact that we have an instance of <code>is_symmetric_smul</code> on the tensor product whenever we have one on <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span>.</li>
</ul>
<p>I do think this accomodates all users, but since some constructions, especially the UMP of the tensor product, seem to lie in the second case, this sometimes requires a ridiculous amount of instance arguments, like <a href="https://github.com/javra/mathlib/blob/noncomm_tensor_product/src/linear_algebra/tensor_product/left_action.lean#L347-L355">here</a>:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">theorem</span> <span class="n">ext_fourfold</span>
  <span class="o">[</span><span class="n">module</span> <span class="n">R</span><span class="bp">ᵒᵖ</span> <span class="o">(</span><span class="n">Q</span> <span class="bp">→ₗ</span><span class="o">[</span><span class="n">R</span><span class="o">]</span> <span class="n">S</span><span class="o">)]</span> <span class="o">[</span><span class="n">is_symmetric_smul</span> <span class="n">R</span> <span class="o">(</span><span class="n">Q</span> <span class="bp">→ₗ</span><span class="o">[</span><span class="n">R</span><span class="o">]</span> <span class="n">S</span><span class="o">)]</span>
  <span class="o">[</span><span class="n">module</span> <span class="n">R</span><span class="bp">ᵒᵖ</span> <span class="o">(</span><span class="n">P</span> <span class="bp">→ₗ</span><span class="o">[</span><span class="n">R</span><span class="o">]</span> <span class="n">Q</span> <span class="bp">→ₗ</span><span class="o">[</span><span class="n">R</span><span class="o">]</span> <span class="n">S</span><span class="o">)]</span> <span class="o">[</span><span class="n">is_symmetric_smul</span> <span class="n">R</span> <span class="o">(</span><span class="n">P</span> <span class="bp">→ₗ</span><span class="o">[</span><span class="n">R</span><span class="o">]</span> <span class="n">Q</span> <span class="bp">→ₗ</span><span class="o">[</span><span class="n">R</span><span class="o">]</span> <span class="n">S</span><span class="o">)]</span>
  <span class="o">{</span><span class="n">g</span> <span class="n">h</span> <span class="o">:</span> <span class="o">((</span><span class="n">M</span> <span class="bp">⊗</span><span class="o">[</span><span class="n">R</span><span class="o">]</span> <span class="n">N</span><span class="o">)</span> <span class="bp">⊗</span><span class="o">[</span><span class="n">R</span><span class="o">]</span> <span class="n">P</span><span class="o">)</span> <span class="bp">⊗</span><span class="o">[</span><span class="n">R</span><span class="o">]</span> <span class="n">Q</span> <span class="bp">→ₗ</span><span class="o">[</span><span class="n">R</span><span class="o">]</span> <span class="n">S</span><span class="o">}</span>
  <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">w</span> <span class="n">x</span> <span class="n">y</span> <span class="n">z</span><span class="o">,</span> <span class="n">g</span> <span class="o">(((</span><span class="n">w</span> <span class="bp">⊗ₜ</span> <span class="n">x</span><span class="o">)</span> <span class="bp">⊗ₜ</span> <span class="n">y</span><span class="o">)</span> <span class="bp">⊗ₜ</span> <span class="n">z</span><span class="o">)</span> <span class="bp">=</span> <span class="n">h</span> <span class="o">(((</span><span class="n">w</span> <span class="bp">⊗ₜ</span> <span class="n">x</span><span class="o">)</span> <span class="bp">⊗ₜ</span> <span class="n">y</span><span class="o">)</span> <span class="bp">⊗ₜ</span> <span class="n">z</span><span class="o">))</span> <span class="o">:</span> <span class="n">g</span> <span class="bp">=</span> <span class="n">h</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">ext</span> <span class="n">w</span> <span class="n">x</span> <span class="n">y</span> <span class="n">z</span><span class="o">,</span>
  <span class="n">exact</span> <span class="n">H</span> <span class="n">w</span> <span class="n">x</span> <span class="n">y</span> <span class="n">z</span><span class="o">,</span>
<span class="kd">end</span>
</code></pre></div>
<p>What's your thoughts on this?</p>



<a name="261620446"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261620446" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261620446">(Nov 16 2021 at 10:21)</a>:</h4>
<p>So the current state is <a href="https://github.com/javra/mathlib/tree/noncomm_tensor_product/src/linear_algebra/tensor_product">this</a>. There's just one lemma missing from the old file, which requires me to come up with a good solution on how to derive <code>has_scalar (opposite (units S)) M</code> from <code>has_scalar (opposite S) M</code>(probably can't avoid to do it manually)...</p>
<p>Do you think I should PR this already to get more people to look at it? I'm afraid of already putting too much time in this...</p>



<a name="261620641"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261620641" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261620641">(Nov 16 2021 at 10:23)</a>:</h4>
<p><span class="user-mention" data-user-id="110789">@Jakob von Raumer</span> I see you're working from a fork. Are you aware that you can request permission to create branches on the Mathlib repo and save yourself the overhead of managing a fork?</p>



<a name="261621034"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261621034" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261621034">(Nov 16 2021 at 10:27)</a>:</h4>
<p>Glancing at your work, I see it already comprises over 1000 lines. The code looks great so I'm sure we'll be able to get this merged but this is a large amount of code so the sooner you start PRing the better. For example the results about bases of tensor products (which I actually wanted for something else recently) look like a PR on their own.</p>



<a name="261621037"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261621037" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261621037">(Nov 16 2021 at 10:27)</a>:</h4>
<p>Yes, I do have the permission</p>



<a name="261621053"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261621053" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261621053">(Nov 16 2021 at 10:27)</a>:</h4>
<p>OK cool, if you prefer a fork then that's fine too!</p>



<a name="261621172"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261621172" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261621172">(Nov 16 2021 at 10:28)</a>:</h4>
<p><span class="user-mention silent" data-user-id="240862">Oliver Nash</span> <a href="#narrow/stream/116395-maths/topic/ideals.20in.20non-comm.20rings/near/261621034">said</a>:</p>
<blockquote>
<p>Glancing at your work, I see it already comprises over 1000 lines. The code looks great so I'm sure we'll be able to get this merged but this is a large amount of code so the sooner you start PRing the better. For example the results about bases of tensor products (which I actually wanted for something else recently) look like a PR on their own.</p>
</blockquote>
<p>None of this is new, it's just the old <code>linear_algebra.tensor_product</code> and <code>linear_algebra.tensor_product_basis</code> reorganized and partly generalised to non-commutative rings. Some proofs had to be adapted by most of it is just copied over.</p>



<a name="261621275"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261621275" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261621275">(Nov 16 2021 at 10:30)</a>:</h4>
<p>Ah OK I see. I couldn't easily figure out how to get a diff and made the wrong assumption.</p>



<a name="261621370"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261621370" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261621370">(Nov 16 2021 at 10:30)</a>:</h4>
<p>Incidentally since we're finally talking seriously about tensor products over non-commutative rings, is anyone thinking about the corresponding results for linear maps?</p>



<a name="261621400"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261621400" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261621400">(Nov 16 2021 at 10:30)</a>:</h4>
<p>E.g.,</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">linear_algebra.basic</span>

<span class="kd">variables</span> <span class="o">(</span><span class="n">R</span> <span class="n">M</span> <span class="n">N</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">R</span><span class="o">]</span>
<span class="kd">variables</span> <span class="o">[</span><span class="n">add_comm_monoid</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">module</span> <span class="n">R</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">add_comm_monoid</span> <span class="n">N</span><span class="o">]</span> <span class="o">[</span><span class="n">module</span> <span class="n">R</span> <span class="n">N</span><span class="o">]</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">add_comm_monoid</span> <span class="o">(</span><span class="n">M</span> <span class="bp">→ₗ</span><span class="o">[</span><span class="n">R</span><span class="o">]</span> <span class="n">N</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">apply_instance</span> <span class="c1">-- works</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">module</span> <span class="n">R</span> <span class="o">(</span><span class="n">M</span> <span class="bp">→ₗ</span><span class="o">[</span><span class="n">R</span><span class="o">]</span> <span class="n">N</span><span class="o">)</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">apply_instance</span> <span class="c1">-- fails because `R` not commutative!</span>
</code></pre></div>



<a name="261621444"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261621444" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261621444">(Nov 16 2021 at 10:31)</a>:</h4>
<p>I wondered if this would come up as part of the tensor product work. Did it?</p>



<a name="261621903"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261621903" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261621903">(Nov 16 2021 at 10:36)</a>:</h4>
<p>The fact that these are missing actually prevents some generalisations!</p>



<a name="261622764"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261622764" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261622764">(Nov 16 2021 at 10:45)</a>:</h4>
<p>The current implementation doesn't really depend on <code>R</code> being commutative, but having a commutative action on <code>N</code>.</p>



<a name="261622833"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261622833" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261622833">(Nov 16 2021 at 10:45)</a>:</h4>
<p>Yes but if <code>R</code> is not commutative the definition will not provide a linear map.</p>



<a name="261622854"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261622854" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261622854">(Nov 16 2021 at 10:46)</a>:</h4>
<p>Oh sorry, misread your remark.</p>



<a name="261623472"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261623472" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261623472">(Nov 16 2021 at 10:52)</a>:</h4>
<p>Made <a href="https://github.com/leanprover-community/mathlib/pull/10345">a pull request</a>.</p>



<a name="261623550"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261623550" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261623550">(Nov 16 2021 at 10:53)</a>:</h4>
<p>Mathematically, if <code>R</code>, <code>S</code>, <code>T</code> are rings, <code>M</code> is an <code>(R, S)</code>-bimodule, and <code>N</code> is an <code>(R, T)</code>-bimodule then we can speak of <code>R</code>-linear maps <code>M → N</code> and these are an <code>(S, T)</code>-bimodule. I'd love to have this in Mathlib.</p>



<a name="261623648"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261623648" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261623648">(Nov 16 2021 at 10:54)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110789">Jakob von Raumer</span> <a href="#narrow/stream/116395-maths/topic/ideals.20in.20non-comm.20rings/near/261623472">said</a>:</p>
<blockquote>
<p>Made <a href="https://github.com/leanprover-community/mathlib/pull/10345">a pull request</a>.</p>
</blockquote>
<p>Thanks! I'll review this evening.</p>



<a name="261623855"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261623855" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261623855">(Nov 16 2021 at 10:56)</a>:</h4>
<p><span class="user-mention silent" data-user-id="240862">Oliver Nash</span> <a href="#narrow/stream/116395-maths/topic/ideals.20in.20non-comm.20rings/near/261623550">said</a>:</p>
<blockquote>
<p>Mathematically, if <code>R</code>, <code>S</code>, <code>T</code> are rings, <code>M</code> is an <code>(R, S)</code>-bimodule, and <code>N</code> is an <code>(R, T)</code>-bimodule then we can speak of <code>R</code>-linear maps <code>M → N</code> and these are an <code>(S, T)</code>-bimodule. I'd love to have this in Mathlib.</p>
</blockquote>
<p>Isn't this <a href="https://github.com/leanprover-community/mathlib/blob/master/src/algebra/module/linear_map.lean#L607">here</a>?</p>



<a name="261623959"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261623959" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261623959">(Nov 16 2021 at 10:57)</a>:</h4>
<p>Ah, nevermind, that's weaker than what you said.</p>



<a name="261624081"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261624081" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261624081">(Nov 16 2021 at 10:58)</a>:</h4>
<p>I'm definitely a bit of out date as I haven't touched this stuff in ages. We might be much closer to this than I realise.</p>



<a name="261624520"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261624520" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261624520">(Nov 16 2021 at 11:01)</a>:</h4>
<p>Staring at it a bit more it does use the left action on both the domain and the codomain, which prevents your generalisation, it's roughly the same problem as with the tensor product.</p>



<a name="261624598"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261624598" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261624598">(Nov 16 2021 at 11:02)</a>:</h4>
<p>(Which I guess shouldn't be surprising with them being adjoints and all...)</p>



<a name="261624728"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261624728" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261624728">(Nov 16 2021 at 11:03)</a>:</h4>
<p>I suspected this might be a prerequisite for tensor products but perhaps not.</p>



<a name="261624980"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261624980" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261624980">(Nov 16 2021 at 11:04)</a>:</h4>
<p>I guess it's a prerequesite from freeing the lemmas which mix tensor products and linear maps from the commutativity presumption, which I haven't done. Maybe it should be done and both go in the same huge PR <span aria-label="scared" class="emoji emoji-1f628" role="img" title="scared">:scared:</span></p>



<a name="261625256"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261625256" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261625256">(Nov 16 2021 at 11:07)</a>:</h4>
<p>Huge PRs should be a last resort. I've often been surprised at how easy it is to package up something like this into smaller pieces.</p>



<a name="261625353"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261625353" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261625353">(Nov 16 2021 at 11:07)</a>:</h4>
<p>Btw this generalisation is well worth fighting for and very valuable. I suspect many people here are quite excited about the theory of bimodules coming to life.</p>



<a name="261626255"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261626255" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261626255">(Nov 16 2021 at 11:15)</a>:</h4>
<p>Thanks for the encouragement! this actually came out of me wanting to teach Lean to some non-commutative algebraists, and I was a bit suprised about how much of mathlib relies on commutativity.</p>



<a name="261627874"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261627874" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261627874">(Nov 16 2021 at 11:29)</a>:</h4>
<p>In order to fix the files depending on the tensor product: Is there a way to get a list of all files that depend on a certain file by transitivity?</p>



<a name="261628226"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261628226" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261628226">(Nov 16 2021 at 11:33)</a>:</h4>
<p>This is probably possible with <a href="https://github.com/leanprover-community/leancrawler">https://github.com/leanprover-community/leancrawler</a> but I think you'll probably end up with a far bigger list than you want because if one little lemma in a file low down in the dependency tree uses tensor products you'll get a huge chunk of Mathlib.</p>



<a name="261628606"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261628606" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261628606">(Nov 16 2021 at 11:37)</a>:</h4>
<p>You can also use leanproject for this and run some tools on the output of <a href="https://leanprover-community.github.io/leanproject.html#import-graphs">https://leanprover-community.github.io/leanproject.html#import-graphs</a></p>



<a name="261628882"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261628882" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261628882">(Nov 16 2021 at 11:40)</a>:</h4>
<p>If you tell me a specific list of filenames I can do this for you too fairly easily, me and Johan have some WIP tools that will help with this, and I'm happy to run them</p>



<a name="261633894"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261633894" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261633894">(Nov 16 2021 at 12:36)</a>:</h4>
<p>It's just <code>linear_algebra.tensor_product</code> on the current master branch</p>



<a name="261634425"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261634425" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261634425">(Nov 16 2021 at 12:42)</a>:</h4>
<p>I think that list is way too big to do anything useful with, there are 590 files there</p>



<a name="261634440"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261634440" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261634440">(Nov 16 2021 at 12:42)</a>:</h4>
<p>I can't even paste it into a zulip message</p>



<a name="261634539"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261634539" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261634539">(Nov 16 2021 at 12:43)</a>:</h4>
<p><a href="/user_uploads/3121/pc9IqOI8iJ5ZTNUvYzxpjraj/tensorlist">tensorlist</a></p>



<a name="261634621"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261634621" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261634621">(Nov 16 2021 at 12:44)</a>:</h4>
<p>Probably you're best off just letting <code>lean --make src</code> or CI tell you what breaks</p>



<a name="261635435"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261635435" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261635435">(Nov 16 2021 at 12:52)</a>:</h4>
<p>That's what would have been my plan otherwise. I guess it does trigger a lot of big recompilations to just start at at random spot, though. Maybe the best heuristic is to start with the direct descendants and hope that most of the indirect imports don't break.</p>



<a name="261635726"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261635726" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex J. Best <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261635726">(Nov 16 2021 at 12:54)</a>:</h4>
<p>Those are:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code> <span class="n">linear_algebra.direct_sum.tensor_product</span><span class="o">,</span>
 <span class="n">algebra.category.Module.monoidal</span><span class="o">,</span>
 <span class="n">topology.algebra.affine</span><span class="o">,</span>
 <span class="n">linear_algebra.affine_space.affine_equiv</span><span class="o">,</span>
 <span class="n">algebra.algebra.bilinear</span><span class="o">,</span>
 <span class="n">topology.algebra.continuous_affine_map</span><span class="o">,</span>
 <span class="n">linear_algebra.multilinear.tensor_product</span>
</code></pre></div>
<p>I guess grep can also find this list though!</p>



<a name="261635989"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261635989" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261635989">(Nov 16 2021 at 12:56)</a>:</h4>
<p>The mathlibs docs show them as well :)</p>



<a name="261702246"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261702246" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261702246">(Nov 16 2021 at 20:29)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110789">Jakob von Raumer</span> <a href="#narrow/stream/116395-maths/topic/ideals.20in.20non-comm.20rings/near/261626255">said</a>:</p>
<blockquote>
<p>Thanks for the encouragement! this actually came out of me wanting to teach Lean to some non-commutative algebraists, and I was a bit suprised about how much of mathlib relies on commutativity.</p>
</blockquote>
<p>Certain people wandering around on zulip, pretending they've never met a noncommutative ring...</p>



<a name="261706956"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261706956" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261706956">(Nov 16 2021 at 21:07)</a>:</h4>
<p>One thing I noticed is that at many points it would be more elegant to separate the lemmas about commutative rings from the non-commutative ones, if e.g. instead of <code>semiring R</code> we would assume <code>comm_semigroup R</code> and <code>the_other_ring_axioms R</code> separately, with the drawback that this would make usage more verbose.<br>
<span class="user-mention" data-user-id="110024">@Sebastian Ullrich</span> mentioned that in Lean 4 it should be possible to infer one of these from the other <strong>and vice versa</strong> which seems to make separating the assumptions more attractive...</p>



<a name="261709445"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261709445" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261709445">(Nov 16 2021 at 21:29)</a>:</h4>
<p>Commutative ring theory has been one of the success stories of mathlib.</p>



<a name="261709786"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261709786" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261709786">(Nov 16 2021 at 21:32)</a>:</h4>
<p>I wonder whether this would have been the case if we'd tried to take the noncommutative story into account at the time. Historically what happened was that very early on I was pushing for schemes, a story where we needed a lot of commutative ring stuff, and there was nobody arguing for the noncommutative case at the time so me and my minions just defined ideals of commutative rings and then prime ideals etc etc and just kept PRing stuff</p>



<a name="261710097"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261710097" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261710097">(Nov 16 2021 at 21:34)</a>:</h4>
<p>It was pointed out that there would be trouble ahead but I could never get straight from the noncommutative people whether ideal was supposed to mean left ideal or bi-ideal so I just kept pushing the commutative story, and then other people showed up and joined in (Justus Springer, Devon Tuma, the Berkeley graduate students, others I've forgotten, and now the new crowd doing products of schemes) and the commutative story just kept growing</p>



<a name="261711463"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261711463" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261711463">(Nov 16 2021 at 21:46)</a>:</h4>
<p>Kevin has a good point. I think a great way to build a good library is to build an extremely tall and pointy lopsided one, and then hope that people come along to stop it from falling over. :-)</p>



<a name="261711523"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261711523" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261711523">(Nov 16 2021 at 21:47)</a>:</h4>
<p>Happily in mathlib that happens.</p>



<a name="261711700"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261711700" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261711700">(Nov 16 2021 at 21:49)</a>:</h4>
<p>This happens only if the tower builders PR to mathlib... <span aria-label="rolling eyes" class="emoji emoji-1f644" role="img" title="rolling eyes">:rolling_eyes:</span></p>



<a name="261711714"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261711714" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261711714">(Nov 16 2021 at 21:49)</a>:</h4>
<p>I do genuinely feel guilty that this approach has caused trouble down the line, especially as I was warned that this would happen, but ultimately as Scott says we made some really tall stuff and that has had advantages because it got us noticed.</p>



<a name="261712061"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261712061" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261712061">(Nov 16 2021 at 21:52)</a>:</h4>
<p>(I wasn't even counting non-mathlib stuff as part of the tower. They are just ephemeral dreams. :-)</p>



<a name="261712145"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261712145" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261712145">(Nov 16 2021 at 21:53)</a>:</h4>
<p>I know, I was only trying to remind the perfectoid spaces projects authors that they should feel guilty.</p>



<a name="261712202"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261712202" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261712202">(Nov 16 2021 at 21:53)</a>:</h4>
<p>But I also feel very attacked with my two 5k lines branches.</p>



<a name="261712404"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261712404" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261712404">(Nov 16 2021 at 21:55)</a>:</h4>
<p>Hopefully "attacked" in the most constructive and loving way. :-) Otherwise, sorry!</p>



<a name="261713251"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261713251" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261713251">(Nov 16 2021 at 22:01)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/116395-maths/topic/ideals.20in.20non-comm.20rings/near/261710097">said</a>:</p>
<blockquote>
<p>It was pointed out that there would be trouble ahead but I could never get straight from the noncommutative people whether ideal was supposed to mean left ideal or bi-ideal so I just kept pushing the commutative story, and then other people showed up and joined in (Justus Springer, Devon Tuma, the Berkeley graduate students, others I've forgotten, and now the new crowd doing products of schemes) and the commutative story just kept growing</p>
</blockquote>
<p>I will definitvely quiz additional non-commutative people on their customs :D</p>



<a name="261713482"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261713482" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261713482">(Nov 16 2021 at 22:03)</a>:</h4>
<p>Oh thanks!</p>



<a name="261794895"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261794895" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261794895">(Nov 17 2021 at 14:54)</a>:</h4>
<p>I need to write a version of the bundled <code>Module</code> with a symmetric action (i.e. <code>Module</code> extended by an <code>is_symmetric_smul</code>). Any naming ideas?</p>



<a name="261797532"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261797532" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261797532">(Nov 17 2021 at 15:12)</a>:</h4>
<p><code>SymmetricBiModule</code>?</p>



<a name="261943834"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261943834" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261943834">(Nov 18 2021 at 15:39)</a>:</h4>
<p>How about this: I shelve the current PR for now and do the following PRs separately and in order:</p>
<ol>
<li>Create a PR fixing the use of modules towards more compatibility with non-comm algebra, meaning replacing occurrences of <code>module R M</code> by a symmetric  <code>R</code>-<code>R</code>-action or (weaker) an <code>R</code>-<code>R</code>-bimodule wherever the non-comm generalisation would currently require it.</li>
<li>Generalise the module structure on linear maps in the way <span class="user-mention" data-user-id="240862">@Oliver Nash</span> proposed it above.</li>
<li>Generalise the tensor product (the current PR).</li>
</ol>



<a name="261944352"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261944352" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261944352">(Nov 18 2021 at 15:42)</a>:</h4>
<p>Will this mean that whenever an undergraduate wants to talk about a vector space they'll have to say a k-k-bimodule?</p>



<a name="261944355"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261944355" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261944355">(Nov 18 2021 at 15:42)</a>:</h4>
<p>This sounds like a very good plan to me except that I don't have a clear picture of what you have in mind for 1. Is there a simple example of such a fix?</p>



<a name="261944379"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261944379" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261944379">(Nov 18 2021 at 15:42)</a>:</h4>
<p>(Or rather of such a situation, requiring a fix.)</p>



<a name="261944531"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261944531" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261944531">(Nov 18 2021 at 15:43)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110038">Kevin Buzzard</span> <a href="#narrow/stream/116395-maths/topic/ideals.20in.20non-comm.20rings/near/261944352">said</a>:</p>
<blockquote>
<p>Will this mean that whenever an undergraduate wants to talk about a vector space they'll have to say a k-k-bimodule?</p>
</blockquote>
<p>Would <code>symm_module k V</code> be acceptable?</p>



<a name="261944766"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261944766" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261944766">(Nov 18 2021 at 15:45)</a>:</h4>
<p>I presume we could have typeclass instances that provide <code>symm_module k V</code> from <code>module k V</code> + <code>comm_ring k</code>?</p>



<a name="261945130"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261945130" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261945130">(Nov 18 2021 at 15:47)</a>:</h4>
<p><span class="user-mention silent" data-user-id="240862">Oliver Nash</span> <a href="#narrow/stream/116395-maths/topic/ideals.20in.20non-comm.20rings/near/261944379">said</a>:</p>
<blockquote>
<p>(Or rather of such a situation, requiring a fix.)</p>
</blockquote>
<p>Well a good part of this entire thread is about such a situation: Every point where <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mo stretchy="false">(</mo><mi>m</mi><mo>⊗</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">r (m \otimes n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> would mean <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>r</mi><mi>m</mi><mo stretchy="false">)</mo><mo>⊗</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">(r m) \otimes n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">m</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> instead of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>m</mi><mi>r</mi><mo stretchy="false">)</mo><mo>⊗</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">(m r) \otimes n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">m</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span>, for example, and by exension any situation which requires the tensor product of two <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span>-modules to be an <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span>-module.</p>



<a name="261945363"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261945363" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261945363">(Nov 18 2021 at 15:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="240862">Oliver Nash</span> <a href="#narrow/stream/116395-maths/topic/ideals.20in.20non-comm.20rings/near/261944766">said</a>:</p>
<blockquote>
<p>I presume we could have typeclass instances that provide <code>symm_module k V</code> from <code>module k V</code> + <code>comm_ring k</code>?</p>
</blockquote>
<p>It would be a great help in the usage if we could have such an instance. <span class="user-mention" data-user-id="317890">@Julian Külshammer</span> above said, that we might have situations, even with commutative <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>, where the canonical left and right action don't coincide. So if at all, we'd make your proposed instance low priority?</p>



<a name="261945818"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261945818" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261945818">(Nov 18 2021 at 15:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110789">Jakob von Raumer</span> <a href="#narrow/stream/116395-maths/topic/ideals.20in.20non-comm.20rings/near/261945363">said</a>:</p>
<blockquote>
<p>It would be a great help in the usage if we could have such an instance. <span class="user-mention silent" data-user-id="317890">Julian Külshammer</span> above said, that we might have situations, even with commutative <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>, where the canonical left and right action don't coincide. So if at all, we'd make your proposed instance low priority?</p>
</blockquote>
<p>Hmm this is a good point. I'm less confident we could do this and it would indeed require some care with priorities.</p>



<a name="261945930"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261945930" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261945930">(Nov 18 2021 at 15:52)</a>:</h4>
<p>(It would make all the fixes needed for the current tensor product PR tremendously easier ;))</p>



<a name="261946531"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261946531" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261946531">(Nov 18 2021 at 15:56)</a>:</h4>
<p>(And the usage by people like <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span>'s linear algebra students, if <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> is commutative)</p>



<a name="261946696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261946696" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261946696">(Nov 18 2021 at 15:57)</a>:</h4>
<p>Wait though, why won't we still have just plain left modules still?</p>



<a name="261947432"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261947432" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261947432">(Nov 18 2021 at 16:01)</a>:</h4>
<p>We will, we just don't have the instance of their tensor product or the space of linear maps being a plain left module.</p>



<a name="261947452"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261947452" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261947452">(Nov 18 2021 at 16:01)</a>:</h4>
<p>Right!</p>



<a name="261947606"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261947606" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261947606">(Nov 18 2021 at 16:02)</a>:</h4>
<p>OK so the problem to be solved should only be at the level of the instances and not at the types.</p>



<a name="261947850"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261947850" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261947850">(Nov 18 2021 at 16:03)</a>:</h4>
<p>I think this should work, subject to carefully-chosen instance priorities.</p>



<a name="261948061"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261948061" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261948061">(Nov 18 2021 at 16:04)</a>:</h4>
<p>The core of the problem is that we have two different conventions in the commutative and the non-commutative world, and the best way to solve the dilemma seems to be to say "okay, let's assume the commutative case as a special situation of bimodules where needed"</p>



<a name="261948120"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261948120" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261948120">(Nov 18 2021 at 16:05)</a>:</h4>
<p><span class="user-mention silent" data-user-id="240862">Oliver Nash</span> <a href="#narrow/stream/116395-maths/topic/ideals.20in.20non-comm.20rings/near/261947850">said</a>:</p>
<blockquote>
<p>I think this should work, subject to carefully-chosen instance priorities.</p>
</blockquote>
<p>Do you mean the whole thing or the symmetry-instance in the commutative case?</p>



<a name="261948199"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261948199" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261948199">(Nov 18 2021 at 16:05)</a>:</h4>
<p>I meant the whole thing but of course it's hard to really be sure.</p>



<a name="261948757"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261948757" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261948757">(Nov 18 2021 at 16:08)</a>:</h4>
<p>Something concrete that needs to be made symmetric in order for the changes <code>linear_algebra.tensor_product</code> to go through is to have the <code>ℤ</code> action on a module to be symmetric, since otherwise <code>compatible_smul.int</code> and thus the <code>ℤ</code> actiono n the tensor product doesn't work.</p>



<a name="261949811"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261949811" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261949811">(Nov 18 2021 at 16:15)</a>:</h4>
<p>I'm not precisely sure what this means. If <code>m</code>, <code>n</code> are elements of additive groups <code>M</code>, <code>N</code>, then there are three different things that are all mathematically equal:</p>
<ul>
<li><code>m ⊗ₜ n + m ⊗ₜ n + ... + m ⊗ₜ n</code></li>
<li><code>m ⊗ₜ (n + n + ... + n)</code></li>
<li><code>(m + m + ... + m) ⊗ₜ n</code></li>
</ul>
<p>and at most two of these can be definitionally equal. Is this related to your question?</p>



<a name="261950606"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261950606" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261950606">(Nov 18 2021 at 16:21)</a>:</h4>
<p>Not entirely. The definitional equality will always be between the first and the third term. It's just that this equality comes out of the general statement of "if <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span> is an <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span></span>-<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span>-bimodule, then <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><msub><mo>⊗</mo><mi>R</mi></msub><mi>N</mi></mrow><annotation encoding="application/x-tex">M \otimes_R N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin"><span class="mbin">⊗</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span> is an <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span></span>-module", so we need <code>ℤ</code> to play the role of both <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span> and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span></span> and thus act symmetrically on the left and on the right of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span>.</p>



<a name="261950851"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261950851" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261950851">(Nov 18 2021 at 16:22)</a>:</h4>
<p>I haven't been following this discussion closely but it seems like this encoding using <code>opposite</code> is causing a lot of trouble, how about having <code>left_module</code>, <code>right_module</code> with separate operations, <code>bimodule</code>, and then <code>module R M</code> extends <code>bimodule R R M</code> with the "symmetry" compatibility law?</p>



<a name="261951107"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261951107" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261951107">(Nov 18 2021 at 16:24)</a>:</h4>
<p>this is a slightly weird definition in the commutative case but it's similar to "a metric space has a metric and a topology that agree"</p>



<a name="261951441"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261951441" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261951441">(Nov 18 2021 at 16:26)</a>:</h4>
<p>The intuitive argument against that for me was that it is a way bigger change. But maybe that's not a good argument.</p>



<a name="261951575"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261951575" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261951575">(Nov 18 2021 at 16:27)</a>:</h4>
<p>The annoying thing then is: <code>module R M</code> and <code>left_module R M</code> are equivalent and differ only by notation. For which one do we proof all the lemmas about arbitrary modules?</p>



<a name="261951710"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261951710" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261951710">(Nov 18 2021 at 16:28)</a>:</h4>
<p><code>module</code> would be only for commutative rings</p>



<a name="261951909"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261951909" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261951909">(Nov 18 2021 at 16:29)</a>:</h4>
<p>That then complicates the cases <span class="user-mention" data-user-id="317890">@Julian Külshammer</span> mentions above, where we do want differeent left and right actions even if the ring is commutative.</p>



<a name="261952005"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261952005" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261952005">(Nov 18 2021 at 16:30)</a>:</h4>
<p>I don't think so, they'd just be <code>bimodule</code>s.</p>



<a name="261952247"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261952247" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261952247">(Nov 18 2021 at 16:31)</a>:</h4>
<p>I didn't really answer your question but my intended answer would be something like "if you're doing commutative algebra, use <code>module</code> otherwise use <code>left_module</code>"</p>



<a name="261952447"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261952447" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261952447">(Nov 18 2021 at 16:33)</a>:</h4>
<p>There's probably problems with this idea because I haven't thought this through at all</p>



<a name="261952567"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261952567" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261952567">(Nov 18 2021 at 16:34)</a>:</h4>
<p><span class="user-mention silent" data-user-id="240862">Oliver Nash</span> <a href="#narrow/stream/116395-maths/topic/ideals.20in.20non-comm.20rings/near/261952005">said</a>:</p>
<blockquote>
<p>I don't think so, they'd just be <code>bimodule</code>s.</p>
</blockquote>
<p>But if both the left and the right action are somewhat canonical structures on some <code>M</code>, each will make <code>M</code> a module and to get the desired bimodule, we'll have to locally downgrade them to a <code>left_module</code> and a <code>right_module</code> respectively, right?</p>



<a name="261952724"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261952724" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261952724">(Nov 18 2021 at 16:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110032">Reid Barton</span> <a href="#narrow/stream/116395-maths/topic/ideals.20in.20non-comm.20rings/near/261952447">said</a>:</p>
<blockquote>
<p>There's probably problems with this idea because I haven't thought this through at all</p>
</blockquote>
<p>I think it would be the preferred idea if there was less overlap between non-commutative and commutative algebra. The overlap, I guess, is where things can go wrong.</p>



<a name="261952750"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261952750" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261952750">(Nov 18 2021 at 16:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110032">Reid Barton</span> <a href="#narrow/stream/116395-maths/topic/ideals.20in.20non-comm.20rings/near/261952447">said</a>:</p>
<blockquote>
<p>There's probably problems with this idea because I haven't thought this through at all</p>
</blockquote>
<p>I think it's very hard / impossible to foresee what problems any approach may encounter. Your suggestion has the very tempting sociological advantage that it's how most / all of us actually think about this.</p>



<a name="261952953"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261952953" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261952953">(Nov 18 2021 at 16:37)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110032">Reid Barton</span> <a href="#narrow/stream/116395-maths/topic/ideals.20in.20non-comm.20rings/near/261950851">said</a>:</p>
<blockquote>
<p>I haven't been following this discussion closely but it seems like this encoding using <code>opposite</code> is causing a lot of trouble, how about having <code>left_module</code>, <code>right_module</code> with separate operations, <code>bimodule</code>, and then <code>module R M</code> extends <code>bimodule R R M</code> with the "symmetry" compatibility law?</p>
</blockquote>
<p>This raises the question on whether we'd need a transfer command to create <code>right_module</code> lemmas from left module lemmas?</p>



<a name="261953425"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261953425" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261953425">(Nov 18 2021 at 16:40)</a>:</h4>
<p>Maybe I should head over to <a class="stream" data-stream-id="287929" href="/#narrow/stream/287929-mathlib4">#mathlib4</a> and ask whether <code>to_additive</code> has been ported already...</p>



<a name="261953645"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261953645" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261953645">(Nov 18 2021 at 16:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110789">Jakob von Raumer</span> <a href="#narrow/stream/116395-maths/topic/ideals.20in.20non-comm.20rings/near/261952567">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="240862">Oliver Nash</span> <a href="#narrow/stream/116395-maths/topic/ideals.20in.20non-comm.20rings/near/261952005">said</a>:</p>
<blockquote>
<p>I don't think so, they'd just be <code>bimodule</code>s.</p>
</blockquote>
<p>But if both the left and the right action are somewhat canonical structures on some <code>M</code>, each will make <code>M</code> a module and to get the desired bimodule, we'll have to locally downgrade them to a <code>left_module</code> and a <code>right_module</code> respectively, right?</p>
</blockquote>
<p>I don't think this one is a problem in practice, basically because the math situation is the same. You just won't define a <code>module</code> structure for one or both of the actions</p>



<a name="261954114"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261954114" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261954114">(Nov 18 2021 at 16:46)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110032">Reid Barton</span> <a href="#narrow/stream/116395-maths/topic/ideals.20in.20non-comm.20rings/near/261953645">said</a>:</p>
<blockquote>
<p>I don't think this one is a problem in practice, basically because the math situation is the same. You just won't define a <code>module</code> structure for one or both of the actions</p>
</blockquote>
<p>If it's not already there. Maybe you first want to tread each action separately and happily use <code>module</code> before, in a more specialised setting, wanting to use both. But yes, there are ways around this and it might be a super rare occasion anyway.</p>



<a name="261954257"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261954257" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261954257">(Nov 18 2021 at 16:46)</a>:</h4>
<p><code>M</code> would be something you just created to describe this specific object, though.</p>



<a name="261954277"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261954277" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261954277">(Nov 18 2021 at 16:47)</a>:</h4>
<p>So the instances aren't there</p>



<a name="261954442"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261954442" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261954442">(Nov 18 2021 at 16:48)</a>:</h4>
<p>Like one construction is you have a complex vector space <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>V</mi></mrow><annotation encoding="application/x-tex">V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span> and you let <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>z</mi></mrow><annotation encoding="application/x-tex">z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span></span></span></span> act by <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>z</mi></mrow><annotation encoding="application/x-tex">z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span></span></span></span> on the left and by <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>z</mi><mo stretchy="true">‾</mo></mover></mrow><annotation encoding="application/x-tex">\overline{z}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6306em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6306em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.04398em;">z</span></span></span><span style="top:-3.5506em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span></span></span></span> on the right. You need a new name for this guy no matter what, and that's what gets the <code>bimodule</code> instance</p>



<a name="261954712"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261954712" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261954712">(Nov 18 2021 at 16:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="317890">Julian Külshammer</span> <a href="#narrow/stream/116395-maths/topic/ideals.20in.20non-comm.20rings/near/261162994">said</a>:</p>
<blockquote>
<p>A typical example I'm not an expert on, but have seen is if R is a field of characteristic p and the right action is given by twisting with the Frobenius <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>↦</mo><msup><mi>x</mi><mi>p</mi></msup></mrow><annotation encoding="application/x-tex">x\mapsto x^p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.522em;vertical-align:-0.011em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">↦</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6644em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span></span></span></span></span></span></span></span> while the left action is regular.</p>
</blockquote>
<p>Here maybe the left action is the one that's already a full module already, right?</p>



<a name="261954895"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261954895" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261954895">(Nov 18 2021 at 16:50)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110032">Reid Barton</span> <a href="#narrow/stream/116395-maths/topic/ideals.20in.20non-comm.20rings/near/261954442">said</a>:</p>
<blockquote>
<p>Like one construction is you have a complex vector space <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>V</mi></mrow><annotation encoding="application/x-tex">V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span> and you let <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>z</mi></mrow><annotation encoding="application/x-tex">z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span></span></span></span> act by <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>z</mi></mrow><annotation encoding="application/x-tex">z</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span></span></span></span> on the left and by <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mi>z</mi><mo stretchy="true">‾</mo></mover></mrow><annotation encoding="application/x-tex">\overline{z}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6306em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6306em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.04398em;">z</span></span></span><span style="top:-3.5506em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span></span></span></span> on the right. You need a new name for this guy no matter what, and that's what gets the <code>bimodule</code> instance</p>
</blockquote>
<p>Ah, okay, yes, changing the name of the carrier is a good solution.</p>



<a name="261973992"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261973992" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261973992">(Nov 18 2021 at 19:04)</a>:</h4>
<p>On a slight tangent, am I the only one who thinks that <code>smul_comm_class</code> is a really bad name? We usually dont include "class" in the name of a type class?</p>



<a name="261974245"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261974245" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Johan Commelin <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261974245">(Nov 18 2021 at 19:06)</a>:</h4>
<p>I agree. But the lemma is already called <code>smul_comm</code>. So we need another name for the class. Suggestions welcome!</p>



<a name="261974400"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261974400" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261974400">(Nov 18 2021 at 19:07)</a>:</h4>
<p>To be fair, I much more regret <code>has_scalar_tower</code>. I'd be happy to have them called <code>smul_comm_class</code> and <code>smul_assoc_class</code>. But if you want to get rid of the <code>_class</code> we can go for <code>is_smul_comm</code>/<code>is_comm_smul</code> and <code>is_smul_assoc</code>/<code>is_assoc_smul</code>.</p>



<a name="261974851"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261974851" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261974851">(Nov 18 2021 at 19:09)</a>:</h4>
<p>It follows the principle that Prop-valued classes should be called <code>is_</code>.</p>



<a name="261975053"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261975053" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261975053">(Nov 18 2021 at 19:10)</a>:</h4>
<p>Isn't it <code>is_scalar_tower</code>?</p>



<a name="261975161"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261975161" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261975161">(Nov 18 2021 at 19:11)</a>:</h4>
<p>Since it's <code>has_scalar</code>, maybe <code>scalar_comm</code> could be a name for the class, while <code>smul_comm</code> is the lemma?</p>



<a name="261976176"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261976176" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261976176">(Nov 18 2021 at 19:18)</a>:</h4>
<p>I think we should rename <code>has_scalar</code> to <code>has_smul</code>. It's <code>has_add</code>, not <code>has_addition</code>.</p>



<a name="261981655"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261981655" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261981655">(Nov 18 2021 at 19:55)</a>:</h4>
<p>I think "rename all the typeclasses" is reasonable, but probably deserves it's own thread</p>



<a name="261981750"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261981750" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261981750">(Nov 18 2021 at 19:56)</a>:</h4>
<p>Also it will mean my scalar actions paper refers to things that no longer exist!</p>



<a name="261985036"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261985036" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261985036">(Nov 18 2021 at 20:21)</a>:</h4>
<p><code>has_lsmul</code> and <code>has_rsmul</code>?</p>



<a name="261988077"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261988077" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261988077">(Nov 18 2021 at 20:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/116395-maths/topic/ideals.20in.20non-comm.20rings/near/261981750">said</a>:</p>
<blockquote>
<p>Also it will mean my scalar actions paper refers to things that no longer exist!</p>
</blockquote>
<p>Paper rot <span aria-label="scream" class="emoji emoji-1f631" role="img" title="scream">:scream:</span></p>



<a name="261988425"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261988425" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261988425">(Nov 18 2021 at 20:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110789">Jakob von Raumer</span> <a href="#narrow/stream/116395-maths/topic/ideals.20in.20non-comm.20rings/near/261985036">said</a>:</p>
<blockquote>
<p><code>has_lsmul</code> and <code>has_rsmul</code>?</p>
</blockquote>
<p>Sounds reasonable</p>



<a name="261989178"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261989178" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261989178">(Nov 18 2021 at 20:54)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110789">Jakob von Raumer</span> <a href="#narrow/stream/116395-maths/topic/ideals.20in.20non-comm.20rings/near/261985036">said</a>:</p>
<blockquote>
<p><code>has_lsmul</code> and <code>has_rsmul</code>?</p>
</blockquote>
<p>Before embarking on such a change, I'd recommend collecting the rationale for doing so into a chunk of prose and making a github issue about it.</p>



<a name="261989328"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261989328" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261989328">(Nov 18 2021 at 20:55)</a>:</h4>
<p>(my current stance is mild opposition, mainly because I think we need a clear argument for it being useful before doubling the amount of work we do)</p>



<a name="261989514"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261989514" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261989514">(Nov 18 2021 at 20:57)</a>:</h4>
<p>I'd also be tempted to go ahead and PR the <code>is_symmetric_smul</code> stuff, since I found a number of other places where I wanted it</p>



<a name="261989745"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261989745" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261989745">(Nov 18 2021 at 20:59)</a>:</h4>
<p>Did you read the thread above? What's your opinion in changing the current definition of <code>module</code>?</p>



<a name="261991473"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261991473" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261991473">(Nov 18 2021 at 21:12)</a>:</h4>
<p>Are you actually suggesting changing <code>module</code>, or just renaming it to <code>left_module</code> and creating something new to replace <code>module</code>?</p>



<a name="261992399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261992399" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261992399">(Nov 18 2021 at 21:20)</a>:</h4>
<p>Well it was <span class="user-mention" data-user-id="110032">@Reid Barton</span>'s suggestion at first, but I tend to agree with it the more I think about where I'd otherwise need to plug in <code>is_symmetric_smul R M</code>. Make <code>module R M</code> mean symmetric <code>R</code>-<code>R</code>-bimodule, and derive an instance for it from <code>left_module R M</code> whenever <code>R</code> is commutative.</p>



<a name="261996837"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261996837" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261996837">(Nov 18 2021 at 21:56)</a>:</h4>
<p>Surely we want to derive a <code>left_module</code> instance from <code>module</code> though too (<code>module.to_left_module</code>), since all bi-modules are unimodules? We can't have both directions.</p>



<a name="261997687"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261997687" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261997687">(Nov 18 2021 at 22:02)</a>:</h4>
<p>Ah, damn, you're right. Sounds pretty promising that in Lean 4 we will be able to have both...</p>



<a name="261997752"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261997752" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261997752">(Nov 18 2021 at 22:02)</a>:</h4>
<p>But then maybe we should stick to the previous plan and lazily add <code>is_symmetric_smul</code> where needed?</p>



<a name="261997795"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261997795" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261997795">(Nov 18 2021 at 22:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/116395-maths/topic/ideals.20in.20non-comm.20rings/near/261989514">said</a>:</p>
<blockquote>
<p>I'd also be tempted to go ahead and PR the <code>is_symmetric_smul</code> stuff, since I found a number of other places where I wanted it</p>
</blockquote>
<p>What other places for example?</p>



<a name="261998082"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261998082" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261998082">(Nov 18 2021 at 22:05)</a>:</h4>
<p>But I'd be happy for you to PR it, happy for everything that breaks my PR into smaller pieces ^^</p>



<a name="261998526"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261998526" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261998526">(Nov 18 2021 at 22:09)</a>:</h4>
<p>There's a few additional closure properties in <a href="https://github.com/leanprover-community/mathlib/blob/53172fa65edafc41d08ff451ed023d8a46b01b32/src/group_theory/group_action/symmetric.lean">here</a></p>



<a name="261999943"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/261999943" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#261999943">(Nov 18 2021 at 22:19)</a>:</h4>
<blockquote>
<p>what other places for example?</p>
</blockquote>
<p>IMO <a href="https://leanprover-community.github.io/mathlib_docs/find/star_module">docs#star_module</a> should be stated in terms of a right action on one side, but that's annoying in commutative actions without <code>is_symmetric_smul</code></p>



<a name="262000629"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/262000629" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#262000629">(Nov 18 2021 at 22:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/116395-maths/topic/ideals.20in.20non-comm.20rings/near/261999943">said</a>:</p>
<blockquote>
<p>IMO <a href="https://leanprover-community.github.io/mathlib_docs/find/star_module">docs#star_module</a> should be stated in terms of a right action on one side, but that's annoying in commutative actions without <code>is_symmetric_smul</code></p>
</blockquote>
<p>Oh, does that also contain the potential of having  issues <code>opposite (opposite R)</code>when applied twice? <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="262001227"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/262001227" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#262001227">(Nov 18 2021 at 22:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110789">Jakob von Raumer</span> <a href="#narrow/stream/116395-maths/topic/ideals.20in.20non-comm.20rings/near/262000629">said</a>:</p>
<blockquote>
<p>Oh, does that also contain the potential of having  issues <code>opposite (opposite R)</code>when applied twice? <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>
</blockquote>
<p>Let me advertise two theories for a refactor that could deal with this:</p>
<ul>
<li><a href="#narrow/stream/113488-general/topic/with_top.20irreducible/near/260803354">eta for structures</a></li>
<li>some class <a href="https://github.com/leanprover-community/mathlib/pull/9840#discussion_r738695610"><code>is_opposite R S</code></a> packaging an isomorphism between <code>Rᵒᵖ</code> and <code>S</code></li>
</ul>



<a name="262001983"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/262001983" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#262001983">(Nov 18 2021 at 22:39)</a>:</h4>
<p>Ah, thanks. is "eta for structures" really a solution? We won't have eta for structures in Lean 4 either</p>



<a name="262002104"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/262002104" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Heather Macbeth <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#262002104">(Nov 18 2021 at 22:40)</a>:</h4>
<p>I think it was under consideration?<br>
<a href="https://github.com/leanprover/lean4/issues/777#issuecomment-964207928">https://github.com/leanprover/lean4/issues/777#issuecomment-964207928</a></p>



<a name="262038593"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/262038593" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jakob von Raumer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#262038593">(Nov 19 2021 at 08:22)</a>:</h4>
<p>Oh cool :) I proposed it to Sebastian a while ago, and he didn't sound like Leo and him liked it</p>



<a name="262058631"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/262058631" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#262058631">(Nov 19 2021 at 12:12)</a>:</h4>
<p>See the topic on <a href="#narrow/stream/116395-maths/topic/left.20vs.20right.20modules.20in.20tensor.20products/near/259727782">left vs right modules in tensor products</a> for some related discussion about left and right modules (which was moved from here)</p>



<a name="275132235"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/275132235" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#275132235">(Mar 13 2022 at 04:14)</a>:</h4>
<p>What's the current status of this discussion? It would be nice to have a way to talk about bimodules and two-sided ideals in non-commutative rings sometime soon.</p>



<a name="275152784"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/275152784" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#275152784">(Mar 13 2022 at 13:12)</a>:</h4>
<p>cc <span class="user-mention" data-user-id="373192">@Christopher Hoskin</span> <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span></p>



<a name="275160955"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/275160955" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#275160955">(Mar 13 2022 at 15:49)</a>:</h4>
<p>R-S-Bimodules are possible as <code>[module R M] [module Sᵐᵒᵖ M] [smul_comm_class R Sᵐᵒᵖ M]</code>, what we're missing is sub-bimodules</p>



<a name="275162218"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/275162218" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#275162218">(Mar 13 2022 at 16:15)</a>:</h4>
<p>Ah, okay. I only looked for two-sided ideals. Silly me. Should I define those, or wait for something else someone is working on?</p>



<a name="275174306"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/275174306" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#275174306">(Mar 13 2022 at 20:50)</a>:</h4>
<p>I think we probably want <code>subbimodule R S M</code> and then can define <code>biideal R</code> as <code>subbimodule R R R</code></p>



<a name="275174310"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/275174310" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#275174310">(Mar 13 2022 at 20:50)</a>:</h4>
<p>Likely with better names</p>



<a name="275175581"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/275175581" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#275175581">(Mar 13 2022 at 21:19)</a>:</h4>
<p>ah, I was thinking just <code>bimodule R R I</code> but I see now why sub-bimodule makes more sense.</p>



<a name="284039475"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/284039475" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#284039475">(May 26 2022 at 18:00)</a>:</h4>
<p>I just opened <a href="https://github.com/leanprover-community/mathlib/pull/14399">#14399</a> which defines right ideals. I confess I have lost track of where we are with this. Other than code duplication, is there any reason why this is a silly approach?</p>
<p>Actually I just wanted the result that a division ring is Artinian but I got annoyed when I realised I could only handle the left case so I copied near-minimal amount of left <code>ideal</code> API to allow me do what I wanted. The PR is thus a silly mixture of two things; I'm happy to split it up but first I thought I'd check here.</p>
<p>Is this crazy? Do we actually want to go in this direction?</p>



<a name="284044306"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/284044306" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#284044306">(May 26 2022 at 18:42)</a>:</h4>
<p>(the obvious alternative is just to work with <code>ideal Rᵐᵒᵖ</code> but then all elements live in a different type which will be pain)</p>



<a name="284044565"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/284044565" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#284044565">(May 26 2022 at 18:44)</a>:</h4>
<p>Coming from the order theory library where everything is dualized by hand (still longing for a <code>to_dual</code> attribute), I would say that you should duplicate everything. It's not twice harder to write twice almost the same thing.</p>



<a name="284044651"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/284044651" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#284044651">(May 26 2022 at 18:45)</a>:</h4>
<p>The only problem I see is that <a href="https://leanprover-community.github.io/mathlib_docs/find/mul_opposite">docs#mul_opposite</a> is irreducible, so you can't use it to easily dualize lemmas as we do with <a href="https://leanprover-community.github.io/mathlib_docs/find/order_dual">docs#order_dual</a>.</p>



<a name="284044701"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/284044701" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#284044701">(May 26 2022 at 18:45)</a>:</h4>
<p>Maybe you can make it locally reducible when dualizing lemmas?</p>



<a name="284044840"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/284044840" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#284044840">(May 26 2022 at 18:46)</a>:</h4>
<p>... and <code>left_ideal</code> and <code>right_ideal</code> are different structures, so you can't rely on that trick when the statement mentions them.</p>



<a name="284061036"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/284061036" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#284061036">(May 26 2022 at 21:03)</a>:</h4>
<blockquote>
<p>the obvious alternative is just to work with <code>ideal Rᵐᵒᵖ</code> but then all elements live in a different type which will be pain</p>
</blockquote>
<p>My vague memory was that this doesn't actually mean the right thing; but perhaps I told <span class="user-mention" data-user-id="419946">@Haruhisa Enomoto</span> something wrong in their PR</p>



<a name="284119474"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/284119474" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#284119474">(May 27 2022 at 11:15)</a>:</h4>
<p>IIUC, you are referring to <a href="https://github.com/leanprover-community/mathlib/pull/13862#discussion_r862521248">this comment</a> on <a href="https://github.com/leanprover-community/mathlib/pull/13862">#13862</a>. I agree with your comment there.</p>



<a name="284119511"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/284119511" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#284119511">(May 27 2022 at 11:15)</a>:</h4>
<p>For the sake of definiteness, given a (semi)ring <code>R</code> there are four things one can consider:</p>
<ol>
<li><code>submodule R R</code>        -- Left ideal of <code>R</code></li>
<li><code>submodule Rᵐᵒᵖ R</code>     -- Right ideal of <code>R</code></li>
<li><code>submodule Rᵐᵒᵖ Rᵐᵒᵖ</code>  -- Left ideal of <code>Rᵐᵒᵖ</code>  (corresponds to right ideal of <code>R</code>)</li>
<li><code>submodule R Rᵐᵒᵖ</code>     -- Right ideal of <code>Rᵐᵒᵖ</code> (corresponds to left ideal of <code>R</code>)</li>
</ol>



<a name="284119584"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/284119584" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#284119584">(May 27 2022 at 11:16)</a>:</h4>
<p>And you were correctly pointing out that 2 and 3 are not equal (though they do "correspond" --- mathematically, the point is that when <code>Rᵐᵒᵖ</code> appears as the second argument in <code>submodule</code>, its multiplicative structure has been forgotten so there's no difference between it and <code>R</code>).</p>



<a name="284119732"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/284119732" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#284119732">(May 27 2022 at 11:18)</a>:</h4>
<p>Looking this morning, we are very nearly able to work with sub-bimodules. The only missing piece is:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">ring_theory.tensor_product</span>

<span class="n">open_locale</span> <span class="n">tensor_product</span>

<span class="kd">variables</span> <span class="o">(</span><span class="n">R</span> <span class="n">S</span> <span class="n">M</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">S</span><span class="o">]</span>
<span class="kd">variables</span> <span class="o">[</span><span class="n">add_comm_monoid</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">module</span> <span class="n">R</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">module</span> <span class="n">S</span><span class="bp">ᵐᵒᵖ</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">_i</span> <span class="o">:</span> <span class="n">smul_comm_class</span> <span class="n">R</span> <span class="n">S</span><span class="bp">ᵐᵒᵖ</span> <span class="n">M</span><span class="o">]</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">module</span> <span class="o">(</span><span class="n">R</span> <span class="bp">⊗</span><span class="o">[</span><span class="n">ℕ</span><span class="o">]</span> <span class="n">S</span><span class="bp">ᵐᵒᵖ</span><span class="o">)</span> <span class="n">M</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">apply_instance</span> <span class="c1">-- Currently fails</span>
</code></pre></div>



<a name="284119844"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/284119844" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#284119844">(May 27 2022 at 11:20)</a>:</h4>
<p>I'll try to PR something that fixes this (today if I get time, though I'm travelling so it could be Monday).</p>



<a name="284119936"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/284119936" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#284119936">(May 27 2022 at 11:21)</a>:</h4>
<p>For emphasis, we just need to fill the <code>sorry</code> below:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">ring_theory.tensor_product</span>

<span class="n">open_locale</span> <span class="n">tensor_product</span>

<span class="kd">variables</span> <span class="o">(</span><span class="n">R</span> <span class="n">S</span> <span class="n">M</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">R</span><span class="o">]</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">S</span><span class="o">]</span>
<span class="kd">variables</span> <span class="o">[</span><span class="n">add_comm_monoid</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">module</span> <span class="n">R</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">module</span> <span class="n">S</span><span class="bp">ᵐᵒᵖ</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">_i</span> <span class="o">:</span> <span class="n">smul_comm_class</span> <span class="n">R</span> <span class="n">S</span><span class="bp">ᵐᵒᵖ</span> <span class="n">M</span><span class="o">]</span>

<span class="kd">instance</span> <span class="n">foo</span> <span class="o">:</span> <span class="n">module</span> <span class="o">(</span><span class="n">R</span> <span class="bp">⊗</span><span class="o">[</span><span class="n">ℕ</span><span class="o">]</span> <span class="n">S</span><span class="bp">ᵐᵒᵖ</span><span class="o">)</span> <span class="n">M</span> <span class="o">:=</span> <span class="gr">sorry</span>

<span class="c1">-- YAY: a subbimodule:</span>
<span class="k">#check</span> <span class="n">submodule</span> <span class="o">(</span><span class="n">R</span> <span class="bp">⊗</span><span class="o">[</span><span class="n">ℕ</span><span class="o">]</span> <span class="n">S</span><span class="bp">ᵐᵒᵖ</span><span class="o">)</span> <span class="n">M</span>

<span class="sd">/-- A two-sided ideal. -/</span>
<span class="kd">def</span> <span class="n">bi_ideal</span> <span class="o">:=</span> <span class="n">submodule</span> <span class="o">(</span><span class="n">R</span> <span class="bp">⊗</span><span class="o">[</span><span class="n">ℕ</span><span class="o">]</span> <span class="n">R</span><span class="bp">ᵐᵒᵖ</span><span class="o">)</span> <span class="n">R</span>
</code></pre></div>



<a name="284120040"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/284120040" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#284120040">(May 27 2022 at 11:23)</a>:</h4>
<p>However I think we should still have a definition of <code>def right_ideal := submodule Rᵐᵒᵖ R</code> as proposed in my <a href="https://github.com/leanprover-community/mathlib/pull/14399">#14399</a>.</p>



<a name="284120175"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/284120175" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#284120175">(May 27 2022 at 11:24)</a>:</h4>
<p>(my only mild concern is that when we have true <code>ring</code>s as opposed to <code>semiring</code>s we might want to work with <code>R ⊗[ℤ] Sᵐᵒᵖ</code> but I think this shouldn't really be a problem)</p>



<a name="284123987"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/284123987" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#284123987">(May 27 2022 at 12:10)</a>:</h4>
<p>Do we run into trouble with diamonds when <code>M = (R ⊗[ℕ] Sᵐᵒᵖ)</code>?</p>



<a name="284124118"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/284124118" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#284124118">(May 27 2022 at 12:11)</a>:</h4>
<p><span class="user-mention silent" data-user-id="240862">Oliver Nash</span> <a href="#narrow/stream/116395-maths/topic/ideals.20in.20non-comm.20rings/near/284119584">said</a>:</p>
<blockquote>
<p>And you were correctly pointing out that 2 and 3 are not equal (though they do "correspond" --- mathematically, the point is that when <code>Rᵐᵒᵖ</code> appears as the second argument in <code>submodule</code>, its multiplicative structure has been forgotten so there's no difference between it and <code>R</code>).</p>
</blockquote>
<p>I think I was confused when I wrote this and thought they didn't even correspond, but you're obviously right that they do. Indeed, the definition of <a href="https://leanprover-community.github.io/mathlib_docs/find/mul_opposite.has_scalar">docs#mul_opposite.has_scalar</a> confirms that the multiplicative structure is forgotten.</p>



<a name="284141555"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/284141555" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Külshammer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#284141555">(May 27 2022 at 14:38)</a>:</h4>
<p>I should probably emphasise again that a two-sided ideal should not be called a bi-ideal. That is something else: <a href="https://ncatlab.org/nlab/show/biideal">https://ncatlab.org/nlab/show/biideal</a> Personally, my preference would be to to rename the current ideal to left_ideal, and name a two-sided ideal just ideal, but if that is not wished for, just call it a two_sided_ideal.</p>



<a name="284144487"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/284144487" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#284144487">(May 27 2022 at 14:59)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="317890">@Julian Külshammer</span> I do now remember you making this important point before. I'm hoping finally to push through definitions of right- and two-sided ideals in the next few days and will make sure to remember not to say "bi-ideal" anywhere.</p>



<a name="284144753"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/284144753" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#284144753">(May 27 2022 at 15:01)</a>:</h4>
<p>As to the terminology, I wonder if we could have notation, localized to commutative/non-commutative locales that controlled whether <code>ideal</code> meant two-sided or left. For now I think we'll probably have to stick with <code>ideal</code> meaning left though.</p>



<a name="284386825"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/284386825" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#284386825">(May 30 2022 at 16:24)</a>:</h4>
<p>I've just pushed <a href="https://github.com/leanprover-community/mathlib/pull/14465">#14465</a> which I think should provide a convenient theory for two-sided submodules of bimodules and in particular allow us to define two-sided ideals easily.</p>



<a name="284387024"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/284387024" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#284387024">(May 30 2022 at 16:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/116395-maths/topic/ideals.20in.20non-comm.20rings/near/284123987">said</a>:</p>
<blockquote>
<p>Do we run into trouble with diamonds when <code>M = (R ⊗[ℕ] Sᵐᵒᵖ)</code>?</p>
</blockquote>
<p>In fact we don't because <code>(R ⊗[ℕ] Sᵐᵒᵖ)</code> is not a module over <code>Sᵐᵒᵖ</code> because our definition of tensor product only picks up auxiliary actions from the left factor. However even if we did I think this would be a diamond we could live with.</p>



<a name="286353351"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/286353351" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#286353351">(Jun 16 2022 at 13:36)</a>:</h4>
<p>Highlighting a related discussion <a href="https://github.com/leanprover-community/mathlib/pull/14465#discussion_r898892696">from GitHub</a> in case anyone wants to comment.</p>



<a name="286354930"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/286354930" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#286354930">(Jun 16 2022 at 13:48)</a>:</h4>
<p>The nub is that if <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span> and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span> are <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span>-modules and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span> is an <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span>-algebra, then <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><msub><mo>⊗</mo><mi>R</mi></msub><mi>N</mi></mrow><annotation encoding="application/x-tex">M \otimes_R N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin"><span class="mbin">⊗</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span> is naturally an <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span>-module in two different ways, depending on whether we define: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>⋅</mo><mo stretchy="false">(</mo><mi>m</mi><mo>⊗</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">(</mo><mi>a</mi><mo>⋅</mo><mi>m</mi><mo stretchy="false">)</mo><mo>⊗</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">a \cdot (m \otimes n) = (a \cdot m) ⊗ n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">m</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> (the "left option") or <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>⋅</mo><mo stretchy="false">(</mo><mi>m</mi><mo>⊗</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mi>m</mi><mo>⊗</mo><mo stretchy="false">(</mo><mi>a</mi><mo>⋅</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">a \cdot (m \otimes n) = m \otimes (a \cdot n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> (the "right option").</p>
<p>If we want to work with these two different <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span>-module structures using typeclasses, we need two different types indicating whether we want to pick up the left or right <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span>-action. Currently in Mathlib, we just arbitrarily always take the left action (thus ignoring the action of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span> on <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span>).</p>
<p>I sketched out some thoughts about how to resolve this ages ago here <a href="#narrow/stream/144837-PR-reviews/topic/.234773.20base.20change/near/240929258">https://leanprover.zulipchat.com/#narrow/stream/144837-PR-reviews/topic/.234773.20base.20change/near/240929258</a></p>



<a name="286355768"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/286355768" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#286355768">(Jun 16 2022 at 13:55)</a>:</h4>
<p>In the case at hand, we are defining an <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><msub><mo>⊗</mo><mi>R</mi></msub><mi>B</mi></mrow><annotation encoding="application/x-tex">A \otimes_R B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin"><span class="mbin">⊗</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span></span></span>-module structure on a module <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span> that carries commuting <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span>-module and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi></mrow><annotation encoding="application/x-tex">B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span></span></span>-module structures (for <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span>-algebras <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span>, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi></mrow><annotation encoding="application/x-tex">B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span></span></span> over a commutative ring <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span>). This fine except for the case <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mo>=</mo><mi>A</mi><msub><mo>⊗</mo><mi>R</mi></msub><mi>A</mi></mrow><annotation encoding="application/x-tex">M = A \otimes_R A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin"><span class="mbin">⊗</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span> (for <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span> commutative) when our left-only convention makes <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><msub><mo>⊗</mo><mi>R</mi></msub><mi>A</mi></mrow><annotation encoding="application/x-tex">A \otimes_R A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin"><span class="mbin">⊗</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span> admissible and get a weird module structure on <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><msub><mo>⊗</mo><mi>R</mi></msub><mi>A</mi></mrow><annotation encoding="application/x-tex">A \otimes_R A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin"><span class="mbin">⊗</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span> such that <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>a</mi><mo>⊗</mo><mi>b</mi><mo stretchy="false">)</mo><mo>⋅</mo><mo stretchy="false">(</mo><msup><mi>a</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo>⊗</mo><msup><mi>b</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">(</mo><mi>a</mi><mi>b</mi><msup><mi>a</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">)</mo><mo>⊗</mo><msup><mi>b</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></mrow><annotation encoding="application/x-tex">(a \otimes b) \cdot (a&#x27; \otimes b&#x27;) = (aba&#x27;) \otimes b&#x27;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">b</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0019em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0019em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0019em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">ab</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7519em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span>.</p>



<a name="286628574"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/286628574" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Haruhisa Enomoto <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#286628574">(Jun 18 2022 at 04:44)</a>:</h4>
<p><span class="user-mention silent" data-user-id="240862">Oliver Nash</span> <a href="#narrow/stream/116395-maths/topic/ideals.20in.20non-comm.20rings/near/286354930">said</a>:</p>
<blockquote>
<p>The nub is that if <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span> and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span> are <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span>-modules and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span> is an <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span></span>-algebra, then <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><msub><mo>⊗</mo><mi>R</mi></msub><mi>N</mi></mrow><annotation encoding="application/x-tex">M \otimes_R N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin"><span class="mbin">⊗</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span> is naturally an <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span>-module in two different ways, depending on whether we define: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>⋅</mo><mo stretchy="false">(</mo><mi>m</mi><mo>⊗</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">(</mo><mi>a</mi><mo>⋅</mo><mi>m</mi><mo stretchy="false">)</mo><mo>⊗</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">a \cdot (m \otimes n) = (a \cdot m) ⊗ n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">m</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> (the "left option") or <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>⋅</mo><mo stretchy="false">(</mo><mi>m</mi><mo>⊗</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mi>m</mi><mo>⊗</mo><mo stretchy="false">(</mo><mi>a</mi><mo>⋅</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">a \cdot (m \otimes n) = m \otimes (a \cdot n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> (the "right option").</p>
</blockquote>
<p>My naive mathematical feeling is that, in this case,  <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><msub><mo>⊗</mo><mi>R</mi></msub><mi>N</mi></mrow><annotation encoding="application/x-tex">M \otimes_R N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin"><span class="mbin">⊗</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span> should be considered as a left <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><msub><mo>⊗</mo><mi>R</mi></msub><mi>A</mi></mrow><annotation encoding="application/x-tex">A \otimes_R A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin"><span class="mbin">⊗</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span>-module, and picking up left or right <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span>-action corresponds to considering ring morphisms <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>→</mo><mi>A</mi><msub><mo>⊗</mo><mi>R</mi></msub><mi>A</mi></mrow><annotation encoding="application/x-tex">A \to A \otimes_R A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin"><span class="mbin">⊗</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span> defined by <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>↦</mo><mi>a</mi><mo>⊗</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">a \mapsto a \otimes 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.522em;vertical-align:-0.011em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">↦</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>↦</mo><mn>1</mn><mo>⊗</mo><mi>a</mi></mrow><annotation encoding="application/x-tex">a \mapsto 1 \otimes a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.522em;vertical-align:-0.011em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">↦</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">a</span></span></span></span>.</p>



<a name="286769083"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/286769083" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#286769083">(Jun 20 2022 at 09:18)</a>:</h4>
<p><span class="user-mention" data-user-id="419946">@Haruhisa Enomoto</span> I agree and I have a plan that should make this work (though it's not my current priority).</p>



<a name="291688860"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/291688860" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#291688860">(Aug 02 2022 at 10:07)</a>:</h4>
<p><span class="user-mention silent" data-user-id="240862">Oliver Nash</span> <a href="#narrow/stream/116395-maths/topic/ideals.20in.20non-comm.20rings/near/284386825">said</a>:</p>
<blockquote>
<p>I've just pushed <a href="https://github.com/leanprover-community/mathlib/pull/14465">#14465</a> which I think should [...] allow us to define two-sided ideals easily.</p>
</blockquote>
<p>I just returned to this PR and have put it up for review again.</p>



<a name="291715932"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/291715932" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#291715932">(Aug 02 2022 at 14:21)</a>:</h4>
<p>I missed this during my hiatus. I'm super excited. I'll review it, but I'm not sure I'll have anything intelligent to say. I definitely would have missed that diamond previously mentioned.</p>



<a name="291716218"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/291716218" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#291716218">(Aug 02 2022 at 14:23)</a>:</h4>
<p>I should have some time to look on Thursday</p>



<a name="291719534"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/291719534" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#291719534">(Aug 02 2022 at 14:47)</a>:</h4>
<p>Thank you both. No rush but any comments very gratefully received!</p>



<a name="293167433"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/293167433" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#293167433">(Aug 12 2022 at 18:17)</a>:</h4>
<p>Now that <a href="https://github.com/leanprover-community/mathlib/pull/14465">#14465</a> has been merged, it might be a good time for somebody to develop the theory of two-sided ideals. Here is how I imagine one might start:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">algebra.module.bimodule</span>

<span class="n">open_locale</span> <span class="n">tensor_product</span>
<span class="kn">open</span> <span class="n">mul_opposite</span>

<span class="kn">local</span> <span class="kn">attribute</span> <span class="o">[</span><span class="kd">instance</span><span class="o">]</span> <span class="n">tensor_product.algebra.module</span>

<span class="sd">/-- A two-sided ideal in a semiring `R` is a left `submodule` of `R` as a `module` over</span>
<span class="sd">`R ⊗[ℕ] Rᵐᵒᵖ`. -/</span>
<span class="kd">@[reducible]</span> <span class="kd">def</span> <span class="n">two_sided_ideal</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">R</span><span class="o">]</span> <span class="o">:=</span> <span class="n">submodule</span> <span class="o">(</span><span class="n">R</span> <span class="bp">⊗</span><span class="o">[</span><span class="n">ℕ</span><span class="o">]</span> <span class="n">R</span><span class="bp">ᵐᵒᵖ</span><span class="o">)</span> <span class="n">R</span>

<span class="kn">namespace</span> <span class="n">two_sided_ideal</span>

<span class="kd">variables</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="o">[</span><span class="n">semiring</span> <span class="n">R</span><span class="o">]</span> <span class="o">(</span><span class="n">I</span> <span class="o">:</span> <span class="n">two_sided_ideal</span> <span class="n">R</span><span class="o">)</span> <span class="o">{</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">R</span><span class="o">}</span>

<span class="kd">lemma</span> <span class="n">mul_mem_left</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">b</span> <span class="bp">∈</span> <span class="n">I</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">∈</span> <span class="n">I</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">convert</span> <span class="n">I.smul_mem</span> <span class="o">(</span><span class="n">a</span> <span class="bp">⊗ₜ</span> <span class="mi">1</span><span class="o">)</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">simp</span> <span class="o">[</span><span class="n">tensor_product.algebra.smul_def</span><span class="o">],</span>
<span class="kd">end</span>

<span class="kd">lemma</span> <span class="n">mul_mem_right</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">∈</span> <span class="n">I</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">∈</span> <span class="n">I</span> <span class="o">:=</span>
<span class="kd">begin</span>
  <span class="n">convert</span> <span class="n">I.smul_mem</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">⊗ₜ</span> <span class="n">op</span> <span class="n">b</span><span class="o">)</span> <span class="n">h</span><span class="o">,</span>
  <span class="n">simp</span> <span class="o">[</span><span class="n">tensor_product.algebra.smul_def</span><span class="o">],</span>
<span class="kd">end</span>

<span class="sd">/-- Forgetting the right action, a `two_sided_ideal` is just a left `ideal`. -/</span>
<span class="kd">def</span> <span class="n">to_ideal</span> <span class="o">:</span> <span class="n">ideal</span> <span class="n">R</span> <span class="o">:=</span> <span class="n">subbimodule.to_submodule</span> <span class="n">I</span>

<span class="c1">-- TODO Lots more boilerplate, presumably can be modelled on existing `ideal` API.</span>

<span class="kd">end</span> <span class="n">two_sided_ideal</span>
</code></pre></div>



<a name="293167521"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/293167521" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#293167521">(Aug 12 2022 at 18:17)</a>:</h4>
<p>Note that these still require the ring to be unital but it's still some progress.</p>



<a name="293173254"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/293173254" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#293173254">(Aug 12 2022 at 18:53)</a>:</h4>
<p>Speaking of needing the rings to be unital: this is because of the module restriction, right? We also need modules over non-unital rings. My student is currently developing the theory of Hilbert modules but currently she is doing it over a unital C*-algebra because of this requirement.</p>



<a name="293195224"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/293195224" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#293195224">(Aug 12 2022 at 21:22)</a>:</h4>
<p>Yes, unitality is forced on us with the proposed setup because <a href="https://leanprover-community.github.io/mathlib_docs/find/module">docs#module</a> requires a <a href="https://leanprover-community.github.io/mathlib_docs/find/semiring">docs#semiring</a> rather than a <a href="https://leanprover-community.github.io/mathlib_docs/find/non_unital_semiring">docs#non_unital_semiring</a> . To remove this I suppose we'd have to  introduce some sort of <code>non_unital_module</code> class with the same axioms as <a href="https://leanprover-community.github.io/mathlib_docs/find/module">docs#module</a> except without the <code>one_smul</code> axiom (ultimately coming from <a href="https://leanprover-community.github.io/mathlib_docs/find/mul_action">docs#mul_action</a>). And then I guess <a href="https://leanprover-community.github.io/mathlib_docs/find/submodule">docs#submodule</a> would then be redefined using <code>non_unital_module</code> (since the identity plays no role for <a href="https://leanprover-community.github.io/mathlib_docs/find/submodule">docs#submodule</a>) and then we would be able to have non-unital <a href="https://leanprover-community.github.io/mathlib_docs/find/submodule">docs#submodule</a> and left <a href="https://leanprover-community.github.io/mathlib_docs/find/ideal">docs#ideal</a> s.</p>



<a name="293195522"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/293195522" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#293195522">(Aug 12 2022 at 21:25)</a>:</h4>
<p>I <strong>think</strong> that should do it in terms of changes to the typeclass hierarchy (just one new class) but there would also be some more work to do so that we know that <code>A ⊗[R] B</code> is a <a href="https://leanprover-community.github.io/mathlib_docs/find/non_unital_comm_semiring">docs#non_unital_comm_semiring</a> when <code>A</code> and <code>B</code> are: we currently only know this for <a href="https://leanprover-community.github.io/mathlib_docs/find/comm_semiring">docs#comm_semiring</a>.</p>



<a name="293195554"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/293195554" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#293195554">(Aug 12 2022 at 21:25)</a>:</h4>
<p>Hopefully that's all correct, I'm typing this off the top of my head late just before I fall asleep.</p>



<a name="293201884"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/293201884" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#293201884">(Aug 12 2022 at 22:16)</a>:</h4>
<p>Is it likely that we need to generalize mul_actions too?</p>



<a name="293204009"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/293204009" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#293204009">(Aug 12 2022 at 22:35)</a>:</h4>
<p>Let's only define non-unital mul_actions if we need to. I suspect it's less (or not at all?) necessary, but I've been wrong before!</p>



<a name="293207196"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/293207196" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#293207196">(Aug 12 2022 at 23:07)</a>:</h4>
<p>How about simply define <code>non_unital_module R M</code> as <code>module (unitization ℕ R) M</code>? By the way someone should fix <a href="https://leanprover-community.github.io/mathlib_docs/find/unitization.comm_semiring/src">src#unitization.comm_semiring</a> now that we have <a href="https://leanprover-community.github.io/mathlib_docs/find/non_unital_comm_semiring">docs#non_unital_comm_semiring</a>.</p>



<a name="293212329"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/293212329" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#293212329">(Aug 13 2022 at 00:20)</a>:</h4>
<p>I'll fix <a href="https://leanprover-community.github.io/mathlib_docs/find/unitization.comm_semiring">docs#unitization.comm_semiring</a> tonight. I think the unitization trick might work, and it could actually be fairly convenient.</p>



<a name="293220459"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/293220459" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Junyan Xu <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#293220459">(Aug 13 2022 at 02:54)</a>:</h4>
<p>If unitization is a trick then defining bimodules using action of the tensor product is definitely a bigger trick :)</p>



<a name="293347432"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/293347432" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#293347432">(Aug 14 2022 at 06:40)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/pull/16048">#16048</a> for the <a href="https://leanprover-community.github.io/mathlib_docs/find/unitization.comm_semiring">docs#unitization.comm_semiring</a> fix. Somebody can pop it on the queue once it passes CI (just waiting for the linter).</p>



<a name="293771713"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/293771713" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Julian Külshammer <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#293771713">(Aug 16 2022 at 18:04)</a>:</h4>
<p><span class="user-mention" data-user-id="240862">@Oliver Nash</span> How much of the boilerplate do you think is necessary to make your draft a valid PR? I'm imagening that some stuff would already benefit from just being able to talk about two-sided ideals, e. g.  the definition of the Jacobson radical of a two-sided ideal in <a href="https://github.com/leanprover-community/mathlib/pull/13862">#13862</a>.</p>



<a name="293773971"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/293773971" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#293773971">(Aug 16 2022 at 18:17)</a>:</h4>
<p>Regarding the unitization trick for modules over non-unital rings: what I really want in order to make this nice is an instance <code>module (unitization 𝕜 R) M</code> given a hypothesis <code>module (unitization ℕ R) M</code> where <code>𝕜</code> is a <code>comm_ring</code>. In other words, in practice I want to be able to replace the ring unitization with the C⋆-algebra unitization (where <code>𝕜 = ℂ</code> and <code>R</code> is a non-unital C⋆-algebra). Is this feasible?</p>



<a name="293778015"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/293778015" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#293778015">(Aug 16 2022 at 18:40)</a>:</h4>
<p><span class="user-mention" data-user-id="317890">@Julian Külshammer</span> I'm not sure. Certainly such a PR should include lemmas like <code>zero_mem</code>, <code>add_mem</code>, <code>sub_mem</code>, <code>ext</code>, ... I'd take a careful look at the existing API for <a href="https://leanprover-community.github.io/mathlib_docs/find/submodule">docs#submodule</a> and <a href="https://leanprover-community.github.io/mathlib_docs/find/ideal">docs#ideal</a> and probably add quite a lot of what they have since code like this is fairly uncontroversial (and easy to write).</p>
<p>However I think there are two questions to answer before embarking on such a task:</p>
<ol>
<li>Should we make <code>two_sided_ideal</code> a specialisation of a new <code>subbimodule R S M</code> structure? [probably]</li>
<li>Should we wait till we've resolved the issue that <code>submodule R M</code> currently requires <code>R</code> to be unital? [probably not]</li>
</ol>



<a name="293778279"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/293778279" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#293778279">(Aug 16 2022 at 18:42)</a>:</h4>
<p>If I ever get a chance to return to this PR <a href="https://github.com/leanprover-community/mathlib/pull/14399">#14399</a> (defining right ideals) then it should give an example of a minimal API for a new definition like this.</p>



<a name="293779294"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/293779294" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#293779294">(Aug 16 2022 at 18:48)</a>:</h4>
<p><span class="user-mention" data-user-id="197836">@Jireh Loreaux</span> I think that would not be feasible because the carrier type <code>𝕜</code> in such an instance would be undetermined.</p>



<a name="293779476"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/293779476" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#293779476">(Aug 16 2022 at 18:49)</a>:</h4>
<p>IIUC if you wanted to pursue this you would have to introduce a type synonym for <code>M</code> and use that in the instance.</p>



<a name="293779618"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/293779618" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#293779618">(Aug 16 2022 at 18:50)</a>:</h4>
<p>Yeah, it definitely felt like this instance was "going the wrong way"</p>



<a name="293779715"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/293779715" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#293779715">(Aug 16 2022 at 18:51)</a>:</h4>
<p>It makes mathematical sense though and I <strong>think</strong> we'll be able to do this sort of thing in Lean 4.</p>



<a name="293779802"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/293779802" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Oliver Nash <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#293779802">(Aug 16 2022 at 18:51)</a>:</h4>
<p>For now a type synonym (that captures <code>𝕜</code>) should work.</p>



<a name="293780201"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/ideals%20in%20non-comm%20rings/near/293780201" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Jireh Loreaux <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/ideals.20in.20non-comm.20rings.html#293780201">(Aug 16 2022 at 18:53)</a>:</h4>
<p>Well, I'm certainly wondering at what point it makes sense to specialize all (okay, I only mean most) of the C⋆-algebra theory to <code>ℂ</code>, and this might be one situation.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>