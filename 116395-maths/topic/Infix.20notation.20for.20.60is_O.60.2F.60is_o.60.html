---
layout: archive
title: Zulip Chat Archive
permalink: /stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/index.html">maths</a></h2>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html">Infix notation for `is_O`/`is_o`</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com/">

<head><link href="/style.css" rel="stylesheet"></head>

{% raw %}

<a name="282365106"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282365106" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282365106">(May 14 2022 at 18:07)</a>:</h4>
<p>Hi,</p>
<p>In <a href="https://github.com/leanprover-community/mathlib/pull/14129">#14129</a> I reorder arguments of <code>is_O</code>/<code>is_o</code> and various <code>trans</code> lemmas so that they work with <code>calc</code>. I use notation <code>f =O[l] g</code> and <code>f =o[l] g</code>. <span class="user-mention" data-user-id="310045">@Eric Wieser</span>  doesn't like the idea of using <code>=</code> in the notation of a non-symmetric relation. Any other ideas? I need infix notation for (at least) <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo>=</mo><mi>O</mi><mo stretchy="false">(</mo><mi>g</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f=O(g)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mclose">)</span></span></span></span>, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo>=</mo><mi>o</mi><mo stretchy="false">(</mo><mi>g</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f=o(g)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">o</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mclose">)</span></span></span></span>, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo>=</mo><mi mathvariant="normal">Θ</mi><mo stretchy="false">(</mo><mi>g</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f=\Theta(g)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">Θ</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mclose">)</span></span></span></span> (not yet in mathlib).</p>



<a name="282365225"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282365225" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282365225">(May 14 2022 at 18:10)</a>:</h4>
<p>I do like the current notation, it matches mathematical usage.</p>



<a name="282365309"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282365309" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282365309">(May 14 2022 at 18:13)</a>:</h4>
<p>I think <code>=</code> is fine due to convention, but just to through out an alternative, it could be <code>f ∈O[l] g</code>.</p>



<a name="282365354"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282365354" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282365354">(May 14 2022 at 18:14)</a>:</h4>
<p>Oh, that actually works perfectly</p>



<a name="282365358"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282365358" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Violeta Hernández <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282365358">(May 14 2022 at 18:14)</a>:</h4>
<p>I like it even more if I'm being honest</p>



<a name="282365596"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282365596" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282365596">(May 14 2022 at 18:21)</a>:</h4>
<p>I think <code>=O[l]</code> is better; <code>∈O[l]</code> doesn't read right in the context of transitivity/<code>calc</code>, besides being nonstandard</p>



<a name="282365665"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282365665" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282365665">(May 14 2022 at 18:23)</a>:</h4>
<p>\mem is already supported in calc. Also \subset(eq), which leads to some ridiculous looking proofs</p>



<a name="282365735"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282365735" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282365735">(May 14 2022 at 18:24)</a>:</h4>
<p>I mean <code>=O[l]</code> is transitive, like <code>=</code>. <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>∈</mo></mrow><annotation encoding="application/x-tex">\in</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">∈</span></span></span></span> is not transitive.</p>



<a name="282365758"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282365758" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yaël Dillies <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282365758">(May 14 2022 at 18:25)</a>:</h4>
<p>Isn't <code>is_o</code> short enough to not warrant a notation?</p>



<a name="282365760"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282365760" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282365760">(May 14 2022 at 18:25)</a>:</h4>
<p>I've seen <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo>∈</mo><mi>O</mi><mo stretchy="false">(</mo><mi>g</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f \in O(g)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mclose">)</span></span></span></span> in the wild, though as a transitive relation it's nonstandard. Arguably this is using <code>∈</code> closer to Peano's original definition of the notation, which means "is" (it's a stylized version of the first letter of the Greek word for the Latin word "est").</p>



<a name="282365844"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282365844" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282365844">(May 14 2022 at 18:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60/near/282365758">said</a>:</p>
<blockquote>
<p>Isn't <code>is_o</code> short enough to not warrant a notation?</p>
</blockquote>
<p>Sure, but for <code>calc</code> an infix form would be nice (required?)</p>



<a name="282365927"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282365927" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282365927">(May 14 2022 at 18:28)</a>:</h4>
<p>(Small note regarding <code>calc</code> and this: there's still a bug in <code>calc</code> still where it'll completely ignore whatever you put in the square brackets since it only unifies the last two arguments for the relation. Hopefully that will be fixed eventually...)</p>



<a name="282366960"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282366960" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Rodriguez <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282366960">(May 14 2022 at 18:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110032">Reid Barton</span> <a href="#narrow/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60/near/282365844">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="387244">Yaël Dillies</span> <a href="#narrow/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60/near/282365758">said</a>:</p>
<blockquote>
<p>Isn't <code>is_o</code> short enough to not warrant a notation?</p>
</blockquote>
<p>Sure, but for <code>calc</code> an infix form would be nice (required?)</p>
</blockquote>
<p>I've tried many things and I think it is required.</p>



<a name="282370811"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282370811" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vincent Beffara <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282370811">(May 14 2022 at 20:31)</a>:</h4>
<p>How about <code>≤O[l]</code> or <code>≼O[l]</code> or just <code>≼[l]</code>? It is not mathematically correct and goes against my conditioning of never having both an inequality and a big-O in the same formula, but at least it feels transitive and not symmetric.</p>



<a name="282371785"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282371785" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282371785">(May 14 2022 at 20:58)</a>:</h4>
<p>I guess it's pretty easy to guess what <code>f &lt;= O(g)</code> means. I suppose you could even write <code>f &lt;= C*g</code>!</p>



<a name="282372508"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282372508" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vincent Beffara <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282372508">(May 14 2022 at 21:17)</a>:</h4>
<p>Yes, it is clear what <code>f ≤ O(g)</code> means, and it is different from what <code>f = O(g)</code> means, which is why the <code>≤O[l]</code> notation could be misleading</p>



<a name="282372712"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282372712" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282372712">(May 14 2022 at 21:22)</a>:</h4>
<p>What notation do you suggest for small o and theta?</p>



<a name="282372894"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282372894" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Vincent Beffara <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282372894">(May 14 2022 at 21:26)</a>:</h4>
<p>I would go for something like <code>f ≼[l] g</code> for <code>f = O(g)</code>,  <code>f ≪[l] g</code> for <code>f = o(g)</code> and <code>f ≍[l] g</code> for <code>Θ</code></p>



<a name="282373199"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282373199" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kalle Kytölä <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282373199">(May 14 2022 at 21:34)</a>:</h4>
<p>I like the last two of Vincent's suggestions a lot, and in my opinion they correspond very well to common use of these symbols. The first one may unfortunately have a risk of misinterpretation, still.</p>



<a name="282373373"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282373373" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282373373">(May 14 2022 at 21:39)</a>:</h4>
<p>/poll Notation for <code>is_O</code>, <code>is_o</code>, <code>is_Theta</code>, and <code>is_equivalent</code><br>
<code>f =O[l] g</code>, <code>f =o[l] g</code>, <code>f =Θ[l] g</code>, and <code>f ~[l] g</code><br>
<code>f ≼[l] g</code>, <code>f ≪[l] g</code>, <code>f ≍[l] g</code>, and <code>f ~[l] g</code></p>



<a name="282373375"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282373375" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282373375">(May 14 2022 at 21:39)</a>:</h4>
<p>Feel free to add choices.</p>



<a name="282373428"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282373428" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282373428">(May 14 2022 at 21:40)</a>:</h4>
<p>I like the fact that the symbols <code>O</code>, <code>o</code>, and <code>Θ</code> are present in the first choice.</p>



<a name="282373646"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282373646" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mauricio Collares <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282373646">(May 14 2022 at 21:44)</a>:</h4>
<p>The second of Vincent's suggestions will probably be controversial with number theory people, since <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>≪</mo></mrow><annotation encoding="application/x-tex">\ll</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">≪</span></span></span></span> means O() in some subfields</p>



<a name="282374011"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282374011" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kalle Kytölä <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282374011">(May 14 2022 at 21:52)</a>:</h4>
<p>I'm not sure I understood the transitivity issue with the <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>∈</mo></mrow><annotation encoding="application/x-tex">\in</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">∈</span></span></span></span> notation, so I voted for that for now (may change if someone explains). If <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>g</mi><mo>∈</mo><mi>O</mi><mo stretchy="false">(</mo><mi>h</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">g \in O(h)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">h</span><span class="mclose">)</span></span></span></span> then <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>g</mi><mo stretchy="false">)</mo><mo>⊂</mo><mi>O</mi><mo stretchy="false">(</mo><mi>h</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(g) \subset O(h)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⊂</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">h</span><span class="mclose">)</span></span></span></span>, so we have as usual <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo>∈</mo><mi>O</mi><mo stretchy="false">(</mo><mi>g</mi><mo stretchy="false">)</mo><mo>⇒</mo><mi>f</mi><mo>∈</mo><mi>O</mi><mo stretchy="false">(</mo><mi>h</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f \in O(g) \Rightarrow f \in O(h)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">⇒</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">h</span><span class="mclose">)</span></span></span></span> and I don't see anything wrong with transitivity.</p>
<p>(I do agree that this notation is not very commonly used, but in formalization we occasionally have to be more pedantic.)</p>



<a name="282374429"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282374429" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kalle Kytölä <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282374429">(May 14 2022 at 22:01)</a>:</h4>
<p>By contrast, Eric Wieser's objection to using <code>=</code> for a non-symmetric relation (and even a non-reflexive relation in the case of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>o</mi></mrow><annotation encoding="application/x-tex">o</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">o</span></span></span></span>) is in my opinion relevant.</p>



<a name="282374618"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282374618" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282374618">(May 14 2022 at 22:05)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="k">calc</span> <span class="n">f</span> <span class="bp">=</span><span class="n">O</span><span class="o">[</span><span class="n">l</span><span class="o">]</span> <span class="n">g</span> <span class="o">:</span> <span class="gr">sorry</span>
<span class="bp">...</span>    <span class="bp">=</span><span class="n">O</span><span class="o">[</span><span class="n">l</span><span class="o">]</span> <span class="n">h</span> <span class="o">:</span> <span class="gr">sorry</span>
</code></pre></div>
<p>looks good to me but</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="k">calc</span> <span class="n">f</span> <span class="bp">∈</span><span class="n">O</span><span class="o">[</span><span class="n">l</span><span class="o">]</span> <span class="n">g</span> <span class="o">:</span> <span class="gr">sorry</span>
<span class="bp">...</span>    <span class="bp">∈</span><span class="n">O</span><span class="o">[</span><span class="n">l</span><span class="o">]</span> <span class="n">h</span> <span class="o">:</span> <span class="gr">sorry</span>
</code></pre></div>
<p>does not because <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>∈</mo></mrow><annotation encoding="application/x-tex">\in</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">∈</span></span></span></span> is not transitive</p>



<a name="282374670"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282374670" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282374670">(May 14 2022 at 22:06)</a>:</h4>
<p>You can't write</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="k">calc</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">y</span> <span class="o">:</span> <span class="gr">sorry</span>
<span class="bp">...</span>    <span class="bp">∈</span> <span class="n">z</span> <span class="o">:</span> <span class="gr">sorry</span>
</code></pre></div>



<a name="282374727"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282374727" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Reid Barton <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282374727">(May 14 2022 at 22:07)</a>:</h4>
<p><code>≼[l]</code> is logical, but might not have a universally understood meaning</p>



<a name="282375072"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282375072" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kalle Kytölä <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282375072">(May 14 2022 at 22:15)</a>:</h4>
<p>Thanks for the explanation! I don't think the second one is terrible, however. The same <code>calc</code> does not work for ordinary <code>∈</code>, but that is because <code>f ∈O[l] g</code> really means <code>f ∈ O(g)</code>. However <code>f ∈O[l] g</code> and <code>g ∈O[l] h</code> can be transitively chained because the second implies <code>O(g) ⊆ O(h)</code>.</p>



<a name="282375197"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282375197" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282375197">(May 14 2022 at 22:18)</a>:</h4>
<p>I was pronouncing <code>∈O[l]</code> as "is in O[l] of", which feels transitive even if <code>∈</code> normally isn't.</p>



<a name="282376069"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282376069" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282376069">(May 14 2022 at 22:38)</a>:</h4>
<p>How about having a second syntax just for calc?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="k">calc</span> <span class="n">f</span> <span class="bp">∈</span><span class="n">O</span><span class="o">[</span><span class="n">l</span><span class="o">]</span> <span class="n">g</span> <span class="o">:</span> <span class="gr">sorry</span>
<span class="bp">...</span>    <span class="bp">⊆</span><span class="n">O</span><span class="o">[</span><span class="n">l</span><span class="o">]</span> <span class="n">h</span> <span class="o">:</span> <span class="gr">sorry</span>
</code></pre></div>



<a name="282376142"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282376142" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282376142">(May 14 2022 at 22:40)</a>:</h4>
<p>They'd both be defined to mean the same thing, but the second one reads better in <code>calc</code> (and would not appear anywhere else). Really the problem is that this relation isn't transitive in a way that makes sense syntactically</p>



<a name="282376206"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282376206" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kalle Kytölä <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282376206">(May 14 2022 at 22:42)</a>:</h4>
<p>I find both <code>f ∈O[l] g ∈O[l] h</code> or <code>g ∈ O(g) ⊆ O(h)</code> acceptable, but this compromise suggestion looks weird to me. There is no binary relation <code>⊆O[l]</code> that takes a function <code>g</code> as its first argument, right?</p>



<a name="282376770"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282376770" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Scott Morrison <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282376770">(May 14 2022 at 22:59)</a>:</h4>
<p>I don't like the idea of duplicating notation just to make <code>calc</code> look smoother. I think the "simple" option of <code>=O[l]</code> and friends has the advantage of an obvious interpretation, even if when it appears multiple times in a calc block there is some dissonance.</p>



<a name="282377823"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282377823" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282377823">(May 14 2022 at 23:24)</a>:</h4>
<p>Is changing <a href="https://leanprover-community.github.io/mathlib_docs/find/asymptotics.is_O">docs#asymptotics.is_O</a> to be a set a viable option? Then we wouldn't need any special notation for the relation, and could just use ∈ and ⊆.</p>



<a name="282377849"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282377849" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kevin Buzzard <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282377849">(May 14 2022 at 23:25)</a>:</h4>
<p>I think it's fascinating that this discussion even exists. I've never heard anyone talk about this subtlety before.</p>



<a name="282379549"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282379549" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282379549">(May 15 2022 at 00:16)</a>:</h4>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60/near/282377823">said</a>:</p>
<blockquote>
<p>Is changing <a href="https://leanprover-community.github.io/mathlib_docs/find/asymptotics.is_O">docs#asymptotics.is_O</a> to be a set a viable option? Then we wouldn't need any special notation for the relation, and could just use ∈ and ⊆.</p>
</blockquote>
<p>This won't work with <code>calc</code> unless you explicitly use a lemma saying <code>f ∈ O(g) → O(f) ⊆ O(g)</code> and I think that we should hide this from the users of <code>calc</code>.</p>



<a name="282379736"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282379736" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282379736">(May 15 2022 at 00:22)</a>:</h4>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">@[trans]</span> <span class="kd">lemma</span> <span class="n">set.mem_of_mem_of_subset</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">{</span><span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">}</span>
  <span class="o">(</span><span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">s</span><span class="o">)</span> <span class="o">(</span><span class="n">hs</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">⊆</span> <span class="n">t</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">t</span> <span class="o">:=</span> <span class="n">hs</span> <span class="n">hx</span>

<span class="kd">@[trans]</span> <span class="kd">lemma</span> <span class="n">set.mem_of_mem_of_ssubset</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">{</span><span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">}</span>
  <span class="o">(</span><span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">s</span><span class="o">)</span> <span class="o">(</span><span class="n">hs</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">⊂</span> <span class="n">t</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">t</span> <span class="o">:=</span> <span class="n">hs.1</span> <span class="n">hx</span>

<span class="kd">example</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">{</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">}</span> <span class="o">(</span><span class="n">s</span> <span class="n">t</span> <span class="n">u</span> <span class="o">:</span> <span class="n">set</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">hx</span> <span class="o">:</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">s</span><span class="o">)</span> <span class="o">(</span><span class="n">hs</span> <span class="o">:</span> <span class="n">s</span> <span class="bp">⊆</span> <span class="n">t</span><span class="o">)</span> <span class="o">(</span><span class="n">ht</span> <span class="o">:</span> <span class="n">t</span> <span class="bp">⊂</span> <span class="n">u</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">x</span> <span class="bp">∈</span> <span class="n">u</span> <span class="o">:=</span>
<span class="k">calc</span> <span class="n">x</span> <span class="bp">∈</span> <span class="n">s</span> <span class="o">:</span> <span class="n">hx</span>
   <span class="bp">...</span> <span class="bp">⊆</span> <span class="n">t</span> <span class="o">:</span> <span class="n">hs</span>
   <span class="bp">...</span> <span class="bp">⊂</span> <span class="n">u</span> <span class="o">:</span> <span class="n">ht</span>
</code></pre></div>



<a name="282379836"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282379836" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282379836">(May 15 2022 at 00:24)</a>:</h4>
<p>(That still has the issue you mention though. I just wanted to try using <code>calc</code> for this.)</p>



<a name="282379918"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282379918" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282379918">(May 15 2022 at 00:26)</a>:</h4>
<p>Also, I want to operate with <code>g</code>, not <code>O(g)</code> because we have, e.g., <code>is_O.trans_eventually_eq</code></p>



<a name="282379963"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282379963" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282379963">(May 15 2022 at 00:26)</a>:</h4>
<p>(not yet in <code>master</code>)</p>



<a name="282379975"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282379975" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282379975">(May 15 2022 at 00:26)</a>:</h4>
<p>(it follows from <a href="https://leanprover-community.github.io/mathlib_docs/find/asymptotics.is_O.congr'">docs#asymptotics.is_O.congr'</a>)</p>



<a name="282380165"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282380165" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282380165">(May 15 2022 at 00:31)</a>:</h4>
<p>And once we fix <a href="https://leanprover-community.github.io/mathlib_docs/find/trans_rel_left">docs#trans_rel_left</a>, we'll be able to use (with either notation)</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="k">calc</span> <span class="n">f</span>  <span class="bp">=</span> <span class="n">f'</span> <span class="o">:</span> <span class="n">_</span>
<span class="bp">...</span> <span class="bp">=</span><span class="n">O</span><span class="o">[</span><span class="n">l</span><span class="o">]</span> <span class="n">g</span> <span class="o">:</span> <span class="n">_</span>
<span class="bp">...</span> <span class="bp">=</span> <span class="n">g'</span> <span class="o">:</span> <span class="n">_</span>
</code></pre></div>



<a name="282385541"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282385541" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282385541">(May 15 2022 at 03:06)</a>:</h4>
<p>Another question: can we allow something like this?</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">x</span> <span class="bp">^</span> <span class="mi">2</span> <span class="bp">=</span><span class="n">O</span><span class="o">[</span><span class="n">x</span> <span class="k">in</span> <span class="n">at_top</span><span class="o">]</span> <span class="n">x</span> <span class="bp">^</span> <span class="mi">3</span>
</code></pre></div>



<a name="282385553"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282385553" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282385553">(May 15 2022 at 03:07)</a>:</h4>
<p>IMHO, it looks better than</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="o">(</span><span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span> <span class="bp">^</span> <span class="mi">2</span><span class="o">)</span> <span class="bp">=</span><span class="n">O</span><span class="o">[</span><span class="n">at_top</span><span class="o">]</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span> <span class="bp">^</span> <span class="mi">3</span><span class="o">)</span>
</code></pre></div>



<a name="282385555"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282385555" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282385555">(May 15 2022 at 03:07)</a>:</h4>
<p>(of course, the same applies to other choices)</p>



<a name="282385602"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282385602" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282385602">(May 15 2022 at 03:08)</a>:</h4>
<p>If possible (especially if it's possible to use it with <code>calc</code>), I'd love to have both <code>f =O[l] g</code> and <code>x ^ 2 =O[x in l] x ^ 3</code>.</p>



<a name="282388783"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282388783" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Mario Carneiro <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282388783">(May 15 2022 at 04:34)</a>:</h4>
<p>I toyed around with this a bit, and I think it's not possible in lean 3. The reason is because notations can only bind things to the right of the binder</p>



<a name="282390756"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282390756" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282390756">(May 15 2022 at 05:29)</a>:</h4>
<p>Will it be possible with Lean 4?</p>



<a name="282399296"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282399296" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282399296">(May 15 2022 at 09:12)</a>:</h4>
<p><span class="user-mention silent" data-user-id="214703">Yury G. Kudryashov</span> <a href="#narrow/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60/near/282379918">said</a>:</p>
<blockquote>
<p>Also, I want to operate with <code>g</code>, not <code>O(g)</code> because we have, e.g., <code>is_O.trans_eventually_eq</code></p>
</blockquote>
<p>What's the statement of this lemma?</p>



<a name="282404124"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282404124" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282404124">(May 15 2022 at 11:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="214703">Yury G. Kudryashov</span> <a href="#narrow/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60/near/282379549">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="310045">Eric Wieser</span> <a href="#narrow/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60/near/282377823">said</a>:</p>
<blockquote>
<p>Is changing <a href="https://leanprover-community.github.io/mathlib_docs/find/asymptotics.is_O">docs#asymptotics.is_O</a> to be a set a viable option? Then we wouldn't need any special notation for the relation, and could just use ∈ and ⊆.</p>
</blockquote>
<p>This won't work with <code>calc</code> unless you explicitly use a lemma saying <code>f ∈ O(g) → O(f) ⊆ O(g)</code> and I think that we should hide this from the users of <code>calc</code>.</p>
</blockquote>
<p>I agree this would need such a lemma, but I don't think it's unreasonable to make users use such a lemma; IMO it results in less strange notation.</p>
<p>I assume your other remark would be solved by having a <code>eventually_eq f g -&gt; O(f) = O(g)</code> lemma in the same style.</p>



<a name="282411704"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282411704" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282411704">(May 15 2022 at 14:22)</a>:</h4>
<p><a href="https://github.com/leanprover-community/mathlib/blob/15ee5fb66975bc9dbcc49f8d07da8e3771129067/src/analysis/asymptotics/asymptotics.lean#L264"><code>is_O.trans_eventually_eq</code></a></p>



<a name="282411721"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282411721" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282411721">(May 15 2022 at 14:22)</a>:</h4>
<p>What is the type of <code>O(f)</code>, <code>f : α → E</code>?</p>



<a name="282411739"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282411739" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282411739">(May 15 2022 at 14:23)</a>:</h4>
<p>Note that <a href="https://leanprover-community.github.io/mathlib_docs/find/asymptotics.is_O">docs#asymptotics.is_O</a> allows different codomains for functions.</p>



<a name="282411862"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282411862" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282411862">(May 15 2022 at 14:26)</a>:</h4>
<p>IMHO, making users explicitly use lemmas like <code>f ∈ O(g) → O(f)  ⊆ O(g)</code> makes <code>calc</code> computations with big-O/small-o notation much less convenient</p>



<a name="282411880"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282411880" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282411880">(May 15 2022 at 14:27)</a>:</h4>
<p>For me, the main convenience of <code>calc</code> is that it automatically chooses <code>@[trans]</code> lemmas (also, it's easier to read).</p>



<a name="282416262"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282416262" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282416262">(May 15 2022 at 16:18)</a>:</h4>
<p>I'm suggesting instead of writing <code>is_O f g l</code> we write <code>f ∈ O l g</code>, so instead of</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">is_O</span> <span class="o">:</span> <span class="o">(</span><span class="n">α</span> <span class="bp">→</span> <span class="n">E</span><span class="o">)</span> <span class="bp">→</span> <span class="o">(</span><span class="n">α</span> <span class="bp">→</span> <span class="n">F</span><span class="o">)</span> <span class="bp">→</span> <span class="n">filter</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Prop</span>
</code></pre></div>
<p>we have</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">def</span> <span class="n">O</span> <span class="o">:</span> <span class="n">filter</span> <span class="n">α</span> <span class="bp">→</span> <span class="o">(</span><span class="n">α</span> <span class="bp">→</span> <span class="n">F</span><span class="o">)</span> <span class="bp">→</span> <span class="n">set</span> <span class="o">(</span><span class="n">α</span> <span class="bp">→</span> <span class="n">E</span><span class="o">)</span>
</code></pre></div>
<p>Mathematically the content is identical, it's just an argument permutation and re-folding of <code>set</code>.</p>



<a name="282416503"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282416503" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282416503">(May 15 2022 at 16:23)</a>:</h4>
<p>I think what you'd write as</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="k">calc</span> <span class="n">f₁</span> <span class="bp">=ᶠ</span><span class="o">[</span><span class="n">l</span><span class="o">]</span> <span class="n">f₂</span> <span class="o">:</span> <span class="n">_</span>
    <span class="bp">...</span> <span class="bp">=</span><span class="n">O</span><span class="o">[</span><span class="n">l</span><span class="o">]</span> <span class="n">g</span> <span class="o">:</span> <span class="n">_</span>
    <span class="bp">...</span> <span class="bp">=</span><span class="n">O</span><span class="o">[</span><span class="n">l</span><span class="o">]</span> <span class="n">g₂</span> <span class="o">:</span> <span class="n">_</span>
</code></pre></div>
<p>I'm suggesting we write as</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="k">calc</span> <span class="n">f₁</span> <span class="bp">=ᶠ</span><span class="o">[</span><span class="n">l</span><span class="o">]</span> <span class="n">f₂</span> <span class="o">:</span> <span class="n">_</span>
    <span class="bp">...</span> <span class="bp">∈</span> <span class="n">O</span> <span class="n">l</span> <span class="n">g</span> <span class="o">:</span> <span class="n">_</span>
    <span class="bp">...</span> <span class="bp">=</span> <span class="n">O</span> <span class="n">l</span> <span class="n">g₂</span> <span class="o">:</span> <span class="n">O_congr</span> <span class="n">_</span>
</code></pre></div>



<a name="282416551"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282416551" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282416551">(May 15 2022 at 16:24)</a>:</h4>
<p>Then you really need to use lemmas like <code>O_subset_O_of_mem_O</code>. I really like the fact that <code>f =O[l] g</code> is a relation between two functions. IMHO,</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="k">calc</span> <span class="n">f</span> <span class="bp">=</span><span class="n">O</span><span class="o">[</span><span class="n">l</span><span class="o">]</span> <span class="n">g</span> <span class="o">:</span> <span class="n">_</span>
<span class="bp">...</span> <span class="bp">=</span><span class="n">o</span><span class="o">[</span><span class="n">l</span><span class="o">]</span> <span class="n">g'</span> <span class="o">:</span> <span class="n">_</span>
<span class="bp">...</span> <span class="bp">=ᶠ</span><span class="o">[</span><span class="n">l</span><span class="o">]</span> <span class="n">h</span> <span class="o">:</span> <span class="n">_</span>
</code></pre></div>
<p>looks better than</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="k">calc</span> <span class="n">f</span> <span class="bp">∈</span> <span class="n">O</span> <span class="n">l</span> <span class="n">g</span> <span class="o">:</span> <span class="n">_</span>
<span class="bp">...</span> <span class="bp">⊆</span> <span class="n">o</span> <span class="n">l</span> <span class="n">g'</span> <span class="o">:</span> <span class="n">O_subset_o_of_mem_o</span> <span class="n">_</span>
<span class="bp">...</span> <span class="bp">=</span> <span class="n">o</span> <span class="n">l</span> <span class="n">h</span> <span class="o">:</span> <span class="n">o_congr</span> <span class="n">_</span>
</code></pre></div>



<a name="282416588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282416588" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282416588">(May 15 2022 at 16:26)</a>:</h4>
<p>BTW, I don't know how to make a <code>trans</code> lemma that will make your example work.</p>



<a name="282416627"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282416627" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282416627">(May 15 2022 at 16:26)</a>:</h4>
<p>Which line of my example do you think is missing a trans lemma?</p>



<a name="282416641"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282416641" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282416641">(May 15 2022 at 16:26)</a>:</h4>
<p>How do you glue the first and the second line?</p>



<a name="282416645"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282416645" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282416645">(May 15 2022 at 16:26)</a>:</h4>
<p><code>=ᶠ[l]</code> and <code>∈</code></p>



<a name="282416730"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282416730" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282416730">(May 15 2022 at 16:28)</a>:</h4>
<p>Something like:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">lemma</span> <span class="n">foo</span> <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">f₁</span> <span class="bp">=ᶠ</span><span class="o">[</span><span class="n">l</span><span class="o">]</span> <span class="n">f₂</span><span class="o">)</span> <span class="o">(</span><span class="n">hf_mem</span> <span class="o">:</span> <span class="n">f₂</span> <span class="bp">∈</span> <span class="n">O</span> <span class="n">l</span> <span class="n">g</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">f₁</span> <span class="bp">∈</span> <span class="n">O</span> <span class="n">l</span> <span class="n">g</span> <span class="o">:=</span> <span class="gr">sorry</span>
</code></pre></div>
<p>which I think is just <del>an application of </del> <a href="https://leanprover-community.github.io/mathlib_docs/find/filter.eventually_eq.trans_is_O">docs#filter.eventually_eq.trans_is_O</a> with adjusted notation</p>



<a name="282416742"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282416742" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282416742">(May 15 2022 at 16:28)</a>:</h4>
<p>Are you suggesting it's mathematically false, or that <code>trans</code> doesn't like it?</p>



<a name="282417551"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282417551" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282417551">(May 15 2022 at 16:47)</a>:</h4>
<p>Could you try to make it work with <code>trans</code>, please (e.g., with <code>constant</code>/<code>axiom</code> instead of actual definitions)?</p>



<a name="282417775"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282417775" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282417775">(May 15 2022 at 16:53)</a>:</h4>
<p>I added "define sets <code>O(f)</code> etc" as a choice in the <a href="#narrow/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60/near/282373373">poll</a>. Let me notify all the people who already voted: <span class="user-mention" data-user-id="325367">@Mauricio Collares</span> <span class="user-mention" data-user-id="306601">@Kyle Miller</span> <span class="user-mention" data-user-id="272823">@Anas Himmi</span> <span class="user-mention" data-user-id="459227">@Violeta Hernández</span> <span class="user-mention" data-user-id="110087">@Scott Morrison</span> <span class="user-mention" data-user-id="110050">@Sebastien Gouezel</span> <span class="user-mention" data-user-id="387244">@Yaël Dillies</span> <span class="user-mention" data-user-id="373986">@Kalle Kytölä</span> <span class="user-mention" data-user-id="242586">@Vincent Beffara</span> <span class="user-mention" data-user-id="412682">@Moritz Doll</span> <span class="user-mention" data-user-id="311453">@Frédéric Dupuis</span> <span class="user-mention" data-user-id="268315">@Anatole Dedecker</span><br>
Also, it would be nice to hear from <span class="user-mention" data-user-id="110031">@Patrick Massot</span> <span class="user-mention" data-user-id="260507">@Heather Macbeth</span></p>



<a name="282418205"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282418205" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282418205">(May 15 2022 at 17:03)</a>:</h4>
<p>Should we choose some deadline for the poll so that we don't wait forever? E.g., 24h from now? Or better 48h?</p>



<a name="282418353"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282418353" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282418353">(May 15 2022 at 17:07)</a>:</h4>
<p><span class="user-mention silent" data-user-id="214703">Yury G. Kudryashov</span> <a href="#narrow/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60/near/282417551">said</a>:</p>
<blockquote>
<p>Could you try to make it work with <code>trans</code>, please (e.g., with <code>constant</code>/<code>axiom</code> instead of actual definitions)?</p>
</blockquote>
<p>hmm, you're right; I can't get that to work:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kn">import</span> <span class="n">analysis.asymptotics.asymptotic_equivalent</span>

<span class="kn">open</span> <span class="n">asymptotics</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">α</span> <span class="n">E</span> <span class="n">F</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">[</span><span class="n">normed_group</span> <span class="n">E</span><span class="o">]</span> <span class="o">[</span><span class="n">normed_group</span> <span class="n">F</span><span class="o">]</span>
<span class="kd">variables</span> <span class="o">(</span><span class="n">E</span><span class="o">)</span>

<span class="kd">def</span> <span class="n">O</span> <span class="o">(</span><span class="n">l</span> <span class="o">:</span> <span class="n">filter</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">F</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">α</span> <span class="bp">→</span> <span class="n">E</span><span class="o">)</span> <span class="o">:=</span> <span class="o">{</span><span class="n">f</span> <span class="bp">|</span> <span class="n">is_O</span> <span class="n">f</span> <span class="n">g</span> <span class="n">l</span> <span class="o">}</span>

<span class="kd">variables</span> <span class="o">{</span><span class="n">E</span><span class="o">}</span>

<span class="kd">@[trans, priority 2]</span> <span class="kd">theorem</span> <span class="n">filter.eventually_eq.trans_mem_O</span>
  <span class="o">{</span><span class="n">l</span> <span class="o">:</span> <span class="n">filter</span> <span class="n">α</span><span class="o">}</span> <span class="o">{</span><span class="n">f₁</span> <span class="n">f₂</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">E</span><span class="o">}</span> <span class="o">{</span><span class="n">g</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">F</span><span class="o">}</span>
  <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">f₁</span> <span class="bp">=ᶠ</span><span class="o">[</span><span class="n">l</span><span class="o">]</span> <span class="n">f₂</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">f₂</span> <span class="bp">∈</span> <span class="n">O</span> <span class="n">E</span> <span class="n">l</span> <span class="n">g</span><span class="o">)</span> <span class="o">:</span> <span class="n">f₁</span> <span class="bp">∈</span> <span class="n">O</span> <span class="n">E</span> <span class="n">l</span> <span class="n">g</span> <span class="o">:=</span>
<span class="gr">sorry</span>

<span class="kd">example</span> <span class="o">{</span><span class="n">l</span> <span class="o">:</span> <span class="n">filter</span> <span class="n">α</span><span class="o">}</span> <span class="o">{</span><span class="n">f₁</span> <span class="n">f₂</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">E</span><span class="o">}</span> <span class="o">{</span><span class="n">g₁</span> <span class="n">g₂</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">F</span><span class="o">}</span>
  <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">f₁</span> <span class="bp">=ᶠ</span><span class="o">[</span><span class="n">l</span><span class="o">]</span> <span class="n">f₂</span><span class="o">)</span>
  <span class="o">(</span><span class="n">hfg</span> <span class="o">:</span> <span class="n">f₂</span> <span class="bp">∈</span> <span class="n">O</span> <span class="n">E</span> <span class="n">l</span> <span class="n">g₁</span><span class="o">)</span> <span class="o">:</span> <span class="n">f₁</span> <span class="bp">∈</span> <span class="n">O</span> <span class="n">E</span> <span class="n">l</span> <span class="n">g₁</span> <span class="o">:=</span>
<span class="k">calc</span> <span class="n">f₁</span> <span class="bp">=ᶠ</span><span class="o">[</span><span class="n">l</span><span class="o">]</span> <span class="n">f₂</span> <span class="o">:</span> <span class="n">hf</span>
    <span class="bp">...</span> <span class="bp">∈</span> <span class="n">O</span> <span class="n">E</span> <span class="n">l</span> <span class="n">g₁</span> <span class="o">:</span> <span class="n">hfg</span> <span class="c1">--fails</span>
</code></pre></div>



<a name="282418415"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282418415" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282418415">(May 15 2022 at 17:09)</a>:</h4>
<p><span class="user-mention silent" data-user-id="214703">Yury G. Kudryashov</span> <a href="#narrow/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60/near/282380165">said</a>:</p>
<blockquote>
<p>And once we fix <a href="https://leanprover-community.github.io/mathlib_docs/find/trans_rel_left">docs#trans_rel_left</a>, we'll be able to use (with either notation)</p>
</blockquote>
<p><del>I think this is the reason though; so none of the proposals will work with trans right now</del></p>



<a name="282418425"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282418425" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Bhavik Mehta <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282418425">(May 15 2022 at 17:09)</a>:</h4>
<p>cc <span class="user-mention" data-user-id="252920">@Alex Kontorovich</span> and <span class="user-mention" data-user-id="458865">@Thomas Bloom</span>, since we talked about a similar question a while ago in the context of analytic number theory</p>



<a name="282418726"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282418726" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282418726">(May 15 2022 at 17:17)</a>:</h4>
<blockquote>
<p>hmm, you're right; I can't get that to work:</p>
</blockquote>
<p>I think <code>calc</code> can only match on the head symbol (ie not on the <code>_  ∈ O E l _</code> which has a nested expression), which is rather annoying</p>



<a name="282424457"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282424457" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Patrick Massot <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282424457">(May 15 2022 at 19:20)</a>:</h4>
<p>I slightly prefer the first option but defining sets would also make sense.</p>



<a name="282425997"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282425997" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kalle Kytölä <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282425997">(May 15 2022 at 19:55)</a>:</h4>
<p>I fully agree there should be a deadline for the poll.</p>
<p>In fact it already looks fairly clear that the non-symmetric and non-reflexive equality symbols are the most popular, which just surprises me a bit. Even the (slightly sloppy but) common math notation <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo>=</mo><mi>o</mi><mo stretchy="false">(</mo><mi>g</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f = o(g)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">o</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mclose">)</span></span></span></span> doesn't suggest symmetricity or reflexivity as much as <code>f =o[l] g</code>.</p>



<a name="282426874"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282426874" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Alex Kontorovich <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282426874">(May 15 2022 at 20:14)</a>:</h4>
<p>In many settings, including all of analytic number theory, it is very common to have long strings of arguments like:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="n">f₁</span> <span class="bp">=</span> <span class="n">f₂</span> <span class="bp">+</span> <span class="n">O</span><span class="o">(</span><span class="n">g₁</span><span class="o">)</span>
   <span class="bp">=</span> <span class="n">f₃</span> <span class="bp">+</span> <span class="n">O</span><span class="o">(</span><span class="n">g₂</span><span class="o">)</span>
   <span class="bp">=</span> <span class="bp">...</span>
</code></pre></div>
<p>These mean: <code>|f₁ - f₂| = O(g₁)</code>,  <code>|f₂ - f₃| = O(g₂)</code>, etc, and also <code>g₁≪g₂</code>, etc.  (By the way, here I'm using <code>≪</code> for big-Oh, as used to be the case universally. But then Knuth, just to mess with everybody, redefined it to mean little-oh. So now in CS/algorithms and also parts of pde's etc, you'll see that convention. Not sure what if anything can, or should, be done about this... The absolute worst is seeing topologists write <code>X≫0</code>, which should be totally meaningless...)</p>
<p>Anyway, would be really great if such a thing existed!...</p>



<a name="282427736"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282427736" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282427736">(May 15 2022 at 20:35)</a>:</h4>
<p>Have a look at <a href="https://hal.inria.fr/hal-01719918v3">https://hal.inria.fr/hal-01719918v3</a></p>



<a name="282427740"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282427740" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282427740">(May 15 2022 at 20:35)</a>:</h4>
<p>I'm not ready to implement it in Lean (yet).</p>



<a name="282427891"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282427891" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282427891">(May 15 2022 at 20:39)</a>:</h4>
<p>Note that the equality sign in your notation is not symmetric too.</p>



<a name="282428055"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282428055" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282428055">(May 15 2022 at 20:43)</a>:</h4>
<p><span class="user-mention silent" data-user-id="373986">Kalle Kytölä</span> <a href="#narrow/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60/near/282425997">said</a>:</p>
<blockquote>
<p>I fully agree there should be a deadline for the poll.</p>
<p>In fact it already looks fairly clear that the non-symmetric and non-reflexive equality symbols are the most popular, which just surprises me a bit. Even the (slightly sloppy but) common math notation <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo>=</mo><mi>o</mi><mo stretchy="false">(</mo><mi>g</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f = o(g)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">o</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mclose">)</span></span></span></span> doesn't suggest symmetricity or reflexivity as much as <code>f =o[l] g</code>.</p>
</blockquote>
<p>I suggest that people start reviewing <a href="https://github.com/leanprover-community/mathlib/pull/14129">#14129</a>. If in a day or two another choice will get more votes, then I'll do a search&amp;replace. One exception: if the "define sets" approach wins, then we'll have to discard <a href="https://github.com/leanprover-community/mathlib/pull/14129">#14129</a> and do a completely different refactor.</p>



<a name="282428064"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282428064" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282428064">(May 15 2022 at 20:43)</a>:</h4>
<p>My feeling now is that probably <code>calc</code> needs a rework before the set approach really pays off</p>



<a name="282428197"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282428197" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282428197">(May 15 2022 at 20:47)</a>:</h4>
<p><span class="user-mention silent" data-user-id="214703">Yury G. Kudryashov</span> <a href="#narrow/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60/near/282427736">said</a>:</p>
<blockquote>
<p>Have a look at <a href="https://hal.inria.fr/hal-01719918v3">https://hal.inria.fr/hal-01719918v3</a></p>
</blockquote>
<p>From that paper:</p>
<blockquote>
<p>It is not rare to see this reading enforced by the notation <code>f ∈ o(e)</code> in undergraduate-level teaching, allegedly to prevent students' confusion (see for example in [AF88], a textbook from the eighties still popular in France).</p>
</blockquote>
<p>My background in the area is similar to that of an undergrad, so it's perhaps not surprising what my opinion is</p>



<a name="282428261"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282428261" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282428261">(May 15 2022 at 20:48)</a>:</h4>
<p>Then I suggest that we use one of the other notations for now. If someone wants to define sets, this person needs to (or find someone  to) rework <code>calc</code> first.</p>



<a name="282428360"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282428360" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282428360">(May 15 2022 at 20:50)</a>:</h4>
<p>I think a reference to that paper might be a good idea in the module docstrings, in case we want to explore other options in future</p>



<a name="282428365"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282428365" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Eric Wieser <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282428365">(May 15 2022 at 20:50)</a>:</h4>
<p>It looks like quite an interesting approach</p>



<a name="282433079"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282433079" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282433079">(May 15 2022 at 22:50)</a>:</h4>
<p>I'm not sure if this is already handled somewhere in the PR, but for long strings like in <span class="user-mention" data-user-id="252920">@Alex Kontorovich</span>'s example, we might have some notation something like this:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">notation</span> <span class="n">f</span> <span class="bp">`</span> <span class="bp">=</span> <span class="bp">`</span> <span class="n">g</span> <span class="bp">`</span> <span class="bp">+</span><span class="n">O</span><span class="o">[</span><span class="bp">`</span><span class="o">:</span><span class="mi">65</span> <span class="n">l</span> <span class="bp">`</span><span class="o">](</span><span class="bp">`</span><span class="o">:</span><span class="mi">0</span> <span class="n">k</span> <span class="bp">`</span><span class="o">)</span><span class="bp">`</span> <span class="o">:=</span> <span class="n">is_O</span> <span class="n">l</span> <span class="o">(</span><span class="n">f</span> <span class="bp">-</span> <span class="n">g</span><span class="o">)</span> <span class="n">k</span>

<span class="kd">@[trans]</span> <span class="kd">theorem</span> <span class="n">is_O.trans</span> <span class="o">{</span><span class="n">f</span> <span class="n">f'</span> <span class="n">f''</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">E'</span><span class="o">}</span> <span class="o">{</span><span class="n">g</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">F'</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">=</span> <span class="n">f'</span> <span class="bp">+</span><span class="n">O</span><span class="o">[</span><span class="n">l</span><span class="o">](</span><span class="n">g</span><span class="o">))</span>
  <span class="o">(</span><span class="n">h'</span> <span class="o">:</span> <span class="n">f'</span> <span class="bp">=</span> <span class="n">f''</span> <span class="bp">+</span><span class="n">O</span><span class="o">[</span><span class="n">l</span><span class="o">](</span><span class="n">g</span><span class="o">))</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">=</span> <span class="n">f''</span> <span class="bp">+</span><span class="n">O</span><span class="o">[</span><span class="n">l</span><span class="o">](</span><span class="n">g</span><span class="o">)</span> <span class="o">:=</span> <span class="gr">sorry</span>

<span class="kd">example</span> <span class="o">(</span><span class="n">f</span> <span class="n">g</span> <span class="n">h</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">=</span> <span class="n">g</span> <span class="bp">+</span><span class="n">O</span><span class="o">[</span><span class="n">at_top</span><span class="o">](</span><span class="n">h</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">calc</span> <span class="n">f</span> <span class="bp">=</span> <span class="n">f</span> <span class="bp">+</span><span class="n">O</span><span class="o">[</span><span class="n">at_top</span><span class="o">](</span><span class="n">h</span><span class="o">)</span> <span class="o">:</span> <span class="gr">sorry</span>
   <span class="bp">...</span> <span class="bp">=</span> <span class="n">g</span> <span class="bp">+</span><span class="n">O</span><span class="o">[</span><span class="n">at_top</span><span class="o">](</span><span class="n">h</span><span class="o">)</span> <span class="o">:</span> <span class="gr">sorry</span>
</code></pre></div>
<p>(This is just a quick test that it parses. There's an error due to using <code>is_O l (f - g) k</code> paired with a bug in <code>calc</code>.)</p>



<a name="282433139"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282433139" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282433139">(May 15 2022 at 22:52)</a>:</h4>
<p>Did we already consider the version of the notation with parentheses? It should still work with <code>calc</code>.</p>
<p>Some examples from taking the first couple lemmas in analysis/asymptotics/asymptotics:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">notation</span> <span class="n">f</span> <span class="bp">`</span> <span class="bp">=</span><span class="n">O</span><span class="o">[</span><span class="bp">`</span><span class="o">:</span><span class="mi">50</span> <span class="n">l</span> <span class="bp">`</span><span class="o">](</span><span class="bp">`</span> <span class="n">g</span><span class="o">:</span><span class="mi">0</span> <span class="bp">`</span><span class="o">)</span><span class="bp">`</span> <span class="o">:=</span> <span class="n">is_O</span> <span class="n">l</span> <span class="n">f</span> <span class="n">g</span>

<span class="kd">lemma</span> <span class="n">is_O_iff_is_O_with</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">=</span><span class="n">O</span><span class="o">[</span><span class="n">l</span><span class="o">](</span><span class="n">g</span><span class="o">)</span> <span class="bp">↔</span> <span class="bp">∃</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span> <span class="n">is_O_with</span> <span class="n">c</span> <span class="n">l</span> <span class="n">f</span> <span class="n">g</span> <span class="o">:=</span> <span class="kd">by</span> <span class="n">rw</span> <span class="n">is_O</span>

<span class="kd">lemma</span> <span class="n">is_O_iff</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">=</span><span class="n">O</span><span class="o">[</span><span class="n">l</span><span class="o">](</span><span class="n">g</span><span class="o">)</span> <span class="bp">↔</span> <span class="bp">∃</span> <span class="n">c</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">,</span> <span class="bp">∀ᶠ</span> <span class="n">x</span> <span class="k">in</span> <span class="n">l</span><span class="o">,</span> <span class="bp">∥</span><span class="n">f</span> <span class="n">x</span><span class="bp">∥</span> <span class="bp">≤</span> <span class="n">c</span> <span class="bp">*</span> <span class="bp">∥</span><span class="n">g</span> <span class="n">x</span><span class="bp">∥</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">is_O</span><span class="o">,</span> <span class="n">is_O_with</span><span class="o">]</span>
</code></pre></div>



<a name="282433213"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/282433213" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Kyle Miller <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#282433213">(May 15 2022 at 22:55)</a>:</h4>
<p>Yeah, this parses:</p>
<div class="codehilite" data-code-language="Lean"><pre><span></span><code><span class="kd">example</span> <span class="o">(</span><span class="n">f</span> <span class="n">g</span> <span class="n">h</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="bp">→</span> <span class="n">ℝ</span><span class="o">)</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">=</span><span class="n">O</span><span class="o">[</span><span class="n">at_top</span><span class="o">](</span><span class="n">h</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">calc</span> <span class="n">f</span> <span class="bp">=</span><span class="n">O</span><span class="o">[</span><span class="n">at_top</span><span class="o">](</span><span class="n">g</span><span class="o">)</span> <span class="o">:</span> <span class="gr">sorry</span>
   <span class="bp">...</span> <span class="bp">=</span><span class="n">O</span><span class="o">[</span><span class="n">at_top</span><span class="o">](</span><span class="n">h</span><span class="o">)</span> <span class="o">:</span> <span class="gr">sorry</span>
</code></pre></div>



<a name="284210796"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/284210796" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#284210796">(May 28 2022 at 05:03)</a>:</h4>
<p>Could someone please review <a href="https://github.com/leanprover-community/mathlib/pull/14129">#14129</a>? I'm OK with <code>f =O[l](g)</code> or <code>f =O[l] g</code> notation (BTW, one can write <code>f =O[l](g)</code> with <code>f =O[l] g</code> notation).</p>



<a name="284210837"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Infix%20notation%20for%20%60is_O%60/%60is_o%60/near/284210837" class="zl"><img src="https://leanprover-community.github.io/archive/assets/img/zulip2.png" alt="view this post on Zulip"></a> Yury G. Kudryashov <a href="https://leanprover-community.github.io/archive/stream/116395-maths/topic/Infix.20notation.20for.20.60is_O.60.2F.60is_o.60.html#284210837">(May 28 2022 at 05:04)</a>:</h4>
<p>I'm afraid that the PR will rot.</p>



{% endraw %}

<hr><p>Last updated: Jan 25 2023 at 00:06 UTC</p>